//Three JS
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).THREE={})}(this,function(t){function e(){}function i(t,e){this.x=t||0,this.y=e||0}function n(t,e,i,n){this._x=t||0,this._y=e||0,this._z=i||0,this._w=void 0!==n?n:1}function r(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0}function a(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function o(t,e,n,r,s,c,h,l,u,p){Object.defineProperty(this,"id",{value:rj++}),this.uuid=rS.generateUUID(),this.name="",this.image=void 0!==t?t:o.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:o.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:1001,this.wrapT=void 0!==r?r:1001,this.magFilter=void 0!==s?s:1006,this.minFilter=void 0!==c?c:1008,this.anisotropy=void 0!==u?u:1,this.format=void 0!==h?h:1023,this.type=void 0!==l?l:1009,this.offset=new i(0,0),this.repeat=new i(1,1),this.center=new i(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new a,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==p?p:3e3,this.version=0,this.onUpdate=null}function s(t,e,i,n){this.x=t||0,this.y=e||0,this.z=i||0,this.w=void 0!==n?n:1}function c(t,e,i){this.width=t,this.height=e,this.scissor=new s(0,0,t,e),this.scissorTest=!1,this.viewport=new s(0,0,t,e),i=i||{},this.texture=new o(void 0,void 0,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:1006,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0===i.stencilBuffer||i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null}function h(t,e,i){c.call(this,t,e,i),this.samples=4}function l(t,e,i){c.call(this,t,e,i)}function u(t,e,i,n,r,a,s,c,h,l,u,p){o.call(this,null,a,s,c,h,l,n,r,u,p),this.image={data:t,width:e,height:i},this.magFilter=void 0!==h?h:1003,this.minFilter=void 0!==l?l:1003,this.flipY=this.generateMipmaps=!1,this.unpackAlignment=1}function p(t,e){this.min=void 0!==t?t:new r(1/0,1/0,1/0),this.max=void 0!==e?e:new r(-1/0,-1/0,-1/0)}function d(t,e){this.center=void 0!==t?t:new r,this.radius=void 0!==e?e:0}function f(t,e){this.normal=void 0!==t?t:new r(1,0,0),this.constant=void 0!==e?e:0}function m(t,e,i,n,r,a){this.planes=[void 0!==t?t:new f,void 0!==e?e:new f,void 0!==i?i:new f,void 0!==n?n:new f,void 0!==r?r:new f,void 0!==a?a:new f]}function g(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function v(t){var e,i={};for(e in t)for(var n in i[e]={},t[e]){var r=t[e][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?i[e][n]=r.clone():Array.isArray(r)?i[e][n]=r.slice():i[e][n]=r}return i}function y(t){for(var e={},i=0;i<t.length;i++){var n,r=v(t[i]);for(n in r)e[n]=r[n]}return e}function $(t,e,i){return void 0===e&&void 0===i?this.set(t):this.setRGB(t,e,i)}function x(){function t(r,a){!1!==i&&(n(r,a),e.requestAnimationFrame(t))}var e=null,i=!1,n=null;return{start:function(){!0!==i&&null!==n&&(e.requestAnimationFrame(t),i=!0)},stop:function(){i=!1},setAnimationLoop:function(t){n=t},setContext:function(t){e=t}}}function _(t){var e=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),e.get(t)},remove:function(i){i.isInterleavedBufferAttribute&&(i=i.data);var n=e.get(i);n&&(t.deleteBuffer(n.buffer),e.delete(i))},update:function(i,n){i.isInterleavedBufferAttribute&&(i=i.data);var r,a,o,s,c,h=e.get(i);if(void 0===h)e.set(i,(r=i,a=n,o=r.array,s=r.dynamic?35048:35044,c=t.createBuffer(),t.bindBuffer(a,c),t.bufferData(a,o,s),r.onUploadCallback(),a=5126,o instanceof Float32Array?a=5126:o instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):o instanceof Uint16Array?a=5123:o instanceof Int16Array?a=5122:o instanceof Uint32Array?a=5125:o instanceof Int32Array?a=5124:o instanceof Int8Array?a=5120:o instanceof Uint8Array&&(a=5121),{buffer:c,type:a,bytesPerElement:o.BYTES_PER_ELEMENT,version:r.version}));else if(h.version<i.version){var l=i,u=l.array,p=l.updateRange;t.bindBuffer(n,h.buffer),!1===l.dynamic?t.bufferData(n,u,35044):-1===p.count?t.bufferSubData(n,0,u):0===p.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(n,p.offset*u.BYTES_PER_ELEMENT,u.subarray(p.offset,p.offset+p.count)),p.count=-1),h.version=i.version}}}}function w(t,e,i,n,a,o){this.a=t,this.b=e,this.c=i,this.normal=n&&n.isVector3?n:new r,this.vertexNormals=Array.isArray(n)?n:[],this.color=a&&a.isColor?a:new $,this.vertexColors=Array.isArray(a)?a:[],this.materialIndex=void 0!==o?o:0}function b(t,e,i,n){this._x=t||0,this._y=e||0,this._z=i||0,this._order=n||b.DefaultOrder}function E(){this.mask=1}function M(){Object.defineProperty(this,"id",{value:a$++}),this.uuid=rS.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=M.DefaultUp.clone();var t=new r,e=new b,i=new n,o=new r(1,1,1);e.onChange(function(){i.setFromEuler(e,!1)}),i.onChange(function(){e.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new g},normalMatrix:{value:new a}}),this.matrix=new g,this.matrixWorld=new g,this.matrixAutoUpdate=M.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new E,this.visible=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function S(){Object.defineProperty(this,"id",{value:aS+=2}),this.uuid=rS.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function T(t,e,i){if(Array.isArray(t))throw TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===i,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function L(t,e,i){T.call(this,new Int8Array(t),e,i)}function A(t,e,i){T.call(this,new Uint8Array(t),e,i)}function P(t,e,i){T.call(this,new Uint8ClampedArray(t),e,i)}function R(t,e,i){T.call(this,new Int16Array(t),e,i)}function C(t,e,i){T.call(this,new Uint16Array(t),e,i)}function I(t,e,i){T.call(this,new Int32Array(t),e,i)}function D(t,e,i){T.call(this,new Uint32Array(t),e,i)}function B(t,e,i){T.call(this,new Float32Array(t),e,i)}function z(t,e,i){T.call(this,new Float64Array(t),e,i)}function N(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function G(t){if(0===t.length)return-1/0;for(var e=t[0],i=1,n=t.length;i<n;++i)t[i]>e&&(e=t[i]);return e}function U(){Object.defineProperty(this,"id",{value:aN+=2}),this.uuid=rS.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.drawRange={start:0,count:1/0},this.userData={}}function F(t,e,i,n,r,a){S.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:r,depthSegments:a},this.fromBufferGeometry(new H(t,e,i,n,r,a)),this.mergeVertices()}function H(t,e,i,n,a,o){function s(t,e,i,n,a,o,s,m,g,v,y){var $=o/g,x=s/v,_=o/2,w=s/2,b=m/2;s=g+1;var E,M,S=v+1,T=o=0,L=new r;for(M=0;M<S;M++){var A=M*x-w;for(E=0;E<s;E++)L[t]=(E*$-_)*n,L[e]=A*a,L[i]=b,l.push(L.x,L.y,L.z),L[t]=0,L[e]=0,L[i]=0<m?1:-1,u.push(L.x,L.y,L.z),p.push(E/g),p.push(1-M/v),o+=1}for(M=0;M<v;M++)for(E=0;E<g;E++)t=d+E+s*(M+1),e=d+(E+1)+s*(M+1),i=d+(E+1)+s*M,h.push(d+E+s*M,t,i),h.push(t,e,i),T+=6;c.addGroup(f,T,y),f+=T,d+=o}U.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:a,depthSegments:o};var c=this;t=t||1,e=e||1,i=i||1,n=Math.floor(n)||1,a=Math.floor(a)||1;var h=[],l=[],u=[],p=[],d=0,f=0;s("z","y","x",-1,-1,i,e,t,o=Math.floor(o)||1,a,0),s("z","y","x",1,-1,i,e,-t,o,a,1),s("x","z","y",1,1,t,i,e,n,o,2),s("x","z","y",1,-1,t,i,-e,n,o,3),s("x","y","z",1,-1,t,e,i,n,a,4),s("x","y","z",-1,-1,t,e,-i,n,a,5),this.setIndex(h),this.addAttribute("position",new B(l,3)),this.addAttribute("normal",new B(u,3)),this.addAttribute("uv",new B(p,2))}function O(t,e,i,n){S.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n},this.fromBufferGeometry(new V(t,e,i,n)),this.mergeVertices()}function V(t,e,i,n){U.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n};var r=(t=t||1)/2,a=(e=e||1)/2,o=(i=Math.floor(i)||1)+1,s=(n=Math.floor(n)||1)+1,c=t/i,h=e/n,l=[],u=[],p=[],d=[];for(t=0;t<s;t++){var f=t*h-a;for(e=0;e<o;e++)u.push(e*c-r,-f,0),p.push(0,0,1),d.push(e/i),d.push(1-t/n)}for(t=0;t<n;t++)for(e=0;e<i;e++)r=e+o*(t+1),a=e+1+o*(t+1),s=e+1+o*t,l.push(e+o*t,r,s),l.push(r,a,s);this.setIndex(l),this.addAttribute("position",new B(u,3)),this.addAttribute("normal",new B(p,3)),this.addAttribute("uv",new B(d,2))}function k(){Object.defineProperty(this,"id",{value:oi++}),this.uuid=rS.generateUUID(),this.name="",this.type="Material",this.lights=this.fog=!0,this.blending=1,this.side=0,this.vertexTangents=this.flatShading=!1,this.vertexColors=0,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null,this.depthFunc=3,this.depthWrite=this.depthTest=!0,this.clippingPlanes=null,this.clipShadows=this.clipIntersection=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetUnits=this.polygonOffsetFactor=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.userData={},this.needsUpdate=!0}function W(t){k.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function j(t,e){this.origin=void 0!==t?t:new r,this.direction=void 0!==e?e:new r}function q(t,e,i){this.a=void 0!==t?t:new r,this.b=void 0!==e?e:new r,this.c=void 0!==i?i:new r}function X(t){k.call(this),this.type="MeshBasicMaterial",this.color=new $(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.lights=this.morphTargets=this.skinning=!1,this.setValues(t)}function Y(t,e){M.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new U,this.material=void 0!==e?e:new X({color:16777215*Math.random()}),this.drawMode=0,this.updateMorphTargets()}function Z(t,e,i,n){function r(t,i){e.buffers.color.setClear(t.r,t.g,t.b,i,n)}var a,o,s=new $(0),c=0,h=null,l=0;return{getClearColor:function(){return s},setClearColor:function(t,e){s.set(t),r(s,c=void 0!==e?e:1)},getClearAlpha:function(){return c},setClearAlpha:function(t){r(s,c=t)},render:function(e,n,u,p){n=n.background,(u=(u=t.vr).getSession&&u.getSession())&&"additive"===u.environmentBlendMode&&(n=null),null===n?(r(s,c),h=null,l=0):n&&n.isColor&&(r(n,1),p=!0,h=null,l=0),(t.autoClear||p)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),n&&(n.isCubeTexture||n.isWebGLRenderTargetCube)?(void 0===o&&((o=new Y(new H(1,1,1),new W({type:"BackgroundCubeMaterial",uniforms:v(at.cube.uniforms),vertexShader:at.cube.vertexShader,fragmentShader:at.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),o.geometry.removeAttribute("uv"),o.onBeforeRender=function(t,e,i){this.matrixWorld.copyPosition(i.matrixWorld)},Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.tCube.value}}),i.update(o)),p=n.isWebGLRenderTargetCube?n.texture:n,o.material.uniforms.tCube.value=p,o.material.uniforms.tFlip.value=n.isWebGLRenderTargetCube?1:-1,(h!==n||l!==p.version)&&(o.material.needsUpdate=!0,h=n,l=p.version),e.unshift(o,o.geometry,o.material,0,0,null)):n&&n.isTexture&&(void 0===a&&((a=new Y(new V(2,2),new W({type:"BackgroundMaterial",uniforms:v(at.background.uniforms),vertexShader:at.background.vertexShader,fragmentShader:at.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(a)),a.material.uniforms.t2D.value=n,!0===n.matrixAutoUpdate&&n.updateMatrix(),a.material.uniforms.uvTransform.value.copy(n.matrix),(h!==n||l!==n.version)&&(a.material.needsUpdate=!0,h=n,l=n.version),e.unshift(a,a.geometry,a.material,0,0,null))}}}function J(t,e,i,n){var r;this.setMode=function(t){r=t},this.render=function(e,n){t.drawArrays(r,e,n),i.update(n,r)},this.renderInstances=function(a,o,s){if(n.isWebGL2)var c=t;else if(null===(c=e.get("ANGLE_instanced_arrays"))){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}c[n.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](r,o,s,a.maxInstancedCount),i.update(s,r,a.maxInstancedCount)}}function Q(t,e,i){function n(e){if("highp"===e){if(0<t.getShaderPrecisionFormat(35633,36338).precision&&0<t.getShaderPrecisionFormat(35632,36338).precision)return"highp";e="mediump"}return"mediump"===e&&0<t.getShaderPrecisionFormat(35633,36337).precision&&0<t.getShaderPrecisionFormat(35632,36337).precision?"mediump":"lowp"}var r,a="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext,o=void 0!==i.precision?i.precision:"highp",s=n(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s),i=!0===i.logarithmicDepthBuffer,s=t.getParameter(34930);var c=t.getParameter(35660),h=t.getParameter(3379),l=t.getParameter(34076),u=t.getParameter(34921),p=t.getParameter(36347),d=t.getParameter(36348),f=t.getParameter(36349),m=0<c,g=a||!!e.get("OES_texture_float"),v=a?t.getParameter(36183):0;return{isWebGL2:a,getMaxAnisotropy:function(){if(void 0!==r)return r;var i=e.get("EXT_texture_filter_anisotropic");return r=null!==i?t.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:n,precision:o,logarithmicDepthBuffer:i,maxTextures:s,maxVertexTextures:c,maxTextureSize:h,maxCubemapSize:l,maxAttributes:u,maxVertexUniforms:p,maxVaryings:d,maxFragmentUniforms:f,vertexTextures:m,floatFragmentTextures:g,floatVertexTextures:m&&g,maxSamples:v}}function K(){function t(){l.value!==n&&(l.value=n,l.needsUpdate=0<r),i.numPlanes=r,i.numIntersection=0}function e(t,e,n,r){var a=null!==t?t.length:0,o=null;if(0!==a){if(o=l.value,!0!==r||null===o)for(r=n+4*a,e=e.matrixWorldInverse,h.getNormalMatrix(e),(null===o||o.length<r)&&(o=new Float32Array(r)),r=0;r!==a;++r,n+=4)c.copy(t[r]).applyMatrix4(e,h),c.normal.toArray(o,n),o[n+3]=c.constant;l.value=o,l.needsUpdate=!0}return i.numPlanes=a,o}var i=this,n=null,r=0,o=!1,s=!1,c=new f,h=new a,l={value:null,needsUpdate:!1};this.uniform=l,this.numIntersection=this.numPlanes=0,this.init=function(t,i,a){var s=0!==t.length||i||0!==r||o;return o=i,n=e(t,a,0),r=t.length,s},this.beginShadows=function(){s=!0,e(null)},this.endShadows=function(){s=!1,t()},this.setState=function(i,a,c,h,u,p){if(o&&null!==i&&0!==i.length&&(!s||c)){var d=4*(c=s?0:r),f=u.clippingState||null;for(l.value=f,f=e(i,h,d,p),i=0;i!==d;++i)f[i]=n[i];u.clippingState=f,this.numIntersection=a?this.numPlanes:0,this.numPlanes+=c}else s?e(null):t()}}function tt(t){var e={};return{get:function(i){if(void 0!==e[i])return e[i];switch(i){case"WEBGL_depth_texture":var n=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=t.getExtension(i)}return null===n&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),e[i]=n}}}function te(t,e,i){function n(t){var o=t.target;for(var s in null!==(t=r[o.id]).index&&e.remove(t.index),t.attributes)e.remove(t.attributes[s]);o.removeEventListener("dispose",n),delete r[o.id],(s=a[t.id])&&(e.remove(s),delete a[t.id]),i.memory.geometries--}var r={},a={};return{get:function(t,e){var a=r[e.id];return a||(e.addEventListener("dispose",n),e.isBufferGeometry?a=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new U).setFromObject(t)),a=e._bufferGeometry),r[e.id]=a,i.memory.geometries++),a},update:function(t){var i=t.index,n=t.attributes;for(var r in null!==i&&e.update(i,34963),n)e.update(n[r],34962);for(r in t=t.morphAttributes){i=t[r],n=0;for(var a=i.length;n<a;n++)e.update(i[n],34962)}},getWireframeAttribute:function(t){var i=a[t.id];if(i)return i;i=[];var n=t.index,r=t.attributes;if(null!==n){n=n.array,r=0;for(var o=n.length;r<o;r+=3){var s=n[r+0],c=n[r+1],h=n[r+2];i.push(s,c,c,h,h,s)}}else for(n=r.position.array,r=0,o=n.length/3-1;r<o;r+=3)s=r+0,c=r+1,h=r+2,i.push(s,c,c,h,h,s);return i=new(65535<G(i)?D:C)(i,1),e.update(i,34963),a[t.id]=i}}}function ti(t,e,i,n){var r,a,o;this.setMode=function(t){r=t},this.setIndex=function(t){a=t.type,o=t.bytesPerElement},this.render=function(e,n){t.drawElements(r,n,a,e*o),i.update(n,r)},this.renderInstances=function(s,c,h){if(n.isWebGL2)var l=t;else if(null===(l=e.get("ANGLE_instanced_arrays"))){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}l[n.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](r,h,a,c*o,s.maxInstancedCount),i.update(h,r,s.maxInstancedCount)}}function tn(t){var e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,i,n){switch(n=n||1,e.calls++,i){case 4:e.triangles+=t/3*n;break;case 5:case 6:e.triangles+=n*(t-2);break;case 1:e.lines+=t/2*n;break;case 3:e.lines+=n*(t-1);break;case 2:e.lines+=n*t;break;case 0:e.points+=n*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",i)}}}}function tr(t,e){return Math.abs(e[1])-Math.abs(t[1])}function ta(t){var e={},i=new Float32Array(8);return{update:function(n,r,a,o){var s=n.morphTargetInfluences,c=s.length;if(void 0===(n=e[r.id])){n=[];for(var h=0;h<c;h++)n[h]=[h,0];e[r.id]=n}var l=a.morphTargets&&r.morphAttributes.position;for(h=0,a=a.morphNormals&&r.morphAttributes.normal;h<c;h++){var u=n[h];0!==u[1]&&(l&&r.removeAttribute("morphTarget"+h),a&&r.removeAttribute("morphNormal"+h))}for(h=0;h<c;h++)(u=n[h])[0]=h,u[1]=s[h];for(n.sort(tr),h=0;8>h;h++){if((u=n[h])&&(s=u[0],c=u[1])){l&&r.addAttribute("morphTarget"+h,l[s]),a&&r.addAttribute("morphNormal"+h,a[s]),i[h]=c;continue}i[h]=0}o.getUniforms().setValue(t,"morphTargetInfluences",i)}}}function to(t,e){var i={};return{update:function(n){var r=e.render.frame,a=n.geometry,o=t.get(n,a);return i[o.id]!==r&&(a.isGeometry&&o.updateFromObject(n),t.update(o),i[o.id]=r),o},dispose:function(){i={}}}}function ts(t,e,i,n,r,a,s,c,h,l){t=void 0!==t?t:[],o.call(this,t,void 0!==e?e:301,i,n,r,a,void 0!==s?s:1022,c,h,l),this.flipY=!1}function tc(t,e,i,n){o.call(this,null),this.image={data:t,width:e,height:i,depth:n},this.minFilter=this.magFilter=1003,this.wrapR=1001,this.flipY=this.generateMipmaps=!1}function th(t,e,i,n){o.call(this,null),this.image={data:t,width:e,height:i,depth:n},this.minFilter=this.magFilter=1003,this.wrapR=1001,this.flipY=this.generateMipmaps=!1}function tl(t,e,i){var n=t[0];if(0>=n||0<n)return t;var r=e*i,a=os[r];if(void 0===a&&(a=new Float32Array(r),os[r]=a),0!==e)for(n.toArray(a,0),n=1,r=0;n!==e;++n)r+=i,t[n].toArray(a,r);return a}function tu(t,e){if(t.length!==e.length)return!1;for(var i=0,n=t.length;i<n;i++)if(t[i]!==e[i])return!1;return!0}function tp(t,e){for(var i=0,n=e.length;i<n;i++)t[i]=e[i]}function td(t,e){var i=oc[e];void 0===i&&(i=new Int32Array(e),oc[e]=i);for(var n=0;n!==e;++n)i[n]=t.allocateTextureUnit();return i}function tf(t,e){var i=this.cache;i[0]!==e&&(t.uniform1f(this.addr,e),i[0]=e)}function tm(t,e){var i=this.cache;i[0]!==e&&(t.uniform1i(this.addr,e),i[0]=e)}function tg(t,e){var i=this.cache;void 0!==e.x?(i[0]!==e.x||i[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y):tu(i,e)||(t.uniform2fv(this.addr,e),tp(i,e))}function tv(t,e){var i=this.cache;void 0!==e.x?(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z):void 0!==e.r?(i[0]!==e.r||i[1]!==e.g||i[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),i[0]=e.r,i[1]=e.g,i[2]=e.b):tu(i,e)||(t.uniform3fv(this.addr,e),tp(i,e))}function ty(t,e){var i=this.cache;void 0!==e.x?(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z||i[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w):tu(i,e)||(t.uniform4fv(this.addr,e),tp(i,e))}function t$(t,e){var i=this.cache,n=e.elements;void 0===n?tu(i,e)||(t.uniformMatrix2fv(this.addr,!1,e),tp(i,e)):tu(i,n)||(ou.set(n),t.uniformMatrix2fv(this.addr,!1,ou),tp(i,n))}function tx(t,e){var i=this.cache,n=e.elements;void 0===n?tu(i,e)||(t.uniformMatrix3fv(this.addr,!1,e),tp(i,e)):tu(i,n)||(ol.set(n),t.uniformMatrix3fv(this.addr,!1,ol),tp(i,n))}function t_(t,e){var i=this.cache,n=e.elements;void 0===n?tu(i,e)||(t.uniformMatrix4fv(this.addr,!1,e),tp(i,e)):tu(i,n)||(oh.set(n),t.uniformMatrix4fv(this.addr,!1,oh),tp(i,n))}function tw(t,e,i){var n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.safeSetTexture2D(e||on,r)}function tb(t,e,i){var n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.setTexture2DArray(e||or,r)}function t8(t,e,i){var n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.setTexture3D(e||oa,r)}function tE(t,e,i){var n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.safeSetTextureCube(e||oo,r)}function tM(t,e){var i=this.cache;tu(i,e)||(t.uniform2iv(this.addr,e),tp(i,e))}function tS(t,e){var i=this.cache;tu(i,e)||(t.uniform3iv(this.addr,e),tp(i,e))}function tT(t,e){var i=this.cache;tu(i,e)||(t.uniform4iv(this.addr,e),tp(i,e))}function t1(t,e){var i=this.cache;tu(i,e)||(t.uniform1fv(this.addr,e),tp(i,e))}function t0(t,e){var i=this.cache;tu(i,e)||(t.uniform1iv(this.addr,e),tp(i,e))}function tL(t,e){var i;tu(this.cache,e=tl(e,this.size,2))||(t.uniform2fv(this.addr,e),this.updateCache(e))}function tA(t,e){var i;tu(this.cache,e=tl(e,this.size,3))||(t.uniform3fv(this.addr,e),this.updateCache(e))}function tP(t,e){var i;tu(this.cache,e=tl(e,this.size,4))||(t.uniform4fv(this.addr,e),this.updateCache(e))}function tR(t,e){var i;tu(this.cache,e=tl(e,this.size,4))||(t.uniformMatrix2fv(this.addr,!1,e),this.updateCache(e))}function tC(t,e){var i;tu(this.cache,e=tl(e,this.size,9))||(t.uniformMatrix3fv(this.addr,!1,e),this.updateCache(e))}function tI(t,e){var i;tu(this.cache,e=tl(e,this.size,16))||(t.uniformMatrix4fv(this.addr,!1,e),this.updateCache(e))}function tD(t,e,i){var n=this.cache,r=e.length,a=td(i,r);for(!1===tu(n,a)&&(t.uniform1iv(this.addr,a),tp(n,a)),t=0;t!==r;++t)i.safeSetTexture2D(e[t]||on,a[t])}function tB(t,e,i){var n=this.cache,r=e.length,a=td(i,r);for(!1===tu(n,a)&&(t.uniform1iv(this.addr,a),tp(n,a)),t=0;t!==r;++t)i.safeSetTextureCube(e[t]||oo,a[t])}function tz(t,e,i){this.id=t,this.addr=i,this.cache=[],this.setValue=function t(e){switch(e){case 5126:return tf;case 35664:return tg;case 35665:return tv;case 35666:return ty;case 35674:return t$;case 35675:return tx;case 35676:return t_;case 35678:case 36198:return tw;case 35679:return t8;case 35680:return tE;case 36289:return tb;case 5124:case 35670:return tm;case 35667:case 35671:return tM;case 35668:case 35672:return tS;case 35669:case 35673:return tT}}(e.type)}function tN(t,e,i){this.id=t,this.addr=i,this.cache=[],this.size=e.size,this.setValue=function t(e){switch(e){case 5126:return t1;case 35664:return tL;case 35665:return tA;case 35666:return tP;case 35674:return tR;case 35675:return tC;case 35676:return tI;case 35678:return tD;case 35680:return tB;case 5124:case 35670:return t0;case 35667:case 35671:return tM;case 35668:case 35672:return tS;case 35669:case 35673:return tT}}(e.type)}function t2(t){this.id=t,this.seq=[],this.map={}}function tG(t,e){this.seq=[],this.map={};for(var i=t.getProgramParameter(e,35718),n=0;n<i;++n){var r=t.getActiveUniform(e,n),a=t.getUniformLocation(e,r.name),o=this,s=r.name,c=s.length;for(op.lastIndex=0;;){var h=op.exec(s),l=op.lastIndex,u=h[1],p=h[3];if("]"===h[2]&&(u|=0),void 0===p||"["===p&&l+2===c){s=o,r=void 0===p?new tz(u,r,a):new tN(u,r,a),s.seq.push(r),s.map[r.id]=r;break}void 0===(p=o.map[u])&&(p=new t2(u),u=o,o=p,u.seq.push(o),u.map[o.id]=o),o=p}}}function tU(t,e,i,n){var r=t.createShader(e);return t.shaderSource(r,i),t.compileShader(r),!0===n&&(!1===t.getShaderParameter(r,35713)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(r)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",35633===e?"vertex":"fragment",t.getShaderInfoLog(r),function t(e){e=e.split("\n");for(var i=0;i<e.length;i++)e[i]=i+1+": "+e[i];return e.join("\n")}(i))),r}function tF(t){switch(t){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw Error("unsupported encoding: "+t)}}function t3(t,e){return"vec4 "+t+"( vec4 value ) { return "+(e=tF(e))[0]+"ToLinear"+e[1]+"; }"}function tH(t){return""!==t}function tO(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function tV(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}function t4(t){return t.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,function(t,e){if(void 0===(t=rZ[e]))throw Error("Can not resolve #include <"+e+">");return t4(t)})}function tk(t){return t.replace(/#pragma unroll_loop[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(t,e,i,n){for(t="",e=parseInt(e);e<parseInt(i);e++)t+=n.replace(/\[ i \]/g,"[ "+e+" ]");return t})}function tW(t,e,i,n,r,a,o,s){var c,h,l=t.context,u=n.defines,p=r.vertexShader,d=r.fragmentShader,f="SHADOWMAP_TYPE_BASIC";1===a.shadowMapType?f="SHADOWMAP_TYPE_PCF":2===a.shadowMapType&&(f="SHADOWMAP_TYPE_PCF_SOFT");var m="ENVMAP_TYPE_CUBE",g="ENVMAP_MODE_REFLECTION",v="ENVMAP_BLENDING_MULTIPLY";if(a.envMap){switch(n.envMap.mapping){case 301:case 302:m="ENVMAP_TYPE_CUBE";break;case 306:case 307:m="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:m="ENVMAP_TYPE_EQUIREC";break;case 305:m="ENVMAP_TYPE_SPHERE"}switch(n.envMap.mapping){case 302:case 304:g="ENVMAP_MODE_REFRACTION"}switch(n.combine){case 0:v="ENVMAP_BLENDING_MULTIPLY";break;case 1:v="ENVMAP_BLENDING_MIX";break;case 2:v="ENVMAP_BLENDING_ADD"}}var y,$,x,_,w=0<t.gammaFactor?t.gammaFactor:1,b=o.isWebGL2?"":(y=n.extensions,$=a,x=e,[(y=y||{}).derivatives||$.envMapCubeUV||$.bumpMap||$.normalMap&&!$.objectSpaceNormalMap||$.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(y.fragDepth||$.logarithmicDepthBuffer)&&x.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",y.drawBuffers&&x.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(y.shaderTextureLOD||$.envMap)&&x.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(tH).join("\n")),E=function t(e){var i,n=[];for(i in e){var r=e[i];!1!==r&&n.push("#define "+i+" "+r)}return n.join("\n")}(u),M=l.createProgram();return n.isRawShaderMaterial?(0<(u=[E].filter(tH).join("\n")).length&&(u+="\n"),0<(e=[b,E].filter(tH).join("\n")).length&&(e+="\n")):(u=["precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+r.name,E,a.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+w,"#define MAX_BONES "+a.maxBones,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+g:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors?"#define USE_COLOR":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&!1===a.flatShading?"#define USE_MORPHNORMALS":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+f:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(o.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif","\n"].filter(tH).join("\n"),e=[b,"precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+r.name,E,a.alphaTest?"#define ALPHATEST "+a.alphaTest+(a.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+w,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.matcap?"#define USE_MATCAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+m:"",a.envMap?"#define "+g:"",a.envMap?"#define "+v:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors?"#define USE_COLOR":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+f:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(o.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",a.envMap&&(o.isWebGL2||e.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",0!==a.toneMapping?"#define TONE_MAPPING":"",0!==a.toneMapping?rZ.tonemapping_pars_fragment:"",0!==a.toneMapping?function t(e,i){switch(i){case 1:i="Linear";break;case 2:i="Reinhard";break;case 3:i="Uncharted2";break;case 4:i="OptimizedCineon";break;case 5:i="ACESFilmic";break;default:throw Error("unsupported toneMapping: "+i)}return"vec3 "+e+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",a.outputEncoding||a.mapEncoding||a.matcapEncoding||a.envMapEncoding||a.emissiveMapEncoding?rZ.encodings_pars_fragment:"",a.mapEncoding?t3("mapTexelToLinear",a.mapEncoding):"",a.matcapEncoding?t3("matcapTexelToLinear",a.matcapEncoding):"",a.envMapEncoding?t3("envMapTexelToLinear",a.envMapEncoding):"",a.emissiveMapEncoding?t3("emissiveMapTexelToLinear",a.emissiveMapEncoding):"",a.outputEncoding?"vec4 linearToOutputTexel( vec4 value ) { return LinearTo"+(_=tF(_=a.outputEncoding))[0]+_[1]+"; }":"",a.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(tH).join("\n")),p=tV(p=tO(p=t4(p),a),a),d=tV(d=tO(d=t4(d),a),a),p=tk(p),d=tk(d),o.isWebGL2&&!n.isRawShaderMaterial&&(o=!1,f=/^\s*#version\s+300\s+es\s*\n/,n.isShaderMaterial&&null!==p.match(f)&&null!==d.match(f)&&(o=!0,p=p.replace(f,""),d=d.replace(f,"")),u="#version 300 es\n\n#define attribute in\n#define varying out\n#define texture2D texture\n"+u,e=["#version 300 es\n\n#define varying in",o?"":"out highp vec4 pc_fragColor;",o?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth\n#define texture2D texture\n#define textureCube texture\n#define texture2DProj textureProj\n#define texture2DLodEXT textureLod\n#define texture2DProjLodEXT textureProjLod\n#define textureCubeLodEXT textureLod\n#define texture2DGradEXT textureGrad\n#define texture2DProjGradEXT textureProjGrad\n#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+e),d=e+d,p=tU(l,35633,u+p,t.debug.checkShaderErrors),d=tU(l,35632,d,t.debug.checkShaderErrors),l.attachShader(M,p),l.attachShader(M,d),void 0!==n.index0AttributeName?l.bindAttribLocation(M,0,n.index0AttributeName):!0===a.morphTargets&&l.bindAttribLocation(M,0,"position"),l.linkProgram(M),t.debug.checkShaderErrors&&(t=l.getProgramInfoLog(M).trim(),a=l.getShaderInfoLog(p).trim(),o=l.getShaderInfoLog(d).trim(),m=f=!0,!1===l.getProgramParameter(M,35714)?(f=!1,console.error("THREE.WebGLProgram: shader error: ",l.getError(),"35715",l.getProgramParameter(M,35715),"gl.getProgramInfoLog",t,a,o)):""!==t?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",t):(""===a||""===o)&&(m=!1),m&&(this.diagnostics={runnable:f,material:n,programLog:t,vertexShader:{log:a,prefix:u},fragmentShader:{log:o,prefix:e}})),l.deleteShader(p),l.deleteShader(d),this.getUniforms=function(){return void 0===c&&(c=new tG(l,M,s)),c},this.getAttributes=function(){if(void 0===h){for(var t={},e=l.getProgramParameter(M,35721),i=0;i<e;i++){var n=l.getActiveAttrib(M,i).name;t[n]=l.getAttribLocation(M,n)}h=t}return h},this.destroy=function(){l.deleteProgram(M),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=r.name,this.id=od++,this.code=i,this.usedTimes=1,this.program=M,this.vertexShader=p,this.fragmentShader=d,this}function t5(t,e,i,n){function r(t,e){if(t)t.isTexture?i=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),i=t.texture.encoding);else var i=3e3;return 3e3===i&&e&&(i=3007),i}var a=[],o={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},s="precision supportsVertexTextures map mapEncoding matcap matcapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap objectSpaceNormalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors vertexTangents fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering".split(" ");this.getParameters=function(e,n,a,s,c,h,l){var u=o[e.type];if(l.isSkinnedMesh){var p=l.skeleton.bones;if(i.floatVertexTextures)p=1024;else{var d=Math.min(Math.floor((i.maxVertexUniforms-20)/4),p.length);d<p.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+p.length+" bones. This GPU supports "+d+"."),p=0):p=d}}else p=0;d=i.precision,null!==e.precision&&(d=i.getMaxPrecision(e.precision))!==e.precision&&console.warn("THREE.WebGLProgram.getParameters:",e.precision,"not supported, using",d,"instead.");var f=t.getRenderTarget();return{shaderID:u,precision:d,supportsVertexTextures:i.vertexTextures,outputEncoding:r(f?f.texture:null,t.gammaOutput),map:!!e.map,mapEncoding:r(e.map,t.gammaInput),matcap:!!e.matcap,matcapEncoding:r(e.matcap,t.gammaInput),envMap:!!e.envMap,envMapMode:e.envMap&&e.envMap.mapping,envMapEncoding:r(e.envMap,t.gammaInput),envMapCubeUV:!!e.envMap&&(306===e.envMap.mapping||307===e.envMap.mapping),lightMap:!!e.lightMap,aoMap:!!e.aoMap,emissiveMap:!!e.emissiveMap,emissiveMapEncoding:r(e.emissiveMap,t.gammaInput),bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,objectSpaceNormalMap:1===e.normalMapType,displacementMap:!!e.displacementMap,roughnessMap:!!e.roughnessMap,metalnessMap:!!e.metalnessMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,gradientMap:!!e.gradientMap,combine:e.combine,vertexTangents:e.normalMap&&e.vertexTangents,vertexColors:e.vertexColors,fog:!!s,useFog:e.fog,fogExp:s&&s.isFogExp2,flatShading:e.flatShading,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:i.logarithmicDepthBuffer,skinning:e.skinning&&0<p,maxBones:p,useVertexTexture:i.floatVertexTextures,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:n.directional.length,numPointLights:n.point.length,numSpotLights:n.spot.length,numRectAreaLights:n.rectArea.length,numHemiLights:n.hemi.length,numClippingPlanes:c,numClipIntersection:h,dithering:e.dithering,shadowMapEnabled:t.shadowMap.enabled&&l.receiveShadow&&0<a.length,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:e.premultipliedAlpha,alphaTest:e.alphaTest,doubleSided:2===e.side,flipSided:1===e.side,depthPacking:void 0!==e.depthPacking&&e.depthPacking}},this.getProgramCode=function(e,i){var n=[];if(i.shaderID?n.push(i.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(var r in e.defines)n.push(r),n.push(e.defines[r]);for(r=0;r<s.length;r++)n.push(i[s[r]]);return n.push(e.onBeforeCompile.toString()),n.push(t.gammaOutput),n.push(t.gammaFactor),n.join()},this.acquireProgram=function(r,o,s,c){for(var h,l=0,u=a.length;l<u;l++){var p=a[l];if(p.code===c){h=p,++h.usedTimes;break}}return void 0===h&&(h=new tW(t,e,c,r,o,s,i,n),a.push(h)),h},this.releaseProgram=function(t){0==--t.usedTimes&&(a[a.indexOf(t)]=a[a.length-1],a.pop(),t.destroy())},this.programs=a}function t6(){var t=new WeakMap;return{get:function(e){var i=t.get(e);return void 0===i&&(i={},t.set(e,i)),i},remove:function(e){t.delete(e)},update:function(e,i,n){t.get(e)[i]=n},dispose:function(){t=new WeakMap}}}function t7(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function tj(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function tq(){function t(t,n,r,o,s,c){var h=e[i];return void 0===h?(h={id:t.id,object:t,geometry:n,material:r,program:r.program||a,groupOrder:o,renderOrder:t.renderOrder,z:s,group:c},e[i]=h):(h.id=t.id,h.object=t,h.geometry=n,h.material=r,h.program=r.program||a,h.groupOrder=o,h.renderOrder=t.renderOrder,h.z=s,h.group=c),i++,h}var e=[],i=0,n=[],r=[],a={id:-1};return{opaque:n,transparent:r,init:function(){i=0,n.length=0,r.length=0},push:function(e,i,a,o,s,c){e=t(e,i,a,o,s,c),(!0===a.transparent?r:n).push(e)},unshift:function(e,i,a,o,s,c){e=t(e,i,a,o,s,c),(!0===a.transparent?r:n).unshift(e)},sort:function(){1<n.length&&n.sort(t7),1<r.length&&r.sort(tj)}}}function tX(){function t(i){(i=i.target).removeEventListener("dispose",t),delete e[i.id]}var e={};return{get:function(i,n){var r=e[i.id];if(void 0===r){var a=new tq;e[i.id]={},e[i.id][n.id]=a,i.addEventListener("dispose",t)}else void 0===(a=r[n.id])&&(a=new tq,r[n.id]=a);return a},dispose:function(){e={}}}}function tY(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];switch(e.type){case"DirectionalLight":var n={direction:new r,color:new $,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i};break;case"SpotLight":n={position:new r,direction:new r,color:new $,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i};break;case"PointLight":n={position:new r,color:new $,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new r,skyColor:new $,groundColor:new $};break;case"RectAreaLight":n={color:new $,position:new r,halfWidth:new r,halfHeight:new r}}return t[e.id]=n}}}function tZ(){for(var t=new tY,e={id:of++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},i=0;9>i;i++)e.probe.push(new r);var n=new r,a=new g,o=new g;return{setup:function(i,r,s){for(var c=0,h=0,l=0,u=0;9>u;u++)e.probe[u].set(0,0,0);var p=0,d=0,f=0,m=0,g=0;s=s.matrixWorldInverse,u=0;for(var v=i.length;u<v;u++){var y=i[u],$=y.color,x=y.intensity,_=y.distance,w=y.shadow&&y.shadow.map?y.shadow.map.texture:null;if(y.isAmbientLight)c+=$.r*x,h+=$.g*x,l+=$.b*x;else if(y.isLightProbe)for(w=0;9>w;w++)e.probe[w].addScaledVector(y.sh.coefficients[w],x);else if(y.isDirectionalLight){var b=t.get(y);b.color.copy(y.color).multiplyScalar(y.intensity),b.direction.setFromMatrixPosition(y.matrixWorld),n.setFromMatrixPosition(y.target.matrixWorld),b.direction.sub(n),b.direction.transformDirection(s),(b.shadow=y.castShadow)&&(x=y.shadow,b.shadowBias=x.bias,b.shadowRadius=x.radius,b.shadowMapSize=x.mapSize),e.directionalShadowMap[p]=w,e.directionalShadowMatrix[p]=y.shadow.matrix,e.directional[p]=b,p++}else y.isSpotLight?((b=t.get(y)).position.setFromMatrixPosition(y.matrixWorld),b.position.applyMatrix4(s),b.color.copy($).multiplyScalar(x),b.distance=_,b.direction.setFromMatrixPosition(y.matrixWorld),n.setFromMatrixPosition(y.target.matrixWorld),b.direction.sub(n),b.direction.transformDirection(s),b.coneCos=Math.cos(y.angle),b.penumbraCos=Math.cos(y.angle*(1-y.penumbra)),b.decay=y.decay,(b.shadow=y.castShadow)&&(x=y.shadow,b.shadowBias=x.bias,b.shadowRadius=x.radius,b.shadowMapSize=x.mapSize),e.spotShadowMap[f]=w,e.spotShadowMatrix[f]=y.shadow.matrix,e.spot[f]=b,f++):y.isRectAreaLight?((b=t.get(y)).color.copy($).multiplyScalar(x),b.position.setFromMatrixPosition(y.matrixWorld),b.position.applyMatrix4(s),o.identity(),a.copy(y.matrixWorld),a.premultiply(s),o.extractRotation(a),b.halfWidth.set(.5*y.width,0,0),b.halfHeight.set(0,.5*y.height,0),b.halfWidth.applyMatrix4(o),b.halfHeight.applyMatrix4(o),e.rectArea[m]=b,m++):y.isPointLight?((b=t.get(y)).position.setFromMatrixPosition(y.matrixWorld),b.position.applyMatrix4(s),b.color.copy(y.color).multiplyScalar(y.intensity),b.distance=y.distance,b.decay=y.decay,(b.shadow=y.castShadow)&&(x=y.shadow,b.shadowBias=x.bias,b.shadowRadius=x.radius,b.shadowMapSize=x.mapSize,b.shadowCameraNear=x.camera.near,b.shadowCameraFar=x.camera.far),e.pointShadowMap[d]=w,e.pointShadowMatrix[d]=y.shadow.matrix,e.point[d]=b,d++):y.isHemisphereLight&&((b=t.get(y)).direction.setFromMatrixPosition(y.matrixWorld),b.direction.transformDirection(s),b.direction.normalize(),b.skyColor.copy(y.color).multiplyScalar(x),b.groundColor.copy(y.groundColor).multiplyScalar(x),e.hemi[g]=b,g++)}e.ambient[0]=c,e.ambient[1]=h,e.ambient[2]=l,e.directional.length=p,e.spot.length=f,e.rectArea.length=m,e.point.length=d,e.hemi.length=g,e.hash.stateID=e.id,e.hash.directionalLength=p,e.hash.pointLength=d,e.hash.spotLength=f,e.hash.rectAreaLength=m,e.hash.hemiLength=g,e.hash.shadowsLength=r.length},state:e}}function tJ(){var t=new tZ,e=[],i=[];return{init:function(){e.length=0,i.length=0},state:{lightsArray:e,shadowsArray:i,lights:t},setupLights:function(n){t.setup(e,i,n)},pushLight:function(t){e.push(t)},pushShadow:function(t){i.push(t)}}}function tQ(){function t(i){(i=i.target).removeEventListener("dispose",t),delete e[i.id]}var e={};return{get:function(i,n){if(void 0===e[i.id]){var r=new tJ;e[i.id]={},e[i.id][n.id]=r,i.addEventListener("dispose",t)}else void 0===e[i.id][n.id]?(r=new tJ,e[i.id][n.id]=r):r=e[i.id][n.id];return r},dispose:function(){e={}}}}function tK(t){k.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.lights=this.fog=!1,this.setValues(t)}function t9(t){k.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new r,this.nearDistance=1,this.farDistance=1e3,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.lights=this.fog=!1,this.setValues(t)}function et(t,e,n){function a(e,i,n,r,a,o){var s=e.geometry,c=v,h=e.customDepthMaterial;return n&&(c=y,h=e.customDistanceMaterial),h?c=h:(h=!1,i.morphTargets&&(s&&s.isBufferGeometry?h=s.morphAttributes&&s.morphAttributes.position&&0<s.morphAttributes.position.length:s&&s.isGeometry&&(h=s.morphTargets&&0<s.morphTargets.length)),e.isSkinnedMesh&&!1===i.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e),e=e.isSkinnedMesh&&i.skinning,s=0,h&&(s|=1),e&&(s|=2),c=c[s]),t.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length&&(s=c.uuid,h=i.uuid,void 0===(e=$[s])&&(e={},$[s]=e),void 0===(s=e[h])&&(s=c.clone(),e[h]=s),c=s),c.visible=i.visible,c.wireframe=i.wireframe,c.side=null!=i.shadowSide?i.shadowSide:x[i.side],c.clipShadows=i.clipShadows,c.clippingPlanes=i.clippingPlanes,c.clipIntersection=i.clipIntersection,c.wireframeLinewidth=i.wireframeLinewidth,c.linewidth=i.linewidth,n&&c.isMeshDistanceMaterial&&(c.referencePosition.copy(r),c.nearDistance=a,c.farDistance=o),c}function o(i,n,r,s){if(!1!==i.visible){if(i.layers.test(n.layers)&&(i.isMesh||i.isLine||i.isPoints)&&i.castShadow&&(!i.frustumCulled||h.intersectsObject(i))){i.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,i.matrixWorld);var c=e.update(i),l=i.material;if(Array.isArray(l))for(var u=c.groups,p=0,d=u.length;p<d;p++){var m=u[p],g=l[m.materialIndex];g&&g.visible&&(g=a(i,g,s,f,r.near,r.far),t.renderBufferDirect(r,null,c,g,i,m))}else l.visible&&(g=a(i,l,s,f,r.near,r.far),t.renderBufferDirect(r,null,c,g,i,null))}for(i=i.children,c=0,l=i.length;c<l;c++)o(i[c],n,r,s)}}var h=new m,l=new g,u=new i,p=new i(n,n),d=new r,f=new r,v=[,,,,],y=[,,,,],$={},x={0:1,1:0,2:2},_=[new r(1,0,0),new r(-1,0,0),new r(0,0,1),new r(0,0,-1),new r(0,1,0),new r(0,-1,0)],w=[new r(0,1,0),new r(0,1,0),new r(0,1,0),new r(0,1,0),new r(0,0,1),new r(0,0,-1)],b=[new s,new s,new s,new s,new s,new s];for(n=0;4!==n;++n){var E=0!=(1&n),M=0!=(2&n),S=new tK({depthPacking:3201,morphTargets:E,skinning:M});v[n]=S,E=new t9({morphTargets:E,skinning:M}),y[n]=E}var T=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(e,i,n){if(!1!==T.enabled&&(!1!==T.autoUpdate||!1!==T.needsUpdate)&&0!==e.length){var r=t.getRenderTarget(),a=t.state;a.setBlending(0),a.buffers.color.setClear(1,1,1,1),a.buffers.depth.setTest(!0),a.setScissorTest(!1);for(var s,m=0,g=e.length;m<g;m++){var v=e[m];s=v.shadow;var y=v&&v.isPointLight;if(void 0===s)console.warn("THREE.WebGLShadowMap:",v,"has no shadow.");else{var $=s.camera;if(u.copy(s.mapSize),u.min(p),y){var x=u.x,E=u.y;b[0].set(2*x,E,x,E),b[1].set(0,E,x,E),b[2].set(3*x,E,x,E),b[3].set(x,E,x,E),b[4].set(3*x,0,x,E),b[5].set(x,0,x,E),u.x*=4,u.y*=2}for(null===s.map&&(s.map=new c(u.x,u.y,{minFilter:1003,magFilter:1003,format:1023}),s.map.texture.name=v.name+".shadowMap",$.updateProjectionMatrix()),s.isSpotLightShadow&&s.update(v),x=s.map,E=s.matrix,f.setFromMatrixPosition(v.matrixWorld),$.position.copy(f),y?(s=6,E.makeTranslation(-f.x,-f.y,-f.z)):(s=1,d.setFromMatrixPosition(v.target.matrixWorld),$.lookAt(d),$.updateMatrixWorld(),E.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),E.multiply($.projectionMatrix),E.multiply($.matrixWorldInverse)),t.setRenderTarget(x),t.clear(),v=0;v<s;v++)y&&(d.copy($.position),d.add(_[v]),$.up.copy(w[v]),$.lookAt(d),$.updateMatrixWorld(),a.viewport(b[v])),l.multiplyMatrices($.projectionMatrix,$.matrixWorldInverse),h.setFromMatrix(l),o(i,n,$,y)}}T.needsUpdate=!1,t.setRenderTarget(r)}}}function ee(t,e,i,n){function r(e,i,n){var r=new Uint8Array(4),a=t.createTexture();for(t.bindTexture(e,a),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728),e=0;e<n;e++)t.texImage2D(i+e,0,6408,1,1,0,6408,5121,r);return a}function a(i,r){y[i]=1,0===$[i]&&(t.enableVertexAttribArray(i),$[i]=1),x[i]!==r&&((n.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](i,r),x[i]=r)}function o(e){!0!==_[e]&&(t.enable(e),_[e]=!0)}function c(e){!1!==_[e]&&(t.disable(e),_[e]=!1)}function h(e,n,r,a,s,h,l,u){if(0===e)E&&(c(3042),E=!1);else if(E||(o(3042),E=!0),5!==e){if(e!==M||u!==C){if((100!==S||100!==A)&&(t.blendEquation(32774),A=S=100),u)switch(e){case 1:t.blendFuncSeparate(1,771,1,771);break;case 2:t.blendFunc(1,1);break;case 3:t.blendFuncSeparate(0,0,769,771);break;case 4:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case 1:t.blendFuncSeparate(770,771,1,771);break;case 2:t.blendFunc(770,1);break;case 3:t.blendFunc(0,769);break;case 4:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}R=P=L=T=null,M=e,C=u}}else s=s||n,h=h||r,l=l||a,(n!==S||s!==A)&&(t.blendEquationSeparate(i.convert(n),i.convert(s)),S=n,A=s),(r!==T||a!==L||h!==P||l!==R)&&(t.blendFuncSeparate(i.convert(r),i.convert(a),i.convert(h),i.convert(l)),T=r,L=a,P=h,R=l),M=e,C=null}function l(e){I!==e&&(e?t.frontFace(2304):t.frontFace(2305),I=e)}function u(e){0!==e?(o(2884),e!==D&&(1===e?t.cullFace(1029):2===e?t.cullFace(1028):t.cullFace(1032))):c(2884),D=e}function p(e,i,n){e?(o(32823),(z!==i||N!==n)&&(t.polygonOffset(i,n),z=i,N=n)):c(32823)}function d(e){void 0===e&&(e=33984+G-1),F!==e&&(t.activeTexture(e),F=e)}var f=new function(){var e=!1,i=new s,n=null,r=new s(0,0,0,0);return{setMask:function(i){n===i||e||(t.colorMask(i,i,i,i),n=i)},setLocked:function(t){e=t},setClear:function(e,n,a,o,s){!0===s&&(e*=o,n*=o,a*=o),i.set(e,n,a,o),!1===r.equals(i)&&(t.clearColor(e,n,a,o),r.copy(i))},reset:function(){e=!1,n=null,r.set(-1,0,0,0)}}},m=new function(){var e=!1,i=null,n=null,r=null;return{setTest:function(t){t?o(2929):c(2929)},setMask:function(n){i===n||e||(t.depthMask(n),i=n)},setFunc:function(e){if(n!==e){if(e)switch(e){case 0:t.depthFunc(512);break;case 1:t.depthFunc(519);break;case 2:t.depthFunc(513);break;case 3:default:t.depthFunc(515);break;case 4:t.depthFunc(514);break;case 5:t.depthFunc(518);break;case 6:t.depthFunc(516);break;case 7:t.depthFunc(517)}else t.depthFunc(515);n=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,r=n=i=null}}},g=new function(){var e=!1,i=null,n=null,r=null,a=null,s=null,h=null,l=null,u=null;return{setTest:function(t){t?o(2960):c(2960)},setMask:function(n){i===n||e||(t.stencilMask(n),i=n)},setFunc:function(e,i,o){(n!==e||r!==i||a!==o)&&(t.stencilFunc(e,i,o),n=e,r=i,a=o)},setOp:function(e,i,n){(s!==e||h!==i||l!==n)&&(t.stencilOp(e,i,n),s=e,h=i,l=n)},setLocked:function(t){e=t},setClear:function(e){u!==e&&(t.clearStencil(e),u=e)},reset:function(){e=!1,u=l=h=s=a=r=n=i=null}}},v=t.getParameter(34921),y=new Uint8Array(v),$=new Uint8Array(v),x=new Uint8Array(v),_={},w=null,b=null,E=null,M=null,S=null,T=null,L=null,A=null,P=null,R=null,C=!1,I=null,D=null,B=null,z=null,N=null,G=t.getParameter(35661),U=!1;v=0,-1!==(v=t.getParameter(7938)).indexOf("WebGL")?U=1<=(v=parseFloat(/^WebGL ([0-9])/.exec(v)[1])):-1!==v.indexOf("OpenGL ES")&&(U=2<=(v=parseFloat(/^OpenGL ES ([0-9])/.exec(v)[1])));var F=null,H={},O=new s,V=new s,k={};return k[3553]=r(3553,3553,1),k[34067]=r(34067,34069,6),f.setClear(0,0,0,1),m.setClear(1),g.setClear(0),o(2929),m.setFunc(3),l(!1),u(1),o(2884),h(0),{buffers:{color:f,depth:m,stencil:g},initAttributes:function(){for(var t=0,e=y.length;t<e;t++)y[t]=0},enableAttribute:function(t){a(t,0)},enableAttributeAndDivisor:a,disableUnusedAttributes:function(){for(var e=0,i=$.length;e!==i;++e)$[e]!==y[e]&&(t.disableVertexAttribArray(e),$[e]=0)},enable:o,disable:c,getCompressedTextureFormats:function(){if(null===w&&(w=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")||e.get("WEBGL_compressed_texture_astc")))for(var i=t.getParameter(34467),n=0;n<i.length;n++)w.push(i[n]);return w},useProgram:function(e){return b!==e&&(t.useProgram(e),b=e,!0)},setBlending:h,setMaterial:function(t,e){2===t.side?c(2884):o(2884);var i=1===t.side;e&&(i=!i),l(i),1===t.blending&&!1===t.transparent?h(0):h(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),m.setFunc(t.depthFunc),m.setTest(t.depthTest),m.setMask(t.depthWrite),f.setMask(t.colorWrite),p(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:l,setCullFace:u,setLineWidth:function(e){e!==B&&(U&&t.lineWidth(e),B=e)},setPolygonOffset:p,setScissorTest:function(t){t?o(3089):c(3089)},activeTexture:d,bindTexture:function(e,i){null===F&&d();var n=H[F];void 0===n&&(n={type:void 0,texture:void 0},H[F]=n),(n.type!==e||n.texture!==i)&&(t.bindTexture(e,i||k[e]),n.type=e,n.texture=i)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(e){!1===O.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),O.copy(e))},viewport:function(e){!1===V.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),V.copy(e))},reset:function(){for(var e=0;e<$.length;e++)1===$[e]&&(t.disableVertexAttribArray(e),$[e]=0);_={},F=w=null,H={},D=I=M=b=null,f.reset(),m.reset(),g.reset()}}}function ei(t,e,i,n,r,a,o){function s(t,e){return T?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function c(t,e,i,n){var r=1;if((t.width>n||t.height>n)&&(r=n/Math.max(t.width,t.height)),1>r||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap)return e=(n=e?rS.floorPowerOfTwo:Math.floor)(r*t.width),r=n(r*t.height),void 0===M&&(M=s(e,r)),(i=i?s(e,r):M).width=e,i.height=r,i.getContext("2d").drawImage(t,0,0,e,r),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+e+"x"+r+")."),i;"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+").")}return t}function h(t){return rS.isPowerOfTwo(t.width)&&rS.isPowerOfTwo(t.height)}function l(t,e){return t.generateMipmaps&&e&&1003!==t.minFilter&&1006!==t.minFilter}function u(e,i,r,a){t.generateMipmap(e),n.get(i).__maxMipLevel=Math.log(Math.max(r,a))*Math.LOG2E}function p(t,i){if(!r.isWebGL2)return t;var n=t;return 6403===t&&(5126===i&&(n=33326),5131===i&&(n=33325),5121===i&&(n=33321)),6407===t&&(5126===i&&(n=34837),5131===i&&(n=34843),5121===i&&(n=32849)),6408===t&&(5126===i&&(n=34836),5131===i&&(n=34842),5121===i&&(n=32856)),33325===n||33326===n||34842===n||34836===n?e.get("EXT_color_buffer_float"):(34843===n||34837===n)&&console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),n}function d(t){return 1003===t||1004===t||1005===t?9728:9729}function f(e){(e=e.target).removeEventListener("dispose",f);var i=n.get(e);void 0!==i.__webglInit&&(t.deleteTexture(i.__webglTexture),n.remove(e)),e.isVideoTexture&&delete S[e.id],o.memory.textures--}function m(e){(e=e.target).removeEventListener("dispose",m);var i=n.get(e),r=n.get(e.texture);if(e){if(void 0!==r.__webglTexture&&t.deleteTexture(r.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLRenderTargetCube)for(r=0;6>r;r++)t.deleteFramebuffer(i.__webglFramebuffer[r]),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer[r]);else t.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer);n.remove(e.texture),n.remove(e)}o.memory.textures--}function g(t,e){var r=n.get(t);if(t.isVideoTexture){var a=t.id,s=o.render.frame;S[a]!==s&&(S[a]=s,t.update())}if(0<t.version&&r.__version!==t.version){if(void 0===(a=t.image))console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(!1===a.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{_(r,t,e);return}}i.activeTexture(33984+e),i.bindTexture(3553,r.__webglTexture)}function v(e,o){var s=n.get(e);if(6===e.image.length){if(0<e.version&&s.__version!==e.version){x(s,e),i.activeTexture(33984+o),i.bindTexture(34067,s.__webglTexture),t.pixelStorei(37440,e.flipY),o=e&&e.isCompressedTexture;for(var d=e.image[0]&&e.image[0].isDataTexture,f=[],m=0;6>m;m++)f[m]=o||d?d?e.image[m].image:e.image[m]:c(e.image[m],!1,!0,r.maxCubemapSize);var g=f[0],v=h(g)||r.isWebGL2,y=a.convert(e.format),_=a.convert(e.type),w=p(y,_);for($(34067,e,v),m=0;6>m;m++)if(o)for(var b,E=f[m].mipmaps,M=0,S=E.length;M<S;M++)b=E[M],1023!==e.format&&1022!==e.format?-1<i.getCompressedTextureFormats().indexOf(y)?i.compressedTexImage2D(34069+m,M,w,b.width,b.height,0,b.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):i.texImage2D(34069+m,M,w,b.width,b.height,0,y,_,b.data);else d?i.texImage2D(34069+m,0,w,f[m].width,f[m].height,0,y,_,f[m].data):i.texImage2D(34069+m,0,w,y,_,f[m]);s.__maxMipLevel=o?E.length-1:0,l(e,v)&&u(34067,e,g.width,g.height),s.__version=e.version,e.onUpdate&&e.onUpdate(e)}else i.activeTexture(33984+o),i.bindTexture(34067,s.__webglTexture)}}function y(t,e){i.activeTexture(33984+e),i.bindTexture(34067,n.get(t).__webglTexture)}function $(i,o,s){s?(t.texParameteri(i,10242,a.convert(o.wrapS)),t.texParameteri(i,10243,a.convert(o.wrapT)),32879!==i&&35866!==i||t.texParameteri(i,32882,a.convert(o.wrapR)),t.texParameteri(i,10240,a.convert(o.magFilter)),t.texParameteri(i,10241,a.convert(o.minFilter))):(t.texParameteri(i,10242,33071),t.texParameteri(i,10243,33071),32879!==i&&35866!==i||t.texParameteri(i,32882,33071),1001===o.wrapS&&1001===o.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(i,10240,d(o.magFilter)),t.texParameteri(i,10241,d(o.minFilter)),1003!==o.minFilter&&1006!==o.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),(s=e.get("EXT_texture_filter_anisotropic"))&&(1015!==o.type||null!==e.get("OES_texture_float_linear"))&&(1016!==o.type||null!==(r.isWebGL2||e.get("OES_texture_half_float_linear")))&&(1<o.anisotropy||n.get(o).__currentAnisotropy)&&(t.texParameterf(i,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,r.getMaxAnisotropy())),n.get(o).__currentAnisotropy=o.anisotropy)}function x(e,i){void 0===e.__webglInit&&(e.__webglInit=!0,i.addEventListener("dispose",f),e.__webglTexture=t.createTexture(),o.memory.textures++)}function _(e,n,o){var s=3553;n.isDataTexture2DArray&&(s=35866),n.isDataTexture3D&&(s=32879),x(e,n),i.activeTexture(33984+o),i.bindTexture(s,e.__webglTexture),t.pixelStorei(37440,n.flipY),t.pixelStorei(37441,n.premultiplyAlpha),t.pixelStorei(3317,n.unpackAlignment),o=(o=!r.isWebGL2&&(1001!==n.wrapS||1001!==n.wrapT||1003!==n.minFilter&&1006!==n.minFilter))&&!1===h(n.image),o=c(n.image,o,!1,r.maxTextureSize);var d=h(o)||r.isWebGL2,f=a.convert(n.format),m=a.convert(n.type),g=p(f,m);$(s,n,d);var v=n.mipmaps;if(n.isDepthTexture){if(g=6402,1015===n.type){if(!r.isWebGL2)throw Error("Float Depth Texture only supported in WebGL2.0");g=36012}else r.isWebGL2&&(g=33189);1026===n.format&&6402===g&&1012!==n.type&&1014!==n.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),n.type=1012,m=a.convert(n.type)),1027===n.format&&(g=34041,1020!==n.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),n.type=1020,m=a.convert(n.type))),i.texImage2D(3553,0,g,o.width,o.height,0,f,m,null)}else if(n.isDataTexture){if(0<v.length&&d){for(var y=0,_=v.length;y<_;y++)s=v[y],i.texImage2D(3553,y,g,s.width,s.height,0,f,m,s.data);n.generateMipmaps=!1,e.__maxMipLevel=v.length-1}else i.texImage2D(3553,0,g,o.width,o.height,0,f,m,o.data),e.__maxMipLevel=0}else if(n.isCompressedTexture){for(y=0,_=v.length;y<_;y++)s=v[y],1023!==n.format&&1022!==n.format?-1<i.getCompressedTextureFormats().indexOf(f)?i.compressedTexImage2D(3553,y,g,s.width,s.height,0,s.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):i.texImage2D(3553,y,g,s.width,s.height,0,f,m,s.data);e.__maxMipLevel=v.length-1}else if(n.isDataTexture2DArray)i.texImage3D(35866,0,g,o.width,o.height,o.depth,0,f,m,o.data),e.__maxMipLevel=0;else if(n.isDataTexture3D)i.texImage3D(32879,0,g,o.width,o.height,o.depth,0,f,m,o.data),e.__maxMipLevel=0;else if(0<v.length&&d){for(y=0,_=v.length;y<_;y++)s=v[y],i.texImage2D(3553,y,g,f,m,s);n.generateMipmaps=!1,e.__maxMipLevel=v.length-1}else i.texImage2D(3553,0,g,f,m,o),e.__maxMipLevel=0;l(n,d)&&u(3553,n,o.width,o.height),e.__version=n.version,n.onUpdate&&n.onUpdate(n)}function w(e,r,o,s){var c=a.convert(r.texture.format),h=a.convert(r.texture.type),l=p(c,h);i.texImage2D(s,0,l,r.width,r.height,0,c,h,null),t.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,o,s,n.get(r.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function b(e,i,n){(t.bindRenderbuffer(36161,e),i.depthBuffer&&!i.stencilBuffer)?(n?(n=E(i),t.renderbufferStorageMultisample(36161,n,33189,i.width,i.height)):t.renderbufferStorage(36161,33189,i.width,i.height),t.framebufferRenderbuffer(36160,36096,36161,e)):i.depthBuffer&&i.stencilBuffer?(n?(n=E(i),t.renderbufferStorageMultisample(36161,n,34041,i.width,i.height)):t.renderbufferStorage(36161,34041,i.width,i.height),t.framebufferRenderbuffer(36160,33306,36161,e)):(e=p(e=a.convert(i.texture.format),a.convert(i.texture.type)),n?(n=E(i),t.renderbufferStorageMultisample(36161,n,e,i.width,i.height)):t.renderbufferStorage(36161,e,i.width,i.height)),t.bindRenderbuffer(36161,null)}function E(t){return r.isWebGL2&&t.isWebGLMultisampleRenderTarget?Math.min(r.maxSamples,t.samples):0}var M,S={},T="undefined"!=typeof OffscreenCanvas,L=0,A=!1,P=!1;this.allocateTextureUnit=function(){var t=L;return t>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+r.maxTextures),L+=1,t},this.resetTextureUnits=function(){L=0},this.setTexture2D=g,this.setTexture2DArray=function(t,e){var r=n.get(t);0<t.version&&r.__version!==t.version?_(r,t,e):(i.activeTexture(33984+e),i.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(t,e){var r=n.get(t);0<t.version&&r.__version!==t.version?_(r,t,e):(i.activeTexture(33984+e),i.bindTexture(32879,r.__webglTexture))},this.setTextureCube=v,this.setTextureCubeDynamic=y,this.setupRenderTarget=function(e){var s=n.get(e),c=n.get(e.texture);e.addEventListener("dispose",m),c.__webglTexture=t.createTexture(),o.memory.textures++;var d=!0===e.isWebGLRenderTargetCube,f=!0===e.isWebGLMultisampleRenderTarget,v=h(e)||r.isWebGL2;if(d)for(s.__webglFramebuffer=[],f=0;6>f;f++)s.__webglFramebuffer[f]=t.createFramebuffer();else if(s.__webglFramebuffer=t.createFramebuffer(),f){if(r.isWebGL2){s.__webglMultisampledFramebuffer=t.createFramebuffer(),s.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,s.__webglColorRenderbuffer),f=a.convert(e.texture.format);var y=a.convert(e.texture.type);f=p(f,y),y=E(e),t.renderbufferStorageMultisample(36161,y,f,e.width,e.height),t.bindFramebuffer(36160,s.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,s.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(s.__webglDepthRenderbuffer=t.createRenderbuffer(),b(s.__webglDepthRenderbuffer,e,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}if(d){for(i.bindTexture(34067,c.__webglTexture),$(34067,e.texture,v),f=0;6>f;f++)w(s.__webglFramebuffer[f],e,36064,34069+f);l(e.texture,v)&&u(34067,e.texture,e.width,e.height),i.bindTexture(34067,null)}else i.bindTexture(3553,c.__webglTexture),$(3553,e.texture,v),w(s.__webglFramebuffer,e,36064,3553),l(e.texture,v)&&u(3553,e.texture,e.width,e.height),i.bindTexture(3553,null);if(e.depthBuffer){if(s=n.get(e),c=!0===e.isWebGLRenderTargetCube,e.depthTexture){if(c)throw Error("target.depthTexture not supported in Cube render targets");if(e&&e.isWebGLRenderTargetCube)throw Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,s.__webglFramebuffer),!e.depthTexture||!e.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");if(n.get(e.depthTexture).__webglTexture&&e.depthTexture.image.width===e.width&&e.depthTexture.image.height===e.height||(e.depthTexture.image.width=e.width,e.depthTexture.image.height=e.height,e.depthTexture.needsUpdate=!0),g(e.depthTexture,0),s=n.get(e.depthTexture).__webglTexture,1026===e.depthTexture.format)t.framebufferTexture2D(36160,36096,3553,s,0);else if(1027===e.depthTexture.format)t.framebufferTexture2D(36160,33306,3553,s,0);else throw Error("Unknown depthTexture format")}else if(c)for(s.__webglDepthbuffer=[],c=0;6>c;c++)t.bindFramebuffer(36160,s.__webglFramebuffer[c]),s.__webglDepthbuffer[c]=t.createRenderbuffer(),b(s.__webglDepthbuffer[c],e);else t.bindFramebuffer(36160,s.__webglFramebuffer),s.__webglDepthbuffer=t.createRenderbuffer(),b(s.__webglDepthbuffer,e);t.bindFramebuffer(36160,null)}},this.updateRenderTargetMipmap=function(t){var e=t.texture,a=h(t)||r.isWebGL2;if(l(e,a)){a=t.isWebGLRenderTargetCube?34067:3553;var o=n.get(e).__webglTexture;i.bindTexture(a,o),u(a,e,t.width,t.height),i.bindTexture(a,null)}},this.updateMultisampleRenderTarget=function(e){if(e.isWebGLMultisampleRenderTarget){if(r.isWebGL2){var i=n.get(e);t.bindFramebuffer(36008,i.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,i.__webglFramebuffer),i=e.width;var a=e.height,o=16384;e.depthBuffer&&(o|=256),e.stencilBuffer&&(o|=1024),t.blitFramebuffer(0,0,i,a,0,0,i,a,o,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}},this.safeSetTexture2D=function(t,e){t&&t.isWebGLRenderTarget&&(!1===A&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),A=!0),t=t.texture),g(t,e)},this.safeSetTextureCube=function(t,e){t&&t.isWebGLRenderTargetCube&&(!1===P&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),P=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?v(t,e):y(t,e)}}function en(t,e,i){return{convert:function(t){if(1e3===t)return 10497;if(1001===t)return 33071;if(1002===t)return 33648;if(1003===t)return 9728;if(1004===t)return 9984;if(1005===t)return 9986;if(1006===t)return 9729;if(1007===t)return 9985;if(1008===t)return 9987;if(1009===t)return 5121;if(1017===t)return 32819;if(1018===t)return 32820;if(1019===t)return 33635;if(1010===t)return 5120;if(1011===t)return 5122;if(1012===t)return 5123;if(1013===t)return 5124;if(1014===t)return 5125;if(1015===t)return 5126;if(1016===t){if(i.isWebGL2)return 5131;var n=e.get("OES_texture_half_float");if(null!==n)return n.HALF_FLOAT_OES}if(1021===t)return 6406;if(1022===t)return 6407;if(1023===t)return 6408;if(1024===t)return 6409;if(1025===t)return 6410;if(1026===t)return 6402;if(1027===t)return 34041;if(1028===t)return 6403;if(100===t)return 32774;if(101===t)return 32778;if(102===t)return 32779;if(200===t)return 0;if(201===t)return 1;if(202===t)return 768;if(203===t)return 769;if(204===t)return 770;if(205===t)return 771;if(206===t)return 772;if(207===t)return 773;if(208===t)return 774;if(209===t)return 775;if(210===t)return 776;if((33776===t||33777===t||33778===t||33779===t)&&null!==(n=e.get("WEBGL_compressed_texture_s3tc"))){if(33776===t)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===t)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===t)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===t)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((35840===t||35841===t||35842===t||35843===t)&&null!==(n=e.get("WEBGL_compressed_texture_pvrtc"))){if(35840===t)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===t)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===t)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===t)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===t&&null!==(n=e.get("WEBGL_compressed_texture_etc1")))return n.COMPRESSED_RGB_ETC1_WEBGL;if((37808===t||37809===t||37810===t||37811===t||37812===t||37813===t||37814===t||37815===t||37816===t||37817===t||37818===t||37819===t||37820===t||37821===t)&&null!==(n=e.get("WEBGL_compressed_texture_astc")))return t;if(103===t||104===t){if(i.isWebGL2){if(103===t)return 32775;if(104===t)return 32776}if(null!==(n=e.get("EXT_blend_minmax"))){if(103===t)return n.MIN_EXT;if(104===t)return n.MAX_EXT}}if(1020===t){if(i.isWebGL2)return 34042;if(null!==(n=e.get("WEBGL_depth_texture")))return n.UNSIGNED_INT_24_8_WEBGL}return 0}}}function er(){M.call(this),this.type="Group"}function ea(){M.call(this),this.type="Camera",this.matrixWorldInverse=new g,this.projectionMatrix=new g,this.projectionMatrixInverse=new g}function eo(t,e,i,n){ea.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==i?i:.1,this.far=void 0!==n?n:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function es(t){eo.call(this),this.cameras=t||[]}function ec(t,e,i){o0.setFromMatrixPosition(e.matrixWorld),oL.setFromMatrixPosition(i.matrixWorld);var n=o0.distanceTo(oL),r=e.projectionMatrix.elements,a=i.projectionMatrix.elements,o=r[14]/(r[10]-1);i=r[14]/(r[10]+1);var s=(r[9]+1)/r[5],c=(r[9]-1)/r[5],h=(r[8]-1)/r[0],l=(a[8]+1)/a[0];r=o*h,a=o*l,h=-((l=n/(-h+l))*h),e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(h),t.translateZ(l),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.getInverse(t.matrixWorld),e=o+l,o=i+l,t.projectionMatrix.makePerspective(r-h,a+(n-h),s*i/o*e,c*i/o*e,e,o)}function eh(t){function e(){return null!==c&&!0===c.isPresenting}function a(){if(e()){var i=c.getEyeParameters("left"),n=i.renderWidth*f;i=i.renderHeight*f,E=t.getPixelRatio(),t.getSize(M),t.setDrawingBufferSize(2*n,i,1),T.start()}else o.enabled&&t.setDrawingBufferSize(M.width,M.height,E),T.stop()}var o=this,c=null,h=null,l=null,u=[],p=new g,d=new g,f=1,m="stage";"undefined"!=typeof window&&"VRFrameData"in window&&(h=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",a,!1));var v=new g,y=new n,$=new r,_=new eo;_.bounds=new s(0,0,.5,1),_.layers.enable(1);var w=new eo;w.bounds=new s(.5,0,.5,1),w.layers.enable(2);var b=new es([_,w]);b.layers.enable(1),b.layers.enable(2);var E,M=new i,S=[];this.enabled=!1,this.getController=function(t){var e=u[t];return void 0===e&&((e=new er).matrixAutoUpdate=!1,e.visible=!1,u[t]=e),e},this.getDevice=function(){return c},this.setDevice=function(t){void 0!==t&&(c=t),T.setContext(t)},this.setFramebufferScaleFactor=function(t){f=t},this.setFrameOfReferenceType=function(t){m=t},this.setPoseTarget=function(t){void 0!==t&&(l=t)},this.getCamera=function(t){var i="stage"===m?1.6:0;if(!1===e())return t.position.set(0,i,0),t.rotation.set(0,0,0),t;if(c.depthNear=t.near,c.depthFar=t.far,c.getFrameData(h),"stage"===m){var n=c.stageParameters;n?p.fromArray(n.sittingToStandingTransform):p.makeTranslation(0,i,0)}i=h.pose,(n=null!==l?l:t).matrix.copy(p),n.matrix.decompose(n.position,n.quaternion,n.scale),null!==i.orientation&&(y.fromArray(i.orientation),n.quaternion.multiply(y)),null!==i.position&&(y.setFromRotationMatrix(p),$.fromArray(i.position),$.applyQuaternion(y),n.position.add($)),n.updateMatrixWorld(),_.near=t.near,w.near=t.near,_.far=t.far,w.far=t.far,_.matrixWorldInverse.fromArray(h.leftViewMatrix),w.matrixWorldInverse.fromArray(h.rightViewMatrix),d.getInverse(p),"stage"===m&&(_.matrixWorldInverse.multiply(d),w.matrixWorldInverse.multiply(d)),null!==(t=n.parent)&&(v.getInverse(t.matrixWorld),_.matrixWorldInverse.multiply(v),w.matrixWorldInverse.multiply(v)),_.matrixWorld.getInverse(_.matrixWorldInverse),w.matrixWorld.getInverse(w.matrixWorldInverse),_.projectionMatrix.fromArray(h.leftProjectionMatrix),w.projectionMatrix.fromArray(h.rightProjectionMatrix),ec(b,_,w),(t=c.getLayers()).length&&(null!==(t=t[0]).leftBounds&&4===t.leftBounds.length&&_.bounds.fromArray(t.leftBounds),null!==t.rightBounds&&4===t.rightBounds.length&&w.bounds.fromArray(t.rightBounds));a:for(t=0;t<u.length;t++){i=u[t];b:{n=t;for(var r=navigator.getGamepads&&navigator.getGamepads(),a=0,o=0,s=r.length;a<s;a++){var f=r[a];if(f&&("Daydream Controller"===f.id||"Gear VR Controller"===f.id||"Oculus Go Controller"===f.id||"OpenVR Gamepad"===f.id||f.id.startsWith("Oculus Touch")||f.id.startsWith("Spatial Controller"))){if(o===n){n=f;break b}o++}}n=void 0}if(void 0!==n&&void 0!==n.pose){if(null===n.pose)break a;!1===(r=n.pose).hasPosition&&i.position.set(.2,-.6,-.05),null!==r.position&&i.position.fromArray(r.position),null!==r.orientation&&i.quaternion.fromArray(r.orientation),i.matrix.compose(i.position,i.quaternion,i.scale),i.matrix.premultiply(p),i.matrix.decompose(i.position,i.quaternion,i.scale),i.matrixWorldNeedsUpdate=!0,i.visible=!0,r="Daydream Controller"===n.id?0:1,S[t]!==n.buttons[r].pressed&&(S[t]=n.buttons[r].pressed,!0===S[t]?i.dispatchEvent({type:"selectstart"}):(i.dispatchEvent({type:"selectend"}),i.dispatchEvent({type:"select"})))}else i.visible=!1}return b},this.getStandingMatrix=function(){return p},this.isPresenting=e;var T=new x;this.setAnimationLoop=function(t){T.setAnimationLoop(t),e()&&T.start()},this.submitFrame=function(){e()&&c.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",a)}}function el(t){function e(){return null!==c&&null!==l}function i(t){var e=d[f.indexOf(t.inputSource)];e&&e.dispatchEvent({type:t.type})}function n(){t.setFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),_.stop()}function r(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.getInverse(t.matrixWorld)}var a=t.context,o=null,c=null,h=1,l=null,u="stage",p=null,d=[],f=[],m=new eo;m.layers.enable(1),m.viewport=new s;var v=new eo;v.layers.enable(2),v.viewport=new s;var y=new es([m,v]);y.layers.enable(1),y.layers.enable(2),this.enabled=!1,this.getController=function(t){var e=d[t];return void 0===e&&((e=new er).matrixAutoUpdate=!1,e.visible=!1,d[t]=e),e},this.getDevice=function(){return o},this.setDevice=function(t){void 0!==t&&(o=t),t instanceof XRDevice&&a.setCompatibleXRDevice(t)},this.setFramebufferScaleFactor=function(t){h=t},this.setFrameOfReferenceType=function(t){u=t},this.setSession=function(e){null!==(c=e)&&(c.addEventListener("select",i),c.addEventListener("selectstart",i),c.addEventListener("selectend",i),c.addEventListener("end",n),c.baseLayer=new XRWebGLLayer(c,a,{framebufferScaleFactor:h}),c.requestFrameOfReference(u).then(function(e){l=e,t.setFramebuffer(c.baseLayer.framebuffer),_.setContext(c),_.start()}),f=c.getInputSources(),c.addEventListener("inputsourceschange",function(){f=c.getInputSources(),console.log(f);for(var t=0;t<d.length;t++)d[t].userData.inputSource=f[t]}))},this.getCamera=function(t){if(e()){var i=t.parent,n=y.cameras;r(y,i);for(var a=0;a<n.length;a++)r(n[a],i);for(t.matrixWorld.copy(y.matrixWorld),t=t.children,a=0,i=t.length;a<i;a++)t[a].updateMatrixWorld(!0);return ec(y,m,v),y}return t},this.isPresenting=e;var $=null,_=new x;_.setAnimationLoop(function(t,e){if(null!==(p=e.getDevicePose(l)))for(var i=c.baseLayer,n=e.views,r=0;r<n.length;r++){var a=n[r],o=i.getViewport(a),s=p.getViewMatrix(a),h=y.cameras[r];h.matrix.fromArray(s).getInverse(h.matrix),h.projectionMatrix.fromArray(a.projectionMatrix),h.viewport.set(o.x,o.y,o.width,o.height),0===r&&y.matrix.copy(h.matrix)}for(r=0;r<d.length;r++){if(i=d[r],(n=f[r])&&null!==(n=e.getInputPose(n,l))){"targetRay"in n?i.matrix.elements=n.targetRay.transformMatrix:"pointerMatrix"in n&&(i.matrix.elements=n.pointerMatrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.visible=!0;continue}i.visible=!1}$&&$(t)}),this.setAnimationLoop=function(t){$=t},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new g},this.submitFrame=function(){}}function eu(t){function e(){b=new tt(tA),(E=new Q(tA,b,t)).isWebGL2||(b.get("WEBGL_depth_texture"),b.get("OES_texture_float"),b.get("OES_texture_half_float"),b.get("OES_texture_half_float_linear"),b.get("OES_standard_derivatives"),b.get("OES_element_index_uint"),b.get("ANGLE_instanced_arrays")),b.get("OES_texture_float_linear"),U=new en(tA,b,E),(M=new ee(tA,b,U,E)).scissor(ty.copy(t8).multiplyScalar(tw)),M.viewport(tv.copy(tb).multiplyScalar(tw)),S=new tn(tA),T=new t6,L=new ei(tA,b,M,T,E,U,S),A=new _(tA),P=new te(tA,A,S),R=new to(P,S),z=new ta(tA),C=new t5(ts,b,E,L),I=new tX,D=new tQ,B=new Z(ts,M,R,j),N=new J(tA,b,S,E),G=new ti(tA,b,S,E),S.programs=C.programs,ts.context=tA,ts.capabilities=E,ts.extensions=b,ts.properties=T,ts.renderLists=I,ts.state=M,ts.info=S}function n(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),tc=!0}function a(){console.log("THREE.WebGLRenderer: Context Restored."),tc=!1,e()}function o(t){(t=t.target).removeEventListener("dispose",o),c(t),T.remove(t)}function c(t){var e=T.get(t).program;t.program=void 0,void 0!==e&&C.releaseProgram(e)}function h(t,e,i,n){for(var r=0,a=t.length;r<a;r++){var o=t[r],s=o.object,c=o.geometry,h=void 0===n?o.material:n;if(o=o.group,i.isArrayCamera){tg=i;for(var u=i.cameras,p=0,d=u.length;p<d;p++){var f=u[p];if(s.layers.test(f.layers)){if("viewport"in f)M.viewport(tv.copy(f.viewport));else{var m=f.bounds;M.viewport(tv.set(m.x*tx,m.y*t_,m.z*tx,m.w*t_).multiplyScalar(tw))}tr.setupLights(f),l(s,e,f,c,h,o)}}}else tg=null,l(s,e,i,c,h,o)}}function l(t,e,i,n,r,a){if(t.onBeforeRender(ts,e,i,n,r,a),tr=D.get(e,tg||i),t.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){M.setMaterial(r);var o=d(i,e.fog,r,t);td=w=null,tf=!1,function t(e,i){e.render(function(t){ts.renderBufferImmediate(t,i)})}(t,o)}else ts.renderBufferDirect(i,e.fog,n,r,t,a);t.onAfterRender(ts,e,i,n,r,a),tr=D.get(e,tg||i)}function p(t,e,i){var n=T.get(t),r=tr.state.lights,a=n.lightsHash,s=r.state.hash;i=C.getParameters(t,r.state,tr.state.shadowsArray,e,tS.numPlanes,tS.numIntersection,i);var h=C.getProgramCode(t,i),l=n.program,u=!0;if(void 0===l)t.addEventListener("dispose",o);else if(l.code!==h)c(t);else{if(a.stateID!==s.stateID||a.directionalLength!==s.directionalLength||a.pointLength!==s.pointLength||a.spotLength!==s.spotLength||a.rectAreaLength!==s.rectAreaLength||a.hemiLength!==s.hemiLength||a.shadowsLength!==s.shadowsLength)a.stateID=s.stateID,a.directionalLength=s.directionalLength,a.pointLength=s.pointLength,a.spotLength=s.spotLength,a.rectAreaLength=s.rectAreaLength,a.hemiLength=s.hemiLength,a.shadowsLength=s.shadowsLength;else if(void 0!==i.shaderID)return;u=!1}if(u&&(i.shaderID?(h=at[i.shaderID],n.shader={name:t.type,uniforms:v(h.uniforms),vertexShader:h.vertexShader,fragmentShader:h.fragmentShader}):n.shader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader},t.onBeforeCompile(n.shader,ts),h=C.getProgramCode(t,i),l=C.acquireProgram(t,n.shader,i,h),n.program=l,t.program=l),i=l.getAttributes(),t.morphTargets)for(h=t.numSupportedMorphTargets=0;h<ts.maxMorphTargets;h++)0<=i["morphTarget"+h]&&t.numSupportedMorphTargets++;if(t.morphNormals)for(h=t.numSupportedMorphNormals=0;h<ts.maxMorphNormals;h++)0<=i["morphNormal"+h]&&t.numSupportedMorphNormals++;i=n.shader.uniforms,(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(n.numClippingPlanes=tS.numPlanes,n.numIntersection=tS.numIntersection,i.clippingPlanes=tS.uniform),n.fog=e,void 0===a&&(n.lightsHash=a={}),a.stateID=s.stateID,a.directionalLength=s.directionalLength,a.pointLength=s.pointLength,a.spotLength=s.spotLength,a.rectAreaLength=s.rectAreaLength,a.hemiLength=s.hemiLength,a.shadowsLength=s.shadowsLength,t.lights&&(i.ambientLightColor.value=r.state.ambient,i.lightProbe.value=r.state.probe,i.directionalLights.value=r.state.directional,i.spotLights.value=r.state.spot,i.rectAreaLights.value=r.state.rectArea,i.pointLights.value=r.state.point,i.hemisphereLights.value=r.state.hemi,i.directionalShadowMap.value=r.state.directionalShadowMap,i.directionalShadowMatrix.value=r.state.directionalShadowMatrix,i.spotShadowMap.value=r.state.spotShadowMap,i.spotShadowMatrix.value=r.state.spotShadowMatrix,i.pointShadowMap.value=r.state.pointShadowMap,i.pointShadowMatrix.value=r.state.pointShadowMatrix),t=n.program.getUniforms(),t=tG.seqWithValue(t.seq,i),n.uniformsList=t}function d(t,e,i,n){L.resetTextureUnits();var r=T.get(i),a=r.lightsHash,o=tr.state.lights.state.hash;tT&&(t1||t!==tm)&&tS.setState(i.clippingPlanes,i.clipIntersection,i.clipShadows,t,r,t===tm&&i.id===tp),!1===i.needsUpdate&&(void 0===r.program?i.needsUpdate=!0:i.fog&&r.fog!==e?i.needsUpdate=!0:i.lights&&(a.stateID!==o.stateID||a.directionalLength!==o.directionalLength||a.pointLength!==o.pointLength||a.spotLength!==o.spotLength||a.rectAreaLength!==o.rectAreaLength||a.hemiLength!==o.hemiLength||a.shadowsLength!==o.shadowsLength)?i.needsUpdate=!0:void 0===r.numClippingPlanes||r.numClippingPlanes===tS.numPlanes&&r.numIntersection===tS.numIntersection||(i.needsUpdate=!0)),i.needsUpdate&&(p(i,e,n),i.needsUpdate=!1);var s=!1,c=!1,h=!1;o=(a=r.program).getUniforms();var l=r.shader.uniforms;if(M.useProgram(a.program)&&(h=c=s=!0),i.id!==tp&&(tp=i.id,c=!0),(s||tm!==t)&&(o.setValue(tA,"projectionMatrix",t.projectionMatrix),E.logarithmicDepthBuffer&&o.setValue(tA,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),tm!==t&&(tm=t,h=c=!0),(i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.envMap)&&void 0!==(s=o.map.cameraPosition)&&s.setValue(tA,tL.setFromMatrixPosition(t.matrixWorld)),(i.isMeshPhongMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.skinning)&&o.setValue(tA,"viewMatrix",t.matrixWorldInverse)),i.skinning&&(o.setOptional(tA,n,"bindMatrix"),o.setOptional(tA,n,"bindMatrixInverse"),t=n.skeleton)){if(s=t.bones,E.floatVertexTextures){if(void 0===t.boneTexture){s=Math.sqrt(4*s.length),s=Math.max(s=rS.ceilPowerOfTwo(s),4);var d=new Float32Array(s*s*4);d.set(t.boneMatrices);var m=new u(d,s,s,1023,1015);m.needsUpdate=!0,t.boneMatrices=d,t.boneTexture=m,t.boneTextureSize=s}o.setValue(tA,"boneTexture",t.boneTexture,L),o.setValue(tA,"boneTextureSize",t.boneTextureSize)}else o.setOptional(tA,t,"boneMatrices")}return c&&(o.setValue(tA,"toneMappingExposure",ts.toneMappingExposure),o.setValue(tA,"toneMappingWhitePoint",ts.toneMappingWhitePoint),i.lights&&(c=h,l.ambientLightColor.needsUpdate=c,l.lightProbe.needsUpdate=c,l.directionalLights.needsUpdate=c,l.pointLights.needsUpdate=c,l.spotLights.needsUpdate=c,l.rectAreaLights.needsUpdate=c,l.hemisphereLights.needsUpdate=c),e&&i.fog&&(l.fogColor.value.copy(e.color),e.isFog?(l.fogNear.value=e.near,l.fogFar.value=e.far):e.isFogExp2&&(l.fogDensity.value=e.density)),i.isMeshBasicMaterial?f(l,i):i.isMeshLambertMaterial?(f(l,i),i.emissiveMap&&(l.emissiveMap.value=i.emissiveMap)):i.isMeshPhongMaterial?(f(l,i),i.isMeshToonMaterial?(y(l,i),i.gradientMap&&(l.gradientMap.value=i.gradientMap)):y(l,i)):i.isMeshStandardMaterial?(f(l,i),i.isMeshPhysicalMaterial?($(l,i),l.reflectivity.value=i.reflectivity,l.clearCoat.value=i.clearCoat,l.clearCoatRoughness.value=i.clearCoatRoughness):$(l,i)):i.isMeshMatcapMaterial?(f(l,i),i.matcap&&(l.matcap.value=i.matcap),i.bumpMap&&(l.bumpMap.value=i.bumpMap,l.bumpScale.value=i.bumpScale,1===i.side&&(l.bumpScale.value*=-1)),i.normalMap&&(l.normalMap.value=i.normalMap,l.normalScale.value.copy(i.normalScale),1===i.side&&l.normalScale.value.negate()),i.displacementMap&&(l.displacementMap.value=i.displacementMap,l.displacementScale.value=i.displacementScale,l.displacementBias.value=i.displacementBias)):i.isMeshDepthMaterial?(f(l,i),i.displacementMap&&(l.displacementMap.value=i.displacementMap,l.displacementScale.value=i.displacementScale,l.displacementBias.value=i.displacementBias)):i.isMeshDistanceMaterial?(f(l,i),i.displacementMap&&(l.displacementMap.value=i.displacementMap,l.displacementScale.value=i.displacementScale,l.displacementBias.value=i.displacementBias),l.referencePosition.value.copy(i.referencePosition),l.nearDistance.value=i.nearDistance,l.farDistance.value=i.farDistance):i.isMeshNormalMaterial?(f(l,i),i.bumpMap&&(l.bumpMap.value=i.bumpMap,l.bumpScale.value=i.bumpScale,1===i.side&&(l.bumpScale.value*=-1)),i.normalMap&&(l.normalMap.value=i.normalMap,l.normalScale.value.copy(i.normalScale),1===i.side&&l.normalScale.value.negate()),i.displacementMap&&(l.displacementMap.value=i.displacementMap,l.displacementScale.value=i.displacementScale,l.displacementBias.value=i.displacementBias)):i.isLineBasicMaterial?(l.diffuse.value.copy(i.color),l.opacity.value=i.opacity,i.isLineDashedMaterial&&(l.dashSize.value=i.dashSize,l.totalSize.value=i.dashSize+i.gapSize,l.scale.value=i.scale)):i.isPointsMaterial?(l.diffuse.value.copy(i.color),l.opacity.value=i.opacity,l.size.value=i.size*tw,l.scale.value=.5*t_,l.map.value=i.map,null!==i.map&&(!0===i.map.matrixAutoUpdate&&i.map.updateMatrix(),l.uvTransform.value.copy(i.map.matrix))):i.isSpriteMaterial?(l.diffuse.value.copy(i.color),l.opacity.value=i.opacity,l.rotation.value=i.rotation,l.map.value=i.map,null!==i.map&&(!0===i.map.matrixAutoUpdate&&i.map.updateMatrix(),l.uvTransform.value.copy(i.map.matrix))):i.isShadowMaterial&&(l.color.value.copy(i.color),l.opacity.value=i.opacity),void 0!==l.ltc_1&&(l.ltc_1.value=r9.LTC_1),void 0!==l.ltc_2&&(l.ltc_2.value=r9.LTC_2),tG.upload(tA,r.uniformsList,l,L)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(tG.upload(tA,r.uniformsList,l,L),i.uniformsNeedUpdate=!1),i.isSpriteMaterial&&o.setValue(tA,"center",n.center),o.setValue(tA,"modelViewMatrix",n.modelViewMatrix),o.setValue(tA,"normalMatrix",n.normalMatrix),o.setValue(tA,"modelMatrix",n.matrixWorld),a}function f(t,e){if(t.opacity.value=e.opacity,e.color&&t.diffuse.value.copy(e.color),e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.specularMap&&(t.specularMap.value=e.specularMap),e.envMap&&(t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio,t.maxMipLevel.value=T.get(e.envMap).__maxMipLevel),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity),e.map)var i=e.map;else e.specularMap?i=e.specularMap:e.displacementMap?i=e.displacementMap:e.normalMap?i=e.normalMap:e.bumpMap?i=e.bumpMap:e.roughnessMap?i=e.roughnessMap:e.metalnessMap?i=e.metalnessMap:e.alphaMap?i=e.alphaMap:e.emissiveMap&&(i=e.emissiveMap);void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix))}function y(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function $(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)};var w,b,E,M,S,T,L,A,P,R,C,I,D,B,z,N,G,U,F=void 0!==(t=t||{}).canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),H=void 0!==t.context?t.context:null,O=void 0!==t.alpha&&t.alpha,V=void 0===t.depth||t.depth,k=void 0===t.stencil||t.stencil,W=void 0!==t.antialias&&t.antialias,j=void 0===t.premultipliedAlpha||t.premultipliedAlpha,q=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,X=void 0!==t.powerPreference?t.powerPreference:"default",Y=null,tr=null;this.domElement=F,this.context=null,this.debug={checkShaderErrors:!1},this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1,this.toneMappingWhitePoint=this.toneMappingExposure=this.toneMapping=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var ts=this,tc=!1,th=null,tl=null,tu=null,tp=-1,td=w=null,tf=!1,tm=null,tg=null,tv=new s,ty=new s,t$=null,tx=F.width,t_=F.height,tw=1,tb=new s(0,0,tx,t_),t8=new s(0,0,tx,t_),tE=!1,tM=new m,tS=new K,tT=!1,t1=!1,t0=new g,tL=new r;try{O={alpha:O,depth:V,stencil:k,antialias:W,premultipliedAlpha:j,preserveDrawingBuffer:q,powerPreference:X},F.addEventListener("webglcontextlost",n,!1),F.addEventListener("webglcontextrestored",a,!1);var tA=H||F.getContext("webgl",O)||F.getContext("experimental-webgl",O);if(null===tA){if(null!==F.getContext("webgl"))throw Error("Error creating WebGL context with your selected attributes.");throw Error("Error creating WebGL context.")}void 0===tA.getShaderPrecisionFormat&&(tA.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(tP){throw console.error("THREE.WebGLRenderer: "+tP.message),tP}e();var tR="undefined"!=typeof navigator&&"xr"in navigator?new el(ts):new eh(ts);this.vr=tR;var tC=new et(ts,R,E.maxTextureSize);this.shadowMap=tC,this.getContext=function(){return tA},this.getContextAttributes=function(){return tA.getContextAttributes()},this.forceContextLoss=function(){var t=b.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=b.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return tw},this.setPixelRatio=function(t){void 0!==t&&(tw=t,this.setSize(tx,t_,!1))},this.getSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),t=new i),t.set(tx,t_)},this.setSize=function(t,e,i){tR.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(tx=t,t_=e,F.width=t*tw,F.height=e*tw,!1!==i&&(F.style.width=t+"px",F.style.height=e+"px"),this.setViewport(0,0,t,e))},this.getDrawingBufferSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),t=new i),t.set(tx*tw,t_*tw)},this.setDrawingBufferSize=function(t,e,i){tx=t,t_=e,tw=i,F.width=t*i,F.height=e*i,this.setViewport(0,0,t,e)},this.getCurrentViewport=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),t=new s),t.copy(tv)},this.getViewport=function(t){return t.copy(tb)},this.setViewport=function(t,e,i,n){t.isVector4?tb.set(t.x,t.y,t.z,t.w):tb.set(t,e,i,n),M.viewport(tv.copy(tb).multiplyScalar(tw))},this.getScissor=function(t){return t.copy(t8)},this.setScissor=function(t,e,i,n){t.isVector4?t8.set(t.x,t.y,t.z,t.w):t8.set(t,e,i,n),M.scissor(ty.copy(t8).multiplyScalar(tw))},this.getScissorTest=function(){return tE},this.setScissorTest=function(t){M.setScissorTest(tE=t)},this.getClearColor=function(){return B.getClearColor()},this.setClearColor=function(){B.setClearColor.apply(B,arguments)},this.getClearAlpha=function(){return B.getClearAlpha()},this.setClearAlpha=function(){B.setClearAlpha.apply(B,arguments)},this.clear=function(t,e,i){var n=0;(void 0===t||t)&&(n|=16384),(void 0===e||e)&&(n|=256),(void 0===i||i)&&(n|=1024),tA.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){F.removeEventListener("webglcontextlost",n,!1),F.removeEventListener("webglcontextrestored",a,!1),I.dispose(),D.dispose(),T.dispose(),R.dispose(),tR.dispose(),tD.stop()},this.renderBufferImmediate=function(t,e){M.initAttributes();var i=T.get(t);t.hasPositions&&!i.position&&(i.position=tA.createBuffer()),t.hasNormals&&!i.normal&&(i.normal=tA.createBuffer()),t.hasUvs&&!i.uv&&(i.uv=tA.createBuffer()),t.hasColors&&!i.color&&(i.color=tA.createBuffer()),e=e.getAttributes(),t.hasPositions&&(tA.bindBuffer(34962,i.position),tA.bufferData(34962,t.positionArray,35048),M.enableAttribute(e.position),tA.vertexAttribPointer(e.position,3,5126,!1,0,0)),t.hasNormals&&(tA.bindBuffer(34962,i.normal),tA.bufferData(34962,t.normalArray,35048),M.enableAttribute(e.normal),tA.vertexAttribPointer(e.normal,3,5126,!1,0,0)),t.hasUvs&&(tA.bindBuffer(34962,i.uv),tA.bufferData(34962,t.uvArray,35048),M.enableAttribute(e.uv),tA.vertexAttribPointer(e.uv,2,5126,!1,0,0)),t.hasColors&&(tA.bindBuffer(34962,i.color),tA.bufferData(34962,t.colorArray,35048),M.enableAttribute(e.color),tA.vertexAttribPointer(e.color,3,5126,!1,0,0)),M.disableUnusedAttributes(),tA.drawArrays(4,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,i,n,r,a){var o=r.isMesh&&0>r.matrixWorld.determinant();M.setMaterial(n,o);var s=d(t,e,n,r),c=!1;(w!==i.id||td!==s.id||tf!==(!0===n.wireframe))&&(w=i.id,td=s.id,tf=!0===n.wireframe,c=!0),r.morphTargetInfluences&&(z.update(r,i,n,s),c=!0),o=i.index;var h=i.attributes.position;if(e=1,!0===n.wireframe&&(o=P.getWireframeAttribute(i),e=2),t=N,null!==o){var l=A.get(o);(t=G).setIndex(l)}if(c){if(i&&i.isInstancedBufferGeometry&&!E.isWebGL2&&null===b.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{M.initAttributes(),c=i.attributes,s=s.getAttributes();var u=n.defaultAttributeValues;for(S in s){var p=s[S];if(0<=p){var f=c[S];if(void 0!==f){var m=f.normalized,g=f.itemSize,v=A.get(f);if(void 0!==v){var y=v.buffer,$=v.type;if(v=v.bytesPerElement,f.isInterleavedBufferAttribute){var x=f.data,_=x.stride;f=f.offset,x&&x.isInstancedInterleavedBuffer?(M.enableAttributeAndDivisor(p,x.meshPerAttribute),void 0===i.maxInstancedCount&&(i.maxInstancedCount=x.meshPerAttribute*x.count)):M.enableAttribute(p),tA.bindBuffer(34962,y),tA.vertexAttribPointer(p,g,$,m,_*v,f*v)}else f.isInstancedBufferAttribute?(M.enableAttributeAndDivisor(p,f.meshPerAttribute),void 0===i.maxInstancedCount&&(i.maxInstancedCount=f.meshPerAttribute*f.count)):M.enableAttribute(p),tA.bindBuffer(34962,y),tA.vertexAttribPointer(p,g,$,m,0,0)}}else if(void 0!==u&&void 0!==(m=u[S]))switch(m.length){case 2:tA.vertexAttrib2fv(p,m);break;case 3:tA.vertexAttrib3fv(p,m);break;case 4:tA.vertexAttrib4fv(p,m);break;default:tA.vertexAttrib1fv(p,m)}}}M.disableUnusedAttributes()}null!==o&&tA.bindBuffer(34963,l.buffer)}l=1/0,null!==o?l=o.count:void 0!==h&&(l=h.count);var S=Math.max(o=i.drawRange.start*e,h=null!==a?a.start*e:0);if(0!==(a=Math.max(0,Math.min(l,o+i.drawRange.count*e,h+(null!==a?a.count*e:1/0))-1-S+1))){if(r.isMesh){if(!0===n.wireframe)M.setLineWidth(n.wireframeLinewidth*(null===tl?tw:1)),t.setMode(1);else switch(r.drawMode){case 0:t.setMode(4);break;case 1:t.setMode(5);break;case 2:t.setMode(6)}}else r.isLine?(void 0===(n=n.linewidth)&&(n=1),M.setLineWidth(n*(null===tl?tw:1)),r.isLineSegments?t.setMode(1):r.isLineLoop?t.setMode(2):t.setMode(3)):r.isPoints?t.setMode(0):r.isSprite&&t.setMode(4);i&&i.isInstancedBufferGeometry?0<i.maxInstancedCount&&t.renderInstances(i,S,a):t.render(S,a)}},this.compile=function(t,e){(tr=D.get(t,e)).init(),t.traverse(function(t){t.isLight&&(tr.pushLight(t),t.castShadow&&tr.pushShadow(t))}),tr.setupLights(e),t.traverse(function(e){if(e.material){if(Array.isArray(e.material))for(var i=0;i<e.material.length;i++)p(e.material[i],t.fog,e);else p(e.material,t.fog,e)}})};var tI=null,tD=new x;tD.setAnimationLoop(function(t){tR.isPresenting()||tI&&tI(t)}),"undefined"!=typeof window&&tD.setContext(window),this.setAnimationLoop=function(t){tI=t,tR.setAnimationLoop(t),tD.start()},this.render=function(t,e,i,n){if(void 0!==i){console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.");var r=i}if(void 0!==n){console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.");var a=n}e&&e.isCamera?tc||(td=w=null,tf=!1,tp=-1,tm=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),tR.enabled&&(e=tR.getCamera(e)),(tr=D.get(t,e)).init(),t.onBeforeRender(ts,t,e,r||tl),t0.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),tM.setFromMatrix(t0),t1=this.localClippingEnabled,tT=tS.init(this.clippingPlanes,t1,e),(Y=I.get(t,e)).init(),function t(e,i,n,r){if(!1!==e.visible){if(e.layers.test(i.layers)){if(e.isGroup)n=e.renderOrder;else if(e.isLight)tr.pushLight(e),e.castShadow&&tr.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||tM.intersectsSprite(e)){r&&tL.setFromMatrixPosition(e.matrixWorld).applyMatrix4(t0);var a=R.update(e),o=e.material;o.visible&&Y.push(e,a,o,n,tL.z,null)}}else if(e.isImmediateRenderObject)r&&tL.setFromMatrixPosition(e.matrixWorld).applyMatrix4(t0),Y.push(e,null,e.material,n,tL.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!e.frustumCulled||tM.intersectsObject(e))){if(r&&tL.setFromMatrixPosition(e.matrixWorld).applyMatrix4(t0),a=R.update(e),Array.isArray(o=e.material))for(var s=a.groups,c=0,h=s.length;c<h;c++){var l=s[c],u=o[l.materialIndex];u&&u.visible&&Y.push(e,a,u,n,tL.z,l)}else o.visible&&Y.push(e,a,o,n,tL.z,null)}}for(e=e.children,c=0,h=e.length;c<h;c++)t(e[c],i,n,r)}}(t,e,0,ts.sortObjects),!0===ts.sortObjects&&Y.sort(),tT&&tS.beginShadows(),tC.render(tr.state.shadowsArray,t,e),tr.setupLights(e),tT&&tS.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==r&&this.setRenderTarget(r),B.render(Y,t,e,a),i=Y.opaque,n=Y.transparent,t.overrideMaterial?(r=t.overrideMaterial,i.length&&h(i,t,e,r),n.length&&h(n,t,e,r)):(i.length&&h(i,t,e),n.length&&h(n,t,e)),t.onAfterRender(ts,t,e),null!==tl&&(L.updateRenderTargetMipmap(tl),L.updateMultisampleRenderTarget(tl)),M.buffers.depth.setTest(!0),M.buffers.depth.setMask(!0),M.buffers.color.setMask(!0),M.setPolygonOffset(!1),tR.enabled&&tR.submitFrame(),tr=Y=null):console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(t){th=t},this.getRenderTarget=function(){return tl},this.setRenderTarget=function(t,e,i){(tl=t)&&void 0===T.get(t).__webglFramebuffer&&L.setupRenderTarget(t);var n=th,r=!1;t?(n=T.get(t).__webglFramebuffer,t.isWebGLRenderTargetCube?(n=n[e||0],r=!0):n=t.isWebGLMultisampleRenderTarget?T.get(t).__webglMultisampledFramebuffer:n,tv.copy(t.viewport),ty.copy(t.scissor),t$=t.scissorTest):(tv.copy(tb).multiplyScalar(tw),ty.copy(t8).multiplyScalar(tw),t$=tE),tu!==n&&(tA.bindFramebuffer(36160,n),tu=n),M.viewport(tv),M.scissor(ty),M.setScissorTest(t$),r&&(t=T.get(t.texture),tA.framebufferTexture2D(36160,36064,34069+(e||0),t.__webglTexture,i||0))},this.readRenderTargetPixels=function(t,e,i,n,r,a){if(t&&t.isWebGLRenderTarget){var o=T.get(t).__webglFramebuffer;if(o){var s=!1;o!==tu&&(tA.bindFramebuffer(36160,o),s=!0);try{var c=t.texture,h=c.format,l=c.type;1023!==h&&U.convert(h)!==tA.getParameter(35739)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):1009===l||U.convert(l)===tA.getParameter(35738)||1015===l&&(E.isWebGL2||b.get("OES_texture_float")||b.get("WEBGL_color_buffer_float"))||1016===l&&(E.isWebGL2?b.get("EXT_color_buffer_float"):b.get("EXT_color_buffer_half_float"))?36053===tA.checkFramebufferStatus(36160)?0<=e&&e<=t.width-n&&0<=i&&i<=t.height-r&&tA.readPixels(e,i,n,r,U.convert(h),U.convert(l),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{s&&tA.bindFramebuffer(36160,tu)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,e,i){var n=e.image.width,r=e.image.height,a=U.convert(e.format);L.setTexture2D(e,0),tA.copyTexImage2D(3553,i||0,a,t.x,t.y,n,r,0)},this.copyTextureToTexture=function(t,e,i,n){var r=e.image.width,a=e.image.height,o=U.convert(i.format),s=U.convert(i.type);L.setTexture2D(i,0),e.isDataTexture?tA.texSubImage2D(3553,n||0,t.x,t.y,r,a,o,s,e.image.data):tA.texSubImage2D(3553,n||0,t.x,t.y,o,s,e.image)}}function ep(t,e){this.name="",this.color=new $(t),this.density=void 0!==e?e:25e-5}function ed(t,e,i){this.name="",this.color=new $(t),this.near=void 0!==e?e:1,this.far=void 0!==i?i:1e3}function ef(){M.call(this),this.type="Scene",this.overrideMaterial=this.fog=this.background=null,this.autoUpdate=!0}function em(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function eg(t,e,i,n){this.data=t,this.itemSize=e,this.offset=i,this.normalized=!0===n}function ev(t){k.call(this),this.type="SpriteMaterial",this.color=new $(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(t)}function ey(t){if(M.call(this),this.type="Sprite",void 0===oj){oj=new U;var e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]);e=new em(e,5),oj.setIndex([0,1,2,0,2,3]),oj.addAttribute("position",new eg(e,3,0,!1)),oj.addAttribute("uv",new eg(e,2,3,!1))}this.geometry=oj,this.material=void 0!==t?t:new ev,this.center=new i(.5,.5)}function e$(){M.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function ex(t,e){t&&t.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Y.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new g,this.bindMatrixInverse=new g}function e_(t,e){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else for(console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[],t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new g)}function ew(){M.call(this),this.type="Bone"}function eb(t){k.call(this),this.type="LineBasicMaterial",this.color=new $(16777215),this.linewidth=1,this.linejoin=this.linecap="round",this.lights=!1,this.setValues(t)}function e8(t,e,i){1===i&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),M.call(this),this.type="Line",this.geometry=void 0!==t?t:new U,this.material=void 0!==e?e:new eb({color:16777215*Math.random()})}function eE(t,e){e8.call(this,t,e),this.type="LineSegments"}function eM(t,e){e8.call(this,t,e),this.type="LineLoop"}function eS(t){k.call(this),this.type="PointsMaterial",this.color=new $(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=this.morphTargets=!1,this.setValues(t)}function eT(t,e){M.call(this),this.type="Points",this.geometry=void 0!==t?t:new U,this.material=void 0!==e?e:new eS({color:16777215*Math.random()})}function e1(t,e,i,n,r,a,s,c,h){o.call(this,t,e,i,n,r,a,s,c,h),this.format=void 0!==s?s:1022,this.minFilter=void 0!==a?a:1006,this.magFilter=void 0!==r?r:1006,this.generateMipmaps=!1}function e0(t,e,i,n,r,a,s,c,h,l,u,p){o.call(this,null,a,s,c,h,l,n,r,u,p),this.image={width:e,height:i},this.mipmaps=t,this.generateMipmaps=this.flipY=!1}function eL(t,e,i,n,r,a,s,c,h){o.call(this,t,e,i,n,r,a,s,c,h),this.needsUpdate=!0}function eA(t,e,i,n,r,a,s,c,h,l){if(1026!==(l=void 0!==l?l:1026)&&1027!==l)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&1026===l&&(i=1012),void 0===i&&1027===l&&(i=1020),o.call(this,null,n,r,a,s,c,l,i,h),this.image={width:t,height:e},this.magFilter=void 0!==s?s:1003,this.minFilter=void 0!==c?c:1003,this.generateMipmaps=this.flipY=!1}function eP(t){U.call(this),this.type="WireframeGeometry";var e,i,n,a=[],o=[0,0],s={},c=["a","b","c"];if(t&&t.isGeometry){var h=t.faces,l=0;for(i=h.length;l<i;l++){var u=h[l];for(e=0;3>e;e++){var p=u[c[e]],d=u[c[(e+1)%3]];o[0]=Math.min(p,d),o[1]=Math.max(p,d),void 0===s[p=o[0]+","+o[1]]&&(s[p]={index1:o[0],index2:o[1]})}}for(p in s)l=s[p],c=t.vertices[l.index1],a.push(c.x,c.y,c.z),c=t.vertices[l.index2],a.push(c.x,c.y,c.z)}else if(t&&t.isBufferGeometry){if(c=new r,null!==t.index){h=t.attributes.position,u=t.index;var f=t.groups;for(0===f.length&&(f=[{start:0,count:u.count,materialIndex:0}]),t=0,n=f.length;t<n;++t)for(e=(l=f[t]).start,i=l.count,l=e,i=e+i;l<i;l+=3)for(e=0;3>e;e++)p=u.getX(l+e),d=u.getX(l+(e+1)%3),o[0]=Math.min(p,d),o[1]=Math.max(p,d),void 0===s[p=o[0]+","+o[1]]&&(s[p]={index1:o[0],index2:o[1]});for(p in s)l=s[p],c.fromBufferAttribute(h,l.index1),a.push(c.x,c.y,c.z),c.fromBufferAttribute(h,l.index2),a.push(c.x,c.y,c.z)}else for(h=t.attributes.position,l=0,i=h.count/3;l<i;l++)for(e=0;3>e;e++)s=3*l+e,c.fromBufferAttribute(h,s),a.push(c.x,c.y,c.z),s=3*l+(e+1)%3,c.fromBufferAttribute(h,s),a.push(c.x,c.y,c.z)}this.addAttribute("position",new B(a,3))}function eR(t,e,i){S.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:i},this.fromBufferGeometry(new eC(t,e,i)),this.mergeVertices()}function eC(t,e,i){U.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:i};var n,a,o=[],s=[],c=[],h=[],l=new r,u=new r,p=new r,d=new r,f=new r;3>t.length&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var m=e+1;for(n=0;n<=i;n++){var g=n/i;for(a=0;a<=e;a++){var v=a/e;t(v,g,u),s.push(u.x,u.y,u.z),0<=v-1e-5?(t(v-1e-5,g,p),d.subVectors(u,p)):(t(v+1e-5,g,p),d.subVectors(p,u)),0<=g-1e-5?(t(v,g-1e-5,p),f.subVectors(u,p)):(t(v,g+1e-5,p),f.subVectors(p,u)),l.crossVectors(d,f).normalize(),c.push(l.x,l.y,l.z),h.push(v,g)}}for(n=0;n<i;n++)for(a=0;a<e;a++)t=n*m+a+1,l=(n+1)*m+a+1,u=(n+1)*m+a,o.push(n*m+a,t,u),o.push(t,l,u);this.setIndex(o),this.addAttribute("position",new B(s,3)),this.addAttribute("normal",new B(c,3)),this.addAttribute("uv",new B(h,2))}function eI(t,e,i,n){S.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:i,detail:n},this.fromBufferGeometry(new eD(t,e,i,n)),this.mergeVertices()}function eD(t,e,n,a){function o(t){h.push(t.x,t.y,t.z)}function s(e,i){e*=3,i.x=t[e+0],i.y=t[e+1],i.z=t[e+2]}function c(t,e,i,n){0>n&&1===t.x&&(l[e]=t.x-1),0===i.x&&0===i.z&&(l[e]=n/2/Math.PI+.5)}U.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:a},n=n||1;var h=[],l=[];!function(t){for(var i=new r,n=new r,a=new r,c=0;c<e.length;c+=3){s(e[c+0],i),s(e[c+1],n),s(e[c+2],a);var h,l,u=i,p=n,d=a,f=Math.pow(2,t),m=[];for(l=0;l<=f;l++){m[l]=[];var g=u.clone().lerp(d,l/f),v=p.clone().lerp(d,l/f),y=f-l;for(h=0;h<=y;h++)m[l][h]=0===h&&l===f?g:g.clone().lerp(v,h/y)}for(l=0;l<f;l++)for(h=0;h<2*(f-l)-1;h++)u=Math.floor(h/2),0==h%2?(o(m[l][u+1]),o(m[l+1][u]),o(m[l][u])):(o(m[l][u+1]),o(m[l+1][u+1]),o(m[l+1][u]))}}(a=a||0),function(t){for(var e=new r,i=0;i<h.length;i+=3)e.x=h[i+0],e.y=h[i+1],e.z=h[i+2],e.normalize().multiplyScalar(t),h[i+0]=e.x,h[i+1]=e.y,h[i+2]=e.z}(n),function(){for(var t=new r,e=0;e<h.length;e+=3)t.x=h[e+0],t.y=h[e+1],t.z=h[e+2],l.push(Math.atan2(t.z,-t.x)/2/Math.PI+.5,1-(Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5));t=new r,e=new r;for(var n=new r,a=new r,o=new i,s=new i,u=new i,p=0,d=0;p<h.length;p+=9,d+=6){t.set(h[p+0],h[p+1],h[p+2]),e.set(h[p+3],h[p+4],h[p+5]),n.set(h[p+6],h[p+7],h[p+8]),o.set(l[d+0],l[d+1]),s.set(l[d+2],l[d+3]),u.set(l[d+4],l[d+5]),a.copy(t).add(e).add(n).divideScalar(3);var f=Math.atan2(a.z,-a.x);c(o,d+0,t,f),c(s,d+2,e,f),c(u,d+4,n,f)}for(t=0;t<l.length;t+=6)e=l[t+0],o=Math.min(e,n=l[t+2],a=l[t+4]),.9<Math.max(e,n,a)&&.1>o&&(.2>e&&(l[t+0]+=1),.2>n&&(l[t+2]+=1),.2>a&&(l[t+4]+=1))}(),this.addAttribute("position",new B(h,3)),this.addAttribute("normal",new B(h.slice(),3)),this.addAttribute("uv",new B(l,2)),0===a?this.computeVertexNormals():this.normalizeNormals()}function eB(t,e){S.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new ez(t,e)),this.mergeVertices()}function ez(t,e){eD.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function eN(t,e){S.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new e2(t,e)),this.mergeVertices()}function e2(t,e){eD.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function eG(t,e){S.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new eU(t,e)),this.mergeVertices()}function eU(t,e){var i=(1+Math.sqrt(5))/2;eD.call(this,[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function eF(t,e){S.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new e3(t,e)),this.mergeVertices()}function e3(t,e){var i=(1+Math.sqrt(5))/2,n=1/i;eD.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function eH(t,e,i,n,r,a){S.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:n,closed:r},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed."),t=new eO(t,e,i,n,r),this.tangents=t.tangents,this.normals=t.normals,this.binormals=t.binormals,this.fromBufferGeometry(t),this.mergeVertices()}function eO(t,e,n,a,o){function s(i){f=t.getPointAt(i/e,f);var r=c.normals[i];for(l=0,i=c.binormals[i];l<=a;l++){var o=l/a*Math.PI*2,s=Math.sin(o);o=-Math.cos(o),p.x=o*r.x+s*i.x,p.y=o*r.y+s*i.y,p.z=o*r.z+s*i.z,p.normalize(),g.push(p.x,p.y,p.z),u.x=f.x+n*p.x,u.y=f.y+n*p.y,u.z=f.z+n*p.z,m.push(u.x,u.y,u.z)}}U.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:a,closed:o},e=e||64,n=n||1,a=a||8,o=o||!1;var c=t.computeFrenetFrames(e,o);this.tangents=c.tangents,this.normals=c.normals,this.binormals=c.binormals;var h,l,u=new r,p=new r,d=new i,f=new r,m=[],g=[],v=[],y=[];for(h=0;h<e;h++)s(h);for(s(!1===o?e:0),h=0;h<=e;h++)for(l=0;l<=a;l++)d.x=h/e,d.y=l/a,v.push(d.x,d.y);!function(){for(l=1;l<=e;l++)for(h=1;h<=a;h++){var t=(a+1)*l+(h-1),i=(a+1)*l+h,n=(a+1)*(l-1)+h;y.push((a+1)*(l-1)+(h-1),t,n),y.push(t,i,n)}}(),this.setIndex(y),this.addAttribute("position",new B(m,3)),this.addAttribute("normal",new B(g,3)),this.addAttribute("uv",new B(v,2))}function eV(t,e,i,n,r,a,o){S.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:n,p:r,q:a},void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new e4(t,e,i,n,r,a)),this.mergeVertices()}function e4(t,e,i,n,a,o){function s(t,e,i,n,r){var a=Math.sin(t);i=Math.cos(e=i/e*t),r.x=n*(2+i)*.5*Math.cos(t),r.y=n*(2+i)*a*.5,r.z=n*Math.sin(e)*.5}U.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:n,p:a,q:o},t=t||1,e=e||.4,i=Math.floor(i)||64,n=Math.floor(n)||8,a=a||2,o=o||3;var c,h=[],l=[],u=[],p=[],d=new r,f=new r,m=new r,g=new r,v=new r,y=new r,$=new r;for(c=0;c<=i;++c){var x=c/i*a*Math.PI*2;for(s(x,a,o,t,m),s(x+.01,a,o,t,g),y.subVectors(g,m),$.addVectors(g,m),v.crossVectors(y,$),$.crossVectors(v,y),v.normalize(),$.normalize(),x=0;x<=n;++x){var _=x/n*Math.PI*2,w=-e*Math.cos(_);_=e*Math.sin(_),d.x=m.x+(w*$.x+_*v.x),d.y=m.y+(w*$.y+_*v.y),d.z=m.z+(w*$.z+_*v.z),l.push(d.x,d.y,d.z),f.subVectors(d,m).normalize(),u.push(f.x,f.y,f.z),p.push(c/i),p.push(x/n)}}for(x=1;x<=i;x++)for(c=1;c<=n;c++)t=(n+1)*x+(c-1),e=(n+1)*x+c,a=(n+1)*(x-1)+c,h.push((n+1)*(x-1)+(c-1),t,a),h.push(t,e,a);this.setIndex(h),this.addAttribute("position",new B(l,3)),this.addAttribute("normal",new B(u,3)),this.addAttribute("uv",new B(p,2))}function ek(t,e,i,n,r){S.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:n,arc:r},this.fromBufferGeometry(new eW(t,e,i,n,r)),this.mergeVertices()}function eW(t,e,i,n,a){U.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:n,arc:a},t=t||1,e=e||.4,i=Math.floor(i)||8,n=Math.floor(n)||6,a=a||2*Math.PI;var o,s,c=[],h=[],l=[],u=[],p=new r,d=new r,f=new r;for(o=0;o<=i;o++)for(s=0;s<=n;s++){var m=s/n*a,g=o/i*Math.PI*2;d.x=(t+e*Math.cos(g))*Math.cos(m),d.y=(t+e*Math.cos(g))*Math.sin(m),d.z=e*Math.sin(g),h.push(d.x,d.y,d.z),p.x=t*Math.cos(m),p.y=t*Math.sin(m),f.subVectors(d,p).normalize(),l.push(f.x,f.y,f.z),u.push(s/n),u.push(o/i)}for(o=1;o<=i;o++)for(s=1;s<=n;s++)t=(n+1)*(o-1)+s-1,e=(n+1)*(o-1)+s,a=(n+1)*o+s,c.push((n+1)*o+s-1,t,a),c.push(t,e,a);this.setIndex(c),this.addAttribute("position",new B(h,3)),this.addAttribute("normal",new B(l,3)),this.addAttribute("uv",new B(u,2))}function e5(t,e,i,n,r){for(var a,o=0,s=e,c=i-n;s<i;s+=n)o+=(t[c]-t[s])*(t[s+1]+t[c+1]),c=s;if(r===0<o)for(r=e;r<i;r+=n)a=it(r,t[r],t[r+1],a);else for(r=i-n;r>=e;r-=n)a=it(r,t[r],t[r+1],a);return a&&eJ(a,a.next)&&(ie(a),a=a.next),a}function e6(t,e){if(!t)return t;e||(e=t);do{var i=!1;if(t.steiner||!eJ(t,t.next)&&0!==eZ(t.prev,t,t.next))t=t.next;else{if(ie(t),(t=e=t.prev)===t.next)break;i=!0}}while(i||t!==e);return e}function e7(t,e){return t.x-e.x}function ej(t,e){var i=e,n=t.x,r=t.y,a=-1/0;do{if(r<=i.y&&r>=i.next.y&&i.next.y!==i.y){var o=i.x+(r-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(o<=n&&o>a){if(a=o,o===n){if(r===i.y)return i;if(r===i.next.y)return i.next}var s=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!s)return null;if(n===a)return s.prev;e=s,o=s.x;var c=s.y,h=1/0;for(i=s.next;i!==e;){if(n>=i.x&&i.x>=o&&n!==i.x&&eY(r<c?n:a,r,o,c,r<c?a:n,r,i.x,i.y)){var l=Math.abs(r-i.y)/(n-i.x);(l<h||l===h&&i.x>s.x)&&eK(i,t)&&(s=i,h=l)}i=i.next}return s}function eq(t,e,i,n,r){return((t=((t=((t=((t=32767*(t-i)*r)|t<<8)&16711935)|t<<4)&252645135)|t<<2)&858993459)|t<<1)&1431655765|(((e=((e=((e=((e=32767*(e-n)*r)|e<<8)&16711935)|e<<4)&252645135)|e<<2)&858993459)|e<<1)&1431655765)<<1}function eX(t){var e=t,i=t;do e.x<i.x&&(i=e),e=e.next;while(e!==t);return i}function eY(t,e,i,n,r,a,o,s){return 0<=(r-o)*(e-s)-(t-o)*(a-s)&&0<=(t-o)*(n-s)-(i-o)*(e-s)&&0<=(i-o)*(a-s)-(r-o)*(n-s)}function eZ(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function eJ(t,e){return t.x===e.x&&t.y===e.y}function eQ(t,e,i,n){return!!(eJ(t,e)&&eJ(i,n)||eJ(t,n)&&eJ(i,e))||0<eZ(t,e,i)!=0<eZ(t,e,n)&&0<eZ(i,n,t)!=0<eZ(i,n,e)}function eK(t,e){return 0>eZ(t.prev,t,t.next)?0<=eZ(t,e,t.next)&&0<=eZ(t,t.prev,e):0>eZ(t,e,t.prev)||0>eZ(t,t.next,e)}function e9(t,e){var i=new ii(t.i,t.x,t.y),n=new ii(e.i,e.x,e.y),r=t.next,a=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,a.next=n,n.prev=a,n}function it(t,e,i,n){return t=new ii(t,e,i),n?(t.next=n.next,t.prev=n,n.next.prev=t,n.next=t):(t.prev=t,t.next=t),t}function ie(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function ii(t,e,i){this.i=t,this.x=e,this.y=i,this.nextZ=this.prevZ=this.z=this.next=this.prev=null,this.steiner=!1}function ir(t){var e=t.length;2<e&&t[e-1].equals(t[0])&&t.pop()}function ia(t,e){for(var i=0;i<e.length;i++)t.push(e[i].x),t.push(e[i].y)}function io(t,e){S.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new is(t,e)),this.mergeVertices()}function is(t,e){function n(t){function n(t,e,i){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(i).add(t)}function c(t,e,n){var r=t.x-e.x,a=t.y-e.y,o=n.x-t.x,s=n.y-t.y,c=r*r+a*a;if(Math.abs(r*s-a*o)>Number.EPSILON){var h=Math.sqrt(c),l=Math.sqrt(o*o+s*s);if(c=e.x-a/h,e=e.y+r/h,s=((n.x-s/l-c)*s-(n.y+o/l-e)*o)/(r*s-a*o),2>=(a=(o=c+r*s-t.x)*o+(r=e+a*s-t.y)*r))return new i(o,r);a=Math.sqrt(a/2)}else t=!1,r>Number.EPSILON?o>Number.EPSILON&&(t=!0):r<-Number.EPSILON?o<-Number.EPSILON&&(t=!0):Math.sign(a)===Math.sign(s)&&(t=!0),t?(o=-a,a=Math.sqrt(c)):(o=r,r=a,a=Math.sqrt(c/2));return new i(o/a,r/a)}function h(t,e){for(H=t.length;0<=--H;){var i=H,n=H-1;0>n&&(n=t.length-1);var r,s=g+2*w;for(r=0;r<s;r++){var c=U*r,h=U*(r+1),l=e+n+c,u=e+n+h;h=e+i+h,p(e+i+c),p(l),p(h),p(l),p(u),p(h),c=o.length/3,d((c=E.generateSideWallUV(a,o,c-6,c-3,c-2,c-1))[0]),d(c[1]),d(c[3]),d(c[1]),d(c[2]),d(c[3])}}}function l(t,e,i){f.push(t),f.push(e),f.push(i)}function u(t,e,i){p(t),p(e),p(i),t=o.length/3,d((t=E.generateTopUV(a,o,t-3,t-2,t-1))[0]),d(t[1]),d(t[2])}function p(t){o.push(f[3*t]),o.push(f[3*t+1]),o.push(f[3*t+2])}function d(t){s.push(t.x),s.push(t.y)}var f=[],m=void 0!==e.curveSegments?e.curveSegments:12,g=void 0!==e.steps?e.steps:1,v=void 0!==e.depth?e.depth:100,y=void 0===e.bevelEnabled||e.bevelEnabled,$=void 0!==e.bevelThickness?e.bevelThickness:6,x=void 0!==e.bevelSize?e.bevelSize:$-2,_=void 0!==e.bevelOffset?e.bevelOffset:0,w=void 0!==e.bevelSegments?e.bevelSegments:3,b=e.extrudePath,E=void 0!==e.UVGenerator?e.UVGenerator:oR;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),v=e.amount);var M=!1;if(b){var S=b.getSpacedPoints(g);M=!0,y=!1;var T=b.computeFrenetFrames(g,!1),L=new r,A=new r,P=new r}y||(_=x=$=w=0),t=(m=t.extractPoints(m)).shape;var R=m.holes;if(!oP.isClockWise(t)){t=t.reverse();var C=0;for(z=R.length;C<z;C++){var I=R[C];oP.isClockWise(I)&&(R[C]=I.reverse())}}var D=oP.triangulateShape(t,R),B=t;for(C=0,z=R.length;C<z;C++)I=R[C],t=t.concat(I);var z,N,G,U=t.length,F=D.length;m=[];var H=0,O=B.length,V=O-1;for(N=H+1;H<O;H++,V++,N++)V===O&&(V=0),N===O&&(N=0),m[H]=c(B[H],B[V],B[N]);b=[];var k=m.concat();for(C=0,z=R.length;C<z;C++){I=R[C];var W=[];for(H=0,V=(O=I.length)-1,N=H+1;H<O;H++,V++,N++)V===O&&(V=0),N===O&&(N=0),W[H]=c(I[H],I[V],I[N]);b.push(W),k=k.concat(W)}for(V=0;V<w;V++){var j=$*Math.cos((O=V/w)*Math.PI/2);for(N=x*Math.sin(O*Math.PI/2)+_,H=0,O=B.length;H<O;H++){var q=n(B[H],m[H],N);l(q.x,q.y,-j)}for(C=0,z=R.length;C<z;C++)for(I=R[C],W=b[C],H=0,O=I.length;H<O;H++)l((q=n(I[H],W[H],N)).x,q.y,-j)}for(H=0,N=x+_;H<U;H++)q=y?n(t[H],k[H],N):t[H],M?(A.copy(T.normals[0]).multiplyScalar(q.x),L.copy(T.binormals[0]).multiplyScalar(q.y),P.copy(S[0]).add(A).add(L),l(P.x,P.y,P.z)):l(q.x,q.y,0);for(O=1;O<=g;O++)for(H=0;H<U;H++)q=y?n(t[H],k[H],N):t[H],M?(A.copy(T.normals[O]).multiplyScalar(q.x),L.copy(T.binormals[O]).multiplyScalar(q.y),P.copy(S[O]).add(A).add(L),l(P.x,P.y,P.z)):l(q.x,q.y,v/g*O);for(V=w-1;0<=V;V--){for(j=$*Math.cos((O=V/w)*Math.PI/2),N=x*Math.sin(O*Math.PI/2)+_,H=0,O=B.length;H<O;H++)l((q=n(B[H],m[H],N)).x,q.y,v+j);for(C=0,z=R.length;C<z;C++)for(I=R[C],W=b[C],H=0,O=I.length;H<O;H++)q=n(I[H],W[H],N),M?l(q.x,q.y+S[g-1].y,S[g-1].x+j):l(q.x,q.y,v+j)}!function(){var t=o.length/3;if(y){var e=0*U;for(H=0;H<F;H++)u((G=D[H])[2]+e,G[1]+e,G[0]+e);for(H=0,e=U*(g+2*w);H<F;H++)u((G=D[H])[0]+e,G[1]+e,G[2]+e)}else{for(H=0;H<F;H++)u((G=D[H])[2],G[1],G[0]);for(H=0;H<F;H++)u((G=D[H])[0]+U*g,G[1]+U*g,G[2]+U*g)}a.addGroup(t,o.length/3-t,0)}(),function(){var t=o.length/3,e=0;for(h(B,e),e+=B.length,C=0,z=R.length;C<z;C++)h(I=R[C],e),e+=I.length;a.addGroup(t,o.length/3-t,1)}()}U.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];for(var a=this,o=[],s=[],c=0,h=t.length;c<h;c++)n(t[c]);this.addAttribute("position",new B(o,3)),this.addAttribute("uv",new B(s,2)),this.computeVertexNormals()}function ic(t,e,i){if(i.shapes=[],Array.isArray(t))for(var n=0,r=t.length;n<r;n++)i.shapes.push(t[n].uuid);else i.shapes.push(t.uuid);return void 0!==e.extrudePath&&(i.options.extrudePath=e.extrudePath.toJSON()),i}function ih(t,e){S.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new il(t,e)),this.mergeVertices()}function il(t,e){var i=(e=e||{}).font;if(!i||!i.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new S;t=i.generateShapes(t,e.size),e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),is.call(this,t,e),this.type="TextBufferGeometry"}function iu(t,e,i,n,r,a,o){S.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:n,phiLength:r,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new ip(t,e,i,n,r,a,o)),this.mergeVertices()}function ip(t,e,i,n,a,o,s){U.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:n,phiLength:a,thetaStart:o,thetaLength:s},t=t||1,e=Math.max(3,Math.floor(e)||8),i=Math.max(2,Math.floor(i)||6),n=void 0!==n?n:0,a=void 0!==a?a:2*Math.PI;var c,h,l=(o=void 0!==o?o:0)+(s=void 0!==s?s:Math.PI),u=0,p=[],d=new r,f=new r,m=[],g=[],v=[],y=[];for(h=0;h<=i;h++){var $=[],x=h/i,_=0==h?.5/e:h==i?-.5/e:0;for(c=0;c<=e;c++){var w=c/e;d.x=-t*Math.cos(n+w*a)*Math.sin(o+x*s),d.y=t*Math.cos(o+x*s),d.z=t*Math.sin(n+w*a)*Math.sin(o+x*s),g.push(d.x,d.y,d.z),f.copy(d).normalize(),v.push(f.x,f.y,f.z),y.push(w+_,1-x),$.push(u++)}p.push($)}for(h=0;h<i;h++)for(c=0;c<e;c++)t=p[h][c+1],n=p[h][c],a=p[h+1][c],s=p[h+1][c+1],(0!==h||0<o)&&m.push(t,n,s),(h!==i-1||l<Math.PI)&&m.push(n,a,s);this.setIndex(m),this.addAttribute("position",new B(g,3)),this.addAttribute("normal",new B(v,3)),this.addAttribute("uv",new B(y,2))}function id(t,e,i,n,r,a){S.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:n,thetaStart:r,thetaLength:a},this.fromBufferGeometry(new im(t,e,i,n,r,a)),this.mergeVertices()}function im(t,e,n,a,o,s){U.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:a,thetaStart:o,thetaLength:s},t=t||.5,e=e||1,o=void 0!==o?o:0,s=void 0!==s?s:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var c,h,l=[],u=[],p=[],d=[],f=t,m=(e-t)/(a=void 0!==a?Math.max(1,a):1),g=new r,v=new i;for(c=0;c<=a;c++){for(h=0;h<=n;h++)t=o+h/n*s,g.x=f*Math.cos(t),g.y=f*Math.sin(t),u.push(g.x,g.y,g.z),p.push(0,0,1),v.x=(g.x/e+1)/2,v.y=(g.y/e+1)/2,d.push(v.x,v.y);f+=m}for(c=0;c<a;c++)for(e=c*(n+1),h=0;h<n;h++)o=(t=h+e)+n+1,s=t+n+2,f=t+1,l.push(t,o,f),l.push(o,s,f);this.setIndex(l),this.addAttribute("position",new B(u,3)),this.addAttribute("normal",new B(p,3)),this.addAttribute("uv",new B(d,2))}function ig(t,e,i,n){S.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:n},this.fromBufferGeometry(new iv(t,e,i,n)),this.mergeVertices()}function iv(t,e,n,a){U.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:a},e=Math.floor(e)||12,n=n||0,a=a||2*Math.PI,a=rS.clamp(a,0,2*Math.PI);var o,s=[],c=[],h=[],l=1/e,u=new r,p=new i;for(o=0;o<=e;o++){var d=n+o*l*a,f=Math.sin(d),m=Math.cos(d);for(d=0;d<=t.length-1;d++)u.x=t[d].x*f,u.y=t[d].y,u.z=t[d].x*m,c.push(u.x,u.y,u.z),p.x=o/e,p.y=d/(t.length-1),h.push(p.x,p.y)}for(o=0;o<e;o++)for(d=0;d<t.length-1;d++)l=(n=d+o*t.length)+t.length,u=n+t.length+1,p=n+1,s.push(n,l,p),s.push(l,u,p);if(this.setIndex(s),this.addAttribute("position",new B(c,3)),this.addAttribute("uv",new B(h,2)),this.computeVertexNormals(),a===2*Math.PI)for(a=this.attributes.normal.array,s=new r,c=new r,h=new r,n=e*t.length*3,d=o=0;o<t.length;o++,d+=3)s.x=a[d+0],s.y=a[d+1],s.z=a[d+2],c.x=a[n+d+0],c.y=a[n+d+1],c.z=a[n+d+2],h.addVectors(s,c).normalize(),a[d+0]=a[n+d+0]=h.x,a[d+1]=a[n+d+1]=h.y,a[d+2]=a[n+d+2]=h.z}function iy(t,e){S.call(this),this.type="ShapeGeometry","object"==typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new i$(t,e)),this.mergeVertices()}function i$(t,e){function i(t){var i,s=r.length/3,h=(t=t.extractPoints(e)).shape,l=t.holes;for(!1===oP.isClockWise(h)&&(h=h.reverse()),t=0,i=l.length;t<i;t++){var u=l[t];!0===oP.isClockWise(u)&&(l[t]=u.reverse())}var p=oP.triangulateShape(h,l);for(t=0,i=l.length;t<i;t++)u=l[t],h=h.concat(u);for(t=0,i=h.length;t<i;t++)u=h[t],r.push(u.x,u.y,0),a.push(0,0,1),o.push(u.x,u.y);for(t=0,i=p.length;t<i;t++)h=p[t],n.push(h[0]+s,h[1]+s,h[2]+s),c+=3}U.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var n=[],r=[],a=[],o=[],s=0,c=0;if(!1===Array.isArray(t))i(t);else for(var h=0;h<t.length;h++)i(t[h]),this.addGroup(s,c,h),s+=c,c=0;this.setIndex(n),this.addAttribute("position",new B(r,3)),this.addAttribute("normal",new B(a,3)),this.addAttribute("uv",new B(o,2))}function ix(t,e){if(e.shapes=[],Array.isArray(t))for(var i=0,n=t.length;i<n;i++)e.shapes.push(t[i].uuid);else e.shapes.push(t.uuid);return e}function i_(t,e){U.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e};var i=[];e=Math.cos(rS.DEG2RAD*(void 0!==e?e:1));var n=[0,0],r={},a=["a","b","c"];if(t.isBufferGeometry){var o=new S;o.fromBufferGeometry(t)}else o=t.clone();o.mergeVertices(),o.computeFaceNormals(),t=o.vertices,o=o.faces;for(var s=0,c=o.length;s<c;s++)for(var h=o[s],l=0;3>l;l++){var u=h[a[l]],p=h[a[(l+1)%3]];n[0]=Math.min(u,p),n[1]=Math.max(u,p),void 0===r[u=n[0]+","+n[1]]?r[u]={index1:n[0],index2:n[1],face1:s,face2:void 0}:r[u].face2=s}for(u in r)(void 0===(n=r[u]).face2||o[n.face1].normal.dot(o[n.face2].normal)<=e)&&(a=t[n.index1],i.push(a.x,a.y,a.z),a=t[n.index2],i.push(a.x,a.y,a.z));this.addAttribute("position",new B(i,3))}function iw(t,e,i,n,r,a,o,s){S.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:n,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new ib(t,e,i,n,r,a,o,s)),this.mergeVertices()}function ib(t,e,n,a,o,s,c,h){function l(n){var o,s=new i,l=new r,v=0,x=!0===n?t:e,_=!0===n?1:-1,w=g;for(o=1;o<=a;o++)d.push(0,y*_,0),f.push(0,_,0),m.push(.5,.5),g++;var b=g;for(o=0;o<=a;o++){var E=o/a*h+c,M=Math.cos(E);E=Math.sin(E),l.x=x*E,l.y=y*_,l.z=x*M,d.push(l.x,l.y,l.z),f.push(0,_,0),s.x=.5*M+.5,s.y=.5*E*_+.5,m.push(s.x,s.y),g++}for(o=0;o<a;o++)s=w+o,l=b+o,!0===n?p.push(l,l+1,s):p.push(l+1,l,s),v+=3;u.addGroup($,v,!0===n?1:2),$+=v}U.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:a,heightSegments:o,openEnded:s,thetaStart:c,thetaLength:h};var u=this;t=void 0!==t?t:1,e=void 0!==e?e:1,n=n||1,a=Math.floor(a)||8,o=Math.floor(o)||1,s=void 0!==s&&s,c=void 0!==c?c:0,h=void 0!==h?h:2*Math.PI;var p=[],d=[],f=[],m=[],g=0,v=[],y=n/2,$=0;!function(){var i,s,l=new r,x=new r,_=0,w=(e-t)/n;for(s=0;s<=o;s++){var b=[],E=s/o,M=E*(e-t)+t;for(i=0;i<=a;i++){var S=i/a,T=S*h+c,L=Math.sin(T);T=Math.cos(T),x.x=M*L,x.y=-E*n+y,x.z=M*T,d.push(x.x,x.y,x.z),l.set(L,w,T).normalize(),f.push(l.x,l.y,l.z),m.push(S,1-E),b.push(g++)}v.push(b)}for(i=0;i<a;i++)for(s=0;s<o;s++)l=v[s+1][i],x=v[s+1][i+1],w=v[s][i+1],p.push(v[s][i],l,w),p.push(l,x,w),_+=6;u.addGroup($,_,0),$+=_}(),!1===s&&(0<t&&l(!0),0<e&&l(!1)),this.setIndex(p),this.addAttribute("position",new B(d,3)),this.addAttribute("normal",new B(f,3)),this.addAttribute("uv",new B(m,2))}function i8(t,e,i,n,r,a,o){iw.call(this,0,t,e,i,n,r,a,o),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:a,thetaLength:o}}function iE(t,e,i,n,r,a,o){ib.call(this,0,t,e,i,n,r,a,o),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:a,thetaLength:o}}function iM(t,e,i,n){S.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:n},this.fromBufferGeometry(new iS(t,e,i,n)),this.mergeVertices()}function iS(t,e,n,a){U.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:a},t=t||1,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,a=void 0!==a?a:2*Math.PI;var o,s=[],c=[],h=[],l=[],u=new r,p=new i;c.push(0,0,0),h.push(0,0,1),l.push(.5,.5);var d=0;for(o=3;d<=e;d++,o+=3){var f=n+d/e*a;u.x=t*Math.cos(f),u.y=t*Math.sin(f),c.push(u.x,u.y,u.z),h.push(0,0,1),p.x=(c[o]/t+1)/2,p.y=(c[o+1]/t+1)/2,l.push(p.x,p.y)}for(o=1;o<=e;o++)s.push(o,o+1,0);this.setIndex(s),this.addAttribute("position",new B(c,3)),this.addAttribute("normal",new B(h,3)),this.addAttribute("uv",new B(l,2))}function iT(t){k.call(this),this.type="ShadowMaterial",this.color=new $(0),this.transparent=!0,this.setValues(t)}function i1(t){W.call(this,t),this.type="RawShaderMaterial"}function i0(t){k.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new $(16777215),this.metalness=this.roughness=.5,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function iL(t){i0.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoatRoughness=this.clearCoat=0,this.setValues(t)}function iA(t){k.call(this),this.type="MeshPhongMaterial",this.color=new $(16777215),this.specular=new $(1118481),this.shininess=30,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function iP(t){iA.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(t)}function iR(t){k.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.lights=this.fog=!1,this.setValues(t)}function iC(t){k.call(this),this.type="MeshLambertMaterial",this.color=new $(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $(0),this.emissiveIntensity=1,this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function iI(t){k.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new $(16777215),this.bumpMap=this.map=this.matcap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.lights=this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function iD(t){eb.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}function iB(t,e,i,n){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new e.constructor(i),this.sampleValues=e,this.valueSize=i}function iz(t,e,i,n){iB.call(this,t,e,i,n),this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function iN(t,e,i,n){iB.call(this,t,e,i,n)}function i2(t,e,i,n){iB.call(this,t,e,i,n)}function iG(t,e,i,n){if(void 0===t)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=oD.convertArray(e,this.TimeBufferType),this.values=oD.convertArray(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}function iU(t,e,i){iG.call(this,t,e,i)}function iF(t,e,i,n){iG.call(this,t,e,i,n)}function i3(t,e,i,n){iG.call(this,t,e,i,n)}function iH(t,e,i,n){iB.call(this,t,e,i,n)}function iO(t,e,i,n){iG.call(this,t,e,i,n)}function iV(t,e,i,n){iG.call(this,t,e,i,n)}function i4(t,e,i,n){iG.call(this,t,e,i,n)}function ik(t,e,i){this.name=t,this.tracks=i,this.duration=void 0!==e?e:-1,this.uuid=rS.generateUUID(),0>this.duration&&this.resetDuration()}function iW(t){if(void 0===t.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=function t(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return i3;case"vector":case"vector2":case"vector3":case"vector4":return i4;case"color":return iF;case"quaternion":return iO;case"bool":case"boolean":return iU;case"string":return iV}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(t.type);if(void 0===t.times){var i=[],n=[];oD.flattenJSON(t.keys,i,n,"value"),t.times=i,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}function i5(t,e,i){var n=this,r=!1,a=0,o=0,s=void 0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(t){o++,!1===r&&void 0!==n.onStart&&n.onStart(t,a,o),r=!0},this.itemEnd=function(t){a++,void 0!==n.onProgress&&n.onProgress(t,a,o),a===o&&(r=!1,void 0!==n.onLoad)&&n.onLoad()},this.itemError=function(t){void 0!==n.onError&&n.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this}}function i6(t){this.manager=void 0!==t?t:oz}function i7(t){this.manager=void 0!==t?t:oz}function ij(t){this.manager=void 0!==t?t:oz,this._parser=null}function iq(t){this.manager=void 0!==t?t:oz,this._parser=null}function iX(t){this.manager=void 0!==t?t:oz}function iY(t){this.manager=void 0!==t?t:oz}function iZ(t){this.manager=void 0!==t?t:oz}function iJ(){this.type="Curve",this.arcLengthDivisions=200}function iQ(t,e,i,n,r,a,o,s){iJ.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=i||1,this.yRadius=n||1,this.aStartAngle=r||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=o||!1,this.aRotation=s||0}function iK(t,e,i,n,r,a){iQ.call(this,t,e,i,i,n,r,a),this.type="ArcCurve"}function i9(){var t=0,e=0,i=0,n=0;return{initCatmullRom:function(r,a,o,s,c){r=c*(o-r),s=c*(s-a),t=a,e=r,i=-3*a+3*o-2*r-s,n=2*a-2*o+r+s},initNonuniformCatmullRom:function(r,a,o,s,c,h,l){r=((a-r)/c-(o-r)/(c+h)+(o-a)/h)*h,s=((o-a)/h-(s-a)/(h+l)+(s-o)/l)*h,t=a,e=r,i=-3*a+3*o-2*r-s,n=2*a-2*o+r+s},calc:function(r){var a=r*r;return t+e*r+i*a+n*a*r}}}function nt(t,e,i,n){iJ.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=i||"centripetal",this.tension=n||.5}function ne(t,e,i,n,r){e=.5*(n-e),r=.5*(r-i);var a=t*t;return(2*i-2*n+e+r)*t*a+(-3*i+3*n-2*e-r)*a+e*t+i}function ni(t,e,i,n){var r=1-t;return r*r*e+2*(1-t)*t*i+t*t*n}function nn(t,e,i,n,r){var a=1-t,o=1-t;return a*a*a*e+3*o*o*t*i+3*(1-t)*t*t*n+t*t*t*r}function nr(t,e,n,r){iJ.call(this),this.type="CubicBezierCurve",this.v0=t||new i,this.v1=e||new i,this.v2=n||new i,this.v3=r||new i}function na(t,e,i,n){iJ.call(this),this.type="CubicBezierCurve3",this.v0=t||new r,this.v1=e||new r,this.v2=i||new r,this.v3=n||new r}function no(t,e){iJ.call(this),this.type="LineCurve",this.v1=t||new i,this.v2=e||new i}function ns(t,e){iJ.call(this),this.type="LineCurve3",this.v1=t||new r,this.v2=e||new r}function nc(t,e,n){iJ.call(this),this.type="QuadraticBezierCurve",this.v0=t||new i,this.v1=e||new i,this.v2=n||new i}function nh(t,e,i){iJ.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new r,this.v1=e||new r,this.v2=i||new r}function nl(t){iJ.call(this),this.type="SplineCurve",this.points=t||[]}function nu(){iJ.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function np(t){nu.call(this),this.type="Path",this.currentPoint=new i,t&&this.setFromPoints(t)}function nd(t){np.call(this,t),this.uuid=rS.generateUUID(),this.type="Shape",this.holes=[]}function nf(t,e){M.call(this),this.type="Light",this.color=new $(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function nm(t,e,i){nf.call(this,t,i),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(M.DefaultUp),this.updateMatrix(),this.groundColor=new $(e)}function ng(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new i(512,512),this.map=null,this.matrix=new g}function nv(){ng.call(this,new eo(50,1,.5,500))}function ny(t,e,i,n,r,a){nf.call(this,t,e),this.type="SpotLight",this.position.copy(M.DefaultUp),this.updateMatrix(),this.target=new M,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==i?i:0,this.angle=void 0!==n?n:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==a?a:1,this.shadow=new nv}function n$(t,e,i,n){nf.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==i?i:0,this.decay=void 0!==n?n:1,this.shadow=new ng(new eo(90,1,.5,500))}function nx(t,e,i,n,r,a){ea.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==e?e:1,this.top=void 0!==i?i:1,this.bottom=void 0!==n?n:-1,this.near=void 0!==r?r:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function n_(){ng.call(this,new nx(-5,5,5,-5,.5,500))}function nw(t,e){nf.call(this,t,e),this.type="DirectionalLight",this.position.copy(M.DefaultUp),this.updateMatrix(),this.target=new M,this.shadow=new n_}function nb(t,e){nf.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function n8(t,e,i,n){nf.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==i?i:10,this.height=void 0!==n?n:10}function nE(t){this.manager=void 0!==t?t:oz,this.textures={}}function nM(t){this.manager=void 0!==t?t:oz}function nS(t){this.manager=void 0!==t?t:oz,this.resourcePath=""}function nT(t){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==t?t:oz,this.options=void 0}function n1(){this.type="ShapePath",this.color=new $,this.subPaths=[],this.currentPath=null}function n0(t){this.type="Font",this.data=t}function nL(t){this.manager=void 0!==t?t:oz}function nA(){}function nP(t){this.manager=void 0!==t?t:oz}function nR(){this.coefficients=[];for(var t=0;9>t;t++)this.coefficients.push(new r)}function nC(t,e){nf.call(this,void 0,e),this.sh=void 0!==t?t:new nR}function nI(t,e,i){nC.call(this,void 0,i),t=(new $).set(t),i=(new $).set(e),e=new r(t.r,t.g,t.b),t=new r(i.r,i.g,i.b);var n=(i=Math.sqrt(Math.PI))*Math.sqrt(.75);this.sh.coefficients[0].copy(e).add(t).multiplyScalar(i),this.sh.coefficients[1].copy(e).sub(t).multiplyScalar(n)}function nD(t,e){nC.call(this,void 0,e),t=(new $).set(t),this.sh.coefficients[0].set(t.r,t.g,t.b).multiplyScalar(2*Math.sqrt(Math.PI))}function nB(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new eo,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new eo,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function nz(t,e,i,n){M.call(this),this.type="CubeCamera";var a=new eo(90,1,t,e);a.up.set(0,-1,0),a.lookAt(new r(1,0,0)),this.add(a);var o=new eo(90,1,t,e);o.up.set(0,-1,0),o.lookAt(new r(-1,0,0)),this.add(o);var s=new eo(90,1,t,e);s.up.set(0,0,1),s.lookAt(new r(0,1,0)),this.add(s);var c=new eo(90,1,t,e);c.up.set(0,0,-1),c.lookAt(new r(0,-1,0)),this.add(c);var h=new eo(90,1,t,e);h.up.set(0,-1,0),h.lookAt(new r(0,0,1)),this.add(h);var u=new eo(90,1,t,e);u.up.set(0,-1,0),u.lookAt(new r(0,0,-1)),this.add(u),n=n||{format:1022,magFilter:1006,minFilter:1006},this.renderTarget=new l(i,i,n),this.renderTarget.texture.name="CubeCamera",this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var i=t.getRenderTarget(),n=this.renderTarget,r=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,a),t.setRenderTarget(n,1),t.render(e,o),t.setRenderTarget(n,2),t.render(e,s),t.setRenderTarget(n,3),t.render(e,c),t.setRenderTarget(n,4),t.render(e,h),n.texture.generateMipmaps=r,t.setRenderTarget(n,5),t.render(e,u),t.setRenderTarget(i)},this.clear=function(t,e,i,n){for(var r=t.getRenderTarget(),a=this.renderTarget,o=0;6>o;o++)t.setRenderTarget(a,o),t.clear(e,i,n);t.setRenderTarget(r)}}function nN(t){this.autoStart=void 0===t||t,this.elapsedTime=this.oldTime=this.startTime=0,this.running=!1}function n2(){M.call(this),this.type="AudioListener",this.context=sG.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0}function nG(t){M.call(this),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.offset=this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function nU(t){nG.call(this,t),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function nF(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function n3(t,e,i){switch(this.binding=t,this.valueSize=i,t=Float64Array,e){case"quaternion":e=this._slerp;break;case"string":case"bool":t=Array,e=this._select;break;default:e=this._lerp}this.buffer=new t(4*i),this._mixBufferRegion=e,this.referenceCount=this.useCount=this.cumulativeWeight=0}function nH(t,e,i){i=i||nO.parseTrackName(e),this._targetGroup=t,this._bindings=t.subscribe_(e,i)}function nO(t,e,i){this.path=e,this.parsedPath=i||nO.parseTrackName(e),this.node=nO.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function nV(){this.uuid=rS.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,i=arguments.length;e!==i;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={},this.stats={objects:{get total(){return this._objects.length},get inUse(){return this.total-this.nCachedObjects_}},get bindingsPerObject(){return this._bindings.length}}}function n4(t,e,i){this._mixer=t,this._clip=e,this._localRoot=i||null,i=Array(e=(t=e.tracks).length);for(var n={endingStart:2400,endingEnd:2400},r=0;r!==e;++r){var a=t[r].createInterpolant(null);i[r]=a,a.settings=n}this._interpolantSettings=n,this._interpolants=i,this._propertyBindings=Array(e),this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function nk(t){this._root=t,this._initMemoryManager(),this.time=this._accuIndex=0,this.timeScale=1}function nW(t,e){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=e),this.value=t}function n5(){U.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function n6(t,e,i){em.call(this,t,e),this.meshPerAttribute=i||1}function n7(t,e,i,n){"number"==typeof i&&(n=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),T.call(this,t,e,i),this.meshPerAttribute=n||1}function nj(t,e,i,n){this.ray=new j(t,e),this.near=i||0,this.far=n||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function nq(t,e){return t.distance-e.distance}function nX(t,e,i,n){if(!1!==t.visible&&(t.raycast(e,i),!0===n)){t=t.children,n=0;for(var r=t.length;n<r;n++)nX(t[n],e,i,!0)}}function nY(t,e,i){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==i?i:0,this}function nZ(t,e,i){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==i?i:0,this}function nJ(t,e){this.min=void 0!==t?t:new i(1/0,1/0),this.max=void 0!==e?e:new i(-1/0,-1/0)}function nQ(t,e){this.start=void 0!==t?t:new r,this.end=void 0!==e?e:new r}function nK(t){M.call(this),this.material=t,this.render=function(){}}function n9(t,e,i,n){this.object=t,this.size=void 0!==e?e:1,t=void 0!==i?i:16711680,n=void 0!==n?n:1,e=0,(i=this.object.geometry)&&i.isGeometry?e=3*i.faces.length:i&&i.isBufferGeometry&&(e=i.attributes.normal.count),i=new U,e=new B(6*e,3),i.addAttribute("position",e),eE.call(this,i,new eb({color:t,linewidth:n})),this.matrixAutoUpdate=!1,this.update()}function rt(t,e){M.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e,t=new U,e=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var i=0,n=1;32>i;i++,n++){var r=i/32*Math.PI*2,a=n/32*Math.PI*2;e.push(Math.cos(r),Math.sin(r),1,Math.cos(a),Math.sin(a),1)}t.addAttribute("position",new B(e,3)),e=new eb({fog:!1}),this.cone=new eE(t,e),this.add(this.cone),this.update()}function re(t){for(var e=function t(e){var i=[];e&&e.isBone&&i.push(e);for(var n=0;n<e.children.length;n++)i.push.apply(i,t(e.children[n]));return i}(t),i=new U,n=[],r=[],a=new $(0,0,1),o=new $(0,1,0),s=0;s<e.length;s++){var c=e[s];c.parent&&c.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),r.push(a.r,a.g,a.b),r.push(o.r,o.g,o.b))}i.addAttribute("position",new B(n,3)),i.addAttribute("color",new B(r,3)),n=new eb({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0}),eE.call(this,i,n),this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function ri(t,e,i){this.light=t,this.light.updateMatrixWorld(),this.color=i,t=new ip(e,4,2),e=new X({wireframe:!0,fog:!1}),Y.call(this,t,e),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function rn(t,e){this.type="RectAreaLightHelper",this.light=t,this.color=e,(t=new U).addAttribute("position",new B([1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),t.computeBoundingSphere(),e=new eb({fog:!1}),e8.call(this,t,e),(t=new U).addAttribute("position",new B([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),t.computeBoundingSphere(),this.add(new Y(t,new X({side:1,fog:!1}))),this.update()}function rr(t,e,i){M.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,(t=new e2(e)).rotateY(.5*Math.PI),this.material=new X({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=2),e=t.getAttribute("position"),e=new Float32Array(3*e.count),t.addAttribute("color",new T(e,3)),this.add(new Y(t,this.material)),this.update()}function ra(t,e){this.lightProbe=t,this.size=e,t=new W({defines:{GAMMA_OUTPUT:""},uniforms:{sh:{value:this.lightProbe.sh.coefficients},intensity:{value:this.lightProbe.intensity}},vertexShader:"varying vec3 vNormal;\nvoid main() {\n	vNormal = normalize( normalMatrix * normal );\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"#define RECIPROCAL_PI 0.318309886\nvec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {\n	// matrix is assumed to be orthogonal\n	return normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );\n}\nvec3 linearToOutput( in vec3 a ) {\n	#ifdef GAMMA_OUTPUT\n		return pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );\n	#else\n		return a;\n	#endif\n}\n// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n	// normal is assumed to have unit length\n	float x = normal.x, y = normal.y, z = normal.z;\n	// band 0\n	vec3 result = shCoefficients[ 0 ] * 0.886227;\n	// band 1\n	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n	// band 2\n	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n	return result;\n}\nuniform vec3 sh[ 9 ]; // sh coefficients\nuniform float intensity; // light probe intensity\nvarying vec3 vNormal;\nvoid main() {\n	vec3 normal = normalize( vNormal );\n	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n	vec3 irradiance = shGetIrradianceAt( worldNormal, sh );\n	vec3 outgoingLight = RECIPROCAL_PI * irradiance * intensity;\n	outgoingLight = linearToOutput( outgoingLight );\n	gl_FragColor = vec4( outgoingLight, 1.0 );\n}"}),e=new ip(1,32,16),Y.call(this,e,t),this.onBeforeRender()}function ro(t,e,i,n){t=t||10,e=e||10,i=new $(void 0!==i?i:4473924),n=new $(void 0!==n?n:8947848);var r=e/2,a=t/e,o=t/2;t=[];for(var s=[],c=0,h=0,l=-o;c<=e;c++,l+=a){t.push(-o,0,l,o,0,l),t.push(l,0,-o,l,0,o);var u=c===r?i:n;u.toArray(s,h),h+=3,u.toArray(s,h),h+=3,u.toArray(s,h),h+=3,u.toArray(s,h),h+=3}(e=new U).addAttribute("position",new B(t,3)),e.addAttribute("color",new B(s,3)),i=new eb({vertexColors:2}),eE.call(this,e,i)}function rs(t,e,i,n,r,a){t=t||10,e=e||16,i=i||8,n=n||64,r=new $(void 0!==r?r:4473924),a=new $(void 0!==a?a:8947848);var o,s=[],c=[];for(o=0;o<=e;o++){var h=o/e*2*Math.PI,l=Math.sin(h)*t;h=Math.cos(h)*t,s.push(0,0,0),s.push(l,0,h);var u=1&o?r:a;c.push(u.r,u.g,u.b),c.push(u.r,u.g,u.b)}for(o=0;o<=i;o++){u=1&o?r:a;var p=t-t/i*o;for(e=0;e<n;e++)l=Math.sin(h=e/n*2*Math.PI)*p,h=Math.cos(h)*p,s.push(l,0,h),c.push(u.r,u.g,u.b),l=Math.sin(h=(e+1)/n*2*Math.PI)*p,h=Math.cos(h)*p,s.push(l,0,h),c.push(u.r,u.g,u.b)}(t=new U).addAttribute("position",new B(s,3)),t.addAttribute("color",new B(c,3)),s=new eb({vertexColors:2}),eE.call(this,t,s)}function rc(t,e,i,n){this.audio=t,this.range=e||1,this.divisionsInnerAngle=i||16,this.divisionsOuterAngle=n||2,t=new U,e=new Float32Array(3*(3*(this.divisionsInnerAngle+2*this.divisionsOuterAngle)+3)),t.addAttribute("position",new T(e,3)),e=new eb({color:65280}),i=new eb({color:16776960}),e8.call(this,t,[i,e]),this.update()}function rh(t,e,i,n){this.object=t,this.size=void 0!==e?e:1,t=void 0!==i?i:16776960,n=void 0!==n?n:1,e=0,(i=this.object.geometry)&&i.isGeometry?e=i.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead."),i=new U,e=new B(6*e,3),i.addAttribute("position",e),eE.call(this,i,new eb({color:t,linewidth:n})),this.matrixAutoUpdate=!1,this.update()}function rl(t,e,i){M.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,void 0===e&&(e=1),(t=new U).addAttribute("position",new B([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3)),e=new eb({fog:!1}),this.lightPlane=new e8(t,e),this.add(this.lightPlane),(t=new U).addAttribute("position",new B([0,0,0,0,0,1],3)),this.targetLine=new e8(t,e),this.add(this.targetLine),this.update()}function ru(t){function e(t,e,n){i(t,n),i(e,n)}function i(t,e){a.push(0,0,0),o.push(e.r,e.g,e.b),void 0===s[t]&&(s[t]=[]),s[t].push(a.length/3-1)}var n=new U,r=new eb({color:16777215,vertexColors:1}),a=[],o=[],s={},c=new $(16755200),h=new $(16711680),l=new $(43775),u=new $(16777215),p=new $(3355443);e("n1","n2",c),e("n2","n4",c),e("n4","n3",c),e("n3","n1",c),e("f1","f2",c),e("f2","f4",c),e("f4","f3",c),e("f3","f1",c),e("n1","f1",c),e("n2","f2",c),e("n3","f3",c),e("n4","f4",c),e("p","n1",h),e("p","n2",h),e("p","n3",h),e("p","n4",h),e("u1","u2",l),e("u2","u3",l),e("u3","u1",l),e("c","t",u),e("p","c",p),e("cn1","cn2",p),e("cn3","cn4",p),e("cf1","cf2",p),e("cf3","cf4",p),n.addAttribute("position",new B(a,3)),n.addAttribute("color",new B(o,3)),eE.call(this,n,r),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}function rp(t,e){this.object=t,void 0===e&&(e=16776960),t=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var i=new Float32Array(24),n=new U;n.setIndex(new T(t,1)),n.addAttribute("position",new T(i,3)),eE.call(this,n,new eb({color:e})),this.matrixAutoUpdate=!1,this.update()}function rd(t,e){this.type="Box3Helper",this.box=t,t=void 0!==e?e:16776960,e=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var i=new U;i.setIndex(new T(e,1)),i.addAttribute("position",new B([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),eE.call(this,i,new eb({color:t})),this.geometry.computeBoundingSphere()}function rf(t,e,i){this.type="PlaneHelper",this.plane=t,this.size=void 0===e?1:e,t=void 0!==i?i:16776960,(e=new U).addAttribute("position",new B([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),e.computeBoundingSphere(),e8.call(this,e,new eb({color:t})),(e=new U).addAttribute("position",new B([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),e.computeBoundingSphere(),this.add(new Y(e,new X({color:t,opacity:.2,transparent:!0,depthWrite:!1})))}function rm(t,e,i,n,a,o){M.call(this),void 0===t&&(t=new r(0,0,1)),void 0===e&&(e=new r(0,0,0)),void 0===i&&(i=1),void 0===n&&(n=16776960),void 0===a&&(a=.2*i),void 0===o&&(o=.2*a),void 0===rx&&((rx=new U).addAttribute("position",new B([0,0,0,0,1,0],3)),(r_=new ib(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(e),this.line=new e8(rx,new eb({color:n})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Y(r_,new X({color:n})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(i,a,o)}function rg(t){var e=[0,0,0,t=t||1,0,0,0,0,0,0,t,0,0,0,0,0,0,t];(t=new U).addAttribute("position",new B(e,3)),t.addAttribute("color",new B([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),e=new eb({vertexColors:2}),eE.call(this,t,e)}function rv(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),nt.call(this,t),this.type="catmullrom",this.closed=!0}function ry(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),nt.call(this,t),this.type="catmullrom"}function r$(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),nt.call(this,t),this.type="catmullrom"}void 0===Number.EPSILON&&(Number.EPSILON=2220446049250313e-31),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return 0>t?-1:0<t?1:+t}),!1=="name"in Function.prototype&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(null==t)throw TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),Object.assign(e.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)},removeEventListener:function(t,e){void 0!==this._listeners&&void 0!==(t=this._listeners[t])&&-1!==(e=t.indexOf(e))&&t.splice(e,1)},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this,e=e.slice(0);for(var i=0,n=e.length;i<n;i++)e[i].call(this,t)}}}});var rx,r_,rw,rb,r8,rE,rM,rS={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var t=[],e=0;256>e;e++)t[e]=(16>e?"0":"")+e.toString(16);return function(){var e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(t[255&e]+t[e>>8&255]+t[e>>16&255]+t[e>>24&255]+"-"+t[255&i]+t[i>>8&255]+"-"+t[i>>16&15|64]+t[i>>24&255]+"-"+t[63&n|128]+t[n>>8&255]+"-"+t[n>>16&255]+t[n>>24&255]+t[255&r]+t[r>>8&255]+t[r>>16&255]+t[r>>24&255]).toUpperCase()}}(),clamp:function(t,e,i){return Math.max(e,Math.min(i,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,i,n,r){return n+(t-e)*(r-n)/(i-e)},lerp:function(t,e,i){return(1-i)*t+i*e},smoothstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*(3-2*t)},smootherstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*rS.DEG2RAD},radToDeg:function(t){return t*rS.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}};Object.defineProperties(i.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(i.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,i=this.y;return t=t.elements,this.x=t[0]*e+t[3]*i+t[6],this.y=t[1]*e+t[4]*i+t[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return 0>t&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x;return e*e+(t=this.y-t.y)*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var i=Math.cos(e);e=Math.sin(e);var n=this.x-t.x,r=this.y-t.y;return this.x=n*i-r*e+t.x,this.y=n*e+r*i+t.y,this}}),Object.assign(n,{slerp:function(t,e,i,n){return i.copy(t).slerp(e,n)},slerpFlat:function(t,e,i,n,r,a,o){var s=i[n+0],c=i[n+1],h=i[n+2];i=i[n+3],n=r[a+0];var l=r[a+1],u=r[a+2];if(i!==(r=r[a+3])||s!==n||c!==l||h!==u){a=1-o;var p=s*n+c*l+h*u+i*r,d=0<=p?1:-1,f=1-p*p;f>Number.EPSILON&&(a=Math.sin(a*(p=Math.atan2(f=Math.sqrt(f),p*d)))/f,o=Math.sin(o*p)/f),d*=o,s=s*a+n*d,c=c*a+l*d,h=h*a+u*d,i=i*a+r*d,a===1-o&&(o=1/Math.sqrt(s*s+c*c+h*h+i*i),s*=o,c*=o,h*=o,i*=o)}t[e]=s,t[e+1]=c,t[e+2]=h,t[e+3]=i}}),Object.defineProperties(n.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback()}}}),Object.assign(n.prototype,{isQuaternion:!0,set:function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._w=n,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=t._x,n=t._y,r=t._z;t=t.order;var a=Math.cos,o=Math.sin,s=a(i/2),c=a(n/2);return a=a(r/2),i=o(i/2),n=o(n/2),r=o(r/2),"XYZ"===t?(this._x=i*c*a+s*n*r,this._y=s*n*a-i*c*r,this._z=s*c*r+i*n*a,this._w=s*c*a-i*n*r):"YXZ"===t?(this._x=i*c*a+s*n*r,this._y=s*n*a-i*c*r,this._z=s*c*r-i*n*a,this._w=s*c*a+i*n*r):"ZXY"===t?(this._x=i*c*a-s*n*r,this._y=s*n*a+i*c*r,this._z=s*c*r+i*n*a,this._w=s*c*a-i*n*r):"ZYX"===t?(this._x=i*c*a-s*n*r,this._y=s*n*a+i*c*r,this._z=s*c*r-i*n*a,this._w=s*c*a+i*n*r):"YZX"===t?(this._x=i*c*a+s*n*r,this._y=s*n*a+i*c*r,this._z=s*c*r-i*n*a,this._w=s*c*a-i*n*r):"XZY"===t&&(this._x=i*c*a-s*n*r,this._y=s*n*a-i*c*r,this._z=s*c*r+i*n*a,this._w=s*c*a+i*n*r),!1!==e&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var i=Math.sin(e/=2);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(e),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e=t.elements,i=e[0];t=e[4];var n=e[8],r=e[1],a=e[5],o=e[9],s=e[2],c=e[6],h=i+a+(e=e[10]);return 0<h?(i=.5/Math.sqrt(h+1),this._w=.25/i,this._x=(c-o)*i,this._y=(n-s)*i,this._z=(r-t)*i):i>a&&i>e?(i=2*Math.sqrt(1+i-a-e),this._w=(c-o)/i,this._x=.25*i,this._y=(t+r)/i,this._z=(n+s)/i):a>e?(i=2*Math.sqrt(1+a-i-e),this._w=(n-s)/i,this._x=(t+r)/i,this._y=.25*i,this._z=(o+c)/i):(i=2*Math.sqrt(1+e-i-a),this._w=(r-t)/i,this._x=(n+s)/i,this._y=(o+c)/i,this._z=.25*i),this.onChangeCallback(),this},setFromUnitVectors:function(t,e){var i=t.dot(e)+1;return 1e-6>i?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0):(this._x=0,this._y=-t.z,this._z=t.y)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x),this._w=i,this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(rS.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var i=this.angleTo(t);return 0===i||this.slerp(t,Math.min(1,e/i)),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._z=this._y=this._x=0,this._w=1):(t=1/t,this._x*=t,this._y*=t,this._z*=t,this._w*=t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var i=t._x,n=t._y,r=t._z;t=t._w;var a=e._x,o=e._y,s=e._z;return e=e._w,this._x=i*e+t*a+n*s-r*o,this._y=n*e+t*o+r*a-i*s,this._z=r*e+t*s+i*o-n*a,this._w=t*e-i*a-n*o-r*s,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var i=this._x,n=this._y,r=this._z,a=this._w,o=a*t._w+i*t._x+n*t._y+r*t._z;if(0>o?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),1<=o)return this._w=a,this._x=i,this._y=n,this._z=r,this;if((t=1-o*o)<=Number.EPSILON)return o=1-e,this._w=o*a+e*this._w,this._x=o*i+e*this._x,this._y=o*n+e*this._y,this._z=o*r+e*this._z,this.normalize();var s=Math.atan2(t=Math.sqrt(t),o);return o=Math.sin((1-e)*s)/t,e=Math.sin(e*s)/t,this._w=a*o+this._w*e,this._x=i*o+this._x*e,this._y=n*o+this._y*e,this._z=r*o+this._z*e,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(r.prototype,{isVector3:!0,set:function(t,e,i){return this.x=t,this.y=e,this.z=i,this},setScalar:function(t){return this.z=this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:(rw=new n,function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(rw.setFromEuler(t))}),applyAxisAngle:(rb=new n,function(t,e){return this.applyQuaternion(rb.setFromAxisAngle(t,e))}),applyMatrix3:function(t){var e=this.x,i=this.y,n=this.z;return t=t.elements,this.x=t[0]*e+t[3]*i+t[6]*n,this.y=t[1]*e+t[4]*i+t[7]*n,this.z=t[2]*e+t[5]*i+t[8]*n,this},applyMatrix4:function(t){var e=this.x,i=this.y,n=this.z,r=1/((t=t.elements)[3]*e+t[7]*i+t[11]*n+t[15]);return this.x=(t[0]*e+t[4]*i+t[8]*n+t[12])*r,this.y=(t[1]*e+t[5]*i+t[9]*n+t[13])*r,this.z=(t[2]*e+t[6]*i+t[10]*n+t[14])*r,this},applyQuaternion:function(t){var e=this.x,i=this.y,n=this.z,r=t.x,a=t.y,o=t.z,s=(t=t.w)*e+a*n-o*i,c=t*i+o*e-r*n,h=t*n+r*i-a*e;return e=-r*e-a*i-o*n,this.x=s*t+-(e*r)+-(c*o)- -(h*a),this.y=c*t+-(e*a)+-(h*r)- -(s*o),this.z=h*t+-(e*o)+-(s*a)- -(c*r),this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,i=this.y,n=this.z;return t=t.elements,this.x=t[0]*e+t[4]*i+t[8]*n,this.y=t[1]*e+t[5]*i+t[9]*n,this.z=t[2]*e+t[6]*i+t[10]*n,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var i=t.x,n=t.y;t=t.z;var r=e.x,a=e.y;return e=e.z,this.x=n*e-t*a,this.y=t*r-i*e,this.z=i*a-n*r,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:(r8=new r,function(t){return r8.copy(this).projectOnVector(t),this.sub(r8)}),reflect:(rE=new r,function(t){return this.sub(rE.copy(t).multiplyScalar(2*this.dot(t)))}),angleTo:function(t){return t=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq()),Math.acos(rS.clamp(t,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i+(t=this.z-t.z)*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,i){var n=Math.sin(e)*t;return this.x=n*Math.sin(i),this.y=Math.cos(e)*t,this.z=n*Math.cos(i),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){return t=t.elements,this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length();return t=this.setFromMatrixColumn(t,2).length(),this.x=e,this.y=i,this.z=t,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}}),Object.assign(a.prototype,{isMatrix3:!0,set:function(t,e,i,n,r,a,o,s,c){var h=this.elements;return h[0]=t,h[1]=n,h[2]=o,h[3]=e,h[4]=r,h[5]=s,h[6]=i,h[7]=a,h[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements;return t=t.elements,e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],this},setFromMatrix4:function(t){return t=t.elements,this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:(rM=new r,function(t){for(var e=0,i=t.count;e<i;e++)rM.x=t.getX(e),rM.y=t.getY(e),rM.z=t.getZ(e),rM.applyMatrix3(this),t.setXYZ(e,rM.x,rM.y,rM.z);return t}),multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var i=t.elements,n=e.elements;e=this.elements,t=i[0];var r=i[3],a=i[6],o=i[1],s=i[4],c=i[7],h=i[2],l=i[5];i=i[8];var u=n[0],p=n[3],d=n[6],f=n[1],m=n[4],g=n[7],v=n[2],y=n[5];return n=n[8],e[0]=t*u+r*f+a*v,e[3]=t*p+r*m+a*y,e[6]=t*d+r*g+a*n,e[1]=o*u+s*f+c*v,e[4]=o*p+s*m+c*y,e[7]=o*d+s*g+c*n,e[2]=h*u+l*f+i*v,e[5]=h*p+l*m+i*y,e[8]=h*d+l*g+i*n,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],i=t[1],n=t[2],r=t[3],a=t[4],o=t[5],s=t[6],c=t[7];return e*a*(t=t[8])-e*o*c-i*r*t+i*o*s+n*r*c-n*a*s},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var i=t.elements;t=this.elements;var n=i[0],r=i[1],a=i[2],o=i[3],s=i[4],c=i[5],h=i[6],l=i[7],u=(i=i[8])*s-c*l,p=c*h-i*o,d=l*o-s*h,f=n*u+r*p+a*d;if(0===f){if(!0===e)throw Error("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0");return console.warn("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0"),this.identity()}return e=1/f,t[0]=u*e,t[1]=(a*l-i*r)*e,t[2]=(c*r-a*s)*e,t[3]=p*e,t[4]=(i*n-a*h)*e,t[5]=(a*o-c*n)*e,t[6]=d*e,t[7]=(r*h-l*n)*e,t[8]=(s*n-r*o)*e,this},transpose:function(){var t=this.elements,e=t[1];return t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,i,n,r,a,o){var s=Math.cos(r);r=Math.sin(r),this.set(i*s,i*r,-i*(s*a+r*o)+a+t,-n*r,n*s,-n*(-r*a+s*o)+o+e,0,0,1)},scale:function(t,e){var i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=e,i[4]*=e,i[7]*=e,this},rotate:function(t){var e=Math.cos(t);t=Math.sin(t);var i=this.elements,n=i[0],r=i[3],a=i[6],o=i[1],s=i[4],c=i[7];return i[0]=e*n+t*o,i[3]=e*r+t*s,i[6]=e*a+t*c,i[1]=-t*n+e*o,i[4]=-t*r+e*s,i[7]=-t*a+e*c,this},translate:function(t,e){var i=this.elements;return i[0]+=t*i[2],i[3]+=t*i[5],i[6]+=t*i[8],i[1]+=e*i[2],i[4]+=e*i[5],i[7]+=e*i[8],this},equals:function(t){var e=this.elements;t=t.elements;for(var i=0;9>i;i++)if(e[i]!==t[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;9>i;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}});var rT,r1,r0,rL,rA,rP,rR,rC,rI,rD,rB,rz,rN,r2,rG,rU,rF,r3,rH,rO,rV,r4,rk,rW,r5,r6,r7={getDataURL:function(t){if("undefined"==typeof HTMLCanvasElement)return t.src;if(!(t instanceof HTMLCanvasElement)){void 0===rT&&(rT=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),rT.width=t.width,rT.height=t.height;var e=rT.getContext("2d");t instanceof ImageData?e.putImageData(t,0,0):e.drawImage(t,0,0,t.width,t.height),t=rT}return 2048<t.width||2048<t.height?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},rj=0;o.DEFAULT_IMAGE=void 0,o.DEFAULT_MAPPING=300,o.prototype=Object.assign(Object.create(e.prototype),{constructor:o,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var n=this.image;if(void 0===n.uuid&&(n.uuid=rS.generateUUID()),!e&&void 0===t.images[n.uuid]){if(Array.isArray(n))for(var r=[],a=0,o=n.length;a<o;a++)r.push(r7.getDataURL(n[a]));else r=r7.getDataURL(n);t.images[n.uuid]={uuid:n.uuid,url:r}}i.image=n.uuid}return e||(t.textures[this.uuid]=i),i},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),0>t.x||1<t.x)switch(this.wrapS){case 1e3:t.x-=Math.floor(t.x);break;case 1001:t.x=0>t.x?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(0>t.y||1<t.y)switch(this.wrapT){case 1e3:t.y-=Math.floor(t.y);break;case 1001:t.y=0>t.y?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(o.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(s.prototype,{isVector4:!0,set:function(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this},setScalar:function(t){return this.w=this.z=this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,i=this.y,n=this.z,r=this.w;return t=t.elements,this.x=t[0]*e+t[4]*i+t[8]*n+t[12]*r,this.y=t[1]*e+t[5]*i+t[9]*n+t[13]*r,this.z=t[2]*e+t[6]*i+t[10]*n+t[14]*r,this.w=t[3]*e+t[7]*i+t[11]*n+t[15]*r,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return 1e-4>e?(this.x=1,this.z=this.y=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e=(t=t.elements)[0],i=t[4],n=t[8],r=t[1],a=t[5],o=t[9],s=t[2],c=t[6],h=t[10];return .01>Math.abs(i-r)&&.01>Math.abs(n-s)&&.01>Math.abs(o-c)?.1>Math.abs(i+r)&&.1>Math.abs(n+s)&&.1>Math.abs(o+c)&&.1>Math.abs(e+a+h-3)?(this.set(1,0,0,0),this):(t=Math.PI,e=(e+1)/2,a=(a+1)/2,h=(h+1)/2,i=(i+r)/4,n=(n+s)/4,o=(o+c)/4,e>a&&e>h?.01>e?(c=0,i=s=.707106781):(s=i/(c=Math.sqrt(e)),i=n/c):a>h?.01>a?(c=.707106781,s=0,i=.707106781):(c=i/(s=Math.sqrt(a)),i=o/s):.01>h?(s=c=.707106781,i=0):(c=n/(i=Math.sqrt(h)),s=o/i),this.set(c,s,i,t),this):(.001>Math.abs(t=Math.sqrt((c-o)*(c-o)+(n-s)*(n-s)+(r-i)*(r-i)))&&(t=1),this.x=(c-o)/t,this.y=(n-s)/t,this.z=(r-i)/t,this.w=Math.acos((e+a+h-1)/2),this)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(t,e){return void 0===r1&&(r1=new s,r0=new s),r1.set(t,t,t,t),r0.set(e,e,e,e),this.clamp(r1,r0)},clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}}),c.prototype=Object.assign(Object.create(e.prototype),{constructor:c,isWebGLRenderTarget:!0,setSize:function(t,e){(this.width!==t||this.height!==e)&&(this.width=t,this.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),h.prototype=Object.assign(Object.create(c.prototype),{constructor:h,isWebGLMultisampleRenderTarget:!0,copy:function(t){return c.prototype.copy.call(this,t),this.samples=t.samples,this}}),l.prototype=Object.create(c.prototype),l.prototype.constructor=l,l.prototype.isWebGLRenderTargetCube=!0,u.prototype=Object.create(o.prototype),u.prototype.constructor=u,u.prototype.isDataTexture=!0,Object.assign(p.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,i=1/0,n=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,c=t.length;s<c;s+=3){var h=t[s],l=t[s+1],u=t[s+2];h<e&&(e=h),l<i&&(i=l),u<n&&(n=u),h>r&&(r=h),l>a&&(a=l),u>o&&(o=u)}return this.min.set(e,i,n),this.max.set(r,a,o),this},setFromBufferAttribute:function(t){for(var e=1/0,i=1/0,n=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,c=t.count;s<c;s++){var h=t.getX(s),l=t.getY(s),u=t.getZ(s);h<e&&(e=h),l<i&&(i=l),u<n&&(n=u),h>r&&(r=h),l>a&&(a=l),u>o&&(o=u)}return this.min.set(e,i,n),this.max.set(r,a,o),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:(rL=new r,function(t,e){return e=rL.copy(e).multiplyScalar(.5),this.min.copy(t).sub(e),this.max.copy(t).add(e),this}),setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new r),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new r),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(){function t(t){var r=t.geometry;if(void 0!==r){if(r.isGeometry)for(r=r.vertices,i=0,n=r.length;i<n;i++)a.copy(r[i]),a.applyMatrix4(t.matrixWorld),e.expandByPoint(a);else if(r.isBufferGeometry&&void 0!==(r=r.attributes.position))for(i=0,n=r.count;i<n;i++)a.fromBufferAttribute(r,i).applyMatrix4(t.matrixWorld),e.expandByPoint(a)}}var e,i,n,a=new r;return function(i){return e=this,i.updateMatrixWorld(!0),i.traverse(t),this}}(),containsPoint:function(t){return!(t.x<this.min.x)&&!(t.x>this.max.x)&&!(t.y<this.min.y)&&!(t.y>this.max.y)&&!(t.z<this.min.z)&&!(t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new r),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x)&&!(t.min.x>this.max.x)&&!(t.max.y<this.min.y)&&!(t.min.y>this.max.y)&&!(t.max.z<this.min.z)&&!(t.min.z>this.max.z)},intersectsSphere:(rA=new r,function(t){return this.clampPoint(t.center,rA),rA.distanceToSquared(t.center)<=t.radius*t.radius}),intersectsPlane:function(t){if(0<t.normal.x)var e=t.normal.x*this.min.x,i=t.normal.x*this.max.x;else e=t.normal.x*this.max.x,i=t.normal.x*this.min.x;return 0<t.normal.y?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),0<t.normal.z?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant},intersectsTriangle:function(){function t(t){var r,a=0;for(r=t.length-3;a<=r;a+=3){c.fromArray(t,a);var o=l.x*Math.abs(c.x)+l.y*Math.abs(c.y)+l.z*Math.abs(c.z),s=e.dot(c),h=i.dot(c),u=n.dot(c);if(Math.max(-Math.max(s,h,u),Math.min(s,h,u))>o)return!1}return!0}var e=new r,i=new r,n=new r,a=new r,o=new r,s=new r,c=new r,h=new r,l=new r,u=new r;return function(r){return!this.isEmpty()&&(this.getCenter(h),l.subVectors(this.max,h),e.subVectors(r.a,h),i.subVectors(r.b,h),n.subVectors(r.c,h),a.subVectors(i,e),o.subVectors(n,i),s.subVectors(e,n),!!(t(r=[0,-a.z,a.y,0,-o.z,o.y,0,-s.z,s.y,a.z,0,-a.x,o.z,0,-o.x,s.z,0,-s.x,-a.y,a.x,0,-o.y,o.x,0,-s.y,s.x,0])&&t(r=[1,0,0,0,1,0,0,0,1]))&&(u.crossVectors(a,o),t(r=[u.x,u.y,u.z])))}}(),clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new r),e.copy(t).clamp(this.min,this.max)},distanceToPoint:(rP=new r,function(t){return rP.copy(t).clamp(this.min,this.max).sub(t).length()}),getBoundingSphere:(rR=new r,function(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(rR).length(),t}),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:(rC=[new r,new r,new r,new r,new r,new r,new r,new r],function(t){return this.isEmpty()||(rC[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),rC[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),rC[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),rC[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),rC[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),rC[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),rC[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),rC[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(rC)),this}),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(d.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:(rI=new p,function(t,e){var i=this.center;void 0!==e?i.copy(e):rI.setFromPoints(t).getCenter(i);for(var n=e=0,r=t.length;n<r;n++)e=Math.max(e,i.distanceToSquared(t[n]));return this.radius=Math.sqrt(e),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return 0>=this.radius},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var i=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new r),e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new p),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius*=t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}}),Object.assign(f.prototype,{set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,i,n){return this.normal.set(t,e,i),this.constant=n,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:(rD=new r,rB=new r,function(t,e,i){return e=rD.subVectors(i,e).cross(rB.subVectors(t,e)).normalize(),this.setFromNormalAndCoplanarPoint(e,t),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new r),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:(rz=new r,function(t,e){void 0===e&&(console.warn("THREE.Plane: .intersectLine() target is now required"),e=new r);var i=t.delta(rz),n=this.normal.dot(i);if(0===n){if(0===this.distanceToPoint(t.start))return e.copy(t.start)}else if(!(0>(n=-(t.start.dot(this.normal)+this.constant)/n)||1<n))return e.copy(i).multiplyScalar(n).add(t.start)}),intersectsLine:function(t){var e=this.distanceToPoint(t.start);return t=this.distanceToPoint(t.end),0>e&&0<t||0>t&&0<e},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new r),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:(rN=new r,r2=new a,function(t,e){return e=e||r2.getNormalMatrix(t),t=this.coplanarPoint(rN).applyMatrix4(t),e=this.normal.applyMatrix3(e).normalize(),this.constant=-t.dot(e),this}),translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}),Object.assign(m.prototype,{set:function(t,e,i,n,r,a){var o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(i),o[3].copy(n),o[4].copy(r),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,i=0;6>i;i++)e[i].copy(t.planes[i]);return this},setFromMatrix:function(t){var e=this.planes,i=t.elements;t=i[0];var n=i[1],r=i[2],a=i[3],o=i[4],s=i[5],c=i[6],h=i[7],l=i[8],u=i[9],p=i[10],d=i[11],f=i[12],m=i[13],g=i[14];return i=i[15],e[0].setComponents(a-t,h-o,d-l,i-f).normalize(),e[1].setComponents(a+t,h+o,d+l,i+f).normalize(),e[2].setComponents(a+n,h+s,d+u,i+m).normalize(),e[3].setComponents(a-n,h-s,d-u,i-m).normalize(),e[4].setComponents(a-r,h-c,d-p,i-g).normalize(),e[5].setComponents(a+r,h+c,d+p,i+g).normalize(),this},intersectsObject:(rG=new d,function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),rG.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(rG)}),intersectsSprite:(rU=new d,function(t){return rU.center.set(0,0,0),rU.radius=.7071067811865476,rU.applyMatrix4(t.matrixWorld),this.intersectsSphere(rU)}),intersectsSphere:function(t){var e=this.planes,i=t.center;t=-t.radius;for(var n=0;6>n;n++)if(e[n].distanceToPoint(i)<t)return!1;return!0},intersectsBox:(rF=new r,function(t){for(var e=this.planes,i=0;6>i;i++){var n=e[i];if(rF.x=0<n.normal.x?t.max.x:t.min.x,rF.y=0<n.normal.y?t.max.y:t.min.y,rF.z=0<n.normal.z?t.max.z:t.min.z,0>n.distanceToPoint(rF))return!1}return!0}),containsPoint:function(t){for(var e=this.planes,i=0;6>i;i++)if(0>e[i].distanceToPoint(t))return!1;return!0}}),Object.assign(g.prototype,{isMatrix4:!0,set:function(t,e,i,n,r,a,o,s,c,h,l,u,p,d,f,m){var g=this.elements;return g[0]=t,g[4]=e,g[8]=i,g[12]=n,g[1]=r,g[5]=a,g[9]=o,g[13]=s,g[2]=c,g[6]=h,g[10]=l,g[14]=u,g[3]=p,g[7]=d,g[11]=f,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new g).fromArray(this.elements)},copy:function(t){var e=this.elements;return t=t.elements,e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],this},copyPosition:function(t){var e=this.elements;return t=t.elements,e[12]=t[12],e[13]=t[13],e[14]=t[14],this},extractBasis:function(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this},extractRotation:(r3=new r,function(t){var e=this.elements,i=t.elements,n=1/r3.setFromMatrixColumn(t,0).length(),r=1/r3.setFromMatrixColumn(t,1).length();return t=1/r3.setFromMatrixColumn(t,2).length(),e[0]=i[0]*n,e[1]=i[1]*n,e[2]=i[2]*n,e[3]=0,e[4]=i[4]*r,e[5]=i[5]*r,e[6]=i[6]*r,e[7]=0,e[8]=i[8]*t,e[9]=i[9]*t,e[10]=i[10]*t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}),makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,i=t.x,n=t.y,r=t.z,a=Math.cos(i);i=Math.sin(i);var o=Math.cos(n);n=Math.sin(n);var s=Math.cos(r);if(r=Math.sin(r),"XYZ"===t.order){t=a*s;var c=a*r,h=i*s,l=i*r;e[0]=o*s,e[4]=-o*r,e[8]=n,e[1]=c+h*n,e[5]=t-l*n,e[9]=-i*o,e[2]=l-t*n,e[6]=h+c*n,e[10]=a*o}else"YXZ"===t.order?(t=o*s,c=o*r,h=n*s,l=n*r,e[0]=t+l*i,e[4]=h*i-c,e[8]=a*n,e[1]=a*r,e[5]=a*s,e[9]=-i,e[2]=c*i-h,e[6]=l+t*i,e[10]=a*o):"ZXY"===t.order?(t=o*s,c=o*r,h=n*s,l=n*r,e[0]=t-l*i,e[4]=-a*r,e[8]=h+c*i,e[1]=c+h*i,e[5]=a*s,e[9]=l-t*i,e[2]=-a*n,e[6]=i,e[10]=a*o):"ZYX"===t.order?(t=a*s,c=a*r,h=i*s,l=i*r,e[0]=o*s,e[4]=h*n-c,e[8]=t*n+l,e[1]=o*r,e[5]=l*n+t,e[9]=c*n-h,e[2]=-n,e[6]=i*o,e[10]=a*o):"YZX"===t.order?(t=a*o,c=a*n,h=i*o,l=i*n,e[0]=o*s,e[4]=l-t*r,e[8]=h*r+c,e[1]=r,e[5]=a*s,e[9]=-i*s,e[2]=-n*s,e[6]=c*r+h,e[10]=t-l*r):"XZY"===t.order&&(t=a*o,c=a*n,h=i*o,l=i*n,e[0]=o*s,e[4]=-r,e[8]=n*s,e[1]=t*r+l,e[5]=a*s,e[9]=c*r-h,e[2]=h*r-c,e[6]=i*s,e[10]=l*r+t);return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:(rH=new r(0,0,0),rO=new r(1,1,1),function(t){return this.compose(rH,t,rO)}),lookAt:(rV=new r,r4=new r,rk=new r,function(t,e,i){var n=this.elements;return rk.subVectors(t,e),0===rk.lengthSq()&&(rk.z=1),rk.normalize(),rV.crossVectors(i,rk),0===rV.lengthSq()&&(1===Math.abs(i.z)?rk.x+=1e-4:rk.z+=1e-4,rk.normalize(),rV.crossVectors(i,rk)),rV.normalize(),r4.crossVectors(rk,rV),n[0]=rV.x,n[4]=r4.x,n[8]=rk.x,n[1]=rV.y,n[5]=r4.y,n[9]=rk.y,n[2]=rV.z,n[6]=r4.z,n[10]=rk.z,this}),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var i=t.elements,n=e.elements;e=this.elements,t=i[0];var r=i[4],a=i[8],o=i[12],s=i[1],c=i[5],h=i[9],l=i[13],u=i[2],p=i[6],d=i[10],f=i[14],m=i[3],g=i[7],v=i[11];i=i[15];var y=n[0],$=n[4],x=n[8],_=n[12],w=n[1],b=n[5],E=n[9],M=n[13],S=n[2],T=n[6],L=n[10],A=n[14],P=n[3],R=n[7],C=n[11];return n=n[15],e[0]=t*y+r*w+a*S+o*P,e[4]=t*$+r*b+a*T+o*R,e[8]=t*x+r*E+a*L+o*C,e[12]=t*_+r*M+a*A+o*n,e[1]=s*y+c*w+h*S+l*P,e[5]=s*$+c*b+h*T+l*R,e[9]=s*x+c*E+h*L+l*C,e[13]=s*_+c*M+h*A+l*n,e[2]=u*y+p*w+d*S+f*P,e[6]=u*$+p*b+d*T+f*R,e[10]=u*x+p*E+d*L+f*C,e[14]=u*_+p*M+d*A+f*n,e[3]=m*y+g*w+v*S+i*P,e[7]=m*$+g*b+v*T+i*R,e[11]=m*x+g*E+v*L+i*C,e[15]=m*_+g*M+v*A+i*n,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:(rW=new r,function(t){for(var e=0,i=t.count;e<i;e++)rW.x=t.getX(e),rW.y=t.getY(e),rW.z=t.getZ(e),rW.applyMatrix4(this),t.setXYZ(e,rW.x,rW.y,rW.z);return t}),determinant:function(){var t=this.elements,e=t[0],i=t[4],n=t[8],r=t[12],a=t[1],o=t[5],s=t[9],c=t[13],h=t[2],l=t[6],u=t[10],p=t[14];return t[3]*(+r*s*l-n*c*l-r*o*u+i*c*u+n*o*p-i*s*p)+t[7]*(+e*s*p-e*c*u+r*a*u-n*a*p+n*c*h-r*s*h)+t[11]*(+e*c*l-e*o*p-r*a*l+i*a*p+r*o*h-i*c*h)+t[15]*(-n*o*h-e*s*l+e*o*u+n*a*l-i*a*u+i*s*h)},transpose:function(){var t=this.elements,e=t[1];return t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var i=this.elements,n=t.elements;t=n[0];var r=n[1],a=n[2],o=n[3],s=n[4],c=n[5],h=n[6],l=n[7],u=n[8],p=n[9],d=n[10],f=n[11],m=n[12],g=n[13],v=n[14],y=p*v*l-g*d*l+g*h*f-c*v*f-p*h*(n=n[15])+c*d*n,$=m*d*l-u*v*l-m*h*f+s*v*f+u*h*n-s*d*n,x=u*g*l-m*p*l+m*c*f-s*g*f-u*c*n+s*p*n,_=m*p*h-u*g*h-m*c*d+s*g*d+u*c*v-s*p*v,w=t*y+r*$+a*x+o*_;if(0===w){if(!0===e)throw Error("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0");return console.warn("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0"),this.identity()}return e=1/w,i[0]=y*e,i[1]=(g*d*o-p*v*o-g*a*f+r*v*f+p*a*n-r*d*n)*e,i[2]=(c*v*o-g*h*o+g*a*l-r*v*l-c*a*n+r*h*n)*e,i[3]=(p*h*o-c*d*o-p*a*l+r*d*l+c*a*f-r*h*f)*e,i[4]=$*e,i[5]=(u*v*o-m*d*o+m*a*f-t*v*f-u*a*n+t*d*n)*e,i[6]=(m*h*o-s*v*o-m*a*l+t*v*l+s*a*n-t*h*n)*e,i[7]=(s*d*o-u*h*o+u*a*l-t*d*l-s*a*f+t*h*f)*e,i[8]=x*e,i[9]=(m*p*o-u*g*o-m*r*f+t*g*f+u*r*n-t*p*n)*e,i[10]=(s*g*o-m*c*o+m*r*l-t*g*l-s*r*n+t*c*n)*e,i[11]=(u*c*o-s*p*o-u*r*l+t*p*l+s*r*f-t*c*f)*e,i[12]=_*e,i[13]=(u*g*a-m*p*a+m*r*d-t*g*d-u*r*v+t*p*v)*e,i[14]=(m*c*a-s*g*a-m*r*h+t*g*h+s*r*v-t*c*v)*e,i[15]=(s*p*a-u*c*a+u*r*h-t*p*h-s*r*d+t*c*d)*e,this},scale:function(t){var e=this.elements,i=t.x,n=t.y;return t=t.z,e[0]*=i,e[4]*=n,e[8]*=t,e[1]*=i,e[5]*=n,e[9]*=t,e[2]*=i,e[6]*=n,e[10]*=t,e[3]*=i,e[7]*=n,e[11]*=t,this},getMaxScaleOnAxis:function(){var t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))},makeTranslation:function(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(1,0,0,0,0,e,-t,0,0,t,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(e,0,t,0,0,1,0,0,-t,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(e,-t,0,0,t,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var i=Math.cos(e);e=Math.sin(e);var n=1-i,r=t.x,a=t.y;t=t.z;var o=n*r,s=n*a;return this.set(o*r+i,o*a-e*t,o*t+e*a,0,o*a+e*t,s*a+i,s*t-e*r,0,o*t-e*a,s*t+e*r,n*t*t+i,0,0,0,0,1),this},makeScale:function(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this},makeShear:function(t,e,i){return this.set(1,e,i,0,t,1,i,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,i){var n=this.elements,r=e._x,a=e._y,o=e._z,s=e._w,c=r+r,h=a+a,l=o+o;e=r*c;var u=r*h;r*=l;var p=a*h;a*=l,o*=l,c*=s,h*=s,s*=l,l=i.x;var d=i.y;return i=i.z,n[0]=(1-(p+o))*l,n[1]=(u+s)*l,n[2]=(r-h)*l,n[3]=0,n[4]=(u-s)*d,n[5]=(1-(e+o))*d,n[6]=(a+c)*d,n[7]=0,n[8]=(r+h)*i,n[9]=(a-c)*i,n[10]=(1-(e+p))*i,n[11]=0,n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=1,this},decompose:(r5=new r,r6=new g,function(t,e,i){var n=this.elements,r=r5.set(n[0],n[1],n[2]).length(),a=r5.set(n[4],n[5],n[6]).length(),o=r5.set(n[8],n[9],n[10]).length();0>this.determinant()&&(r=-r),t.x=n[12],t.y=n[13],t.z=n[14],r6.copy(this),t=1/r,n=1/a;var s=1/o;return r6.elements[0]*=t,r6.elements[1]*=t,r6.elements[2]*=t,r6.elements[4]*=n,r6.elements[5]*=n,r6.elements[6]*=n,r6.elements[8]*=s,r6.elements[9]*=s,r6.elements[10]*=s,e.setFromRotationMatrix(r6),i.x=r,i.y=a,i.z=o,this}),makePerspective:function(t,e,i,n,r,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements;return o[0]=2*r/(e-t),o[4]=0,o[8]=(e+t)/(e-t),o[12]=0,o[1]=0,o[5]=2*r/(i-n),o[9]=(i+n)/(i-n),o[13]=0,o[2]=0,o[6]=0,o[10]=-(a+r)/(a-r),o[14]=-2*a*r/(a-r),o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(t,e,i,n,r,a){var o=this.elements,s=1/(e-t),c=1/(i-n),h=1/(a-r);return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-((e+t)*s),o[1]=0,o[5]=2*c,o[9]=0,o[13]=-((i+n)*c),o[2]=0,o[6]=0,o[10]=-2*h,o[14]=-((a+r)*h),o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(t){var e=this.elements;t=t.elements;for(var i=0;16>i;i++)if(e[i]!==t[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;16>i;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}});var rq,rX,rY,rZ={alphamap_fragment:"#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n	if ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n	reflectedLight.indirectDiffuse *= ambientOcclusion;\n	#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n	#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n	uniform sampler2D aoMap;\n	uniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n	vec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n	vec4 r = roughness * c0 + c1;\n	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n	return vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n	if( cutoffDistance > 0.0 ) {\n		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n	}\n	return distanceFalloff;\n#else\n	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n	}\n	return 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n	return RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n	return ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n	float a2 = pow2( alpha );\n	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n	return 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n	float a2 = pow2( alpha );\n	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n	return 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n	float a2 = pow2( alpha );\n	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n	return RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n	float alpha = pow2( roughness );\n	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n	float dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n	float dotNH = saturate( dot( geometry.normal, halfDir ) );\n	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n	vec3 F = F_Schlick( specularColor, dotLH );\n	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n	float D = D_GGX( alpha, dotNH );\n	return F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n	const float LUT_SIZE  = 64.0;\n	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n	const float LUT_BIAS  = 0.5 / LUT_SIZE;\n	float dotNV = saturate( dot( N, V ) );\n	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n	uv = uv * LUT_SCALE + LUT_BIAS;\n	return uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n	float l = length( f );\n	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n	float x = dot( v1, v2 );\n	float y = abs( x );\n	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n	float b = 3.4175940 + ( 4.1616724 + y ) * y;\n	float v = a / b;\n	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n	return cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n	vec3 lightNormal = cross( v1, v2 );\n	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n	vec3 T1, T2;\n	T1 = normalize( V - N * dot( V, N ) );\n	T2 = - cross( N, T1 );\n	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n	vec3 coords[ 4 ];\n	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n	coords[ 0 ] = normalize( coords[ 0 ] );\n	coords[ 1 ] = normalize( coords[ 1 ] );\n	coords[ 2 ] = normalize( coords[ 2 ] );\n	coords[ 3 ] = normalize( coords[ 3 ] );\n	vec3 vectorFormFactor = vec3( 0.0 );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n	return vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n	return specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n	vec3 F = F_Schlick( specularColor, dotNV );\n	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n	vec3 FssEss = F * brdf.x + brdf.y;\n	float Ess = brdf.x + brdf.y;\n	float Ems = 1.0 - Ess;\n	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n	singleScatter += FssEss;\n	multiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n	return 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n	float dotNH = saturate( dot( geometry.normal, halfDir ) );\n	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n	vec3 F = F_Schlick( specularColor, dotLH );\n	float G = G_BlinnPhong_Implicit( );\n	float D = D_BlinnPhong( shininess, dotNH );\n	return F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n	vec2 dHdxy_fwd() {\n		vec2 dSTdx = dFdx( vUv );\n		vec2 dSTdy = dFdy( vUv );\n		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n		return vec2( dBx, dBy );\n	}\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n		vec3 vN = surf_norm;\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n		float fDet = dot( vSigmaX, R1 );\n		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n	}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n	vec4 plane;\n	#pragma unroll_loop\n	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n		plane = clippingPlanes[ i ];\n		if ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n	}\n	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n		bool clipped = true;\n		#pragma unroll_loop\n		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n			plane = clippingPlanes[ i ];\n			clipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n		}\n		if ( clipped ) discard;\n	#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n	#if ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n		varying vec3 vViewPosition;\n	#endif\n	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n	varying vec3 vViewPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n	vViewPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n	diffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n	varying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n	varying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n	vColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n	const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n	return fract(sin(sn) * c);\n}\nstruct IncidentLight {\n	vec3 color;\n	vec3 direction;\n	bool visible;\n};\nstruct ReflectedLight {\n	vec3 directDiffuse;\n	vec3 directSpecular;\n	vec3 indirectDiffuse;\n	vec3 indirectSpecular;\n};\nstruct GeometricContext {\n	vec3 position;\n	vec3 normal;\n	vec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	float distance = dot( planeNormal, point - pointOnPlane );\n	return - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	return sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n	mat3 tmp;\n	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n	return tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n	return dot( weights, color.rgb );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n	vec3 absDirection = abs(direction);\n	int face = -1;\n	if( absDirection.x > absDirection.z ) {\n		if(absDirection.x > absDirection.y )\n			face = direction.x > 0.0 ? 0 : 3;\n		else\n			face = direction.y > 0.0 ? 1 : 4;\n	}\n	else {\n		if(absDirection.z > absDirection.y )\n			face = direction.z > 0.0 ? 2 : 5;\n		else\n			face = direction.y > 0.0 ? 1 : 4;\n	}\n	return face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n	float scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n	float dxRoughness = dFdx(roughness);\n	float dyRoughness = dFdy(roughness);\n	vec3 dx = dFdx( vec * scale * dxRoughness );\n	vec3 dy = dFdy( vec * scale * dyRoughness );\n	float d = max( dot( dx, dx ), dot( dy, dy ) );\n	d = clamp(d, 1.0, cubeUV_rangeClamp);\n	float mipLevel = 0.5 * log2(d);\n	return vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n	mipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n	float a = 16.0 * cubeUV_rcpTextureSize;\n	vec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n	vec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n	float powScale = exp2_packed.x * exp2_packed.y;\n	float scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n	float mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n	bool bRes = mipLevel == 0.0;\n	scale =  bRes && (scale < a) ? a : scale;\n	vec3 r;\n	vec2 offset;\n	int face = getFaceFromDirection(direction);\n	float rcpPowScale = 1.0 / powScale;\n	if( face == 0) {\n		r = vec3(direction.x, -direction.z, direction.y);\n		offset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n	}\n	else if( face == 1) {\n		r = vec3(direction.y, direction.x, direction.z);\n		offset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n	}\n	else if( face == 2) {\n		r = vec3(direction.z, direction.x, direction.y);\n		offset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n	}\n	else if( face == 3) {\n		r = vec3(direction.x, direction.z, direction.y);\n		offset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n	}\n	else if( face == 4) {\n		r = vec3(direction.y, direction.x, -direction.z);\n		offset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n	}\n	else {\n		r = vec3(direction.z, -direction.x, direction.y);\n		offset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n	}\n	r = normalize(r);\n	float texelOffset = 0.5 * cubeUV_rcpTextureSize;\n	vec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n	vec2 base = offset + vec2( texelOffset );\n	return base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n	float roughnessVal = roughness* cubeUV_maxLods3;\n	float r1 = floor(roughnessVal);\n	float r2 = r1 + 1.0;\n	float t = fract(roughnessVal);\n	vec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n	float s = mipInfo.y;\n	float level0 = mipInfo.x;\n	float level1 = level0 + 1.0;\n	level1 = level1 > 5.0 ? 5.0 : level1;\n	level0 += min( floor( s + 0.5 ), 5.0 );\n	vec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n	vec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n	vec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n	vec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n	vec4 result = mix(color10, color20, t);\n	return vec4(result.rgb, 1.0);\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n	transformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n	vec3 transformedTangent = normalMatrix * objectTangent;\n	#ifdef FLIP_SIDED\n		transformedTangent = - transformedTangent;\n	#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n	uniform sampler2D displacementMap;\n	uniform float displacementScale;\n	uniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n	vec4 emissiveColor = texture2D( emissiveMap, vUv );\n	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n	totalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n	uniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n	return value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n	float maxComponent = max( max( value.r, value.g ), value.b );\n	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n	return vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n	float maxRGB = max( value.r, max( value.g, value.b ) );\n	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n	M = ceil( M * 255.0 ) / 255.0;\n	return vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n	float maxRGB = max( value.r, max( value.g, value.b ) );\n	float D = max( maxRange / maxRGB, 1.0 );\n	D = min( floor( D ) / 255.0, 1.0 );\n	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n	vec4 vResult;\n	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n	vResult.w = fract( Le );\n	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n	return vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n	float Le = value.z * 255.0 + value.w;\n	vec3 Xp_Y_XYZp;\n	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n	return vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vec3 reflectVec = reflect( cameraToVertex, worldNormal );\n		#else\n			vec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n		#endif\n	#else\n		vec3 reflectVec = vReflect;\n	#endif\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n	#elif defined( ENVMAP_TYPE_EQUIREC )\n		vec2 sampleUV;\n		reflectVec = normalize( reflectVec );\n		sampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n		sampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n		vec4 envColor = texture2D( envMap, sampleUV );\n	#elif defined( ENVMAP_TYPE_SPHERE )\n		reflectVec = normalize( reflectVec );\n		vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n	#else\n		vec4 envColor = vec4( 0.0 );\n	#endif\n	envColor = envMapTexelToLinear( envColor );\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_MIX )\n		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_ADD )\n		outgoingLight += envColor.xyz * specularStrength * reflectivity;\n	#endif\n#endif",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n	uniform float reflectivity;\n	uniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n	#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n		varying vec3 vWorldPosition;\n	#endif\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n	uniform float flipEnvMap;\n	uniform int maxMipLevel;\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n		uniform float refractionRatio;\n	#else\n		varying vec3 vReflect;\n	#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n		varying vec3 vWorldPosition;\n	#else\n		varying vec3 vReflect;\n		uniform float refractionRatio;\n	#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n		#ifdef ENVMAP_TYPE_CUBE\n			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n			#else\n				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n			#endif\n			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n		#elif defined( ENVMAP_TYPE_CUBE_UV )\n			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n			vec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n		#else\n			vec4 envMapColor = vec4( 0.0 );\n		#endif\n		return PI * envMapColor.rgb * envMapIntensity;\n	}\n	float getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n		float maxMIPLevelScalar = float( maxMIPLevel );\n		float desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n	}\n	vec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n		#ifdef ENVMAP_MODE_REFLECTION\n			vec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n		#else\n			vec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n		#endif\n		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n		float specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n		#ifdef ENVMAP_TYPE_CUBE\n			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n			#else\n				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n			#endif\n			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n		#elif defined( ENVMAP_TYPE_CUBE_UV )\n			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n			vec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n		#elif defined( ENVMAP_TYPE_EQUIREC )\n			vec2 sampleUV;\n			sampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n			sampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n			#else\n				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n			#endif\n			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n		#elif defined( ENVMAP_TYPE_SPHERE )\n			vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n			#else\n				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n			#endif\n			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n		#endif\n		return envMapColor.rgb * envMapIntensity;\n	}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n		vWorldPosition = worldPosition.xyz;\n	#else\n		vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vReflect = reflect( cameraToVertex, worldNormal );\n		#else\n			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n		#endif\n	#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n	fogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n	varying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n	#ifdef FOG_EXP2\n		float fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n	#else\n		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n	#endif\n	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n	uniform vec3 fogColor;\n	varying float fogDepth;\n	#ifdef FOG_EXP2\n		uniform float fogDensity;\n	#else\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n#endif",gradientmap_pars_fragment:"#ifdef TOON\n	uniform sampler2D gradientMap;\n	vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n		float dotNL = dot( normal, lightDirection );\n		vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n		#ifdef USE_GRADIENTMAP\n			return texture2D( gradientMap, coord ).rgb;\n		#else\n			return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n		#endif\n	}\n#endif",lightmap_fragment:"#ifdef USE_LIGHTMAP\n	reflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n	uniform sampler2D lightMap;\n	uniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n	vLightBack = vec3( 0.0 );\n	vIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n		dotNL = dot( geometry.normal, directLight.direction );\n		directLightColor_Diffuse = PI * directLight.color;\n		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n		#ifdef DOUBLE_SIDED\n			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n		#endif\n	}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n		dotNL = dot( geometry.normal, directLight.direction );\n		directLightColor_Diffuse = PI * directLight.color;\n		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n		#ifdef DOUBLE_SIDED\n			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n		#endif\n	}\n#endif\n#if NUM_DIR_LIGHTS > 0\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n		dotNL = dot( geometry.normal, directLight.direction );\n		directLightColor_Diffuse = PI * directLight.color;\n		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n		#ifdef DOUBLE_SIDED\n			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n		#endif\n	}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n		#ifdef DOUBLE_SIDED\n			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n		#endif\n	}\n#endif",lights_pars_begin:"uniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n	float x = normal.x, y = normal.y, z = normal.z;\n	vec3 result = shCoefficients[ 0 ] * 0.886227;\n	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n	return result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n	return irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n	vec3 irradiance = ambientLightColor;\n	#ifndef PHYSICALLY_CORRECT_LIGHTS\n		irradiance *= PI;\n	#endif\n	return irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n	struct DirectionalLight {\n		vec3 direction;\n		vec3 color;\n		int shadow;\n		float shadowBias;\n		float shadowRadius;\n		vec2 shadowMapSize;\n	};\n	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n		directLight.color = directionalLight.color;\n		directLight.direction = directionalLight.direction;\n		directLight.visible = true;\n	}\n#endif\n#if NUM_POINT_LIGHTS > 0\n	struct PointLight {\n		vec3 position;\n		vec3 color;\n		float distance;\n		float decay;\n		int shadow;\n		float shadowBias;\n		float shadowRadius;\n		vec2 shadowMapSize;\n		float shadowCameraNear;\n		float shadowCameraFar;\n	};\n	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n		vec3 lVector = pointLight.position - geometry.position;\n		directLight.direction = normalize( lVector );\n		float lightDistance = length( lVector );\n		directLight.color = pointLight.color;\n		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n		directLight.visible = ( directLight.color != vec3( 0.0 ) );\n	}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n	struct SpotLight {\n		vec3 position;\n		vec3 direction;\n		vec3 color;\n		float distance;\n		float decay;\n		float coneCos;\n		float penumbraCos;\n		int shadow;\n		float shadowBias;\n		float shadowRadius;\n		vec2 shadowMapSize;\n	};\n	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n		vec3 lVector = spotLight.position - geometry.position;\n		directLight.direction = normalize( lVector );\n		float lightDistance = length( lVector );\n		float angleCos = dot( directLight.direction, spotLight.direction );\n		if ( angleCos > spotLight.coneCos ) {\n			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n			directLight.color = spotLight.color;\n			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n			directLight.visible = true;\n		} else {\n			directLight.color = vec3( 0.0 );\n			directLight.visible = false;\n		}\n	}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n	struct RectAreaLight {\n		vec3 color;\n		vec3 position;\n		vec3 halfWidth;\n		vec3 halfHeight;\n	};\n	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;\n	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n	struct HemisphereLight {\n		vec3 direction;\n		vec3 skyColor;\n		vec3 groundColor;\n	};\n	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n		float dotNL = dot( geometry.normal, hemiLight.direction );\n		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n		#ifndef PHYSICALLY_CORRECT_LIGHTS\n			irradiance *= PI;\n		#endif\n		return irradiance;\n	}\n#endif",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n	vec3	diffuseColor;\n	vec3	specularColor;\n	float	specularShininess;\n	float	specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	#ifdef TOON\n		vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n	#else\n		float dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n		vec3 irradiance = dotNL * directLight.color;\n	#endif\n	#ifndef PHYSICALLY_CORRECT_LIGHTS\n		irradiance *= PI;\n	#endif\n	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_BlinnPhong\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )	(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n	material.clearCoat = saturate( clearCoat );	material.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n	vec3	diffuseColor;\n	float	specularRoughness;\n	vec3	specularColor;\n	#ifndef STANDARD\n		float clearCoat;\n		float clearCoatRoughness;\n	#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n		vec3 normal = geometry.normal;\n		vec3 viewDir = geometry.viewDir;\n		vec3 position = geometry.position;\n		vec3 lightPos = rectAreaLight.position;\n		vec3 halfWidth = rectAreaLight.halfWidth;\n		vec3 halfHeight = rectAreaLight.halfHeight;\n		vec3 lightColor = rectAreaLight.color;\n		float roughness = material.specularRoughness;\n		vec3 rectCoords[ 4 ];\n		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n		vec2 uv = LTC_Uv( normal, viewDir, roughness );\n		vec4 t1 = texture2D( ltc_1, uv );\n		vec4 t2 = texture2D( ltc_2, uv );\n		mat3 mInv = mat3(\n			vec3( t1.x, 0, t1.y ),\n			vec3(    0, 1,    0 ),\n			vec3( t1.z, 0, t1.w )\n		);\n		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n	}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	#ifndef PHYSICALLY_CORRECT_LIGHTS\n		irradiance *= PI;\n	#endif\n	#ifndef STANDARD\n		float clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n	#else\n		float clearCoatDHR = 0.0;\n	#endif\n	reflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n	reflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n	#ifndef STANDARD\n		reflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n	#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	#ifndef ENVMAP_TYPE_CUBE_UV\n		reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n	#endif\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n	#ifndef STANDARD\n		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n		float dotNL = dotNV;\n		float clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n	#else\n		float clearCoatDHR = 0.0;\n	#endif\n	float clearCoatInv = 1.0 - clearCoatDHR;\n	#if defined( ENVMAP_TYPE_CUBE_UV )\n		vec3 singleScattering = vec3( 0.0 );\n		vec3 multiScattering = vec3( 0.0 );\n		vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n		BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n		vec3 diffuse = material.diffuseColor;\n		reflectedLight.indirectSpecular += clearCoatInv * radiance * singleScattering;\n		reflectedLight.indirectDiffuse += multiScattering * cosineWeightedIrradiance;\n		reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n	#else\n		reflectedLight.indirectSpecular += clearCoatInv * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n	#endif\n	#ifndef STANDARD\n		reflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n	#endif\n}\n#define RE_Direct				RE_Direct_Physical\n#define RE_Direct_RectArea		RE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular		RE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n	PointLight pointLight;\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		pointLight = pointLights[ i ];\n		getPointDirectLightIrradiance( pointLight, geometry, directLight );\n		#ifdef USE_SHADOWMAP\n		directLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n	SpotLight spotLight;\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		spotLight = spotLights[ i ];\n		getSpotDirectLightIrradiance( spotLight, geometry, directLight );\n		#ifdef USE_SHADOWMAP\n		directLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n	DirectionalLight directionalLight;\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		directionalLight = directionalLights[ i ];\n		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n		#ifdef USE_SHADOWMAP\n		directLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n	RectAreaLight rectAreaLight;\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n		rectAreaLight = rectAreaLights[ i ];\n		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n	}\n#endif\n#if defined( RE_IndirectDiffuse )\n	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n	irradiance += getLightProbeIrradiance( lightProbe, geometry );\n	#if ( NUM_HEMI_LIGHTS > 0 )\n		#pragma unroll_loop\n		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n		}\n	#endif\n#endif\n#if defined( RE_IndirectSpecular )\n	vec3 radiance = vec3( 0.0 );\n	vec3 clearCoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n	#ifdef USE_LIGHTMAP\n		vec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n		#ifndef PHYSICALLY_CORRECT_LIGHTS\n			lightMapIrradiance *= PI;\n		#endif\n		irradiance += lightMapIrradiance;\n	#endif\n	#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n		irradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n	#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n	radiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n	#ifndef STANDARD\n		clearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n	#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n	RE_IndirectSpecular( radiance, irradiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n	gl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n	uniform float logDepthBufFC;\n	varying float vFragDepth;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n	#ifdef USE_LOGDEPTHBUF_EXT\n		varying float vFragDepth;\n	#else\n		uniform float logDepthBufFC;\n	#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n	#ifdef USE_LOGDEPTHBUF_EXT\n		vFragDepth = 1.0 + gl_Position.w;\n	#else\n		gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n		gl_Position.z *= gl_Position.w;\n	#endif\n#endif",map_fragment:"#ifdef USE_MAP\n	vec4 texelColor = texture2D( map, vUv );\n	texelColor = mapTexelToLinear( texelColor );\n	diffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n	uniform sampler2D map;\n#endif",map_particle_fragment:"#ifdef USE_MAP\n	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n	vec4 mapTexel = texture2D( map, uv );\n	diffuseColor *= mapTexelToLinear( mapTexel );\n#endif",map_particle_pars_fragment:"#ifdef USE_MAP\n	uniform mat3 uvTransform;\n	uniform sampler2D map;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n	vec4 texelMetalness = texture2D( metalnessMap, vUv );\n	metalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n	uniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n	objectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n	objectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n	objectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n	objectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n	#ifndef USE_MORPHNORMALS\n	uniform float morphTargetInfluences[ 8 ];\n	#else\n	uniform float morphTargetInfluences[ 4 ];\n	#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n	transformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n	transformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n	transformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n	transformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n	#ifndef USE_MORPHNORMALS\n	transformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n	transformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n	transformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n	transformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n	#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n	vec3 normal = normalize( cross( fdx, fdy ) );\n#else\n	vec3 normal = normalize( vNormal );\n	#ifdef DOUBLE_SIDED\n		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n	#endif\n	#ifdef USE_TANGENT\n		vec3 tangent = normalize( vTangent );\n		vec3 bitangent = normalize( vBitangent );\n		#ifdef DOUBLE_SIDED\n			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n		#endif\n	#endif\n#endif",normal_fragment_maps:"#ifdef USE_NORMALMAP\n	#ifdef OBJECTSPACE_NORMALMAP\n		normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n		#ifdef FLIP_SIDED\n			normal = - normal;\n		#endif\n		#ifdef DOUBLE_SIDED\n			normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n		#endif\n		normal = normalize( normalMatrix * normal );\n	#else\n		#ifdef USE_TANGENT\n			mat3 vTBN = mat3( tangent, bitangent, normal );\n			vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n			mapN.xy = normalScale * mapN.xy;\n			normal = normalize( vTBN * mapN );\n		#else\n			normal = perturbNormal2Arb( -vViewPosition, normal );\n		#endif\n	#endif\n#elif defined( USE_BUMPMAP )\n	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n	#ifdef OBJECTSPACE_NORMALMAP\n		uniform mat3 normalMatrix;\n	#else\n		vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n			vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n			vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n			vec2 st0 = dFdx( vUv.st );\n			vec2 st1 = dFdy( vUv.st );\n			float scale = sign( st1.t * st0.s - st0.t * st1.s );\n			vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n			vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n			vec3 N = normalize( surf_norm );\n			mat3 tsn = mat3( S, T, N );\n			vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n			mapN.xy *= normalScale;\n			mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n			return normalize( tsn * mapN );\n		}\n	#endif\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n	return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n	return 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n	vec4 r = vec4( fract( v * PackFactors ), v );\n	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n	return dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n	return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n	return linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n	return ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n	gl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#if defined( DITHERING )\n	gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#if defined( DITHERING )\n	vec3 dithering( vec3 color ) {\n		float grid_position = rand( gl_FragCoord.xy );\n		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n		return color + dither_shift_RGB;\n	}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n	vec4 texelRoughness = texture2D( roughnessMap, vUv );\n	roughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n	uniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHTS > 0\n		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n	#endif\n	#if NUM_SPOT_LIGHTS > 0\n		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n	#endif\n	#if NUM_POINT_LIGHTS > 0\n		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n	#endif\n	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n	}\n	float texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n		const vec2 offset = vec2( 0.0, 1.0 );\n		vec2 texelSize = vec2( 1.0 ) / size;\n		vec2 centroidUV = floor( uv * size + 0.5 ) / size;\n		float lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n		float lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n		float rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n		float rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n		vec2 f = fract( uv * size + 0.5 );\n		float a = mix( lb, lt, f.y );\n		float b = mix( rb, rt, f.y );\n		float c = mix( a, b, f.x );\n		return c;\n	}\n	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n		float shadow = 1.0;\n		shadowCoord.xyz /= shadowCoord.w;\n		shadowCoord.z += shadowBias;\n		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n		bool inFrustum = all( inFrustumVec );\n		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n		bool frustumTest = all( frustumTestVec );\n		if ( frustumTest ) {\n		#if defined( SHADOWMAP_TYPE_PCF )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx0 = - texelSize.x * shadowRadius;\n			float dy0 = - texelSize.y * shadowRadius;\n			float dx1 = + texelSize.x * shadowRadius;\n			float dy1 = + texelSize.y * shadowRadius;\n			shadow = (\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n			) * ( 1.0 / 9.0 );\n		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx0 = - texelSize.x * shadowRadius;\n			float dy0 = - texelSize.y * shadowRadius;\n			float dx1 = + texelSize.x * shadowRadius;\n			float dy1 = + texelSize.y * shadowRadius;\n			shadow = (\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n			) * ( 1.0 / 9.0 );\n		#else\n			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#endif\n		}\n		return shadow;\n	}\n	vec2 cubeToUV( vec3 v, float texelSizeY ) {\n		vec3 absV = abs( v );\n		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n		absV *= scaleToCube;\n		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n		vec2 planar = v.xy;\n		float almostATexel = 1.5 * texelSizeY;\n		float almostOne = 1.0 - almostATexel;\n		if ( absV.z >= almostOne ) {\n			if ( v.z > 0.0 )\n				planar.x = 4.0 - v.x;\n		} else if ( absV.x >= almostOne ) {\n			float signX = sign( v.x );\n			planar.x = v.z * signX + 2.0 * signX;\n		} else if ( absV.y >= almostOne ) {\n			float signY = sign( v.y );\n			planar.x = v.x + 2.0 * signY + 2.0;\n			planar.y = v.z * signY - 2.0;\n		}\n		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n	}\n	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n		vec3 lightToPosition = shadowCoord.xyz;\n		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;\n		vec3 bd3D = normalize( lightToPosition );\n		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n			return (\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n			) * ( 1.0 / 9.0 );\n		#else\n			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n		#endif\n	}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHTS > 0\n		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n	#endif\n	#if NUM_SPOT_LIGHTS > 0\n		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n	#endif\n	#if NUM_POINT_LIGHTS > 0\n		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n	#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHTS > 0\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n	}\n	#endif\n	#if NUM_SPOT_LIGHTS > 0\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n	}\n	#endif\n	#if NUM_POINT_LIGHTS > 0\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n	}\n	#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n	float shadow = 1.0;\n	#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHTS > 0\n	DirectionalLight directionalLight;\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		directionalLight = directionalLights[ i ];\n		shadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n	}\n	#endif\n	#if NUM_SPOT_LIGHTS > 0\n	SpotLight spotLight;\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		spotLight = spotLights[ i ];\n		shadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n	}\n	#endif\n	#if NUM_POINT_LIGHTS > 0\n	PointLight pointLight;\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		pointLight = pointLights[ i ];\n		shadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n	}\n	#endif\n	#endif\n	return shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n	#ifdef BONE_TEXTURE\n		uniform sampler2D boneTexture;\n		uniform int boneTextureSize;\n		mat4 getBoneMatrix( const in float i ) {\n			float j = i * 4.0;\n			float x = mod( j, float( boneTextureSize ) );\n			float y = floor( j / float( boneTextureSize ) );\n			float dx = 1.0 / float( boneTextureSize );\n			float dy = 1.0 / float( boneTextureSize );\n			y = dy * ( y + 0.5 );\n			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n			mat4 bone = mat4( v1, v2, v3, v4 );\n			return bone;\n		}\n	#else\n		uniform mat4 boneMatrices[ MAX_BONES ];\n		mat4 getBoneMatrix( const in float i ) {\n			mat4 bone = boneMatrices[ int(i) ];\n			return bone;\n		}\n	#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	transformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n	#ifdef USE_TANGENT\n		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n	#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n	vec4 texelSpecular = texture2D( specularMap, vUv );\n	specularStrength = texelSpecular.r;\n#else\n	specularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n	uniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n	#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n	return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	return saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	color = max( vec3( 0.0 ), color - 0.004 );\n	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	return saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n	varying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n	varying vec2 vUv;\n	uniform mat3 uvTransform;\n#endif",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n	varying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n	attribute vec2 uv2;\n	varying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n	vUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n	vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n	vec4 texColor = texture2D( t2D, vUv );\n	gl_FragColor = mapTexelToLinear( texColor );\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n	gl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n	gl_FragColor = mapTexelToLinear( texColor );\n	gl_FragColor.a *= opacity;\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n	gl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n	uniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( 1.0 );\n	#if DEPTH_PACKING == 3200\n		diffuseColor.a = opacity;\n	#endif\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <logdepthbuf_fragment>\n	#if DEPTH_PACKING == 3200\n		gl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n	#elif DEPTH_PACKING == 3201\n		gl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n	#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <skinbase_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( 1.0 );\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	float dist = length( vWorldPosition - referencePosition );\n	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n	dist = saturate( dist );\n	gl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <skinbase_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <worldpos_vertex>\n	#include <clipping_planes_vertex>\n	vWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vec3 direction = normalize( vWorldDirection );\n	vec2 sampleUV;\n	sampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n	sampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n	vec4 texColor = texture2D( tEquirect, sampleUV );\n	gl_FragColor = mapTexelToLinear( texColor );\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	if ( mod( vLineDistance, totalSize ) > dashSize ) {\n		discard;\n	}\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <color_fragment>\n	outgoingLight = diffuseColor.rgb;\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <color_vertex>\n	vLineDistance = scale * lineDistance;\n	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n	gl_Position = projectionMatrix * mvPosition;\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	#ifdef USE_LIGHTMAP\n		reflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n	#else\n		reflectedLight.indirectDiffuse += vec3( 1.0 );\n	#endif\n	#include <aomap_fragment>\n	reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n	vec3 outgoingLight = reflectedLight.indirectDiffuse;\n	#include <envmap_fragment>\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <skinbase_vertex>\n	#ifdef USE_ENVMAP\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <worldpos_vertex>\n	#include <clipping_planes_vertex>\n	#include <envmap_vertex>\n	#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n	varying vec3 vLightBack;\n	varying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	#include <emissivemap_fragment>\n	reflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n	#ifdef DOUBLE_SIDED\n		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n	#else\n		reflectedLight.indirectDiffuse += vIndirectFront;\n	#endif\n	#include <lightmap_fragment>\n	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n	#ifdef DOUBLE_SIDED\n		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n	#else\n		reflectedLight.directDiffuse = vLightFront;\n	#endif\n	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n	varying vec3 vLightBack;\n	varying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <lights_lambert_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	vec3 viewDir = normalize( vViewPosition );\n	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n	vec3 y = cross( viewDir, x );\n	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n	#ifdef USE_MATCAP\n		vec4 matcapColor = texture2D( matcap, uv );\n		matcapColor = matcapTexelToLinear( matcapColor );\n	#else\n		vec4 matcapColor = vec4( 1.0 );\n	#endif\n	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#ifndef FLAT_SHADED\n		vNormal = normalize( transformedNormal );\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n	vViewPosition = - mvPosition.xyz;\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_phong_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n	uniform float clearCoat;\n	uniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n	#ifdef USE_TANGENT\n		varying vec3 vTangent;\n		varying vec3 vBitangent;\n	#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <roughnessmap_fragment>\n	#include <metalnessmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_physical_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n	#ifdef USE_TANGENT\n		varying vec3 vTangent;\n		varying vec3 vBitangent;\n	#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n	#ifdef USE_TANGENT\n		vTangent = normalize( transformedTangent );\n		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n	#endif\n#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n	varying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n	#ifdef USE_TANGENT\n		varying vec3 vTangent;\n		varying vec3 vBitangent;\n	#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n	#include <logdepthbuf_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n	varying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n	#ifdef USE_TANGENT\n		varying vec3 vTangent;\n		varying vec3 vBitangent;\n	#endif\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n	#ifdef USE_TANGENT\n		vTangent = normalize( transformedTangent );\n		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n	#endif\n#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n	vViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_particle_fragment>\n	#include <color_fragment>\n	#include <alphatest_fragment>\n	outgoingLight = diffuseColor.rgb;\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <color_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	gl_PointSize = size;\n	#ifdef USE_SIZEATTENUATION\n		bool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n	#endif\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n	#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n	#include <begin_vertex>\n	#include <project_vertex>\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <alphatest_fragment>\n	outgoingLight = diffuseColor.rgb;\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n	vec2 scale;\n	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n	#ifndef USE_SIZEATTENUATION\n		bool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n		if ( isPerspective ) scale *= - mvPosition.z;\n	#endif\n	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n	vec2 rotatedPosition;\n	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n	mvPosition.xy += rotatedPosition;\n	gl_Position = projectionMatrix * mvPosition;\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}"},rJ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign($.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.b=this.g=this.r=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,i){return this.r=t,this.g=e,this.b=i,this},setHSL:function(){function t(t,e,i){return 0>i&&(i+=1),1<i&&--i,i<1/6?t+6*(e-t)*i:.5>i?e:i<2/3?t+6*(e-t)*(2/3-i):t}return function(e,i,n){return e=rS.euclideanModulo(e,1),i=rS.clamp(i,0,1),n=rS.clamp(n,0,1),0===i?this.r=this.g=this.b=n:(i=.5>=n?n*(1+i):n+i-n*i,n=2*n-i,this.r=t(n,i,e+1/3),this.g=t(n,i,e),this.b=t(n,i,e-1/3)),this}}(),setStyle:function(t){function e(e){void 0!==e&&1>parseFloat(e)&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var i,n=i[2];switch(i[1]){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,e(i[5]),this;if(i=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,e(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n)){n=parseFloat(i[1])/360;var r=parseInt(i[2],10)/100,a=parseInt(i[3],10)/100;return e(i[5]),this.setHSL(n,r,a)}}}else if(i=/^#([A-Fa-f0-9]+)$/.exec(t)){if(3===(n=(i=i[1]).length))return this.r=parseInt(i.charAt(0)+i.charAt(0),16)/255,this.g=parseInt(i.charAt(1)+i.charAt(1),16)/255,this.b=parseInt(i.charAt(2)+i.charAt(2),16)/255,this;if(6===n)return this.r=parseInt(i.charAt(0)+i.charAt(1),16)/255,this.g=parseInt(i.charAt(2)+i.charAt(3),16)/255,this.b=parseInt(i.charAt(4)+i.charAt(5),16)/255,this}return t&&0<t.length&&(void 0!==(i=rJ[t])?this.setHex(i):console.warn("THREE.Color: Unknown color "+t)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){return void 0===e&&(e=2),e=0<e?1/e:1,this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(){function t(t){return .04045>t?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}return function(e){return this.r=t(e.r),this.g=t(e.g),this.b=t(e.b),this}}(),copyLinearToSRGB:function(){function t(t){return .0031308>t?12.92*t:1.055*Math.pow(t,.41666)-.055}return function(e){return this.r=t(e.r),this.g=t(e.g),this.b=t(e.b),this}}(),convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,i=this.r,n=this.g,r=this.b,a=Math.max(i,n,r),o=Math.min(i,n,r),s=(o+a)/2;if(o===a)o=e=0;else{var c=a-o;switch(o=.5>=s?c/(a+o):c/(2-a-o),a){case i:e=(n-r)/c+(n<r?6:0);break;case n:e=(r-i)/c+2;break;case r:e=(i-n)/c+4}e/=6}return t.h=e,t.s=o,t.l=s,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:(rq={},function(t,e,i){return this.getHSL(rq),rq.h+=t,rq.s+=e,rq.l+=i,this.setHSL(rq.h,rq.s,rq.l),this}),add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:(rX={h:0,s:0,l:0},rY={h:0,s:0,l:0},function(t,e){this.getHSL(rX),t.getHSL(rY),t=rS.lerp(rX.h,rY.h,e);var i=rS.lerp(rX.s,rY.s,e);return e=rS.lerp(rX.l,rY.l,e),this.setHSL(t,i,e),this}),equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}});var rQ,rK,r9={common:{diffuse:{value:new $(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new a},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new i(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new $(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new $(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new a}},sprite:{diffuse:{value:new $(15658734)},opacity:{value:1},center:{value:new i(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new a}}},at={basic:{uniforms:y([r9.common,r9.specularmap,r9.envmap,r9.aomap,r9.lightmap,r9.fog]),vertexShader:rZ.meshbasic_vert,fragmentShader:rZ.meshbasic_frag},lambert:{uniforms:y([r9.common,r9.specularmap,r9.envmap,r9.aomap,r9.lightmap,r9.emissivemap,r9.fog,r9.lights,{emissive:{value:new $(0)}}]),vertexShader:rZ.meshlambert_vert,fragmentShader:rZ.meshlambert_frag},phong:{uniforms:y([r9.common,r9.specularmap,r9.envmap,r9.aomap,r9.lightmap,r9.emissivemap,r9.bumpmap,r9.normalmap,r9.displacementmap,r9.gradientmap,r9.fog,r9.lights,{emissive:{value:new $(0)},specular:{value:new $(1118481)},shininess:{value:30}}]),vertexShader:rZ.meshphong_vert,fragmentShader:rZ.meshphong_frag},standard:{uniforms:y([r9.common,r9.envmap,r9.aomap,r9.lightmap,r9.emissivemap,r9.bumpmap,r9.normalmap,r9.displacementmap,r9.roughnessmap,r9.metalnessmap,r9.fog,r9.lights,{emissive:{value:new $(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:rZ.meshphysical_vert,fragmentShader:rZ.meshphysical_frag},matcap:{uniforms:y([r9.common,r9.bumpmap,r9.normalmap,r9.displacementmap,r9.fog,{matcap:{value:null}}]),vertexShader:rZ.meshmatcap_vert,fragmentShader:rZ.meshmatcap_frag},points:{uniforms:y([r9.points,r9.fog]),vertexShader:rZ.points_vert,fragmentShader:rZ.points_frag},dashed:{uniforms:y([r9.common,r9.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:rZ.linedashed_vert,fragmentShader:rZ.linedashed_frag},depth:{uniforms:y([r9.common,r9.displacementmap]),vertexShader:rZ.depth_vert,fragmentShader:rZ.depth_frag},normal:{uniforms:y([r9.common,r9.bumpmap,r9.normalmap,r9.displacementmap,{opacity:{value:1}}]),vertexShader:rZ.normal_vert,fragmentShader:rZ.normal_frag},sprite:{uniforms:y([r9.sprite,r9.fog]),vertexShader:rZ.sprite_vert,fragmentShader:rZ.sprite_frag},background:{uniforms:{uvTransform:{value:new a},t2D:{value:null}},vertexShader:rZ.background_vert,fragmentShader:rZ.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:rZ.cube_vert,fragmentShader:rZ.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:rZ.equirect_vert,fragmentShader:rZ.equirect_frag},distanceRGBA:{uniforms:y([r9.common,r9.displacementmap,{referencePosition:{value:new r},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:rZ.distanceRGBA_vert,fragmentShader:rZ.distanceRGBA_frag},shadow:{uniforms:y([r9.lights,r9.fog,{color:{value:new $(0)},opacity:{value:1}}]),vertexShader:rZ.shadow_vert,fragmentShader:rZ.shadow_frag}};at.physical={uniforms:y([at.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:rZ.meshphysical_vert,fragmentShader:rZ.meshphysical_frag},Object.assign(w.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,i=t.vertexNormals.length;e<i;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,i=t.vertexColors.length;e<i;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}}),b.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" "),b.DefaultOrder="XYZ",Object.defineProperties(b.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback()}}}),Object.assign(b.prototype,{isEuler:!0,set:function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._order=n||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,i){var n=rS.clamp,r=t.elements;t=r[0];var a=r[4],o=r[8],s=r[1],c=r[5],h=r[9],l=r[2],u=r[6];return r=r[10],"XYZ"===(e=e||this._order)?(this._y=Math.asin(n(o,-1,1)),.99999>Math.abs(o)?(this._x=Math.atan2(-h,r),this._z=Math.atan2(-a,t)):(this._x=Math.atan2(u,c),this._z=0)):"YXZ"===e?(this._x=Math.asin(-n(h,-1,1)),.99999>Math.abs(h)?(this._y=Math.atan2(o,r),this._z=Math.atan2(s,c)):(this._y=Math.atan2(-l,t),this._z=0)):"ZXY"===e?(this._x=Math.asin(n(u,-1,1)),.99999>Math.abs(u)?(this._y=Math.atan2(-l,r),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(s,t))):"ZYX"===e?(this._y=Math.asin(-n(l,-1,1)),.99999>Math.abs(l)?(this._x=Math.atan2(u,r),this._z=Math.atan2(s,t)):(this._x=0,this._z=Math.atan2(-a,c))):"YZX"===e?(this._z=Math.asin(n(s,-1,1)),.99999>Math.abs(s)?(this._x=Math.atan2(-h,c),this._y=Math.atan2(-l,t)):(this._x=0,this._y=Math.atan2(o,r))):"XZY"===e?(this._z=Math.asin(-n(a,-1,1)),.99999>Math.abs(a)?(this._x=Math.atan2(u,c),this._y=Math.atan2(o,t)):(this._x=Math.atan2(-h,r),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==i&&this.onChangeCallback(),this},setFromQuaternion:(rQ=new g,function(t,e,i){return rQ.makeRotationFromQuaternion(t),this.setFromRotationMatrix(rQ,e,i)}),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:(rK=new n,function(t){return rK.setFromEuler(this),this.setFromQuaternion(rK,t)}),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new r(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(E.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask=this.mask|1<<t|0},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},test:function(t){return 0!=(this.mask&t.mask)}});var ae,ai,an,ar,aa,ao,as,ac,ah,al,au,ap,ad,af,am,ag,av,ay,a$=0;M.DefaultUp=new r(0,1,0),M.DefaultMatrixAutoUpdate=!0,M.prototype=Object.assign(Object.create(e.prototype),{constructor:M,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:(ae=new n,function(t,e){return ae.setFromAxisAngle(t,e),this.quaternion.multiply(ae),this}),rotateOnWorldAxis:(ai=new n,function(t,e){return ai.setFromAxisAngle(t,e),this.quaternion.premultiply(ai),this}),rotateX:(an=new r(1,0,0),function(t){return this.rotateOnAxis(an,t)}),rotateY:(ar=new r(0,1,0),function(t){return this.rotateOnAxis(ar,t)}),rotateZ:(aa=new r(0,0,1),function(t){return this.rotateOnAxis(aa,t)}),translateOnAxis:(ao=new r,function(t,e){return ao.copy(t).applyQuaternion(this.quaternion),this.position.add(ao.multiplyScalar(e)),this}),translateX:(as=new r(1,0,0),function(t){return this.translateOnAxis(as,t)}),translateY:(ac=new r(0,1,0),function(t){return this.translateOnAxis(ac,t)}),translateZ:(ah=new r(0,0,1),function(t){return this.translateOnAxis(ah,t)}),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:(al=new g,function(t){return t.applyMatrix4(al.getInverse(this.matrixWorld))}),lookAt:(au=new n,ap=new g,ad=new r,af=new r,function(t,e,i){t.isVector3?ad.copy(t):ad.set(t,e,i),t=this.parent,this.updateWorldMatrix(!0,!1),af.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ap.lookAt(af,ad,this.up):ap.lookAt(ad,af,this.up),this.quaternion.setFromRotationMatrix(ap),t&&(ap.extractRotation(t.matrixWorld),au.setFromRotationMatrix(ap),this.quaternion.premultiply(au.inverse()))}),add:function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}return -1!==(e=this.children.indexOf(t))&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(e,1)),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var i=0,n=this.children.length;i<n;i++){var r=this.children[i].getObjectByProperty(t,e);if(void 0!==r)return r}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new r),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:(am=new r,ag=new r,function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new n),this.updateMatrixWorld(!0),this.matrixWorld.decompose(am,t,ag),t}),getWorldScale:(av=new r,ay=new n,function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new r),this.updateMatrixWorld(!0),this.matrixWorld.decompose(av,ay,t),t}),getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new r),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var i=this.parent;if(!0===t&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(t=this.children,e=0,i=t.length;e<i;e++)t[e].updateWorldMatrix(!1,!0)},toJSON:function(t){function e(e,i){return void 0===e[i.uuid]&&(e[i.uuid]=i.toJSON(t)),i.uuid}function i(t){var e,i=[];for(e in t){var n=t[e];delete n.metadata,i.push(n)}return i}var n=void 0===t||"string"==typeof t,r={};n&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var a={};if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),!0===this.castShadow&&(a.castShadow=!0),!0===this.receiveShadow&&(a.receiveShadow=!0),!1===this.visible&&(a.visible=!1),!1===this.frustumCulled&&(a.frustumCulled=!1),0!==this.renderOrder&&(a.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(a.matrixAutoUpdate=!1),this.isMesh&&0!==this.drawMode&&(a.drawMode=this.drawMode),this.isMesh||this.isLine||this.isPoints){a.geometry=e(t.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){if(Array.isArray(o=o.shapes))for(var s=0,c=o.length;s<c;s++)e(t.shapes,o[s]);else e(t.shapes,o)}}if(void 0!==this.material){if(Array.isArray(this.material)){for(o=[],s=0,c=this.material.length;s<c;s++)o.push(e(t.materials,this.material[s]));a.material=o}else a.material=e(t.materials,this.material)}if(0<this.children.length)for(a.children=[],s=0;s<this.children.length;s++)a.children.push(this.children[s].toJSON(t).object);if(n){n=i(t.geometries),s=i(t.materials),c=i(t.textures);var h=i(t.images);o=i(t.shapes),0<n.length&&(r.geometries=n),0<s.length&&(r.materials=s),0<c.length&&(r.textures=c),0<h.length&&(r.images=h),0<o.length&&(r.shapes=o)}return r.object=a,r},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(e=0;e<t.children.length;e++)this.add(t.children[e].clone());return this}});var ax,a_,aw,ab,a8,aE,aM,aS=0;S.prototype=Object.assign(Object.create(e.prototype),{constructor:S,isGeometry:!0,applyMatrix:function(t){for(var e=(new a).getNormalMatrix(t),i=0,n=this.vertices.length;i<n;i++)this.vertices[i].applyMatrix4(t);for(i=0,n=this.faces.length;i<n;i++){(t=this.faces[i]).normal.applyMatrix3(e).normalize();for(var r=0,o=t.vertexNormals.length;r<o;r++)t.vertexNormals[r].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.normalsNeedUpdate=this.verticesNeedUpdate=!0,this},rotateX:(ax=new g,function(t){return ax.makeRotationX(t),this.applyMatrix(ax),this}),rotateY:(a_=new g,function(t){return a_.makeRotationY(t),this.applyMatrix(a_),this}),rotateZ:(aw=new g,function(t){return aw.makeRotationZ(t),this.applyMatrix(aw),this}),translate:(ab=new g,function(t,e,i){return ab.makeTranslation(t,e,i),this.applyMatrix(ab),this}),scale:(a8=new g,function(t,e,i){return a8.makeScale(t,e,i),this.applyMatrix(a8),this}),lookAt:(aE=new M,function(t){aE.lookAt(t),aE.updateMatrix(),this.applyMatrix(aE.matrix)}),fromBufferGeometry:function(t){function e(t,e,a,o){var s=void 0===h?[]:[n.colors[t].clone(),n.colors[e].clone(),n.colors[a].clone()],p=void 0===c?[]:[(new r).fromArray(c,3*t),(new r).fromArray(c,3*e),(new r).fromArray(c,3*a)];o=new w(t,e,a,p,s,o),n.faces.push(o),void 0!==l&&n.faceVertexUvs[0].push([(new i).fromArray(l,2*t),(new i).fromArray(l,2*e),(new i).fromArray(l,2*a)]),void 0!==u&&n.faceVertexUvs[1].push([(new i).fromArray(u,2*t),(new i).fromArray(u,2*e),(new i).fromArray(u,2*a)])}var n=this,a=null!==t.index?t.index.array:void 0,o=t.attributes,s=o.position.array,c=void 0!==o.normal?o.normal.array:void 0,h=void 0!==o.color?o.color.array:void 0,l=void 0!==o.uv?o.uv.array:void 0,u=void 0!==o.uv2?o.uv2.array:void 0;void 0!==u&&(this.faceVertexUvs[1]=[]);for(var p=o=0;o<s.length;o+=3,p+=2)n.vertices.push((new r).fromArray(s,o)),void 0!==h&&n.colors.push((new $).fromArray(h,o));var d=t.groups;if(0<d.length)for(o=0;o<d.length;o++){var f=(s=d[o]).start,m=s.count;for(p=f,f+=m;p<f;p+=3)void 0!==a?e(a[p],a[p+1],a[p+2],s.materialIndex):e(p,p+1,p+2,s.materialIndex)}else if(void 0!==a)for(o=0;o<a.length;o+=3)e(a[o],a[o+1],a[o+2]);else for(o=0;o<s.length/3;o+=3)e(o,o+1,o+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:(aM=new r,function(){return this.computeBoundingBox(),this.boundingBox.getCenter(aM).negate(),this.translate(aM.x,aM.y,aM.z),this}),normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius;e=0===e?1:1/e;var i=new g;return i.set(e,0,0,-e*t.x,0,e,0,-e*t.y,0,0,e,-e*t.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var t=new r,e=new r,i=0,n=this.faces.length;i<n;i++){var a=this.faces[i],o=this.vertices[a.a],s=this.vertices[a.b];t.subVectors(this.vertices[a.c],s),e.subVectors(o,s),t.cross(e),t.normalize(),a.normal.copy(t)}},computeVertexNormals:function(t){void 0===t&&(t=!0);var e,i=Array(this.vertices.length),n=0;for(e=this.vertices.length;n<e;n++)i[n]=new r;if(t){var a=new r,o=new r;for(t=0,n=this.faces.length;t<n;t++){e=this.faces[t];var s=this.vertices[e.a],c=this.vertices[e.b],h=this.vertices[e.c];a.subVectors(h,c),o.subVectors(s,c),a.cross(o),i[e.a].add(a),i[e.b].add(a),i[e.c].add(a)}}else for(this.computeFaceNormals(),t=0,n=this.faces.length;t<n;t++)i[(e=this.faces[t]).a].add(e.normal),i[e.b].add(e.normal),i[e.c].add(e.normal);for(n=0,e=this.vertices.length;n<e;n++)i[n].normalize();for(t=0,n=this.faces.length;t<n;t++)3===(s=(e=this.faces[t]).vertexNormals).length?(s[0].copy(i[e.a]),s[1].copy(i[e.b]),s[2].copy(i[e.c])):(s[0]=i[e.a].clone(),s[1]=i[e.b].clone(),s[2]=i[e.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();var t,e=0;for(t=this.faces.length;e<t;e++){var i=this.faces[e],n=i.vertexNormals;3===n.length?(n[0].copy(i.normal),n[1].copy(i.normal),n[2].copy(i.normal)):(n[0]=i.normal.clone(),n[1]=i.normal.clone(),n[2]=i.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,i=0;for(e=this.faces.length;i<e;i++){var n=this.faces[i];n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]);var a=0;for(t=n.vertexNormals.length;a<t;a++)n.__originalVertexNormals[a]?n.__originalVertexNormals[a].copy(n.vertexNormals[a]):n.__originalVertexNormals[a]=n.vertexNormals[a].clone()}var o=new S;for(o.faces=this.faces,a=0,t=this.morphTargets.length;a<t;a++){if(!this.morphNormals[a]){this.morphNormals[a]={},this.morphNormals[a].faceNormals=[],this.morphNormals[a].vertexNormals=[],n=this.morphNormals[a].faceNormals;var s=this.morphNormals[a].vertexNormals;for(i=0,e=this.faces.length;i<e;i++){var c=new r,h={a:new r,b:new r,c:new r};n.push(c),s.push(h)}}for(s=this.morphNormals[a],o.vertices=this.morphTargets[a].vertices,o.computeFaceNormals(),o.computeVertexNormals(),i=0,e=this.faces.length;i<e;i++)n=this.faces[i],c=s.faceNormals[i],h=s.vertexNormals[i],c.copy(n.normal),h.a.copy(n.vertexNormals[0]),h.b.copy(n.vertexNormals[1]),h.c.copy(n.vertexNormals[2])}for(i=0,e=this.faces.length;i<e;i++)(n=this.faces[i]).normal=n.__originalFaceNormal,n.vertexNormals=n.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new p),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new d),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,i){if(t&&t.isGeometry){var n,r=this.vertices.length,o=this.vertices,s=t.vertices,c=this.faces,h=t.faces,l=this.faceVertexUvs[0],u=t.faceVertexUvs[0],p=this.colors,d=t.colors;void 0===i&&(i=0),void 0!==e&&(n=(new a).getNormalMatrix(e)),t=0;for(var f=s.length;t<f;t++){var m=s[t].clone();void 0!==e&&m.applyMatrix4(e),o.push(m)}for(t=0,f=d.length;t<f;t++)p.push(d[t].clone());for(t=0,f=h.length;t<f;t++){var g=(s=h[t]).vertexNormals;for(d=s.vertexColors,(p=new w(s.a+r,s.b+r,s.c+r)).normal.copy(s.normal),void 0!==n&&p.normal.applyMatrix3(n).normalize(),e=0,o=g.length;e<o;e++)m=g[e].clone(),void 0!==n&&m.applyMatrix3(n).normalize(),p.vertexNormals.push(m);for(p.color.copy(s.color),e=0,o=d.length;e<o;e++)m=d[e],p.vertexColors.push(m.clone());p.materialIndex=s.materialIndex+i,c.push(p)}for(t=0,f=u.length;t<f;t++)if(i=u[t],n=[],void 0!==i){for(e=0,o=i.length;e<o;e++)n.push(i[e].clone());l.push(n)}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){var t,e={},i=[],n=[],r=1e4,a=0;for(t=this.vertices.length;a<t;a++){var o=this.vertices[a];void 0===e[o=Math.round(o.x*r)+"_"+Math.round(o.y*r)+"_"+Math.round(o.z*r)]?(e[o]=a,i.push(this.vertices[a]),n[a]=i.length-1):n[a]=n[e[o]]}for(e=[],a=0,t=this.faces.length;a<t;a++)for((r=this.faces[a]).a=n[r.a],r.b=n[r.b],r.c=n[r.c],r=[r.a,r.b,r.c],o=0;3>o;o++)if(r[o]===r[(o+1)%3]){e.push(a);break}for(a=e.length-1;0<=a;a--)for(r=e[a],this.faces.splice(r,1),n=0,t=this.faceVertexUvs.length;n<t;n++)this.faceVertexUvs[n].splice(r,1);return a=this.vertices.length-i.length,this.vertices=i,a},setFromPoints:function(t){this.vertices=[];for(var e=0,i=t.length;e<i;e++){var n=t[e];this.vertices.push(new r(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,i=0;i<e;i++)t[i]._id=i;t.sort(function(t,e){return t.materialIndex-e.materialIndex});var n,r,a=this.faceVertexUvs[0],o=this.faceVertexUvs[1];for(a&&a.length===e&&(n=[]),o&&o.length===e&&(r=[]),i=0;i<e;i++){var s=t[i]._id;n&&n.push(a[s]),r&&r.push(o[s])}n&&(this.faceVertexUvs[0]=n),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){function t(t,e,i){return i?t|1<<e:t&~(1<<e)}function e(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==h[e]||(h[e]=c.length/3,c.push(t.x,t.y,t.z)),h[e]}function i(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==u[e]||(u[e]=l.length,l.push(t.getHex())),u[e]}function n(t){var e=t.x.toString()+t.y.toString();return void 0!==d[e]||(d[e]=p.length/2,p.push(t.x,t.y)),d[e]}var r={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),void 0!==this.parameters){var a,o=this.parameters;for(a in o)void 0!==o[a]&&(r[a]=o[a]);return r}for(a=0,o=[];a<this.vertices.length;a++){var s=this.vertices[a];o.push(s.x,s.y,s.z)}s=[];var c=[],h={},l=[],u={},p=[],d={};for(a=0;a<this.faces.length;a++){var f=this.faces[a],m=void 0!==this.faceVertexUvs[0][a],g=0<f.normal.length(),v=0<f.vertexNormals.length,y=1!==f.color.r||1!==f.color.g||1!==f.color.b,$=0<f.vertexColors.length,x=0;x=t(x,0,0),x=t(x,1,!0),x=t(x,2,!1),x=t(x,3,m),x=t(x,4,g),x=t(x,5,v),x=t(x,6,y),x=t(x,7,$),s.push(x),s.push(f.a,f.b,f.c),s.push(f.materialIndex),m&&(m=this.faceVertexUvs[0][a],s.push(n(m[0]),n(m[1]),n(m[2]))),g&&s.push(e(f.normal)),v&&(g=f.vertexNormals,s.push(e(g[0]),e(g[1]),e(g[2]))),y&&s.push(i(f.color)),$&&(f=f.vertexColors,s.push(i(f[0]),i(f[1]),i(f[2])))}return r.data={},r.data.vertices=o,r.data.normals=c,0<l.length&&(r.data.colors=l),0<p.length&&(r.data.uvs=[p]),r.data.faces=s,r},clone:function(){return(new S).copy(this)},copy:function(t){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.name=t.name;var e,i,n,r=t.vertices,a=0;for(e=r.length;a<e;a++)this.vertices.push(r[a].clone());for(r=t.colors,a=0,e=r.length;a<e;a++)this.colors.push(r[a].clone());for(r=t.faces,a=0,e=r.length;a<e;a++)this.faces.push(r[a].clone());for(a=0,e=t.faceVertexUvs.length;a<e;a++){var o=t.faceVertexUvs[a];for(void 0===this.faceVertexUvs[a]&&(this.faceVertexUvs[a]=[]),r=0,i=o.length;r<i;r++){var s=o[r],c=[],h=0;for(n=s.length;h<n;h++)c.push(s[h].clone());this.faceVertexUvs[a].push(c)}}for(h=t.morphTargets,a=0,e=h.length;a<e;a++){if((n={}).name=h[a].name,void 0!==h[a].vertices)for(n.vertices=[],r=0,i=h[a].vertices.length;r<i;r++)n.vertices.push(h[a].vertices[r].clone());if(void 0!==h[a].normals)for(n.normals=[],r=0,i=h[a].normals.length;r<i;r++)n.normals.push(h[a].normals[r].clone());this.morphTargets.push(n)}for(h=t.morphNormals,a=0,e=h.length;a<e;a++){if(n={},void 0!==h[a].vertexNormals)for(n.vertexNormals=[],r=0,i=h[a].vertexNormals.length;r<i;r++)o=h[a].vertexNormals[r],(s={}).a=o.a.clone(),s.b=o.b.clone(),s.c=o.c.clone(),n.vertexNormals.push(s);if(void 0!==h[a].faceNormals)for(n.faceNormals=[],r=0,i=h[a].faceNormals.length;r<i;r++)n.faceNormals.push(h[a].faceNormals[r].clone());this.morphNormals.push(n)}for(r=t.skinWeights,a=0,e=r.length;a<e;a++)this.skinWeights.push(r[a].clone());for(r=t.skinIndices,a=0,e=r.length;a<e;a++)this.skinIndices.push(r[a].clone());for(r=t.lineDistances,a=0,e=r.length;a<e;a++)this.lineDistances.push(r[a]);return null!==(a=t.boundingBox)&&(this.boundingBox=a.clone()),null!==(a=t.boundingSphere)&&(this.boundingSphere=a.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(T.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(T.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.itemSize:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,i){t*=this.itemSize,i*=e.itemSize;for(var n=0,r=this.itemSize;n<r;n++)this.array[t+n]=e.array[i+n];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var a=t[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),a=new $),e[i++]=a.r,e[i++]=a.g,e[i++]=a.b}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,r=0,a=t.length;r<a;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new i),e[n++]=o.x,e[n++]=o.y}return this},copyVector3sArray:function(t){for(var e=this.array,i=0,n=0,a=t.length;n<a;n++){var o=t[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),o=new r),e[i++]=o.x,e[i++]=o.y,e[i++]=o.z}return this},copyVector4sArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var a=t[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),a=new s),e[i++]=a.x,e[i++]=a.y,e[i++]=a.z,e[i++]=a.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this},setXYZ:function(t,e,i,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this},setXYZW:function(t,e,i,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this.array[t+3]=r,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),L.prototype=Object.create(T.prototype),L.prototype.constructor=L,A.prototype=Object.create(T.prototype),A.prototype.constructor=A,P.prototype=Object.create(T.prototype),P.prototype.constructor=P,R.prototype=Object.create(T.prototype),R.prototype.constructor=R,C.prototype=Object.create(T.prototype),C.prototype.constructor=C,I.prototype=Object.create(T.prototype),I.prototype.constructor=I,D.prototype=Object.create(T.prototype),D.prototype.constructor=D,B.prototype=Object.create(T.prototype),B.prototype.constructor=B,z.prototype=Object.create(T.prototype),z.prototype.constructor=z,Object.assign(N.prototype,{computeGroups:function(t){var e=[],i=void 0;t=t.faces;for(var n=0;n<t.length;n++){var r=t[n];if(r.materialIndex!==i){i=r.materialIndex,void 0!==a&&(a.count=3*n-a.start,e.push(a));var a={start:3*n,materialIndex:i}}}void 0!==a&&(a.count=3*n-a.start,e.push(a)),this.groups=e},fromGeometry:function(t){var e=t.faces,n=t.vertices,r=t.faceVertexUvs,a=r[0]&&0<r[0].length,o=r[1]&&0<r[1].length,s=t.morphTargets,c=s.length;if(0<c){for(var h=[],l=0;l<c;l++)h[l]={name:s[l].name,data:[]};this.morphTargets.position=h}var u=t.morphNormals,p=u.length;if(0<p){var d=[];for(l=0;l<p;l++)d[l]={name:u[l].name,data:[]};this.morphTargets.normal=d}var f=t.skinIndices,m=t.skinWeights,g=f.length===n.length,v=m.length===n.length;for(0<n.length&&0===e.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported."),l=0;l<e.length;l++){var y=e[l];this.vertices.push(n[y.a],n[y.b],n[y.c]);var $=y.vertexNormals;for(3===$.length?this.normals.push($[0],$[1],$[2]):($=y.normal,this.normals.push($,$,$)),3===($=y.vertexColors).length?this.colors.push($[0],$[1],$[2]):($=y.color,this.colors.push($,$,$)),!0===a&&(void 0!==($=r[0][l])?this.uvs.push($[0],$[1],$[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",l),this.uvs.push(new i,new i,new i))),!0===o&&(void 0!==($=r[1][l])?this.uvs2.push($[0],$[1],$[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",l),this.uvs2.push(new i,new i,new i))),$=0;$<c;$++){var x=s[$].vertices;h[$].data.push(x[y.a],x[y.b],x[y.c])}for($=0;$<p;$++)x=u[$].vertexNormals[l],d[$].data.push(x.a,x.b,x.c);g&&this.skinIndices.push(f[y.a],f[y.b],f[y.c]),v&&this.skinWeights.push(m[y.a],m[y.b],m[y.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}});var aT,a1,a0,aL,aA,aP,aR,aC,aI,aD,aB,az,aN=1;U.prototype=Object.assign(Object.create(e.prototype),{constructor:U,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(65535<G(t)?D:C)(t,1):this.index=t},addAttribute:function(t,e,i){return e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):(this.attributes[t]=e,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(t,new T(e,i)))},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,i){this.groups.push({start:t,count:e,materialIndex:void 0!==i?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var i=this.attributes.normal;return void 0!==i&&((e=(new a).getNormalMatrix(t)).applyToBufferAttribute(i),i.needsUpdate=!0),void 0!==(i=this.attributes.tangent)&&((e=(new a).getNormalMatrix(t)).applyToBufferAttribute(i),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:(aT=new g,function(t){return aT.makeRotationX(t),this.applyMatrix(aT),this}),rotateY:(a1=new g,function(t){return a1.makeRotationY(t),this.applyMatrix(a1),this}),rotateZ:(a0=new g,function(t){return a0.makeRotationZ(t),this.applyMatrix(a0),this}),translate:(aL=new g,function(t,e,i){return aL.makeTranslation(t,e,i),this.applyMatrix(aL),this}),scale:(aA=new g,function(t,e,i){return aA.makeScale(t,e,i),this.applyMatrix(aA),this}),lookAt:(aP=new M,function(t){aP.lookAt(t),aP.updateMatrix(),this.applyMatrix(aP.matrix)}),center:(aR=new r,function(){return this.computeBoundingBox(),this.boundingBox.getCenter(aR).negate(),this.translate(aR.x,aR.y,aR.z),this}),setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){t=new B(3*e.vertices.length,3);var i=new B(3*e.colors.length,3);this.addAttribute("position",t.copyVector3sArray(e.vertices)),this.addAttribute("color",i.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length&&(t=new B(e.lineDistances.length,1),this.addAttribute("lineDistance",t.copyArray(e.lineDistances))),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],i=0,n=t.length;i<n;i++){var r=t[i];e.push(r.x,r.y,r.z||0)}return this.addAttribute("position",new B(e,3)),this},updateFromObject:function(t){var e=t.geometry;if(t.isMesh){var i=e.__directGeometry;if(!0===e.elementsNeedUpdate&&(i=void 0,e.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(e);i.verticesNeedUpdate=e.verticesNeedUpdate,i.normalsNeedUpdate=e.normalsNeedUpdate,i.colorsNeedUpdate=e.colorsNeedUpdate,i.uvsNeedUpdate=e.uvsNeedUpdate,i.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=i}return!0===e.verticesNeedUpdate&&(void 0!==(i=this.attributes.position)&&(i.copyVector3sArray(e.vertices),i.needsUpdate=!0),e.verticesNeedUpdate=!1),!0===e.normalsNeedUpdate&&(void 0!==(i=this.attributes.normal)&&(i.copyVector3sArray(e.normals),i.needsUpdate=!0),e.normalsNeedUpdate=!1),!0===e.colorsNeedUpdate&&(void 0!==(i=this.attributes.color)&&(i.copyColorsArray(e.colors),i.needsUpdate=!0),e.colorsNeedUpdate=!1),e.uvsNeedUpdate&&(void 0!==(i=this.attributes.uv)&&(i.copyVector2sArray(e.uvs),i.needsUpdate=!0),e.uvsNeedUpdate=!1),e.lineDistancesNeedUpdate&&(void 0!==(i=this.attributes.lineDistance)&&(i.copyArray(e.lineDistances),i.needsUpdate=!0),e.lineDistancesNeedUpdate=!1),e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new N).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);for(var i in this.addAttribute("position",new T(e,3).copyVector3sArray(t.vertices)),0<t.normals.length&&(e=new Float32Array(3*t.normals.length),this.addAttribute("normal",new T(e,3).copyVector3sArray(t.normals))),0<t.colors.length&&(e=new Float32Array(3*t.colors.length),this.addAttribute("color",new T(e,3).copyColorsArray(t.colors))),0<t.uvs.length&&(e=new Float32Array(2*t.uvs.length),this.addAttribute("uv",new T(e,2).copyVector2sArray(t.uvs))),0<t.uvs2.length&&(e=new Float32Array(2*t.uvs2.length),this.addAttribute("uv2",new T(e,2).copyVector2sArray(t.uvs2))),this.groups=t.groups,t.morphTargets){e=[];for(var n=t.morphTargets[i],r=0,a=n.length;r<a;r++){var o=n[r],s=new B(3*o.data.length,3);s.name=o.name,e.push(s.copyVector3sArray(o.data))}this.morphAttributes[i]=e}return 0<t.skinIndices.length&&(i=new B(4*t.skinIndices.length,4),this.addAttribute("skinIndex",i.copyVector4sArray(t.skinIndices))),0<t.skinWeights.length&&(i=new B(4*t.skinWeights.length,4),this.addAttribute("skinWeight",i.copyVector4sArray(t.skinWeights))),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:(aC=new p,function(){null===this.boundingBox&&(this.boundingBox=new p);var t=this.attributes.position,e=this.morphAttributes.position;if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e){t=0;for(var i=e.length;t<i;t++)aC.setFromBufferAttribute(e[t]),this.boundingBox.expandByPoint(aC.min),this.boundingBox.expandByPoint(aC.max)}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}),computeBoundingSphere:(aI=new p,aD=new p,aB=new r,function(){null===this.boundingSphere&&(this.boundingSphere=new d);var t=this.attributes.position,e=this.morphAttributes.position;if(t){var i=this.boundingSphere.center;if(aI.setFromBufferAttribute(t),e)for(var n=0,r=e.length;n<r;n++){var a=e[n];aD.setFromBufferAttribute(a),aI.expandByPoint(aD.min),aI.expandByPoint(aD.max)}aI.getCenter(i);var o=0;for(n=0,r=t.count;n<r;n++)aB.fromBufferAttribute(t,n),o=Math.max(o,i.distanceToSquared(aB));if(e)for(n=0,r=e.length;n<r;n++){a=e[n],t=0;for(var s=a.count;t<s;t++)aB.fromBufferAttribute(a,t),o=Math.max(o,i.distanceToSquared(aB))}this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes;if(e.position){var i=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new T(new Float32Array(i.length),3));else for(var n=e.normal.array,a=0,o=n.length;a<o;a++)n[a]=0;n=e.normal.array;var s=new r,c=new r,h=new r,l=new r,u=new r;if(t){var p=t.array;for(a=0,o=t.count;a<o;a+=3){t=3*p[a+0];var d=3*p[a+1],f=3*p[a+2];s.fromArray(i,t),c.fromArray(i,d),h.fromArray(i,f),l.subVectors(h,c),u.subVectors(s,c),l.cross(u),n[t]+=l.x,n[t+1]+=l.y,n[t+2]+=l.z,n[d]+=l.x,n[d+1]+=l.y,n[d+2]+=l.z,n[f]+=l.x,n[f+1]+=l.y,n[f+2]+=l.z}}else for(a=0,o=i.length;a<o;a+=9)s.fromArray(i,a),c.fromArray(i,a+3),h.fromArray(i,a+6),l.subVectors(h,c),u.subVectors(s,c),l.cross(u),n[a]=l.x,n[a+1]=l.y,n[a+2]=l.z,n[a+3]=l.x,n[a+4]=l.y,n[a+5]=l.z,n[a+6]=l.x,n[a+7]=l.y,n[a+8]=l.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var i,n=this.attributes;for(i in n)if(void 0!==t.attributes[i]){var r=n[i].array,a=t.attributes[i],o=a.array,s=a.itemSize*e;a=Math.min(o.length,r.length-s);for(var c=0;c<a;c++,s++)r[s]=o[c]}return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:(az=new r,function(){for(var t=this.attributes.normal,e=0,i=t.count;e<i;e++)az.x=t.getX(e),az.y=t.getY(e),az.z=t.getZ(e),az.normalize(),t.setXYZ(e,az.x,az.y,az.z)}),toNonIndexed:function(){function t(t,e){var i=t.array;t=t.itemSize;for(var n,r=new i.constructor(e.length*t),a=0,o=0,s=e.length;o<s;o++){n=e[o]*t;for(var c=0;c<t;c++)r[a++]=i[n++]}return new T(r,t)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e,i=new U,n=this.index.array,r=this.attributes;for(e in r){var a=r[e];a=t(a,n),i.addAttribute(e,a)}var o=this.morphAttributes;for(e in o){var s=[],c=o[e];r=0;for(var h=c.length;r<h;r++)s.push(a=t(a=c[r],n));i.morphAttributes[e]=s}for(n=this.groups,r=0,e=n.length;r<e;r++)a=n[r],i.addGroup(a.start,a.count,a.materialIndex);return i},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),0<Object.keys(this.userData).length&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(h in e)void 0!==e[h]&&(t[h]=e[h]);return t}t.data={attributes:{}},null!==(e=this.index)&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});var i=this.attributes;for(h in i){var n={itemSize:(e=i[h]).itemSize,type:e.array.constructor.name,array:Array.prototype.slice.call(e.array),normalized:e.normalized};""!==e.name&&(n.name=e.name),t.data.attributes[h]=n}i={};var r=!1;for(h in this.morphAttributes){for(var a=this.morphAttributes[h],o=[],s=0,c=a.length;s<c;s++)n={itemSize:(e=a[s]).itemSize,type:e.array.constructor.name,array:Array.prototype.slice.call(e.array),normalized:e.normalized},""!==e.name&&(n.name=e.name),o.push(n);0<o.length&&(i[h]=o,r=!0)}r&&(t.data.morphAttributes=i);var h=this.groups;return 0<h.length&&(t.data.groups=JSON.parse(JSON.stringify(h))),null!==(h=this.boundingSphere)&&(t.data.boundingSphere={center:h.center.toArray(),radius:h.radius}),t},clone:function(){return(new U).copy(this)},copy:function(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.name=t.name;var e,i=t.index;for(o in null!==i&&this.setIndex(i.clone()),i=t.attributes)this.addAttribute(o,i[o].clone());var n=t.morphAttributes;for(o in n){var r=[],a=n[o];for(i=0,e=a.length;i<e;i++)r.push(a[i].clone());this.morphAttributes[o]=r}var o=t.groups;for(i=0,e=o.length;i<e;i++)n=o[i],this.addGroup(n.start,n.count,n.materialIndex);return null!==(o=t.boundingBox)&&(this.boundingBox=o.clone()),null!==(o=t.boundingSphere)&&(this.boundingSphere=o.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),F.prototype=Object.create(S.prototype),F.prototype.constructor=F,H.prototype=Object.create(U.prototype),H.prototype.constructor=H,O.prototype=Object.create(S.prototype),O.prototype.constructor=O,V.prototype=Object.create(U.prototype),V.prototype.constructor=V;var a2,aG,aU,aF,a3,aH,aO,aV,a4,ak,aW,a5,a6,a7,aj,aq,aX,aY,aZ,aJ,aQ,aK,a9,ot,oe,oi=0;k.prototype=Object.assign(Object.create(e.prototype),{constructor:k,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var e in t){var i=t[e];if(void 0===i)console.warn("THREE.Material: '"+e+"' parameter is undefined.");else if("shading"===e)console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===i;else{var n=this[e];void 0===n?console.warn("THREE."+this.type+": '"+e+"' is not a property of this material."):n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[e]=i}}},toJSON:function(t){function e(t){var e,i=[];for(e in t){var n=t[e];delete n.metadata,i.push(n)}return i}var i=void 0===t||"string"==typeof t;i&&(t={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};return n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),0!==this.side&&(n.side=this.side),0!==this.vertexColors&&(n.vertexColors=this.vertexColors),1>this.opacity&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),0<this.alphaTest&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),1<this.wireframeLinewidth&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),i&&(i=e(t.textures),t=e(t.images),0<i.length&&(n.textures=i),0<t.length&&(n.images=t)),n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.userData=JSON.parse(JSON.stringify(t.userData)),this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var e=t.clippingPlanes,i=null;if(null!==e){var n=e.length;i=Array(n);for(var r=0;r!==n;++r)i[r]=e[r].clone()}return this.clippingPlanes=i,this.shadowSide=t.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),W.prototype=Object.create(k.prototype),W.prototype.constructor=W,W.prototype.isShaderMaterial=!0,W.prototype.copy=function(t){return k.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=v(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},W.prototype.toJSON=function(t){var e=k.prototype.toJSON.call(this,t);for(var i in e.uniforms={},this.uniforms){var n=this.uniforms[i].value;e.uniforms[i]=n&&n.isTexture?{type:"t",value:n.toJSON(t).uuid}:n&&n.isColor?{type:"c",value:n.getHex()}:n&&n.isVector2?{type:"v2",value:n.toArray()}:n&&n.isVector3?{type:"v3",value:n.toArray()}:n&&n.isVector4?{type:"v4",value:n.toArray()}:n&&n.isMatrix3?{type:"m3",value:n.toArray()}:n&&n.isMatrix4?{type:"m4",value:n.toArray()}:{value:n}}for(var r in 0<Object.keys(this.defines).length&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,t={},this.extensions)!0===this.extensions[r]&&(t[r]=!0);return 0<Object.keys(t).length&&(e.extensions=t),e},Object.assign(j.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new r),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:(a2=new r,function(t){return this.origin.copy(this.at(t,a2)),this}),closestPointToPoint:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new r),e.subVectors(t,this.origin),0>(t=e.dot(this.direction))?e.copy(this.origin):e.copy(this.direction).multiplyScalar(t).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:(aG=new r,function(t){var e=aG.subVectors(t,this.origin).dot(this.direction);return 0>e?this.origin.distanceToSquared(t):(aG.copy(this.direction).multiplyScalar(e).add(this.origin),aG.distanceToSquared(t))}),distanceSqToSegment:(aU=new r,aF=new r,a3=new r,function(t,e,i,n){aU.copy(t).add(e).multiplyScalar(.5),aF.copy(e).sub(t).normalize(),a3.copy(this.origin).sub(aU);var r=.5*t.distanceTo(e),a=-this.direction.dot(aF),o=a3.dot(this.direction),s=-a3.dot(aF),c=a3.lengthSq(),h=Math.abs(1-a*a);if(0<h){t=a*s-o,e=a*o-s;var l=r*h;0<=t?e>=-l?e<=l?(t*=r=1/h,e*=r,a=t*(t+a*e+2*o)+e*(a*t+e+2*s)+c):a=-(t=Math.max(0,-(a*(e=r)+o)))*t+e*(e+2*s)+c:a=-(t=Math.max(0,-(a*(e=-r)+o)))*t+e*(e+2*s)+c:e<=-l?(e=0<(t=Math.max(0,-(-a*r+o)))?-r:Math.min(Math.max(-r,-s),r),a=-t*t+e*(e+2*s)+c):e<=l?(t=0,a=(e=Math.min(Math.max(-r,-s),r))*(e+2*s)+c):(e=0<(t=Math.max(0,-(a*r+o)))?r:Math.min(Math.max(-r,-s),r),a=-t*t+e*(e+2*s)+c)}else e=0<a?-r:r,a=-(t=Math.max(0,-(a*e+o)))*t+e*(e+2*s)+c;return i&&i.copy(this.direction).multiplyScalar(t).add(this.origin),n&&n.copy(aF).multiplyScalar(e).add(aU),a}),intersectSphere:(aH=new r,function(t,e){aH.subVectors(t.center,this.origin);var i=aH.dot(this.direction),n=aH.dot(aH)-i*i;return n>(t=t.radius*t.radius)?null:(n=i-(t=Math.sqrt(t-n)),i+=t,0>n&&0>i?null:0>n?this.at(i,e):this.at(n,e))}),intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);return 0===e?0===t.distanceToPoint(this.origin)?0:null:0<=(t=-(this.origin.dot(t.normal)+t.constant)/e)?t:null},intersectPlane:function(t,e){return null===(t=this.distanceToPlane(t))?null:this.at(t,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return!!(0===e||0>t.normal.dot(this.direction)*e)},intersectBox:function(t,e){var i=1/this.direction.x,n=1/this.direction.y,r=1/this.direction.z,a=this.origin;if(0<=i){var o=(t.min.x-a.x)*i;i*=t.max.x-a.x}else o=(t.max.x-a.x)*i,i*=t.min.x-a.x;if(0<=n){var s=(t.min.y-a.y)*n;n*=t.max.y-a.y}else s=(t.max.y-a.y)*n,n*=t.min.y-a.y;return o>n||s>i?null:((s>o||o!=o)&&(o=s),(n<i||i!=i)&&(i=n),0<=r?(s=(t.min.z-a.z)*r,t=(t.max.z-a.z)*r):(s=(t.max.z-a.z)*r,t=(t.min.z-a.z)*r),o>t||s>i)?null:((s>o||o!=o)&&(o=s),(t<i||i!=i)&&(i=t),0>i?null:this.at(0<=o?o:i,e))},intersectsBox:(aO=new r,function(t){return null!==this.intersectBox(t,aO)}),intersectTriangle:(aV=new r,a4=new r,ak=new r,aW=new r,function(t,e,i,n,r){if(a4.subVectors(e,t),ak.subVectors(i,t),aW.crossVectors(a4,ak),0<(e=this.direction.dot(aW))){if(n)return null;n=1}else{if(!(0>e))return null;n=-1,e=-e}return(aV.subVectors(this.origin,t),0>(t=n*this.direction.dot(ak.crossVectors(aV,ak)))||0>(i=n*this.direction.dot(a4.cross(aV)))||t+i>e)?null:0>(t=-n*aV.dot(aW))?null:this.at(t/e,r)}),applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}),Object.assign(q,{getNormal:(a5=new r,function(t,e,i,n){return void 0===n&&(console.warn("THREE.Triangle: .getNormal() target is now required"),n=new r),n.subVectors(i,e),a5.subVectors(t,e),n.cross(a5),0<(t=n.lengthSq())?n.multiplyScalar(1/Math.sqrt(t)):n.set(0,0,0)}),getBarycoord:(a6=new r,a7=new r,aj=new r,function(t,e,i,n,a){a6.subVectors(n,e),a7.subVectors(i,e),aj.subVectors(t,e),t=a6.dot(a6),e=a6.dot(a7),i=a6.dot(aj);var o=a7.dot(a7);n=a7.dot(aj);var s=t*o-e*e;return(void 0===a&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),a=new r),0===s)?a.set(-2,-1,-1):(o=(o*i-e*n)*(s=1/s),t=(t*n-e*i)*s,a.set(1-o-t,t,o))}),containsPoint:(aq=new r,function(t,e,i,n){return q.getBarycoord(t,e,i,n,aq),0<=aq.x&&0<=aq.y&&1>=aq.x+aq.y}),getUV:(aX=new r,function(t,e,i,n,r,a,o,s){return this.getBarycoord(t,e,i,n,aX),s.set(0,0),s.addScaledVector(r,aX.x),s.addScaledVector(a,aX.y),s.addScaledVector(o,aX.z),s})}),Object.assign(q.prototype,{set:function(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this},setFromPointsAndIndices:function(t,e,i,n){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[n]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:(aY=new r,aZ=new r,function(){return aY.subVectors(this.c,this.b),aZ.subVectors(this.a,this.b),.5*aY.cross(aZ).length()}),getMidpoint:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new r),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return q.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new r),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return q.getBarycoord(t,this.a,this.b,this.c,e)},containsPoint:function(t){return q.containsPoint(t,this.a,this.b,this.c)},getUV:function(t,e,i,n,r){return q.getUV(t,this.a,this.b,this.c,e,i,n,r)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:(aJ=new r,aQ=new r,aK=new r,a9=new r,ot=new r,oe=new r,function(t,e){void 0===e&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new r);var i=this.a,n=this.b,a=this.c;aJ.subVectors(n,i),aQ.subVectors(a,i),a9.subVectors(t,i);var o=aJ.dot(a9),s=aQ.dot(a9);if(0>=o&&0>=s)return e.copy(i);ot.subVectors(t,n);var c=aJ.dot(ot),h=aQ.dot(ot);if(0<=c&&h<=c)return e.copy(n);var l=o*h-c*s;if(0>=l&&0<=o&&0>=c)return n=o/(o-c),e.copy(i).addScaledVector(aJ,n);oe.subVectors(t,a),t=aJ.dot(oe);var u=aQ.dot(oe);return 0<=u&&t<=u?e.copy(a):0>=(o=t*s-o*u)&&0<=s&&0>=u?(l=s/(s-u),e.copy(i).addScaledVector(aQ,l)):0>=(s=c*u-t*h)&&0<=h-c&&0<=t-u?(aK.subVectors(a,n),l=(h-c)/(h-c+(t-u)),e.copy(n).addScaledVector(aK,l)):(a=1/(s+o+l),n=o*a,l*=a,e.copy(i).addScaledVector(aJ,n).addScaledVector(aQ,l))}),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}),X.prototype=Object.create(k.prototype),X.prototype.constructor=X,X.prototype.isMeshBasicMaterial=!0,X.prototype.copy=function(t){return k.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},Y.prototype=Object.assign(Object.create(M.prototype),{constructor:Y,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return M.prototype.copy.call(this,t),this.drawMode=t.drawMode,void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){var e=Object.keys(t=t.morphAttributes);if(0<e.length){var i=t[e[0]];if(void 0!==i)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=i.length;t<e;t++){var n=i[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}else void 0!==(t=t.morphTargets)&&0<t.length&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},raycast:function(){function t(t,e,i,n,r,a,o,s){return null===(1===e.side?n.intersectTriangle(o,a,r,!0,s):n.intersectTriangle(r,a,o,2!==e.side,s))?null:(b.copy(s),b.applyMatrix4(t.matrixWorld),(e=i.ray.origin.distanceTo(b))<i.near||e>i.far?null:{distance:e,point:b.clone(),object:t})}function e(e,n,r,a,o,d,g,b,E,M){if(s.fromBufferAttribute(o,b),c.fromBufferAttribute(o,E),h.fromBufferAttribute(o,M),o=e.morphTargetInfluences,n.morphTargets&&d&&o){f.set(0,0,0),m.set(0,0,0),v.set(0,0,0);for(var S=0,T=d.length;S<T;S++){var L=o[S],A=d[S];0!==L&&(l.fromBufferAttribute(A,b),u.fromBufferAttribute(A,E),p.fromBufferAttribute(A,M),f.addScaledVector(l.sub(s),L),m.addScaledVector(u.sub(c),L),v.addScaledVector(p.sub(h),L))}s.add(f),c.add(m),h.add(v)}return(e=t(e,n,r,a,s,c,h,_))&&(g&&(y.fromBufferAttribute(g,b),$.fromBufferAttribute(g,E),x.fromBufferAttribute(g,M),e.uv=q.getUV(_,s,c,h,y,$,x,new i)),g=new w(b,E,M),q.getNormal(s,c,h,g.normal),e.face=g),e}var n=new g,a=new j,o=new d,s=new r,c=new r,h=new r,l=new r,u=new r,p=new r,f=new r,m=new r,v=new r,y=new i,$=new i,x=new i,_=new r,b=new r;return function(r,s){var c=this.geometry,h=this.material,l=this.matrixWorld;if(void 0!==h&&(null===c.boundingSphere&&c.computeBoundingSphere(),o.copy(c.boundingSphere),o.applyMatrix4(l),!1!==r.ray.intersectsSphere(o)&&(n.getInverse(l),a.copy(r.ray).applyMatrix4(n),null===c.boundingBox||!1!==a.intersectsBox(c.boundingBox)))){if(c.isBufferGeometry){var u=c.index;l=c.attributes.position;var p,d,f=c.morphAttributes.position,m=c.attributes.uv,g=c.groups,v=c.drawRange;if(null!==u){if(Array.isArray(h)){var w=0;for(p=g.length;w<p;w++){var b=g[w],E=h[b.materialIndex],M=Math.max(b.start,v.start);for(d=c=Math.min(b.start+b.count,v.start+v.count);M<d;M+=3){c=u.getX(M);var S=u.getX(M+1),T=u.getX(M+2);(c=e(this,E,r,a,l,f,m,c,S,T))&&(c.faceIndex=Math.floor(M/3),c.face.materialIndex=b.materialIndex,s.push(c))}}}else for(M=Math.max(0,v.start),c=Math.min(u.count,v.start+v.count),w=M,p=c;w<p;w+=3)c=u.getX(w),(c=e(this,h,r,a,l,f,m,c,S=u.getX(w+1),T=u.getX(w+2)))&&(c.faceIndex=Math.floor(w/3),s.push(c))}else if(void 0!==l){if(Array.isArray(h))for(w=0,p=g.length;w<p;w++)for(E=h[(b=g[w]).materialIndex],M=Math.max(b.start,v.start),d=c=Math.min(b.start+b.count,v.start+v.count);M<d;M+=3)c=M,(c=e(this,E,r,a,l,f,m,c,S=M+1,T=M+2))&&(c.faceIndex=Math.floor(M/3),c.face.materialIndex=b.materialIndex,s.push(c));else for(M=Math.max(0,v.start),c=Math.min(l.count,v.start+v.count),w=M,p=c;w<p;w+=3)c=w,(c=e(this,h,r,a,l,f,m,c,S=w+1,T=w+2))&&(c.faceIndex=Math.floor(w/3),s.push(c))}}else if(c.isGeometry)for(l=Array.isArray(h),f=c.vertices,m=c.faces,0<(c=c.faceVertexUvs[0]).length&&(u=c),p=0,b=m.length;p<b;p++)E=m[p],void 0!==(c=l?h[E.materialIndex]:h)&&(g=f[E.a],c=t(this,c,r,a,g,v=f[E.b],w=f[E.c],_))&&(u&&u[p]&&(M=u[p],y.copy(M[0]),$.copy(M[1]),x.copy(M[2]),c.uv=q.getUV(_,g,v,w,y,$,x,new i)),c.face=E,c.faceIndex=p,s.push(c))}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ts.prototype=Object.create(o.prototype),ts.prototype.constructor=ts,ts.prototype.isCubeTexture=!0,Object.defineProperty(ts.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),tc.prototype=Object.create(o.prototype),tc.prototype.constructor=tc,tc.prototype.isDataTexture2DArray=!0,th.prototype=Object.create(o.prototype),th.prototype.constructor=th,th.prototype.isDataTexture3D=!0;var on=new o,or=new tc,oa=new th,oo=new ts,os=[],oc=[],oh=new Float32Array(16),ol=new Float32Array(9),ou=new Float32Array(4);tN.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),tp(e,t)},t2.prototype.setValue=function(t,e,i){for(var n=this.seq,r=0,a=n.length;r!==a;++r){var o=n[r];o.setValue(t,e[o.id],i)}};var op=/([\w\d_]+)(\])?(\[|\.)?/g;tG.prototype.setValue=function(t,e,i,n){void 0!==(e=this.map[e])&&e.setValue(t,i,n)},tG.prototype.setOptional=function(t,e,i){void 0!==(e=e[i])&&this.setValue(t,i,e)},tG.upload=function(t,e,i,n){for(var r=0,a=e.length;r!==a;++r){var o=e[r],s=i[o.id];!1!==s.needsUpdate&&o.setValue(t,s.value,n)}},tG.seqWithValue=function(t,e){for(var i=[],n=0,r=t.length;n!==r;++n){var a=t[n];a.id in e&&i.push(a)}return i};var od=0,of=0;tK.prototype=Object.create(k.prototype),tK.prototype.constructor=tK,tK.prototype.isMeshDepthMaterial=!0,tK.prototype.copy=function(t){return k.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},t9.prototype=Object.create(k.prototype),t9.prototype.constructor=t9,t9.prototype.isMeshDistanceMaterial=!0,t9.prototype.copy=function(t){return k.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this},er.prototype=Object.assign(Object.create(M.prototype),{constructor:er,isGroup:!0}),ea.prototype=Object.assign(Object.create(M.prototype),{constructor:ea,isCamera:!0,copy:function(t,e){return M.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new r),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){M.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),eo.prototype=Object.assign(Object.create(ea.prototype),{constructor:eo,isPerspectiveCamera:!0,copy:function(t,e){return ea.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){t=.5*this.getFilmHeight()/t,this.fov=2*rS.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*rS.DEG2RAD*this.fov);return .5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*rS.RAD2DEG*Math.atan(Math.tan(.5*rS.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,i,n,r,a){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*rS.DEG2RAD*this.fov)/this.zoom,i=2*e,n=this.aspect*i,r=-.5*n,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;r+=a.offsetX*n/o,e-=a.offsetY*i/s,n*=a.width/o,i*=a.height/s}0!==(a=this.filmOffset)&&(r+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+n,e,e-i,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){return(t=M.prototype.toJSON.call(this,t)).object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),es.prototype=Object.assign(Object.create(eo.prototype),{constructor:es,isArrayCamera:!0});var om,og,ov,oy,o$,ox,o_,ow,ob,o8,oE,oM,oS,oT,o1,o0=new r,oL=new r;Object.assign(ep.prototype,{isFogExp2:!0,clone:function(){return new ep(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(ed.prototype,{isFog:!0,clone:function(){return new ed(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),ef.prototype=Object.assign(Object.create(M.prototype),{constructor:ef,isScene:!0,copy:function(t,e){return M.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=M.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(em.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(em.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.stride:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,e,i){t*=this.stride,i*=e.stride;for(var n=0,r=this.stride;n<r;n++)this.array[t+n]=e.array[i+n];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}}),Object.defineProperties(eg.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(eg.prototype,{isInterleavedBufferAttribute:!0,setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this},setXYZ:function(t,e,i,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this},setXYZW:function(t,e,i,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this.data.array[t+3]=r,this}}),ev.prototype=Object.create(k.prototype),ev.prototype.constructor=ev,ev.prototype.isSpriteMaterial=!0,ev.prototype.copy=function(t){return k.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this},ey.prototype=Object.assign(Object.create(M.prototype),{constructor:ey,isSprite:!0,raycast:function(){function t(t,e,i,n,r,a){o.subVectors(t,i).addScalar(.5).multiply(n),void 0!==r?(s.x=a*o.x-r*o.y,s.y=r*o.x+a*o.y):s.copy(o),t.copy(e),t.x+=s.x,t.y+=s.y,t.applyMatrix4(c)}var e=new r,n=new r,a=new r,o=new i,s=new i,c=new g,h=new r,l=new r,u=new r,p=new i,d=new i,f=new i;return function(r,o){n.setFromMatrixScale(this.matrixWorld),c.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld),a.setFromMatrixPosition(this.modelViewMatrix);var s=this.material.rotation;if(0!==s)var m=Math.cos(s),g=Math.sin(s);s=this.center,t(h.set(-.5,-.5,0),a,s,n,g,m),t(l.set(.5,-.5,0),a,s,n,g,m),t(u.set(.5,.5,0),a,s,n,g,m),p.set(0,0),d.set(1,0),f.set(1,1);var v=r.ray.intersectTriangle(h,l,u,!1,e);(null!==v||(t(l.set(-.5,.5,0),a,s,n,g,m),d.set(0,1),null!==(v=r.ray.intersectTriangle(h,u,l,!1,e))))&&((g=r.ray.origin.distanceTo(e))<r.near||g>r.far||o.push({distance:g,point:e.clone(),uv:q.getUV(e,h,l,u,p,d,f,new i),face:null,object:this}))}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(t){return M.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this}}),e$.prototype=Object.assign(Object.create(M.prototype),{constructor:e$,isLOD:!0,copy:function(t){M.prototype.copy.call(this,t,!1),t=t.levels;for(var e=0,i=t.length;e<i;e++){var n=t[e];this.addLevel(n.object.clone(),n.distance)}return this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var i=this.levels,n=0;n<i.length&&!(e<i[n].distance);n++);return i.splice(n,0,{distance:e,object:t}),this.add(t),this},getObjectForDistance:function(t){for(var e=this.levels,i=1,n=e.length;i<n&&!(t<e[i].distance);i++);return e[i-1].object},raycast:(om=new r,function(t,e){om.setFromMatrixPosition(this.matrixWorld);var i=t.ray.origin.distanceTo(om);this.getObjectForDistance(i).raycast(t,e)}),update:(og=new r,ov=new r,function(t){var e=this.levels;if(1<e.length){og.setFromMatrixPosition(t.matrixWorld),ov.setFromMatrixPosition(this.matrixWorld),t=og.distanceTo(ov),e[0].object.visible=!0;for(var i=1,n=e.length;i<n;i++)if(t>=e[i].distance)e[i-1].object.visible=!1,e[i].object.visible=!0;else break;for(;i<n;i++)e[i].object.visible=!1}}),toJSON:function(t){(t=M.prototype.toJSON.call(this,t)).object.levels=[];for(var e=this.levels,i=0,n=e.length;i<n;i++){var r=e[i];t.object.levels.push({object:r.object.uuid,distance:r.distance})}return t}}),ex.prototype=Object.assign(Object.create(Y.prototype),{constructor:ex,isSkinnedMesh:!0,bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var t=new s,e=this.geometry.attributes.skinWeight,i=0,n=e.count;i<n;i++){t.x=e.getX(i),t.y=e.getY(i),t.z=e.getZ(i),t.w=e.getW(i);var r=1/t.manhattanLength();1/0!==r?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(i,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){Y.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Object.assign(e_.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var i=new g;this.bones[t]&&i.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(i)}},pose:function(){var t,e,i=0;for(e=this.bones.length;i<e;i++)(t=this.bones[i])&&t.matrixWorld.getInverse(this.boneInverses[i]);for(i=0,e=this.bones.length;i<e;i++)(t=this.bones[i])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:(oy=new g,o$=new g,function(){for(var t=this.bones,e=this.boneInverses,i=this.boneMatrices,n=this.boneTexture,r=0,a=t.length;r<a;r++)oy.multiplyMatrices(t[r]?t[r].matrixWorld:o$,e[r]),oy.toArray(i,16*r);void 0!==n&&(n.needsUpdate=!0)}),clone:function(){return new e_(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,i=this.bones.length;e<i;e++){var n=this.bones[e];if(n.name===t)return n}}}),ew.prototype=Object.assign(Object.create(M.prototype),{constructor:ew,isBone:!0}),eb.prototype=Object.create(k.prototype),eb.prototype.constructor=eb,eb.prototype.isLineBasicMaterial=!0,eb.prototype.copy=function(t){return k.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this},e8.prototype=Object.assign(Object.create(M.prototype),{constructor:e8,isLine:!0,computeLineDistances:(ox=new r,o_=new r,function(){var t=this.geometry;if(t.isBufferGeometry){if(null===t.index){for(var e=t.attributes.position,i=[0],n=1,r=e.count;n<r;n++)ox.fromBufferAttribute(e,n-1),o_.fromBufferAttribute(e,n),i[n]=i[n-1],i[n]+=ox.distanceTo(o_);t.addAttribute("lineDistance",new B(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.")}else if(t.isGeometry)for(e=t.vertices,(i=t.lineDistances)[0]=0,n=1,r=e.length;n<r;n++)i[n]=i[n-1],i[n]+=e[n-1].distanceTo(e[n]);return this}),raycast:(ow=new g,ob=new j,o8=new d,function(t,e){var i=t.linePrecision,n=this.geometry,a=this.matrixWorld;if(null===n.boundingSphere&&n.computeBoundingSphere(),o8.copy(n.boundingSphere),o8.applyMatrix4(a),o8.radius+=i,!1!==t.ray.intersectsSphere(o8)){ow.getInverse(a),ob.copy(t.ray).applyMatrix4(ow),i/=(this.scale.x+this.scale.y+this.scale.z)/3,i*=i;var o=new r,s=new r;a=new r;var c=new r,h=this&&this.isLineSegments?2:1;if(n.isBufferGeometry){var l=n.index,u=n.attributes.position.array;if(null!==l){l=l.array,n=0;for(var p=l.length-1;n<p;n+=h){var d=l[n+1];o.fromArray(u,3*l[n]),s.fromArray(u,3*d),(d=ob.distanceSqToSegment(o,s,c,a))>i||(c.applyMatrix4(this.matrixWorld),(d=t.ray.origin.distanceTo(c))<t.near||d>t.far||e.push({distance:d,point:a.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this}))}}else for(n=0,p=u.length/3-1;n<p;n+=h)o.fromArray(u,3*n),s.fromArray(u,3*n+3),(d=ob.distanceSqToSegment(o,s,c,a))>i||(c.applyMatrix4(this.matrixWorld),(d=t.ray.origin.distanceTo(c))<t.near||d>t.far||e.push({distance:d,point:a.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this}))}else if(n.isGeometry)for(s=(o=n.vertices).length,n=0;n<s-1;n+=h)(d=ob.distanceSqToSegment(o[n],o[n+1],c,a))>i||(c.applyMatrix4(this.matrixWorld),(d=t.ray.origin.distanceTo(c))<t.near||d>t.far||e.push({distance:d,point:a.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this}))}}),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),eE.prototype=Object.assign(Object.create(e8.prototype),{constructor:eE,isLineSegments:!0,computeLineDistances:(oE=new r,oM=new r,function(){var t=this.geometry;if(t.isBufferGeometry){if(null===t.index){for(var e=t.attributes.position,i=[],n=0,r=e.count;n<r;n+=2)oE.fromBufferAttribute(e,n),oM.fromBufferAttribute(e,n+1),i[n]=0===n?0:i[n-1],i[n+1]=i[n]+oE.distanceTo(oM);t.addAttribute("lineDistance",new B(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.")}else if(t.isGeometry)for(e=t.vertices,i=t.lineDistances,n=0,r=e.length;n<r;n+=2)oE.copy(e[n]),oM.copy(e[n+1]),i[n]=0===n?0:i[n-1],i[n+1]=i[n]+oE.distanceTo(oM);return this})}),eM.prototype=Object.assign(Object.create(e8.prototype),{constructor:eM,isLineLoop:!0}),eS.prototype=Object.create(k.prototype),eS.prototype.constructor=eS,eS.prototype.isPointsMaterial=!0,eS.prototype.copy=function(t){return k.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this},eT.prototype=Object.assign(Object.create(M.prototype),{constructor:eT,isPoints:!0,raycast:(oS=new g,oT=new j,o1=new d,function(t,e){function i(i,r){var a=oT.distanceSqToPoint(i);a<c&&(oT.closestPointToPoint(i,h),h.applyMatrix4(o),(i=t.ray.origin.distanceTo(h))<t.near||i>t.far||e.push({distance:i,distanceToRay:Math.sqrt(a),point:h.clone(),index:r,face:null,object:n}))}var n=this,a=this.geometry,o=this.matrixWorld,s=t.params.Points.threshold;if(null===a.boundingSphere&&a.computeBoundingSphere(),o1.copy(a.boundingSphere),o1.applyMatrix4(o),o1.radius+=s,!1!==t.ray.intersectsSphere(o1)){oS.getInverse(o),oT.copy(t.ray).applyMatrix4(oS);var c=(s/=(this.scale.x+this.scale.y+this.scale.z)/3)*s;s=new r;var h=new r;if(a.isBufferGeometry){var l=a.index;if(a=a.attributes.position.array,null!==l){var u=l.array;l=0;for(var p=u.length;l<p;l++){var d=u[l];s.fromArray(a,3*d),i(s,d)}}else for(l=0,u=a.length/3;l<u;l++)s.fromArray(a,3*l),i(s,l)}else for(s=a.vertices,l=0,u=s.length;l<u;l++)i(s[l],l)}}),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),e1.prototype=Object.assign(Object.create(o.prototype),{constructor:e1,isVideoTexture:!0,update:function(){var t=this.image;t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),e0.prototype=Object.create(o.prototype),e0.prototype.constructor=e0,e0.prototype.isCompressedTexture=!0,eL.prototype=Object.create(o.prototype),eL.prototype.constructor=eL,eL.prototype.isCanvasTexture=!0,eA.prototype=Object.create(o.prototype),eA.prototype.constructor=eA,eA.prototype.isDepthTexture=!0,eP.prototype=Object.create(U.prototype),eP.prototype.constructor=eP,eR.prototype=Object.create(S.prototype),eR.prototype.constructor=eR,eC.prototype=Object.create(U.prototype),eC.prototype.constructor=eC,eI.prototype=Object.create(S.prototype),eI.prototype.constructor=eI,eD.prototype=Object.create(U.prototype),eD.prototype.constructor=eD,eB.prototype=Object.create(S.prototype),eB.prototype.constructor=eB,ez.prototype=Object.create(eD.prototype),ez.prototype.constructor=ez,eN.prototype=Object.create(S.prototype),eN.prototype.constructor=eN,e2.prototype=Object.create(eD.prototype),e2.prototype.constructor=e2,eG.prototype=Object.create(S.prototype),eG.prototype.constructor=eG,eU.prototype=Object.create(eD.prototype),eU.prototype.constructor=eU,eF.prototype=Object.create(S.prototype),eF.prototype.constructor=eF,e3.prototype=Object.create(eD.prototype),e3.prototype.constructor=e3,eH.prototype=Object.create(S.prototype),eH.prototype.constructor=eH,eO.prototype=Object.create(U.prototype),eO.prototype.constructor=eO,eO.prototype.toJSON=function(){var t=U.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t},eV.prototype=Object.create(S.prototype),eV.prototype.constructor=eV,e4.prototype=Object.create(U.prototype),e4.prototype.constructor=e4,ek.prototype=Object.create(S.prototype),ek.prototype.constructor=ek,eW.prototype=Object.create(U.prototype),eW.prototype.constructor=eW;var oA={triangulate:function(t,e,i){i=i||2;var n=e&&e.length,r=n?e[0]*i:t.length,a=e5(t,0,r,i,!0),o=[];if(!a)return o;if(n){var s,c,h=i;n=[];var l=0;for(c=e.length;l<c;l++){var u=e[l]*h,p=l<c-1?e[l+1]*h:t.length;(u=e5(t,u,p,h,!1))===u.next&&(u.steiner=!0),n.push(eX(u))}for(n.sort(e7),l=0;l<n.length;l++)e=n[l],h=a,(h=ej(e,h))&&(e=e9(h,e),e6(e,e.next)),a=e6(a,a.next)}if(t.length>80*i){var d=s=t[0],f=n=t[1];for(h=i;h<r;h+=i)l=t[h],e=t[h+1],l<d&&(d=l),e<f&&(f=e),l>s&&(s=l),e>n&&(n=e);s=0!==(s=Math.max(s-d,n-f))?1/s:0}return!function t(e,i,n,r,a,o,s){if(e){if(!s&&o){var c=e,h=c;do null===h.z&&(h.z=eq(h.x,h.y,r,a,o)),h.prevZ=h.prev,h=h.nextZ=h.next;while(h!==c);h.prevZ.nextZ=null,h.prevZ=null,c=h;var l,u,p,d,f=1;do{h=c;var m=c=null;for(u=0;h;){u++;var g=h;for(l=p=0;l<f&&(p++,g=g.nextZ);l++);for(d=f;0<p||0<d&&g;)0!==p&&(0===d||!g||h.z<=g.z)?(l=h,h=h.nextZ,p--):(l=g,g=g.nextZ,d--),m?m.nextZ=l:c=l,l.prevZ=m,m=l;h=g}m.nextZ=null,f*=2}while(1<u)}for(c=e;e.prev!==e.next;){if(h=e.prev,g=e.next,o)a:{m=e,d=r;var v=a,y=o;if(u=m.prev,0<=eZ(u,p=m,f=m.next))m=!1;else{var $=u.x>p.x?u.x>f.x?u.x:f.x:p.x>f.x?p.x:f.x,x=u.y>p.y?u.y>f.y?u.y:f.y:p.y>f.y?p.y:f.y;for(l=eq(u.x<p.x?u.x<f.x?u.x:f.x:p.x<f.x?p.x:f.x,u.y<p.y?u.y<f.y?u.y:f.y:p.y<f.y?p.y:f.y,d,v,y),d=eq($,x,d,v,y),v=m.nextZ;v&&v.z<=d;){if(v!==m.prev&&v!==m.next&&eY(u.x,u.y,p.x,p.y,f.x,f.y,v.x,v.y)&&0<=eZ(v.prev,v,v.next)){m=!1;break a}v=v.nextZ}for(v=m.prevZ;v&&v.z>=l;){if(v!==m.prev&&v!==m.next&&eY(u.x,u.y,p.x,p.y,f.x,f.y,v.x,v.y)&&0<=eZ(v.prev,v,v.next)){m=!1;break a}v=v.prevZ}m=!0}}else a:if(u=(m=e).prev,0<=eZ(u,p=m,f=m.next))m=!1;else{for(l=m.next.next;l!==m.prev;){if(eY(u.x,u.y,p.x,p.y,f.x,f.y,l.x,l.y)&&0<=eZ(l.prev,l,l.next)){m=!1;break a}l=l.next}m=!0}if(m)i.push(h.i/n),i.push(e.i/n),i.push(g.i/n),ie(e),c=e=g.next;else if((e=g)===c){if(s){if(1===s){s=i,c=n,h=e;do!eJ(g=h.prev,m=h.next.next)&&eQ(g,h,h.next,m)&&eK(g,m)&&eK(m,g)&&(s.push(g.i/c),s.push(h.i/c),s.push(m.i/c),ie(h),ie(h.next),h=e=m),h=h.next;while(h!==e);t(e=h,i,n,r,a,o,2)}else if(2===s)a:{s=e;do{for(c=s.next.next;c!==s.prev;){if(h=s.i!==c.i){if(h=s,g=c,m=h.next.i!==g.i&&h.prev.i!==g.i){b:{m=h;do{if(m.i!==h.i&&m.next.i!==h.i&&m.i!==g.i&&m.next.i!==g.i&&eQ(m,m.next,h,g)){m=!0;break b}m=m.next}while(m!==h);m=!1}m=!m}if(m=m&&eK(h,g)&&eK(g,h)){m=h,u=!1,p=(h.x+g.x)/2,g=(h.y+g.y)/2;do m.y>g!=m.next.y>g&&m.next.y!==m.y&&p<(m.next.x-m.x)*(g-m.y)/(m.next.y-m.y)+m.x&&(u=!u),m=m.next;while(m!==h);m=u}h=m}if(h){e=e9(s,c),s=e6(s,s.next),e=e6(e,e.next),t(s,i,n,r,a,o),t(e,i,n,r,a,o);break a}c=c.next}s=s.next}while(s!==e)}}else t(e6(e),i,n,r,a,o,1);break}}}}(a,o,i,d,f,s),o}},oP={area:function(t){for(var e=t.length,i=0,n=e-1,r=0;r<e;n=r++)i+=t[n].x*t[r].y-t[r].x*t[n].y;return .5*i},isClockWise:function(t){return 0>oP.area(t)},triangulateShape:function(t,e){var i=[],n=[],r=[];ir(t),ia(i,t);var a=t.length;for(e.forEach(ir),t=0;t<e.length;t++)n.push(a),a+=e[t].length,ia(i,e[t]);for(t=0,e=oA.triangulate(i,n);t<e.length;t+=3)r.push(e.slice(t,t+3));return r}};io.prototype=Object.create(S.prototype),io.prototype.constructor=io,io.prototype.toJSON=function(){var t=S.prototype.toJSON.call(this);return ic(this.parameters.shapes,this.parameters.options,t)},is.prototype=Object.create(U.prototype),is.prototype.constructor=is,is.prototype.toJSON=function(){var t=U.prototype.toJSON.call(this);return ic(this.parameters.shapes,this.parameters.options,t)};var oR={generateTopUV:function(t,e,n,r,a){t=e[3*r],r=e[3*r+1];var o=e[3*a];return a=e[3*a+1],[new i(e[3*n],e[3*n+1]),new i(t,r),new i(o,a)]},generateSideWallUV:function(t,e,n,r,a,o){t=e[3*n];var s=e[3*n+1];n=e[3*n+2];var c=e[3*r],h=e[3*r+1];r=e[3*r+2];var l=e[3*a],u=e[3*a+1];a=e[3*a+2];var p=e[3*o],d=e[3*o+1];return e=e[3*o+2],.01>Math.abs(s-h)?[new i(t,1-n),new i(c,1-r),new i(l,1-a),new i(p,1-e)]:[new i(s,1-n),new i(h,1-r),new i(u,1-a),new i(d,1-e)]}};ih.prototype=Object.create(S.prototype),ih.prototype.constructor=ih,il.prototype=Object.create(is.prototype),il.prototype.constructor=il,iu.prototype=Object.create(S.prototype),iu.prototype.constructor=iu,ip.prototype=Object.create(U.prototype),ip.prototype.constructor=ip,id.prototype=Object.create(S.prototype),id.prototype.constructor=id,im.prototype=Object.create(U.prototype),im.prototype.constructor=im,ig.prototype=Object.create(S.prototype),ig.prototype.constructor=ig,iv.prototype=Object.create(U.prototype),iv.prototype.constructor=iv,iy.prototype=Object.create(S.prototype),iy.prototype.constructor=iy,iy.prototype.toJSON=function(){var t=S.prototype.toJSON.call(this);return ix(this.parameters.shapes,t)},i$.prototype=Object.create(U.prototype),i$.prototype.constructor=i$,i$.prototype.toJSON=function(){var t=U.prototype.toJSON.call(this);return ix(this.parameters.shapes,t)},i_.prototype=Object.create(U.prototype),i_.prototype.constructor=i_,iw.prototype=Object.create(S.prototype),iw.prototype.constructor=iw,ib.prototype=Object.create(U.prototype),ib.prototype.constructor=ib,i8.prototype=Object.create(iw.prototype),i8.prototype.constructor=i8,iE.prototype=Object.create(ib.prototype),iE.prototype.constructor=iE,iM.prototype=Object.create(S.prototype),iM.prototype.constructor=iM,iS.prototype=Object.create(U.prototype),iS.prototype.constructor=iS;var oC=Object.freeze({WireframeGeometry:eP,ParametricGeometry:eR,ParametricBufferGeometry:eC,TetrahedronGeometry:eB,TetrahedronBufferGeometry:ez,OctahedronGeometry:eN,OctahedronBufferGeometry:e2,IcosahedronGeometry:eG,IcosahedronBufferGeometry:eU,DodecahedronGeometry:eF,DodecahedronBufferGeometry:e3,PolyhedronGeometry:eI,PolyhedronBufferGeometry:eD,TubeGeometry:eH,TubeBufferGeometry:eO,TorusKnotGeometry:eV,TorusKnotBufferGeometry:e4,TorusGeometry:ek,TorusBufferGeometry:eW,TextGeometry:ih,TextBufferGeometry:il,SphereGeometry:iu,SphereBufferGeometry:ip,RingGeometry:id,RingBufferGeometry:im,PlaneGeometry:O,PlaneBufferGeometry:V,LatheGeometry:ig,LatheBufferGeometry:iv,ShapeGeometry:iy,ShapeBufferGeometry:i$,ExtrudeGeometry:io,ExtrudeBufferGeometry:is,EdgesGeometry:i_,ConeGeometry:i8,ConeBufferGeometry:iE,CylinderGeometry:iw,CylinderBufferGeometry:ib,CircleGeometry:iM,CircleBufferGeometry:iS,BoxGeometry:F,BoxBufferGeometry:H});iT.prototype=Object.create(k.prototype),iT.prototype.constructor=iT,iT.prototype.isShadowMaterial=!0,iT.prototype.copy=function(t){return k.prototype.copy.call(this,t),this.color.copy(t.color),this},i1.prototype=Object.create(W.prototype),i1.prototype.constructor=i1,i1.prototype.isRawShaderMaterial=!0,i0.prototype=Object.create(k.prototype),i0.prototype.constructor=i0,i0.prototype.isMeshStandardMaterial=!0,i0.prototype.copy=function(t){return k.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},iL.prototype=Object.create(i0.prototype),iL.prototype.constructor=iL,iL.prototype.isMeshPhysicalMaterial=!0,iL.prototype.copy=function(t){return i0.prototype.copy.call(this,t),this.defines={PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearCoat=t.clearCoat,this.clearCoatRoughness=t.clearCoatRoughness,this},iA.prototype=Object.create(k.prototype),iA.prototype.constructor=iA,iA.prototype.isMeshPhongMaterial=!0,iA.prototype.copy=function(t){return k.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},iP.prototype=Object.create(iA.prototype),iP.prototype.constructor=iP,iP.prototype.isMeshToonMaterial=!0,iP.prototype.copy=function(t){return iA.prototype.copy.call(this,t),this.gradientMap=t.gradientMap,this},iR.prototype=Object.create(k.prototype),iR.prototype.constructor=iR,iR.prototype.isMeshNormalMaterial=!0,iR.prototype.copy=function(t){return k.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},iC.prototype=Object.create(k.prototype),iC.prototype.constructor=iC,iC.prototype.isMeshLambertMaterial=!0,iC.prototype.copy=function(t){return k.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},iI.prototype=Object.create(k.prototype),iI.prototype.constructor=iI,iI.prototype.isMeshMatcapMaterial=!0,iI.prototype.copy=function(t){return k.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},iD.prototype=Object.create(eb.prototype),iD.prototype.constructor=iD,iD.prototype.isLineDashedMaterial=!0,iD.prototype.copy=function(t){return eb.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var oI=Object.freeze({ShadowMaterial:iT,SpriteMaterial:ev,RawShaderMaterial:i1,ShaderMaterial:W,PointsMaterial:eS,MeshPhysicalMaterial:iL,MeshStandardMaterial:i0,MeshPhongMaterial:iA,MeshToonMaterial:iP,MeshNormalMaterial:iR,MeshLambertMaterial:iC,MeshDepthMaterial:tK,MeshDistanceMaterial:t9,MeshBasicMaterial:X,MeshMatcapMaterial:iI,LineDashedMaterial:iD,LineBasicMaterial:eb,Material:k}),oD={arraySlice:function(t,e,i){return oD.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==i?i:t.length)):t.slice(e,i)},convertArray:function(t,e,i){return t&&(i||t.constructor!==e)?"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t):t},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var e=t.length,i=Array(e),n=0;n!==e;++n)i[n]=n;return i.sort(function(e,i){return t[e]-t[i]}),i},sortedArray:function(t,e,i){for(var n=t.length,r=new t.constructor(n),a=0,o=0;o!==n;++a)for(var s=i[a]*e,c=0;c!==e;++c)r[o++]=t[s+c];return r},flattenJSON:function(t,e,i,n){for(var r=1,a=t[0];void 0!==a&&void 0===a[n];)a=t[r++];if(void 0!==a){var o=a[n];if(void 0!==o){if(Array.isArray(o))do void 0!==(o=a[n])&&(e.push(a.time),i.push.apply(i,o)),a=t[r++];while(void 0!==a);else if(void 0!==o.toArray)do void 0!==(o=a[n])&&(e.push(a.time),o.toArray(i,i.length)),a=t[r++];while(void 0!==a);else do void 0!==(o=a[n])&&(e.push(a.time),i.push(o)),a=t[r++];while(void 0!==a)}}}};Object.assign(iB.prototype,{evaluate:function(t){var e=this.parameterPositions,i=this._cachedIndex,n=e[i],r=e[i-1];a:{b:{c:{d:if(!(t<n)){for(var a=i+2;;){if(void 0===n){if(t<r)break d;return this._cachedIndex=i=e.length,this.afterEnd_(i-1,t,r)}if(i===a)break;if(r=n,t<(n=e[++i]))break b}n=e.length;break c}if(t>=r)break a;for(t<(a=e[1])&&(i=2,r=a),a=i-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,n);if(i===a)break;if(n=r,t>=(r=e[--i-1]))break b}n=i,i=0}for(;i<n;)t<e[r=i+n>>>1]?n=r:i=r+1;if(n=e[i],void 0===(r=e[i-1]))return this._cachedIndex=0,this.beforeStart_(0,t,n);if(void 0===n)return this._cachedIndex=i=e.length,this.afterEnd_(i-1,r,t)}this._cachedIndex=i,this.intervalChanged_(i,r,n)}return this.interpolate_(i,r,t,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){var e=this.resultBuffer,i=this.sampleValues,n=this.valueSize;t*=n;for(var r=0;r!==n;++r)e[r]=i[t+r];return e},interpolate_:function(){throw Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(iB.prototype,{beforeStart_:iB.prototype.copySampleValue_,afterEnd_:iB.prototype.copySampleValue_}),iz.prototype=Object.assign(Object.create(iB.prototype),{constructor:iz,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(t,e,i){var n=this.parameterPositions,r=t-2,a=t+1,o=n[r],s=n[a];if(void 0===o)switch(this.getSettings_().endingStart){case 2401:r=t,o=2*e-i;break;case 2402:o=e+n[r=n.length-2]-n[r+1];break;default:r=t,o=i}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:a=t,s=2*i-e;break;case 2402:a=1,s=i+n[1]-n[0];break;default:a=t-1,s=e}t=.5*(i-e),n=this.valueSize,this._weightPrev=t/(e-o),this._weightNext=t/(s-i),this._offsetPrev=r*n,this._offsetNext=a*n},interpolate_:function(t,e,i,n){var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(t*=o)-o,c=this._offsetPrev,h=this._offsetNext,l=this._weightPrev,u=this._weightNext,p=(i-e)/(n-e);for(e=-l*(n=(i=p*p)*p)+2*l*i-l*p,l=(1+l)*n+(-1.5-2*l)*i+(-.5+l)*p+1,p=(-1-u)*n+(1.5+u)*i+.5*p,u=u*n-u*i,i=0;i!==o;++i)r[i]=e*a[c+i]+l*a[s+i]+p*a[t+i]+u*a[h+i];return r}}),iN.prototype=Object.assign(Object.create(iB.prototype),{constructor:iN,interpolate_:function(t,e,i,n){var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(t*=o)-o;for(i=1-(e=(i-e)/(n-e)),n=0;n!==o;++n)r[n]=a[s+n]*i+a[t+n]*e;return r}}),i2.prototype=Object.assign(Object.create(iB.prototype),{constructor:i2,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(iG,{toJSON:function(t){var e=t.constructor;if(void 0!==e.toJSON)e=e.toJSON(t);else{e={name:t.name,times:oD.convertArray(t.times,Array),values:oD.convertArray(t.values,Array)};var i=t.getInterpolation();i!==t.DefaultInterpolation&&(e.interpolation=i)}return e.type=t.ValueTypeName,e}}),Object.assign(iG.prototype,{constructor:iG,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(t){return new i2(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new iN(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new iz(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){switch(t){case 2300:var e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){if(e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name,void 0===this.createInterpolant){if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw Error(e)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,i=0,n=e.length;i!==n;++i)e[i]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,i=0,n=e.length;i!==n;++i)e[i]*=t;return this},trim:function(t,e){for(var i=this.times,n=i.length,r=0,a=n-1;r!==n&&i[r]<t;)++r;for(;-1!==a&&i[a]>e;)--a;return++a,(0!==r||a!==n)&&(r>=a&&(r=(a=Math.max(a,1))-1),t=this.getValueSize(),this.times=oD.arraySlice(i,r,a),this.values=oD.arraySlice(this.values,r*t,a*t)),this},validate:function(){var t=!0,e=this.getValueSize();0!=e-Math.floor(e)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var i=this.times;e=this.values;var n=i.length;0===n&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var r=null,a=0;a!==n;a++){var o=i[a];if("number"==typeof o&&isNaN(o)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,o),t=!1;break}if(null!==r&&r>o){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,o,r),t=!1;break}r=o}if(void 0!==e&&oD.isTypedArray(e)){for(a=0,i=e.length;a!==i;++a)if(isNaN(n=e[a])){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,n),t=!1;break}}return t},optimize:function(){for(var t=this.times,e=this.values,i=this.getValueSize(),n=2302===this.getInterpolation(),r=1,a=t.length-1,o=1;o<a;++o){var s=!1,c=t[o];if(c!==t[o+1]&&(1!==o||c!==c[0])){if(n)s=!0;else{var h=o*i,l=h-i,u=h+i;for(c=0;c!==i;++c){var p=e[h+c];if(p!==e[l+c]||p!==e[u+c]){s=!0;break}}}}if(s){if(o!==r)for(t[r]=t[o],s=o*i,h=r*i,c=0;c!==i;++c)e[h+c]=e[s+c];++r}}if(0<a){for(c=0,t[r]=t[a],s=a*i,h=r*i;c!==i;++c)e[h+c]=e[s+c];++r}return r!==t.length&&(this.times=oD.arraySlice(t,0,r),this.values=oD.arraySlice(e,0,r*i)),this},clone:function(){var t=oD.arraySlice(this.times,0),e=oD.arraySlice(this.values,0);return(t=new this.constructor(this.name,t,e)).createInterpolant=this.createInterpolant,t}}),iU.prototype=Object.assign(Object.create(iG.prototype),{constructor:iU,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),iF.prototype=Object.assign(Object.create(iG.prototype),{constructor:iF,ValueTypeName:"color"}),i3.prototype=Object.assign(Object.create(iG.prototype),{constructor:i3,ValueTypeName:"number"}),iH.prototype=Object.assign(Object.create(iB.prototype),{constructor:iH,interpolate_:function(t,e,i,r){var a=this.resultBuffer,o=this.sampleValues,s=this.valueSize;for(t*=s,e=(i-e)/(r-e),i=t+s;t!==i;t+=4)n.slerpFlat(a,0,o,t-s,o,t,e);return a}}),iO.prototype=Object.assign(Object.create(iG.prototype),{constructor:iO,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(t){return new iH(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),iV.prototype=Object.assign(Object.create(iG.prototype),{constructor:iV,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),i4.prototype=Object.assign(Object.create(iG.prototype),{constructor:i4,ValueTypeName:"vector"}),Object.assign(ik,{parse:function(t){for(var e=[],i=t.tracks,n=1/(t.fps||1),r=0,a=i.length;r!==a;++r)e.push(iW(i[r]).scale(n));return new ik(t.name,t.duration,e)},toJSON:function(t){var e=[],i=t.tracks;t={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid};for(var n=0,r=i.length;n!==r;++n)e.push(iG.toJSON(i[n]));return t},CreateFromMorphTargetSequence:function(t,e,i,n){for(var r=e.length,a=[],o=0;o<r;o++){var s=[],c=[];s.push((o+r-1)%r,o,(o+1)%r),c.push(0,1,0);var h=oD.getKeyframeOrder(s);s=oD.sortedArray(s,1,h),c=oD.sortedArray(c,1,h),n||0!==s[0]||(s.push(r),c.push(c[0])),a.push(new i3(".morphTargetInfluences["+e[o].name+"]",s,c).scale(1/i))}return new ik(t,-1,a)},findByName:function(t,e){var i=t;for(Array.isArray(t)||(i=t.geometry&&t.geometry.animations||t.animations),t=0;t<i.length;t++)if(i[t].name===e)return i[t];return null},CreateClipsFromMorphTargetSequences:function(t,e,i){for(var n={},r=/^([\w-]*?)([\d]+)$/,a=0,o=t.length;a<o;a++){var s=t[a],c=s.name.match(r);if(c&&1<c.length){var h=c[1];(c=n[h])||(n[h]=c=[]),c.push(s)}}for(h in t=[],n)t.push(ik.CreateFromMorphTargetSequence(h,n[h],e,i));return t},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;var i=function(t,e,i,n,r){if(0!==i.length){var a=[],o=[];oD.flattenJSON(i,a,o,n),0!==a.length&&r.push(new t(e,a,o))}},n=[],r=t.name||"default",a=t.length||-1,o=t.fps||30;t=t.hierarchy||[];for(var s=0;s<t.length;s++){var c=t[s].keys;if(c&&0!==c.length){if(c[0].morphTargets){a={};for(var h=0;h<c.length;h++)if(c[h].morphTargets)for(var l=0;l<c[h].morphTargets.length;l++)a[c[h].morphTargets[l]]=-1;for(var u in a){var p=[],d=[];for(l=0;l!==c[h].morphTargets.length;++l){var f=c[h];p.push(f.time),d.push(f.morphTarget===u?1:0)}n.push(new i3(".morphTargetInfluence["+u+"]",p,d))}a=a.length*(o||1)}else i(i4,(h=".bones["+e[s].name+"]")+".position",c,"pos",n),i(iO,h+".quaternion",c,"rot",n),i(i4,h+".scale",c,"scl",n)}}return 0===n.length?null:new ik(r,a,n)}}),Object.assign(ik.prototype,{resetDuration:function(){for(var t=0,e=0,i=this.tracks.length;e!==i;++e){var n=this.tracks[e];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new ik(this.name,this.duration,t)}});var oB={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},oz=new i5,oN={};Object.assign(i6.prototype,{load:function(t,e,i,n){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,a=oB.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout(function(){e&&e(a),r.manager.itemEnd(t)},0),a;if(void 0!==oN[t])oN[t].push({onLoad:e,onProgress:i,onError:n});else{var o=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(o){i=o[1];var s=!!o[2];o=decodeURIComponent(o=o[3]),s&&(o=atob(o));try{var c=(this.responseType||"").toLowerCase();switch(c){case"arraybuffer":case"blob":var h=new Uint8Array(o.length);for(s=0;s<o.length;s++)h[s]=o.charCodeAt(s);var l="blob"===c?new Blob([h.buffer],{type:i}):h.buffer;break;case"document":l=(new DOMParser).parseFromString(o,i);break;case"json":l=JSON.parse(o);break;default:l=o}setTimeout(function(){e&&e(l),r.manager.itemEnd(t)},0)}catch(u){setTimeout(function(){n&&n(u),r.manager.itemError(t),r.manager.itemEnd(t)},0)}}else{oN[t]=[],oN[t].push({onLoad:e,onProgress:i,onError:n});var p=new XMLHttpRequest;for(s in p.open("GET",t,!0),p.addEventListener("load",function(e){var i=this.response;oB.add(t,i);var n=oN[t];if(delete oN[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var a=0,o=n.length;a<o;a++){var s=n[a];s.onLoad&&s.onLoad(i)}}else{for(a=0,o=n.length;a<o;a++)(s=n[a]).onError&&s.onError(e);r.manager.itemError(t)}r.manager.itemEnd(t)},!1),p.addEventListener("progress",function(e){for(var i=oN[t],n=0,r=i.length;n<r;n++){var a=i[n];a.onProgress&&a.onProgress(e)}},!1),p.addEventListener("error",function(e){var i=oN[t];delete oN[t];for(var n=0,a=i.length;n<a;n++){var o=i[n];o.onError&&o.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)},!1),p.addEventListener("abort",function(e){var i=oN[t];delete oN[t];for(var n=0,a=i.length;n<a;n++){var o=i[n];o.onError&&o.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)},!1),void 0!==this.responseType&&(p.responseType=this.responseType),void 0!==this.withCredentials&&(p.withCredentials=this.withCredentials),p.overrideMimeType&&p.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)p.setRequestHeader(s,this.requestHeader[s]);p.send(null)}return r.manager.itemStart(t),p}},setPath:function(t){return this.path=t,this},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}}),Object.assign(i7.prototype,{load:function(t,e,i,n){var r=this,a=new i6(r.manager);a.setPath(r.path),a.load(t,function(t){e(r.parse(JSON.parse(t)))},i,n)},parse:function(t){for(var e=[],i=0;i<t.length;i++){var n=ik.parse(t[i]);e.push(n)}return e},setPath:function(t){return this.path=t,this}}),Object.assign(ij.prototype,{load:function(t,e,i,n){function r(r){c.load(t[r],function(t){t=a._parser(t,!0),o[r]={width:t.width,height:t.height,format:t.format,mipmaps:t.mipmaps},6===(h+=1)&&(1===t.mipmapCount&&(s.minFilter=1006),s.format=t.format,s.needsUpdate=!0,e&&e(s))},i,n)}var a=this,o=[],s=new e0;s.image=o;var c=new i6(this.manager);if(c.setPath(this.path),c.setResponseType("arraybuffer"),Array.isArray(t))for(var h=0,l=0,u=t.length;l<u;++l)r(l);else c.load(t,function(t){if((t=a._parser(t,!0)).isCubemap)for(var i=t.mipmaps.length/t.mipmapCount,n=0;n<i;n++){o[n]={mipmaps:[]};for(var r=0;r<t.mipmapCount;r++)o[n].mipmaps.push(t.mipmaps[n*t.mipmapCount+r]),o[n].format=t.format,o[n].width=t.width,o[n].height=t.height}else s.image.width=t.width,s.image.height=t.height,s.mipmaps=t.mipmaps;1===t.mipmapCount&&(s.minFilter=1006),s.format=t.format,s.needsUpdate=!0,e&&e(s)},i,n);return s},setPath:function(t){return this.path=t,this}}),Object.assign(iq.prototype,{load:function(t,e,i,n){var r=this,a=new u,o=new i6(this.manager);return o.setResponseType("arraybuffer"),o.setPath(this.path),o.load(t,function(t){(t=r._parser(t))&&(void 0!==t.image?a.image=t.image:void 0!==t.data&&(a.image.width=t.width,a.image.height=t.height,a.image.data=t.data),a.wrapS=void 0!==t.wrapS?t.wrapS:1001,a.wrapT=void 0!==t.wrapT?t.wrapT:1001,a.magFilter=void 0!==t.magFilter?t.magFilter:1006,a.minFilter=void 0!==t.minFilter?t.minFilter:1008,a.anisotropy=void 0!==t.anisotropy?t.anisotropy:1,void 0!==t.format&&(a.format=t.format),void 0!==t.type&&(a.type=t.type),void 0!==t.mipmaps&&(a.mipmaps=t.mipmaps),1===t.mipmapCount&&(a.minFilter=1006),a.needsUpdate=!0,e&&e(a,t))},i,n),a},setPath:function(t){return this.path=t,this}}),Object.assign(iX.prototype,{crossOrigin:"anonymous",load:function(t,e,i,n){function r(){c.removeEventListener("load",r,!1),c.removeEventListener("error",a,!1),oB.add(t,this),e&&e(this),o.manager.itemEnd(t)}function a(e){c.removeEventListener("load",r,!1),c.removeEventListener("error",a,!1),n&&n(e),o.manager.itemError(t),o.manager.itemEnd(t)}void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var o=this,s=oB.get(t);if(void 0!==s)return o.manager.itemStart(t),setTimeout(function(){e&&e(s),o.manager.itemEnd(t)},0),s;var c=document.createElementNS("http://www.w3.org/1999/xhtml","img");return c.addEventListener("load",r,!1),c.addEventListener("error",a,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(c.crossOrigin=this.crossOrigin),o.manager.itemStart(t),c.src=t,c},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(iY.prototype,{crossOrigin:"anonymous",load:function(t,e,i,n){function r(i){o.load(t[i],function(t){a.images[i]=t,6==++s&&(a.needsUpdate=!0,e&&e(a))},void 0,n)}var a=new ts,o=new iX(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var s=0;for(i=0;i<t.length;++i)r(i);return a},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(iZ.prototype,{crossOrigin:"anonymous",load:function(t,e,i,n){var r=new o,a=new iX(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,function(i){r.image=i,i=0<t.search(/\.jpe?g($|\?)/i)||0===t.search(/^data:image\/jpeg/),r.format=i?1022:1023,r.needsUpdate=!0,void 0!==e&&e(r)},i,n),r},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(iJ.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){return t=this.getUtoTmapping(t),this.getPoint(t,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,i=[],n=this.getPoint(0),r=0;for(i.push(0),e=1;e<=t;e++){var a=this.getPoint(e/t);r+=a.distanceTo(n),i.push(r),n=a}return this.cacheArcLengths=i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var i=this.getLengths(),n=i.length;e=e||t*i[n-1];for(var r,a=0,o=n-1;a<=o;)if(0>(r=i[t=Math.floor(a+(o-a)/2)]-e))a=t+1;else if(0<r)o=t-1;else{o=t;break}return i[t=o]===e?t/(n-1):(a=i[t],(t+(e-a)/(i[t+1]-a))/(n-1))},getTangent:function(t){var e=t-1e-4;return 0>e&&(e=0),1<(t+=1e-4)&&(t=1),e=this.getPoint(e),this.getPoint(t).clone().sub(e).normalize()},getTangentAt:function(t){return t=this.getUtoTmapping(t),this.getTangent(t)},computeFrenetFrames:function(t,e){var i,n=new r,a=[],o=[],s=[],c=new r,h=new g;for(i=0;i<=t;i++){var l=i/t;a[i]=this.getTangentAt(l),a[i].normalize()}o[0]=new r,s[0]=new r,i=Number.MAX_VALUE,l=Math.abs(a[0].x);var u=Math.abs(a[0].y),p=Math.abs(a[0].z);for(l<=i&&(i=l,n.set(1,0,0)),u<=i&&(i=u,n.set(0,1,0)),p<=i&&n.set(0,0,1),c.crossVectors(a[0],n).normalize(),o[0].crossVectors(a[0],c),s[0].crossVectors(a[0],o[0]),i=1;i<=t;i++)o[i]=o[i-1].clone(),s[i]=s[i-1].clone(),c.crossVectors(a[i-1],a[i]),c.length()>Number.EPSILON&&(c.normalize(),n=Math.acos(rS.clamp(a[i-1].dot(a[i]),-1,1)),o[i].applyMatrix4(h.makeRotationAxis(c,n))),s[i].crossVectors(a[i],o[i]);if(!0===e)for(n=Math.acos(rS.clamp(o[0].dot(o[t]),-1,1)),n/=t,0<a[0].dot(c.crossVectors(o[0],o[t]))&&(n=-n),i=1;i<=t;i++)o[i].applyMatrix4(h.makeRotationAxis(a[i],n*i)),s[i].crossVectors(a[i],o[i]);return{tangents:a,normals:o,binormals:s}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),iQ.prototype=Object.create(iJ.prototype),iQ.prototype.constructor=iQ,iQ.prototype.isEllipseCurve=!0,iQ.prototype.getPoint=function(t,e){e=e||new i;for(var n=2*Math.PI,r=this.aEndAngle-this.aStartAngle,a=Math.abs(r)<Number.EPSILON;0>r;)r+=n;for(;r>n;)r-=n;r<Number.EPSILON&&(r=a?0:n),!0!==this.aClockwise||a||(r=r===n?-n:r-n),n=this.aStartAngle+t*r,t=this.aX+this.xRadius*Math.cos(n);var o=this.aY+this.yRadius*Math.sin(n);return 0!==this.aRotation&&(n=Math.cos(this.aRotation),r=Math.sin(this.aRotation),a=t-this.aX,o-=this.aY,t=a*n-o*r+this.aX,o=a*r+o*n+this.aY),e.set(t,o)},iQ.prototype.copy=function(t){return iJ.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},iQ.prototype.toJSON=function(){var t=iJ.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},iQ.prototype.fromJSON=function(t){return iJ.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},iK.prototype=Object.create(iQ.prototype),iK.prototype.constructor=iK,iK.prototype.isArcCurve=!0;var o2=new r,oG=new i9,oU=new i9,oF=new i9;nt.prototype=Object.create(iJ.prototype),nt.prototype.constructor=nt,nt.prototype.isCatmullRomCurve3=!0,nt.prototype.getPoint=function(t,e){e=e||new r;var i=this.points,n=i.length,a=Math.floor(t*=n-(this.closed?0:1));if(t-=a,this.closed?a+=0<a?0:(Math.floor(Math.abs(a)/n)+1)*n:0===t&&a===n-1&&(a=n-2,t=1),this.closed||0<a)var o=i[(a-1)%n];else o2.subVectors(i[0],i[1]).add(i[0]),o=o2;var s=i[a%n],c=i[(a+1)%n];if(this.closed||a+2<n?i=i[(a+2)%n]:(o2.subVectors(i[n-1],i[n-2]).add(i[n-1]),i=o2),"centripetal"===this.curveType||"chordal"===this.curveType){var h="chordal"===this.curveType?.5:.25;n=Math.pow(o.distanceToSquared(s),h),a=Math.pow(s.distanceToSquared(c),h),h=Math.pow(c.distanceToSquared(i),h),1e-4>a&&(a=1),1e-4>n&&(n=a),1e-4>h&&(h=a),oG.initNonuniformCatmullRom(o.x,s.x,c.x,i.x,n,a,h),oU.initNonuniformCatmullRom(o.y,s.y,c.y,i.y,n,a,h),oF.initNonuniformCatmullRom(o.z,s.z,c.z,i.z,n,a,h)}else"catmullrom"===this.curveType&&(oG.initCatmullRom(o.x,s.x,c.x,i.x,this.tension),oU.initCatmullRom(o.y,s.y,c.y,i.y,this.tension),oF.initCatmullRom(o.z,s.z,c.z,i.z,this.tension));return e.set(oG.calc(t),oU.calc(t),oF.calc(t)),e},nt.prototype.copy=function(t){iJ.prototype.copy.call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++)this.points.push(t.points[e].clone());return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},nt.prototype.toJSON=function(){var t=iJ.prototype.toJSON.call(this);t.points=[];for(var e=0,i=this.points.length;e<i;e++)t.points.push(this.points[e].toArray());return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},nt.prototype.fromJSON=function(t){iJ.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++){var n=t.points[e];this.points.push((new r).fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},nr.prototype=Object.create(iJ.prototype),nr.prototype.constructor=nr,nr.prototype.isCubicBezierCurve=!0,nr.prototype.getPoint=function(t,e){e=e||new i;var n=this.v0,r=this.v1,a=this.v2,o=this.v3;return e.set(nn(t,n.x,r.x,a.x,o.x),nn(t,n.y,r.y,a.y,o.y)),e},nr.prototype.copy=function(t){return iJ.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},nr.prototype.toJSON=function(){var t=iJ.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},nr.prototype.fromJSON=function(t){return iJ.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},na.prototype=Object.create(iJ.prototype),na.prototype.constructor=na,na.prototype.isCubicBezierCurve3=!0,na.prototype.getPoint=function(t,e){e=e||new r;var i=this.v0,n=this.v1,a=this.v2,o=this.v3;return e.set(nn(t,i.x,n.x,a.x,o.x),nn(t,i.y,n.y,a.y,o.y),nn(t,i.z,n.z,a.z,o.z)),e},na.prototype.copy=function(t){return iJ.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},na.prototype.toJSON=function(){var t=iJ.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},na.prototype.fromJSON=function(t){return iJ.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},no.prototype=Object.create(iJ.prototype),no.prototype.constructor=no,no.prototype.isLineCurve=!0,no.prototype.getPoint=function(t,e){return e=e||new i,1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e},no.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},no.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},no.prototype.copy=function(t){return iJ.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},no.prototype.toJSON=function(){var t=iJ.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},no.prototype.fromJSON=function(t){return iJ.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},ns.prototype=Object.create(iJ.prototype),ns.prototype.constructor=ns,ns.prototype.isLineCurve3=!0,ns.prototype.getPoint=function(t,e){return e=e||new r,1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e},ns.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},ns.prototype.copy=function(t){return iJ.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},ns.prototype.toJSON=function(){var t=iJ.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},ns.prototype.fromJSON=function(t){return iJ.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},nc.prototype=Object.create(iJ.prototype),nc.prototype.constructor=nc,nc.prototype.isQuadraticBezierCurve=!0,nc.prototype.getPoint=function(t,e){e=e||new i;var n=this.v0,r=this.v1,a=this.v2;return e.set(ni(t,n.x,r.x,a.x),ni(t,n.y,r.y,a.y)),e},nc.prototype.copy=function(t){return iJ.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},nc.prototype.toJSON=function(){var t=iJ.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},nc.prototype.fromJSON=function(t){return iJ.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},nh.prototype=Object.create(iJ.prototype),nh.prototype.constructor=nh,nh.prototype.isQuadraticBezierCurve3=!0,nh.prototype.getPoint=function(t,e){e=e||new r;var i=this.v0,n=this.v1,a=this.v2;return e.set(ni(t,i.x,n.x,a.x),ni(t,i.y,n.y,a.y),ni(t,i.z,n.z,a.z)),e},nh.prototype.copy=function(t){return iJ.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},nh.prototype.toJSON=function(){var t=iJ.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},nh.prototype.fromJSON=function(t){return iJ.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},nl.prototype=Object.create(iJ.prototype),nl.prototype.constructor=nl,nl.prototype.isSplineCurve=!0,nl.prototype.getPoint=function(t,e){e=e||new i;var n=this.points,r=(n.length-1)*t;t=Math.floor(r),r-=t;var a=n[0===t?t:t-1],o=n[t],s=n[t>n.length-2?n.length-1:t+1];return n=n[t>n.length-3?n.length-1:t+2],e.set(ne(r,a.x,o.x,s.x,n.x),ne(r,a.y,o.y,s.y,n.y)),e},nl.prototype.copy=function(t){iJ.prototype.copy.call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++)this.points.push(t.points[e].clone());return this},nl.prototype.toJSON=function(){var t=iJ.prototype.toJSON.call(this);t.points=[];for(var e=0,i=this.points.length;e<i;e++)t.points.push(this.points[e].toArray());return t},nl.prototype.fromJSON=function(t){iJ.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push((new i).fromArray(r))}return this};var o3=Object.freeze({ArcCurve:iK,CatmullRomCurve3:nt,CubicBezierCurve:nr,CubicBezierCurve3:na,EllipseCurve:iQ,LineCurve:no,LineCurve3:ns,QuadraticBezierCurve:nc,QuadraticBezierCurve3:nh,SplineCurve:nl});nu.prototype=Object.assign(Object.create(iJ.prototype),{constructor:nu,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new no(e,t))},getPoint:function(t){var e=t*this.getLength(),i=this.getCurveLengths();for(t=0;t<i.length;){if(i[t]>=e)return e=i[t]-e,i=(t=this.curves[t]).getLength(),t.getPointAt(0===i?0:1-e/i);t++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,i=0,n=this.curves.length;i<n;i++)t.push(e+=this.curves[i].getLength());return this.cacheLengths=t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,i=[],n=0,r=this.curves;n<r.length;n++){var a=r[n];a=a.getPoints(a&&a.isEllipseCurve?2*t:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?t*a.points.length:t);for(var o=0;o<a.length;o++){var s=a[o];e&&e.equals(s)||(i.push(s),e=s)}}return this.autoClose&&1<i.length&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i},copy:function(t){iJ.prototype.copy.call(this,t),this.curves=[];for(var e=0,i=t.curves.length;e<i;e++)this.curves.push(t.curves[e].clone());return this.autoClose=t.autoClose,this},toJSON:function(){var t=iJ.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,i=this.curves.length;e<i;e++)t.curves.push(this.curves[e].toJSON());return t},fromJSON:function(t){iJ.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,i=t.curves.length;e<i;e++){var n=t.curves[e];this.curves.push((new o3[n.type]).fromJSON(n))}return this}}),np.prototype=Object.assign(Object.create(nu.prototype),{constructor:np,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,i=t.length;e<i;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.currentPoint.set(t,e)},lineTo:function(t,e){var n=new no(this.currentPoint.clone(),new i(t,e));this.curves.push(n),this.currentPoint.set(t,e)},quadraticCurveTo:function(t,e,n,r){t=new nc(this.currentPoint.clone(),new i(t,e),new i(n,r)),this.curves.push(t),this.currentPoint.set(n,r)},bezierCurveTo:function(t,e,n,r,a,o){t=new nr(this.currentPoint.clone(),new i(t,e),new i(n,r),new i(a,o)),this.curves.push(t),this.currentPoint.set(a,o)},splineThru:function(t){var e=[this.currentPoint.clone()].concat(t);e=new nl(e),this.curves.push(e),this.currentPoint.copy(t[t.length-1])},arc:function(t,e,i,n,r,a){this.absarc(t+this.currentPoint.x,e+this.currentPoint.y,i,n,r,a)},absarc:function(t,e,i,n,r,a){this.absellipse(t,e,i,i,n,r,a)},ellipse:function(t,e,i,n,r,a,o,s){this.absellipse(t+this.currentPoint.x,e+this.currentPoint.y,i,n,r,a,o,s)},absellipse:function(t,e,i,n,r,a,o,s){t=new iQ(t,e,i,n,r,a,o,s),0<this.curves.length&&((e=t.getPoint(0)).equals(this.currentPoint)||this.lineTo(e.x,e.y)),this.curves.push(t),t=t.getPoint(1),this.currentPoint.copy(t)},copy:function(t){return nu.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=nu.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return nu.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),nd.prototype=Object.assign(Object.create(np.prototype),{constructor:nd,getPointsHoles:function(t){for(var e=[],i=0,n=this.holes.length;i<n;i++)e[i]=this.holes[i].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){np.prototype.copy.call(this,t),this.holes=[];for(var e=0,i=t.holes.length;e<i;e++)this.holes.push(t.holes[e].clone());return this},toJSON:function(){var t=np.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,i=this.holes.length;e<i;e++)t.holes.push(this.holes[e].toJSON());return t},fromJSON:function(t){np.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,i=t.holes.length;e<i;e++){var n=t.holes[e];this.holes.push((new np).fromJSON(n))}return this}}),nf.prototype=Object.assign(Object.create(M.prototype),{constructor:nf,isLight:!0,copy:function(t){return M.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){return(t=M.prototype.toJSON.call(this,t)).object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),nm.prototype=Object.assign(Object.create(nf.prototype),{constructor:nm,isHemisphereLight:!0,copy:function(t){return nf.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(ng.prototype,{copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),nv.prototype=Object.assign(Object.create(ng.prototype),{constructor:nv,isSpotLightShadow:!0,update:function(t){var e=this.camera,i=2*rS.RAD2DEG*t.angle,n=this.mapSize.width/this.mapSize.height;t=t.distance||e.far,(i!==e.fov||n!==e.aspect||t!==e.far)&&(e.fov=i,e.aspect=n,e.far=t,e.updateProjectionMatrix())}}),ny.prototype=Object.assign(Object.create(nf.prototype),{constructor:ny,isSpotLight:!0,copy:function(t){return nf.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),n$.prototype=Object.assign(Object.create(nf.prototype),{constructor:n$,isPointLight:!0,copy:function(t){return nf.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),nx.prototype=Object.assign(Object.create(ea.prototype),{constructor:nx,isOrthographicCamera:!0,copy:function(t,e){return ea.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,i,n,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2,r=i-t;if(i+=t,t=n+e,e=n-e,null!==this.view&&this.view.enabled){i=this.zoom/(this.view.width/this.view.fullWidth),e=this.zoom/(this.view.height/this.view.fullHeight);var a=(this.right-this.left)/this.view.width;n=(this.top-this.bottom)/this.view.height,r+=this.view.offsetX/i*a,i=r+this.view.width/i*a,t-=this.view.offsetY/e*n,e=t-this.view.height/e*n}this.projectionMatrix.makeOrthographic(r,i,t,e,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){return(t=M.prototype.toJSON.call(this,t)).object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),n_.prototype=Object.assign(Object.create(ng.prototype),{constructor:n_}),nw.prototype=Object.assign(Object.create(nf.prototype),{constructor:nw,isDirectionalLight:!0,copy:function(t){return nf.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),nb.prototype=Object.assign(Object.create(nf.prototype),{constructor:nb,isAmbientLight:!0}),n8.prototype=Object.assign(Object.create(nf.prototype),{constructor:n8,isRectAreaLight:!0,copy:function(t){return nf.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){return(t=nf.prototype.toJSON.call(this,t)).object.width=this.width,t.object.height=this.height,t}}),Object.assign(nE.prototype,{load:function(t,e,i,n){var r=this,a=new i6(r.manager);a.setPath(r.path),a.load(t,function(t){e(r.parse(JSON.parse(t)))},i,n)},parse:function(t){function e(t){return void 0===n[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),n[t]}var n=this.textures,o=new oI[t.type];if(void 0!==t.uuid&&(o.uuid=t.uuid),void 0!==t.name&&(o.name=t.name),void 0!==t.color&&o.color.setHex(t.color),void 0!==t.roughness&&(o.roughness=t.roughness),void 0!==t.metalness&&(o.metalness=t.metalness),void 0!==t.emissive&&o.emissive.setHex(t.emissive),void 0!==t.specular&&o.specular.setHex(t.specular),void 0!==t.shininess&&(o.shininess=t.shininess),void 0!==t.clearCoat&&(o.clearCoat=t.clearCoat),void 0!==t.clearCoatRoughness&&(o.clearCoatRoughness=t.clearCoatRoughness),void 0!==t.vertexColors&&(o.vertexColors=t.vertexColors),void 0!==t.fog&&(o.fog=t.fog),void 0!==t.flatShading&&(o.flatShading=t.flatShading),void 0!==t.blending&&(o.blending=t.blending),void 0!==t.combine&&(o.combine=t.combine),void 0!==t.side&&(o.side=t.side),void 0!==t.opacity&&(o.opacity=t.opacity),void 0!==t.transparent&&(o.transparent=t.transparent),void 0!==t.alphaTest&&(o.alphaTest=t.alphaTest),void 0!==t.depthTest&&(o.depthTest=t.depthTest),void 0!==t.depthWrite&&(o.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(o.colorWrite=t.colorWrite),void 0!==t.wireframe&&(o.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(o.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(o.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(o.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(o.rotation=t.rotation),1!==t.linewidth&&(o.linewidth=t.linewidth),void 0!==t.dashSize&&(o.dashSize=t.dashSize),void 0!==t.gapSize&&(o.gapSize=t.gapSize),void 0!==t.scale&&(o.scale=t.scale),void 0!==t.polygonOffset&&(o.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(o.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(o.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(o.skinning=t.skinning),void 0!==t.morphTargets&&(o.morphTargets=t.morphTargets),void 0!==t.dithering&&(o.dithering=t.dithering),void 0!==t.visible&&(o.visible=t.visible),void 0!==t.userData&&(o.userData=t.userData),void 0!==t.uniforms)for(var c in t.uniforms){var h=t.uniforms[c];switch(o.uniforms[c]={},h.type){case"t":o.uniforms[c].value=e(h.value);break;case"c":o.uniforms[c].value=(new $).setHex(h.value);break;case"v2":o.uniforms[c].value=(new i).fromArray(h.value);break;case"v3":o.uniforms[c].value=(new r).fromArray(h.value);break;case"v4":o.uniforms[c].value=(new s).fromArray(h.value);break;case"m3":o.uniforms[c].value=(new a).fromArray(h.value);case"m4":o.uniforms[c].value=(new g).fromArray(h.value);break;default:o.uniforms[c].value=h.value}}if(void 0!==t.defines&&(o.defines=t.defines),void 0!==t.vertexShader&&(o.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(o.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(var l in t.extensions)o.extensions[l]=t.extensions[l];return void 0!==t.shading&&(o.flatShading=1===t.shading),void 0!==t.size&&(o.size=t.size),void 0!==t.sizeAttenuation&&(o.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(o.map=e(t.map)),void 0!==t.matcap&&(o.matcap=e(t.matcap)),void 0!==t.alphaMap&&(o.alphaMap=e(t.alphaMap),o.transparent=!0),void 0!==t.bumpMap&&(o.bumpMap=e(t.bumpMap)),void 0!==t.bumpScale&&(o.bumpScale=t.bumpScale),void 0!==t.normalMap&&(o.normalMap=e(t.normalMap)),void 0!==t.normalMapType&&(o.normalMapType=t.normalMapType),void 0!==t.normalScale&&(!1===Array.isArray(c=t.normalScale)&&(c=[c,c]),o.normalScale=(new i).fromArray(c)),void 0!==t.displacementMap&&(o.displacementMap=e(t.displacementMap)),void 0!==t.displacementScale&&(o.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(o.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(o.roughnessMap=e(t.roughnessMap)),void 0!==t.metalnessMap&&(o.metalnessMap=e(t.metalnessMap)),void 0!==t.emissiveMap&&(o.emissiveMap=e(t.emissiveMap)),void 0!==t.emissiveIntensity&&(o.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(o.specularMap=e(t.specularMap)),void 0!==t.envMap&&(o.envMap=e(t.envMap)),void 0!==t.envMapIntensity&&(o.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(o.reflectivity=t.reflectivity),void 0!==t.lightMap&&(o.lightMap=e(t.lightMap)),void 0!==t.lightMapIntensity&&(o.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(o.aoMap=e(t.aoMap)),void 0!==t.aoMapIntensity&&(o.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(o.gradientMap=e(t.gradientMap)),o},setPath:function(t){return this.path=t,this},setTextures:function(t){return this.textures=t,this}});var oH={decodeText:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",i=0,n=t.length;i<n;i++)e+=String.fromCharCode(t[i]);return decodeURIComponent(escape(e))},extractUrlBase:function(t){var e=t.lastIndexOf("/");return -1===e?"./":t.substr(0,e+1)}};Object.assign(nM.prototype,{load:function(t,e,i,n){var r=this,a=new i6(r.manager);a.setPath(r.path),a.load(t,function(t){e(r.parse(JSON.parse(t)))},i,n)},parse:function(t){var e=new U,i=t.data.index;if(void 0!==i){var n=new oO[i.type](i.array);e.setIndex(new T(n,1))}for(var a in i=t.data.attributes){var o=i[a];n=new oO[o.type](o.array),n=new T(n,o.itemSize,o.normalized),void 0!==o.name&&(n.name=o.name),e.addAttribute(a,n)}var s=t.data.morphAttributes;if(s)for(a in s){var c=s[a],h=[];i=0;for(var l=c.length;i<l;i++)n=new oO[(o=c[i]).type](o.array),n=new T(n,o.itemSize,o.normalized),void 0!==o.name&&(n.name=o.name),h.push(n);e.morphAttributes[a]=h}if(void 0!==(a=t.data.groups||t.data.drawcalls||t.data.offsets))for(i=0,o=a.length;i!==o;++i)n=a[i],e.addGroup(n.start,n.count,n.materialIndex);return void 0!==(i=t.data.boundingSphere)&&(a=new r,void 0!==i.center&&a.fromArray(i.center),e.boundingSphere=new d(a,i.radius)),t.name&&(e.name=t.name),t.userData&&(e.userData=t.userData),e},setPath:function(t){return this.path=t,this}});var oO={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};Object.assign(nS.prototype,{crossOrigin:"anonymous",load:function(t,e,i,n){var r=this,a=void 0===this.path?oH.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||a,(a=new i6(r.manager)).setPath(this.path),a.load(t,function(i){var a=null;try{a=JSON.parse(i)}catch(o){void 0!==n&&n(o),console.error("THREE:ObjectLoader: Can't parse "+t+".",o.message);return}void 0===(i=a.metadata)||void 0===i.type||"geometry"===i.type.toLowerCase()?console.error("THREE.ObjectLoader: Can't load "+t):r.parse(a,e)},i,n)},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setCrossOrigin:function(t){return this.crossOrigin=t,this},parse:function(t,e){var i=this.parseShape(t.shapes);i=this.parseGeometries(t.geometries,i);var n=this.parseImages(t.images,function(){void 0!==e&&e(r)});n=this.parseTextures(t.textures,n),n=this.parseMaterials(t.materials,n);var r=this.parseObject(t.object,i,n);return t.animations&&(r.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0===e||e(r),r},parseShape:function(t){var e={};if(void 0!==t)for(var i=0,n=t.length;i<n;i++){var r=(new nd).fromJSON(t[i]);e[r.uuid]=r}return e},parseGeometries:function(t,e){var i={};if(void 0!==t)for(var n=new nM,r=0,a=t.length;r<a;r++){var o=t[r];switch(o.type){case"PlaneGeometry":case"PlaneBufferGeometry":var s=new oC[o.type](o.width,o.height,o.widthSegments,o.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new oC[o.type](o.width,o.height,o.depth,o.widthSegments,o.heightSegments,o.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new oC[o.type](o.radius,o.segments,o.thetaStart,o.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new oC[o.type](o.radiusTop,o.radiusBottom,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new oC[o.type](o.radius,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new oC[o.type](o.radius,o.widthSegments,o.heightSegments,o.phiStart,o.phiLength,o.thetaStart,o.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new oC[o.type](o.radius,o.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new oC[o.type](o.innerRadius,o.outerRadius,o.thetaSegments,o.phiSegments,o.thetaStart,o.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new oC[o.type](o.radius,o.tube,o.radialSegments,o.tubularSegments,o.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new oC[o.type](o.radius,o.tube,o.tubularSegments,o.radialSegments,o.p,o.q);break;case"TubeGeometry":case"TubeBufferGeometry":s=new oC[o.type]((new o3[o.path.type]).fromJSON(o.path),o.tubularSegments,o.radius,o.radialSegments,o.closed);break;case"LatheGeometry":case"LatheBufferGeometry":s=new oC[o.type](o.points,o.segments,o.phiStart,o.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new oC[o.type](o.vertices,o.indices,o.radius,o.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":s=[];for(var c=0,h=o.shapes.length;c<h;c++){var l=e[o.shapes[c]];s.push(l)}s=new oC[o.type](s,o.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(s=[],c=0,h=o.shapes.length;c<h;c++)l=e[o.shapes[c]],s.push(l);void 0!==(c=o.options.extrudePath)&&(o.options.extrudePath=(new o3[c.type]).fromJSON(c)),s=new oC[o.type](s,o.options);break;case"BufferGeometry":s=n.parse(o);break;case"Geometry":"THREE"in window&&"LegacyJSONLoader"in THREE?s=(new THREE.LegacyJSONLoader).parse(o,this.resourcePath).geometry:console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+o.type+'"');continue}s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),!0===s.isBufferGeometry&&void 0!==o.userData&&(s.userData=o.userData),i[o.uuid]=s}return i},parseMaterials:function(t,e){var i={},n={};if(void 0!==t){var r=new nE;r.setTextures(e),e=0;for(var a=t.length;e<a;e++){var o=t[e];if("MultiMaterial"===o.type){for(var s=[],c=0;c<o.materials.length;c++){var h=o.materials[c];void 0===i[h.uuid]&&(i[h.uuid]=r.parse(h)),s.push(i[h.uuid])}n[o.uuid]=s}else void 0===i[o.uuid]&&(i[o.uuid]=r.parse(o)),n[o.uuid]=i[o.uuid]}}return n},parseAnimations:function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i],r=ik.parse(n);void 0!==n.uuid&&(r.uuid=n.uuid),e.push(r)}return e},parseImages:function(t,e){function i(t){return n.manager.itemStart(t),a.load(t,function(){n.manager.itemEnd(t)},void 0,function(){n.manager.itemError(t),n.manager.itemEnd(t)})}var n=this,r={};if(void 0!==t&&0<t.length){e=new i5(e);var a=new iX(e);a.setCrossOrigin(this.crossOrigin),e=0;for(var o=t.length;e<o;e++){var s=t[e],c=s.url;if(Array.isArray(c)){r[s.uuid]=[];for(var h=0,l=c.length;h<l;h++){var u=c[h];u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:n.resourcePath+u,r[s.uuid].push(i(u))}}else u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(s.url)?s.url:n.resourcePath+s.url,r[s.uuid]=i(u)}}return r},parseTextures:function(t,e){function i(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var n={};if(void 0!==t)for(var r=0,a=t.length;r<a;r++){var s=t[r];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===e[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);var c=Array.isArray(e[s.image])?new ts(e[s.image]):new o(e[s.image]);c.needsUpdate=!0,c.uuid=s.uuid,void 0!==s.name&&(c.name=s.name),void 0!==s.mapping&&(c.mapping=i(s.mapping,o5)),void 0!==s.offset&&c.offset.fromArray(s.offset),void 0!==s.repeat&&c.repeat.fromArray(s.repeat),void 0!==s.center&&c.center.fromArray(s.center),void 0!==s.rotation&&(c.rotation=s.rotation),void 0!==s.wrap&&(c.wrapS=i(s.wrap[0],o6),c.wrapT=i(s.wrap[1],o6)),void 0!==s.format&&(c.format=s.format),void 0!==s.type&&(c.type=s.type),void 0!==s.encoding&&(c.encoding=s.encoding),void 0!==s.minFilter&&(c.minFilter=i(s.minFilter,o7)),void 0!==s.magFilter&&(c.magFilter=i(s.magFilter,o7)),void 0!==s.anisotropy&&(c.anisotropy=s.anisotropy),void 0!==s.flipY&&(c.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(c.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(c.unpackAlignment=s.unpackAlignment),n[s.uuid]=c}return n},parseObject:function(t,e,i){function n(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function r(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],n=0,r=t.length;n<r;n++){var a=t[n];void 0===i[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),e.push(i[a])}return e}return void 0===i[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),i[t]}}switch(t.type){case"Scene":var a=new ef;void 0!==t.background&&Number.isInteger(t.background)&&(a.background=new $(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?a.fog=new ed(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(a.fog=new ep(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":a=new eo(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(a.focus=t.focus),void 0!==t.zoom&&(a.zoom=t.zoom),void 0!==t.filmGauge&&(a.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(a.filmOffset=t.filmOffset),void 0!==t.view&&(a.view=Object.assign({},t.view));break;case"OrthographicCamera":a=new nx(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(a.zoom=t.zoom),void 0!==t.view&&(a.view=Object.assign({},t.view));break;case"AmbientLight":a=new nb(t.color,t.intensity);break;case"DirectionalLight":a=new nw(t.color,t.intensity);break;case"PointLight":a=new n$(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":a=new n8(t.color,t.intensity,t.width,t.height);break;case"SpotLight":a=new ny(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":a=new nm(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":a=n(t.geometry);var o=r(t.material);a=a.bones&&0<a.bones.length?new ex(a,o):new Y(a,o),void 0!==t.drawMode&&a.setDrawMode(t.drawMode);break;case"LOD":a=new e$;break;case"Line":a=new e8(n(t.geometry),r(t.material),t.mode);break;case"LineLoop":a=new eM(n(t.geometry),r(t.material));break;case"LineSegments":a=new eE(n(t.geometry),r(t.material));break;case"PointCloud":case"Points":a=new eT(n(t.geometry),r(t.material));break;case"Sprite":a=new ey(r(t.material));break;case"Group":a=new er;break;default:a=new M}if(a.uuid=t.uuid,void 0!==t.name&&(a.name=t.name),void 0!==t.matrix?(a.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(a.matrixAutoUpdate=t.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==t.position&&a.position.fromArray(t.position),void 0!==t.rotation&&a.rotation.fromArray(t.rotation),void 0!==t.quaternion&&a.quaternion.fromArray(t.quaternion),void 0!==t.scale&&a.scale.fromArray(t.scale)),void 0!==t.castShadow&&(a.castShadow=t.castShadow),void 0!==t.receiveShadow&&(a.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(a.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(a.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&a.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(a.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(a.visible=t.visible),void 0!==t.frustumCulled&&(a.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(a.renderOrder=t.renderOrder),void 0!==t.userData&&(a.userData=t.userData),void 0!==t.layers&&(a.layers.mask=t.layers),void 0!==t.children){o=t.children;for(var s=0;s<o.length;s++)a.add(this.parseObject(o[s],e,i))}if("LOD"===t.type)for(t=t.levels,o=0;o<t.length;o++){s=t[o];var c=a.getObjectByProperty("uuid",s.object);void 0!==c&&a.addLevel(c,s.distance)}return a}});var oV,o4,ok,oW,o5={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},o6={RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},o7={NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008};nT.prototype={constructor:nT,setOptions:function(t){return this.options=t,this},load:function(t,e,i,n){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,a=oB.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout(function(){e&&e(a),r.manager.itemEnd(t)},0),a;fetch(t).then(function(t){return t.blob()}).then(function(t){return void 0===r.options?createImageBitmap(t):createImageBitmap(t,r.options)}).then(function(i){oB.add(t,i),e&&e(i),r.manager.itemEnd(t)}).catch(function(e){n&&n(e),r.manager.itemError(t),r.manager.itemEnd(t)}),r.manager.itemStart(t)},setCrossOrigin:function(){return this},setPath:function(t){return this.path=t,this}},Object.assign(n1.prototype,{moveTo:function(t,e){this.currentPath=new np,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e)},lineTo:function(t,e){this.currentPath.lineTo(t,e)},quadraticCurveTo:function(t,e,i,n){this.currentPath.quadraticCurveTo(t,e,i,n)},bezierCurveTo:function(t,e,i,n,r,a){this.currentPath.bezierCurveTo(t,e,i,n,r,a)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(t,e){function i(t){for(var e=[],i=0,n=t.length;i<n;i++){var r=t[i],a=new nd;a.curves=r.curves,e.push(a)}return e}function n(t,e){for(var i=e.length,n=!1,r=i-1,a=0;a<i;r=a++){var o=e[r],s=e[a],c=s.x-o.x,h=s.y-o.y;if(Math.abs(h)>Number.EPSILON){if(0>h&&(o=e[a],c=-c,s=e[r],h=-h),!(t.y<o.y||t.y>s.y)){if(t.y===o.y){if(t.x===o.x)return!0}else{if(0==(r=h*(t.x-o.x)-c*(t.y-o.y)))return!0;0>r||(n=!n)}}}else if(t.y===o.y&&(s.x<=t.x&&t.x<=o.x||o.x<=t.x&&t.x<=s.x))return!0}return n}var r=oP.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===e)return i(a);if(e=[],1===a.length){var o=a[0],s=new nd;return s.curves=o.curves,e.push(s),e}var c=!r(a[0].getPoints());c=t?!c:c,s=[];var h=[],l=[],u=0;h[u]=void 0,l[u]=[];for(var p=0,d=a.length;p<d;p++){var f=(o=a[p]).getPoints(),m=r(f);(m=t?!m:m)?(!c&&h[u]&&u++,h[u]={s:new nd,p:f},h[u].s.curves=o.curves,c&&u++,l[u]=[]):l[u].push({h:o,p:f[0]})}if(!h[0])return i(a);if(1<h.length){for(p=!1,t=[],r=0,a=h.length;r<a;r++)s[r]=[];for(r=0,a=h.length;r<a;r++)for(o=l[r],m=0;m<o.length;m++){for(f=0,c=o[m],u=!0;f<h.length;f++)n(c.p,h[f].p)&&(r!==f&&t.push({froms:r,tos:f,hole:m}),u?(u=!1,s[f].push(c)):p=!0);u&&s[r].push(c)}0<t.length&&(p||(l=s))}for(p=0,r=h.length;p<r;p++)for(s=h[p].s,e.push(s),t=l[p],a=0,o=t.length;a<o;a++)s.holes.push(t[a].h);return e}}),Object.assign(n0.prototype,{isFont:!0,generateShapes:function(t,e){void 0===e&&(e=100);var i=[],n=e;e=this.data;var r=Array.from?Array.from(t):String(t).split("");n/=e.resolution;var a=(e.boundingBox.yMax-e.boundingBox.yMin+e.underlineThickness)*n;t=[];for(var o=0,s=0,c=0;c<r.length;c++){var h=r[c];if("\n"===h)o=0,s-=a;else{var l=n,u=o,p=s;if(h=e.glyphs[h]||e.glyphs["?"]){var d=new n1;if(h.o)for(var f=h._cachedOutline||(h._cachedOutline=h.o.split(" ")),m=0,g=f.length;m<g;)switch(f[m++]){case"m":var v=f[m++]*l+u,y=f[m++]*l+p;d.moveTo(v,y);break;case"l":v=f[m++]*l+u,y=f[m++]*l+p,d.lineTo(v,y);break;case"q":var $=f[m++]*l+u,x=f[m++]*l+p,_=f[m++]*l+u,w=f[m++]*l+p;d.quadraticCurveTo(_,w,$,x);break;case"b":$=f[m++]*l+u,x=f[m++]*l+p,_=f[m++]*l+u,w=f[m++]*l+p,v=f[m++]*l+u,y=f[m++]*l+p,d.bezierCurveTo(_,w,v,y,$,x)}l={offsetX:h.ha*l,path:d}}else l=void 0;o+=l.offsetX,t.push(l.path)}}for(e=0,r=t.length;e<r;e++)Array.prototype.push.apply(i,t[e].toShapes());return i}}),Object.assign(nL.prototype,{load:function(t,e,i,n){var r=this,a=new i6(this.manager);a.setPath(this.path),a.load(t,function(t){try{var i=JSON.parse(t)}catch(n){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),i=JSON.parse(t.substring(65,t.length-2))}t=r.parse(i),e&&e(t)},i,n)},parse:function(t){return new n0(t)},setPath:function(t){return this.path=t,this}}),nA.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,i=0,n=e.length;i<n;i+=2){var r=e[i+1];if(e[i].test(t))return r}return null}},Object.assign(nA.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(t,e,i){for(var n=[],r=0;r<t.length;++r)n[r]=this.createMaterial(t[r],e,i);return n},createMaterial:(oV={NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5},o4=new $,ok=new iZ,oW=new nE,function(t,e,i){function n(t,n,r,o,s){t=e+t;var c=nA.Handlers.get(t);return null!==c?t=c.load(t):(ok.setCrossOrigin(i),t=ok.load(t)),void 0!==n&&(t.repeat.fromArray(n),1!==n[0]&&(t.wrapS=1e3),1!==n[1]&&(t.wrapT=1e3)),void 0!==r&&t.offset.fromArray(r),void 0!==o&&("repeat"===o[0]&&(t.wrapS=1e3),"mirror"===o[0]&&(t.wrapS=1002),"repeat"===o[1]&&(t.wrapT=1e3),"mirror"===o[1]&&(t.wrapT=1002)),void 0!==s&&(t.anisotropy=s),a[n=rS.generateUUID()]=t,n}var r,a={},o={uuid:rS.generateUUID(),type:"MeshLambertMaterial"};for(r in t){var s=t[r];switch(r){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"DbgName":o.name=s;break;case"blending":o.blending=oV[s];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",r,"is no longer supported.");break;case"colorDiffuse":o.color=o4.fromArray(s).getHex();break;case"colorSpecular":o.specular=o4.fromArray(s).getHex();break;case"colorEmissive":o.emissive=o4.fromArray(s).getHex();break;case"specularCoef":o.shininess=s;break;case"shading":"basic"===s.toLowerCase()&&(o.type="MeshBasicMaterial"),"phong"===s.toLowerCase()&&(o.type="MeshPhongMaterial"),"standard"===s.toLowerCase()&&(o.type="MeshStandardMaterial");break;case"mapDiffuse":o.map=n(s,t.mapDiffuseRepeat,t.mapDiffuseOffset,t.mapDiffuseWrap,t.mapDiffuseAnisotropy);break;case"mapEmissive":o.emissiveMap=n(s,t.mapEmissiveRepeat,t.mapEmissiveOffset,t.mapEmissiveWrap,t.mapEmissiveAnisotropy);break;case"mapLight":o.lightMap=n(s,t.mapLightRepeat,t.mapLightOffset,t.mapLightWrap,t.mapLightAnisotropy);break;case"mapAO":o.aoMap=n(s,t.mapAORepeat,t.mapAOOffset,t.mapAOWrap,t.mapAOAnisotropy);break;case"mapBump":o.bumpMap=n(s,t.mapBumpRepeat,t.mapBumpOffset,t.mapBumpWrap,t.mapBumpAnisotropy);break;case"mapBumpScale":o.bumpScale=s;break;case"mapNormal":o.normalMap=n(s,t.mapNormalRepeat,t.mapNormalOffset,t.mapNormalWrap,t.mapNormalAnisotropy);break;case"mapNormalFactor":o.normalScale=s;break;case"mapSpecular":o.specularMap=n(s,t.mapSpecularRepeat,t.mapSpecularOffset,t.mapSpecularWrap,t.mapSpecularAnisotropy);break;case"mapMetalness":o.metalnessMap=n(s,t.mapMetalnessRepeat,t.mapMetalnessOffset,t.mapMetalnessWrap,t.mapMetalnessAnisotropy);break;case"mapRoughness":o.roughnessMap=n(s,t.mapRoughnessRepeat,t.mapRoughnessOffset,t.mapRoughnessWrap,t.mapRoughnessAnisotropy);break;case"mapAlpha":o.alphaMap=n(s,t.mapAlphaRepeat,t.mapAlphaOffset,t.mapAlphaWrap,t.mapAlphaAnisotropy);break;case"flipSided":o.side=1;break;case"doubleSided":o.side=2;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),o.opacity=s;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":o[r]=s;break;case"vertexColors":!0===s&&(o.vertexColors=2),"face"===s&&(o.vertexColors=1);break;default:console.error("THREE.Loader.createMaterial: Unsupported",r,s)}}return"MeshBasicMaterial"===o.type&&delete o.emissive,"MeshPhongMaterial"!==o.type&&delete o.specular,1>o.opacity&&(o.transparent=!0),oW.setTextures(a),oW.parse(o)})});var oj,oq,oX,oY,oZ,oJ,oQ,oK,o9,st,se,si,sn,sr,sa,so,ss,sc,sh,sl,su,sp,sd,sf,sm,sg,sv,sy,s$,sx,s_,sw,sb,s8,sE,sM,sS,sT,s1,s0,sL,sA,sP,sR,sC,sI,sD,sB,sz,sN,s2,sG={getContext:function(){return void 0===oq&&(oq=new(window.AudioContext||window.webkitAudioContext)),oq},setContext:function(t){oq=t}};Object.assign(nP.prototype,{load:function(t,e,i,n){var r=new i6(this.manager);r.setResponseType("arraybuffer"),r.setPath(this.path),r.load(t,function(t){t=t.slice(0),sG.getContext().decodeAudioData(t,function(t){e(t)})},i,n)},setPath:function(t){return this.path=t,this}}),Object.assign(nR.prototype,{isSphericalHarmonics3:!0,set:function(t){for(var e=0;9>e;e++)this.coefficients[e].copy(t[e]);return this},zero:function(){for(var t=0;9>t;t++)this.coefficients[t].set(0,0,0);return this},getAt:function(t,e){var i=t.x,n=t.y;t=t.z;var r=this.coefficients;return e=.282095*r[0],e+=.488603*r[1]*n,e+=.488603*r[2]*t,e+=.488603*r[3]*i,e+=1.092548*r[4]*i*n,e+=1.092548*r[5]*n*t,e+=.315392*r[6]*(3*t*t-1),(e+=1.092548*r[7]*i*t)+.546274*r[8]*(i*i-n*n)},getIrradianceAt:function(t,e){var i=t.x,n=t.y;t=t.z;var r=this.coefficients;return e=.886227*r[0],e+=1.023328*r[1]*n,e+=1.023328*r[2]*t,e+=1.023328*r[3]*i,e+=.858086*r[4]*i*n,e+=.858086*r[5]*n*t,e+=r[6]*(.743125*t*t-.247708),(e+=.858086*r[7]*i*t)+.429043*r[8]*(i*i-n*n)},add:function(t){for(var e=0;9>e;e++)this.coefficients[e].add(t.coefficients[e]);return this},scale:function(t){for(var e=0;9>e;e++)this.coefficients[e].multiplyScalar(t);return this},lerp:function(t,e){for(var i=0;9>i;i++)this.coefficients[i].lerp(t.coefficients[i],e);return this},equals:function(t){for(var e=0;9>e;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0},copy:function(t){return this.set(t.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(t){for(var e=this.coefficients,i=0;9>i;i++)e[i].fromArray(t,3*i);return this},toArray:function(){for(var t=[],e=this.coefficients,i=0;9>i;i++)e[i].toArray(t,3*i);return t}}),Object.assign(nR,{getBasisAt:function(t,e){var i=t.x,n=t.y;t=t.z,e[0]=.282095,e[1]=.488603*n,e[2]=.488603*t,e[3]=.488603*i,e[4]=1.092548*i*n,e[5]=1.092548*n*t,e[6]=.315392*(3*t*t-1),e[7]=1.092548*i*t,e[8]=.546274*(i*i-n*n)}}),nC.prototype=Object.assign(Object.create(nf.prototype),{constructor:nC,isLightProbe:!0,copy:function(t){return nf.prototype.copy.call(this,t),this.sh.copy(t.sh),this.intensity=t.intensity,this},toJSON:function(t){return nf.prototype.toJSON.call(this,t)}}),nI.prototype=Object.assign(Object.create(nC.prototype),{constructor:nI,isHemisphereLightProbe:!0,copy:function(t){return nC.prototype.copy.call(this,t),this},toJSON:function(t){return nC.prototype.toJSON.call(this,t)}}),nD.prototype=Object.assign(Object.create(nC.prototype),{constructor:nD,isAmbientLightProbe:!0,copy:function(t){return nC.prototype.copy.call(this,t),this},toJSON:function(t){return nC.prototype.toJSON.call(this,t)}}),Object.assign(nB.prototype,{update:(se=new g,si=new g,function(t){if(oX!==this||oY!==t.focus||oZ!==t.fov||oJ!==t.aspect*this.aspect||oQ!==t.near||oK!==t.far||o9!==t.zoom||st!==this.eyeSep){oX=this,oY=t.focus,oZ=t.fov,oJ=t.aspect*this.aspect,oQ=t.near,oK=t.far,o9=t.zoom;var e=t.projectionMatrix.clone(),i=(st=this.eyeSep/2)*oQ/oY,n=oQ*Math.tan(rS.DEG2RAD*oZ*.5)/o9;si.elements[12]=-st,se.elements[12]=st;var r=-n*oJ+i,a=n*oJ+i;e.elements[0]=2*oQ/(a-r),e.elements[8]=(a+r)/(a-r),this.cameraL.projectionMatrix.copy(e),r=-n*oJ-i,a=n*oJ-i,e.elements[0]=2*oQ/(a-r),e.elements[8]=(a+r)/(a-r),this.cameraR.projectionMatrix.copy(e)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(si),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(se)})}),nz.prototype=Object.create(M.prototype),nz.prototype.constructor=nz,Object.assign(nN.prototype,{start:function(){this.oldTime=this.startTime=("undefined"==typeof performance?Date:performance).now(),this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.autoStart=this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"==typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}),n2.prototype=Object.assign(Object.create(M.prototype),{constructor:n2,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this},updateMatrixWorld:(sn=new r,sr=new n,sa=new r,so=new r,ss=new nN,function(t){M.prototype.updateMatrixWorld.call(this,t),t=this.context.listener;var e=this.up;if(this.timeDelta=ss.getDelta(),this.matrixWorld.decompose(sn,sr,sa),so.set(0,0,-1).applyQuaternion(sr),t.positionX){var i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(sn.x,i),t.positionY.linearRampToValueAtTime(sn.y,i),t.positionZ.linearRampToValueAtTime(sn.z,i),t.forwardX.linearRampToValueAtTime(so.x,i),t.forwardY.linearRampToValueAtTime(so.y,i),t.forwardZ.linearRampToValueAtTime(so.z,i),t.upX.linearRampToValueAtTime(e.x,i),t.upY.linearRampToValueAtTime(e.y,i),t.upZ.linearRampToValueAtTime(e.z,i)}else t.setPosition(sn.x,sn.y,sn.z),t.setOrientation(so.x,so.y,so.z,e.x,e.y,e.z)})}),nG.prototype=Object.assign(Object.create(M.prototype),{constructor:nG,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setMediaElementSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else{var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.onended=this.onEnded.bind(this),this.startTime=this.context.currentTime,t.start(this.startTime,this.offset),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},setDetune:function(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}),nU.prototype=Object.assign(Object.create(nG.prototype),{constructor:nU,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){return this.panner.refDistance=t,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){return this.panner.rolloffFactor=t,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){return this.panner.distanceModel=t,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){return this.panner.maxDistance=t,this},setDirectionalCone:function(t,e,i){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=i,this},updateMatrixWorld:(sc=new r,sh=new n,sl=new r,su=new r,function(t){if(M.prototype.updateMatrixWorld.call(this,t),!0!==this.hasPlaybackControl||!1!==this.isPlaying){if(this.matrixWorld.decompose(sc,sh,sl),su.set(0,0,1).applyQuaternion(sh),(t=this.panner).positionX){var e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(sc.x,e),t.positionY.linearRampToValueAtTime(sc.y,e),t.positionZ.linearRampToValueAtTime(sc.z,e),t.orientationX.linearRampToValueAtTime(su.x,e),t.orientationY.linearRampToValueAtTime(su.y,e),t.orientationZ.linearRampToValueAtTime(su.z,e)}else t.setPosition(sc.x,sc.y,sc.z),t.setOrientation(su.x,su.y,su.z)}})}),Object.assign(nF.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),i=0;i<e.length;i++)t+=e[i];return t/e.length}}),Object.assign(n3.prototype,{accumulate:function(t,e){var i=this.buffer,n=this.valueSize;t=t*n+n;var r=this.cumulativeWeight;if(0===r){for(r=0;r!==n;++r)i[t+r]=i[r];r=e}else r+=e,this._mixBufferRegion(i,t,0,e/r,n);this.cumulativeWeight=r},apply:function(t){var e=this.valueSize,i=this.buffer;t=t*e+e;var n=this.cumulativeWeight,r=this.binding;this.cumulativeWeight=0,1>n&&this._mixBufferRegion(i,t,3*e,1-n,e),n=e;for(var a=e+e;n!==a;++n)if(i[n]!==i[n+e]){r.setValue(i,t);break}},saveOriginalState:function(){var t=this.buffer,e=this.valueSize,i=3*e;this.binding.getValue(t,i);for(var n=e;n!==i;++n)t[n]=t[i+n%e];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(t,e,i,n,r){if(.5<=n)for(n=0;n!==r;++n)t[e+n]=t[i+n]},_slerp:function(t,e,i,r){n.slerpFlat(t,e,t,e,t,i,r)},_lerp:function(t,e,i,n,r){for(var a=1-n,o=0;o!==r;++o){var s=e+o;t[s]=t[s]*a+t[i+o]*n}}}),Object.assign(nH.prototype,{getValue:function(t,e){this.bind();var i=this._bindings[this._targetGroup.nCachedObjects_];void 0!==i&&i.getValue(t,e)},setValue:function(t,e){for(var i=this._bindings,n=this._targetGroup.nCachedObjects_,r=i.length;n!==r;++n)i[n].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}}),Object.assign(nO,{Composite:nH,create:function(t,e,i){return t&&t.isAnimationObjectGroup?new nO.Composite(t,e,i):new nO(t,e,i)},sanitizeNodeName:(sp=/[\[\]\.:\/]/g,function(t){return t.replace(/\s/g,"_").replace(sp,"")}),parseTrackName:(sd="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",sf=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),sd=/(WCOD+)?/.source.replace("WCOD",sd),sg=RegExp("^"+sf+sd+(sm=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"))+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]")+"$"),sv=["material","materials","bones"],function(t){var e=sg.exec(t);if(!e)throw Error("PropertyBinding: Cannot parse trackName: "+t);var i=(e={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]}).nodeName&&e.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var n=e.nodeName.substring(i+1);-1!==sv.indexOf(n)&&(e.nodeName=e.nodeName.substring(0,i),e.objectName=n)}if(null===e.propertyName||0===e.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+t);return e}),findNode:function(t,e){if(!e||""===e||"root"===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var i=t.skeleton.getBoneByName(e);if(void 0!==i)return i}if(t.children){var n=function(t){for(var i=0;i<t.length;i++){var r=t[i];if(r.name===e||r.uuid===e||(r=n(r.children)))return r}return null};if(t=n(t.children))return t}return null}}),Object.assign(nO.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)t[e++]=i[n]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=t[e++]},function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,i=e.objectName,n=e.propertyName,r=e.propertyIndex;if(t||(this.node=t=nO.findNode(this.rootNode,e.nodeName)||this.rootNode),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(i){var a=e.objectIndex;switch(i){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}for(i=0,t=t.skeleton.bones;i<t.length;i++)if(t[i].name===a){a=i;break}break;default:if(void 0===t[i]){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[i]}if(void 0!==a){if(void 0===t[a]){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[a]}}if(void 0===(a=t[n]))console.error("THREE.PropertyBinding: Trying to update property for track: "+e.nodeName+"."+n+" but it wasn't found.",t);else{if(e=this.Versioning.None,this.targetObject=t,void 0!==t.needsUpdate?e=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(e=this.Versioning.MatrixWorldNeedsUpdate),i=this.BindingType.Direct,void 0!==r){if("morphTargetInfluences"===n){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}for(i=0;i<this.node.geometry.morphAttributes.position.length;i++)if(t.geometry.morphAttributes.position[i].name===r){r=i;break}}else{if(!t.geometry.morphTargets){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);return}for(i=0;i<this.node.geometry.morphTargets.length;i++)if(t.geometry.morphTargets[i].name===r){r=i;break}}}i=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else void 0!==a.fromArray&&void 0!==a.toArray?(i=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(i=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=n;this.getValue=this.GetterByBindingType[i],this.setValue=this.SetterByBindingTypeAndVersioning[i][e]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(nO.prototype,{_getValue_unbound:nO.prototype.getValue,_setValue_unbound:nO.prototype.setValue}),Object.assign(nV.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=t.length,i=this.nCachedObjects_,n=this._indicesByUUID,r=this._paths,a=this._parsedPaths,o=this._bindings,s=o.length,c=void 0,h=0,l=arguments.length;h!==l;++h){var u=arguments[h],p=u.uuid,d=n[p];if(void 0===d){d=e++,n[p]=d,t.push(u),p=0;for(var f=s;p!==f;++p)o[p].push(new nO(u,r[p],a[p]))}else if(d<i){c=t[d];var m=--i;for(n[(f=t[m]).uuid]=d,t[d]=f,n[p]=m,t[m]=u,p=0,f=s;p!==f;++p){var g=o[p],v=g[d];g[d]=g[m],void 0===v&&(v=new nO(u,r[p],a[p])),g[m]=v}}else t[d]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=i},remove:function(){for(var t=this._objects,e=this.nCachedObjects_,i=this._indicesByUUID,n=this._bindings,r=n.length,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],c=s.uuid,h=i[c];if(void 0!==h&&h>=e){var l=e++,u=t[l];for(i[u.uuid]=h,t[h]=u,i[c]=l,t[l]=s,s=0,c=r;s!==c;++s){var p=(u=n[s])[h];u[h]=u[l],u[l]=p}}}this.nCachedObjects_=e},uncache:function(){for(var t=this._objects,e=t.length,i=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,a=r.length,o=0,s=arguments.length;o!==s;++o){var c=arguments[o].uuid,h=n[c];if(void 0!==h){if(delete n[c],h<i){var l=t[c=--i],u=--e,p=t[u];for(n[l.uuid]=h,t[h]=l,n[p.uuid]=c,t[c]=p,t.pop(),l=0,p=a;l!==p;++l){var d=r[l],f=d[u];d[h]=d[c],d[c]=f,d.pop()}}else for(n[(p=t[u=--e]).uuid]=h,t[h]=p,t.pop(),l=0,p=a;l!==p;++l)(d=r[l])[h]=d[u],d.pop()}}this.nCachedObjects_=i},subscribe_:function(t,e){var i=this._bindingsIndicesByPath,n=i[t],r=this._bindings;if(void 0!==n)return r[n];var a=this._paths,o=this._parsedPaths,s=this._objects,c=this.nCachedObjects_,h=Array(s.length);for(n=r.length,i[t]=n,a.push(t),o.push(e),r.push(h),i=c,n=s.length;i!==n;++i)h[i]=new nO(s[i],t,e);return h},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,i=e[t];if(void 0!==i){var n=this._paths,r=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];e[t[o]]=i,a[i]=s,a.pop(),r[i]=r[o],r.pop(),n[i]=n[o],n.pop()}}}),Object.assign(n4.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,i){if(t.fadeOut(e),this.fadeIn(e),i){i=this._clip.duration;var n=t._clip.duration,r=i/n;t.warp(1,n/i,e),this.warp(r,1,e)}return this},crossFadeTo:function(t,e,i){return t.crossFadeFrom(this,e,i)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,i){var n=this._mixer,r=n.time,a=this._timeScaleInterpolant,o=this.timeScale;return null===a&&(this._timeScaleInterpolant=a=n._lendControlInterpolant()),n=a.parameterPositions,a=a.sampleValues,n[0]=r,n[1]=r+i,a[0]=t/o,a[1]=e/o,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,i,n){if(this.enabled){var r=this._startTime;if(null!==r){if(0>(e=(t-r)*i)||0===i)return;this._startTime=null,e*=i}if(e*=this._updateTimeScale(t),i=this._updateTime(e),0<(t=this._updateWeight(t))){e=this._interpolants,r=this._propertyBindings;for(var a=0,o=e.length;a!==o;++a)e[a].evaluate(i),r[a].accumulate(n,t)}}else this._updateWeight(t)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var i=this._weightInterpolant;if(null!==i){var n=i.evaluate(t)[0];e*=n,t>i.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var i=this._timeScaleInterpolant;null!==i&&(e*=i.evaluate(t)[0],t>i.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e))}return this._effectiveTimeScale=e},_updateTime:function(t){var e=this.time+t,i=this._clip.duration,n=this.loop,r=this._loopCount,a=2202===n;if(0===t)return -1===r?e:a&&1==(1&r)?i-e:e;if(2200===n)a:{if(-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1)),e>=i)e=i;else if(0>e)e=0;else break a;this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:0>t?-1:1})}else{if(-1===r&&(0<=t?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),e>=i||0>e){n=Math.floor(e/i),e-=i*n,r+=Math.abs(n);var o=this.repetitions-r;0>=o?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=0<t?i:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<t?1:-1})):(1===o?(t=0>t,this._setEndings(t,!t,a)):this._setEndings(!1,!1,a),this._loopCount=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n}))}if(a&&1==(1&r))return this.time=e,i-e}return this.time=e},_setEndings:function(t,e,i){var n=this._interpolantSettings;i?(n.endingStart=2401,n.endingEnd=2401):(n.endingStart=t?this.zeroSlopeAtStart?2401:2400:2402,n.endingEnd=e?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(t,e,i){var n=this._mixer,r=n.time,a=this._weightInterpolant;return null===a&&(this._weightInterpolant=a=n._lendControlInterpolant()),n=a.parameterPositions,a=a.sampleValues,n[0]=r,a[0]=e,n[1]=r+t,a[1]=i,this}}),nk.prototype=Object.assign(Object.create(e.prototype),{constructor:nk,_bindAction:function(t,e){var i=t._localRoot||this._root,n=t._clip.tracks,r=n.length,a=t._propertyBindings;t=t._interpolants;var o=i.uuid,s=this._bindingsByRootAndName,c=s[o];for(void 0===c&&(c={},s[o]=c),s=0;s!==r;++s){var h=n[s],l=h.name,u=c[l];if(void 0===u){if(void 0!==(u=a[s])){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,o,l));continue}u=new n3(nO.create(i,l,e&&e._propertyBindings[s].binding.parsedPath),h.ValueTypeName,h.getValueSize()),++u.referenceCount,this._addInactiveBinding(u,o,l)}a[s]=u,t[s].resultBuffer=u.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,i=t._clip.uuid,n=this._actionsByClip[i];this._bindAction(t,n&&n.knownActions[0]),this._addInactiveAction(t,i,e)}for(e=t._propertyBindings,i=0,n=e.length;i!==n;++i){var r=e[i];0==r.useCount++&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,i=0,n=e.length;i!==n;++i){var r=e[i];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0,this.stats={actions:{get total(){return this._actions.length},get inUse(){return this._nActiveActions}},bindings:{get total(){return this._bindings.length},get inUse(){return this._nActiveBindings}},controlInterpolants:{get total(){return this._controlInterpolants.length},get inUse(){return this._nActiveControlInterpolants}}}},_isActiveAction:function(t){return null!==(t=t._cacheIndex)&&t<this._nActiveActions},_addInactiveAction:function(t,e,i){var n=this._actions,r=this._actionsByClip,a=r[e];void 0===a?(a={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=a):(e=a.knownActions,t._byClipCacheIndex=e.length,e.push(t)),t._cacheIndex=n.length,n.push(t),a.actionByRoot[i]=t},_removeInactiveAction:function(t){var e=this._actions,i=e[e.length-1],n=t._cacheIndex;i._cacheIndex=n,e[n]=i,e.pop(),t._cacheIndex=null,e=t._clip.uuid;var r=(n=(i=this._actionsByClip)[e]).knownActions,a=r[r.length-1],o=t._byClipCacheIndex;a._byClipCacheIndex=o,r[o]=a,r.pop(),t._byClipCacheIndex=null,delete n.actionByRoot[(t._localRoot||this._root).uuid],0===r.length&&delete i[e],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){t=t._propertyBindings;for(var e=0,i=t.length;e!==i;++e){var n=t[e];0==--n.referenceCount&&this._removeInactiveBinding(n)}},_lendAction:function(t){var e=this._actions,i=t._cacheIndex,n=this._nActiveActions++,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_takeBackAction:function(t){var e=this._actions,i=t._cacheIndex,n=--this._nActiveActions,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_addInactiveBinding:function(t,e,i){var n=this._bindingsByRootAndName,r=n[e],a=this._bindings;void 0===r&&(r={},n[e]=r),r[i]=t,t._cacheIndex=a.length,a.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,i=t.binding,n=i.rootNode.uuid;i=i.path;var r=this._bindingsByRootAndName,a=r[n],o=e[e.length-1];t=t._cacheIndex,o._cacheIndex=t,e[t]=o,e.pop(),delete a[i];a:{for(var s in a)break a;delete r[n]}},_lendBinding:function(t){var e=this._bindings,i=t._cacheIndex,n=this._nActiveBindings++,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_takeBackBinding:function(t){var e=this._bindings,i=t._cacheIndex,n=--this._nActiveBindings,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,i=t[e];return void 0===i&&((i=new iN(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e,t[e]=i),i},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,i=t.__cacheIndex,n=--this._nActiveControlInterpolants,r=e[n];t.__cacheIndex=n,e[n]=t,r.__cacheIndex=i,e[i]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e){var i=e||this._root,n=i.uuid;t=null!==(i="string"==typeof t?ik.findByName(i,t):t)?i.uuid:t;var r=this._actionsByClip[t],a=null;if(void 0!==r){if(void 0!==(a=r.actionByRoot[n]))return a;a=r.knownActions[0],null===i&&(i=a._clip)}return null===i?null:(e=new n4(this,i,e),this._bindAction(e,a),this._addInactiveAction(e,t,n),e)},existingAction:function(t,e){var i=e||this._root;return e=i.uuid,i="string"==typeof t?ik.findByName(i,t):t,void 0!==(t=this._actionsByClip[i?i.uuid:t])&&t.actionByRoot[e]||null},stopAllAction:function(){for(var t=this._actions,e=this._nActiveActions,i=this._bindings,n=this._nActiveBindings,r=this._nActiveBindings=this._nActiveActions=0;r!==e;++r)t[r].reset();for(r=0;r!==n;++r)i[r].useCount=0;return this},update:function(t){t*=this.timeScale;for(var e=this._actions,i=this._nActiveActions,n=this.time+=t,r=Math.sign(t),a=this._accuIndex^=1,o=0;o!==i;++o)e[o]._update(n,t,r,a);for(o=0,t=this._bindings,e=this._nActiveBindings;o!==e;++o)t[o].apply(a);return this},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions;t=t.uuid;var i=this._actionsByClip,n=i[t];if(void 0!==n){n=n.knownActions;for(var r=0,a=n.length;r!==a;++r){var o=n[r];this._deactivateAction(o);var s=o._cacheIndex,c=e[e.length-1];o._cacheIndex=null,o._byClipCacheIndex=null,c._cacheIndex=s,e[s]=c,e.pop(),this._removeInactiveBindingsForAction(o)}delete i[t]}},uncacheRoot:function(t){t=t.uuid;var e=this._actionsByClip;for(n in e){var i=e[n].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var n=this._bindingsByRootAndName[t];if(void 0!==n)for(var r in n)(t=n[r]).restoreOriginalState(),this._removeInactiveBinding(t)},uncacheAction:function(t,e){null!==(t=this.existingAction(t,e))&&(this._deactivateAction(t),this._removeInactiveAction(t))}}),nW.prototype.clone=function(){return new nW(void 0===this.value.clone?this.value:this.value.clone())},n5.prototype=Object.assign(Object.create(U.prototype),{constructor:n5,isInstancedBufferGeometry:!0,copy:function(t){return U.prototype.copy.call(this,t),this.maxInstancedCount=t.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),n6.prototype=Object.assign(Object.create(em.prototype),{constructor:n6,isInstancedInterleavedBuffer:!0,copy:function(t){return em.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),n7.prototype=Object.assign(Object.create(T.prototype),{constructor:n7,isInstancedBufferAttribute:!0,copy:function(t){return T.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Object.assign(nj.prototype,{linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize()):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,i){return nX(t,this,i=i||[],e),i.sort(nq),i},intersectObjects:function(t,e,i){if(i=i||[],!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var n=0,r=t.length;n<r;n++)nX(t[n],this,i,e);return i.sort(nq),i}}),Object.assign(nY.prototype,{set:function(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,i){return this.radius=Math.sqrt(t*t+e*e+i*i),0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(t,i),this.phi=Math.acos(rS.clamp(e/this.radius,-1,1))),this}}),Object.assign(nZ.prototype,{set:function(t,e,i){return this.radius=t,this.theta=e,this.y=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,i){return this.radius=Math.sqrt(t*t+i*i),this.theta=Math.atan2(t,i),this.y=e,this}}),Object.assign(nJ.prototype,{set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:(sy=new i,function(t,e){return e=sy.copy(e).multiplyScalar(.5),this.min.copy(t).sub(e),this.max.copy(t).add(e),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new i),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new i),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x)&&!(t.x>this.max.x)&&!(t.y<this.min.y)&&!(t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new i),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x)&&!(t.min.x>this.max.x)&&!(t.max.y<this.min.y)&&!(t.min.y>this.max.y)},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new i),e.copy(t).clamp(this.min,this.max)},distanceToPoint:(s$=new i,function(t){return s$.copy(t).clamp(this.min,this.max).sub(t).length()}),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(nQ.prototype,{set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new r),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new r),t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new r),this.delta(e).multiplyScalar(t).add(this.start)},closestPointToPointParameter:(sx=new r,s_=new r,function(t,e){return sx.subVectors(t,this.start),s_.subVectors(this.end,this.start),t=s_.dot(s_),t=s_.dot(sx)/t,e&&(t=rS.clamp(t,0,1)),t}),closestPointToPoint:function(t,e,i){return t=this.closestPointToPointParameter(t,e),void 0===i&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),i=new r),this.delta(i).multiplyScalar(t).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),nK.prototype=Object.create(M.prototype),nK.prototype.constructor=nK,nK.prototype.isImmediateRenderObject=!0,n9.prototype=Object.create(eE.prototype),n9.prototype.constructor=n9,n9.prototype.update=(sw=new r,sb=new r,s8=new a,function(){var t=["a","b","c"];this.object.updateMatrixWorld(!0),s8.getNormalMatrix(this.object.matrixWorld);var e=this.object.matrixWorld,i=this.geometry.attributes.position,n=this.object.geometry;if(n&&n.isGeometry)for(var r=n.vertices,a=n.faces,o=n=0,s=a.length;o<s;o++)for(var c=a[o],h=0,l=c.vertexNormals.length;h<l;h++){var u=c.vertexNormals[h];sw.copy(r[c[t[h]]]).applyMatrix4(e),sb.copy(u).applyMatrix3(s8).normalize().multiplyScalar(this.size).add(sw),i.setXYZ(n,sw.x,sw.y,sw.z),n+=1,i.setXYZ(n,sb.x,sb.y,sb.z),n+=1}else if(n&&n.isBufferGeometry)for(t=n.attributes.position,r=n.attributes.normal,h=n=0,l=t.count;h<l;h++)sw.set(t.getX(h),t.getY(h),t.getZ(h)).applyMatrix4(e),sb.set(r.getX(h),r.getY(h),r.getZ(h)),sb.applyMatrix3(s8).normalize().multiplyScalar(this.size).add(sw),i.setXYZ(n,sw.x,sw.y,sw.z),n+=1,i.setXYZ(n,sb.x,sb.y,sb.z),n+=1;i.needsUpdate=!0}),rt.prototype=Object.create(M.prototype),rt.prototype.constructor=rt,rt.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},rt.prototype.update=(sE=new r,function(){this.light.updateMatrixWorld();var t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),sE.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(sE),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}),re.prototype=Object.create(eE.prototype),re.prototype.constructor=re,re.prototype.updateMatrixWorld=(sM=new r,sS=new g,sT=new g,function(t){var e=this.bones,i=this.geometry,n=i.getAttribute("position");sT.getInverse(this.root.matrixWorld);for(var r=0,a=0;r<e.length;r++){var o=e[r];o.parent&&o.parent.isBone&&(sS.multiplyMatrices(sT,o.matrixWorld),sM.setFromMatrixPosition(sS),n.setXYZ(a,sM.x,sM.y,sM.z),sS.multiplyMatrices(sT,o.parent.matrixWorld),sM.setFromMatrixPosition(sS),n.setXYZ(a+1,sM.x,sM.y,sM.z),a+=2)}i.getAttribute("position").needsUpdate=!0,M.prototype.updateMatrixWorld.call(this,t)}),ri.prototype=Object.create(Y.prototype),ri.prototype.constructor=ri,ri.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},ri.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},rn.prototype=Object.create(e8.prototype),rn.prototype.constructor=rn,rn.prototype.update=function(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),void 0!==this.color)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var t=this.material.color,e=Math.max(t.r,t.g,t.b);1<e&&t.multiplyScalar(1/e),this.children[0].material.color.copy(this.material.color)}},rn.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()},rr.prototype=Object.create(M.prototype),rr.prototype.constructor=rr,rr.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},rr.prototype.update=(s1=new r,s0=new $,sL=new $,function(){var t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var e=t.geometry.getAttribute("color");s0.copy(this.light.color),sL.copy(this.light.groundColor);for(var i=0,n=e.count;i<n;i++){var r=i<n/2?s0:sL;e.setXYZ(i,r.r,r.g,r.b)}e.needsUpdate=!0}t.lookAt(s1.setFromMatrixPosition(this.light.matrixWorld).negate())}),ra.prototype=Object.create(Y.prototype),ra.prototype.constructor=ra,ra.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},ra.prototype.onBeforeRender=function(){this.position.copy(this.lightProbe.position),this.scale.set(1,1,1).multiplyScalar(this.size),this.material.uniforms.intensity.value=this.lightProbe.intensity},ro.prototype=Object.assign(Object.create(eE.prototype),{constructor:ro,copy:function(t){return eE.prototype.copy.call(this,t),this.geometry.copy(t.geometry),this.material.copy(t.material),this},clone:function(){return(new this.constructor).copy(this)}}),rs.prototype=Object.create(eE.prototype),rs.prototype.constructor=rs,rc.prototype=Object.create(e8.prototype),rc.prototype.constructor=rc,rc.prototype.update=function(){function t(t,e,n,r){for(n=(e-t)/n,d.setXYZ(l,0,0,0),u++,o=t;o<e;o+=n)s=l+u,d.setXYZ(s,Math.sin(o)*i,0,Math.cos(o)*i),d.setXYZ(s+1,Math.sin(Math.min(o+n,e))*i,0,Math.cos(Math.min(o+n,e))*i),d.setXYZ(s+2,0,0,0),u+=3;p.addGroup(l,u,r),l+=u,u=0}var e=this.audio,i=this.range,n=this.divisionsInnerAngle,r=this.divisionsOuterAngle,a=rS.degToRad(e.panner.coneInnerAngle);e=rS.degToRad(e.panner.coneOuterAngle);var o,s,c=a/2,h=e/2,l=0,u=0,p=this.geometry,d=p.attributes.position;p.clearGroups(),t(-h,-c,r,0),t(-c,c,n,1),t(c,h,r,0),d.needsUpdate=!0,a===e&&(this.material[0].visible=!1)},rc.prototype.dispose=function(){this.geometry.dispose(),this.material[0].dispose(),this.material[1].dispose()},rh.prototype=Object.create(eE.prototype),rh.prototype.constructor=rh,rh.prototype.update=(sA=new r,sP=new r,sR=new a,function(){this.object.updateMatrixWorld(!0),sR.getNormalMatrix(this.object.matrixWorld);var t=this.object.matrixWorld,e=this.geometry.attributes.position,i=this.object.geometry,n=i.vertices;i=i.faces;for(var r=0,a=0,o=i.length;a<o;a++){var s=i[a],c=s.normal;sA.copy(n[s.a]).add(n[s.b]).add(n[s.c]).divideScalar(3).applyMatrix4(t),sP.copy(c).applyMatrix3(sR).normalize().multiplyScalar(this.size).add(sA),e.setXYZ(r,sA.x,sA.y,sA.z),r+=1,e.setXYZ(r,sP.x,sP.y,sP.z),r+=1}e.needsUpdate=!0}),rl.prototype=Object.create(M.prototype),rl.prototype.constructor=rl,rl.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},rl.prototype.update=(sC=new r,sI=new r,sD=new r,function(){sC.setFromMatrixPosition(this.light.matrixWorld),sI.setFromMatrixPosition(this.light.target.matrixWorld),sD.subVectors(sI,sC),this.lightPlane.lookAt(sI),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(sI),this.targetLine.scale.z=sD.length()}),ru.prototype=Object.create(eE.prototype),ru.prototype.constructor=ru,ru.prototype.update=function(){function t(t,r,o,s){if(n.set(r,o,s).unproject(a),void 0!==(t=i[t]))for(r=e.getAttribute("position"),o=0,s=t.length;o<s;o++)r.setXYZ(t[o],n.x,n.y,n.z)}var e,i,n=new r,a=new ea;return function(){e=this.geometry,i=this.pointMap,a.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),t("c",0,0,-1),t("t",0,0,1),t("n1",-1,-1,-1),t("n2",1,-1,-1),t("n3",-1,1,-1),t("n4",1,1,-1),t("f1",-1,-1,1),t("f2",1,-1,1),t("f3",-1,1,1),t("f4",1,1,1),t("u1",.7,1.1,-1),t("u2",-.7,1.1,-1),t("u3",0,2,-1),t("cf1",-1,0,1),t("cf2",1,0,1),t("cf3",0,-1,1),t("cf4",0,1,1),t("cn1",-1,0,-1),t("cn2",1,0,-1),t("cn3",0,-1,-1),t("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),rp.prototype=Object.create(eE.prototype),rp.prototype.constructor=rp,rp.prototype.update=(sB=new p,function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&sB.setFromObject(this.object),!sB.isEmpty()){t=sB.min;var e=sB.max,i=this.geometry.attributes.position,n=i.array;n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=t.x,n[4]=e.y,n[5]=e.z,n[6]=t.x,n[7]=t.y,n[8]=e.z,n[9]=e.x,n[10]=t.y,n[11]=e.z,n[12]=e.x,n[13]=e.y,n[14]=t.z,n[15]=t.x,n[16]=e.y,n[17]=t.z,n[18]=t.x,n[19]=t.y,n[20]=t.z,n[21]=e.x,n[22]=t.y,n[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}),rp.prototype.setFromObject=function(t){return this.object=t,this.update(),this},rp.prototype.copy=function(t){return eE.prototype.copy.call(this,t),this.object=t.object,this},rp.prototype.clone=function(){return(new this.constructor).copy(this)},rd.prototype=Object.create(eE.prototype),rd.prototype.constructor=rd,rd.prototype.updateMatrixWorld=function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),M.prototype.updateMatrixWorld.call(this,t))},rf.prototype=Object.create(e8.prototype),rf.prototype.constructor=rf,rf.prototype.updateMatrixWorld=function(t){var e=-this.plane.constant;1e-8>Math.abs(e)&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=0>e?1:0,this.lookAt(this.plane.normal),M.prototype.updateMatrixWorld.call(this,t)},rm.prototype=Object.create(M.prototype),rm.prototype.constructor=rm,rm.prototype.setDirection=(sN=new r,function(t){.99999<t.y?this.quaternion.set(0,0,0,1):-.99999>t.y?this.quaternion.set(1,0,0,0):(sN.set(t.z,0,-t.x).normalize(),sz=Math.acos(t.y),this.quaternion.setFromAxisAngle(sN,sz))}),rm.prototype.setLength=function(t,e,i){void 0===e&&(e=.2*t),void 0===i&&(i=.2*e),this.line.scale.set(1,Math.max(0,t-e),1),this.line.updateMatrix(),this.cone.scale.set(i,e,i),this.cone.position.y=t,this.cone.updateMatrix()},rm.prototype.setColor=function(t){this.line.material.color.copy(t),this.cone.material.color.copy(t)},rm.prototype.copy=function(t){return M.prototype.copy.call(this,t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this},rm.prototype.clone=function(){return(new this.constructor).copy(this)},rg.prototype=Object.create(eE.prototype),rg.prototype.constructor=rg,iJ.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(iJ.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(nu.prototype,{createPointsGeometry:function(t){return console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."),t=this.getPoints(t),this.createGeometry(t)},createSpacedPointsGeometry:function(t){return console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."),t=this.getSpacedPoints(t),this.createGeometry(t)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var e=new S,i=0,n=t.length;i<n;i++){var a=t[i];e.vertices.push(new r(a.x,a.y,a.z||0))}return e}}),Object.assign(np.prototype,{fromPoints:function(t){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),rv.prototype=Object.create(nt.prototype),ry.prototype=Object.create(nt.prototype),r$.prototype=Object.create(nt.prototype),Object.assign(r$.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),ro.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},re.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(nA.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),oH.extractUrlBase(t)}}),Object.assign(nS.prototype,{setTexturePath:function(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}),Object.assign(nJ.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(p.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),nQ.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Object.assign(rS,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),rS.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),rS.ceilPowerOfTwo(t)}}),Object.assign(a.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(g.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){return void 0===s2&&(s2=new r),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),s2.setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,i,n,r,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,n,i,r,a)}}),f.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},n.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(j.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(q.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(q,{barycoordFromPoint:function(t,e,i,n,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),q.getBarycoord(t,e,i,n,r)},normal:function(t,e,i,n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),q.getNormal(t,e,i,n)}}),Object.assign(nd.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new io(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new iy(this,t)}}),Object.assign(i.prototype,{fromAttribute:function(t,e,i){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,i)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(r.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,i){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,i)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(s.prototype,{fromAttribute:function(t,e,i){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,i)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(S.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(M.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(M.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(e$.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(e_.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),ex.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(iJ.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),eo.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(nf.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(T.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(U.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addDrawCall:function(t,e,i){void 0!==i&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(U.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(is.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(nW.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(k.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new $}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===t}}}),Object.defineProperties(iA.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(W.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(eu.prototype,{clearTarget:function(t,e,i,n){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,i,n)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")}}),Object.defineProperties(eu.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(et.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(l.prototype,{activeCubeFace:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeCubeFace has been removed. It is now the second parameter of WebGLRenderer.setRenderTarget().")}},activeMipMapLevel:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeMipMapLevel has been removed. It is now the third parameter of WebGLRenderer.setRenderTarget().")}}}),Object.defineProperties(c.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(eh.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),nG.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this;return(new nP).load(t,function(t){e.setBuffer(t)}),this},nF.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},nz.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)},r7.crossOrigin=void 0,r7.loadTexture=function(t,e,i,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new iZ;return r.setCrossOrigin(this.crossOrigin),t=r.load(t,i,void 0,n),e&&(t.mapping=e),t},r7.loadTextureCube=function(t,e,i,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new iY;return r.setCrossOrigin(this.crossOrigin),t=r.load(t,i,void 0,n),e&&(t.mapping=e),t},r7.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},r7.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},t.WebGLMultisampleRenderTarget=h,t.WebGLRenderTargetCube=l,t.WebGLRenderTarget=c,t.WebGLRenderer=eu,t.ShaderLib=at,t.UniformsLib=r9,t.UniformsUtils={clone:v,merge:y},t.ShaderChunk=rZ,t.FogExp2=ep,t.Fog=ed,t.Scene=ef,t.Sprite=ey,t.LOD=e$,t.SkinnedMesh=ex,t.Skeleton=e_,t.Bone=ew,t.Mesh=Y,t.LineSegments=eE,t.LineLoop=eM,t.Line=e8,t.Points=eT,t.Group=er,t.VideoTexture=e1,t.DataTexture=u,t.DataTexture2DArray=tc,t.DataTexture3D=th,t.CompressedTexture=e0,t.CubeTexture=ts,t.CanvasTexture=eL,t.DepthTexture=eA,t.Texture=o,t.AnimationLoader=i7,t.CompressedTextureLoader=ij,t.DataTextureLoader=iq,t.CubeTextureLoader=iY,t.TextureLoader=iZ,t.ObjectLoader=nS,t.MaterialLoader=nE,t.BufferGeometryLoader=nM,t.DefaultLoadingManager=oz,t.LoadingManager=i5,t.ImageLoader=iX,t.ImageBitmapLoader=nT,t.FontLoader=nL,t.FileLoader=i6,t.Loader=nA,t.LoaderUtils=oH,t.Cache=oB,t.AudioLoader=nP,t.SpotLightShadow=nv,t.SpotLight=ny,t.PointLight=n$,t.RectAreaLight=n8,t.HemisphereLight=nm,t.HemisphereLightProbe=nI,t.DirectionalLightShadow=n_,t.DirectionalLight=nw,t.AmbientLight=nb,t.AmbientLightProbe=nD,t.LightShadow=ng,t.Light=nf,t.LightProbe=nC,t.StereoCamera=nB,t.PerspectiveCamera=eo,t.OrthographicCamera=nx,t.CubeCamera=nz,t.ArrayCamera=es,t.Camera=ea,t.AudioListener=n2,t.PositionalAudio=nU,t.AudioContext=sG,t.AudioAnalyser=nF,t.Audio=nG,t.VectorKeyframeTrack=i4,t.StringKeyframeTrack=iV,t.QuaternionKeyframeTrack=iO,t.NumberKeyframeTrack=i3,t.ColorKeyframeTrack=iF,t.BooleanKeyframeTrack=iU,t.PropertyMixer=n3,t.PropertyBinding=nO,t.KeyframeTrack=iG,t.AnimationUtils=oD,t.AnimationObjectGroup=nV,t.AnimationMixer=nk,t.AnimationClip=ik,t.Uniform=nW,t.InstancedBufferGeometry=n5,t.BufferGeometry=U,t.Geometry=S,t.InterleavedBufferAttribute=eg,t.InstancedInterleavedBuffer=n6,t.InterleavedBuffer=em,t.InstancedBufferAttribute=n7,t.Face3=w,t.Object3D=M,t.Raycaster=nj,t.Layers=E,t.EventDispatcher=e,t.Clock=nN,t.QuaternionLinearInterpolant=iH,t.LinearInterpolant=iN,t.DiscreteInterpolant=i2,t.CubicInterpolant=iz,t.Interpolant=iB,t.Triangle=q,t.Math=rS,t.Spherical=nY,t.Cylindrical=nZ,t.Plane=f,t.Frustum=m,t.Sphere=d,t.Ray=j,t.Matrix4=g,t.Matrix3=a,t.Box3=p,t.Box2=nJ,t.Line3=nQ,t.Euler=b,t.Vector4=s,t.Vector3=r,t.Vector2=i,t.Quaternion=n,t.Color=$,t.SphericalHarmonics3=nR,t.ImmediateRenderObject=nK,t.VertexNormalsHelper=n9,t.SpotLightHelper=rt,t.SkeletonHelper=re,t.PointLightHelper=ri,t.RectAreaLightHelper=rn,t.HemisphereLightHelper=rr,t.LightProbeHelper=ra,t.GridHelper=ro,t.PolarGridHelper=rs,t.PositionalAudioHelper=rc,t.FaceNormalsHelper=rh,t.DirectionalLightHelper=rl,t.CameraHelper=ru,t.BoxHelper=rp,t.Box3Helper=rd,t.PlaneHelper=rf,t.ArrowHelper=rm,t.AxesHelper=rg,t.Shape=nd,t.Path=np,t.ShapePath=n1,t.Font=n0,t.CurvePath=nu,t.Curve=iJ,t.ImageUtils=r7,t.ShapeUtils=oP,t.WebGLUtils=en,t.WireframeGeometry=eP,t.ParametricGeometry=eR,t.ParametricBufferGeometry=eC,t.TetrahedronGeometry=eB,t.TetrahedronBufferGeometry=ez,t.OctahedronGeometry=eN,t.OctahedronBufferGeometry=e2,t.IcosahedronGeometry=eG,t.IcosahedronBufferGeometry=eU,t.DodecahedronGeometry=eF,t.DodecahedronBufferGeometry=e3,t.PolyhedronGeometry=eI,t.PolyhedronBufferGeometry=eD,t.TubeGeometry=eH,t.TubeBufferGeometry=eO,t.TorusKnotGeometry=eV,t.TorusKnotBufferGeometry=e4,t.TorusGeometry=ek,t.TorusBufferGeometry=eW,t.TextGeometry=ih,t.TextBufferGeometry=il,t.SphereGeometry=iu,t.SphereBufferGeometry=ip,t.RingGeometry=id,t.RingBufferGeometry=im,t.PlaneGeometry=O,t.PlaneBufferGeometry=V,t.LatheGeometry=ig,t.LatheBufferGeometry=iv,t.ShapeGeometry=iy,t.ShapeBufferGeometry=i$,t.ExtrudeGeometry=io,t.ExtrudeBufferGeometry=is,t.EdgesGeometry=i_,t.ConeGeometry=i8,t.ConeBufferGeometry=iE,t.CylinderGeometry=iw,t.CylinderBufferGeometry=ib,t.CircleGeometry=iM,t.CircleBufferGeometry=iS,t.BoxGeometry=F,t.CubeGeometry=F,t.BoxBufferGeometry=H,t.ShadowMaterial=iT,t.SpriteMaterial=ev,t.RawShaderMaterial=i1,t.ShaderMaterial=W,t.PointsMaterial=eS,t.MeshPhysicalMaterial=iL,t.MeshStandardMaterial=i0,t.MeshPhongMaterial=iA,t.MeshToonMaterial=iP,t.MeshNormalMaterial=iR,t.MeshLambertMaterial=iC,t.MeshDepthMaterial=tK,t.MeshDistanceMaterial=t9,t.MeshBasicMaterial=X,t.MeshMatcapMaterial=iI,t.LineDashedMaterial=iD,t.LineBasicMaterial=eb,t.Material=k,t.Float64BufferAttribute=z,t.Float32BufferAttribute=B,t.Uint32BufferAttribute=D,t.Int32BufferAttribute=I,t.Uint16BufferAttribute=C,t.Int16BufferAttribute=R,t.Uint8ClampedBufferAttribute=P,t.Uint8BufferAttribute=A,t.Int8BufferAttribute=L,t.BufferAttribute=T,t.ArcCurve=iK,t.CatmullRomCurve3=nt,t.CubicBezierCurve=nr,t.CubicBezierCurve3=na,t.EllipseCurve=iQ,t.LineCurve=no,t.LineCurve3=ns,t.QuadraticBezierCurve=nc,t.QuadraticBezierCurve3=nh,t.SplineCurve=nl,t.REVISION="104",t.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},t.CullFaceNone=0,t.CullFaceBack=1,t.CullFaceFront=2,t.CullFaceFrontBack=3,t.FrontFaceDirectionCW=0,t.FrontFaceDirectionCCW=1,t.BasicShadowMap=0,t.PCFShadowMap=1,t.PCFSoftShadowMap=2,t.FrontSide=0,t.BackSide=1,t.DoubleSide=2,t.FlatShading=1,t.SmoothShading=2,t.NoColors=0,t.FaceColors=1,t.VertexColors=2,t.NoBlending=0,t.NormalBlending=1,t.AdditiveBlending=2,t.SubtractiveBlending=3,t.MultiplyBlending=4,t.CustomBlending=5,t.AddEquation=100,t.SubtractEquation=101,t.ReverseSubtractEquation=102,t.MinEquation=103,t.MaxEquation=104,t.ZeroFactor=200,t.OneFactor=201,t.SrcColorFactor=202,t.OneMinusSrcColorFactor=203,t.SrcAlphaFactor=204,t.OneMinusSrcAlphaFactor=205,t.DstAlphaFactor=206,t.OneMinusDstAlphaFactor=207,t.DstColorFactor=208,t.OneMinusDstColorFactor=209,t.SrcAlphaSaturateFactor=210,t.NeverDepth=0,t.AlwaysDepth=1,t.LessDepth=2,t.LessEqualDepth=3,t.EqualDepth=4,t.GreaterEqualDepth=5,t.GreaterDepth=6,t.NotEqualDepth=7,t.MultiplyOperation=0,t.MixOperation=1,t.AddOperation=2,t.NoToneMapping=0,t.LinearToneMapping=1,t.ReinhardToneMapping=2,t.Uncharted2ToneMapping=3,t.CineonToneMapping=4,t.ACESFilmicToneMapping=5,t.UVMapping=300,t.CubeReflectionMapping=301,t.CubeRefractionMapping=302,t.EquirectangularReflectionMapping=303,t.EquirectangularRefractionMapping=304,t.SphericalReflectionMapping=305,t.CubeUVReflectionMapping=306,t.CubeUVRefractionMapping=307,t.RepeatWrapping=1e3,t.ClampToEdgeWrapping=1001,t.MirroredRepeatWrapping=1002,t.NearestFilter=1003,t.NearestMipMapNearestFilter=1004,t.NearestMipMapLinearFilter=1005,t.LinearFilter=1006,t.LinearMipMapNearestFilter=1007,t.LinearMipMapLinearFilter=1008,t.UnsignedByteType=1009,t.ByteType=1010,t.ShortType=1011,t.UnsignedShortType=1012,t.IntType=1013,t.UnsignedIntType=1014,t.FloatType=1015,t.HalfFloatType=1016,t.UnsignedShort4444Type=1017,t.UnsignedShort5551Type=1018,t.UnsignedShort565Type=1019,t.UnsignedInt248Type=1020,t.AlphaFormat=1021,t.RGBFormat=1022,t.RGBAFormat=1023,t.LuminanceFormat=1024,t.LuminanceAlphaFormat=1025,t.RGBEFormat=1023,t.DepthFormat=1026,t.DepthStencilFormat=1027,t.RedFormat=1028,t.RGB_S3TC_DXT1_Format=33776,t.RGBA_S3TC_DXT1_Format=33777,t.RGBA_S3TC_DXT3_Format=33778,t.RGBA_S3TC_DXT5_Format=33779,t.RGB_PVRTC_4BPPV1_Format=35840,t.RGB_PVRTC_2BPPV1_Format=35841,t.RGBA_PVRTC_4BPPV1_Format=35842,t.RGBA_PVRTC_2BPPV1_Format=35843,t.RGB_ETC1_Format=36196,t.RGBA_ASTC_4x4_Format=37808,t.RGBA_ASTC_5x4_Format=37809,t.RGBA_ASTC_5x5_Format=37810,t.RGBA_ASTC_6x5_Format=37811,t.RGBA_ASTC_6x6_Format=37812,t.RGBA_ASTC_8x5_Format=37813,t.RGBA_ASTC_8x6_Format=37814,t.RGBA_ASTC_8x8_Format=37815,t.RGBA_ASTC_10x5_Format=37816,t.RGBA_ASTC_10x6_Format=37817,t.RGBA_ASTC_10x8_Format=37818,t.RGBA_ASTC_10x10_Format=37819,t.RGBA_ASTC_12x10_Format=37820,t.RGBA_ASTC_12x12_Format=37821,t.LoopOnce=2200,t.LoopRepeat=2201,t.LoopPingPong=2202,t.InterpolateDiscrete=2300,t.InterpolateLinear=2301,t.InterpolateSmooth=2302,t.ZeroCurvatureEnding=2400,t.ZeroSlopeEnding=2401,t.WrapAroundEnding=2402,t.TrianglesDrawMode=0,t.TriangleStripDrawMode=1,t.TriangleFanDrawMode=2,t.LinearEncoding=3e3,t.sRGBEncoding=3001,t.GammaEncoding=3007,t.RGBEEncoding=3002,t.LogLuvEncoding=3003,t.RGBM7Encoding=3004,t.RGBM16Encoding=3005,t.RGBDEncoding=3006,t.BasicDepthPacking=3200,t.RGBADepthPacking=3201,t.TangentSpaceNormalMap=0,t.ObjectSpaceNormalMap=1,t.Face4=function(t,e,i,n,r,a,o){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new w(t,e,i,r,a,o)},t.LineStrip=0,t.LinePieces=1,t.MeshFaceMaterial=function(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t},t.MultiMaterial=function(t){return void 0===t&&(t=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t},t.PointCloud=function(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new eT(t,e)},t.Particle=function(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new ey(t)},t.ParticleSystem=function(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new eT(t,e)},t.PointCloudMaterial=function(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new eS(t)},t.ParticleBasicMaterial=function(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new eS(t)},t.ParticleSystemMaterial=function(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new eS(t)},t.Vertex=function(t,e,i){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new r(t,e,i)},t.DynamicBufferAttribute=function(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new T(t,e).setDynamic(!0)},t.Int8Attribute=function(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new L(t,e)},t.Uint8Attribute=function(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new A(t,e)},t.Uint8ClampedAttribute=function(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new P(t,e)},t.Int16Attribute=function(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new R(t,e)},t.Uint16Attribute=function(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new C(t,e)},t.Int32Attribute=function(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new I(t,e)},t.Uint32Attribute=function(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new D(t,e)},t.Float32Attribute=function(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new B(t,e)},t.Float64Attribute=function(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new z(t,e)},t.ClosedSplineCurve3=rv,t.SplineCurve3=ry,t.Spline=r$,t.AxisHelper=function(t){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new rg(t)},t.BoundingBoxHelper=function(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new rp(t,e)},t.EdgesHelper=function(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new eE(new i_(t.geometry),new eb({color:void 0!==e?e:16777215}))},t.WireframeHelper=function(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new eE(new eP(t.geometry),new eb({color:void 0!==e?e:16777215}))},t.XHRLoader=function(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new i6(t)},t.BinaryTextureLoader=function(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new iq(t)},t.GeometryUtils={merge:function(t,e,i){if(console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),e.isMesh){e.matrixAutoUpdate&&e.updateMatrix();var n=e.matrix;e=e.geometry}t.merge(e,n,i)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}},t.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(t,e){console.warn("THREE.Projector: .projectVector() is now vector.project()."),t.project(e)},this.unprojectVector=function(t,e){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),t.unproject(e)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},t.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been removed")},t.JSONLoader=function(){console.error("THREE.JSONLoader has been removed.")},t.SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}},t.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")},Object.defineProperty(t,"__esModule",{value:!0})});

//PDF JS
!function webpackUniversalModuleDefinition(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("pdfjs-dist/build/pdf",[],r):"object"==typeof exports?exports["pdfjs-dist/build/pdf"]=r():t["pdfjs-dist/build/pdf"]=t.pdfjsLib=r()}(this,(function(){return function(t){var r={};function __w_pdfjs_require__(a){if(r[a])return r[a].exports;var o=r[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,__w_pdfjs_require__),o.l=!0,o.exports}return __w_pdfjs_require__.m=t,__w_pdfjs_require__.c=r,__w_pdfjs_require__.d=function(t,r,a){__w_pdfjs_require__.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:a})},__w_pdfjs_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__w_pdfjs_require__.t=function(t,r){if(1&r&&(t=__w_pdfjs_require__(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(__w_pdfjs_require__.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var o in t)__w_pdfjs_require__.d(a,o,function(r){return t[r]}.bind(null,o));return a},__w_pdfjs_require__.n=function(t){var r=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __w_pdfjs_require__.d(r,"a",r),r},__w_pdfjs_require__.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},__w_pdfjs_require__.p="",__w_pdfjs_require__(__w_pdfjs_require__.s=0)}([function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"addLinkAttributes",{enumerable:!0,get:function get(){return o.addLinkAttributes}}),Object.defineProperty(r,"getFilenameFromUrl",{enumerable:!0,get:function get(){return o.getFilenameFromUrl}}),Object.defineProperty(r,"LinkTarget",{enumerable:!0,get:function get(){return o.LinkTarget}}),Object.defineProperty(r,"loadScript",{enumerable:!0,get:function get(){return o.loadScript}}),Object.defineProperty(r,"PDFDateString",{enumerable:!0,get:function get(){return o.PDFDateString}}),Object.defineProperty(r,"RenderingCancelledException",{enumerable:!0,get:function get(){return o.RenderingCancelledException}}),Object.defineProperty(r,"build",{enumerable:!0,get:function get(){return i.build}}),Object.defineProperty(r,"getDocument",{enumerable:!0,get:function get(){return i.getDocument}}),Object.defineProperty(r,"LoopbackPort",{enumerable:!0,get:function get(){return i.LoopbackPort}}),Object.defineProperty(r,"PDFDataRangeTransport",{enumerable:!0,get:function get(){return i.PDFDataRangeTransport}}),Object.defineProperty(r,"PDFWorker",{enumerable:!0,get:function get(){return i.PDFWorker}}),Object.defineProperty(r,"version",{enumerable:!0,get:function get(){return i.version}}),Object.defineProperty(r,"CMapCompressionType",{enumerable:!0,get:function get(){return l.CMapCompressionType}}),Object.defineProperty(r,"createObjectURL",{enumerable:!0,get:function get(){return l.createObjectURL}}),Object.defineProperty(r,"createPromiseCapability",{enumerable:!0,get:function get(){return l.createPromiseCapability}}),Object.defineProperty(r,"createValidAbsoluteUrl",{enumerable:!0,get:function get(){return l.createValidAbsoluteUrl}}),Object.defineProperty(r,"InvalidPDFException",{enumerable:!0,get:function get(){return l.InvalidPDFException}}),Object.defineProperty(r,"MissingPDFException",{enumerable:!0,get:function get(){return l.MissingPDFException}}),Object.defineProperty(r,"OPS",{enumerable:!0,get:function get(){return l.OPS}}),Object.defineProperty(r,"PasswordResponses",{enumerable:!0,get:function get(){return l.PasswordResponses}}),Object.defineProperty(r,"PermissionFlag",{enumerable:!0,get:function get(){return l.PermissionFlag}}),Object.defineProperty(r,"removeNullCharacters",{enumerable:!0,get:function get(){return l.removeNullCharacters}}),Object.defineProperty(r,"shadow",{enumerable:!0,get:function get(){return l.shadow}}),Object.defineProperty(r,"UnexpectedResponseException",{enumerable:!0,get:function get(){return l.UnexpectedResponseException}}),Object.defineProperty(r,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function get(){return l.UNSUPPORTED_FEATURES}}),Object.defineProperty(r,"Util",{enumerable:!0,get:function get(){return l.Util}}),Object.defineProperty(r,"VerbosityLevel",{enumerable:!0,get:function get(){return l.VerbosityLevel}}),Object.defineProperty(r,"AnnotationLayer",{enumerable:!0,get:function get(){return u.AnnotationLayer}}),Object.defineProperty(r,"apiCompatibilityParams",{enumerable:!0,get:function get(){return c.apiCompatibilityParams}}),Object.defineProperty(r,"GlobalWorkerOptions",{enumerable:!0,get:function get(){return d.GlobalWorkerOptions}}),Object.defineProperty(r,"renderTextLayer",{enumerable:!0,get:function get(){return h.renderTextLayer}}),Object.defineProperty(r,"SVGGraphics",{enumerable:!0,get:function get(){return p.SVGGraphics}});var o=a(1),i=a(198),l=a(5),u=a(209),c=a(200),d=a(203),h=a(210),p=a(211);if(a(7).isNodeJS){var m=a(212).PDFNodeStream;(0,i.setPDFNetworkStreamFactory)((function(t){return new m(t)}))}else{var v,g=a(215).PDFNetworkStream;(0,o.isFetchSupported)()&&(v=a(216).PDFFetchStream),(0,i.setPDFNetworkStreamFactory)((function(t){return v&&(0,o.isValidFetchUrl)(t.url)?new v(t):new g(t)}))}},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.addLinkAttributes=function addLinkAttributes(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.url,o=r.target,u=r.rel,c=r.enabled,d=void 0===c||c;(0,i.assert)(a&&"string"==typeof a,'addLinkAttributes: A valid "url" parameter must provided.');var h=(0,i.removeNullCharacters)(a);d?t.href=t.title=h:(t.href="",t.title="Disabled: ".concat(h),t.onclick=function(){return!1});var p="";switch(o){case v.NONE:break;case v.SELF:p="_self";break;case v.BLANK:p="_blank";break;case v.PARENT:p="_parent";break;case v.TOP:p="_top"}t.target=p,t.rel="string"==typeof u?u:l},r.getFilenameFromUrl=function getFilenameFromUrl(t){var r=t.indexOf("#"),a=t.indexOf("?"),o=Math.min(r>0?r:t.length,a>0?a:t.length);return t.substring(t.lastIndexOf("/",o)+1,o)},r.isFetchSupported=isFetchSupported,r.isValidFetchUrl=isValidFetchUrl,r.loadScript=function loadScript(t){return new Promise((function(r,a){var o=document.createElement("script");o.src=t,o.onload=r,o.onerror=function(){a(new Error("Cannot load script at: ".concat(o.src)))},(document.head||document.documentElement).appendChild(o)}))},r.deprecated=function deprecated(t){console.log("Deprecated API usage: "+t)},r.PDFDateString=r.StatTimer=r.DOMSVGFactory=r.DOMCMapReaderFactory=r.DOMCanvasFactory=r.DEFAULT_LINK_REL=r.LinkTarget=r.RenderingCancelledException=r.PageViewport=void 0;var o=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(2)),i=a(5);function _createForOfIteratorHelper(t,r){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var o=0,i=function F(){};return{s:i,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,c=!1;return{s:function s(){a=t[Symbol.iterator]()},n:function n(){var t=a.next();return u=t.done,t},e:function e(t){c=!0,l=t},f:function f(){try{u||null==a.return||a.return()}finally{if(c)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,o=new Array(r);a<r;a++)o[a]=t[a];return o}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _setPrototypeOf(t,r){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t})(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var a,o=_getPrototypeOf(t);if(r){var i=_getPrototypeOf(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function asyncGeneratorStep(t,r,a,o,i,l,u){try{var c=t[l](u),d=c.value}catch(t){return void a(t)}c.done?r(d):Promise.resolve(d).then(o,i)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(o,i){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,o,i,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,o,i,_next,_throw,"throw",t)}_next(void 0)}))}}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var o=r[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}var l="noopener noreferrer nofollow";r.DEFAULT_LINK_REL=l;var u="http://www.w3.org/2000/svg",c=function(){function DOMCanvasFactory(){_classCallCheck(this,DOMCanvasFactory)}return _createClass(DOMCanvasFactory,[{key:"create",value:function create(t,r){if(t<=0||r<=0)throw new Error("Invalid canvas size");var a=document.createElement("canvas"),o=a.getContext("2d",{willReadFrequently:!0});return a.width=t,a.height=r,{canvas:a,context:o}}},{key:"reset",value:function reset(t,r,a){if(!t.canvas)throw new Error("Canvas is not specified");if(r<=0||a<=0)throw new Error("Invalid canvas size");t.canvas.width=r,t.canvas.height=a}},{key:"destroy",value:function destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}}]),DOMCanvasFactory}();r.DOMCanvasFactory=c;var d=function(){function DOMCMapReaderFactory(t){var r=t.baseUrl,a=void 0===r?null:r,o=t.isCompressed,i=void 0!==o&&o;_classCallCheck(this,DOMCMapReaderFactory),this.baseUrl=a,this.isCompressed=i}return _createClass(DOMCMapReaderFactory,[{key:"fetch",value:function(t){function fetch(r){return t.apply(this,arguments)}return fetch.toString=function(){return t.toString()},fetch}(function(){var t=_asyncToGenerator(o.default.mark((function _callee2(t){var r,a,l,u=this;return o.default.wrap((function _callee2$(c){for(;;)switch(c.prev=c.next){case 0:if(r=t.name,this.baseUrl){c.next=3;break}throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');case 3:if(r){c.next=5;break}throw new Error("CMap name must be specified.");case 5:if(a=this.baseUrl+r+(this.isCompressed?".bcmap":""),l=this.isCompressed?i.CMapCompressionType.BINARY:i.CMapCompressionType.NONE,!isFetchSupported()||!isValidFetchUrl(a,document.baseURI)){c.next=9;break}return c.abrupt("return",fetch(a).then(function(){var t=_asyncToGenerator(o.default.mark((function _callee(t){var r;return o.default.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:if(t.ok){a.next=2;break}throw new Error(t.statusText);case 2:if(!u.isCompressed){a.next=10;break}return a.t0=Uint8Array,a.next=6,t.arrayBuffer();case 6:a.t1=a.sent,r=new a.t0(a.t1),a.next=15;break;case 10:return a.t2=i.stringToBytes,a.next=13,t.text();case 13:a.t3=a.sent,r=(0,a.t2)(a.t3);case 15:return a.abrupt("return",{cMapData:r,compressionType:l});case 16:case"end":return a.stop()}}),_callee)})));return function(r){return t.apply(this,arguments)}}()).catch((function(t){throw new Error("Unable to load ".concat(u.isCompressed?"binary ":"")+"CMap at: ".concat(a))})));case 9:return c.abrupt("return",new Promise((function(t,r){var o=new XMLHttpRequest;o.open("GET",a,!0),u.isCompressed&&(o.responseType="arraybuffer"),o.onreadystatechange=function(){if(o.readyState===XMLHttpRequest.DONE){var a;if(200===o.status||0===o.status)if(u.isCompressed&&o.response?a=new Uint8Array(o.response):!u.isCompressed&&o.responseText&&(a=(0,i.stringToBytes)(o.responseText)),a)return void t({cMapData:a,compressionType:l});r(new Error(o.statusText))}},o.send(null)})).catch((function(t){throw new Error("Unable to load ".concat(u.isCompressed?"binary ":"")+"CMap at: ".concat(a))})));case 10:case"end":return c.stop()}}),_callee2,this)})));return function(r){return t.apply(this,arguments)}}())}]),DOMCMapReaderFactory}();r.DOMCMapReaderFactory=d;var h=function(){function DOMSVGFactory(){_classCallCheck(this,DOMSVGFactory)}return _createClass(DOMSVGFactory,[{key:"create",value:function create(t,r){(0,i.assert)(t>0&&r>0,"Invalid SVG dimensions");var a=document.createElementNS(u,"svg:svg");return a.setAttribute("version","1.1"),a.setAttribute("width",t+"px"),a.setAttribute("height",r+"px"),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox","0 0 "+t+" "+r),a}},{key:"createElement",value:function createElement(t){return(0,i.assert)("string"==typeof t,"Invalid SVG element type"),document.createElementNS(u,t)}}]),DOMSVGFactory}();r.DOMSVGFactory=h;var p=function(){function PageViewport(t){var r=t.viewBox,a=t.scale,o=t.rotation,i=t.offsetX,l=void 0===i?0:i,u=t.offsetY,c=void 0===u?0:u,d=t.dontFlip,h=void 0!==d&&d;_classCallCheck(this,PageViewport),this.viewBox=r,this.scale=a,this.rotation=o,this.offsetX=l,this.offsetY=c;var p,m,v,g,y,b,_,S,A=(r[2]+r[0])/2,C=(r[3]+r[1])/2;switch(o=(o%=360)<0?o+360:o){case 180:p=-1,m=0,v=0,g=1;break;case 90:p=0,m=1,v=1,g=0;break;case 270:p=0,m=-1,v=-1,g=0;break;case 0:p=1,m=0,v=0,g=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}h&&(v=-v,g=-g),0===p?(y=Math.abs(C-r[1])*a+l,b=Math.abs(A-r[0])*a+c,_=Math.abs(r[3]-r[1])*a,S=Math.abs(r[2]-r[0])*a):(y=Math.abs(A-r[0])*a+l,b=Math.abs(C-r[1])*a+c,_=Math.abs(r[2]-r[0])*a,S=Math.abs(r[3]-r[1])*a),this.transform=[p*a,m*a,v*a,g*a,y-p*a*A-v*a*C,b-m*a*A-g*a*C],this.width=_,this.height=S}return _createClass(PageViewport,[{key:"clone",value:function clone(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.scale,a=void 0===r?this.scale:r,o=t.rotation,i=void 0===o?this.rotation:o,l=t.offsetX,u=void 0===l?this.offsetX:l,c=t.offsetY,d=void 0===c?this.offsetY:c,h=t.dontFlip,p=void 0!==h&&h;return new PageViewport({viewBox:this.viewBox.slice(),scale:a,rotation:i,offsetX:u,offsetY:d,dontFlip:p})}},{key:"convertToViewportPoint",value:function convertToViewportPoint(t,r){return i.Util.applyTransform([t,r],this.transform)}},{key:"convertToViewportRectangle",value:function convertToViewportRectangle(t){var r=i.Util.applyTransform([t[0],t[1]],this.transform),a=i.Util.applyTransform([t[2],t[3]],this.transform);return[r[0],r[1],a[0],a[1]]}},{key:"convertToPdfPoint",value:function convertToPdfPoint(t,r){return i.Util.applyInverseTransform([t,r],this.transform)}}]),PageViewport}();r.PageViewport=p;var m=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}(RenderingCancelledException,t);var r=_createSuper(RenderingCancelledException);function RenderingCancelledException(t,a){var o;return _classCallCheck(this,RenderingCancelledException),(o=r.call(this,t)).type=a,o}return RenderingCancelledException}(i.BaseException);r.RenderingCancelledException=m;var v={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};r.LinkTarget=v;var g,y=function(){function StatTimer(){_classCallCheck(this,StatTimer),this.started=Object.create(null),this.times=[]}return _createClass(StatTimer,[{key:"time",value:function time(t){t in this.started&&(0,i.warn)("Timer is already running for ".concat(t)),this.started[t]=Date.now()}},{key:"timeEnd",value:function timeEnd(t){t in this.started||(0,i.warn)("Timer has not been started for ".concat(t)),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}},{key:"toString",value:function toString(){var t,r=[],a=0,o=_createForOfIteratorHelper(this.times);try{for(o.s();!(t=o.n()).done;){var i=t.value.name;i.length>a&&(a=i.length)}}catch(t){o.e(t)}finally{o.f()}var l,u=_createForOfIteratorHelper(this.times);try{for(u.s();!(l=u.n()).done;){var c=l.value,d=c.end-c.start;r.push("".concat(c.name.padEnd(a)," ").concat(d,"ms\n"))}}catch(t){u.e(t)}finally{u.f()}return r.join("")}}]),StatTimer}();function isFetchSupported(){return"undefined"!=typeof fetch&&"undefined"!=typeof Response&&"body"in Response.prototype&&"undefined"!=typeof ReadableStream}function isValidFetchUrl(t,r){try{var a=(r?new URL(t,r):new URL(t)).protocol;return"http:"===a||"https:"===a}catch(t){return!1}}r.StatTimer=y;var b=function(){function PDFDateString(){_classCallCheck(this,PDFDateString)}return _createClass(PDFDateString,null,[{key:"toDateObject",value:function toDateObject(t){if(!t||!(0,i.isString)(t))return null;g||(g=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));var r=g.exec(t);if(!r)return null;var a=parseInt(r[1],10),o=parseInt(r[2],10);o=o>=1&&o<=12?o-1:0;var l=parseInt(r[3],10);l=l>=1&&l<=31?l:1;var u=parseInt(r[4],10);u=u>=0&&u<=23?u:0;var c=parseInt(r[5],10);c=c>=0&&c<=59?c:0;var d=parseInt(r[6],10);d=d>=0&&d<=59?d:0;var h=r[7]||"Z",p=parseInt(r[8],10);p=p>=0&&p<=23?p:0;var m=parseInt(r[9],10)||0;return m=m>=0&&m<=59?m:0,"-"===h?(u+=p,c+=m):"+"===h&&(u-=p,c-=m),new Date(Date.UTC(a,o,l,u,c,d))}}]),PDFDateString}();r.PDFDateString=b},function(t,r,a){"use strict";t.exports=a(3)},function(t,r,a){"use strict";(function(t){function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=function(t){var r,a=Object.prototype,o=a.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},l=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function wrap(t,r,a,o){var i=r&&r.prototype instanceof Generator?r:Generator,l=Object.create(i.prototype),u=new Context(o||[]);return l._invoke=function makeInvokeMethod(t,r,a){var o=d;return function invoke(i,l){if(o===p)throw new Error("Generator is already running");if(o===m){if("throw"===i)throw l;return doneResult()}for(a.method=i,a.arg=l;;){var u=a.delegate;if(u){var c=maybeInvokeDelegate(u,a);if(c){if(c===v)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(o===d)throw o=m,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);o=p;var g=tryCatch(t,r,a);if("normal"===g.type){if(o=a.done?m:h,g.arg===v)continue;return{value:g.arg,done:a.done}}"throw"===g.type&&(o=m,a.method="throw",a.arg=g.arg)}}}(t,a,u),l}function tryCatch(t,r,a){try{return{type:"normal",arg:t.call(r,a)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d="suspendedStart",h="suspendedYield",p="executing",m="completed",v={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var g={};g[l]=function(){return this};var y=Object.getPrototypeOf,b=y&&y(y(values([])));b&&b!==a&&o.call(b,l)&&(g=b);var _=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(g);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){t[r]=function(t){return this._invoke(r,t)}}))}function AsyncIterator(t,r){function invoke(a,i,l,u){var c=tryCatch(t[a],t,i);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"===_typeof(h)&&o.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,u)}),(function(t){invoke("throw",t,l,u)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,u)}))}u(c.arg)}var a;this._invoke=function enqueue(t,o){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,o,r,a)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,a){var o=t.iterator[a.method];if(o===r){if(a.delegate=null,"throw"===a.method){if(t.iterator.return&&(a.method="return",a.arg=r,maybeInvokeDelegate(t,a),"throw"===a.method))return v;a.method="throw",a.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=tryCatch(o,t.iterator,a.arg);if("throw"===i.type)return a.method="throw",a.arg=i.arg,a.delegate=null,v;var l=i.arg;return l?l.done?(a[t.resultName]=l.value,a.next=t.nextLoc,"return"!==a.method&&(a.method="next",a.arg=r),a.delegate=null,v):l:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,v)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var a=t[l];if(a)return a.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,u=function next(){for(;++i<t.length;)if(o.call(t,i))return next.value=t[i],next.done=!1,next;return next.value=r,next.done=!0,next};return u.next=u}}return{next:doneResult}}function doneResult(){return{value:r,done:!0}}return GeneratorFunction.prototype=_.constructor=GeneratorFunctionPrototype,GeneratorFunctionPrototype.constructor=GeneratorFunction,GeneratorFunctionPrototype[c]=GeneratorFunction.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),AsyncIterator.prototype[u]=function(){return this},t.AsyncIterator=AsyncIterator,t.async=function(r,a,o,i,l){void 0===l&&(l=Promise);var u=new AsyncIterator(wrap(r,a,o,i),l);return t.isGeneratorFunction(a)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},defineIteratorMethods(_),_[c]="Generator",_[l]=function(){return this},_.toString=function(){return"[object Generator]"},t.keys=function(t){var r=[];for(var a in t)r.push(a);return r.reverse(),function next(){for(;r.length;){var a=r.pop();if(a in t)return next.value=a,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(resetTryEntry),!t)for(var a in this)"t"===a.charAt(0)&&o.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=r)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var a=this;function handle(o,i){return u.type="throw",u.arg=t,a.next=o,i&&(a.method="next",a.arg=r),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var l=this.tryEntries[i],u=l.completion;if("root"===l.tryLoc)return handle("end");if(l.tryLoc<=this.prev){var c=o.call(l,"catchLoc"),d=o.call(l,"finallyLoc");if(c&&d){if(this.prev<l.catchLoc)return handle(l.catchLoc,!0);if(this.prev<l.finallyLoc)return handle(l.finallyLoc)}else if(c){if(this.prev<l.catchLoc)return handle(l.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return handle(l.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&o.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var l=i;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var u=l?l.completion:{};return u.type=t,u.arg=r,l?(this.method="next",this.next=l.finallyLoc,v):this.complete(u)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),v},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),resetTryEntry(a),v}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc===t){var o=a.completion;if("throw"===o.type){var i=o.arg;resetTryEntry(a)}return i}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,a,o){return this.delegate={iterator:values(t),resultName:a,nextLoc:o},"next"===this.method&&(this.arg=r),v}},t}("object"===_typeof(t)?t.exports:{});try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}}).call(this,a(4)(t))},function(t,r,a){"use strict";t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function get(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function get(){return t.i}}),t.webpackPolyfill=1),t}},function(t,r,a){"use strict";function _defineProperties(t,r){for(var a=0;a<r.length;a++){var o=r[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t})(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var a,o=_getPrototypeOf(t);if(r){var i=_getPrototypeOf(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.arrayByteLength=arrayByteLength,r.arraysToBytes=function arraysToBytes(t){var r=t.length;if(1===r&&t[0]instanceof Uint8Array)return t[0];for(var a=0,o=0;o<r;o++)a+=arrayByteLength(t[o]);for(var i=0,l=new Uint8Array(a),u=0;u<r;u++){var c=t[u];c instanceof Uint8Array||(c="string"==typeof c?stringToBytes(c):new Uint8Array(c));var d=c.byteLength;l.set(c,i),i+=d}return l},r.assert=assert,r.bytesToString=function bytesToString(t){assert(null!==t&&"object"===_typeof(t)&&void 0!==t.length,"Invalid argument for bytesToString");var r=t.length,a=8192;if(r<a)return String.fromCharCode.apply(null,t);for(var o=[],i=0;i<r;i+=a){var l=Math.min(i+a,r),u=t.subarray(i,l);o.push(String.fromCharCode.apply(null,u))}return o.join("")},r.createPromiseCapability=function createPromiseCapability(){var t=Object.create(null),r=!1;return Object.defineProperty(t,"settled",{get:function get(){return r}}),t.promise=new Promise((function(a,o){t.resolve=function(t){r=!0,a(t)},t.reject=function(t){r=!0,o(t)}})),t},r.getVerbosityLevel=function getVerbosityLevel(){return i},r.info=function info(t){i>=o.INFOS&&console.log("Info: ".concat(t))},r.isArrayBuffer=function isArrayBuffer(t){return"object"===_typeof(t)&&null!==t&&void 0!==t.byteLength},r.isArrayEqual=function isArrayEqual(t,r){if(t.length!==r.length)return!1;return t.every((function(t,a){return t===r[a]}))},r.isBool=function isBool(t){return"boolean"==typeof t},r.isEmptyObj=function isEmptyObj(t){for(var r in t)return!1;return!0},r.isNum=function isNum(t){return"number"==typeof t},r.isString=function isString(t){return"string"==typeof t},r.isSameOrigin=function isSameOrigin(t,r){var a;try{if(!(a=new URL(t)).origin||"null"===a.origin)return!1}catch(t){return!1}var o=new URL(r,a);return a.origin===o.origin},r.createValidAbsoluteUrl=function createValidAbsoluteUrl(t,r){if(!t)return null;try{var a=r?new URL(t,r):new URL(t);if(function _isValidProtocol(t){if(!t)return!1;switch(t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(a))return a}catch(t){}return null},r.removeNullCharacters=function removeNullCharacters(t){if("string"!=typeof t)return warn("The argument for removeNullCharacters must be a string."),t;return t.replace(g,"")},r.setVerbosityLevel=function setVerbosityLevel(t){Number.isInteger(t)&&(i=t)},r.shadow=shadow,r.string32=function string32(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)},r.stringToBytes=stringToBytes,r.stringToPDFString=function stringToPDFString(t){var r=t.length,a=[];if(""===t[0]&&""===t[1])for(var o=2;o<r;o+=2)a.push(String.fromCharCode(t.charCodeAt(o)<<8|t.charCodeAt(o+1)));else if(""===t[0]&&""===t[1])for(var i=2;i<r;i+=2)a.push(String.fromCharCode(t.charCodeAt(i+1)<<8|t.charCodeAt(i)));else for(var l=0;l<r;++l){var u=A[t.charCodeAt(l)];a.push(u?String.fromCharCode(u):t.charAt(l))}return a.join("")},r.stringToUTF8String=function stringToUTF8String(t){return decodeURIComponent(escape(t))},r.utf8StringToString=function utf8StringToString(t){return unescape(encodeURIComponent(t))},r.warn=warn,r.unreachable=unreachable,r.IsEvalSupportedCached=r.IsLittleEndianCached=r.createObjectURL=r.FormatError=r.Util=r.UnknownErrorException=r.UnexpectedResponseException=r.TextRenderingMode=r.StreamType=r.PermissionFlag=r.PasswordResponses=r.PasswordException=r.MissingPDFException=r.InvalidPDFException=r.AbortException=r.CMapCompressionType=r.ImageKind=r.FontType=r.AnnotationType=r.AnnotationStateModelType=r.AnnotationReviewState=r.AnnotationReplyType=r.AnnotationMarkedState=r.AnnotationFlag=r.AnnotationFieldFlag=r.AnnotationBorderStyleType=r.UNSUPPORTED_FEATURES=r.VerbosityLevel=r.OPS=r.IDENTITY_MATRIX=r.FONT_IDENTITY_MATRIX=r.BaseException=void 0,a(6);r.IDENTITY_MATRIX=[1,0,0,1,0,0];r.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0];r.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};r.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};r.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};r.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};r.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"};r.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"};r.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};r.AnnotationReplyType={GROUP:"Group",REPLY:"R"};r.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};r.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};r.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};r.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};r.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};var o={ERRORS:0,WARNINGS:1,INFOS:5};r.VerbosityLevel=o;r.CMapCompressionType={NONE:0,BINARY:1,STREAM:2};r.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};r.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontGetPath:"errorFontGetPath"};r.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};var i=o.WARNINGS;function warn(t){i>=o.WARNINGS&&console.log("Warning: ".concat(t))}function unreachable(t){throw new Error(t)}function assert(t,r){t||unreachable(r)}function shadow(t,r,a){return Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!1}),a}var l=function BaseExceptionClosure(){function BaseException(t){this.constructor===BaseException&&unreachable("Cannot initialize BaseException."),this.message=t,this.name=this.constructor.name}return BaseException.prototype=new Error,BaseException.constructor=BaseException,BaseException}();r.BaseException=l;var u=function(t){_inherits(PasswordException,t);var r=_createSuper(PasswordException);function PasswordException(t,a){var o;return _classCallCheck(this,PasswordException),(o=r.call(this,t)).code=a,o}return PasswordException}(l);r.PasswordException=u;var c=function(t){_inherits(UnknownErrorException,t);var r=_createSuper(UnknownErrorException);function UnknownErrorException(t,a){var o;return _classCallCheck(this,UnknownErrorException),(o=r.call(this,t)).details=a,o}return UnknownErrorException}(l);r.UnknownErrorException=c;var d=function(t){_inherits(InvalidPDFException,t);var r=_createSuper(InvalidPDFException);function InvalidPDFException(){return _classCallCheck(this,InvalidPDFException),r.apply(this,arguments)}return InvalidPDFException}(l);r.InvalidPDFException=d;var h=function(t){_inherits(MissingPDFException,t);var r=_createSuper(MissingPDFException);function MissingPDFException(){return _classCallCheck(this,MissingPDFException),r.apply(this,arguments)}return MissingPDFException}(l);r.MissingPDFException=h;var p=function(t){_inherits(UnexpectedResponseException,t);var r=_createSuper(UnexpectedResponseException);function UnexpectedResponseException(t,a){var o;return _classCallCheck(this,UnexpectedResponseException),(o=r.call(this,t)).status=a,o}return UnexpectedResponseException}(l);r.UnexpectedResponseException=p;var m=function(t){_inherits(FormatError,t);var r=_createSuper(FormatError);function FormatError(){return _classCallCheck(this,FormatError),r.apply(this,arguments)}return FormatError}(l);r.FormatError=m;var v=function(t){_inherits(AbortException,t);var r=_createSuper(AbortException);function AbortException(){return _classCallCheck(this,AbortException),r.apply(this,arguments)}return AbortException}(l);r.AbortException=v;var g=/\x00/g;function stringToBytes(t){assert("string"==typeof t,"Invalid argument for stringToBytes");for(var r=t.length,a=new Uint8Array(r),o=0;o<r;++o)a[o]=255&t.charCodeAt(o);return a}function arrayByteLength(t){return void 0!==t.length?t.length:(assert(void 0!==t.byteLength,"arrayByteLength - invalid argument."),t.byteLength)}var y={get value(){return shadow(this,"value",function isLittleEndian(){var t=new Uint8Array(4);return t[0]=1,1===new Uint32Array(t.buffer,0,1)[0]}())}};r.IsLittleEndianCached=y;var b={get value(){return shadow(this,"value",function isEvalSupported(){try{return new Function(""),!0}catch(t){return!1}}())}};r.IsEvalSupportedCached=b;var _=["rgb(",0,",",0,",",0,")"],S=function(){function Util(){_classCallCheck(this,Util)}return function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}(Util,null,[{key:"makeCssRgb",value:function makeCssRgb(t,r,a){return _[1]=t,_[3]=r,_[5]=a,_.join("")}},{key:"transform",value:function transform(t,r){return[t[0]*r[0]+t[2]*r[1],t[1]*r[0]+t[3]*r[1],t[0]*r[2]+t[2]*r[3],t[1]*r[2]+t[3]*r[3],t[0]*r[4]+t[2]*r[5]+t[4],t[1]*r[4]+t[3]*r[5]+t[5]]}},{key:"applyTransform",value:function applyTransform(t,r){return[t[0]*r[0]+t[1]*r[2]+r[4],t[0]*r[1]+t[1]*r[3]+r[5]]}},{key:"applyInverseTransform",value:function applyInverseTransform(t,r){var a=r[0]*r[3]-r[1]*r[2];return[(t[0]*r[3]-t[1]*r[2]+r[2]*r[5]-r[4]*r[3])/a,(-t[0]*r[1]+t[1]*r[0]+r[4]*r[1]-r[5]*r[0])/a]}},{key:"getAxialAlignedBoundingBox",value:function getAxialAlignedBoundingBox(t,r){var a=Util.applyTransform(t,r),o=Util.applyTransform(t.slice(2,4),r),i=Util.applyTransform([t[0],t[3]],r),l=Util.applyTransform([t[2],t[1]],r);return[Math.min(a[0],o[0],i[0],l[0]),Math.min(a[1],o[1],i[1],l[1]),Math.max(a[0],o[0],i[0],l[0]),Math.max(a[1],o[1],i[1],l[1])]}},{key:"inverseTransform",value:function inverseTransform(t){var r=t[0]*t[3]-t[1]*t[2];return[t[3]/r,-t[1]/r,-t[2]/r,t[0]/r,(t[2]*t[5]-t[4]*t[3])/r,(t[4]*t[1]-t[5]*t[0])/r]}},{key:"apply3dTransform",value:function apply3dTransform(t,r){return[t[0]*r[0]+t[1]*r[1]+t[2]*r[2],t[3]*r[0]+t[4]*r[1]+t[5]*r[2],t[6]*r[0]+t[7]*r[1]+t[8]*r[2]]}},{key:"singularValueDecompose2dScale",value:function singularValueDecompose2dScale(t){var r=[t[0],t[2],t[1],t[3]],a=t[0]*r[0]+t[1]*r[2],o=t[0]*r[1]+t[1]*r[3],i=t[2]*r[0]+t[3]*r[2],l=t[2]*r[1]+t[3]*r[3],u=(a+l)/2,c=Math.sqrt((a+l)*(a+l)-4*(a*l-i*o))/2,d=u+c||1,h=u-c||1;return[Math.sqrt(d),Math.sqrt(h)]}},{key:"normalizeRect",value:function normalizeRect(t){var r=t.slice(0);return t[0]>t[2]&&(r[0]=t[2],r[2]=t[0]),t[1]>t[3]&&(r[1]=t[3],r[3]=t[1]),r}},{key:"intersect",value:function intersect(t,r){function compare(t,r){return t-r}var a=[t[0],t[2],r[0],r[2]].sort(compare),o=[t[1],t[3],r[1],r[3]].sort(compare),i=[];return t=Util.normalizeRect(t),r=Util.normalizeRect(r),a[0]===t[0]&&a[1]===r[0]||a[0]===r[0]&&a[1]===t[0]?(i[0]=a[1],i[2]=a[2],o[0]===t[1]&&o[1]===r[1]||o[0]===r[1]&&o[1]===t[1]?(i[1]=o[1],i[3]=o[2],i):null):null}}]),Util}();r.Util=S;var A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];var C=function createObjectURLClosure(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return function createObjectURL(r,a){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!o&&URL.createObjectURL){var i=new Blob([r],{type:a});return URL.createObjectURL(i)}for(var l="data:".concat(a,";base64,"),u=0,c=r.length;u<c;u+=3){var d=255&r[u],h=255&r[u+1],p=255&r[u+2],m=d>>2,v=(3&d)<<4|h>>4,g=u+1<c?(15&h)<<2|p>>6:64,y=u+2<c?63&p:64;l+=t[m]+t[v]+t[g]+t[y]}return l}}();r.createObjectURL=C},function(t,r,a){"use strict";var o=a(7);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}if("undefined"==typeof globalThis||!globalThis._pdfjsCompatibilityChecked){"undefined"!=typeof globalThis&&globalThis.Math===Math||(globalThis=a(8)),globalThis._pdfjsCompatibilityChecked=!0;var i="object"===("undefined"==typeof window?"undefined":_typeof(window))&&"object"===("undefined"==typeof document?"undefined":_typeof(document)),l="undefined"!=typeof navigator&&navigator.userAgent||"",u=/Trident/.test(l);!function checkNodeBtoa(){!globalThis.btoa&&o.isNodeJS&&(globalThis.btoa=function(t){return Buffer.from(t,"binary").toString("base64")})}(),function checkNodeAtob(){!globalThis.atob&&o.isNodeJS&&(globalThis.atob=function(t){return Buffer.from(t,"base64").toString("binary")})}(),function checkChildNodeRemove(){i&&void 0===Element.prototype.remove&&(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)})}(),function checkDOMTokenListAddRemove(){if(i&&!o.isNodeJS){var t=document.createElement("div");if(t.classList.add("testOne","testTwo"),!0!==t.classList.contains("testOne")||!0!==t.classList.contains("testTwo")){var r=DOMTokenList.prototype.add,a=DOMTokenList.prototype.remove;DOMTokenList.prototype.add=function(){for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];for(var i=0,l=a;i<l.length;i++){var u=l[i];r.call(this,u)}},DOMTokenList.prototype.remove=function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];for(var i=0,l=r;i<l.length;i++){var u=l[i];a.call(this,u)}}}}}(),function checkDOMTokenListToggle(){i&&!o.isNodeJS&&(!1!==document.createElement("div").classList.toggle("test",0)&&(DOMTokenList.prototype.toggle=function(t){var r=arguments.length>1?!!arguments[1]:!this.contains(t);return this[r?"add":"remove"](t),r}))}(),function checkWindowHistoryPushStateReplaceState(){if(i&&u){var t=window.history.pushState,r=window.history.replaceState;window.history.pushState=function(r,a,o){var i=void 0===o?[r,a]:[r,a,o];t.apply(this,i)},window.history.replaceState=function(t,a,o){var i=void 0===o?[t,a]:[t,a,o];r.apply(this,i)}}}(),function checkStringStartsWith(){String.prototype.startsWith||a(53)}(),function checkStringEndsWith(){String.prototype.endsWith||a(64)}(),function checkStringIncludes(){String.prototype.includes||a(66)}(),function checkArrayIncludes(){Array.prototype.includes||a(68)}(),function checkArrayFrom(){Array.from||a(76)}(),function checkObjectAssign(){Object.assign||a(98)}(),function checkMathLog2(){Math.log2||(Math.log2=a(101))}(),function checkNumberIsNaN(){Number.isNaN||(Number.isNaN=a(103))}(),function checkNumberIsInteger(){Number.isInteger||(Number.isInteger=a(105))}(),function checkTypedArraySlice(){Uint8Array.prototype.slice||a(108)}(),function checkPromise(){globalThis.Promise&&globalThis.Promise.allSettled||(globalThis.Promise=a(113))}(),function checkURL(){globalThis.URL=a(136)}(),function checkReadableStream(){var t=!1;if("undefined"!=typeof ReadableStream)try{new ReadableStream({start:function start(t){t.close()}}),t=!0}catch(t){}t||(globalThis.ReadableStream=a(143).ReadableStream)}(),function checkMapEntries(){globalThis.Map&&globalThis.Map.prototype.entries||(globalThis.Map=a(144))}(),function checkSetEntries(){globalThis.Set&&globalThis.Set.prototype.entries||(globalThis.Set=a(151))}(),function checkWeakMap(){globalThis.WeakMap||(globalThis.WeakMap=a(153))}(),function checkWeakSet(){globalThis.WeakSet||(globalThis.WeakSet=a(159))}(),function checkStringCodePointAt(){String.prototype.codePointAt||a(161)}(),function checkStringFromCodePoint(){String.fromCodePoint||(String.fromCodePoint=a(163))}(),function checkSymbol(){globalThis.Symbol||a(165)}(),function checkStringPadStart(){String.prototype.padStart||a(188)}(),function checkStringPadEnd(){String.prototype.padEnd||a(193)}(),function checkObjectValues(){Object.values||(Object.values=a(195))}()}},function(t,r,a){"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.isNodeJS=void 0;var o="object"===("undefined"==typeof process?"undefined":_typeof(process))&&process+""=="[object process]"&&!process.versions.nw&&!process.versions.electron;r.isNodeJS=o},function(t,r,a){a(9),t.exports=a(11)},function(t,r,a){a(10)({global:!0},{globalThis:a(11)})},function(t,r,a){var o=a(11),i=a(12).f,l=a(26),u=a(29),c=a(30),d=a(40),h=a(52);t.exports=function(t,r){var a,p,m,v,g,y=t.target,b=t.global,_=t.stat;if(a=b?o:_?o[y]||c(y,{}):(o[y]||{}).prototype)for(p in r){if(v=r[p],m=t.noTargetGet?(g=i(a,p))&&g.value:a[p],!h(b?p:y+(_?".":"#")+p,t.forced)&&void 0!==m){if(typeof v==typeof m)continue;d(v,m)}(t.sham||m&&m.sham)&&l(v,"sham",!0),u(a,p,v,t)}}},function(t,r){var check=function(t){return t&&t.Math==Math&&t};t.exports=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof global&&global)||Function("return this")()},function(t,r,a){var o=a(13),i=a(15),l=a(16),u=a(17),c=a(21),d=a(23),h=a(24),p=Object.getOwnPropertyDescriptor;r.f=o?p:function getOwnPropertyDescriptor(t,r){if(t=u(t),r=c(r,!0),h)try{return p(t,r)}catch(t){}if(d(t,r))return l(!i.f.call(t,r),t[r])}},function(t,r,a){var o=a(14);t.exports=!o((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(t,r){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,r,a){"use strict";var o={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,l=i&&!o.call({1:2},1);r.f=l?function propertyIsEnumerable(t){var r=i(this,t);return!!r&&r.enumerable}:o},function(t,r){t.exports=function(t,r){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:r}}},function(t,r,a){var o=a(18),i=a(20);t.exports=function(t){return o(i(t))}},function(t,r,a){var o=a(14),i=a(19),l="".split;t.exports=o((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?l.call(t,""):Object(t)}:Object},function(t,r){var a={}.toString;t.exports=function(t){return a.call(t).slice(8,-1)}},function(t,r){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,r,a){var o=a(22);t.exports=function(t,r){if(!o(t))return t;var a,i;if(r&&"function"==typeof(a=t.toString)&&!o(i=a.call(t)))return i;if("function"==typeof(a=t.valueOf)&&!o(i=a.call(t)))return i;if(!r&&"function"==typeof(a=t.toString)&&!o(i=a.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,r){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,r){var a={}.hasOwnProperty;t.exports=function(t,r){return a.call(t,r)}},function(t,r,a){var o=a(13),i=a(14),l=a(25);t.exports=!o&&!i((function(){return 7!=Object.defineProperty(l("div"),"a",{get:function(){return 7}}).a}))},function(t,r,a){var o=a(11),i=a(22),l=o.document,u=i(l)&&i(l.createElement);t.exports=function(t){return u?l.createElement(t):{}}},function(t,r,a){var o=a(13),i=a(27),l=a(16);t.exports=o?function(t,r,a){return i.f(t,r,l(1,a))}:function(t,r,a){return t[r]=a,t}},function(t,r,a){var o=a(13),i=a(24),l=a(28),u=a(21),c=Object.defineProperty;r.f=o?c:function defineProperty(t,r,a){if(l(t),r=u(r,!0),l(a),i)try{return c(t,r,a)}catch(t){}if("get"in a||"set"in a)throw TypeError("Accessors not supported");return"value"in a&&(t[r]=a.value),t}},function(t,r,a){var o=a(22);t.exports=function(t){if(!o(t))throw TypeError(String(t)+" is not an object");return t}},function(t,r,a){var o=a(11),i=a(26),l=a(23),u=a(30),c=a(31),d=a(33),h=d.get,p=d.enforce,m=String(String).split("String");(t.exports=function(t,r,a,c){var d=!!c&&!!c.unsafe,h=!!c&&!!c.enumerable,v=!!c&&!!c.noTargetGet;"function"==typeof a&&("string"!=typeof r||l(a,"name")||i(a,"name",r),p(a).source=m.join("string"==typeof r?r:"")),t!==o?(d?!v&&t[r]&&(h=!0):delete t[r],h?t[r]=a:i(t,r,a)):h?t[r]=a:u(r,a)})(Function.prototype,"toString",(function toString(){return"function"==typeof this&&h(this).source||c(this)}))},function(t,r,a){var o=a(11),i=a(26);t.exports=function(t,r){try{i(o,t,r)}catch(a){o[t]=r}return r}},function(t,r,a){var o=a(32),i=Function.toString;"function"!=typeof o.inspectSource&&(o.inspectSource=function(t){return i.call(t)}),t.exports=o.inspectSource},function(t,r,a){var o=a(11),i=a(30),l="__core-js_shared__",u=o[l]||i(l,{});t.exports=u},function(t,r,a){var o,i,l,u=a(34),c=a(11),d=a(22),h=a(26),p=a(23),m=a(35),v=a(39),g=c.WeakMap;if(u){var y=new g,b=y.get,_=y.has,S=y.set;o=function(t,r){return S.call(y,t,r),r},i=function(t){return b.call(y,t)||{}},l=function(t){return _.call(y,t)}}else{var A=m("state");v[A]=!0,o=function(t,r){return h(t,A,r),r},i=function(t){return p(t,A)?t[A]:{}},l=function(t){return p(t,A)}}t.exports={set:o,get:i,has:l,enforce:function(t){return l(t)?i(t):o(t,{})},getterFor:function(t){return function(r){var a;if(!d(r)||(a=i(r)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return a}}}},function(t,r,a){var o=a(11),i=a(31),l=o.WeakMap;t.exports="function"==typeof l&&/native code/.test(i(l))},function(t,r,a){var o=a(36),i=a(38),l=o("keys");t.exports=function(t){return l[t]||(l[t]=i(t))}},function(t,r,a){var o=a(37),i=a(32);(t.exports=function(t,r){return i[t]||(i[t]=void 0!==r?r:{})})("versions",[]).push({version:"3.6.5",mode:o?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},function(t,r){t.exports=!1},function(t,r){var a=0,o=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++a+o).toString(36)}},function(t,r){t.exports={}},function(t,r,a){var o=a(23),i=a(41),l=a(12),u=a(27);t.exports=function(t,r){for(var a=i(r),c=u.f,d=l.f,h=0;h<a.length;h++){var p=a[h];o(t,p)||c(t,p,d(r,p))}}},function(t,r,a){var o=a(42),i=a(44),l=a(51),u=a(28);t.exports=o("Reflect","ownKeys")||function ownKeys(t){var r=i.f(u(t)),a=l.f;return a?r.concat(a(t)):r}},function(t,r,a){var o=a(43),i=a(11),aFunction=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,r){return arguments.length<2?aFunction(o[t])||aFunction(i[t]):o[t]&&o[t][r]||i[t]&&i[t][r]}},function(t,r,a){var o=a(11);t.exports=o},function(t,r,a){var o=a(45),i=a(50).concat("length","prototype");r.f=Object.getOwnPropertyNames||function getOwnPropertyNames(t){return o(t,i)}},function(t,r,a){var o=a(23),i=a(17),l=a(46).indexOf,u=a(39);t.exports=function(t,r){var a,c=i(t),d=0,h=[];for(a in c)!o(u,a)&&o(c,a)&&h.push(a);for(;r.length>d;)o(c,a=r[d++])&&(~l(h,a)||h.push(a));return h}},function(t,r,a){var o=a(17),i=a(47),l=a(49),createMethod=function(t){return function(r,a,u){var c,d=o(r),h=i(d.length),p=l(u,h);if(t&&a!=a){for(;h>p;)if((c=d[p++])!=c)return!0}else for(;h>p;p++)if((t||p in d)&&d[p]===a)return t||p||0;return!t&&-1}};t.exports={includes:createMethod(!0),indexOf:createMethod(!1)}},function(t,r,a){var o=a(48),i=Math.min;t.exports=function(t){return t>0?i(o(t),9007199254740991):0}},function(t,r){var a=Math.ceil,o=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?o:a)(t)}},function(t,r,a){var o=a(48),i=Math.max,l=Math.min;t.exports=function(t,r){var a=o(t);return a<0?i(a+r,0):l(a,r)}},function(t,r){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,r){r.f=Object.getOwnPropertySymbols},function(t,r,a){var o=a(14),i=/#|\.prototype\./,isForced=function(t,r){var a=u[l(t)];return a==d||a!=c&&("function"==typeof r?o(r):!!r)},l=isForced.normalize=function(t){return String(t).replace(i,".").toLowerCase()},u=isForced.data={},c=isForced.NATIVE="N",d=isForced.POLYFILL="P";t.exports=isForced},function(t,r,a){a(54);var o=a(61);t.exports=o("String","startsWith")},function(t,r,a){"use strict";var o,i=a(10),l=a(12).f,u=a(47),c=a(55),d=a(20),h=a(60),p=a(37),m="".startsWith,v=Math.min,g=h("startsWith");i({target:"String",proto:!0,forced:!!(p||g||(o=l(String.prototype,"startsWith"),!o||o.writable))&&!g},{startsWith:function startsWith(t){var r=String(d(this));c(t);var a=u(v(arguments.length>1?arguments[1]:void 0,r.length)),o=String(t);return m?m.call(r,o,a):r.slice(a,a+o.length)===o}})},function(t,r,a){var o=a(56);t.exports=function(t){if(o(t))throw TypeError("The method doesn't accept regular expressions");return t}},function(t,r,a){var o=a(22),i=a(19),l=a(57)("match");t.exports=function(t){var r;return o(t)&&(void 0!==(r=t[l])?!!r:"RegExp"==i(t))}},function(t,r,a){var o=a(11),i=a(36),l=a(23),u=a(38),c=a(58),d=a(59),h=i("wks"),p=o.Symbol,m=d?p:p&&p.withoutSetter||u;t.exports=function(t){return l(h,t)||(c&&l(p,t)?h[t]=p[t]:h[t]=m("Symbol."+t)),h[t]}},function(t,r,a){var o=a(14);t.exports=!!Object.getOwnPropertySymbols&&!o((function(){return!String(Symbol())}))},function(t,r,a){var o=a(58);t.exports=o&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,r,a){var o=a(57)("match");t.exports=function(t){var r=/./;try{"/./"[t](r)}catch(a){try{return r[o]=!1,"/./"[t](r)}catch(t){}}return!1}},function(t,r,a){var o=a(11),i=a(62),l=Function.call;t.exports=function(t,r,a){return i(l,o[t].prototype[r],a)}},function(t,r,a){var o=a(63);t.exports=function(t,r,a){if(o(t),void 0===r)return t;switch(a){case 0:return function(){return t.call(r)};case 1:return function(a){return t.call(r,a)};case 2:return function(a,o){return t.call(r,a,o)};case 3:return function(a,o,i){return t.call(r,a,o,i)}}return function(){return t.apply(r,arguments)}}},function(t,r){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,r,a){a(65);var o=a(61);t.exports=o("String","endsWith")},function(t,r,a){"use strict";var o,i=a(10),l=a(12).f,u=a(47),c=a(55),d=a(20),h=a(60),p=a(37),m="".endsWith,v=Math.min,g=h("endsWith");i({target:"String",proto:!0,forced:!!(p||g||(o=l(String.prototype,"endsWith"),!o||o.writable))&&!g},{endsWith:function endsWith(t){var r=String(d(this));c(t);var a=arguments.length>1?arguments[1]:void 0,o=u(r.length),i=void 0===a?o:v(u(a),o),l=String(t);return m?m.call(r,l,i):r.slice(i-l.length,i)===l}})},function(t,r,a){a(67);var o=a(61);t.exports=o("String","includes")},function(t,r,a){"use strict";var o=a(10),i=a(55),l=a(20);o({target:"String",proto:!0,forced:!a(60)("includes")},{includes:function includes(t){return!!~String(l(this)).indexOf(i(t),arguments.length>1?arguments[1]:void 0)}})},function(t,r,a){a(69);var o=a(61);t.exports=o("Array","includes")},function(t,r,a){"use strict";var o=a(10),i=a(46).includes,l=a(70);o({target:"Array",proto:!0,forced:!a(75)("indexOf",{ACCESSORS:!0,1:0})},{includes:function includes(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),l("includes")},function(t,r,a){var o=a(57),i=a(71),l=a(27),u=o("unscopables"),c=Array.prototype;null==c[u]&&l.f(c,u,{configurable:!0,value:i(null)}),t.exports=function(t){c[u][t]=!0}},function(t,r,a){var o,i=a(28),l=a(72),u=a(50),c=a(39),d=a(74),h=a(25),p=a(35),m=p("IE_PROTO"),EmptyConstructor=function(){},scriptTag=function(t){return"<script>"+t+"</"+"script>"},NullProtoObject=function(){try{o=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,r;NullProtoObject=o?function(t){t.write(scriptTag("")),t.close();var r=t.parentWindow.Object;return t=null,r}(o):((r=h("iframe")).style.display="none",d.appendChild(r),r.src=String("javascript:"),(t=r.contentWindow.document).open(),t.write(scriptTag("document.F=Object")),t.close(),t.F);for(var a=u.length;a--;)delete NullProtoObject.prototype[u[a]];return NullProtoObject()};c[m]=!0,t.exports=Object.create||function create(t,r){var a;return null!==t?(EmptyConstructor.prototype=i(t),a=new EmptyConstructor,EmptyConstructor.prototype=null,a[m]=t):a=NullProtoObject(),void 0===r?a:l(a,r)}},function(t,r,a){var o=a(13),i=a(27),l=a(28),u=a(73);t.exports=o?Object.defineProperties:function defineProperties(t,r){l(t);for(var a,o=u(r),c=o.length,d=0;c>d;)i.f(t,a=o[d++],r[a]);return t}},function(t,r,a){var o=a(45),i=a(50);t.exports=Object.keys||function keys(t){return o(t,i)}},function(t,r,a){var o=a(42);t.exports=o("document","documentElement")},function(t,r,a){var o=a(13),i=a(14),l=a(23),u=Object.defineProperty,c={},thrower=function(t){throw t};t.exports=function(t,r){if(l(c,t))return c[t];r||(r={});var a=[][t],d=!!l(r,"ACCESSORS")&&r.ACCESSORS,h=l(r,0)?r[0]:thrower,p=l(r,1)?r[1]:void 0;return c[t]=!!a&&!i((function(){if(d&&!o)return!0;var t={length:-1};d?u(t,1,{enumerable:!0,get:thrower}):t[1]=1,a.call(t,h,p)}))}},function(t,r,a){a(77),a(89);var o=a(43);t.exports=o.Array.from},function(t,r,a){"use strict";var o=a(78).charAt,i=a(33),l=a(79),u="String Iterator",c=i.set,d=i.getterFor(u);l(String,"String",(function(t){c(this,{type:u,string:String(t),index:0})}),(function next(){var t,r=d(this),a=r.string,i=r.index;return i>=a.length?{value:void 0,done:!0}:(t=o(a,i),r.index+=t.length,{value:t,done:!1})}))},function(t,r,a){var o=a(48),i=a(20),createMethod=function(t){return function(r,a){var l,u,c=String(i(r)),d=o(a),h=c.length;return d<0||d>=h?t?"":void 0:(l=c.charCodeAt(d))<55296||l>56319||d+1===h||(u=c.charCodeAt(d+1))<56320||u>57343?t?c.charAt(d):l:t?c.slice(d,d+2):u-56320+(l-55296<<10)+65536}};t.exports={codeAt:createMethod(!1),charAt:createMethod(!0)}},function(t,r,a){"use strict";var o=a(10),i=a(80),l=a(82),u=a(87),c=a(85),d=a(26),h=a(29),p=a(57),m=a(37),v=a(86),g=a(81),y=g.IteratorPrototype,b=g.BUGGY_SAFARI_ITERATORS,_=p("iterator"),S="keys",A="values",C="entries",returnThis=function(){return this};t.exports=function(t,r,a,p,g,R,k){i(a,r,p);var P,w,x,getIterationMethod=function(t){if(t===g&&D)return D;if(!b&&t in O)return O[t];switch(t){case S:return function keys(){return new a(this,t)};case A:return function values(){return new a(this,t)};case C:return function entries(){return new a(this,t)}}return function(){return new a(this)}},T=r+" Iterator",E=!1,O=t.prototype,I=O[_]||O["@@iterator"]||g&&O[g],D=!b&&I||getIterationMethod(g),L="Array"==r&&O.entries||I;if(L&&(P=l(L.call(new t)),y!==Object.prototype&&P.next&&(m||l(P)===y||(u?u(P,y):"function"!=typeof P[_]&&d(P,_,returnThis)),c(P,T,!0,!0),m&&(v[T]=returnThis))),g==A&&I&&I.name!==A&&(E=!0,D=function values(){return I.call(this)}),m&&!k||O[_]===D||d(O,_,D),v[r]=D,g)if(w={values:getIterationMethod(A),keys:R?D:getIterationMethod(S),entries:getIterationMethod(C)},k)for(x in w)(b||E||!(x in O))&&h(O,x,w[x]);else o({target:r,proto:!0,forced:b||E},w);return w}},function(t,r,a){"use strict";var o=a(81).IteratorPrototype,i=a(71),l=a(16),u=a(85),c=a(86),returnThis=function(){return this};t.exports=function(t,r,a){var d=r+" Iterator";return t.prototype=i(o,{next:l(1,a)}),u(t,d,!1,!0),c[d]=returnThis,t}},function(t,r,a){"use strict";var o,i,l,u=a(82),c=a(26),d=a(23),h=a(57),p=a(37),m=h("iterator"),v=!1;[].keys&&("next"in(l=[].keys())?(i=u(u(l)))!==Object.prototype&&(o=i):v=!0),null==o&&(o={}),p||d(o,m)||c(o,m,(function(){return this})),t.exports={IteratorPrototype:o,BUGGY_SAFARI_ITERATORS:v}},function(t,r,a){var o=a(23),i=a(83),l=a(35),u=a(84),c=l("IE_PROTO"),d=Object.prototype;t.exports=u?Object.getPrototypeOf:function(t){return t=i(t),o(t,c)?t[c]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?d:null}},function(t,r,a){var o=a(20);t.exports=function(t){return Object(o(t))}},function(t,r,a){var o=a(14);t.exports=!o((function(){function F(){}return F.prototype.constructor=null,Object.getPrototypeOf(new F)!==F.prototype}))},function(t,r,a){var o=a(27).f,i=a(23),l=a(57)("toStringTag");t.exports=function(t,r,a){t&&!i(t=a?t:t.prototype,l)&&o(t,l,{configurable:!0,value:r})}},function(t,r){t.exports={}},function(t,r,a){var o=a(28),i=a(88);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,r=!1,a={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(a,[]),r=a instanceof Array}catch(t){}return function setPrototypeOf(a,l){return o(a),i(l),r?t.call(a,l):a.__proto__=l,a}}():void 0)},function(t,r,a){var o=a(22);t.exports=function(t){if(!o(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},function(t,r,a){var o=a(10),i=a(90);o({target:"Array",stat:!0,forced:!a(97)((function(t){Array.from(t)}))},{from:i})},function(t,r,a){"use strict";var o=a(62),i=a(83),l=a(91),u=a(92),c=a(47),d=a(93),h=a(94);t.exports=function from(t){var r,a,p,m,v,g,y=i(t),b="function"==typeof this?this:Array,_=arguments.length,S=_>1?arguments[1]:void 0,A=void 0!==S,C=h(y),R=0;if(A&&(S=o(S,_>2?arguments[2]:void 0,2)),null==C||b==Array&&u(C))for(a=new b(r=c(y.length));r>R;R++)g=A?S(y[R],R):y[R],d(a,R,g);else for(v=(m=C.call(y)).next,a=new b;!(p=v.call(m)).done;R++)g=A?l(m,S,[p.value,R],!0):p.value,d(a,R,g);return a.length=R,a}},function(t,r,a){var o=a(28);t.exports=function(t,r,a,i){try{return i?r(o(a)[0],a[1]):r(a)}catch(r){var l=t.return;throw void 0!==l&&o(l.call(t)),r}}},function(t,r,a){var o=a(57),i=a(86),l=o("iterator"),u=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||u[l]===t)}},function(t,r,a){"use strict";var o=a(21),i=a(27),l=a(16);t.exports=function(t,r,a){var u=o(r);u in t?i.f(t,u,l(0,a)):t[u]=a}},function(t,r,a){var o=a(95),i=a(86),l=a(57)("iterator");t.exports=function(t){if(null!=t)return t[l]||t["@@iterator"]||i[o(t)]}},function(t,r,a){var o=a(96),i=a(19),l=a(57)("toStringTag"),u="Arguments"==i(function(){return arguments}());t.exports=o?i:function(t){var r,a,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(a=function(t,r){try{return t[r]}catch(t){}}(r=Object(t),l))?a:u?i(r):"Object"==(o=i(r))&&"function"==typeof r.callee?"Arguments":o}},function(t,r,a){var o={};o[a(57)("toStringTag")]="z",t.exports="[object z]"===String(o)},function(t,r,a){var o=a(57)("iterator"),i=!1;try{var l=0,u={next:function(){return{done:!!l++}},return:function(){i=!0}};u[o]=function(){return this},Array.from(u,(function(){throw 2}))}catch(t){}t.exports=function(t,r){if(!r&&!i)return!1;var a=!1;try{var l={};l[o]=function(){return{next:function(){return{done:a=!0}}}},t(l)}catch(t){}return a}},function(t,r,a){a(99);var o=a(43);t.exports=o.Object.assign},function(t,r,a){var o=a(10),i=a(100);o({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},function(t,r,a){"use strict";var o=a(13),i=a(14),l=a(73),u=a(51),c=a(15),d=a(83),h=a(18),p=Object.assign,m=Object.defineProperty;t.exports=!p||i((function(){if(o&&1!==p({b:1},p(m({},"a",{enumerable:!0,get:function(){m(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},r={},a=Symbol(),i="abcdefghijklmnopqrst";return t[a]=7,i.split("").forEach((function(t){r[t]=t})),7!=p({},t)[a]||l(p({},r)).join("")!=i}))?function assign(t,r){for(var a=d(t),i=arguments.length,p=1,m=u.f,v=c.f;i>p;)for(var g,y=h(arguments[p++]),b=m?l(y).concat(m(y)):l(y),_=b.length,S=0;_>S;)g=b[S++],o&&!v.call(y,g)||(a[g]=y[g]);return a}:p},function(t,r,a){a(102);var o=a(43);t.exports=o.Math.log2},function(t,r,a){var o=a(10),i=Math.log,l=Math.LN2;o({target:"Math",stat:!0},{log2:function log2(t){return i(t)/l}})},function(t,r,a){a(104);var o=a(43);t.exports=o.Number.isNaN},function(t,r,a){a(10)({target:"Number",stat:!0},{isNaN:function isNaN(t){return t!=t}})},function(t,r,a){a(106);var o=a(43);t.exports=o.Number.isInteger},function(t,r,a){a(10)({target:"Number",stat:!0},{isInteger:a(107)})},function(t,r,a){var o=a(22),i=Math.floor;t.exports=function isInteger(t){return!o(t)&&isFinite(t)&&i(t)===t}},function(t,r,a){a(109)},function(t,r,a){"use strict";var o=a(110),i=a(112),l=a(14),u=o.aTypedArray,c=o.aTypedArrayConstructor,d=o.exportTypedArrayMethod,h=[].slice;d("slice",(function slice(t,r){for(var a=h.call(u(this),t,r),o=i(this,this.constructor),l=0,d=a.length,p=new(c(o))(d);d>l;)p[l]=a[l++];return p}),l((function(){new Int8Array(1).slice()})))},function(t,r,a){"use strict";var o,i=a(111),l=a(13),u=a(11),c=a(22),d=a(23),h=a(95),p=a(26),m=a(29),v=a(27).f,g=a(82),y=a(87),b=a(57),_=a(38),S=u.Int8Array,A=S&&S.prototype,C=u.Uint8ClampedArray,R=C&&C.prototype,k=S&&g(S),P=A&&g(A),w=Object.prototype,x=w.isPrototypeOf,T=b("toStringTag"),E=_("TYPED_ARRAY_TAG"),O=i&&!!y&&"Opera"!==h(u.opera),I=!1,D={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},isTypedArray=function(t){return c(t)&&d(D,h(t))};for(o in D)u[o]||(O=!1);if((!O||"function"!=typeof k||k===Function.prototype)&&(k=function TypedArray(){throw TypeError("Incorrect invocation")},O))for(o in D)u[o]&&y(u[o],k);if((!O||!P||P===w)&&(P=k.prototype,O))for(o in D)u[o]&&y(u[o].prototype,P);if(O&&g(R)!==P&&y(R,P),l&&!d(P,T))for(o in I=!0,v(P,T,{get:function(){return c(this)?this[E]:void 0}}),D)u[o]&&p(u[o],E,o);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:O,TYPED_ARRAY_TAG:I&&E,aTypedArray:function(t){if(isTypedArray(t))return t;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(t){if(y){if(x.call(k,t))return t}else for(var r in D)if(d(D,o)){var a=u[r];if(a&&(t===a||x.call(a,t)))return t}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(t,r,a){if(l){if(a)for(var o in D){var i=u[o];i&&d(i.prototype,t)&&delete i.prototype[t]}P[t]&&!a||m(P,t,a?r:O&&A[t]||r)}},exportTypedArrayStaticMethod:function(t,r,a){var o,i;if(l){if(y){if(a)for(o in D)(i=u[o])&&d(i,t)&&delete i[t];if(k[t]&&!a)return;try{return m(k,t,a?r:O&&S[t]||r)}catch(t){}}for(o in D)!(i=u[o])||i[t]&&!a||m(i,t,r)}},isView:function isView(t){var r=h(t);return"DataView"===r||d(D,r)},isTypedArray:isTypedArray,TypedArray:k,TypedArrayPrototype:P}},function(t,r){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},function(t,r,a){var o=a(28),i=a(63),l=a(57)("species");t.exports=function(t,r){var a,u=o(t).constructor;return void 0===u||null==(a=o(u)[l])?r:i(a)}},function(t,r,a){a(114),a(77),a(116),a(119),a(134),a(135);var o=a(43);t.exports=o.Promise},function(t,r,a){var o=a(96),i=a(29),l=a(115);o||i(Object.prototype,"toString",l,{unsafe:!0})},function(t,r,a){"use strict";var o=a(96),i=a(95);t.exports=o?{}.toString:function toString(){return"[object "+i(this)+"]"}},function(t,r,a){var o=a(11),i=a(117),l=a(118),u=a(26),c=a(57),d=c("iterator"),h=c("toStringTag"),p=l.values;for(var m in i){var v=o[m],g=v&&v.prototype;if(g){if(g[d]!==p)try{u(g,d,p)}catch(t){g[d]=p}if(g[h]||u(g,h,m),i[m])for(var y in l)if(g[y]!==l[y])try{u(g,y,l[y])}catch(t){g[y]=l[y]}}}},function(t,r){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,r,a){"use strict";var o=a(17),i=a(70),l=a(86),u=a(33),c=a(79),d="Array Iterator",h=u.set,p=u.getterFor(d);t.exports=c(Array,"Array",(function(t,r){h(this,{type:d,target:o(t),index:0,kind:r})}),(function(){var t=p(this),r=t.target,a=t.kind,o=t.index++;return!r||o>=r.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==a?{value:o,done:!1}:"values"==a?{value:r[o],done:!1}:{value:[o,r[o]],done:!1}}),"values"),l.Arguments=l.Array,i("keys"),i("values"),i("entries")},function(t,r,a){"use strict";var o,i,l,u,c=a(10),d=a(37),h=a(11),p=a(42),m=a(120),v=a(29),g=a(121),y=a(85),b=a(122),_=a(22),S=a(63),A=a(123),C=a(19),R=a(31),k=a(124),P=a(97),w=a(112),x=a(125).set,T=a(128),E=a(129),O=a(131),I=a(130),D=a(132),L=a(33),W=a(52),M=a(57),j=a(133),N=M("species"),B="Promise",q=L.get,G=L.set,U=L.getterFor(B),z=m,H=h.TypeError,Y=h.document,X=h.process,V=p("fetch"),Q=I.f,K=Q,J="process"==C(X),$=!!(Y&&Y.createEvent&&h.dispatchEvent),Z="unhandledrejection",ee=W(B,(function(){if(!(R(z)!==String(z))){if(66===j)return!0;if(!J&&"function"!=typeof PromiseRejectionEvent)return!0}if(d&&!z.prototype.finally)return!0;if(j>=51&&/native code/.test(z))return!1;var t=z.resolve(1),FakePromise=function(t){t((function(){}),(function(){}))};return(t.constructor={})[N]=FakePromise,!(t.then((function(){}))instanceof FakePromise)})),te=ee||!P((function(t){z.all(t).catch((function(){}))})),isThenable=function(t){var r;return!(!_(t)||"function"!=typeof(r=t.then))&&r},notify=function(t,r,a){if(!r.notified){r.notified=!0;var o=r.reactions;T((function(){for(var i=r.value,l=1==r.state,u=0;o.length>u;){var c,d,h,p=o[u++],m=l?p.ok:p.fail,v=p.resolve,g=p.reject,y=p.domain;try{m?(l||(2===r.rejection&&onHandleUnhandled(t,r),r.rejection=1),!0===m?c=i:(y&&y.enter(),c=m(i),y&&(y.exit(),h=!0)),c===p.promise?g(H("Promise-chain cycle")):(d=isThenable(c))?d.call(c,v,g):v(c)):g(i)}catch(t){y&&!h&&y.exit(),g(t)}}r.reactions=[],r.notified=!1,a&&!r.rejection&&onUnhandled(t,r)}))}},dispatchEvent=function(t,r,a){var o,i;$?((o=Y.createEvent("Event")).promise=r,o.reason=a,o.initEvent(t,!1,!0),h.dispatchEvent(o)):o={promise:r,reason:a},(i=h["on"+t])?i(o):t===Z&&O("Unhandled promise rejection",a)},onUnhandled=function(t,r){x.call(h,(function(){var a,o=r.value;if(isUnhandled(r)&&(a=D((function(){J?X.emit("unhandledRejection",o,t):dispatchEvent(Z,t,o)})),r.rejection=J||isUnhandled(r)?2:1,a.error))throw a.value}))},isUnhandled=function(t){return 1!==t.rejection&&!t.parent},onHandleUnhandled=function(t,r){x.call(h,(function(){J?X.emit("rejectionHandled",t):dispatchEvent("rejectionhandled",t,r.value)}))},bind=function(t,r,a,o){return function(i){t(r,a,i,o)}},internalReject=function(t,r,a,o){r.done||(r.done=!0,o&&(r=o),r.value=a,r.state=2,notify(t,r,!0))},internalResolve=function(t,r,a,o){if(!r.done){r.done=!0,o&&(r=o);try{if(t===a)throw H("Promise can't be resolved itself");var i=isThenable(a);i?T((function(){var o={done:!1};try{i.call(a,bind(internalResolve,t,o,r),bind(internalReject,t,o,r))}catch(a){internalReject(t,o,a,r)}})):(r.value=a,r.state=1,notify(t,r,!1))}catch(a){internalReject(t,{done:!1},a,r)}}};ee&&(z=function Promise(t){A(this,z,B),S(t),o.call(this);var r=q(this);try{t(bind(internalResolve,this,r),bind(internalReject,this,r))}catch(t){internalReject(this,r,t)}},(o=function Promise(t){G(this,{type:B,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=g(z.prototype,{then:function then(t,r){var a=U(this),o=Q(w(this,z));return o.ok="function"!=typeof t||t,o.fail="function"==typeof r&&r,o.domain=J?X.domain:void 0,a.parent=!0,a.reactions.push(o),0!=a.state&&notify(this,a,!1),o.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new o,r=q(t);this.promise=t,this.resolve=bind(internalResolve,t,r),this.reject=bind(internalReject,t,r)},I.f=Q=function(t){return t===z||t===l?new i(t):K(t)},d||"function"!=typeof m||(u=m.prototype.then,v(m.prototype,"then",(function then(t,r){var a=this;return new z((function(t,r){u.call(a,t,r)})).then(t,r)}),{unsafe:!0}),"function"==typeof V&&c({global:!0,enumerable:!0,forced:!0},{fetch:function fetch(t){return E(z,V.apply(h,arguments))}}))),c({global:!0,wrap:!0,forced:ee},{Promise:z}),y(z,B,!1,!0),b(B),l=p(B),c({target:B,stat:!0,forced:ee},{reject:function reject(t){var r=Q(this);return r.reject.call(void 0,t),r.promise}}),c({target:B,stat:!0,forced:d||ee},{resolve:function resolve(t){return E(d&&this===l?z:this,t)}}),c({target:B,stat:!0,forced:te},{all:function all(t){var r=this,a=Q(r),o=a.resolve,i=a.reject,l=D((function(){var a=S(r.resolve),l=[],u=0,c=1;k(t,(function(t){var d=u++,h=!1;l.push(void 0),c++,a.call(r,t).then((function(t){h||(h=!0,l[d]=t,--c||o(l))}),i)})),--c||o(l)}));return l.error&&i(l.value),a.promise},race:function race(t){var r=this,a=Q(r),o=a.reject,i=D((function(){var i=S(r.resolve);k(t,(function(t){i.call(r,t).then(a.resolve,o)}))}));return i.error&&o(i.value),a.promise}})},function(t,r,a){var o=a(11);t.exports=o.Promise},function(t,r,a){var o=a(29);t.exports=function(t,r,a){for(var i in r)o(t,i,r[i],a);return t}},function(t,r,a){"use strict";var o=a(42),i=a(27),l=a(57),u=a(13),c=l("species");t.exports=function(t){var r=o(t),a=i.f;u&&r&&!r[c]&&a(r,c,{configurable:!0,get:function(){return this}})}},function(t,r){t.exports=function(t,r,a){if(!(t instanceof r))throw TypeError("Incorrect "+(a?a+" ":"")+"invocation");return t}},function(t,r,a){var o=a(28),i=a(92),l=a(47),u=a(62),c=a(94),d=a(91),Result=function(t,r){this.stopped=t,this.result=r};(t.exports=function(t,r,a,h,p){var m,v,g,y,b,_,S,A=u(r,a,h?2:1);if(p)m=t;else{if("function"!=typeof(v=c(t)))throw TypeError("Target is not iterable");if(i(v)){for(g=0,y=l(t.length);y>g;g++)if((b=h?A(o(S=t[g])[0],S[1]):A(t[g]))&&b instanceof Result)return b;return new Result(!1)}m=v.call(t)}for(_=m.next;!(S=_.call(m)).done;)if("object"==typeof(b=d(m,A,S.value,h))&&b&&b instanceof Result)return b;return new Result(!1)}).stop=function(t){return new Result(!0,t)}},function(t,r,a){var o,i,l,u=a(11),c=a(14),d=a(19),h=a(62),p=a(74),m=a(25),v=a(126),g=u.location,y=u.setImmediate,b=u.clearImmediate,_=u.process,S=u.MessageChannel,A=u.Dispatch,C=0,R={},k="onreadystatechange",run=function(t){if(R.hasOwnProperty(t)){var r=R[t];delete R[t],r()}},runner=function(t){return function(){run(t)}},listener=function(t){run(t.data)},post=function(t){u.postMessage(t+"",g.protocol+"//"+g.host)};y&&b||(y=function setImmediate(t){for(var r=[],a=1;arguments.length>a;)r.push(arguments[a++]);return R[++C]=function(){("function"==typeof t?t:Function(t)).apply(void 0,r)},o(C),C},b=function clearImmediate(t){delete R[t]},"process"==d(_)?o=function(t){_.nextTick(runner(t))}:A&&A.now?o=function(t){A.now(runner(t))}:S&&!v?(l=(i=new S).port2,i.port1.onmessage=listener,o=h(l.postMessage,l,1)):!u.addEventListener||"function"!=typeof postMessage||u.importScripts||c(post)||"file:"===g.protocol?o=k in m("script")?function(t){p.appendChild(m("script")).onreadystatechange=function(){p.removeChild(this),run(t)}}:function(t){setTimeout(runner(t),0)}:(o=post,u.addEventListener("message",listener,!1))),t.exports={set:y,clear:b}},function(t,r,a){var o=a(127);t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(o)},function(t,r,a){var o=a(42);t.exports=o("navigator","userAgent")||""},function(t,r,a){var o,i,l,u,c,d,h,p,m=a(11),v=a(12).f,g=a(19),y=a(125).set,b=a(126),_=m.MutationObserver||m.WebKitMutationObserver,S=m.process,A=m.Promise,C="process"==g(S),R=v(m,"queueMicrotask"),k=R&&R.value;k||(o=function(){var t,r;for(C&&(t=S.domain)&&t.exit();i;){r=i.fn,i=i.next;try{r()}catch(t){throw i?u():l=void 0,t}}l=void 0,t&&t.enter()},C?u=function(){S.nextTick(o)}:_&&!b?(c=!0,d=document.createTextNode(""),new _(o).observe(d,{characterData:!0}),u=function(){d.data=c=!c}):A&&A.resolve?(h=A.resolve(void 0),p=h.then,u=function(){p.call(h,o)}):u=function(){y.call(m,o)}),t.exports=k||function(t){var r={fn:t,next:void 0};l&&(l.next=r),i||(i=r,u()),l=r}},function(t,r,a){var o=a(28),i=a(22),l=a(130);t.exports=function(t,r){if(o(t),i(r)&&r.constructor===t)return r;var a=l.f(t);return(0,a.resolve)(r),a.promise}},function(t,r,a){"use strict";var o=a(63),PromiseCapability=function(t){var r,a;this.promise=new t((function(t,o){if(void 0!==r||void 0!==a)throw TypeError("Bad Promise constructor");r=t,a=o})),this.resolve=o(r),this.reject=o(a)};t.exports.f=function(t){return new PromiseCapability(t)}},function(t,r,a){var o=a(11);t.exports=function(t,r){var a=o.console;a&&a.error&&(1===arguments.length?a.error(t):a.error(t,r))}},function(t,r){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},function(t,r,a){var o,i,l=a(11),u=a(127),c=l.process,d=c&&c.versions,h=d&&d.v8;h?i=(o=h.split("."))[0]+o[1]:u&&(!(o=u.match(/Edge\/(\d+)/))||o[1]>=74)&&(o=u.match(/Chrome\/(\d+)/))&&(i=o[1]),t.exports=i&&+i},function(t,r,a){"use strict";var o=a(10),i=a(63),l=a(130),u=a(132),c=a(124);o({target:"Promise",stat:!0},{allSettled:function allSettled(t){var r=this,a=l.f(r),o=a.resolve,d=a.reject,h=u((function(){var a=i(r.resolve),l=[],u=0,d=1;c(t,(function(t){var i=u++,c=!1;l.push(void 0),d++,a.call(r,t).then((function(t){c||(c=!0,l[i]={status:"fulfilled",value:t},--d||o(l))}),(function(t){c||(c=!0,l[i]={status:"rejected",reason:t},--d||o(l))}))})),--d||o(l)}));return h.error&&d(h.value),a.promise}})},function(t,r,a){"use strict";var o=a(10),i=a(37),l=a(120),u=a(14),c=a(42),d=a(112),h=a(129),p=a(29);o({target:"Promise",proto:!0,real:!0,forced:!!l&&u((function(){l.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var r=d(this,c("Promise")),a="function"==typeof t;return this.then(a?function(a){return h(r,t()).then((function(){return a}))}:t,a?function(a){return h(r,t()).then((function(){throw a}))}:t)}}),i||"function"!=typeof l||l.prototype.finally||p(l.prototype,"finally",c("Promise").prototype.finally)},function(t,r,a){a(137),a(142),a(140);var o=a(43);t.exports=o.URL},function(t,r,a){"use strict";a(77);var o,i=a(10),l=a(13),u=a(138),c=a(11),d=a(72),h=a(29),p=a(123),m=a(23),v=a(100),g=a(90),y=a(78).codeAt,b=a(139),_=a(85),S=a(140),A=a(33),C=c.URL,R=S.URLSearchParams,k=S.getState,P=A.set,w=A.getterFor("URL"),x=Math.floor,T=Math.pow,E="Invalid scheme",O="Invalid host",I="Invalid port",D=/[A-Za-z]/,L=/[\d+-.A-Za-z]/,W=/\d/,M=/^(0x|0X)/,j=/^[0-7]+$/,N=/^\d+$/,B=/^[\dA-Fa-f]+$/,q=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,G=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,U=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,z=/[\u0009\u000A\u000D]/g,parseHost=function(t,r){var a,o,i;if("["==r.charAt(0)){if("]"!=r.charAt(r.length-1))return O;if(!(a=parseIPv6(r.slice(1,-1))))return O;t.host=a}else if(isSpecial(t)){if(r=b(r),q.test(r))return O;if(null===(a=parseIPv4(r)))return O;t.host=a}else{if(G.test(r))return O;for(a="",o=g(r),i=0;i<o.length;i++)a+=percentEncode(o[i],H);t.host=a}},parseIPv4=function(t){var r,a,o,i,l,u,c,d=t.split(".");if(d.length&&""==d[d.length-1]&&d.pop(),(r=d.length)>4)return t;for(a=[],o=0;o<r;o++){if(""==(i=d[o]))return t;if(l=10,i.length>1&&"0"==i.charAt(0)&&(l=M.test(i)?16:8,i=i.slice(8==l?1:2)),""===i)u=0;else{if(!(10==l?N:8==l?j:B).test(i))return t;u=parseInt(i,l)}a.push(u)}for(o=0;o<r;o++)if(u=a[o],o==r-1){if(u>=T(256,5-r))return null}else if(u>255)return null;for(c=a.pop(),o=0;o<a.length;o++)c+=a[o]*T(256,3-o);return c},parseIPv6=function(t){var r,a,o,i,l,u,c,d=[0,0,0,0,0,0,0,0],h=0,p=null,m=0,char=function(){return t.charAt(m)};if(":"==char()){if(":"!=t.charAt(1))return;m+=2,p=++h}for(;char();){if(8==h)return;if(":"!=char()){for(r=a=0;a<4&&B.test(char());)r=16*r+parseInt(char(),16),m++,a++;if("."==char()){if(0==a)return;if(m-=a,h>6)return;for(o=0;char();){if(i=null,o>0){if(!("."==char()&&o<4))return;m++}if(!W.test(char()))return;for(;W.test(char());){if(l=parseInt(char(),10),null===i)i=l;else{if(0==i)return;i=10*i+l}if(i>255)return;m++}d[h]=256*d[h]+i,2!=++o&&4!=o||h++}if(4!=o)return;break}if(":"==char()){if(m++,!char())return}else if(char())return;d[h++]=r}else{if(null!==p)return;m++,p=++h}}if(null!==p)for(u=h-p,h=7;0!=h&&u>0;)c=d[h],d[h--]=d[p+u-1],d[p+--u]=c;else if(8!=h)return;return d},serializeHost=function(t){var r,a,o,i;if("number"==typeof t){for(r=[],a=0;a<4;a++)r.unshift(t%256),t=x(t/256);return r.join(".")}if("object"==typeof t){for(r="",o=function(t){for(var r=null,a=1,o=null,i=0,l=0;l<8;l++)0!==t[l]?(i>a&&(r=o,a=i),o=null,i=0):(null===o&&(o=l),++i);return i>a&&(r=o,a=i),r}(t),a=0;a<8;a++)i&&0===t[a]||(i&&(i=!1),o===a?(r+=a?":":"::",i=!0):(r+=t[a].toString(16),a<7&&(r+=":")));return"["+r+"]"}return t},H={},Y=v({},H,{" ":1,'"':1,"<":1,">":1,"`":1}),X=v({},Y,{"#":1,"?":1,"{":1,"}":1}),V=v({},X,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),percentEncode=function(t,r){var a=y(t,0);return a>32&&a<127&&!m(r,t)?t:encodeURIComponent(t)},Q={ftp:21,file:null,http:80,https:443,ws:80,wss:443},isSpecial=function(t){return m(Q,t.scheme)},includesCredentials=function(t){return""!=t.username||""!=t.password},cannotHaveUsernamePasswordPort=function(t){return!t.host||t.cannotBeABaseURL||"file"==t.scheme},isWindowsDriveLetter=function(t,r){var a;return 2==t.length&&D.test(t.charAt(0))&&(":"==(a=t.charAt(1))||!r&&"|"==a)},startsWithWindowsDriveLetter=function(t){var r;return t.length>1&&isWindowsDriveLetter(t.slice(0,2))&&(2==t.length||"/"===(r=t.charAt(2))||"\\"===r||"?"===r||"#"===r)},shortenURLsPath=function(t){var r=t.path,a=r.length;!a||"file"==t.scheme&&1==a&&isWindowsDriveLetter(r[0],!0)||r.pop()},isSingleDot=function(t){return"."===t||"%2e"===t.toLowerCase()},K={},J={},$={},Z={},ee={},te={},re={},ne={},ae={},oe={},ie={},se={},le={},ue={},ce={},de={},fe={},he={},pe={},me={},ve={},parseURL=function(t,r,a,i){var l,u,c,d,h,p=a||K,v=0,y="",b=!1,_=!1,S=!1;for(a||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=!1,r=r.replace(U,"")),r=r.replace(z,""),l=g(r);v<=l.length;){switch(u=l[v],p){case K:if(!u||!D.test(u)){if(a)return E;p=$;continue}y+=u.toLowerCase(),p=J;break;case J:if(u&&(L.test(u)||"+"==u||"-"==u||"."==u))y+=u.toLowerCase();else{if(":"!=u){if(a)return E;y="",p=$,v=0;continue}if(a&&(isSpecial(t)!=m(Q,y)||"file"==y&&(includesCredentials(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;if(t.scheme=y,a)return void(isSpecial(t)&&Q[t.scheme]==t.port&&(t.port=null));y="","file"==t.scheme?p=ue:isSpecial(t)&&i&&i.scheme==t.scheme?p=Z:isSpecial(t)?p=ne:"/"==l[v+1]?(p=ee,v++):(t.cannotBeABaseURL=!0,t.path.push(""),p=pe)}break;case $:if(!i||i.cannotBeABaseURL&&"#"!=u)return E;if(i.cannotBeABaseURL&&"#"==u){t.scheme=i.scheme,t.path=i.path.slice(),t.query=i.query,t.fragment="",t.cannotBeABaseURL=!0,p=ve;break}p="file"==i.scheme?ue:te;continue;case Z:if("/"!=u||"/"!=l[v+1]){p=te;continue}p=ae,v++;break;case ee:if("/"==u){p=oe;break}p=he;continue;case te:if(t.scheme=i.scheme,u==o)t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query=i.query;else if("/"==u||"\\"==u&&isSpecial(t))p=re;else if("?"==u)t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query="",p=me;else{if("#"!=u){t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.path.pop(),p=he;continue}t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query=i.query,t.fragment="",p=ve}break;case re:if(!isSpecial(t)||"/"!=u&&"\\"!=u){if("/"!=u){t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,p=he;continue}p=oe}else p=ae;break;case ne:if(p=ae,"/"!=u||"/"!=y.charAt(v+1))continue;v++;break;case ae:if("/"!=u&&"\\"!=u){p=oe;continue}break;case oe:if("@"==u){b&&(y="%40"+y),b=!0,c=g(y);for(var A=0;A<c.length;A++){var C=c[A];if(":"!=C||S){var R=percentEncode(C,V);S?t.password+=R:t.username+=R}else S=!0}y=""}else if(u==o||"/"==u||"?"==u||"#"==u||"\\"==u&&isSpecial(t)){if(b&&""==y)return"Invalid authority";v-=g(y).length+1,y="",p=ie}else y+=u;break;case ie:case se:if(a&&"file"==t.scheme){p=de;continue}if(":"!=u||_){if(u==o||"/"==u||"?"==u||"#"==u||"\\"==u&&isSpecial(t)){if(isSpecial(t)&&""==y)return O;if(a&&""==y&&(includesCredentials(t)||null!==t.port))return;if(d=parseHost(t,y))return d;if(y="",p=fe,a)return;continue}"["==u?_=!0:"]"==u&&(_=!1),y+=u}else{if(""==y)return O;if(d=parseHost(t,y))return d;if(y="",p=le,a==se)return}break;case le:if(!W.test(u)){if(u==o||"/"==u||"?"==u||"#"==u||"\\"==u&&isSpecial(t)||a){if(""!=y){var k=parseInt(y,10);if(k>65535)return I;t.port=isSpecial(t)&&k===Q[t.scheme]?null:k,y=""}if(a)return;p=fe;continue}return I}y+=u;break;case ue:if(t.scheme="file","/"==u||"\\"==u)p=ce;else{if(!i||"file"!=i.scheme){p=he;continue}if(u==o)t.host=i.host,t.path=i.path.slice(),t.query=i.query;else if("?"==u)t.host=i.host,t.path=i.path.slice(),t.query="",p=me;else{if("#"!=u){startsWithWindowsDriveLetter(l.slice(v).join(""))||(t.host=i.host,t.path=i.path.slice(),shortenURLsPath(t)),p=he;continue}t.host=i.host,t.path=i.path.slice(),t.query=i.query,t.fragment="",p=ve}}break;case ce:if("/"==u||"\\"==u){p=de;break}i&&"file"==i.scheme&&!startsWithWindowsDriveLetter(l.slice(v).join(""))&&(isWindowsDriveLetter(i.path[0],!0)?t.path.push(i.path[0]):t.host=i.host),p=he;continue;case de:if(u==o||"/"==u||"\\"==u||"?"==u||"#"==u){if(!a&&isWindowsDriveLetter(y))p=he;else if(""==y){if(t.host="",a)return;p=fe}else{if(d=parseHost(t,y))return d;if("localhost"==t.host&&(t.host=""),a)return;y="",p=fe}continue}y+=u;break;case fe:if(isSpecial(t)){if(p=he,"/"!=u&&"\\"!=u)continue}else if(a||"?"!=u)if(a||"#"!=u){if(u!=o&&(p=he,"/"!=u))continue}else t.fragment="",p=ve;else t.query="",p=me;break;case he:if(u==o||"/"==u||"\\"==u&&isSpecial(t)||!a&&("?"==u||"#"==u)){if(".."===(h=(h=y).toLowerCase())||"%2e."===h||".%2e"===h||"%2e%2e"===h?(shortenURLsPath(t),"/"==u||"\\"==u&&isSpecial(t)||t.path.push("")):isSingleDot(y)?"/"==u||"\\"==u&&isSpecial(t)||t.path.push(""):("file"==t.scheme&&!t.path.length&&isWindowsDriveLetter(y)&&(t.host&&(t.host=""),y=y.charAt(0)+":"),t.path.push(y)),y="","file"==t.scheme&&(u==o||"?"==u||"#"==u))for(;t.path.length>1&&""===t.path[0];)t.path.shift();"?"==u?(t.query="",p=me):"#"==u&&(t.fragment="",p=ve)}else y+=percentEncode(u,X);break;case pe:"?"==u?(t.query="",p=me):"#"==u?(t.fragment="",p=ve):u!=o&&(t.path[0]+=percentEncode(u,H));break;case me:a||"#"!=u?u!=o&&("'"==u&&isSpecial(t)?t.query+="%27":t.query+="#"==u?"%23":percentEncode(u,H)):(t.fragment="",p=ve);break;case ve:u!=o&&(t.fragment+=percentEncode(u,Y))}v++}},ge=function URL(t){var r,a,o=p(this,ge,"URL"),i=arguments.length>1?arguments[1]:void 0,u=String(t),c=P(o,{type:"URL"});if(void 0!==i)if(i instanceof ge)r=w(i);else if(a=parseURL(r={},String(i)))throw TypeError(a);if(a=parseURL(c,u,null,r))throw TypeError(a);var d=c.searchParams=new R,h=k(d);h.updateSearchParams(c.query),h.updateURL=function(){c.query=String(d)||null},l||(o.href=serializeURL.call(o),o.origin=getOrigin.call(o),o.protocol=getProtocol.call(o),o.username=getUsername.call(o),o.password=getPassword.call(o),o.host=getHost.call(o),o.hostname=getHostname.call(o),o.port=getPort.call(o),o.pathname=getPathname.call(o),o.search=getSearch.call(o),o.searchParams=getSearchParams.call(o),o.hash=getHash.call(o))},ye=ge.prototype,serializeURL=function(){var t=w(this),r=t.scheme,a=t.username,o=t.password,i=t.host,l=t.port,u=t.path,c=t.query,d=t.fragment,h=r+":";return null!==i?(h+="//",includesCredentials(t)&&(h+=a+(o?":"+o:"")+"@"),h+=serializeHost(i),null!==l&&(h+=":"+l)):"file"==r&&(h+="//"),h+=t.cannotBeABaseURL?u[0]:u.length?"/"+u.join("/"):"",null!==c&&(h+="?"+c),null!==d&&(h+="#"+d),h},getOrigin=function(){var t=w(this),r=t.scheme,a=t.port;if("blob"==r)try{return new URL(r.path[0]).origin}catch(t){return"null"}return"file"!=r&&isSpecial(t)?r+"://"+serializeHost(t.host)+(null!==a?":"+a:""):"null"},getProtocol=function(){return w(this).scheme+":"},getUsername=function(){return w(this).username},getPassword=function(){return w(this).password},getHost=function(){var t=w(this),r=t.host,a=t.port;return null===r?"":null===a?serializeHost(r):serializeHost(r)+":"+a},getHostname=function(){var t=w(this).host;return null===t?"":serializeHost(t)},getPort=function(){var t=w(this).port;return null===t?"":String(t)},getPathname=function(){var t=w(this),r=t.path;return t.cannotBeABaseURL?r[0]:r.length?"/"+r.join("/"):""},getSearch=function(){var t=w(this).query;return t?"?"+t:""},getSearchParams=function(){return w(this).searchParams},getHash=function(){var t=w(this).fragment;return t?"#"+t:""},accessorDescriptor=function(t,r){return{get:t,set:r,configurable:!0,enumerable:!0}};if(l&&d(ye,{href:accessorDescriptor(serializeURL,(function(t){var r=w(this),a=String(t),o=parseURL(r,a);if(o)throw TypeError(o);k(r.searchParams).updateSearchParams(r.query)})),origin:accessorDescriptor(getOrigin),protocol:accessorDescriptor(getProtocol,(function(t){var r=w(this);parseURL(r,String(t)+":",K)})),username:accessorDescriptor(getUsername,(function(t){var r=w(this),a=g(String(t));if(!cannotHaveUsernamePasswordPort(r)){r.username="";for(var o=0;o<a.length;o++)r.username+=percentEncode(a[o],V)}})),password:accessorDescriptor(getPassword,(function(t){var r=w(this),a=g(String(t));if(!cannotHaveUsernamePasswordPort(r)){r.password="";for(var o=0;o<a.length;o++)r.password+=percentEncode(a[o],V)}})),host:accessorDescriptor(getHost,(function(t){var r=w(this);r.cannotBeABaseURL||parseURL(r,String(t),ie)})),hostname:accessorDescriptor(getHostname,(function(t){var r=w(this);r.cannotBeABaseURL||parseURL(r,String(t),se)})),port:accessorDescriptor(getPort,(function(t){var r=w(this);cannotHaveUsernamePasswordPort(r)||(""==(t=String(t))?r.port=null:parseURL(r,t,le))})),pathname:accessorDescriptor(getPathname,(function(t){var r=w(this);r.cannotBeABaseURL||(r.path=[],parseURL(r,t+"",fe))})),search:accessorDescriptor(getSearch,(function(t){var r=w(this);""==(t=String(t))?r.query=null:("?"==t.charAt(0)&&(t=t.slice(1)),r.query="",parseURL(r,t,me)),k(r.searchParams).updateSearchParams(r.query)})),searchParams:accessorDescriptor(getSearchParams),hash:accessorDescriptor(getHash,(function(t){var r=w(this);""!=(t=String(t))?("#"==t.charAt(0)&&(t=t.slice(1)),r.fragment="",parseURL(r,t,ve)):r.fragment=null}))}),h(ye,"toJSON",(function toJSON(){return serializeURL.call(this)}),{enumerable:!0}),h(ye,"toString",(function toString(){return serializeURL.call(this)}),{enumerable:!0}),C){var be=C.createObjectURL,_e=C.revokeObjectURL;be&&h(ge,"createObjectURL",(function createObjectURL(t){return be.apply(C,arguments)})),_e&&h(ge,"revokeObjectURL",(function revokeObjectURL(t){return _e.apply(C,arguments)}))}_(ge,"URL"),i({global:!0,forced:!u,sham:!l},{URL:ge})},function(t,r,a){var o=a(14),i=a(57),l=a(37),u=i("iterator");t.exports=!o((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),r=t.searchParams,a="";return t.pathname="c%20d",r.forEach((function(t,o){r.delete("b"),a+=o+t})),l&&!t.toJSON||!r.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==r.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!r[u]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://").host||"#%D0%B1"!==new URL("http://a#").hash||"a1c3"!==a||"x"!==new URL("http://x",void 0).host}))},function(t,r,a){"use strict";var o=2147483647,i=/[^\0-\u007E]/,l=/[.\u3002\uFF0E\uFF61]/g,u="Overflow: input needs wider integers to process",c=Math.floor,d=String.fromCharCode,digitToBasic=function(t){return t+22+75*(t<26)},adapt=function(t,r,a){var o=0;for(t=a?c(t/700):t>>1,t+=c(t/r);t>455;o+=36)t=c(t/35);return c(o+36*t/(t+38))},encode=function(t){var r,a,i=[],l=(t=function(t){for(var r=[],a=0,o=t.length;a<o;){var i=t.charCodeAt(a++);if(i>=55296&&i<=56319&&a<o){var l=t.charCodeAt(a++);56320==(64512&l)?r.push(((1023&i)<<10)+(1023&l)+65536):(r.push(i),a--)}else r.push(i)}return r}(t)).length,h=128,p=0,m=72;for(r=0;r<t.length;r++)(a=t[r])<128&&i.push(d(a));var v=i.length,g=v;for(v&&i.push("-");g<l;){var y=o;for(r=0;r<t.length;r++)(a=t[r])>=h&&a<y&&(y=a);var b=g+1;if(y-h>c((o-p)/b))throw RangeError(u);for(p+=(y-h)*b,h=y,r=0;r<t.length;r++){if((a=t[r])<h&&++p>o)throw RangeError(u);if(a==h){for(var _=p,S=36;;S+=36){var A=S<=m?1:S>=m+26?26:S-m;if(_<A)break;var C=_-A,R=36-A;i.push(d(digitToBasic(A+C%R))),_=c(C/R)}i.push(d(digitToBasic(_))),m=adapt(p,b,g==v),p=0,++g}}++p,++h}return i.join("")};t.exports=function(t){var r,a,o=[],u=t.toLowerCase().replace(l,".").split(".");for(r=0;r<u.length;r++)a=u[r],o.push(i.test(a)?"xn--"+encode(a):a);return o.join(".")}},function(t,r,a){"use strict";a(118);var o=a(10),i=a(42),l=a(138),u=a(29),c=a(121),d=a(85),h=a(80),p=a(33),m=a(123),v=a(23),g=a(62),y=a(95),b=a(28),_=a(22),S=a(71),A=a(16),C=a(141),R=a(94),k=a(57),P=i("fetch"),w=i("Headers"),x=k("iterator"),T="URLSearchParams",E="URLSearchParamsIterator",O=p.set,I=p.getterFor(T),D=p.getterFor(E),L=/\+/g,W=Array(4),percentSequence=function(t){return W[t-1]||(W[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))},percentDecode=function(t){try{return decodeURIComponent(t)}catch(r){return t}},deserialize=function(t){var r=t.replace(L," "),a=4;try{return decodeURIComponent(r)}catch(t){for(;a;)r=r.replace(percentSequence(a--),percentDecode);return r}},M=/[!'()~]|%20/g,j={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},replacer=function(t){return j[t]},serialize=function(t){return encodeURIComponent(t).replace(M,replacer)},parseSearchParams=function(t,r){if(r)for(var a,o,i=r.split("&"),l=0;l<i.length;)(a=i[l++]).length&&(o=a.split("="),t.push({key:deserialize(o.shift()),value:deserialize(o.join("="))}))},updateSearchParams=function(t){this.entries.length=0,parseSearchParams(this.entries,t)},validateArgumentsLength=function(t,r){if(t<r)throw TypeError("Not enough arguments")},N=h((function Iterator(t,r){O(this,{type:E,iterator:C(I(t).entries),kind:r})}),"Iterator",(function next(){var t=D(this),r=t.kind,a=t.iterator.next(),o=a.value;return a.done||(a.value="keys"===r?o.key:"values"===r?o.value:[o.key,o.value]),a})),B=function URLSearchParams(){m(this,B,T);var t,r,a,o,i,l,u,c,d,h=arguments.length>0?arguments[0]:void 0,p=this,g=[];if(O(p,{type:T,entries:g,updateURL:function(){},updateSearchParams:updateSearchParams}),void 0!==h)if(_(h))if("function"==typeof(t=R(h)))for(a=(r=t.call(h)).next;!(o=a.call(r)).done;){if((u=(l=(i=C(b(o.value))).next).call(i)).done||(c=l.call(i)).done||!l.call(i).done)throw TypeError("Expected sequence with length 2");g.push({key:u.value+"",value:c.value+""})}else for(d in h)v(h,d)&&g.push({key:d,value:h[d]+""});else parseSearchParams(g,"string"==typeof h?"?"===h.charAt(0)?h.slice(1):h:h+"")},q=B.prototype;c(q,{append:function append(t,r){validateArgumentsLength(arguments.length,2);var a=I(this);a.entries.push({key:t+"",value:r+""}),a.updateURL()},delete:function(t){validateArgumentsLength(arguments.length,1);for(var r=I(this),a=r.entries,o=t+"",i=0;i<a.length;)a[i].key===o?a.splice(i,1):i++;r.updateURL()},get:function get(t){validateArgumentsLength(arguments.length,1);for(var r=I(this).entries,a=t+"",o=0;o<r.length;o++)if(r[o].key===a)return r[o].value;return null},getAll:function getAll(t){validateArgumentsLength(arguments.length,1);for(var r=I(this).entries,a=t+"",o=[],i=0;i<r.length;i++)r[i].key===a&&o.push(r[i].value);return o},has:function has(t){validateArgumentsLength(arguments.length,1);for(var r=I(this).entries,a=t+"",o=0;o<r.length;)if(r[o++].key===a)return!0;return!1},set:function set(t,r){validateArgumentsLength(arguments.length,1);for(var a,o=I(this),i=o.entries,l=!1,u=t+"",c=r+"",d=0;d<i.length;d++)(a=i[d]).key===u&&(l?i.splice(d--,1):(l=!0,a.value=c));l||i.push({key:u,value:c}),o.updateURL()},sort:function sort(){var t,r,a,o=I(this),i=o.entries,l=i.slice();for(i.length=0,a=0;a<l.length;a++){for(t=l[a],r=0;r<a;r++)if(i[r].key>t.key){i.splice(r,0,t);break}r===a&&i.push(t)}o.updateURL()},forEach:function forEach(t){for(var r,a=I(this).entries,o=g(t,arguments.length>1?arguments[1]:void 0,3),i=0;i<a.length;)o((r=a[i++]).value,r.key,this)},keys:function keys(){return new N(this,"keys")},values:function values(){return new N(this,"values")},entries:function entries(){return new N(this,"entries")}},{enumerable:!0}),u(q,x,q.entries),u(q,"toString",(function toString(){for(var t,r=I(this).entries,a=[],o=0;o<r.length;)t=r[o++],a.push(serialize(t.key)+"="+serialize(t.value));return a.join("&")}),{enumerable:!0}),d(B,T),o({global:!0,forced:!l},{URLSearchParams:B}),l||"function"!=typeof P||"function"!=typeof w||o({global:!0,enumerable:!0,forced:!0},{fetch:function fetch(t){var r,a,o,i=[t];return arguments.length>1&&(_(r=arguments[1])&&(a=r.body,y(a)===T&&((o=r.headers?new w(r.headers):new w).has("content-type")||o.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),r=S(r,{body:A(0,String(a)),headers:A(0,o)}))),i.push(r)),P.apply(this,i)}}),t.exports={URLSearchParams:B,getState:I}},function(t,r,a){var o=a(28),i=a(94);t.exports=function(t){var r=i(t);if("function"!=typeof r)throw TypeError(String(t)+" is not iterable");return o(r.call(t))}},function(t,r,a){"use strict";a(10)({target:"URL",proto:!0,enumerable:!0},{toJSON:function toJSON(){return URL.prototype.toString.call(this)}})},function(t,r,a){!function(t){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol:function(t){return"Symbol("+t+")"};function noop(){}var a=Number.isNaN||function(t){return t!=t},o=noop;function typeIsObject(t){return"object"==typeof t&&null!==t||"function"==typeof t}function createArrayFromList(t){return t.slice()}function ArrayBufferCopy(t,r,a,o,i){new Uint8Array(t).set(new Uint8Array(a,o,i),r)}function IsFiniteNonNegativeNumber(t){return!1!==IsNonNegativeNumber(t)&&t!==1/0}function IsNonNegativeNumber(t){return!("number"!=typeof t||a(t)||t<0)}function Call(t,r,a){if("function"!=typeof t)throw new TypeError("Argument is not a function");return Function.prototype.apply.call(t,r,a)}function CreateAlgorithmFromUnderlyingMethod(t,r,a,o){var i=t[r];if(void 0!==i){if("function"!=typeof i)throw new TypeError(i+" is not a method");switch(a){case 0:return function(){return PromiseCall(i,t,o)};case 1:return function(r){var a=[r].concat(o);return PromiseCall(i,t,a)}}}return function(){return promiseResolvedWith(void 0)}}function InvokeOrNoop(t,r,a){var o=t[r];if(void 0!==o)return Call(o,t,a)}function PromiseCall(t,r,a){try{return promiseResolvedWith(Call(t,r,a))}catch(t){return promiseRejectedWith(t)}}function TransferArrayBuffer(t){return t}function IsDetachedBuffer(t){return!1}function ValidateAndNormalizeHighWaterMark(t){if(t=Number(t),a(t)||t<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return t}function MakeSizeAlgorithmFromSizeFunction(t){if(void 0===t)return function(){return 1};if("function"!=typeof t)throw new TypeError("size property of a queuing strategy must be a function");return function(r){return t(r)}}var i=Promise,l=Promise.prototype.then,u=Promise.resolve.bind(i),c=Promise.reject.bind(i);function newPromise(t){return new i(t)}function promiseResolvedWith(t){return u(t)}function promiseRejectedWith(t){return c(t)}function PerformPromiseThen(t,r,a){return l.call(t,r,a)}function uponPromise(t,r,a){PerformPromiseThen(PerformPromiseThen(t,r,a),void 0,o)}function uponFulfillment(t,r){uponPromise(t,r)}function uponRejection(t,r){uponPromise(t,void 0,r)}function transformPromiseWith(t,r,a){return PerformPromiseThen(t,r,a)}function setPromiseIsHandledToTrue(t){PerformPromiseThen(t,void 0,o)}var d=16384,h=function(){function SimpleQueue(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}return Object.defineProperty(SimpleQueue.prototype,"length",{get:function(){return this._size},enumerable:!0,configurable:!0}),SimpleQueue.prototype.push=function(t){var r=this._back,a=r;r._elements.length===d-1&&(a={_elements:[],_next:void 0}),r._elements.push(t),a!==r&&(this._back=a,r._next=a),++this._size},SimpleQueue.prototype.shift=function(){var t=this._front,r=t,a=this._cursor,o=a+1,i=t._elements,l=i[a];return o===d&&(r=t._next,o=0),--this._size,this._cursor=o,t!==r&&(this._front=r),i[a]=void 0,l},SimpleQueue.prototype.forEach=function(t){for(var r=this._cursor,a=this._front,o=a._elements;!(r===o.length&&void 0===a._next||r===o.length&&(r=0,0===(o=(a=a._next)._elements).length));)t(o[r]),++r},SimpleQueue.prototype.peek=function(){var t=this._front,r=this._cursor;return t._elements[r]},SimpleQueue}();function ReadableStreamCreateReadResult(t,r,a){var o=null;!0===a&&(o=Object.prototype);var i=Object.create(o);return i.value=t,i.done=r,i}function ReadableStreamReaderGenericInitialize(t,r){t._forAuthorCode=!0,t._ownerReadableStream=r,r._reader=t,"readable"===r._state?defaultReaderClosedPromiseInitialize(t):"closed"===r._state?defaultReaderClosedPromiseInitializeAsResolved(t):defaultReaderClosedPromiseInitializeAsRejected(t,r._storedError)}function ReadableStreamReaderGenericCancel(t,r){return ReadableStreamCancel(t._ownerReadableStream,r)}function ReadableStreamReaderGenericRelease(t){"readable"===t._ownerReadableStream._state?defaultReaderClosedPromiseReject(t,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):defaultReaderClosedPromiseResetToRejected(t,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),t._ownerReadableStream._reader=void 0,t._ownerReadableStream=void 0}function readerLockException(t){return new TypeError("Cannot "+t+" a stream using a released reader")}function defaultReaderClosedPromiseInitialize(t){t._closedPromise=newPromise((function(r,a){t._closedPromise_resolve=r,t._closedPromise_reject=a}))}function defaultReaderClosedPromiseInitializeAsRejected(t,r){defaultReaderClosedPromiseInitialize(t),defaultReaderClosedPromiseReject(t,r)}function defaultReaderClosedPromiseInitializeAsResolved(t){defaultReaderClosedPromiseInitialize(t),defaultReaderClosedPromiseResolve(t)}function defaultReaderClosedPromiseReject(t,r){setPromiseIsHandledToTrue(t._closedPromise),t._closedPromise_reject(r),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0}function defaultReaderClosedPromiseResetToRejected(t,r){defaultReaderClosedPromiseInitializeAsRejected(t,r)}function defaultReaderClosedPromiseResolve(t){t._closedPromise_resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0}var p=r("[[CancelSteps]]"),m=r("[[PullSteps]]");function AcquireReadableStreamDefaultReader(t,r){void 0===r&&(r=!1);var a=new y(t);return a._forAuthorCode=r,a}function ReadableStreamAddReadRequest(t){return newPromise((function(r,a){var o={_resolve:r,_reject:a};t._reader._readRequests.push(o)}))}function ReadableStreamFulfillReadRequest(t,r,a){var o=t._reader;o._readRequests.shift()._resolve(ReadableStreamCreateReadResult(r,a,o._forAuthorCode))}function ReadableStreamGetNumReadRequests(t){return t._reader._readRequests.length}function ReadableStreamHasDefaultReader(t){var r=t._reader;return void 0!==r&&!!IsReadableStreamDefaultReader(r)}var v,g,y=function(){function ReadableStreamDefaultReader(t){if(!1===IsReadableStream(t))throw new TypeError("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(!0===IsReadableStreamLocked(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");ReadableStreamReaderGenericInitialize(this,t),this._readRequests=new h}return Object.defineProperty(ReadableStreamDefaultReader.prototype,"closed",{get:function(){return IsReadableStreamDefaultReader(this)?this._closedPromise:promiseRejectedWith(defaultReaderBrandCheckException("closed"))},enumerable:!0,configurable:!0}),ReadableStreamDefaultReader.prototype.cancel=function(t){return IsReadableStreamDefaultReader(this)?void 0===this._ownerReadableStream?promiseRejectedWith(readerLockException("cancel")):ReadableStreamReaderGenericCancel(this,t):promiseRejectedWith(defaultReaderBrandCheckException("cancel"))},ReadableStreamDefaultReader.prototype.read=function(){return IsReadableStreamDefaultReader(this)?void 0===this._ownerReadableStream?promiseRejectedWith(readerLockException("read from")):ReadableStreamDefaultReaderRead(this):promiseRejectedWith(defaultReaderBrandCheckException("read"))},ReadableStreamDefaultReader.prototype.releaseLock=function(){if(!IsReadableStreamDefaultReader(this))throw defaultReaderBrandCheckException("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ReadableStreamReaderGenericRelease(this)}},ReadableStreamDefaultReader}();function IsReadableStreamDefaultReader(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_readRequests")}function ReadableStreamDefaultReaderRead(t){var r=t._ownerReadableStream;return r._disturbed=!0,"closed"===r._state?promiseResolvedWith(ReadableStreamCreateReadResult(void 0,!0,t._forAuthorCode)):"errored"===r._state?promiseRejectedWith(r._storedError):r._readableStreamController[m]()}function defaultReaderBrandCheckException(t){return new TypeError("ReadableStreamDefaultReader.prototype."+t+" can only be used on a ReadableStreamDefaultReader")}"symbol"==typeof r.asyncIterator&&((v={})[r.asyncIterator]=function(){return this},g=v,Object.defineProperty(g,r.asyncIterator,{enumerable:!1}));var b={next:function(){if(!1===IsReadableStreamAsyncIterator(this))return promiseRejectedWith(streamAsyncIteratorBrandCheckException("next"));var t=this._asyncIteratorReader;return void 0===t._ownerReadableStream?promiseRejectedWith(readerLockException("iterate")):transformPromiseWith(ReadableStreamDefaultReaderRead(t),(function(r){var a=r.done;return a&&ReadableStreamReaderGenericRelease(t),ReadableStreamCreateReadResult(r.value,a,!0)}))},return:function(t){if(!1===IsReadableStreamAsyncIterator(this))return promiseRejectedWith(streamAsyncIteratorBrandCheckException("next"));var r=this._asyncIteratorReader;if(void 0===r._ownerReadableStream)return promiseRejectedWith(readerLockException("finish iterating"));if(r._readRequests.length>0)return promiseRejectedWith(new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled"));if(!1===this._preventCancel){var a=ReadableStreamReaderGenericCancel(r,t);return ReadableStreamReaderGenericRelease(r),transformPromiseWith(a,(function(){return ReadableStreamCreateReadResult(t,!0,!0)}))}return ReadableStreamReaderGenericRelease(r),promiseResolvedWith(ReadableStreamCreateReadResult(t,!0,!0))}};function AcquireReadableStreamAsyncIterator(t,r){void 0===r&&(r=!1);var a=AcquireReadableStreamDefaultReader(t),o=Object.create(b);return o._asyncIteratorReader=a,o._preventCancel=Boolean(r),o}function IsReadableStreamAsyncIterator(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_asyncIteratorReader")}function streamAsyncIteratorBrandCheckException(t){return new TypeError("ReadableStreamAsyncIterator."+t+" can only be used on a ReadableSteamAsyncIterator")}function DequeueValue(t){var r=t._queue.shift();return t._queueTotalSize-=r.size,t._queueTotalSize<0&&(t._queueTotalSize=0),r.value}function EnqueueValueWithSize(t,r,a){if(!IsFiniteNonNegativeNumber(a=Number(a)))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");t._queue.push({value:r,size:a}),t._queueTotalSize+=a}function PeekQueueValue(t){return t._queue.peek().value}function ResetQueue(t){t._queue=new h,t._queueTotalSize=0}void 0!==g&&Object.setPrototypeOf(b,g),Object.defineProperty(b,"next",{enumerable:!1}),Object.defineProperty(b,"return",{enumerable:!1});var _=r("[[AbortSteps]]"),S=r("[[ErrorSteps]]"),A=function(){function WritableStream(t,r){void 0===t&&(t={}),void 0===r&&(r={}),InitializeWritableStream(this);var a=r.size,o=r.highWaterMark;if(void 0!==t.type)throw new RangeError("Invalid type is specified");var i=MakeSizeAlgorithmFromSizeFunction(a);void 0===o&&(o=1),SetUpWritableStreamDefaultControllerFromUnderlyingSink(this,t,o=ValidateAndNormalizeHighWaterMark(o),i)}return Object.defineProperty(WritableStream.prototype,"locked",{get:function(){if(!1===IsWritableStream(this))throw streamBrandCheckException("locked");return IsWritableStreamLocked(this)},enumerable:!0,configurable:!0}),WritableStream.prototype.abort=function(t){return!1===IsWritableStream(this)?promiseRejectedWith(streamBrandCheckException("abort")):!0===IsWritableStreamLocked(this)?promiseRejectedWith(new TypeError("Cannot abort a stream that already has a writer")):WritableStreamAbort(this,t)},WritableStream.prototype.close=function(){return!1===IsWritableStream(this)?promiseRejectedWith(streamBrandCheckException("close")):!0===IsWritableStreamLocked(this)?promiseRejectedWith(new TypeError("Cannot close a stream that already has a writer")):!0===WritableStreamCloseQueuedOrInFlight(this)?promiseRejectedWith(new TypeError("Cannot close an already-closing stream")):WritableStreamClose(this)},WritableStream.prototype.getWriter=function(){if(!1===IsWritableStream(this))throw streamBrandCheckException("getWriter");return AcquireWritableStreamDefaultWriter(this)},WritableStream}();function AcquireWritableStreamDefaultWriter(t){return new C(t)}function CreateWritableStream(t,r,a,o,i,l){void 0===i&&(i=1),void 0===l&&(l=function(){return 1});var u=Object.create(A.prototype);return InitializeWritableStream(u),SetUpWritableStreamDefaultController(u,Object.create(R.prototype),t,r,a,o,i,l),u}function InitializeWritableStream(t){t._state="writable",t._storedError=void 0,t._writer=void 0,t._writableStreamController=void 0,t._writeRequests=new h,t._inFlightWriteRequest=void 0,t._closeRequest=void 0,t._inFlightCloseRequest=void 0,t._pendingAbortRequest=void 0,t._backpressure=!1}function IsWritableStream(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_writableStreamController")}function IsWritableStreamLocked(t){return void 0!==t._writer}function WritableStreamAbort(t,r){var a=t._state;if("closed"===a||"errored"===a)return promiseResolvedWith(void 0);if(void 0!==t._pendingAbortRequest)return t._pendingAbortRequest._promise;var o=!1;"erroring"===a&&(o=!0,r=void 0);var i=newPromise((function(a,i){t._pendingAbortRequest={_promise:void 0,_resolve:a,_reject:i,_reason:r,_wasAlreadyErroring:o}}));return t._pendingAbortRequest._promise=i,!1===o&&WritableStreamStartErroring(t,r),i}function WritableStreamClose(t){var r=t._state;if("closed"===r||"errored"===r)return promiseRejectedWith(new TypeError("The stream (in "+r+" state) is not in the writable state and cannot be closed"));var a=newPromise((function(r,a){var o={_resolve:r,_reject:a};t._closeRequest=o})),o=t._writer;return void 0!==o&&!0===t._backpressure&&"writable"===r&&defaultWriterReadyPromiseResolve(o),WritableStreamDefaultControllerClose(t._writableStreamController),a}function WritableStreamAddWriteRequest(t){return newPromise((function(r,a){var o={_resolve:r,_reject:a};t._writeRequests.push(o)}))}function WritableStreamDealWithRejection(t,r){"writable"!==t._state?WritableStreamFinishErroring(t):WritableStreamStartErroring(t,r)}function WritableStreamStartErroring(t,r){var a=t._writableStreamController;t._state="erroring",t._storedError=r;var o=t._writer;void 0!==o&&WritableStreamDefaultWriterEnsureReadyPromiseRejected(o,r),!1===WritableStreamHasOperationMarkedInFlight(t)&&!0===a._started&&WritableStreamFinishErroring(t)}function WritableStreamFinishErroring(t){t._state="errored",t._writableStreamController[S]();var r=t._storedError;if(t._writeRequests.forEach((function(t){t._reject(r)})),t._writeRequests=new h,void 0!==t._pendingAbortRequest){var a=t._pendingAbortRequest;if(t._pendingAbortRequest=void 0,!0===a._wasAlreadyErroring)return a._reject(r),void WritableStreamRejectCloseAndClosedPromiseIfNeeded(t);uponPromise(t._writableStreamController[_](a._reason),(function(){a._resolve(),WritableStreamRejectCloseAndClosedPromiseIfNeeded(t)}),(function(r){a._reject(r),WritableStreamRejectCloseAndClosedPromiseIfNeeded(t)}))}else WritableStreamRejectCloseAndClosedPromiseIfNeeded(t)}function WritableStreamFinishInFlightWrite(t){t._inFlightWriteRequest._resolve(void 0),t._inFlightWriteRequest=void 0}function WritableStreamFinishInFlightWriteWithError(t,r){t._inFlightWriteRequest._reject(r),t._inFlightWriteRequest=void 0,WritableStreamDealWithRejection(t,r)}function WritableStreamFinishInFlightClose(t){t._inFlightCloseRequest._resolve(void 0),t._inFlightCloseRequest=void 0,"erroring"===t._state&&(t._storedError=void 0,void 0!==t._pendingAbortRequest&&(t._pendingAbortRequest._resolve(),t._pendingAbortRequest=void 0)),t._state="closed";var r=t._writer;void 0!==r&&defaultWriterClosedPromiseResolve(r)}function WritableStreamFinishInFlightCloseWithError(t,r){t._inFlightCloseRequest._reject(r),t._inFlightCloseRequest=void 0,void 0!==t._pendingAbortRequest&&(t._pendingAbortRequest._reject(r),t._pendingAbortRequest=void 0),WritableStreamDealWithRejection(t,r)}function WritableStreamCloseQueuedOrInFlight(t){return void 0!==t._closeRequest||void 0!==t._inFlightCloseRequest}function WritableStreamHasOperationMarkedInFlight(t){return void 0!==t._inFlightWriteRequest||void 0!==t._inFlightCloseRequest}function WritableStreamMarkCloseRequestInFlight(t){t._inFlightCloseRequest=t._closeRequest,t._closeRequest=void 0}function WritableStreamMarkFirstWriteRequestInFlight(t){t._inFlightWriteRequest=t._writeRequests.shift()}function WritableStreamRejectCloseAndClosedPromiseIfNeeded(t){void 0!==t._closeRequest&&(t._closeRequest._reject(t._storedError),t._closeRequest=void 0);var r=t._writer;void 0!==r&&defaultWriterClosedPromiseReject(r,t._storedError)}function WritableStreamUpdateBackpressure(t,r){var a=t._writer;void 0!==a&&r!==t._backpressure&&(!0===r?defaultWriterReadyPromiseReset(a):defaultWriterReadyPromiseResolve(a)),t._backpressure=r}var C=function(){function WritableStreamDefaultWriter(t){if(!1===IsWritableStream(t))throw new TypeError("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(!0===IsWritableStreamLocked(t))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=t,t._writer=this;var r=t._state;if("writable"===r)!1===WritableStreamCloseQueuedOrInFlight(t)&&!0===t._backpressure?defaultWriterReadyPromiseInitialize(this):defaultWriterReadyPromiseInitializeAsResolved(this),defaultWriterClosedPromiseInitialize(this);else if("erroring"===r)defaultWriterReadyPromiseInitializeAsRejected(this,t._storedError),defaultWriterClosedPromiseInitialize(this);else if("closed"===r)defaultWriterReadyPromiseInitializeAsResolved(this),defaultWriterClosedPromiseInitializeAsResolved(this);else{var a=t._storedError;defaultWriterReadyPromiseInitializeAsRejected(this,a),defaultWriterClosedPromiseInitializeAsRejected(this,a)}}return Object.defineProperty(WritableStreamDefaultWriter.prototype,"closed",{get:function(){return!1===IsWritableStreamDefaultWriter(this)?promiseRejectedWith(defaultWriterBrandCheckException("closed")):this._closedPromise},enumerable:!0,configurable:!0}),Object.defineProperty(WritableStreamDefaultWriter.prototype,"desiredSize",{get:function(){if(!1===IsWritableStreamDefaultWriter(this))throw defaultWriterBrandCheckException("desiredSize");if(void 0===this._ownerWritableStream)throw defaultWriterLockException("desiredSize");return WritableStreamDefaultWriterGetDesiredSize(this)},enumerable:!0,configurable:!0}),Object.defineProperty(WritableStreamDefaultWriter.prototype,"ready",{get:function(){return!1===IsWritableStreamDefaultWriter(this)?promiseRejectedWith(defaultWriterBrandCheckException("ready")):this._readyPromise},enumerable:!0,configurable:!0}),WritableStreamDefaultWriter.prototype.abort=function(t){return!1===IsWritableStreamDefaultWriter(this)?promiseRejectedWith(defaultWriterBrandCheckException("abort")):void 0===this._ownerWritableStream?promiseRejectedWith(defaultWriterLockException("abort")):WritableStreamDefaultWriterAbort(this,t)},WritableStreamDefaultWriter.prototype.close=function(){if(!1===IsWritableStreamDefaultWriter(this))return promiseRejectedWith(defaultWriterBrandCheckException("close"));var t=this._ownerWritableStream;return void 0===t?promiseRejectedWith(defaultWriterLockException("close")):!0===WritableStreamCloseQueuedOrInFlight(t)?promiseRejectedWith(new TypeError("Cannot close an already-closing stream")):WritableStreamDefaultWriterClose(this)},WritableStreamDefaultWriter.prototype.releaseLock=function(){if(!1===IsWritableStreamDefaultWriter(this))throw defaultWriterBrandCheckException("releaseLock");void 0!==this._ownerWritableStream&&WritableStreamDefaultWriterRelease(this)},WritableStreamDefaultWriter.prototype.write=function(t){return!1===IsWritableStreamDefaultWriter(this)?promiseRejectedWith(defaultWriterBrandCheckException("write")):void 0===this._ownerWritableStream?promiseRejectedWith(defaultWriterLockException("write to")):WritableStreamDefaultWriterWrite(this,t)},WritableStreamDefaultWriter}();function IsWritableStreamDefaultWriter(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_ownerWritableStream")}function WritableStreamDefaultWriterAbort(t,r){return WritableStreamAbort(t._ownerWritableStream,r)}function WritableStreamDefaultWriterClose(t){return WritableStreamClose(t._ownerWritableStream)}function WritableStreamDefaultWriterCloseWithErrorPropagation(t){var r=t._ownerWritableStream,a=r._state;return!0===WritableStreamCloseQueuedOrInFlight(r)||"closed"===a?promiseResolvedWith(void 0):"errored"===a?promiseRejectedWith(r._storedError):WritableStreamDefaultWriterClose(t)}function WritableStreamDefaultWriterEnsureClosedPromiseRejected(t,r){"pending"===t._closedPromiseState?defaultWriterClosedPromiseReject(t,r):defaultWriterClosedPromiseResetToRejected(t,r)}function WritableStreamDefaultWriterEnsureReadyPromiseRejected(t,r){"pending"===t._readyPromiseState?defaultWriterReadyPromiseReject(t,r):defaultWriterReadyPromiseResetToRejected(t,r)}function WritableStreamDefaultWriterGetDesiredSize(t){var r=t._ownerWritableStream,a=r._state;return"errored"===a||"erroring"===a?null:"closed"===a?0:WritableStreamDefaultControllerGetDesiredSize(r._writableStreamController)}function WritableStreamDefaultWriterRelease(t){var r=t._ownerWritableStream,a=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");WritableStreamDefaultWriterEnsureReadyPromiseRejected(t,a),WritableStreamDefaultWriterEnsureClosedPromiseRejected(t,a),r._writer=void 0,t._ownerWritableStream=void 0}function WritableStreamDefaultWriterWrite(t,r){var a=t._ownerWritableStream,o=a._writableStreamController,i=WritableStreamDefaultControllerGetChunkSize(o,r);if(a!==t._ownerWritableStream)return promiseRejectedWith(defaultWriterLockException("write to"));var l=a._state;if("errored"===l)return promiseRejectedWith(a._storedError);if(!0===WritableStreamCloseQueuedOrInFlight(a)||"closed"===l)return promiseRejectedWith(new TypeError("The stream is closing or closed and cannot be written to"));if("erroring"===l)return promiseRejectedWith(a._storedError);var u=WritableStreamAddWriteRequest(a);return WritableStreamDefaultControllerWrite(o,r,i),u}var R=function(){function WritableStreamDefaultController(){throw new TypeError("WritableStreamDefaultController cannot be constructed explicitly")}return WritableStreamDefaultController.prototype.error=function(t){if(!1===IsWritableStreamDefaultController(this))throw new TypeError("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");"writable"===this._controlledWritableStream._state&&WritableStreamDefaultControllerError(this,t)},WritableStreamDefaultController.prototype[_]=function(t){var r=this._abortAlgorithm(t);return WritableStreamDefaultControllerClearAlgorithms(this),r},WritableStreamDefaultController.prototype[S]=function(){ResetQueue(this)},WritableStreamDefaultController}();function IsWritableStreamDefaultController(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_controlledWritableStream")}function SetUpWritableStreamDefaultController(t,r,a,o,i,l,u,c){r._controlledWritableStream=t,t._writableStreamController=r,r._queue=void 0,r._queueTotalSize=void 0,ResetQueue(r),r._started=!1,r._strategySizeAlgorithm=c,r._strategyHWM=u,r._writeAlgorithm=o,r._closeAlgorithm=i,r._abortAlgorithm=l;var d=WritableStreamDefaultControllerGetBackpressure(r);WritableStreamUpdateBackpressure(t,d),uponPromise(promiseResolvedWith(a()),(function(){r._started=!0,WritableStreamDefaultControllerAdvanceQueueIfNeeded(r)}),(function(a){r._started=!0,WritableStreamDealWithRejection(t,a)}))}function SetUpWritableStreamDefaultControllerFromUnderlyingSink(t,r,a,o){var i=Object.create(R.prototype);function startAlgorithm(){return InvokeOrNoop(r,"start",[i])}var l=CreateAlgorithmFromUnderlyingMethod(r,"write",1,[i]),u=CreateAlgorithmFromUnderlyingMethod(r,"close",0,[]),c=CreateAlgorithmFromUnderlyingMethod(r,"abort",1,[]);SetUpWritableStreamDefaultController(t,i,startAlgorithm,l,u,c,a,o)}function WritableStreamDefaultControllerClearAlgorithms(t){t._writeAlgorithm=void 0,t._closeAlgorithm=void 0,t._abortAlgorithm=void 0,t._strategySizeAlgorithm=void 0}function WritableStreamDefaultControllerClose(t){EnqueueValueWithSize(t,"close",0),WritableStreamDefaultControllerAdvanceQueueIfNeeded(t)}function WritableStreamDefaultControllerGetChunkSize(t,r){try{return t._strategySizeAlgorithm(r)}catch(r){return WritableStreamDefaultControllerErrorIfNeeded(t,r),1}}function WritableStreamDefaultControllerGetDesiredSize(t){return t._strategyHWM-t._queueTotalSize}function WritableStreamDefaultControllerWrite(t,r,a){var o={chunk:r};try{EnqueueValueWithSize(t,o,a)}catch(r){return void WritableStreamDefaultControllerErrorIfNeeded(t,r)}var i=t._controlledWritableStream;!1===WritableStreamCloseQueuedOrInFlight(i)&&"writable"===i._state&&WritableStreamUpdateBackpressure(i,WritableStreamDefaultControllerGetBackpressure(t)),WritableStreamDefaultControllerAdvanceQueueIfNeeded(t)}function WritableStreamDefaultControllerAdvanceQueueIfNeeded(t){var r=t._controlledWritableStream;if(!1!==t._started&&void 0===r._inFlightWriteRequest)if("erroring"!==r._state){if(0!==t._queue.length){var a=PeekQueueValue(t);"close"===a?WritableStreamDefaultControllerProcessClose(t):WritableStreamDefaultControllerProcessWrite(t,a.chunk)}}else WritableStreamFinishErroring(r)}function WritableStreamDefaultControllerErrorIfNeeded(t,r){"writable"===t._controlledWritableStream._state&&WritableStreamDefaultControllerError(t,r)}function WritableStreamDefaultControllerProcessClose(t){var r=t._controlledWritableStream;WritableStreamMarkCloseRequestInFlight(r),DequeueValue(t);var a=t._closeAlgorithm();WritableStreamDefaultControllerClearAlgorithms(t),uponPromise(a,(function(){WritableStreamFinishInFlightClose(r)}),(function(t){WritableStreamFinishInFlightCloseWithError(r,t)}))}function WritableStreamDefaultControllerProcessWrite(t,r){var a=t._controlledWritableStream;WritableStreamMarkFirstWriteRequestInFlight(a),uponPromise(t._writeAlgorithm(r),(function(){WritableStreamFinishInFlightWrite(a);var r=a._state;if(DequeueValue(t),!1===WritableStreamCloseQueuedOrInFlight(a)&&"writable"===r){var o=WritableStreamDefaultControllerGetBackpressure(t);WritableStreamUpdateBackpressure(a,o)}WritableStreamDefaultControllerAdvanceQueueIfNeeded(t)}),(function(r){"writable"===a._state&&WritableStreamDefaultControllerClearAlgorithms(t),WritableStreamFinishInFlightWriteWithError(a,r)}))}function WritableStreamDefaultControllerGetBackpressure(t){return WritableStreamDefaultControllerGetDesiredSize(t)<=0}function WritableStreamDefaultControllerError(t,r){var a=t._controlledWritableStream;WritableStreamDefaultControllerClearAlgorithms(t),WritableStreamStartErroring(a,r)}function streamBrandCheckException(t){return new TypeError("WritableStream.prototype."+t+" can only be used on a WritableStream")}function defaultWriterBrandCheckException(t){return new TypeError("WritableStreamDefaultWriter.prototype."+t+" can only be used on a WritableStreamDefaultWriter")}function defaultWriterLockException(t){return new TypeError("Cannot "+t+" a stream using a released writer")}function defaultWriterClosedPromiseInitialize(t){t._closedPromise=newPromise((function(r,a){t._closedPromise_resolve=r,t._closedPromise_reject=a,t._closedPromiseState="pending"}))}function defaultWriterClosedPromiseInitializeAsRejected(t,r){defaultWriterClosedPromiseInitialize(t),defaultWriterClosedPromiseReject(t,r)}function defaultWriterClosedPromiseInitializeAsResolved(t){defaultWriterClosedPromiseInitialize(t),defaultWriterClosedPromiseResolve(t)}function defaultWriterClosedPromiseReject(t,r){setPromiseIsHandledToTrue(t._closedPromise),t._closedPromise_reject(r),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="rejected"}function defaultWriterClosedPromiseResetToRejected(t,r){defaultWriterClosedPromiseInitializeAsRejected(t,r)}function defaultWriterClosedPromiseResolve(t){t._closedPromise_resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="resolved"}function defaultWriterReadyPromiseInitialize(t){t._readyPromise=newPromise((function(r,a){t._readyPromise_resolve=r,t._readyPromise_reject=a})),t._readyPromiseState="pending"}function defaultWriterReadyPromiseInitializeAsRejected(t,r){defaultWriterReadyPromiseInitialize(t),defaultWriterReadyPromiseReject(t,r)}function defaultWriterReadyPromiseInitializeAsResolved(t){defaultWriterReadyPromiseInitialize(t),defaultWriterReadyPromiseResolve(t)}function defaultWriterReadyPromiseReject(t,r){setPromiseIsHandledToTrue(t._readyPromise),t._readyPromise_reject(r),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="rejected"}function defaultWriterReadyPromiseReset(t){defaultWriterReadyPromiseInitialize(t)}function defaultWriterReadyPromiseResetToRejected(t,r){defaultWriterReadyPromiseInitializeAsRejected(t,r)}function defaultWriterReadyPromiseResolve(t){t._readyPromise_resolve(void 0),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="fulfilled"}function isAbortSignal(t){if("object"!=typeof t||null===t)return!1;try{return"boolean"==typeof t.aborted}catch(t){return!1}}var k="undefined"!=typeof DOMException?DOMException:void 0;function isDOMExceptionConstructor(t){if("function"!=typeof t&&"object"!=typeof t)return!1;try{return new t,!0}catch(t){return!1}}function createDOMExceptionPolyfill(){var t=function DOMException(t,r){this.message=t||"",this.name=r||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return t.prototype=Object.create(Error.prototype),Object.defineProperty(t.prototype,"constructor",{value:t,writable:!0,configurable:!0}),t}var P=isDOMExceptionConstructor(k)?k:createDOMExceptionPolyfill();function ReadableStreamPipeTo(t,r,a,o,i,l){var u=AcquireReadableStreamDefaultReader(t),c=AcquireWritableStreamDefaultWriter(r);t._disturbed=!0;var d=!1,h=promiseResolvedWith(void 0);return newPromise((function(p,m){var v;if(void 0!==l){if(v=function(){var a=new P("Aborted","AbortError"),l=[];!1===o&&l.push((function(){return"writable"===r._state?WritableStreamAbort(r,a):promiseResolvedWith(void 0)})),!1===i&&l.push((function(){return"readable"===t._state?ReadableStreamCancel(t,a):promiseResolvedWith(void 0)})),shutdownWithAction((function(){return Promise.all(l.map((function(t){return t()})))}),!0,a)},!0===l.aborted)return void v();l.addEventListener("abort",v)}function pipeLoop(){return newPromise((function(t,r){function next(a){a?t():PerformPromiseThen(pipeStep(),next,r)}next(!1)}))}function pipeStep(){return!0===d?promiseResolvedWith(!0):PerformPromiseThen(c._readyPromise,(function(){return PerformPromiseThen(ReadableStreamDefaultReaderRead(u),(function(t){return!0===t.done||(h=PerformPromiseThen(WritableStreamDefaultWriterWrite(c,t.value),void 0,noop),!1)}))}))}if(isOrBecomesErrored(t,u._closedPromise,(function(t){!1===o?shutdownWithAction((function(){return WritableStreamAbort(r,t)}),!0,t):shutdown(!0,t)})),isOrBecomesErrored(r,c._closedPromise,(function(r){!1===i?shutdownWithAction((function(){return ReadableStreamCancel(t,r)}),!0,r):shutdown(!0,r)})),isOrBecomesClosed(t,u._closedPromise,(function(){!1===a?shutdownWithAction((function(){return WritableStreamDefaultWriterCloseWithErrorPropagation(c)})):shutdown()})),!0===WritableStreamCloseQueuedOrInFlight(r)||"closed"===r._state){var g=new TypeError("the destination writable stream closed before all data could be piped to it");!1===i?shutdownWithAction((function(){return ReadableStreamCancel(t,g)}),!0,g):shutdown(!0,g)}function waitForWritesToFinish(){var t=h;return PerformPromiseThen(h,(function(){return t!==h?waitForWritesToFinish():void 0}))}function isOrBecomesErrored(t,r,a){"errored"===t._state?a(t._storedError):uponRejection(r,a)}function isOrBecomesClosed(t,r,a){"closed"===t._state?a():uponFulfillment(r,a)}function shutdownWithAction(t,a,o){function doTheRest(){uponPromise(t(),(function(){return finalize(a,o)}),(function(t){return finalize(!0,t)}))}!0!==d&&(d=!0,"writable"===r._state&&!1===WritableStreamCloseQueuedOrInFlight(r)?uponFulfillment(waitForWritesToFinish(),doTheRest):doTheRest())}function shutdown(t,a){!0!==d&&(d=!0,"writable"===r._state&&!1===WritableStreamCloseQueuedOrInFlight(r)?uponFulfillment(waitForWritesToFinish(),(function(){return finalize(t,a)})):finalize(t,a))}function finalize(t,r){WritableStreamDefaultWriterRelease(c),ReadableStreamReaderGenericRelease(u),void 0!==l&&l.removeEventListener("abort",v),t?m(r):p(void 0)}setPromiseIsHandledToTrue(pipeLoop())}))}var w=function(){function ReadableStreamDefaultController(){throw new TypeError}return Object.defineProperty(ReadableStreamDefaultController.prototype,"desiredSize",{get:function(){if(!1===IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException("desiredSize");return ReadableStreamDefaultControllerGetDesiredSize(this)},enumerable:!0,configurable:!0}),ReadableStreamDefaultController.prototype.close=function(){if(!1===IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException("close");if(!1===ReadableStreamDefaultControllerCanCloseOrEnqueue(this))throw new TypeError("The stream is not in a state that permits close");ReadableStreamDefaultControllerClose(this)},ReadableStreamDefaultController.prototype.enqueue=function(t){if(!1===IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException("enqueue");if(!1===ReadableStreamDefaultControllerCanCloseOrEnqueue(this))throw new TypeError("The stream is not in a state that permits enqueue");return ReadableStreamDefaultControllerEnqueue(this,t)},ReadableStreamDefaultController.prototype.error=function(t){if(!1===IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException("error");ReadableStreamDefaultControllerError(this,t)},ReadableStreamDefaultController.prototype[p]=function(t){ResetQueue(this);var r=this._cancelAlgorithm(t);return ReadableStreamDefaultControllerClearAlgorithms(this),r},ReadableStreamDefaultController.prototype[m]=function(){var t=this._controlledReadableStream;if(this._queue.length>0){var r=DequeueValue(this);return!0===this._closeRequested&&0===this._queue.length?(ReadableStreamDefaultControllerClearAlgorithms(this),ReadableStreamClose(t)):ReadableStreamDefaultControllerCallPullIfNeeded(this),promiseResolvedWith(ReadableStreamCreateReadResult(r,!1,t._reader._forAuthorCode))}var a=ReadableStreamAddReadRequest(t);return ReadableStreamDefaultControllerCallPullIfNeeded(this),a},ReadableStreamDefaultController}();function IsReadableStreamDefaultController(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_controlledReadableStream")}function ReadableStreamDefaultControllerCallPullIfNeeded(t){!1!==ReadableStreamDefaultControllerShouldCallPull(t)&&(!0!==t._pulling?(t._pulling=!0,uponPromise(t._pullAlgorithm(),(function(){t._pulling=!1,!0===t._pullAgain&&(t._pullAgain=!1,ReadableStreamDefaultControllerCallPullIfNeeded(t))}),(function(r){ReadableStreamDefaultControllerError(t,r)}))):t._pullAgain=!0)}function ReadableStreamDefaultControllerShouldCallPull(t){var r=t._controlledReadableStream;return!1!==ReadableStreamDefaultControllerCanCloseOrEnqueue(t)&&!1!==t._started&&(!0===IsReadableStreamLocked(r)&&ReadableStreamGetNumReadRequests(r)>0||ReadableStreamDefaultControllerGetDesiredSize(t)>0)}function ReadableStreamDefaultControllerClearAlgorithms(t){t._pullAlgorithm=void 0,t._cancelAlgorithm=void 0,t._strategySizeAlgorithm=void 0}function ReadableStreamDefaultControllerClose(t){var r=t._controlledReadableStream;t._closeRequested=!0,0===t._queue.length&&(ReadableStreamDefaultControllerClearAlgorithms(t),ReadableStreamClose(r))}function ReadableStreamDefaultControllerEnqueue(t,r){var a=t._controlledReadableStream;if(!0===IsReadableStreamLocked(a)&&ReadableStreamGetNumReadRequests(a)>0)ReadableStreamFulfillReadRequest(a,r,!1);else{var o=void 0;try{o=t._strategySizeAlgorithm(r)}catch(r){throw ReadableStreamDefaultControllerError(t,r),r}try{EnqueueValueWithSize(t,r,o)}catch(r){throw ReadableStreamDefaultControllerError(t,r),r}}ReadableStreamDefaultControllerCallPullIfNeeded(t)}function ReadableStreamDefaultControllerError(t,r){var a=t._controlledReadableStream;"readable"===a._state&&(ResetQueue(t),ReadableStreamDefaultControllerClearAlgorithms(t),ReadableStreamError(a,r))}function ReadableStreamDefaultControllerGetDesiredSize(t){var r=t._controlledReadableStream._state;return"errored"===r?null:"closed"===r?0:t._strategyHWM-t._queueTotalSize}function ReadableStreamDefaultControllerHasBackpressure(t){return!0!==ReadableStreamDefaultControllerShouldCallPull(t)}function ReadableStreamDefaultControllerCanCloseOrEnqueue(t){var r=t._controlledReadableStream._state;return!1===t._closeRequested&&"readable"===r}function SetUpReadableStreamDefaultController(t,r,a,o,i,l,u){r._controlledReadableStream=t,r._queue=void 0,r._queueTotalSize=void 0,ResetQueue(r),r._started=!1,r._closeRequested=!1,r._pullAgain=!1,r._pulling=!1,r._strategySizeAlgorithm=u,r._strategyHWM=l,r._pullAlgorithm=o,r._cancelAlgorithm=i,t._readableStreamController=r,uponPromise(promiseResolvedWith(a()),(function(){r._started=!0,ReadableStreamDefaultControllerCallPullIfNeeded(r)}),(function(t){ReadableStreamDefaultControllerError(r,t)}))}function SetUpReadableStreamDefaultControllerFromUnderlyingSource(t,r,a,o){var i=Object.create(w.prototype);function startAlgorithm(){return InvokeOrNoop(r,"start",[i])}var l=CreateAlgorithmFromUnderlyingMethod(r,"pull",0,[i]),u=CreateAlgorithmFromUnderlyingMethod(r,"cancel",1,[]);SetUpReadableStreamDefaultController(t,i,startAlgorithm,l,u,a,o)}function defaultControllerBrandCheckException(t){return new TypeError("ReadableStreamDefaultController.prototype."+t+" can only be used on a ReadableStreamDefaultController")}function ReadableStreamTee(t,r){var a,o,i,l,u,c=AcquireReadableStreamDefaultReader(t),d=!1,h=!1,p=!1,m=newPromise((function(t){u=t}));function pullAlgorithm(){return!0===d||(d=!0,setPromiseIsHandledToTrue(transformPromiseWith(ReadableStreamDefaultReaderRead(c),(function(t){if(d=!1,!0===t.done)return!1===h&&ReadableStreamDefaultControllerClose(i._readableStreamController),void(!1===p&&ReadableStreamDefaultControllerClose(l._readableStreamController));var r=t.value,a=r,o=r;!1===h&&ReadableStreamDefaultControllerEnqueue(i._readableStreamController,a),!1===p&&ReadableStreamDefaultControllerEnqueue(l._readableStreamController,o)})))),promiseResolvedWith(void 0)}function cancel1Algorithm(r){if(h=!0,a=r,!0===p){var i=createArrayFromList([a,o]),l=ReadableStreamCancel(t,i);u(l)}return m}function cancel2Algorithm(r){if(p=!0,o=r,!0===h){var i=createArrayFromList([a,o]),l=ReadableStreamCancel(t,i);u(l)}return m}function startAlgorithm(){}return i=CreateReadableStream(startAlgorithm,pullAlgorithm,cancel1Algorithm),l=CreateReadableStream(startAlgorithm,pullAlgorithm,cancel2Algorithm),uponRejection(c._closedPromise,(function(t){ReadableStreamDefaultControllerError(i._readableStreamController,t),ReadableStreamDefaultControllerError(l._readableStreamController,t)})),[i,l]}var x=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},T=function(){function ReadableStreamBYOBRequest(){throw new TypeError("ReadableStreamBYOBRequest cannot be used directly")}return Object.defineProperty(ReadableStreamBYOBRequest.prototype,"view",{get:function(){if(!1===IsReadableStreamBYOBRequest(this))throw byobRequestBrandCheckException("view");return this._view},enumerable:!0,configurable:!0}),ReadableStreamBYOBRequest.prototype.respond=function(t){if(!1===IsReadableStreamBYOBRequest(this))throw byobRequestBrandCheckException("respond");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");IsDetachedBuffer(this._view.buffer),ReadableByteStreamControllerRespond(this._associatedReadableByteStreamController,t)},ReadableStreamBYOBRequest.prototype.respondWithNewView=function(t){if(!1===IsReadableStreamBYOBRequest(this))throw byobRequestBrandCheckException("respond");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");if(!ArrayBuffer.isView(t))throw new TypeError("You can only respond with array buffer views");IsDetachedBuffer(t.buffer),ReadableByteStreamControllerRespondWithNewView(this._associatedReadableByteStreamController,t)},ReadableStreamBYOBRequest}(),E=function(){function ReadableByteStreamController(){throw new TypeError("ReadableByteStreamController constructor cannot be used directly")}return Object.defineProperty(ReadableByteStreamController.prototype,"byobRequest",{get:function(){if(!1===IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("byobRequest");if(void 0===this._byobRequest&&this._pendingPullIntos.length>0){var t=this._pendingPullIntos.peek(),r=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),a=Object.create(T.prototype);SetUpReadableStreamBYOBRequest(a,this,r),this._byobRequest=a}return this._byobRequest},enumerable:!0,configurable:!0}),Object.defineProperty(ReadableByteStreamController.prototype,"desiredSize",{get:function(){if(!1===IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("desiredSize");return ReadableByteStreamControllerGetDesiredSize(this)},enumerable:!0,configurable:!0}),ReadableByteStreamController.prototype.close=function(){if(!1===IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("close");if(!0===this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var t=this._controlledReadableByteStream._state;if("readable"!==t)throw new TypeError("The stream (in "+t+" state) is not in the readable state and cannot be closed");ReadableByteStreamControllerClose(this)},ReadableByteStreamController.prototype.enqueue=function(t){if(!1===IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("enqueue");if(!0===this._closeRequested)throw new TypeError("stream is closed or draining");var r=this._controlledReadableByteStream._state;if("readable"!==r)throw new TypeError("The stream (in "+r+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(t))throw new TypeError("You can only enqueue array buffer views when using a ReadableByteStreamController");IsDetachedBuffer(t.buffer),ReadableByteStreamControllerEnqueue(this,t)},ReadableByteStreamController.prototype.error=function(t){if(!1===IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("error");ReadableByteStreamControllerError(this,t)},ReadableByteStreamController.prototype[p]=function(t){this._pendingPullIntos.length>0&&(this._pendingPullIntos.peek().bytesFilled=0),ResetQueue(this);var r=this._cancelAlgorithm(t);return ReadableByteStreamControllerClearAlgorithms(this),r},ReadableByteStreamController.prototype[m]=function(){var t=this._controlledReadableByteStream;if(this._queueTotalSize>0){var r=this._queue.shift();this._queueTotalSize-=r.byteLength,ReadableByteStreamControllerHandleQueueDrain(this);var a=void 0;try{a=new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}catch(t){return promiseRejectedWith(t)}return promiseResolvedWith(ReadableStreamCreateReadResult(a,!1,t._reader._forAuthorCode))}var o=this._autoAllocateChunkSize;if(void 0!==o){var i=void 0;try{i=new ArrayBuffer(o)}catch(t){return promiseRejectedWith(t)}var l={buffer:i,byteOffset:0,byteLength:o,bytesFilled:0,elementSize:1,ctor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(l)}var u=ReadableStreamAddReadRequest(t);return ReadableByteStreamControllerCallPullIfNeeded(this),u},ReadableByteStreamController}();function IsReadableByteStreamController(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_controlledReadableByteStream")}function IsReadableStreamBYOBRequest(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_associatedReadableByteStreamController")}function ReadableByteStreamControllerCallPullIfNeeded(t){!1!==ReadableByteStreamControllerShouldCallPull(t)&&(!0!==t._pulling?(t._pulling=!0,uponPromise(t._pullAlgorithm(),(function(){t._pulling=!1,!0===t._pullAgain&&(t._pullAgain=!1,ReadableByteStreamControllerCallPullIfNeeded(t))}),(function(r){ReadableByteStreamControllerError(t,r)}))):t._pullAgain=!0)}function ReadableByteStreamControllerClearPendingPullIntos(t){ReadableByteStreamControllerInvalidateBYOBRequest(t),t._pendingPullIntos=new h}function ReadableByteStreamControllerCommitPullIntoDescriptor(t,r){var a=!1;"closed"===t._state&&(a=!0);var o=ReadableByteStreamControllerConvertPullIntoDescriptor(r);"default"===r.readerType?ReadableStreamFulfillReadRequest(t,o,a):ReadableStreamFulfillReadIntoRequest(t,o,a)}function ReadableByteStreamControllerConvertPullIntoDescriptor(t){var r=t.bytesFilled,a=t.elementSize;return new t.ctor(t.buffer,t.byteOffset,r/a)}function ReadableByteStreamControllerEnqueueChunkToQueue(t,r,a,o){t._queue.push({buffer:r,byteOffset:a,byteLength:o}),t._queueTotalSize+=o}function ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(t,r){var a=r.elementSize,o=r.bytesFilled-r.bytesFilled%a,i=Math.min(t._queueTotalSize,r.byteLength-r.bytesFilled),l=r.bytesFilled+i,u=l-l%a,c=i,d=!1;u>o&&(c=u-r.bytesFilled,d=!0);for(var h=t._queue;c>0;){var p=h.peek(),m=Math.min(c,p.byteLength),v=r.byteOffset+r.bytesFilled;ArrayBufferCopy(r.buffer,v,p.buffer,p.byteOffset,m),p.byteLength===m?h.shift():(p.byteOffset+=m,p.byteLength-=m),t._queueTotalSize-=m,ReadableByteStreamControllerFillHeadPullIntoDescriptor(t,m,r),c-=m}return d}function ReadableByteStreamControllerFillHeadPullIntoDescriptor(t,r,a){ReadableByteStreamControllerInvalidateBYOBRequest(t),a.bytesFilled+=r}function ReadableByteStreamControllerHandleQueueDrain(t){0===t._queueTotalSize&&!0===t._closeRequested?(ReadableByteStreamControllerClearAlgorithms(t),ReadableStreamClose(t._controlledReadableByteStream)):ReadableByteStreamControllerCallPullIfNeeded(t)}function ReadableByteStreamControllerInvalidateBYOBRequest(t){void 0!==t._byobRequest&&(t._byobRequest._associatedReadableByteStreamController=void 0,t._byobRequest._view=void 0,t._byobRequest=void 0)}function ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(t){for(;t._pendingPullIntos.length>0;){if(0===t._queueTotalSize)return;var r=t._pendingPullIntos.peek();!0===ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(t,r)&&(ReadableByteStreamControllerShiftPendingPullInto(t),ReadableByteStreamControllerCommitPullIntoDescriptor(t._controlledReadableByteStream,r))}}function ReadableByteStreamControllerPullInto(t,r){var a=t._controlledReadableByteStream,o=1;r.constructor!==DataView&&(o=r.constructor.BYTES_PER_ELEMENT);var i=r.constructor,l={buffer:TransferArrayBuffer(r.buffer),byteOffset:r.byteOffset,byteLength:r.byteLength,bytesFilled:0,elementSize:o,ctor:i,readerType:"byob"};if(t._pendingPullIntos.length>0)return t._pendingPullIntos.push(l),ReadableStreamAddReadIntoRequest(a);if("closed"===a._state)return promiseResolvedWith(ReadableStreamCreateReadResult(new i(l.buffer,l.byteOffset,0),!0,a._reader._forAuthorCode));if(t._queueTotalSize>0){if(!0===ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(t,l)){var u=ReadableByteStreamControllerConvertPullIntoDescriptor(l);return ReadableByteStreamControllerHandleQueueDrain(t),promiseResolvedWith(ReadableStreamCreateReadResult(u,!1,a._reader._forAuthorCode))}if(!0===t._closeRequested){var c=new TypeError("Insufficient bytes to fill elements in the given buffer");return ReadableByteStreamControllerError(t,c),promiseRejectedWith(c)}}t._pendingPullIntos.push(l);var d=ReadableStreamAddReadIntoRequest(a);return ReadableByteStreamControllerCallPullIfNeeded(t),d}function ReadableByteStreamControllerRespondInClosedState(t,r){r.buffer=TransferArrayBuffer(r.buffer);var a=t._controlledReadableByteStream;if(!0===ReadableStreamHasBYOBReader(a))for(;ReadableStreamGetNumReadIntoRequests(a)>0;)ReadableByteStreamControllerCommitPullIntoDescriptor(a,ReadableByteStreamControllerShiftPendingPullInto(t))}function ReadableByteStreamControllerRespondInReadableState(t,r,a){if(a.bytesFilled+r>a.byteLength)throw new RangeError("bytesWritten out of range");if(ReadableByteStreamControllerFillHeadPullIntoDescriptor(t,r,a),!(a.bytesFilled<a.elementSize)){ReadableByteStreamControllerShiftPendingPullInto(t);var o=a.bytesFilled%a.elementSize;if(o>0){var i=a.byteOffset+a.bytesFilled,l=a.buffer.slice(i-o,i);ReadableByteStreamControllerEnqueueChunkToQueue(t,l,0,l.byteLength)}a.buffer=TransferArrayBuffer(a.buffer),a.bytesFilled-=o,ReadableByteStreamControllerCommitPullIntoDescriptor(t._controlledReadableByteStream,a),ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(t)}}function ReadableByteStreamControllerRespondInternal(t,r){var a=t._pendingPullIntos.peek();if("closed"===t._controlledReadableByteStream._state){if(0!==r)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream");ReadableByteStreamControllerRespondInClosedState(t,a)}else ReadableByteStreamControllerRespondInReadableState(t,r,a);ReadableByteStreamControllerCallPullIfNeeded(t)}function ReadableByteStreamControllerShiftPendingPullInto(t){var r=t._pendingPullIntos.shift();return ReadableByteStreamControllerInvalidateBYOBRequest(t),r}function ReadableByteStreamControllerShouldCallPull(t){var r=t._controlledReadableByteStream;return"readable"===r._state&&!0!==t._closeRequested&&!1!==t._started&&(!0===ReadableStreamHasDefaultReader(r)&&ReadableStreamGetNumReadRequests(r)>0||!0===ReadableStreamHasBYOBReader(r)&&ReadableStreamGetNumReadIntoRequests(r)>0||ReadableByteStreamControllerGetDesiredSize(t)>0)}function ReadableByteStreamControllerClearAlgorithms(t){t._pullAlgorithm=void 0,t._cancelAlgorithm=void 0}function ReadableByteStreamControllerClose(t){var r=t._controlledReadableByteStream;if(t._queueTotalSize>0)t._closeRequested=!0;else{if(t._pendingPullIntos.length>0&&t._pendingPullIntos.peek().bytesFilled>0){var a=new TypeError("Insufficient bytes to fill elements in the given buffer");throw ReadableByteStreamControllerError(t,a),a}ReadableByteStreamControllerClearAlgorithms(t),ReadableStreamClose(r)}}function ReadableByteStreamControllerEnqueue(t,r){var a=t._controlledReadableByteStream,o=r.buffer,i=r.byteOffset,l=r.byteLength,u=TransferArrayBuffer(o);!0===ReadableStreamHasDefaultReader(a)?0===ReadableStreamGetNumReadRequests(a)?ReadableByteStreamControllerEnqueueChunkToQueue(t,u,i,l):ReadableStreamFulfillReadRequest(a,new Uint8Array(u,i,l),!1):!0===ReadableStreamHasBYOBReader(a)?(ReadableByteStreamControllerEnqueueChunkToQueue(t,u,i,l),ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(t)):ReadableByteStreamControllerEnqueueChunkToQueue(t,u,i,l),ReadableByteStreamControllerCallPullIfNeeded(t)}function ReadableByteStreamControllerError(t,r){var a=t._controlledReadableByteStream;"readable"===a._state&&(ReadableByteStreamControllerClearPendingPullIntos(t),ResetQueue(t),ReadableByteStreamControllerClearAlgorithms(t),ReadableStreamError(a,r))}function ReadableByteStreamControllerGetDesiredSize(t){var r=t._controlledReadableByteStream._state;return"errored"===r?null:"closed"===r?0:t._strategyHWM-t._queueTotalSize}function ReadableByteStreamControllerRespond(t,r){if(!1===IsFiniteNonNegativeNumber(r=Number(r)))throw new RangeError("bytesWritten must be a finite");ReadableByteStreamControllerRespondInternal(t,r)}function ReadableByteStreamControllerRespondWithNewView(t,r){var a=t._pendingPullIntos.peek();if(a.byteOffset+a.bytesFilled!==r.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(a.byteLength!==r.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");a.buffer=r.buffer,ReadableByteStreamControllerRespondInternal(t,r.byteLength)}function SetUpReadableByteStreamController(t,r,a,o,i,l,u){r._controlledReadableByteStream=t,r._pullAgain=!1,r._pulling=!1,r._byobRequest=void 0,r._queue=r._queueTotalSize=void 0,ResetQueue(r),r._closeRequested=!1,r._started=!1,r._strategyHWM=ValidateAndNormalizeHighWaterMark(l),r._pullAlgorithm=o,r._cancelAlgorithm=i,r._autoAllocateChunkSize=u,r._pendingPullIntos=new h,t._readableStreamController=r,uponPromise(promiseResolvedWith(a()),(function(){r._started=!0,ReadableByteStreamControllerCallPullIfNeeded(r)}),(function(t){ReadableByteStreamControllerError(r,t)}))}function SetUpReadableByteStreamControllerFromUnderlyingSource(t,r,a){var o=Object.create(E.prototype);function startAlgorithm(){return InvokeOrNoop(r,"start",[o])}var i=CreateAlgorithmFromUnderlyingMethod(r,"pull",0,[o]),l=CreateAlgorithmFromUnderlyingMethod(r,"cancel",1,[]),u=r.autoAllocateChunkSize;if(void 0!==u&&(u=Number(u),!1===x(u)||u<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");SetUpReadableByteStreamController(t,o,startAlgorithm,i,l,a,u)}function SetUpReadableStreamBYOBRequest(t,r,a){t._associatedReadableByteStreamController=r,t._view=a}function byobRequestBrandCheckException(t){return new TypeError("ReadableStreamBYOBRequest.prototype."+t+" can only be used on a ReadableStreamBYOBRequest")}function byteStreamControllerBrandCheckException(t){return new TypeError("ReadableByteStreamController.prototype."+t+" can only be used on a ReadableByteStreamController")}function AcquireReadableStreamBYOBReader(t,r){void 0===r&&(r=!1);var a=new O(t);return a._forAuthorCode=r,a}function ReadableStreamAddReadIntoRequest(t){return newPromise((function(r,a){var o={_resolve:r,_reject:a};t._reader._readIntoRequests.push(o)}))}function ReadableStreamFulfillReadIntoRequest(t,r,a){var o=t._reader;o._readIntoRequests.shift()._resolve(ReadableStreamCreateReadResult(r,a,o._forAuthorCode))}function ReadableStreamGetNumReadIntoRequests(t){return t._reader._readIntoRequests.length}function ReadableStreamHasBYOBReader(t){var r=t._reader;return void 0!==r&&!!IsReadableStreamBYOBReader(r)}var O=function(){function ReadableStreamBYOBReader(t){if(!IsReadableStream(t))throw new TypeError("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(!1===IsReadableByteStreamController(t._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(IsReadableStreamLocked(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");ReadableStreamReaderGenericInitialize(this,t),this._readIntoRequests=new h}return Object.defineProperty(ReadableStreamBYOBReader.prototype,"closed",{get:function(){return IsReadableStreamBYOBReader(this)?this._closedPromise:promiseRejectedWith(byobReaderBrandCheckException("closed"))},enumerable:!0,configurable:!0}),ReadableStreamBYOBReader.prototype.cancel=function(t){return IsReadableStreamBYOBReader(this)?void 0===this._ownerReadableStream?promiseRejectedWith(readerLockException("cancel")):ReadableStreamReaderGenericCancel(this,t):promiseRejectedWith(byobReaderBrandCheckException("cancel"))},ReadableStreamBYOBReader.prototype.read=function(t){return IsReadableStreamBYOBReader(this)?void 0===this._ownerReadableStream?promiseRejectedWith(readerLockException("read from")):ArrayBuffer.isView(t)?(IsDetachedBuffer(t.buffer),0===t.byteLength?promiseRejectedWith(new TypeError("view must have non-zero byteLength")):ReadableStreamBYOBReaderRead(this,t)):promiseRejectedWith(new TypeError("view must be an array buffer view")):promiseRejectedWith(byobReaderBrandCheckException("read"))},ReadableStreamBYOBReader.prototype.releaseLock=function(){if(!IsReadableStreamBYOBReader(this))throw byobReaderBrandCheckException("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ReadableStreamReaderGenericRelease(this)}},ReadableStreamBYOBReader}();function IsReadableStreamBYOBReader(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_readIntoRequests")}function ReadableStreamBYOBReaderRead(t,r){var a=t._ownerReadableStream;return a._disturbed=!0,"errored"===a._state?promiseRejectedWith(a._storedError):ReadableByteStreamControllerPullInto(a._readableStreamController,r)}function byobReaderBrandCheckException(t){return new TypeError("ReadableStreamBYOBReader.prototype."+t+" can only be used on a ReadableStreamBYOBReader")}var I=function(){function ReadableStream(t,r){void 0===t&&(t={}),void 0===r&&(r={}),InitializeReadableStream(this);var a=r.size,o=r.highWaterMark,i=t.type;if("bytes"===String(i)){if(void 0!==a)throw new RangeError("The strategy for a byte stream cannot have a size function");void 0===o&&(o=0),SetUpReadableByteStreamControllerFromUnderlyingSource(this,t,o=ValidateAndNormalizeHighWaterMark(o))}else{if(void 0!==i)throw new RangeError("Invalid type is specified");var l=MakeSizeAlgorithmFromSizeFunction(a);void 0===o&&(o=1),SetUpReadableStreamDefaultControllerFromUnderlyingSource(this,t,o=ValidateAndNormalizeHighWaterMark(o),l)}}return Object.defineProperty(ReadableStream.prototype,"locked",{get:function(){if(!1===IsReadableStream(this))throw streamBrandCheckException$1("locked");return IsReadableStreamLocked(this)},enumerable:!0,configurable:!0}),ReadableStream.prototype.cancel=function(t){return!1===IsReadableStream(this)?promiseRejectedWith(streamBrandCheckException$1("cancel")):!0===IsReadableStreamLocked(this)?promiseRejectedWith(new TypeError("Cannot cancel a stream that already has a reader")):ReadableStreamCancel(this,t)},ReadableStream.prototype.getReader=function(t){var r=(void 0===t?{}:t).mode;if(!1===IsReadableStream(this))throw streamBrandCheckException$1("getReader");if(void 0===r)return AcquireReadableStreamDefaultReader(this,!0);if("byob"===(r=String(r)))return AcquireReadableStreamBYOBReader(this,!0);throw new RangeError("Invalid mode is specified")},ReadableStream.prototype.pipeThrough=function(t,r){var a=t.writable,o=t.readable,i=void 0===r?{}:r,l=i.preventClose,u=i.preventAbort,c=i.preventCancel,d=i.signal;if(!1===IsReadableStream(this))throw streamBrandCheckException$1("pipeThrough");if(!1===IsWritableStream(a))throw new TypeError("writable argument to pipeThrough must be a WritableStream");if(!1===IsReadableStream(o))throw new TypeError("readable argument to pipeThrough must be a ReadableStream");if(l=Boolean(l),u=Boolean(u),c=Boolean(c),void 0!==d&&!isAbortSignal(d))throw new TypeError("ReadableStream.prototype.pipeThrough's signal option must be an AbortSignal");if(!0===IsReadableStreamLocked(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(!0===IsWritableStreamLocked(a))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return setPromiseIsHandledToTrue(ReadableStreamPipeTo(this,a,l,u,c,d)),o},ReadableStream.prototype.pipeTo=function(t,r){var a=void 0===r?{}:r,o=a.preventClose,i=a.preventAbort,l=a.preventCancel,u=a.signal;return!1===IsReadableStream(this)?promiseRejectedWith(streamBrandCheckException$1("pipeTo")):!1===IsWritableStream(t)?promiseRejectedWith(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream")):(o=Boolean(o),i=Boolean(i),l=Boolean(l),void 0===u||isAbortSignal(u)?!0===IsReadableStreamLocked(this)?promiseRejectedWith(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):!0===IsWritableStreamLocked(t)?promiseRejectedWith(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):ReadableStreamPipeTo(this,t,o,i,l,u):promiseRejectedWith(new TypeError("ReadableStream.prototype.pipeTo's signal option must be an AbortSignal")))},ReadableStream.prototype.tee=function(){if(!1===IsReadableStream(this))throw streamBrandCheckException$1("tee");return createArrayFromList(ReadableStreamTee(this))},ReadableStream.prototype.getIterator=function(t){var r=(void 0===t?{}:t).preventCancel,a=void 0!==r&&r;if(!1===IsReadableStream(this))throw streamBrandCheckException$1("getIterator");return AcquireReadableStreamAsyncIterator(this,a)},ReadableStream}();function CreateReadableStream(t,r,a,o,i){void 0===o&&(o=1),void 0===i&&(i=function(){return 1});var l=Object.create(I.prototype);return InitializeReadableStream(l),SetUpReadableStreamDefaultController(l,Object.create(w.prototype),t,r,a,o,i),l}function InitializeReadableStream(t){t._state="readable",t._reader=void 0,t._storedError=void 0,t._disturbed=!1}function IsReadableStream(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_readableStreamController")}function IsReadableStreamLocked(t){return void 0!==t._reader}function ReadableStreamCancel(t,r){return t._disturbed=!0,"closed"===t._state?promiseResolvedWith(void 0):"errored"===t._state?promiseRejectedWith(t._storedError):(ReadableStreamClose(t),transformPromiseWith(t._readableStreamController[p](r),noop))}function ReadableStreamClose(t){t._state="closed";var r=t._reader;void 0!==r&&(IsReadableStreamDefaultReader(r)&&(r._readRequests.forEach((function(t){t._resolve(ReadableStreamCreateReadResult(void 0,!0,r._forAuthorCode))})),r._readRequests=new h),defaultReaderClosedPromiseResolve(r))}function ReadableStreamError(t,r){t._state="errored",t._storedError=r;var a=t._reader;void 0!==a&&(IsReadableStreamDefaultReader(a)?(a._readRequests.forEach((function(t){t._reject(r)})),a._readRequests=new h):(a._readIntoRequests.forEach((function(t){t._reject(r)})),a._readIntoRequests=new h),defaultReaderClosedPromiseReject(a,r))}function streamBrandCheckException$1(t){return new TypeError("ReadableStream.prototype."+t+" can only be used on a ReadableStream")}"symbol"==typeof r.asyncIterator&&Object.defineProperty(I.prototype,r.asyncIterator,{value:I.prototype.getIterator,enumerable:!1,writable:!0,configurable:!0});var D=function(){function ByteLengthQueuingStrategy(t){var r=t.highWaterMark;this.highWaterMark=r}return ByteLengthQueuingStrategy.prototype.size=function(t){return t.byteLength},ByteLengthQueuingStrategy}(),L=function(){function CountQueuingStrategy(t){var r=t.highWaterMark;this.highWaterMark=r}return CountQueuingStrategy.prototype.size=function(){return 1},CountQueuingStrategy}(),W=function(){function TransformStream(t,r,a){void 0===t&&(t={}),void 0===r&&(r={}),void 0===a&&(a={});var o=r.size,i=r.highWaterMark,l=a.size,u=a.highWaterMark;if(void 0!==t.writableType)throw new RangeError("Invalid writable type specified");var c=MakeSizeAlgorithmFromSizeFunction(o);if(void 0===i&&(i=1),i=ValidateAndNormalizeHighWaterMark(i),void 0!==t.readableType)throw new RangeError("Invalid readable type specified");var d,h=MakeSizeAlgorithmFromSizeFunction(l);void 0===u&&(u=0),u=ValidateAndNormalizeHighWaterMark(u),InitializeTransformStream(this,newPromise((function(t){d=t})),i,c,u,h),SetUpTransformStreamDefaultControllerFromTransformer(this,t);var p=InvokeOrNoop(t,"start",[this._transformStreamController]);d(p)}return Object.defineProperty(TransformStream.prototype,"readable",{get:function(){if(!1===IsTransformStream(this))throw streamBrandCheckException$2("readable");return this._readable},enumerable:!0,configurable:!0}),Object.defineProperty(TransformStream.prototype,"writable",{get:function(){if(!1===IsTransformStream(this))throw streamBrandCheckException$2("writable");return this._writable},enumerable:!0,configurable:!0}),TransformStream}();function InitializeTransformStream(t,r,a,o,i,l){function startAlgorithm(){return r}function writeAlgorithm(r){return TransformStreamDefaultSinkWriteAlgorithm(t,r)}function abortAlgorithm(r){return TransformStreamDefaultSinkAbortAlgorithm(t,r)}function closeAlgorithm(){return TransformStreamDefaultSinkCloseAlgorithm(t)}function pullAlgorithm(){return TransformStreamDefaultSourcePullAlgorithm(t)}function cancelAlgorithm(r){return TransformStreamErrorWritableAndUnblockWrite(t,r),promiseResolvedWith(void 0)}t._writable=CreateWritableStream(startAlgorithm,writeAlgorithm,closeAlgorithm,abortAlgorithm,a,o),t._readable=CreateReadableStream(startAlgorithm,pullAlgorithm,cancelAlgorithm,i,l),t._backpressure=void 0,t._backpressureChangePromise=void 0,t._backpressureChangePromise_resolve=void 0,TransformStreamSetBackpressure(t,!0),t._transformStreamController=void 0}function IsTransformStream(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_transformStreamController")}function TransformStreamError(t,r){ReadableStreamDefaultControllerError(t._readable._readableStreamController,r),TransformStreamErrorWritableAndUnblockWrite(t,r)}function TransformStreamErrorWritableAndUnblockWrite(t,r){TransformStreamDefaultControllerClearAlgorithms(t._transformStreamController),WritableStreamDefaultControllerErrorIfNeeded(t._writable._writableStreamController,r),!0===t._backpressure&&TransformStreamSetBackpressure(t,!1)}function TransformStreamSetBackpressure(t,r){void 0!==t._backpressureChangePromise&&t._backpressureChangePromise_resolve(),t._backpressureChangePromise=newPromise((function(r){t._backpressureChangePromise_resolve=r})),t._backpressure=r}var M=function(){function TransformStreamDefaultController(){throw new TypeError("TransformStreamDefaultController instances cannot be created directly")}return Object.defineProperty(TransformStreamDefaultController.prototype,"desiredSize",{get:function(){if(!1===IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException$1("desiredSize");return ReadableStreamDefaultControllerGetDesiredSize(this._controlledTransformStream._readable._readableStreamController)},enumerable:!0,configurable:!0}),TransformStreamDefaultController.prototype.enqueue=function(t){if(!1===IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException$1("enqueue");TransformStreamDefaultControllerEnqueue(this,t)},TransformStreamDefaultController.prototype.error=function(t){if(!1===IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException$1("error");TransformStreamDefaultControllerError(this,t)},TransformStreamDefaultController.prototype.terminate=function(){if(!1===IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException$1("terminate");TransformStreamDefaultControllerTerminate(this)},TransformStreamDefaultController}();function IsTransformStreamDefaultController(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_controlledTransformStream")}function SetUpTransformStreamDefaultController(t,r,a,o){r._controlledTransformStream=t,t._transformStreamController=r,r._transformAlgorithm=a,r._flushAlgorithm=o}function SetUpTransformStreamDefaultControllerFromTransformer(t,r){var a=Object.create(M.prototype),transformAlgorithm=function(t){try{return TransformStreamDefaultControllerEnqueue(a,t),promiseResolvedWith(void 0)}catch(t){return promiseRejectedWith(t)}},o=r.transform;if(void 0!==o){if("function"!=typeof o)throw new TypeError("transform is not a method");transformAlgorithm=function(t){return PromiseCall(o,r,[t,a])}}var i=CreateAlgorithmFromUnderlyingMethod(r,"flush",0,[a]);SetUpTransformStreamDefaultController(t,a,transformAlgorithm,i)}function TransformStreamDefaultControllerClearAlgorithms(t){t._transformAlgorithm=void 0,t._flushAlgorithm=void 0}function TransformStreamDefaultControllerEnqueue(t,r){var a=t._controlledTransformStream,o=a._readable._readableStreamController;if(!1===ReadableStreamDefaultControllerCanCloseOrEnqueue(o))throw new TypeError("Readable side is not in a state that permits enqueue");try{ReadableStreamDefaultControllerEnqueue(o,r)}catch(t){throw TransformStreamErrorWritableAndUnblockWrite(a,t),a._readable._storedError}ReadableStreamDefaultControllerHasBackpressure(o)!==a._backpressure&&TransformStreamSetBackpressure(a,!0)}function TransformStreamDefaultControllerError(t,r){TransformStreamError(t._controlledTransformStream,r)}function TransformStreamDefaultControllerPerformTransform(t,r){return transformPromiseWith(t._transformAlgorithm(r),void 0,(function(r){throw TransformStreamError(t._controlledTransformStream,r),r}))}function TransformStreamDefaultControllerTerminate(t){var r=t._controlledTransformStream,a=r._readable._readableStreamController;!0===ReadableStreamDefaultControllerCanCloseOrEnqueue(a)&&ReadableStreamDefaultControllerClose(a),TransformStreamErrorWritableAndUnblockWrite(r,new TypeError("TransformStream terminated"))}function TransformStreamDefaultSinkWriteAlgorithm(t,r){var a=t._transformStreamController;return!0===t._backpressure?transformPromiseWith(t._backpressureChangePromise,(function(){var o=t._writable;if("erroring"===o._state)throw o._storedError;return TransformStreamDefaultControllerPerformTransform(a,r)})):TransformStreamDefaultControllerPerformTransform(a,r)}function TransformStreamDefaultSinkAbortAlgorithm(t,r){return TransformStreamError(t,r),promiseResolvedWith(void 0)}function TransformStreamDefaultSinkCloseAlgorithm(t){var r=t._readable,a=t._transformStreamController,o=a._flushAlgorithm();return TransformStreamDefaultControllerClearAlgorithms(a),transformPromiseWith(o,(function(){if("errored"===r._state)throw r._storedError;var t=r._readableStreamController;!0===ReadableStreamDefaultControllerCanCloseOrEnqueue(t)&&ReadableStreamDefaultControllerClose(t)}),(function(a){throw TransformStreamError(t,a),r._storedError}))}function TransformStreamDefaultSourcePullAlgorithm(t){return TransformStreamSetBackpressure(t,!1),t._backpressureChangePromise}function defaultControllerBrandCheckException$1(t){return new TypeError("TransformStreamDefaultController.prototype."+t+" can only be used on a TransformStreamDefaultController")}function streamBrandCheckException$2(t){return new TypeError("TransformStream.prototype."+t+" can only be used on a TransformStream")}t.ByteLengthQueuingStrategy=D,t.CountQueuingStrategy=L,t.ReadableStream=I,t.TransformStream=W,t.WritableStream=A,Object.defineProperty(t,"__esModule",{value:!0})}(r)},function(t,r,a){a(145),a(114),a(77),a(116);var o=a(43);t.exports=o.Map},function(t,r,a){"use strict";var o=a(146),i=a(150);t.exports=o("Map",(function(t){return function Map(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},function(t,r,a){"use strict";var o=a(10),i=a(11),l=a(52),u=a(29),c=a(147),d=a(124),h=a(123),p=a(22),m=a(14),v=a(97),g=a(85),y=a(149);t.exports=function(t,r,a){var b=-1!==t.indexOf("Map"),_=-1!==t.indexOf("Weak"),S=b?"set":"add",A=i[t],C=A&&A.prototype,R=A,k={},fixMethod=function(t){var r=C[t];u(C,t,"add"==t?function add(t){return r.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(_&&!p(t))&&r.call(this,0===t?0:t)}:"get"==t?function get(t){return _&&!p(t)?void 0:r.call(this,0===t?0:t)}:"has"==t?function has(t){return!(_&&!p(t))&&r.call(this,0===t?0:t)}:function set(t,a){return r.call(this,0===t?0:t,a),this})};if(l(t,"function"!=typeof A||!(_||C.forEach&&!m((function(){(new A).entries().next()})))))R=a.getConstructor(r,t,b,S),c.REQUIRED=!0;else if(l(t,!0)){var P=new R,w=P[S](_?{}:-0,1)!=P,x=m((function(){P.has(1)})),T=v((function(t){new A(t)})),E=!_&&m((function(){for(var t=new A,r=5;r--;)t[S](r,r);return!t.has(-0)}));T||((R=r((function(r,a){h(r,R,t);var o=y(new A,r,R);return null!=a&&d(a,o[S],o,b),o}))).prototype=C,C.constructor=R),(x||E)&&(fixMethod("delete"),fixMethod("has"),b&&fixMethod("get")),(E||w)&&fixMethod(S),_&&C.clear&&delete C.clear}return k[t]=R,o({global:!0,forced:R!=A},k),g(R,t),_||a.setStrong(R,t,b),R}},function(t,r,a){var o=a(39),i=a(22),l=a(23),u=a(27).f,c=a(38),d=a(148),h=c("meta"),p=0,m=Object.isExtensible||function(){return!0},setMetadata=function(t){u(t,h,{value:{objectID:"O"+ ++p,weakData:{}}})},v=t.exports={REQUIRED:!1,fastKey:function(t,r){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!l(t,h)){if(!m(t))return"F";if(!r)return"E";setMetadata(t)}return t[h].objectID},getWeakData:function(t,r){if(!l(t,h)){if(!m(t))return!0;if(!r)return!1;setMetadata(t)}return t[h].weakData},onFreeze:function(t){return d&&v.REQUIRED&&m(t)&&!l(t,h)&&setMetadata(t),t}};o[h]=!0},function(t,r,a){var o=a(14);t.exports=!o((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(t,r,a){var o=a(22),i=a(87);t.exports=function(t,r,a){var l,u;return i&&"function"==typeof(l=r.constructor)&&l!==a&&o(u=l.prototype)&&u!==a.prototype&&i(t,u),t}},function(t,r,a){"use strict";var o=a(27).f,i=a(71),l=a(121),u=a(62),c=a(123),d=a(124),h=a(79),p=a(122),m=a(13),v=a(147).fastKey,g=a(33),y=g.set,b=g.getterFor;t.exports={getConstructor:function(t,r,a,h){var p=t((function(t,o){c(t,p,r),y(t,{type:r,index:i(null),first:void 0,last:void 0,size:0}),m||(t.size=0),null!=o&&d(o,t[h],t,a)})),g=b(r),define=function(t,r,a){var o,i,l=g(t),u=getEntry(t,r);return u?u.value=a:(l.last=u={index:i=v(r,!0),key:r,value:a,previous:o=l.last,next:void 0,removed:!1},l.first||(l.first=u),o&&(o.next=u),m?l.size++:t.size++,"F"!==i&&(l.index[i]=u)),t},getEntry=function(t,r){var a,o=g(t),i=v(r);if("F"!==i)return o.index[i];for(a=o.first;a;a=a.next)if(a.key==r)return a};return l(p.prototype,{clear:function clear(){for(var t=g(this),r=t.index,a=t.first;a;)a.removed=!0,a.previous&&(a.previous=a.previous.next=void 0),delete r[a.index],a=a.next;t.first=t.last=void 0,m?t.size=0:this.size=0},delete:function(t){var r=this,a=g(r),o=getEntry(r,t);if(o){var i=o.next,l=o.previous;delete a.index[o.index],o.removed=!0,l&&(l.next=i),i&&(i.previous=l),a.first==o&&(a.first=i),a.last==o&&(a.last=l),m?a.size--:r.size--}return!!o},forEach:function forEach(t){for(var r,a=g(this),o=u(t,arguments.length>1?arguments[1]:void 0,3);r=r?r.next:a.first;)for(o(r.value,r.key,this);r&&r.removed;)r=r.previous},has:function has(t){return!!getEntry(this,t)}}),l(p.prototype,a?{get:function get(t){var r=getEntry(this,t);return r&&r.value},set:function set(t,r){return define(this,0===t?0:t,r)}}:{add:function add(t){return define(this,t=0===t?0:t,t)}}),m&&o(p.prototype,"size",{get:function(){return g(this).size}}),p},setStrong:function(t,r,a){var o=r+" Iterator",i=b(r),l=b(o);h(t,r,(function(t,r){y(this,{type:o,target:t,state:i(t),kind:r,last:void 0})}),(function(){for(var t=l(this),r=t.kind,a=t.last;a&&a.removed;)a=a.previous;return t.target&&(t.last=a=a?a.next:t.state.first)?"keys"==r?{value:a.key,done:!1}:"values"==r?{value:a.value,done:!1}:{value:[a.key,a.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),a?"entries":"values",!a,!0),p(r)}}},function(t,r,a){a(152),a(114),a(77),a(116);var o=a(43);t.exports=o.Set},function(t,r,a){"use strict";var o=a(146),i=a(150);t.exports=o("Set",(function(t){return function Set(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},function(t,r,a){a(114),a(154),a(116);var o=a(43);t.exports=o.WeakMap},function(t,r,a){"use strict";var o,i=a(11),l=a(121),u=a(147),c=a(146),d=a(155),h=a(22),p=a(33).enforce,m=a(34),v=!i.ActiveXObject&&"ActiveXObject"in i,g=Object.isExtensible,wrapper=function(t){return function WeakMap(){return t(this,arguments.length?arguments[0]:void 0)}},y=t.exports=c("WeakMap",wrapper,d);if(m&&v){o=d.getConstructor(wrapper,"WeakMap",!0),u.REQUIRED=!0;var b=y.prototype,_=b.delete,S=b.has,A=b.get,C=b.set;l(b,{delete:function(t){if(h(t)&&!g(t)){var r=p(this);return r.frozen||(r.frozen=new o),_.call(this,t)||r.frozen.delete(t)}return _.call(this,t)},has:function has(t){if(h(t)&&!g(t)){var r=p(this);return r.frozen||(r.frozen=new o),S.call(this,t)||r.frozen.has(t)}return S.call(this,t)},get:function get(t){if(h(t)&&!g(t)){var r=p(this);return r.frozen||(r.frozen=new o),S.call(this,t)?A.call(this,t):r.frozen.get(t)}return A.call(this,t)},set:function set(t,r){if(h(t)&&!g(t)){var a=p(this);a.frozen||(a.frozen=new o),S.call(this,t)?C.call(this,t,r):a.frozen.set(t,r)}else C.call(this,t,r);return this}})}},function(t,r,a){"use strict";var o=a(121),i=a(147).getWeakData,l=a(28),u=a(22),c=a(123),d=a(124),h=a(156),p=a(23),m=a(33),v=m.set,g=m.getterFor,y=h.find,b=h.findIndex,_=0,uncaughtFrozenStore=function(t){return t.frozen||(t.frozen=new UncaughtFrozenStore)},UncaughtFrozenStore=function(){this.entries=[]},findUncaughtFrozen=function(t,r){return y(t.entries,(function(t){return t[0]===r}))};UncaughtFrozenStore.prototype={get:function(t){var r=findUncaughtFrozen(this,t);if(r)return r[1]},has:function(t){return!!findUncaughtFrozen(this,t)},set:function(t,r){var a=findUncaughtFrozen(this,t);a?a[1]=r:this.entries.push([t,r])},delete:function(t){var r=b(this.entries,(function(r){return r[0]===t}));return~r&&this.entries.splice(r,1),!!~r}},t.exports={getConstructor:function(t,r,a,h){var m=t((function(t,o){c(t,m,r),v(t,{type:r,id:_++,frozen:void 0}),null!=o&&d(o,t[h],t,a)})),y=g(r),define=function(t,r,a){var o=y(t),u=i(l(r),!0);return!0===u?uncaughtFrozenStore(o).set(r,a):u[o.id]=a,t};return o(m.prototype,{delete:function(t){var r=y(this);if(!u(t))return!1;var a=i(t);return!0===a?uncaughtFrozenStore(r).delete(t):a&&p(a,r.id)&&delete a[r.id]},has:function has(t){var r=y(this);if(!u(t))return!1;var a=i(t);return!0===a?uncaughtFrozenStore(r).has(t):a&&p(a,r.id)}}),o(m.prototype,a?{get:function get(t){var r=y(this);if(u(t)){var a=i(t);return!0===a?uncaughtFrozenStore(r).get(t):a?a[r.id]:void 0}},set:function set(t,r){return define(this,t,r)}}:{add:function add(t){return define(this,t,!0)}}),m}}},function(t,r,a){var o=a(62),i=a(18),l=a(83),u=a(47),c=a(157),d=[].push,createMethod=function(t){var r=1==t,a=2==t,h=3==t,p=4==t,m=6==t,v=5==t||m;return function(g,y,b,_){for(var S,A,C=l(g),R=i(C),k=o(y,b,3),P=u(R.length),w=0,x=_||c,T=r?x(g,P):a?x(g,0):void 0;P>w;w++)if((v||w in R)&&(A=k(S=R[w],w,C),t))if(r)T[w]=A;else if(A)switch(t){case 3:return!0;case 5:return S;case 6:return w;case 2:d.call(T,S)}else if(p)return!1;return m?-1:h||p?p:T}};t.exports={forEach:createMethod(0),map:createMethod(1),filter:createMethod(2),some:createMethod(3),every:createMethod(4),find:createMethod(5),findIndex:createMethod(6)}},function(t,r,a){var o=a(22),i=a(158),l=a(57)("species");t.exports=function(t,r){var a;return i(t)&&("function"!=typeof(a=t.constructor)||a!==Array&&!i(a.prototype)?o(a)&&null===(a=a[l])&&(a=void 0):a=void 0),new(void 0===a?Array:a)(0===r?0:r)}},function(t,r,a){var o=a(19);t.exports=Array.isArray||function isArray(t){return"Array"==o(t)}},function(t,r,a){a(114),a(160),a(116);var o=a(43);t.exports=o.WeakSet},function(t,r,a){"use strict";a(146)("WeakSet",(function(t){return function WeakSet(){return t(this,arguments.length?arguments[0]:void 0)}}),a(155))},function(t,r,a){a(162);var o=a(61);t.exports=o("String","codePointAt")},function(t,r,a){"use strict";var o=a(10),i=a(78).codeAt;o({target:"String",proto:!0},{codePointAt:function codePointAt(t){return i(this,t)}})},function(t,r,a){a(164);var o=a(43);t.exports=o.String.fromCodePoint},function(t,r,a){var o=a(10),i=a(49),l=String.fromCharCode,u=String.fromCodePoint;o({target:"String",stat:!0,forced:!!u&&1!=u.length},{fromCodePoint:function fromCodePoint(t){for(var r,a=[],o=arguments.length,u=0;o>u;){if(r=+arguments[u++],i(r,1114111)!==r)throw RangeError(r+" is not a valid code point");a.push(r<65536?l(r):l(55296+((r-=65536)>>10),r%1024+56320))}return a.join("")}})},function(t,r,a){a(166),a(114),a(168),a(172),a(173),a(174),a(175),a(176),a(177),a(178),a(179),a(180),a(181),a(182),a(183),a(184),a(185),a(186),a(187);var o=a(43);t.exports=o.Symbol},function(t,r,a){"use strict";var o=a(10),i=a(14),l=a(158),u=a(22),c=a(83),d=a(47),h=a(93),p=a(157),m=a(167),v=a(57),g=a(133),y=v("isConcatSpreadable"),b=9007199254740991,_="Maximum allowed index exceeded",S=g>=51||!i((function(){var t=[];return t[y]=!1,t.concat()[0]!==t})),A=m("concat"),isConcatSpreadable=function(t){if(!u(t))return!1;var r=t[y];return void 0!==r?!!r:l(t)};o({target:"Array",proto:!0,forced:!S||!A},{concat:function concat(t){var r,a,o,i,l,u=c(this),m=p(u,0),v=0;for(r=-1,o=arguments.length;r<o;r++)if(isConcatSpreadable(l=-1===r?u:arguments[r])){if(v+(i=d(l.length))>b)throw TypeError(_);for(a=0;a<i;a++,v++)a in l&&h(m,v,l[a])}else{if(v>=b)throw TypeError(_);h(m,v++,l)}return m.length=v,m}})},function(t,r,a){var o=a(14),i=a(57),l=a(133),u=i("species");t.exports=function(t){return l>=51||!o((function(){var r=[];return(r.constructor={})[u]=function(){return{foo:1}},1!==r[t](Boolean).foo}))}},function(t,r,a){"use strict";var o=a(10),i=a(11),l=a(42),u=a(37),c=a(13),d=a(58),h=a(59),p=a(14),m=a(23),v=a(158),g=a(22),y=a(28),b=a(83),_=a(17),S=a(21),A=a(16),C=a(71),R=a(73),k=a(44),P=a(169),w=a(51),x=a(12),T=a(27),E=a(15),O=a(26),I=a(29),D=a(36),L=a(35),W=a(39),M=a(38),j=a(57),N=a(170),B=a(171),q=a(85),G=a(33),U=a(156).forEach,z=L("hidden"),H="Symbol",Y=j("toPrimitive"),X=G.set,V=G.getterFor(H),Q=Object.prototype,K=i.Symbol,J=l("JSON","stringify"),$=x.f,Z=T.f,ee=P.f,te=E.f,re=D("symbols"),ne=D("op-symbols"),ae=D("string-to-symbol-registry"),oe=D("symbol-to-string-registry"),ie=D("wks"),se=i.QObject,le=!se||!se.prototype||!se.prototype.findChild,ue=c&&p((function(){return 7!=C(Z({},"a",{get:function(){return Z(this,"a",{value:7}).a}})).a}))?function(t,r,a){var o=$(Q,r);o&&delete Q[r],Z(t,r,a),o&&t!==Q&&Z(Q,r,o)}:Z,wrap=function(t,r){var a=re[t]=C(K.prototype);return X(a,{type:H,tag:t,description:r}),c||(a.description=r),a},ce=h?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof K},de=function defineProperty(t,r,a){t===Q&&de(ne,r,a),y(t);var o=S(r,!0);return y(a),m(re,o)?(a.enumerable?(m(t,z)&&t[z][o]&&(t[z][o]=!1),a=C(a,{enumerable:A(0,!1)})):(m(t,z)||Z(t,z,A(1,{})),t[z][o]=!0),ue(t,o,a)):Z(t,o,a)},fe=function defineProperties(t,r){y(t);var a=_(r),o=R(a).concat(ve(a));return U(o,(function(r){c&&!he.call(a,r)||de(t,r,a[r])})),t},he=function propertyIsEnumerable(t){var r=S(t,!0),a=te.call(this,r);return!(this===Q&&m(re,r)&&!m(ne,r))&&(!(a||!m(this,r)||!m(re,r)||m(this,z)&&this[z][r])||a)},pe=function getOwnPropertyDescriptor(t,r){var a=_(t),o=S(r,!0);if(a!==Q||!m(re,o)||m(ne,o)){var i=$(a,o);return!i||!m(re,o)||m(a,z)&&a[z][o]||(i.enumerable=!0),i}},me=function getOwnPropertyNames(t){var r=ee(_(t)),a=[];return U(r,(function(t){m(re,t)||m(W,t)||a.push(t)})),a},ve=function getOwnPropertySymbols(t){var r=t===Q,a=ee(r?ne:_(t)),o=[];return U(a,(function(t){!m(re,t)||r&&!m(Q,t)||o.push(re[t])})),o};(d||(I((K=function Symbol(){if(this instanceof K)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,r=M(t),setter=function(t){this===Q&&setter.call(ne,t),m(this,z)&&m(this[z],r)&&(this[z][r]=!1),ue(this,r,A(1,t))};return c&&le&&ue(Q,r,{configurable:!0,set:setter}),wrap(r,t)}).prototype,"toString",(function toString(){return V(this).tag})),I(K,"withoutSetter",(function(t){return wrap(M(t),t)})),E.f=he,T.f=de,x.f=pe,k.f=P.f=me,w.f=ve,N.f=function(t){return wrap(j(t),t)},c&&(Z(K.prototype,"description",{configurable:!0,get:function description(){return V(this).description}}),u||I(Q,"propertyIsEnumerable",he,{unsafe:!0}))),o({global:!0,wrap:!0,forced:!d,sham:!d},{Symbol:K}),U(R(ie),(function(t){B(t)})),o({target:H,stat:!0,forced:!d},{for:function(t){var r=String(t);if(m(ae,r))return ae[r];var a=K(r);return ae[r]=a,oe[a]=r,a},keyFor:function keyFor(t){if(!ce(t))throw TypeError(t+" is not a symbol");if(m(oe,t))return oe[t]},useSetter:function(){le=!0},useSimple:function(){le=!1}}),o({target:"Object",stat:!0,forced:!d,sham:!c},{create:function create(t,r){return void 0===r?C(t):fe(C(t),r)},defineProperty:de,defineProperties:fe,getOwnPropertyDescriptor:pe}),o({target:"Object",stat:!0,forced:!d},{getOwnPropertyNames:me,getOwnPropertySymbols:ve}),o({target:"Object",stat:!0,forced:p((function(){w.f(1)}))},{getOwnPropertySymbols:function getOwnPropertySymbols(t){return w.f(b(t))}}),J)&&o({target:"JSON",stat:!0,forced:!d||p((function(){var t=K();return"[null]"!=J([t])||"{}"!=J({a:t})||"{}"!=J(Object(t))}))},{stringify:function stringify(t,r,a){for(var o,i=[t],l=1;arguments.length>l;)i.push(arguments[l++]);if(o=r,(g(r)||void 0!==t)&&!ce(t))return v(r)||(r=function(t,r){if("function"==typeof o&&(r=o.call(this,t,r)),!ce(r))return r}),i[1]=r,J.apply(null,i)}});K.prototype[Y]||O(K.prototype,Y,K.prototype.valueOf),q(K,H),W[z]=!0},function(t,r,a){var o=a(17),i=a(44).f,l={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function getOwnPropertyNames(t){return u&&"[object Window]"==l.call(t)?function(t){try{return i(t)}catch(t){return u.slice()}}(t):i(o(t))}},function(t,r,a){var o=a(57);r.f=o},function(t,r,a){var o=a(43),i=a(23),l=a(170),u=a(27).f;t.exports=function(t){var r=o.Symbol||(o.Symbol={});i(r,t)||u(r,t,{value:l.f(t)})}},function(t,r,a){a(171)("asyncIterator")},function(t,r,a){"use strict";var o=a(10),i=a(13),l=a(11),u=a(23),c=a(22),d=a(27).f,h=a(40),p=l.Symbol;if(i&&"function"==typeof p&&(!("description"in p.prototype)||void 0!==p().description)){var m={},v=function Symbol(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),r=this instanceof v?new p(t):void 0===t?p():p(t);return""===t&&(m[r]=!0),r};h(v,p);var g=v.prototype=p.prototype;g.constructor=v;var y=g.toString,b="Symbol(test)"==String(p("test")),_=/^Symbol\((.*)\)[^)]+$/;d(g,"description",{configurable:!0,get:function description(){var t=c(this)?this.valueOf():this,r=y.call(t);if(u(m,t))return"";var a=b?r.slice(7,-1):r.replace(_,"$1");return""===a?void 0:a}}),o({global:!0,forced:!0},{Symbol:v})}},function(t,r,a){a(171)("hasInstance")},function(t,r,a){a(171)("isConcatSpreadable")},function(t,r,a){a(171)("iterator")},function(t,r,a){a(171)("match")},function(t,r,a){a(171)("matchAll")},function(t,r,a){a(171)("replace")},function(t,r,a){a(171)("search")},function(t,r,a){a(171)("species")},function(t,r,a){a(171)("split")},function(t,r,a){a(171)("toPrimitive")},function(t,r,a){a(171)("toStringTag")},function(t,r,a){a(171)("unscopables")},function(t,r,a){a(85)(Math,"Math",!0)},function(t,r,a){var o=a(11);a(85)(o.JSON,"JSON",!0)},function(t,r,a){a(189);var o=a(61);t.exports=o("String","padStart")},function(t,r,a){"use strict";var o=a(10),i=a(190).start;o({target:"String",proto:!0,forced:a(192)},{padStart:function padStart(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,r,a){var o=a(47),i=a(191),l=a(20),u=Math.ceil,createMethod=function(t){return function(r,a,c){var d,h,p=String(l(r)),m=p.length,v=void 0===c?" ":String(c),g=o(a);return g<=m||""==v?p:(d=g-m,(h=i.call(v,u(d/v.length))).length>d&&(h=h.slice(0,d)),t?p+h:h+p)}};t.exports={start:createMethod(!1),end:createMethod(!0)}},function(t,r,a){"use strict";var o=a(48),i=a(20);t.exports="".repeat||function repeat(t){var r=String(i(this)),a="",l=o(t);if(l<0||l==1/0)throw RangeError("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(r+=r))1&l&&(a+=r);return a}},function(t,r,a){var o=a(127);t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o)},function(t,r,a){a(194);var o=a(61);t.exports=o("String","padEnd")},function(t,r,a){"use strict";var o=a(10),i=a(190).end;o({target:"String",proto:!0,forced:a(192)},{padEnd:function padEnd(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,r,a){a(196);var o=a(43);t.exports=o.Object.values},function(t,r,a){var o=a(10),i=a(197).values;o({target:"Object",stat:!0},{values:function values(t){return i(t)}})},function(t,r,a){var o=a(13),i=a(73),l=a(17),u=a(15).f,createMethod=function(t){return function(r){for(var a,c=l(r),d=i(c),h=d.length,p=0,m=[];h>p;)a=d[p++],o&&!u.call(c,a)||m.push(t?[a,c[a]]:c[a]);return m}};t.exports={entries:createMethod(!0),values:createMethod(!1)}},function(module,exports,__w_pdfjs_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.build=exports.version=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFWorker=exports.PDFDataRangeTransport=exports.LoopbackPort=void 0;var _regenerator=_interopRequireDefault(__w_pdfjs_require__(2)),_util=__w_pdfjs_require__(5),_display_utils=__w_pdfjs_require__(1),_font_loader=__w_pdfjs_require__(199),_api_compatibility=__w_pdfjs_require__(200),_canvas=__w_pdfjs_require__(201),_worker_options=__w_pdfjs_require__(203),_is_node=__w_pdfjs_require__(7),_message_handler=__w_pdfjs_require__(204),_metadata=__w_pdfjs_require__(205),_transport_stream=__w_pdfjs_require__(207),_webgl=__w_pdfjs_require__(208);function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function asyncGeneratorStep(t,r,a,o,i,l,u){try{var c=t[l](u),d=c.value}catch(t){return void a(t)}c.done?r(d):Promise.resolve(d).then(o,i)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(o,i){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,o,i,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,o,i,_next,_throw,"throw",t)}_next(void 0)}))}}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _createForOfIteratorHelper(t,r){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var o=0,i=function F(){};return{s:i,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,c=!1;return{s:function s(){a=t[Symbol.iterator]()},n:function n(){var t=a.next();return u=t.done,t},e:function e(t){c=!0,l=t},f:function f(){try{u||null==a.return||a.return()}finally{if(c)throw l}}}}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var o=r[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}function _slicedToArray(t,r){return _arrayWithHoles(t)||_iterableToArrayLimit(t,r)||_unsupportedIterableToArray(t,r)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,o=new Array(r);a<r;a++)o[a]=t[a];return o}function _iterableToArrayLimit(t,r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var a=[],o=!0,i=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(o=(u=c.next()).done)&&(a.push(u.value),!r||a.length!==r);o=!0);}catch(t){i=!0,l=t}finally{try{o||null==c.return||c.return()}finally{if(i)throw l}}return a}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,createPDFNetworkStream;function setPDFNetworkStreamFactory(t){createPDFNetworkStream=t}function getDocument(t){var r,a=new PDFDocumentLoadingTask;if("string"==typeof t)r={url:t};else if((0,_util.isArrayBuffer)(t))r={data:t};else if(t instanceof PDFDataRangeTransport)r={range:t};else{if("object"!==_typeof(t))throw new Error("Invalid parameter in getDocument, need either Uint8Array, string or a parameter object");if(!t.url&&!t.data&&!t.range)throw new Error("Invalid parameter object: need either .data, .range or .url");r=t}var o=Object.create(null),i=null,l=null;for(var u in r)if("url"!==u||"undefined"==typeof window)if("range"!==u)if("worker"!==u)if("data"!==u||r[u]instanceof Uint8Array)o[u]=r[u];else{var c=r[u];if("string"==typeof c)o[u]=(0,_util.stringToBytes)(c);else if("object"!==_typeof(c)||null===c||isNaN(c.length)){if(!(0,_util.isArrayBuffer)(c))throw new Error("Invalid PDF binary data: either typed array, string or array-like object is expected in the data property.");o[u]=new Uint8Array(c)}else o[u]=new Uint8Array(c)}else l=r[u];else i=r[u];else o[u]=new URL(r[u],window.location).href;if(o.rangeChunkSize=o.rangeChunkSize||DEFAULT_RANGE_CHUNK_SIZE,o.CMapReaderFactory=o.CMapReaderFactory||_display_utils.DOMCMapReaderFactory,o.ignoreErrors=!0!==o.stopAtErrors,o.fontExtraProperties=!0===o.fontExtraProperties,o.pdfBug=!0===o.pdfBug,Number.isInteger(o.maxImageSize)||(o.maxImageSize=-1),"boolean"!=typeof o.isEvalSupported&&(o.isEvalSupported=!0),"boolean"!=typeof o.disableFontFace&&(o.disableFontFace=_api_compatibility.apiCompatibilityParams.disableFontFace||!1),"boolean"!=typeof o.disableRange&&(o.disableRange=!1),"boolean"!=typeof o.disableStream&&(o.disableStream=!1),"boolean"!=typeof o.disableAutoFetch&&(o.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(o.verbosity),!l){var d={verbosity:o.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};l=d.port?PDFWorker.fromPort(d):new PDFWorker(d),a._worker=l}var h=a.docId;return l.promise.then((function(){if(a.destroyed)throw new Error("Loading aborted");var t=_fetchDocument(l,o,i,h),r=new Promise((function(t){var r;i?r=new _transport_stream.PDFDataTransportStream({length:o.length,initialData:o.initialData,progressiveDone:o.progressiveDone,disableRange:o.disableRange,disableStream:o.disableStream},i):o.data||(r=createPDFNetworkStream({url:o.url,length:o.length,httpHeaders:o.httpHeaders,withCredentials:o.withCredentials,rangeChunkSize:o.rangeChunkSize,disableRange:o.disableRange,disableStream:o.disableStream})),t(r)}));return Promise.all([t,r]).then((function(t){var r=_slicedToArray(t,2),i=r[0],u=r[1];if(a.destroyed)throw new Error("Loading aborted");var c=new _message_handler.MessageHandler(h,i,l.port);c.postMessageTransfers=l.postMessageTransfers;var d=new WorkerTransport(c,a,u,o);a._transport=d,c.send("Ready",null)}))})).catch(a._capability.reject),a}function _fetchDocument(t,r,a,o){return t.destroyed?Promise.reject(new Error("Worker was destroyed")):(a&&(r.length=a.length,r.initialData=a.initialData,r.progressiveDone=a.progressiveDone),t.messageHandler.sendWithPromise("GetDocRequest",{docId:o,apiVersion:"2.5.207",source:{data:r.data,url:r.url,password:r.password,disableAutoFetch:r.disableAutoFetch,rangeChunkSize:r.rangeChunkSize,length:r.length},maxImageSize:r.maxImageSize,disableFontFace:r.disableFontFace,postMessageTransfers:t.postMessageTransfers,docBaseUrl:r.docBaseUrl,ignoreErrors:r.ignoreErrors,isEvalSupported:r.isEvalSupported,fontExtraProperties:r.fontExtraProperties}).then((function(r){if(t.destroyed)throw new Error("Worker was destroyed");return r})))}var PDFDocumentLoadingTask=function PDFDocumentLoadingTaskClosure(){var t=0;return function(){function PDFDocumentLoadingTask(){_classCallCheck(this,PDFDocumentLoadingTask),this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+t++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}return _createClass(PDFDocumentLoadingTask,[{key:"destroy",value:function destroy(){var t=this;return this.destroyed=!0,(this._transport?this._transport.destroy():Promise.resolve()).then((function(){t._transport=null,t._worker&&(t._worker.destroy(),t._worker=null)}))}},{key:"promise",get:function get(){return this._capability.promise}}]),PDFDocumentLoadingTask}()}(),PDFDataRangeTransport=function(){function PDFDataRangeTransport(t,r){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_classCallCheck(this,PDFDataRangeTransport),this.length=t,this.initialData=r,this.progressiveDone=a,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}return _createClass(PDFDataRangeTransport,[{key:"addRangeListener",value:function addRangeListener(t){this._rangeListeners.push(t)}},{key:"addProgressListener",value:function addProgressListener(t){this._progressListeners.push(t)}},{key:"addProgressiveReadListener",value:function addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}},{key:"addProgressiveDoneListener",value:function addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}},{key:"onDataRange",value:function onDataRange(t,r){var a,o=_createForOfIteratorHelper(this._rangeListeners);try{for(o.s();!(a=o.n()).done;){(0,a.value)(t,r)}}catch(t){o.e(t)}finally{o.f()}}},{key:"onDataProgress",value:function onDataProgress(t,r){var a=this;this._readyCapability.promise.then((function(){var o,i=_createForOfIteratorHelper(a._progressListeners);try{for(i.s();!(o=i.n()).done;){(0,o.value)(t,r)}}catch(t){i.e(t)}finally{i.f()}}))}},{key:"onDataProgressiveRead",value:function onDataProgressiveRead(t){var r=this;this._readyCapability.promise.then((function(){var a,o=_createForOfIteratorHelper(r._progressiveReadListeners);try{for(o.s();!(a=o.n()).done;){(0,a.value)(t)}}catch(t){o.e(t)}finally{o.f()}}))}},{key:"onDataProgressiveDone",value:function onDataProgressiveDone(){var t=this;this._readyCapability.promise.then((function(){var r,a=_createForOfIteratorHelper(t._progressiveDoneListeners);try{for(a.s();!(r=a.n()).done;){(0,r.value)()}}catch(t){a.e(t)}finally{a.f()}}))}},{key:"transportReady",value:function transportReady(){this._readyCapability.resolve()}},{key:"requestDataRange",value:function requestDataRange(t,r){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}},{key:"abort",value:function abort(){}}]),PDFDataRangeTransport}();exports.PDFDataRangeTransport=PDFDataRangeTransport;var PDFDocumentProxy=function(){function PDFDocumentProxy(t,r){_classCallCheck(this,PDFDocumentProxy),this._pdfInfo=t,this._transport=r}return _createClass(PDFDocumentProxy,[{key:"getPage",value:function getPage(t){return this._transport.getPage(t)}},{key:"getPageIndex",value:function getPageIndex(t){return this._transport.getPageIndex(t)}},{key:"getDestinations",value:function getDestinations(){return this._transport.getDestinations()}},{key:"getDestination",value:function getDestination(t){return this._transport.getDestination(t)}},{key:"getPageLabels",value:function getPageLabels(){return this._transport.getPageLabels()}},{key:"getPageLayout",value:function getPageLayout(){return this._transport.getPageLayout()}},{key:"getPageMode",value:function getPageMode(){return this._transport.getPageMode()}},{key:"getViewerPreferences",value:function getViewerPreferences(){return this._transport.getViewerPreferences()}},{key:"getOpenAction",value:function getOpenAction(){return this._transport.getOpenAction()}},{key:"getOpenActionDestination",value:function getOpenActionDestination(){return(0,_display_utils.deprecated)("getOpenActionDestination, use getOpenAction instead."),this.getOpenAction().then((function(t){return t&&t.dest?t.dest:null}))}},{key:"getAttachments",value:function getAttachments(){return this._transport.getAttachments()}},{key:"getJavaScript",value:function getJavaScript(){return this._transport.getJavaScript()}},{key:"getOutline",value:function getOutline(){return this._transport.getOutline()}},{key:"getPermissions",value:function getPermissions(){return this._transport.getPermissions()}},{key:"getMetadata",value:function getMetadata(){return this._transport.getMetadata()}},{key:"getData",value:function getData(){return this._transport.getData()}},{key:"getDownloadInfo",value:function getDownloadInfo(){return this._transport.downloadInfoCapability.promise}},{key:"getStats",value:function getStats(){return this._transport.getStats()}},{key:"cleanup",value:function cleanup(){return this._transport.startCleanup()}},{key:"destroy",value:function destroy(){return this.loadingTask.destroy()}},{key:"numPages",get:function get(){return this._pdfInfo.numPages}},{key:"fingerprint",get:function get(){return this._pdfInfo.fingerprint}},{key:"loadingParams",get:function get(){return this._transport.loadingParams}},{key:"loadingTask",get:function get(){return this._transport.loadingTask}}]),PDFDocumentProxy}();exports.PDFDocumentProxy=PDFDocumentProxy;var PDFPageProxy=function(){function PDFPageProxy(t,r,a){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];_classCallCheck(this,PDFPageProxy),this._pageIndex=t,this._pageInfo=r,this._transport=a,this._stats=o?new _display_utils.StatTimer:null,this._pdfBug=o,this.commonObjs=a.commonObjs,this.objs=new PDFObjects,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this.intentStates=Object.create(null),this.destroyed=!1}return _createClass(PDFPageProxy,[{key:"getViewport",value:function getViewport(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.scale,a=t.rotation,o=void 0===a?this.rotate:a,i=t.offsetX,l=void 0===i?0:i,u=t.offsetY,c=void 0===u?0:u,d=t.dontFlip,h=void 0!==d&&d;return new _display_utils.PageViewport({viewBox:this.view,scale:r,rotation:o,offsetX:l,offsetY:c,dontFlip:h})}},{key:"getAnnotations",value:function getAnnotations(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.intent,a=void 0===r?null:r;return this.annotationsPromise&&this.annotationsIntent===a||(this.annotationsPromise=this._transport.getAnnotations(this._pageIndex,a),this.annotationsIntent=a),this.annotationsPromise}},{key:"render",value:function render(t){var r=this,a=t.canvasContext,o=t.viewport,i=t.intent,l=void 0===i?"display":i,u=t.enableWebGL,c=void 0!==u&&u,d=t.renderInteractiveForms,h=void 0!==d&&d,p=t.transform,m=void 0===p?null:p,v=t.imageLayer,g=void 0===v?null:v,y=t.canvasFactory,b=void 0===y?null:y,_=t.background,S=void 0===_?null:_;this._stats&&this._stats.time("Overall");var A="print"===l?"print":"display";this.pendingCleanup=!1,this.intentStates[A]||(this.intentStates[A]=Object.create(null));var C=this.intentStates[A];C.streamReaderCancelTimeout&&(clearTimeout(C.streamReaderCancelTimeout),C.streamReaderCancelTimeout=null);var R=b||new _display_utils.DOMCanvasFactory,k=new _webgl.WebGLContext({enable:c});C.displayReadyCapability||(C.displayReadyCapability=(0,_util.createPromiseCapability)(),C.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList({pageIndex:this._pageIndex,intent:A,renderInteractiveForms:!0===h}));var P=function complete(t){var a=C.renderTasks.indexOf(w);a>=0&&C.renderTasks.splice(a,1),(r.cleanupAfterRender||"print"===A)&&(r.pendingCleanup=!0),r._tryCleanup(),t?(w.capability.reject(t),r._abortOperatorList({intentState:C,reason:t})):w.capability.resolve(),r._stats&&(r._stats.timeEnd("Rendering"),r._stats.timeEnd("Overall"))},w=new InternalRenderTask({callback:P,params:{canvasContext:a,viewport:o,transform:m,imageLayer:g,background:S},objs:this.objs,commonObjs:this.commonObjs,operatorList:C.operatorList,pageIndex:this._pageIndex,canvasFactory:R,webGLContext:k,useRequestAnimationFrame:"print"!==A,pdfBug:this._pdfBug});C.renderTasks||(C.renderTasks=[]),C.renderTasks.push(w);var x=w.task;return C.displayReadyCapability.promise.then((function(t){r.pendingCleanup?P():(r._stats&&r._stats.time("Rendering"),w.initializeGraphics(t),w.operatorListChanged())})).catch(P),x}},{key:"getOperatorList",value:function getOperatorList(){var t="oplist";this.intentStates.oplist||(this.intentStates.oplist=Object.create(null));var r,a=this.intentStates.oplist;return a.opListReadCapability||((r={}).operatorListChanged=function operatorListChanged(){if(a.operatorList.lastChunk){a.opListReadCapability.resolve(a.operatorList);var t=a.renderTasks.indexOf(r);t>=0&&a.renderTasks.splice(t,1)}},a.opListReadCapability=(0,_util.createPromiseCapability)(),a.renderTasks=[],a.renderTasks.push(r),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList({pageIndex:this._pageIndex,intent:t})),a.opListReadCapability.promise}},{key:"streamTextContent",value:function streamTextContent(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.normalizeWhitespace,a=void 0!==r&&r,o=t.disableCombineTextItems,i=void 0!==o&&o,l=100;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,normalizeWhitespace:!0===a,combineTextItems:!0!==i},{highWaterMark:l,size:function size(t){return t.items.length}})}},{key:"getTextContent",value:function getTextContent(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=this.streamTextContent(t);return new Promise((function(t,a){var o=r.getReader(),i={items:[],styles:Object.create(null)};!function pump(){o.read().then((function(r){var a,o=r.value;r.done?t(i):(Object.assign(i.styles,o.styles),(a=i.items).push.apply(a,_toConsumableArray(o.items)),pump())}),a)}()}))}},{key:"_destroy",value:function _destroy(){var t=this;this.destroyed=!0,this._transport.pageCache[this._pageIndex]=null;var r=[];return Object.keys(this.intentStates).forEach((function(a){var o=t.intentStates[a];t._abortOperatorList({intentState:o,reason:new Error("Page was destroyed."),force:!0}),"oplist"!==a&&o.renderTasks.forEach((function(t){var a=t.capability.promise.catch((function(){}));r.push(a),t.cancel()}))})),this.objs.clear(),this.annotationsPromise=null,this.pendingCleanup=!1,Promise.all(r)}},{key:"cleanup",value:function cleanup(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.pendingCleanup=!0,this._tryCleanup(t)}},{key:"_tryCleanup",value:function _tryCleanup(){var t=this,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!(!this.pendingCleanup||Object.keys(this.intentStates).some((function(r){var a=t.intentStates[r];return 0!==a.renderTasks.length||!a.operatorList.lastChunk})))&&(Object.keys(this.intentStates).forEach((function(r){delete t.intentStates[r]})),this.objs.clear(),this.annotationsPromise=null,r&&this._stats&&(this._stats=new _display_utils.StatTimer),this.pendingCleanup=!1,!0)}},{key:"_startRenderPage",value:function _startRenderPage(t,r){var a=this.intentStates[r];a&&(this._stats&&this._stats.timeEnd("Page Request"),a.displayReadyCapability&&a.displayReadyCapability.resolve(t))}},{key:"_renderPageChunk",value:function _renderPageChunk(t,r){for(var a=0,o=t.length;a<o;a++)r.operatorList.fnArray.push(t.fnArray[a]),r.operatorList.argsArray.push(t.argsArray[a]);r.operatorList.lastChunk=t.lastChunk;for(var i=0;i<r.renderTasks.length;i++)r.renderTasks[i].operatorListChanged();t.lastChunk&&this._tryCleanup()}},{key:"_pumpOperatorList",value:function _pumpOperatorList(t){var r=this;(0,_util.assert)(t.intent,'PDFPageProxy._pumpOperatorList: Expected "intent" argument.');var a=this._transport.messageHandler.sendWithStream("GetOperatorList",t).getReader(),o=this.intentStates[t.intent];o.streamReader=a;!function pump(){a.read().then((function(t){var a=t.value;t.done?o.streamReader=null:r._transport.destroyed||(r._renderPageChunk(a,o),pump())}),(function(t){if(o.streamReader=null,!r._transport.destroyed){if(o.operatorList){o.operatorList.lastChunk=!0;for(var a=0;a<o.renderTasks.length;a++)o.renderTasks[a].operatorListChanged();r._tryCleanup()}if(o.displayReadyCapability)o.displayReadyCapability.reject(t);else{if(!o.opListReadCapability)throw t;o.opListReadCapability.reject(t)}}}))}()}},{key:"_abortOperatorList",value:function _abortOperatorList(t){var r=this,a=t.intentState,o=t.reason,i=t.force,l=void 0!==i&&i;if((0,_util.assert)(o instanceof Error||"object"===_typeof(o)&&null!==o,'PDFPageProxy._abortOperatorList: Expected "reason" argument.'),a.streamReader){if(!l){if(0!==a.renderTasks.length)return;if(o instanceof _display_utils.RenderingCancelledException)return void(a.streamReaderCancelTimeout=setTimeout((function(){r._abortOperatorList({intentState:a,reason:o,force:!0}),a.streamReaderCancelTimeout=null}),RENDERING_CANCELLED_TIMEOUT))}a.streamReader.cancel(new _util.AbortException(o&&o.message)),a.streamReader=null,this._transport.destroyed||(Object.keys(this.intentStates).some((function(t){return r.intentStates[t]===a&&(delete r.intentStates[t],!0)})),this.cleanup())}}},{key:"pageNumber",get:function get(){return this._pageIndex+1}},{key:"rotate",get:function get(){return this._pageInfo.rotate}},{key:"ref",get:function get(){return this._pageInfo.ref}},{key:"userUnit",get:function get(){return this._pageInfo.userUnit}},{key:"view",get:function get(){return this._pageInfo.view}},{key:"stats",get:function get(){return this._stats}}]),PDFPageProxy}();exports.PDFPageProxy=PDFPageProxy;var LoopbackPort=function(){function LoopbackPort(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];_classCallCheck(this,LoopbackPort),this._listeners=[],this._defer=t,this._deferred=Promise.resolve(void 0)}return _createClass(LoopbackPort,[{key:"postMessage",value:function postMessage(t,r){var a=this;if(this._defer){var o=new WeakMap,i={data:function cloneValue(t){if("object"!==_typeof(t)||null===t)return t;if(o.has(t))return o.get(t);var a,i;if((a=t.buffer)&&(0,_util.isArrayBuffer)(a))return i=r&&r.includes(a)?new t.constructor(a,t.byteOffset,t.byteLength):new t.constructor(t),o.set(t,i),i;for(var l in i=Array.isArray(t)?[]:{},o.set(t,i),t){for(var u=void 0,c=t;!(u=Object.getOwnPropertyDescriptor(c,l));)c=Object.getPrototypeOf(c);if(void 0!==u.value)if("function"!=typeof u.value)i[l]=cloneValue(u.value);else if(t.hasOwnProperty&&t.hasOwnProperty(l))throw new Error("LoopbackPort.postMessage - cannot clone: ".concat(t[l]))}return i}(t)};this._deferred.then((function(){a._listeners.forEach((function(t){t.call(a,i)}))}))}else this._listeners.forEach((function(r){r.call(a,{data:t})}))}},{key:"addEventListener",value:function addEventListener(t,r){this._listeners.push(r)}},{key:"removeEventListener",value:function removeEventListener(t,r){var a=this._listeners.indexOf(r);this._listeners.splice(a,1)}},{key:"terminate",value:function terminate(){this._listeners.length=0}}]),LoopbackPort}();exports.LoopbackPort=LoopbackPort;var PDFWorker=function PDFWorkerClosure(){var pdfWorkerPorts=new WeakMap,isWorkerDisabled=!1,fallbackWorkerSrc,nextFakeWorkerId=0,fakeWorkerCapability;if(_is_node.isNodeJS&&"function"==typeof require)isWorkerDisabled=!0,fallbackWorkerSrc="./pdf.worker.js";else if("object"===("undefined"==typeof document?"undefined":_typeof(document))&&"currentScript"in document){var pdfjsFilePath=document.currentScript&&document.currentScript.src;pdfjsFilePath&&(fallbackWorkerSrc=pdfjsFilePath.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}function _getWorkerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(void 0!==fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}function getMainThreadWorkerMessageHandler(){var t;try{t=globalThis.pdfjsWorker&&globalThis.pdfjsWorker.WorkerMessageHandler}catch(t){}return t||null}function setupFakeWorkerGlobal(){if(fakeWorkerCapability)return fakeWorkerCapability.promise;fakeWorkerCapability=(0,_util.createPromiseCapability)();var loader=function(){var _ref10=_asyncToGenerator(_regenerator.default.mark((function _callee(){var mainWorkerMessageHandler,worker;return _regenerator.default.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(mainWorkerMessageHandler=getMainThreadWorkerMessageHandler(),!mainWorkerMessageHandler){_context.next=3;break}return _context.abrupt("return",mainWorkerMessageHandler);case 3:if(!_is_node.isNodeJS||"function"!=typeof require){_context.next=6;break}return worker=eval("require")(_getWorkerSrc()),_context.abrupt("return",worker.WorkerMessageHandler);case 6:return _context.next=8,(0,_display_utils.loadScript)(_getWorkerSrc());case 8:return _context.abrupt("return",window.pdfjsWorker.WorkerMessageHandler);case 9:case"end":return _context.stop()}}),_callee)})));return function loader(){return _ref10.apply(this,arguments)}}();return loader().then(fakeWorkerCapability.resolve,fakeWorkerCapability.reject),fakeWorkerCapability.promise}function createCDNWrapper(t){var r="importScripts('"+t+"');";return URL.createObjectURL(new Blob([r]))}var PDFWorker=function(){function PDFWorker(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.name,a=void 0===r?null:r,o=t.port,i=void 0===o?null:o,l=t.verbosity,u=void 0===l?(0,_util.getVerbosityLevel)():l;if(_classCallCheck(this,PDFWorker),i&&pdfWorkerPorts.has(i))throw new Error("Cannot use more than one PDFWorker per port");if(this.name=a,this.destroyed=!1,this.postMessageTransfers=!0,this.verbosity=u,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,i)return pdfWorkerPorts.set(i,this),void this._initializeFromPort(i);this._initialize()}return _createClass(PDFWorker,[{key:"_initializeFromPort",value:function _initializeFromPort(t){this._port=t,this._messageHandler=new _message_handler.MessageHandler("main","worker",t),this._messageHandler.on("ready",(function(){})),this._readyCapability.resolve()}},{key:"_initialize",value:function _initialize(){var t=this;if("undefined"!=typeof Worker&&!isWorkerDisabled&&!getMainThreadWorkerMessageHandler()){var r=_getWorkerSrc();try{(0,_util.isSameOrigin)(window.location.href,r)||(r=createCDNWrapper(new URL(r,window.location).href));var a=new Worker(r),o=new _message_handler.MessageHandler("main","worker",a),i=function terminateEarly(){a.removeEventListener("error",l),o.destroy(),a.terminate(),t.destroyed?t._readyCapability.reject(new Error("Worker was destroyed")):t._setupFakeWorker()},l=function onWorkerError(){t._webWorker||i()};a.addEventListener("error",l),o.on("test",(function(r){a.removeEventListener("error",l),t.destroyed?i():r?(t._messageHandler=o,t._port=a,t._webWorker=a,r.supportTransfers||(t.postMessageTransfers=!1),t._readyCapability.resolve(),o.send("configure",{verbosity:t.verbosity})):(t._setupFakeWorker(),o.destroy(),a.terminate())})),o.on("ready",(function(r){if(a.removeEventListener("error",l),t.destroyed)i();else try{u()}catch(r){t._setupFakeWorker()}}));var u=function sendTest(){var r=new Uint8Array([t.postMessageTransfers?255:0]);try{o.send("test",r,[r.buffer])}catch(t){(0,_util.warn)("Cannot use postMessage transfers."),r[0]=0,o.send("test",r)}};return void u()}catch(t){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}},{key:"_setupFakeWorker",value:function _setupFakeWorker(){var t=this;isWorkerDisabled||((0,_util.warn),isWorkerDisabled=!0),setupFakeWorkerGlobal().then((function(r){if(t.destroyed)t._readyCapability.reject(new Error("Worker was destroyed"));else{var a=new LoopbackPort;t._port=a;var o="fake"+nextFakeWorkerId++,i=new _message_handler.MessageHandler(o+"_worker",o,a);r.setup(i,a);var l=new _message_handler.MessageHandler(o,o+"_worker",a);t._messageHandler=l,t._readyCapability.resolve(),l.send("configure",{verbosity:t.verbosity})}})).catch((function(r){t._readyCapability.reject(new Error('Setting up fake worker failed: "'.concat(r.message,'".')))}))}},{key:"destroy",value:function destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),pdfWorkerPorts.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}},{key:"promise",get:function get(){return this._readyCapability.promise}},{key:"port",get:function get(){return this._port}},{key:"messageHandler",get:function get(){return this._messageHandler}}],[{key:"fromPort",value:function fromPort(t){if(!t||!t.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return pdfWorkerPorts.has(t.port)?pdfWorkerPorts.get(t.port):new PDFWorker(t)}},{key:"getWorkerSrc",value:function getWorkerSrc(){return _getWorkerSrc()}}]),PDFWorker}();return PDFWorker}();exports.PDFWorker=PDFWorker;var WorkerTransport=function(){function WorkerTransport(t,r,a,o){_classCallCheck(this,WorkerTransport),this.messageHandler=t,this.loadingTask=r,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:r.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this)}),this._params=o,this.CMapReaderFactory=new o.CMapReaderFactory({baseUrl:o.cMapUrl,isCompressed:o.cMapPacked}),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=a,this._fullReader=null,this._lastProgress=null,this.pageCache=[],this.pagePromises=[],this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}return _createClass(WorkerTransport,[{key:"destroy",value:function destroy(){var t=this;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));var r=[];this.pageCache.forEach((function(t){t&&r.push(t._destroy())})),this.pageCache.length=0,this.pagePromises.length=0;var a=this.messageHandler.sendWithPromise("Terminate",null);return r.push(a),Promise.all(r).then((function(){t.fontLoader.clear(),t._networkStream&&t._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),t.messageHandler&&(t.messageHandler.destroy(),t.messageHandler=null),t.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise}},{key:"setupMessageHandler",value:function setupMessageHandler(){var t=this,r=this.messageHandler,a=this.loadingTask;r.on("GetReader",(function(r,a){(0,_util.assert)(t._networkStream,"GetReader - no `IPDFStream` instance available."),t._fullReader=t._networkStream.getFullReader(),t._fullReader.onProgress=function(r){t._lastProgress={loaded:r.loaded,total:r.total}},a.onPull=function(){t._fullReader.read().then((function(t){var r=t.value;t.done?a.close():((0,_util.assert)((0,_util.isArrayBuffer)(r),"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(r),1,[r]))})).catch((function(t){a.error(t)}))},a.onCancel=function(r){t._fullReader.cancel(r)}})),r.on("ReaderHeadersReady",(function(r){var o=(0,_util.createPromiseCapability)(),i=t._fullReader;return i.headersReady.then((function(){i.isStreamingSupported&&i.isRangeSupported||(t._lastProgress&&a.onProgress&&a.onProgress(t._lastProgress),i.onProgress=function(t){a.onProgress&&a.onProgress({loaded:t.loaded,total:t.total})}),o.resolve({isStreamingSupported:i.isStreamingSupported,isRangeSupported:i.isRangeSupported,contentLength:i.contentLength})}),o.reject),o.promise})),r.on("GetRangeReader",(function(r,a){(0,_util.assert)(t._networkStream,"GetRangeReader - no `IPDFStream` instance available.");var o=t._networkStream.getRangeReader(r.begin,r.end);o?(a.onPull=function(){o.read().then((function(t){var r=t.value;t.done?a.close():((0,_util.assert)((0,_util.isArrayBuffer)(r),"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(r),1,[r]))})).catch((function(t){a.error(t)}))},a.onCancel=function(t){o.cancel(t)}):a.close()})),r.on("GetDoc",(function(r){var o=r.pdfInfo;t._numPages=o.numPages,a._capability.resolve(new PDFDocumentProxy(o,t))})),r.on("DocException",(function(t){var r;switch(t.name){case"PasswordException":r=new _util.PasswordException(t.message,t.code);break;case"InvalidPDFException":r=new _util.InvalidPDFException(t.message);break;case"MissingPDFException":r=new _util.MissingPDFException(t.message);break;case"UnexpectedResponseException":r=new _util.UnexpectedResponseException(t.message,t.status);break;case"UnknownErrorException":r=new _util.UnknownErrorException(t.message,t.details)}a._capability.reject(r)})),r.on("PasswordRequest",(function(r){if(t._passwordCapability=(0,_util.createPromiseCapability)(),a.onPassword){try{a.onPassword((function updatePassword(r){t._passwordCapability.resolve({password:r})}),r.code)}catch(r){t._passwordCapability.reject(r)}}else t._passwordCapability.reject(new _util.PasswordException(r.message,r.code));return t._passwordCapability.promise})),r.on("DataLoaded",(function(r){a.onProgress&&a.onProgress({loaded:r.length,total:r.length}),t.downloadInfoCapability.resolve(r)})),r.on("StartRenderPage",(function(r){t.destroyed||t.pageCache[r.pageIndex]._startRenderPage(r.transparency,r.intent)})),r.on("commonobj",(function(a){if(!t.destroyed){var o=_slicedToArray(a,3),i=o[0],l=o[1],u=o[2];if(!t.commonObjs.has(i))switch(l){case"Font":var c=t._params;if("error"in u){var d=u.error;(0,_util.warn)("Error during font loading: ".concat(d)),t.commonObjs.resolve(i,d);break}var h=null;c.pdfBug&&globalThis.FontInspector&&globalThis.FontInspector.enabled&&(h={registerFont:function registerFont(t,r){globalThis.FontInspector.fontAdded(t,r)}});var p=new _font_loader.FontFaceObject(u,{isEvalSupported:c.isEvalSupported,disableFontFace:c.disableFontFace,ignoreErrors:c.ignoreErrors,onUnsupportedFeature:t._onUnsupportedFeature.bind(t),fontRegistry:h});t.fontLoader.bind(p).catch((function(t){return r.sendWithPromise("FontFallback",{id:i})})).finally((function(){!c.fontExtraProperties&&p.data&&(p.data=null),t.commonObjs.resolve(i,p)}));break;case"FontPath":case"FontType3Res":case"Image":t.commonObjs.resolve(i,u);break;default:throw new Error("Got unknown common object type ".concat(l))}}})),r.on("obj",(function(r){if(!t.destroyed){var a=_slicedToArray(r,4),o=a[0],i=a[1],l=a[2],u=a[3],c=t.pageCache[i];if(!c.objs.has(o))switch(l){case"Image":c.objs.resolve(o,u);u&&"data"in u&&u.data.length>8e6&&(c.cleanupAfterRender=!0);break;default:throw new Error("Got unknown object type ".concat(l))}}})),r.on("DocProgress",(function(r){t.destroyed||a.onProgress&&a.onProgress({loaded:r.loaded,total:r.total})})),r.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),r.on("FetchBuiltInCMap",(function(r,a){if(t.destroyed)a.error(new Error("Worker was destroyed"));else{var o=!1;a.onPull=function(){o?a.close():(o=!0,t.CMapReaderFactory.fetch(r).then((function(t){a.enqueue(t,1,[t.cMapData.buffer])})).catch((function(t){a.error(t)})))}}}))}},{key:"_onUnsupportedFeature",value:function _onUnsupportedFeature(t){var r=t.featureId;this.destroyed||this.loadingTask.onUnsupportedFeature&&this.loadingTask.onUnsupportedFeature(r)}},{key:"getData",value:function getData(){return this.messageHandler.sendWithPromise("GetData",null)}},{key:"getPage",value:function getPage(t){var r=this;if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request"));var a=t-1;if(a in this.pagePromises)return this.pagePromises[a];var o=this.messageHandler.sendWithPromise("GetPage",{pageIndex:a}).then((function(t){if(r.destroyed)throw new Error("Transport destroyed");var o=new PDFPageProxy(a,t,r,r._params.pdfBug);return r.pageCache[a]=o,o}));return this.pagePromises[a]=o,o}},{key:"getPageIndex",value:function getPageIndex(t){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:t}).catch((function(t){return Promise.reject(new Error(t))}))}},{key:"getAnnotations",value:function getAnnotations(t,r){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:r})}},{key:"getDestinations",value:function getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}},{key:"getDestination",value:function getDestination(t){return"string"!=typeof t?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}},{key:"getPageLabels",value:function getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}},{key:"getPageLayout",value:function getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}},{key:"getPageMode",value:function getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}},{key:"getViewerPreferences",value:function getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}},{key:"getOpenAction",value:function getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}},{key:"getAttachments",value:function getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}},{key:"getJavaScript",value:function getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}},{key:"getOutline",value:function getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}},{key:"getPermissions",value:function getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}},{key:"getMetadata",value:function getMetadata(){var t=this;return this.messageHandler.sendWithPromise("GetMetadata",null).then((function(r){return{info:r[0],metadata:r[1]?new _metadata.Metadata(r[1]):null,contentDispositionFilename:t._fullReader?t._fullReader.filename:null}}))}},{key:"getStats",value:function getStats(){return this.messageHandler.sendWithPromise("GetStats",null)}},{key:"startCleanup",value:function startCleanup(){var t=this;return this.messageHandler.sendWithPromise("Cleanup",null).then((function(){for(var r=0,a=t.pageCache.length;r<a;r++){var o=t.pageCache[r];if(o)if(!o.cleanup())throw new Error("startCleanup: Page ".concat(r+1," is currently rendering."))}t.commonObjs.clear(),t.fontLoader.clear()}))}},{key:"loadingParams",get:function get(){var t=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:t.disableAutoFetch,disableFontFace:t.disableFontFace})}}]),WorkerTransport}(),PDFObjects=function(){function PDFObjects(){_classCallCheck(this,PDFObjects),this._objs=Object.create(null)}return _createClass(PDFObjects,[{key:"_ensureObj",value:function _ensureObj(t){return this._objs[t]?this._objs[t]:this._objs[t]={capability:(0,_util.createPromiseCapability)(),data:null,resolved:!1}}},{key:"get",value:function get(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(r)return this._ensureObj(t).capability.promise.then(r),null;var a=this._objs[t];if(!a||!a.resolved)throw new Error("Requesting object that isn't resolved yet ".concat(t,"."));return a.data}},{key:"has",value:function has(t){var r=this._objs[t];return!!r&&r.resolved}},{key:"resolve",value:function resolve(t,r){var a=this._ensureObj(t);a.resolved=!0,a.data=r,a.capability.resolve(r)}},{key:"clear",value:function clear(){this._objs=Object.create(null)}}]),PDFObjects}(),RenderTask=function(){function RenderTask(t){_classCallCheck(this,RenderTask),this._internalRenderTask=t,this.onContinue=null}return _createClass(RenderTask,[{key:"cancel",value:function cancel(){this._internalRenderTask.cancel()}},{key:"promise",get:function get(){return this._internalRenderTask.capability.promise}}]),RenderTask}(),InternalRenderTask=function InternalRenderTaskClosure(){var t=new WeakSet;return function(){function InternalRenderTask(t){var r=t.callback,a=t.params,o=t.objs,i=t.commonObjs,l=t.operatorList,u=t.pageIndex,c=t.canvasFactory,d=t.webGLContext,h=t.useRequestAnimationFrame,p=void 0!==h&&h,m=t.pdfBug,v=void 0!==m&&m;_classCallCheck(this,InternalRenderTask),this.callback=r,this.params=a,this.objs=o,this.commonObjs=i,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=u,this.canvasFactory=c,this.webGLContext=d,this._pdfBug=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===p&&"undefined"!=typeof window,this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=a.canvasContext.canvas}var r;return _createClass(InternalRenderTask,[{key:"initializeGraphics",value:function initializeGraphics(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.cancelled){if(this._canvas){if(t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager&&globalThis.StepperManager.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());var a=this.params,o=a.canvasContext,i=a.viewport,l=a.transform,u=a.imageLayer,c=a.background;this.gfx=new _canvas.CanvasGraphics(o,this.commonObjs,this.objs,this.canvasFactory,this.webGLContext,u),this.gfx.beginDrawing({transform:l,viewport:i,transparency:r,background:c}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}}},{key:"cancel",value:function cancel(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&t.delete(this._canvas),this.callback(r||new _display_utils.RenderingCancelledException("Rendering cancelled, page ".concat(this._pageIndex+1),"canvas"))}},{key:"operatorListChanged",value:function operatorListChanged(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}},{key:"_continue",value:function _continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}},{key:"_scheduleNext",value:function _scheduleNext(){var t=this;this._useRequestAnimationFrame?window.requestAnimationFrame((function(){t._nextBound().catch(t.cancel.bind(t))})):Promise.resolve().then(this._nextBound).catch(this.cancel.bind(this))}},{key:"_next",value:(r=_asyncToGenerator(_regenerator.default.mark((function _callee2(){return _regenerator.default.wrap((function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:if(!this.cancelled){r.next=2;break}return r.abrupt("return");case 2:this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&t.delete(this._canvas),this.callback()));case 4:case"end":return r.stop()}}),_callee2,this)}))),function _next(){return r.apply(this,arguments)})}]),InternalRenderTask}()}(),version="2.5.207";exports.version=version;var build="0974d6052";exports.build=build},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FontLoader=r.FontFaceObject=void 0;var o=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(2)),i=a(5);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _setPrototypeOf(t,r){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t})(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var a,o=_getPrototypeOf(t);if(r){var i=_getPrototypeOf(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function asyncGeneratorStep(t,r,a,o,i,l,u){try{var c=t[l](u),d=c.value}catch(t){return void a(t)}c.done?r(d):Promise.resolve(d).then(o,i)}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var o=r[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}var l,u=function(){function BaseFontLoader(t){var r=t.docId,a=t.onUnsupportedFeature;_classCallCheck(this,BaseFontLoader),this.constructor===BaseFontLoader&&(0,i.unreachable)("Cannot initialize BaseFontLoader."),this.docId=r,this._onUnsupportedFeature=a,this.nativeFontFaces=[],this.styleElement=null}var t;return _createClass(BaseFontLoader,[{key:"addNativeFontFace",value:function addNativeFontFace(t){this.nativeFontFaces.push(t),document.fonts.add(t)}},{key:"insertRule",value:function insertRule(t){var r=this.styleElement;r||((r=this.styleElement=document.createElement("style")).id="PDFJS_FONT_STYLE_TAG_".concat(this.docId),document.documentElement.getElementsByTagName("head")[0].appendChild(r));var a=r.sheet;a.insertRule(t,a.cssRules.length)}},{key:"clear",value:function clear(){this.nativeFontFaces.forEach((function(t){document.fonts.delete(t)})),this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}},{key:"bind",value:(t=function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(o,i){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,o,i,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,o,i,_next,_throw,"throw",t)}_next(void 0)}))}}(o.default.mark((function _callee(t){var r,a,l=this;return o.default.wrap((function _callee$(o){for(;;)switch(o.prev=o.next){case 0:if(!t.attached&&!t.missingFile){o.next=2;break}return o.abrupt("return");case 2:if(t.attached=!0,!this.isFontLoadingAPISupported){o.next=19;break}if(!(r=t.createNativeFontFace())){o.next=18;break}return this.addNativeFontFace(r),o.prev=7,o.next=10,r.loaded;case 10:o.next=18;break;case 12:throw o.prev=12,o.t0=o.catch(7),this._onUnsupportedFeature({featureId:i.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,i.warn)("Failed to load font '".concat(r.family,"': '").concat(o.t0,"'.")),t.disableFontFace=!0,o.t0;case 18:return o.abrupt("return");case 19:if(!(a=t.createFontFaceRule())){o.next=26;break}if(this.insertRule(a),!this.isSyncFontLoadingSupported){o.next=24;break}return o.abrupt("return");case 24:return o.next=26,new Promise((function(r){var o=l._queueLoadingCallback(r);l._prepareFontLoadEvent([a],[t],o)}));case 26:case"end":return o.stop()}}),_callee,this,[[7,12]])}))),function bind(r){return t.apply(this,arguments)})},{key:"_queueLoadingCallback",value:function _queueLoadingCallback(t){(0,i.unreachable)("Abstract method `_queueLoadingCallback`.")}},{key:"_prepareFontLoadEvent",value:function _prepareFontLoadEvent(t,r,a){(0,i.unreachable)("Abstract method `_prepareFontLoadEvent`.")}},{key:"isFontLoadingAPISupported",get:function get(){var t="undefined"!=typeof document&&!!document.fonts;return(0,i.shadow)(this,"isFontLoadingAPISupported",t)}},{key:"isSyncFontLoadingSupported",get:function get(){(0,i.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}},{key:"_loadTestFont",get:function get(){(0,i.unreachable)("Abstract method `_loadTestFont`.")}}]),BaseFontLoader}();r.FontLoader=l,r.FontLoader=l=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}(GenericFontLoader,t);var r=_createSuper(GenericFontLoader);function GenericFontLoader(t){var a;return _classCallCheck(this,GenericFontLoader),(a=r.call(this,t)).loadingContext={requests:[],nextRequestId:0},a.loadTestFontId=0,a}return _createClass(GenericFontLoader,[{key:"_queueLoadingCallback",value:function _queueLoadingCallback(t){var r=this.loadingContext,a={id:"pdfjs-font-loading-".concat(r.nextRequestId++),done:!1,complete:function completeRequest(){for((0,i.assert)(!a.done,"completeRequest() cannot be called twice."),a.done=!0;r.requests.length>0&&r.requests[0].done;){var t=r.requests.shift();setTimeout(t.callback,0)}},callback:t};return r.requests.push(a),a}},{key:"_prepareFontLoadEvent",value:function _prepareFontLoadEvent(t,r,a){function int32(t,r){return t.charCodeAt(r)<<24|t.charCodeAt(r+1)<<16|t.charCodeAt(r+2)<<8|255&t.charCodeAt(r+3)}function spliceString(t,r,a,o){return t.substring(0,r)+o+t.substring(r+a)}var o,l,u=document.createElement("canvas");u.width=1,u.height=1;var c=u.getContext("2d",{willReadFrequently:!0}),d=0;var h="lt".concat(Date.now()).concat(this.loadTestFontId++),p=this._loadTestFont,m=1482184792,v=int32(p=spliceString(p,976,h.length,h),16);for(o=0,l=h.length-3;o<l;o+=4)v=v-m+int32(h,o)|0;o<h.length&&(v=v-m+int32(h+"XXX",o)|0),p=spliceString(p,16,4,(0,i.string32)(v));var g="url(data:font/opentype;base64,".concat(btoa(p),");"),y='@font-face {font-family:"'.concat(h,'";src:').concat(g,"}");this.insertRule(y);var b=[];for(o=0,l=r.length;o<l;o++)b.push(r[o].loadedName);b.push(h);var _=document.createElement("div");for(_.style.visibility="hidden",_.style.width=_.style.height="10px",_.style.position="absolute",_.style.top=_.style.left="0px",o=0,l=b.length;o<l;++o){var S=document.createElement("span");S.textContent="Hi",S.style.fontFamily=b[o],_.appendChild(S)}document.body.appendChild(_),function isFontReady(t,r){if(++d>30)return(0,i.warn)("Load test font never loaded."),void r();c.font="30px "+t,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0?r():setTimeout(isFontReady.bind(null,t,r))}(h,(function(){document.body.removeChild(_),a.complete()}))}},{key:"isSyncFontLoadingSupported",get:function get(){var t=!1;if("undefined"==typeof navigator)t=!0;else{var r=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);r&&r[1]>=14&&(t=!0)}return(0,i.shadow)(this,"isSyncFontLoadingSupported",t)}},{key:"_loadTestFont",get:function get(){return(0,i.shadow)(this,"_loadTestFont",function getLoadTestFont(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")}())}}]),GenericFontLoader}(u);var c=function(){function FontFaceObject(t,r){var a=r.isEvalSupported,o=void 0===a||a,i=r.disableFontFace,l=void 0!==i&&i,u=r.ignoreErrors,c=void 0!==u&&u,d=r.onUnsupportedFeature,h=void 0===d?null:d,p=r.fontRegistry,m=void 0===p?null:p;for(var v in _classCallCheck(this,FontFaceObject),this.compiledGlyphs=Object.create(null),t)this[v]=t[v];this.isEvalSupported=!1!==o,this.disableFontFace=!0===l,this.ignoreErrors=!0===c,this._onUnsupportedFeature=h,this.fontRegistry=m}return _createClass(FontFaceObject,[{key:"createNativeFontFace",value:function createNativeFontFace(){if(!this.data||this.disableFontFace)return null;var t=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),t}},{key:"createFontFaceRule",value:function createFontFaceRule(){if(!this.data||this.disableFontFace)return null;var t=(0,i.bytesToString)(new Uint8Array(this.data)),r="url(data:".concat(this.mimetype,";base64,").concat(btoa(t),");"),a='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(r,"}");return this.fontRegistry&&this.fontRegistry.registerFont(this,r),a}},{key:"getPathGenerator",value:function getPathGenerator(t,r){if(void 0!==this.compiledGlyphs[r])return this.compiledGlyphs[r];var a,o;try{a=t.get(this.loadedName+"_path_"+r)}catch(t){if(!this.ignoreErrors)throw t;return this._onUnsupportedFeature&&this._onUnsupportedFeature({featureId:i.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,i.warn)('getPathGenerator - ignoring character: "'.concat(t,'".')),this.compiledGlyphs[r]=function(t,r){}}if(this.isEvalSupported&&i.IsEvalSupportedCached.value){for(var l,u="",c=0,d=a.length;c<d;c++)l=void 0!==(o=a[c]).args?o.args.join(","):"",u+="c."+o.cmd+"("+l+");\n";return this.compiledGlyphs[r]=new Function("c","size",u)}return this.compiledGlyphs[r]=function(t,r){for(var i=0,l=a.length;i<l;i++)"scale"===(o=a[i]).cmd&&(o.args=[r,-r]),t[o.cmd].apply(t,o.args)}}}]),FontFaceObject}();r.FontFaceObject=c},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.apiCompatibilityParams=void 0;var o=a(7),i=Object.create(null);!function checkFontFace(){o.isNodeJS&&(i.disableFontFace=!0)}();var l=Object.freeze(i);r.apiCompatibilityParams=l},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CanvasGraphics=void 0;var o=a(5),i=a(202);function _createForOfIteratorHelper(t,r){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var o=0,i=function F(){};return{s:i,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,c=!1;return{s:function s(){a=t[Symbol.iterator]()},n:function n(){var t=a.next();return u=t.done,t},e:function e(t){c=!0,l=t},f:function f(){try{u||null==a.return||a.return()}finally{if(c)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,o=new Array(r);a<r;a++)o[a]=t[a];return o}var l=4096,u=.65,c=16;function addContextCurrentTransform(t){t.mozCurrentTransform||(t._originalSave=t.save,t._originalRestore=t.restore,t._originalRotate=t.rotate,t._originalScale=t.scale,t._originalTranslate=t.translate,t._originalTransform=t.transform,t._originalSetTransform=t.setTransform,t._transformMatrix=t._transformMatrix||[1,0,0,1,0,0],t._transformStack=[],Object.defineProperty(t,"mozCurrentTransform",{get:function getCurrentTransform(){return this._transformMatrix}}),Object.defineProperty(t,"mozCurrentTransformInverse",{get:function getCurrentTransformInverse(){var t=this._transformMatrix,r=t[0],a=t[1],o=t[2],i=t[3],l=t[4],u=t[5],c=r*i-a*o,d=a*o-r*i;return[i/c,a/d,o/d,r/c,(i*l-o*u)/d,(a*l-r*u)/c]}}),t.save=function ctxSave(){var t=this._transformMatrix;this._transformStack.push(t),this._transformMatrix=t.slice(0,6),this._originalSave()},t.restore=function ctxRestore(){var t=this._transformStack.pop();t&&(this._transformMatrix=t,this._originalRestore())},t.translate=function ctxTranslate(t,r){var a=this._transformMatrix;a[4]=a[0]*t+a[2]*r+a[4],a[5]=a[1]*t+a[3]*r+a[5],this._originalTranslate(t,r)},t.scale=function ctxScale(t,r){var a=this._transformMatrix;a[0]=a[0]*t,a[1]=a[1]*t,a[2]=a[2]*r,a[3]=a[3]*r,this._originalScale(t,r)},t.transform=function ctxTransform(r,a,o,i,l,u){var c=this._transformMatrix;this._transformMatrix=[c[0]*r+c[2]*a,c[1]*r+c[3]*a,c[0]*o+c[2]*i,c[1]*o+c[3]*i,c[0]*l+c[2]*u+c[4],c[1]*l+c[3]*u+c[5]],t._originalTransform(r,a,o,i,l,u)},t.setTransform=function ctxSetTransform(r,a,o,i,l,u){this._transformMatrix=[r,a,o,i,l,u],t._originalSetTransform(r,a,o,i,l,u)},t.rotate=function ctxRotate(t){var r=Math.cos(t),a=Math.sin(t),o=this._transformMatrix;this._transformMatrix=[o[0]*r+o[2]*a,o[1]*r+o[3]*a,o[0]*-a+o[2]*r,o[1]*-a+o[3]*r,o[4],o[5]],this._originalRotate(t)})}var d=function CachedCanvasesClosure(){function CachedCanvases(t){this.canvasFactory=t,this.cache=Object.create(null)}return CachedCanvases.prototype={getCanvas:function CachedCanvases_getCanvas(t,r,a,o){var i;return void 0!==this.cache[t]?(i=this.cache[t],this.canvasFactory.reset(i,r,a),i.context.setTransform(1,0,0,1,0,0)):(i=this.canvasFactory.create(r,a),this.cache[t]=i),o&&addContextCurrentTransform(i.context),i},clear:function clear(){for(var t in this.cache){var r=this.cache[t];this.canvasFactory.destroy(r),delete this.cache[t]}}},CachedCanvases}();var h=function CanvasExtraStateClosure(){function CanvasExtraState(){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=o.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=o.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.resumeSMaskCtx=null}return CanvasExtraState.prototype={clone:function CanvasExtraState_clone(){return Object.create(this)},setCurrentPoint:function CanvasExtraState_setCurrentPoint(t,r){this.x=t,this.y=r}},CanvasExtraState}(),p=function CanvasGraphicsClosure(){function CanvasGraphics(t,r,a,o,i,l){this.ctx=t,this.current=new h,this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=r,this.objs=a,this.canvasFactory=o,this.webGLContext=i,this.imageLayer=l,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.cachedCanvases=new d(this.canvasFactory),t&&addContextCurrentTransform(t),this._cachedGetSinglePixelWidth=null}function putBinaryImageData(t,r){if("undefined"!=typeof ImageData&&r instanceof ImageData)t.putImageData(r,0,0);else{var a,i,l,u,d,h=r.height,p=r.width,m=h%c,v=(h-m)/c,g=0===m?v:v+1,y=t.createImageData(p,c),b=0,_=r.data,S=y.data;if(r.kind===o.ImageKind.GRAYSCALE_1BPP){var A=_.byteLength,C=new Uint32Array(S.buffer,0,S.byteLength>>2),R=C.length,k=p+7>>3,P=4294967295,w=o.IsLittleEndianCached.value?4278190080:255;for(i=0;i<g;i++){for(u=i<v?c:m,a=0,l=0;l<u;l++){for(var x=A-b,T=0,E=x>k?p:8*x-7,O=-8&E,I=0,D=0;T<O;T+=8)D=_[b++],C[a++]=128&D?P:w,C[a++]=64&D?P:w,C[a++]=32&D?P:w,C[a++]=16&D?P:w,C[a++]=8&D?P:w,C[a++]=4&D?P:w,C[a++]=2&D?P:w,C[a++]=1&D?P:w;for(;T<E;T++)0===I&&(D=_[b++],I=128),C[a++]=D&I?P:w,I>>=1}for(;a<R;)C[a++]=0;t.putImageData(y,0,i*c)}}else if(r.kind===o.ImageKind.RGBA_32BPP){for(l=0,d=p*c*4,i=0;i<v;i++)S.set(_.subarray(b,b+d)),b+=d,t.putImageData(y,0,l),l+=c;i<g&&(d=p*m*4,S.set(_.subarray(b,b+d)),t.putImageData(y,0,l))}else{if(r.kind!==o.ImageKind.RGB_24BPP)throw new Error("bad image kind: ".concat(r.kind));for(d=p*(u=c),i=0;i<g;i++){for(i>=v&&(d=p*(u=m)),a=0,l=d;l--;)S[a++]=_[b++],S[a++]=_[b++],S[a++]=_[b++],S[a++]=255;t.putImageData(y,0,i*c)}}}}function putBinaryImageMask(t,r){for(var a=r.height,o=r.width,i=a%c,l=(a-i)/c,u=0===i?l:l+1,d=t.createImageData(o,c),h=0,p=r.data,m=d.data,v=0;v<u;v++){for(var g=v<l?c:i,y=3,b=0;b<g;b++)for(var _=0,S=0;S<o;S++){if(!_){var A=p[h++];_=128}m[y]=A&_?0:255,y+=4,_>>=1}t.putImageData(d,0,v*c)}}function copyCtxState(t,r){for(var a=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"],o=0,i=a.length;o<i;o++){var l=a[o];void 0!==t[l]&&(r[l]=t[l])}void 0!==t.setLineDash&&(r.setLineDash(t.getLineDash()),r.lineDashOffset=t.lineDashOffset)}function resetCtxToDefault(t){t.strokeStyle="#000000",t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",void 0!==t.setLineDash&&(t.setLineDash([]),t.lineDashOffset=0)}function composeSMaskBackdrop(t,r,a,o){for(var i=t.length,l=3;l<i;l+=4){var u=t[l];if(0===u)t[l-3]=r,t[l-2]=a,t[l-1]=o;else if(u<255){var c=255-u;t[l-3]=t[l-3]*u+r*c>>8,t[l-2]=t[l-2]*u+a*c>>8,t[l-1]=t[l-1]*u+o*c>>8}}}function composeSMaskAlpha(t,r,a){for(var o=t.length,i=3;i<o;i+=4){var l=a?a[t[i]]:t[i];r[i]=r[i]*l*.00392156862745098|0}}function composeSMaskLuminosity(t,r,a){for(var o=t.length,i=3;i<o;i+=4){var l=77*t[i-3]+152*t[i-2]+28*t[i-1];r[i]=a?r[i]*a[l>>8]>>8:r[i]*l>>16}}function composeSMask(t,r,a,o){var i=r.canvas,l=r.context;t.setTransform(r.scaleX,0,0,r.scaleY,r.offsetX,r.offsetY);var u=r.backdrop||null;if(!r.transferMap&&o.isEnabled){var c=o.composeSMask({layer:a.canvas,mask:i,properties:{subtype:r.subtype,backdrop:u}});return t.setTransform(1,0,0,1,0,0),void t.drawImage(c,r.offsetX,r.offsetY)}!function genericComposeSMask(t,r,a,o,i,l,u){var c,d=!!l,h=d?l[0]:0,p=d?l[1]:0,m=d?l[2]:0;c="Luminosity"===i?composeSMaskLuminosity:composeSMaskAlpha;for(var v=Math.min(o,Math.ceil(1048576/a)),g=0;g<o;g+=v){var y=Math.min(v,o-g),b=t.getImageData(0,g,a,y),_=r.getImageData(0,g,a,y);d&&composeSMaskBackdrop(b.data,h,p,m),c(b.data,_.data,u),t.putImageData(_,0,g)}}(l,a,i.width,i.height,r.subtype,u,r.transferMap),t.drawImage(i,0,0)}var t=["butt","round","square"],r=["miter","round","bevel"],a={},p={};for(var m in CanvasGraphics.prototype={beginDrawing:function beginDrawing(t){var r=t.transform,a=t.viewport,o=t.transparency,i=void 0!==o&&o,l=t.background,u=void 0===l?null:l,c=this.ctx.canvas.width,d=this.ctx.canvas.height;if(this.ctx.save(),this.ctx.fillStyle=u||"rgb(255, 255, 255)",this.ctx.fillRect(0,0,c,d),this.ctx.restore(),i){var h=this.cachedCanvases.getCanvas("transparent",c,d,!0);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),resetCtxToDefault(this.ctx),r&&this.ctx.transform.apply(this.ctx,r),this.ctx.transform.apply(this.ctx,a.transform),this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()},executeOperatorList:function CanvasGraphics_executeOperatorList(t,r,a,i){var l=t.argsArray,u=t.fnArray,c=r||0,d=l.length;if(d===c)return c;for(var h,p=d-c>10&&"function"==typeof a,m=p?Date.now()+15:0,v=0,g=this.commonObjs,y=this.objs;;){if(void 0!==i&&c===i.nextBreakPoint)return i.breakIt(c,a),c;if((h=u[c])!==o.OPS.dependency)this[h].apply(this,l[c]);else{var b,_=_createForOfIteratorHelper(l[c]);try{for(_.s();!(b=_.n()).done;){var S=b.value,A=S.startsWith("g_")?g:y;if(!A.has(S))return A.get(S,a),c}}catch(t){_.e(t)}finally{_.f()}}if(++c===d)return c;if(p&&++v>10){if(Date.now()>m)return a(),c;v=0}}},endDrawing:function CanvasGraphics_endDrawing(){null!==this.current.activeSMask&&this.endSMaskGroup(),this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.webGLContext.clear(),this.imageLayer&&this.imageLayer.endLayout()},setLineWidth:function CanvasGraphics_setLineWidth(t){this.current.lineWidth=t,this.ctx.lineWidth=t},setLineCap:function CanvasGraphics_setLineCap(r){this.ctx.lineCap=t[r]},setLineJoin:function CanvasGraphics_setLineJoin(t){this.ctx.lineJoin=r[t]},setMiterLimit:function CanvasGraphics_setMiterLimit(t){this.ctx.miterLimit=t},setDash:function CanvasGraphics_setDash(t,r){var a=this.ctx;void 0!==a.setLineDash&&(a.setLineDash(t),a.lineDashOffset=r)},setRenderingIntent:function setRenderingIntent(t){},setFlatness:function setFlatness(t){},setGState:function CanvasGraphics_setGState(t){for(var r=0,a=t.length;r<a;r++){var o=t[r],i=o[0],l=o[1];switch(i){case"LW":this.setLineWidth(l);break;case"LC":this.setLineCap(l);break;case"LJ":this.setLineJoin(l);break;case"ML":this.setMiterLimit(l);break;case"D":this.setDash(l[0],l[1]);break;case"RI":this.setRenderingIntent(l);break;case"FL":this.setFlatness(l);break;case"Font":this.setFont(l[0],l[1]);break;case"CA":this.current.strokeAlpha=o[1];break;case"ca":this.current.fillAlpha=o[1],this.ctx.globalAlpha=o[1];break;case"BM":this.ctx.globalCompositeOperation=l;break;case"SMask":this.current.activeSMask&&(this.stateStack.length>0&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask?this.suspendSMaskGroup():this.endSMaskGroup()),this.current.activeSMask=l?this.tempSMask:null,this.current.activeSMask&&this.beginSMaskGroup(),this.tempSMask=null}}},beginSMaskGroup:function CanvasGraphics_beginSMaskGroup(){var t=this.current.activeSMask,r=t.canvas.width,a=t.canvas.height,o="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(o,r,a,!0),l=this.ctx,u=l.mozCurrentTransform;this.ctx.save();var c=i.context;c.scale(1/t.scaleX,1/t.scaleY),c.translate(-t.offsetX,-t.offsetY),c.transform.apply(c,u),t.startTransformInverse=c.mozCurrentTransformInverse,copyCtxState(l,c),this.ctx=c,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(l),this.groupLevel++},suspendSMaskGroup:function CanvasGraphics_endSMaskGroup(){var t=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),composeSMask(this.ctx,this.current.activeSMask,t,this.webGLContext),this.ctx.restore(),this.ctx.save(),copyCtxState(t,this.ctx),this.current.resumeSMaskCtx=t;var r=o.Util.transform(this.current.activeSMask.startTransformInverse,t.mozCurrentTransform);this.ctx.transform.apply(this.ctx,r),t.save(),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,t.canvas.width,t.canvas.height),t.restore()},resumeSMaskGroup:function CanvasGraphics_endSMaskGroup(){var t=this.current.resumeSMaskCtx,r=this.ctx;this.ctx=t,this.groupStack.push(r),this.groupLevel++},endSMaskGroup:function CanvasGraphics_endSMaskGroup(){var t=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),composeSMask(this.ctx,this.current.activeSMask,t,this.webGLContext),this.ctx.restore(),copyCtxState(t,this.ctx);var r=o.Util.transform(this.current.activeSMask.startTransformInverse,t.mozCurrentTransform);this.ctx.transform.apply(this.ctx,r)},save:function CanvasGraphics_save(){this.ctx.save();var t=this.current;this.stateStack.push(t),this.current=t.clone(),this.current.resumeSMaskCtx=null},restore:function CanvasGraphics_restore(){this.current.resumeSMaskCtx&&this.resumeSMaskGroup(),null===this.current.activeSMask||0!==this.stateStack.length&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask||this.endSMaskGroup(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.ctx.restore(),this.pendingClip=null,this._cachedGetSinglePixelWidth=null)},transform:function CanvasGraphics_transform(t,r,a,o,i,l){this.ctx.transform(t,r,a,o,i,l),this._cachedGetSinglePixelWidth=null},constructPath:function CanvasGraphics_constructPath(t,r){for(var a=this.ctx,i=this.current,l=i.x,u=i.y,c=0,d=0,h=t.length;c<h;c++)switch(0|t[c]){case o.OPS.rectangle:l=r[d++],u=r[d++];var p=r[d++],m=r[d++];0===p&&(p=this.getSinglePixelWidth()),0===m&&(m=this.getSinglePixelWidth());var v=l+p,g=u+m;this.ctx.moveTo(l,u),this.ctx.lineTo(v,u),this.ctx.lineTo(v,g),this.ctx.lineTo(l,g),this.ctx.lineTo(l,u),this.ctx.closePath();break;case o.OPS.moveTo:l=r[d++],u=r[d++],a.moveTo(l,u);break;case o.OPS.lineTo:l=r[d++],u=r[d++],a.lineTo(l,u);break;case o.OPS.curveTo:l=r[d+4],u=r[d+5],a.bezierCurveTo(r[d],r[d+1],r[d+2],r[d+3],l,u),d+=6;break;case o.OPS.curveTo2:a.bezierCurveTo(l,u,r[d],r[d+1],r[d+2],r[d+3]),l=r[d+2],u=r[d+3],d+=4;break;case o.OPS.curveTo3:l=r[d+2],u=r[d+3],a.bezierCurveTo(r[d],r[d+1],l,u,l,u),d+=4;break;case o.OPS.closePath:a.closePath()}i.setCurrentPoint(l,u)},closePath:function CanvasGraphics_closePath(){this.ctx.closePath()},stroke:function CanvasGraphics_stroke(t){t=void 0===t||t;var r=this.ctx,a=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,a&&a.hasOwnProperty("type")&&"Pattern"===a.type){r.save();var i=r.mozCurrentTransform,l=o.Util.singularValueDecompose2dScale(i)[0];r.strokeStyle=a.getPattern(r,this),r.lineWidth=Math.max(this.getSinglePixelWidth()*u,this.current.lineWidth*l),r.stroke(),r.restore()}else r.lineWidth=Math.max(this.getSinglePixelWidth()*u,this.current.lineWidth),r.stroke();t&&this.consumePath(),r.globalAlpha=this.current.fillAlpha},closeStroke:function CanvasGraphics_closeStroke(){this.closePath(),this.stroke()},fill:function CanvasGraphics_fill(t){t=void 0===t||t;var r=this.ctx,a=this.current.fillColor,o=!1;this.current.patternFill&&(r.save(),this.baseTransform&&r.setTransform.apply(r,this.baseTransform),r.fillStyle=a.getPattern(r,this),o=!0),this.pendingEOFill?(r.fill("evenodd"),this.pendingEOFill=!1):r.fill(),o&&r.restore(),t&&this.consumePath()},eoFill:function CanvasGraphics_eoFill(){this.pendingEOFill=!0,this.fill()},fillStroke:function CanvasGraphics_fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()},eoFillStroke:function CanvasGraphics_eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()},closeFillStroke:function CanvasGraphics_closeFillStroke(){this.closePath(),this.fillStroke()},closeEOFillStroke:function CanvasGraphics_closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()},endPath:function CanvasGraphics_endPath(){this.consumePath()},clip:function CanvasGraphics_clip(){this.pendingClip=a},eoClip:function CanvasGraphics_eoClip(){this.pendingClip=p},beginText:function CanvasGraphics_beginText(){this.current.textMatrix=o.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},endText:function CanvasGraphics_endText(){var t=this.pendingTextPaths,r=this.ctx;if(void 0!==t){r.save(),r.beginPath();for(var a=0;a<t.length;a++){var o=t[a];r.setTransform.apply(r,o.transform),r.translate(o.x,o.y),o.addToPath(r,o.fontSize)}r.restore(),r.clip(),r.beginPath(),delete this.pendingTextPaths}else r.beginPath()},setCharSpacing:function CanvasGraphics_setCharSpacing(t){this.current.charSpacing=t},setWordSpacing:function CanvasGraphics_setWordSpacing(t){this.current.wordSpacing=t},setHScale:function CanvasGraphics_setHScale(t){this.current.textHScale=t/100},setLeading:function CanvasGraphics_setLeading(t){this.current.leading=-t},setFont:function CanvasGraphics_setFont(t,r){var a=this.commonObjs.get(t),i=this.current;if(!a)throw new Error("Can't find font for ".concat(t));if(i.fontMatrix=a.fontMatrix?a.fontMatrix:o.FONT_IDENTITY_MATRIX,0!==i.fontMatrix[0]&&0!==i.fontMatrix[3]||(0,o.warn)("Invalid font matrix for font "+t),r<0?(r=-r,i.fontDirection=-1):i.fontDirection=1,this.current.font=a,this.current.fontSize=r,!a.isType3Font){var l=a.loadedName||"sans-serif",u="normal";a.black?u="900":a.bold&&(u="bold");var c=a.italic?"italic":"normal",d='"'.concat(l,'", ').concat(a.fallbackName),h=r;r<16?h=16:r>100&&(h=100),this.current.fontSizeScale=r/h,this.ctx.font="".concat(c," ").concat(u," ").concat(h,"px ").concat(d)}},setTextRenderingMode:function CanvasGraphics_setTextRenderingMode(t){this.current.textRenderingMode=t},setTextRise:function CanvasGraphics_setTextRise(t){this.current.textRise=t},moveText:function CanvasGraphics_moveText(t,r){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=r},setLeadingMoveText:function CanvasGraphics_setLeadingMoveText(t,r){this.setLeading(-r),this.moveText(t,r)},setTextMatrix:function CanvasGraphics_setTextMatrix(t,r,a,o,i,l){this.current.textMatrix=[t,r,a,o,i,l],this.current.textMatrixScale=Math.sqrt(t*t+r*r),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},nextLine:function CanvasGraphics_nextLine(){this.moveText(0,this.current.leading)},paintChar:function paintChar(t,r,a,i){var l,u=this.ctx,c=this.current,d=c.font,h=c.textRenderingMode,p=c.fontSize/c.fontSizeScale,m=h&o.TextRenderingMode.FILL_STROKE_MASK,v=!!(h&o.TextRenderingMode.ADD_TO_PATH_FLAG),g=c.patternFill&&!d.missingFile;((d.disableFontFace||v||g)&&(l=d.getPathGenerator(this.commonObjs,t)),d.disableFontFace||g?(u.save(),u.translate(r,a),u.beginPath(),l(u,p),i&&u.setTransform.apply(u,i),m!==o.TextRenderingMode.FILL&&m!==o.TextRenderingMode.FILL_STROKE||u.fill(),m!==o.TextRenderingMode.STROKE&&m!==o.TextRenderingMode.FILL_STROKE||u.stroke(),u.restore()):(m!==o.TextRenderingMode.FILL&&m!==o.TextRenderingMode.FILL_STROKE||u.fillText(t,r,a),m!==o.TextRenderingMode.STROKE&&m!==o.TextRenderingMode.FILL_STROKE||u.strokeText(t,r,a)),v)&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:u.mozCurrentTransform,x:r,y:a,fontSize:p,addToPath:l})},get isFontSubpixelAAEnabled(){var t=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10).context;t.scale(1.5,1),t.fillText("I",0,10);for(var r=t.getImageData(0,0,10,10).data,a=!1,i=3;i<r.length;i+=4)if(r[i]>0&&r[i]<255){a=!0;break}return(0,o.shadow)(this,"isFontSubpixelAAEnabled",a)},showText:function CanvasGraphics_showText(t){var r=this.current,a=r.font;if(a.isType3Font)return this.showType3Text(t);var i=r.fontSize;if(0!==i){var l,c=this.ctx,d=r.fontSizeScale,h=r.charSpacing,p=r.wordSpacing,m=r.fontDirection,v=r.textHScale*m,g=t.length,y=a.vertical,b=y?1:-1,_=a.defaultVMetrics,S=i*r.fontMatrix[0],A=r.textRenderingMode===o.TextRenderingMode.FILL&&!a.disableFontFace&&!r.patternFill;if(c.save(),r.patternFill){c.save();var C=r.fillColor.getPattern(c,this);l=c.mozCurrentTransform,c.restore(),c.fillStyle=C}c.transform.apply(c,r.textMatrix),c.translate(r.x,r.y+r.textRise),m>0?c.scale(v,-1):c.scale(v,1);var R=r.lineWidth,k=r.textMatrixScale;if(0===k||0===R){var P=r.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;P!==o.TextRenderingMode.STROKE&&P!==o.TextRenderingMode.FILL_STROKE||(this._cachedGetSinglePixelWidth=null,R=this.getSinglePixelWidth()*u)}else R/=k;1!==d&&(c.scale(d,d),R/=d),c.lineWidth=R;var w,x=0;for(w=0;w<g;++w){var T=t[w];if((0,o.isNum)(T))x+=b*T*i/1e3;else{var E,O,I,D,L,W,M,j=!1,N=(T.isSpace?p:0)+h,B=T.fontChar,q=T.accent,G=T.width;if(y)L=T.vmetric||_,W=-(W=T.vmetric?L[1]:.5*G)*S,M=L[2]*S,G=L?-L[0]:G,E=W/d,O=(x+M)/d;else E=x/d,O=0;if(a.remeasure&&G>0){var U=1e3*c.measureText(B).width/i*d;if(G<U&&this.isFontSubpixelAAEnabled){var z=G/U;j=!0,c.save(),c.scale(z,1),E/=z}else G!==U&&(E+=(G-U)/2e3*i/d)}(T.isInFont||a.missingFile)&&(A&&!q?c.fillText(B,E,O):(this.paintChar(B,E,O,l),q&&(I=E+q.offset.x/d,D=O-q.offset.y/d,this.paintChar(q.fontChar,I,D,l)))),x+=y?G*S-N*m:G*S+N*m,j&&c.restore()}}y?r.y-=x:r.x+=x*v,c.restore()}},showType3Text:function CanvasGraphics_showType3Text(t){var r,a,i,l,u=this.ctx,c=this.current,d=c.font,h=c.fontSize,p=c.fontDirection,m=d.vertical?1:-1,v=c.charSpacing,g=c.wordSpacing,y=c.textHScale*p,b=c.fontMatrix||o.FONT_IDENTITY_MATRIX,_=t.length;if(!(c.textRenderingMode===o.TextRenderingMode.INVISIBLE)&&0!==h){for(this._cachedGetSinglePixelWidth=null,u.save(),u.transform.apply(u,c.textMatrix),u.translate(c.x,c.y),u.scale(y,p),r=0;r<_;++r)if(a=t[r],(0,o.isNum)(a))l=m*a*h/1e3,this.ctx.translate(l,0),c.x+=l*y;else{var S=(a.isSpace?g:0)+v,A=d.charProcOperatorList[a.operatorListId];if(A)this.processingType3=a,this.save(),u.scale(h,h),u.transform.apply(u,b),this.executeOperatorList(A),this.restore(),i=o.Util.applyTransform([a.width,0],b)[0]*h+S,u.translate(i,0),c.x+=i*y;else(0,o.warn)('Type3 character "'.concat(a.operatorListId,'" is not available.'))}u.restore(),this.processingType3=null}},setCharWidth:function CanvasGraphics_setCharWidth(t,r){},setCharWidthAndBounds:function CanvasGraphics_setCharWidthAndBounds(t,r,a,o,i,l){this.ctx.rect(a,o,i-a,l-o),this.clip(),this.endPath()},getColorN_Pattern:function CanvasGraphics_getColorN_Pattern(t){var r,a=this;if("TilingPattern"===t[0]){var o=t[1],l=this.baseTransform||this.ctx.mozCurrentTransform.slice(),u={createCanvasGraphics:function createCanvasGraphics(t){return new CanvasGraphics(t,a.commonObjs,a.objs,a.canvasFactory,a.webGLContext)}};r=new i.TilingPattern(t,o,this.ctx,u,l)}else r=(0,i.getShadingPatternFromIR)(t);return r},setStrokeColorN:function CanvasGraphics_setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)},setFillColorN:function CanvasGraphics_setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0},setStrokeRGBColor:function CanvasGraphics_setStrokeRGBColor(t,r,a){var i=o.Util.makeCssRgb(t,r,a);this.ctx.strokeStyle=i,this.current.strokeColor=i},setFillRGBColor:function CanvasGraphics_setFillRGBColor(t,r,a){var i=o.Util.makeCssRgb(t,r,a);this.ctx.fillStyle=i,this.current.fillColor=i,this.current.patternFill=!1},shadingFill:function CanvasGraphics_shadingFill(t){var r=this.ctx;this.save();var a=(0,i.getShadingPatternFromIR)(t);r.fillStyle=a.getPattern(r,this,!0);var l=r.mozCurrentTransformInverse;if(l){var u=r.canvas,c=u.width,d=u.height,h=o.Util.applyTransform([0,0],l),p=o.Util.applyTransform([0,d],l),m=o.Util.applyTransform([c,0],l),v=o.Util.applyTransform([c,d],l),g=Math.min(h[0],p[0],m[0],v[0]),y=Math.min(h[1],p[1],m[1],v[1]),b=Math.max(h[0],p[0],m[0],v[0]),_=Math.max(h[1],p[1],m[1],v[1]);this.ctx.fillRect(g,y,b-g,_-y)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.restore()},beginInlineImage:function CanvasGraphics_beginInlineImage(){(0,o.unreachable)("Should not call beginInlineImage")},beginImageData:function CanvasGraphics_beginImageData(){(0,o.unreachable)("Should not call beginImageData")},paintFormXObjectBegin:function CanvasGraphics_paintFormXObjectBegin(t,r){if(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(t)&&6===t.length&&this.transform.apply(this,t),this.baseTransform=this.ctx.mozCurrentTransform,r){var a=r[2]-r[0],o=r[3]-r[1];this.ctx.rect(r[0],r[1],a,o),this.clip(),this.endPath()}},paintFormXObjectEnd:function CanvasGraphics_paintFormXObjectEnd(){this.restore(),this.baseTransform=this.baseTransformStack.pop()},beginGroup:function CanvasGraphics_beginGroup(t){this.save();var r=this.ctx;t.isolated||(0,o.info)("TODO: Support non-isolated groups."),t.knockout&&(0,o.warn)("Knockout groups not supported.");var a=r.mozCurrentTransform;if(t.matrix&&r.transform.apply(r,t.matrix),!t.bbox)throw new Error("Bounding box is required.");var i=o.Util.getAxialAlignedBoundingBox(t.bbox,r.mozCurrentTransform),u=[0,0,r.canvas.width,r.canvas.height];i=o.Util.intersect(i,u)||[0,0,0,0];var c=Math.floor(i[0]),d=Math.floor(i[1]),h=Math.max(Math.ceil(i[2])-c,1),p=Math.max(Math.ceil(i[3])-d,1),m=1,v=1;h>l&&(m=h/l,h=l),p>l&&(v=p/l,p=l);var g="groupAt"+this.groupLevel;t.smask&&(g+="_smask_"+this.smaskCounter++%2);var y=this.cachedCanvases.getCanvas(g,h,p,!0),b=y.context;b.scale(1/m,1/v),b.translate(-c,-d),b.transform.apply(b,a),t.smask?this.smaskStack.push({canvas:y.canvas,context:b,offsetX:c,offsetY:d,scaleX:m,scaleY:v,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(r.setTransform(1,0,0,1,0,0),r.translate(c,d),r.scale(m,v)),copyCtxState(r,b),this.ctx=b,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(r),this.groupLevel++,this.current.activeSMask=null},endGroup:function CanvasGraphics_endGroup(t){this.groupLevel--;var r=this.ctx;this.ctx=this.groupStack.pop(),void 0!==this.ctx.imageSmoothingEnabled?this.ctx.imageSmoothingEnabled=!1:this.ctx.mozImageSmoothingEnabled=!1,t.smask?this.tempSMask=this.smaskStack.pop():this.ctx.drawImage(r.canvas,0,0),this.restore()},beginAnnotations:function CanvasGraphics_beginAnnotations(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)},endAnnotations:function CanvasGraphics_endAnnotations(){this.restore()},beginAnnotation:function CanvasGraphics_beginAnnotation(t,r,a){if(this.save(),resetCtxToDefault(this.ctx),this.current=new h,Array.isArray(t)&&4===t.length){var o=t[2]-t[0],i=t[3]-t[1];this.ctx.rect(t[0],t[1],o,i),this.clip(),this.endPath()}this.transform.apply(this,r),this.transform.apply(this,a)},endAnnotation:function CanvasGraphics_endAnnotation(){this.restore()},paintImageMaskXObject:function CanvasGraphics_paintImageMaskXObject(t){var r=this.ctx,a=t.width,o=t.height,i=this.current.fillColor,l=this.current.patternFill,u=this.processingType3;if(u&&void 0===u.compiled&&(u.compiled=a<=1e3&&o<=1e3?function compileType3Glyph(t){var r,a,o,i,l=t.width,u=t.height,c=l+1,d=new Uint8Array(c*(u+1)),h=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),p=l+7&-8,m=t.data,v=new Uint8Array(p*u),g=0;for(r=0,i=m.length;r<i;r++)for(var y=128,b=m[r];y>0;)v[g++]=b&y?0:255,y>>=1;var _=0;for(0!==v[g=0]&&(d[0]=1,++_),a=1;a<l;a++)v[g]!==v[g+1]&&(d[a]=v[g]?2:1,++_),g++;for(0!==v[g]&&(d[a]=2,++_),r=1;r<u;r++){o=r*c,v[(g=r*p)-p]!==v[g]&&(d[o]=v[g]?1:8,++_);var S=(v[g]?4:0)+(v[g-p]?8:0);for(a=1;a<l;a++)h[S=(S>>2)+(v[g+1]?4:0)+(v[g-p+1]?8:0)]&&(d[o+a]=h[S],++_),g++;if(v[g-p]!==v[g]&&(d[o+a]=v[g]?2:4,++_),_>1e3)return null}for(o=r*c,0!==v[g=p*(u-1)]&&(d[o]=8,++_),a=1;a<l;a++)v[g]!==v[g+1]&&(d[o+a]=v[g]?4:8,++_),g++;if(0!==v[g]&&(d[o+a]=4,++_),_>1e3)return null;var A=new Int32Array([0,c,-1,0,-c,0,0,0,1]),C=[];for(r=0;_&&r<=u;r++){for(var R=r*c,k=R+l;R<k&&!d[R];)R++;if(R!==k){var P,w=[R%c,r],x=d[R],T=R;do{var E=A[x];do{R+=E}while(!d[R]);5!==(P=d[R])&&10!==P?(x=P,d[R]=0):(x=P&51*x>>4,d[R]&=x>>2|x<<2),w.push(R%c),w.push(R/c|0),d[R]||--_}while(T!==R);C.push(w),--r}}return function drawOutline(t){t.save(),t.scale(1/l,-1/u),t.translate(0,-u),t.beginPath();for(var r=0,a=C.length;r<a;r++){var o=C[r];t.moveTo(o[0],o[1]);for(var i=2,c=o.length;i<c;i+=2)t.lineTo(o[i],o[i+1])}t.fill(),t.beginPath(),t.restore()}}({data:t.data,width:a,height:o}):null),u&&u.compiled)u.compiled(r);else{var c=this.cachedCanvases.getCanvas("maskCanvas",a,o),d=c.context;d.save(),putBinaryImageMask(d,t),d.globalCompositeOperation="source-in",d.fillStyle=l?i.getPattern(d,this):i,d.fillRect(0,0,a,o),d.restore(),this.paintInlineImageXObject(c.canvas)}},paintImageMaskXObjectRepeat:function CanvasGraphics_paintImageMaskXObjectRepeat(t,r,a,o){var i=t.width,l=t.height,u=this.current.fillColor,c=this.current.patternFill,d=this.cachedCanvases.getCanvas("maskCanvas",i,l),h=d.context;h.save(),putBinaryImageMask(h,t),h.globalCompositeOperation="source-in",h.fillStyle=c?u.getPattern(h,this):u,h.fillRect(0,0,i,l),h.restore();for(var p=this.ctx,m=0,v=o.length;m<v;m+=2)p.save(),p.transform(r,0,0,a,o[m],o[m+1]),p.scale(1,-1),p.drawImage(d.canvas,0,0,i,l,0,-1,1,1),p.restore()},paintImageMaskXObjectGroup:function CanvasGraphics_paintImageMaskXObjectGroup(t){for(var r=this.ctx,a=this.current.fillColor,o=this.current.patternFill,i=0,l=t.length;i<l;i++){var u=t[i],c=u.width,d=u.height,h=this.cachedCanvases.getCanvas("maskCanvas",c,d),p=h.context;p.save(),putBinaryImageMask(p,u),p.globalCompositeOperation="source-in",p.fillStyle=o?a.getPattern(p,this):a,p.fillRect(0,0,c,d),p.restore(),r.save(),r.transform.apply(r,u.transform),r.scale(1,-1),r.drawImage(h.canvas,0,0,c,d,0,-1,1,1),r.restore()}},paintImageXObject:function CanvasGraphics_paintImageXObject(t){var r=t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t);r?this.paintInlineImageXObject(r):(0,o.warn)("Dependent image isn't ready yet")},paintImageXObjectRepeat:function CanvasGraphics_paintImageXObjectRepeat(t,r,a,i){var l=t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t);if(l){for(var u=l.width,c=l.height,d=[],h=0,p=i.length;h<p;h+=2)d.push({transform:[r,0,0,a,i[h],i[h+1]],x:0,y:0,w:u,h:c});this.paintInlineImageXObjectGroup(l,d)}else(0,o.warn)("Dependent image isn't ready yet")},paintInlineImageXObject:function CanvasGraphics_paintInlineImageXObject(t){var r=t.width,a=t.height,o=this.ctx;this.save(),o.scale(1/r,-1/a);var i,l,u=o.mozCurrentTransformInverse,c=u[0],d=u[1],h=Math.max(Math.sqrt(c*c+d*d),1),p=u[2],m=u[3],v=Math.max(Math.sqrt(p*p+m*m),1);if("function"==typeof HTMLElement&&t instanceof HTMLElement||!t.data)i=t;else{var g=(l=this.cachedCanvases.getCanvas("inlineImage",r,a)).context;putBinaryImageData(g,t),i=l.canvas}for(var y=r,b=a,_="prescale1";h>2&&y>1||v>2&&b>1;){var S=y,A=b;h>2&&y>1&&(h/=y/(S=Math.ceil(y/2))),v>2&&b>1&&(v/=b/(A=Math.ceil(b/2))),(g=(l=this.cachedCanvases.getCanvas(_,S,A)).context).clearRect(0,0,S,A),g.drawImage(i,0,0,y,b,0,0,S,A),i=l.canvas,y=S,b=A,_="prescale1"===_?"prescale2":"prescale1"}if(o.drawImage(i,0,0,y,b,0,-a,r,a),this.imageLayer){var C=this.getCanvasPosition(0,-a);this.imageLayer.appendImage({imgData:t,left:C[0],top:C[1],width:r/u[0],height:a/u[3]})}this.restore()},paintInlineImageXObjectGroup:function CanvasGraphics_paintInlineImageXObjectGroup(t,r){var a=this.ctx,o=t.width,i=t.height,l=this.cachedCanvases.getCanvas("inlineImage",o,i);putBinaryImageData(l.context,t);for(var u=0,c=r.length;u<c;u++){var d=r[u];if(a.save(),a.transform.apply(a,d.transform),a.scale(1,-1),a.drawImage(l.canvas,d.x,d.y,d.w,d.h,0,-1,1,1),this.imageLayer){var h=this.getCanvasPosition(d.x,d.y);this.imageLayer.appendImage({imgData:t,left:h[0],top:h[1],width:o,height:i})}a.restore()}},paintSolidColorImageMask:function CanvasGraphics_paintSolidColorImageMask(){this.ctx.fillRect(0,0,1,1)},paintXObject:function CanvasGraphics_paintXObject(){(0,o.warn)("Unsupported 'paintXObject' command.")},markPoint:function CanvasGraphics_markPoint(t){},markPointProps:function CanvasGraphics_markPointProps(t,r){},beginMarkedContent:function CanvasGraphics_beginMarkedContent(t){},beginMarkedContentProps:function CanvasGraphics_beginMarkedContentProps(t,r){},endMarkedContent:function CanvasGraphics_endMarkedContent(){},beginCompat:function CanvasGraphics_beginCompat(){},endCompat:function CanvasGraphics_endCompat(){},consumePath:function CanvasGraphics_consumePath(){var t=this.ctx;this.pendingClip&&(this.pendingClip===p?t.clip("evenodd"):t.clip(),this.pendingClip=null),t.beginPath()},getSinglePixelWidth:function getSinglePixelWidth(t){if(null===this._cachedGetSinglePixelWidth){var r=this.ctx.mozCurrentTransformInverse;this._cachedGetSinglePixelWidth=Math.sqrt(Math.max(r[0]*r[0]+r[1]*r[1],r[2]*r[2]+r[3]*r[3]))}return this._cachedGetSinglePixelWidth},getCanvasPosition:function CanvasGraphics_getCanvasPosition(t,r){var a=this.ctx.mozCurrentTransform;return[a[0]*t+a[2]*r+a[4],a[1]*t+a[3]*r+a[5]]}},o.OPS)CanvasGraphics.prototype[o.OPS[m]]=CanvasGraphics.prototype[m];return CanvasGraphics}();r.CanvasGraphics=p},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getShadingPatternFromIR=function getShadingPatternFromIR(t){var r=i[t[0]];if(!r)throw new Error("Unknown IR type: ".concat(t[0]));return r.fromIR(t)},r.TilingPattern=void 0;var o=a(5),i={};function applyBoundingBox(t,r){if(r&&"undefined"!=typeof Path2D){var a=r[2]-r[0],o=r[3]-r[1],i=new Path2D;i.rect(r[0],r[1],a,o),t.clip(i)}}i.RadialAxial={fromIR:function RadialAxial_fromIR(t){var r=t[1],a=t[2],o=t[3],i=t[4],l=t[5],u=t[6],c=t[7];return{type:"Pattern",getPattern:function RadialAxial_getPattern(t){var d;applyBoundingBox(t,a),"axial"===r?d=t.createLinearGradient(i[0],i[1],l[0],l[1]):"radial"===r&&(d=t.createRadialGradient(i[0],i[1],u,l[0],l[1],c));for(var h=0,p=o.length;h<p;++h){var m=o[h];d.addColorStop(m[0],m[1])}return d}}}};var l=function createMeshCanvasClosure(){function drawTriangle(t,r,a,o,i,l,u,c){var d,h=r.coords,p=r.colors,m=t.data,v=4*t.width;h[a+1]>h[o+1]&&(d=a,a=o,o=d,d=l,l=u,u=d),h[o+1]>h[i+1]&&(d=o,o=i,i=d,d=u,u=c,c=d),h[a+1]>h[o+1]&&(d=a,a=o,o=d,d=l,l=u,u=d);var g=(h[a]+r.offsetX)*r.scaleX,y=(h[a+1]+r.offsetY)*r.scaleY,b=(h[o]+r.offsetX)*r.scaleX,_=(h[o+1]+r.offsetY)*r.scaleY,S=(h[i]+r.offsetX)*r.scaleX,A=(h[i+1]+r.offsetY)*r.scaleY;if(!(y>=A))for(var C,R,k,P,w,x,T,E,O=p[l],I=p[l+1],D=p[l+2],L=p[u],W=p[u+1],M=p[u+2],j=p[c],N=p[c+1],B=p[c+2],q=Math.round(y),G=Math.round(A),U=q;U<=G;U++){if(U<_){var z=void 0;C=g-(g-b)*(z=U<y?0:y===_?1:(y-U)/(y-_)),R=O-(O-L)*z,k=I-(I-W)*z,P=D-(D-M)*z}else{var H=void 0;C=b-(b-S)*(H=U>A?1:_===A?0:(_-U)/(_-A)),R=L-(L-j)*H,k=W-(W-N)*H,P=M-(M-B)*H}var Y=void 0;w=g-(g-S)*(Y=U<y?0:U>A?1:(y-U)/(y-A)),x=O-(O-j)*Y,T=I-(I-N)*Y,E=D-(D-B)*Y;for(var X=Math.round(Math.min(C,w)),V=Math.round(Math.max(C,w)),Q=v*U+4*X,K=X;K<=V;K++)(Y=(C-K)/(C-w))<0?Y=0:Y>1&&(Y=1),m[Q++]=R-(R-x)*Y|0,m[Q++]=k-(k-T)*Y|0,m[Q++]=P-(P-E)*Y|0,m[Q++]=255}}function drawFigure(t,r,a){var o,i,l=r.coords,u=r.colors;switch(r.type){case"lattice":var c=r.verticesPerRow,d=Math.floor(l.length/c)-1,h=c-1;for(o=0;o<d;o++)for(var p=o*c,m=0;m<h;m++,p++)drawTriangle(t,a,l[p],l[p+1],l[p+c],u[p],u[p+1],u[p+c]),drawTriangle(t,a,l[p+c+1],l[p+1],l[p+c],u[p+c+1],u[p+1],u[p+c]);break;case"triangles":for(o=0,i=l.length;o<i;o+=3)drawTriangle(t,a,l[o],l[o+1],l[o+2],u[o],u[o+1],u[o+2]);break;default:throw new Error("illegal figure")}}return function createMeshCanvas(t,r,a,o,i,l,u,c){var d,h,p,m,v=Math.floor(t[0]),g=Math.floor(t[1]),y=Math.ceil(t[2])-v,b=Math.ceil(t[3])-g,_=Math.min(Math.ceil(Math.abs(y*r[0]*1.1)),3e3),S=Math.min(Math.ceil(Math.abs(b*r[1]*1.1)),3e3),A=y/_,C=b/S,R={coords:a,colors:o,offsetX:-v,offsetY:-g,scaleX:1/A,scaleY:1/C},k=_+4,P=S+4;if(c.isEnabled)d=c.drawFigures({width:_,height:S,backgroundColor:l,figures:i,context:R}),(h=u.getCanvas("mesh",k,P,!1)).context.drawImage(d,2,2),d=h.canvas;else{var w=(h=u.getCanvas("mesh",k,P,!1)).context,x=w.createImageData(_,S);if(l){var T=x.data;for(p=0,m=T.length;p<m;p+=4)T[p]=l[0],T[p+1]=l[1],T[p+2]=l[2],T[p+3]=255}for(p=0;p<i.length;p++)drawFigure(x,i[p],R);w.putImageData(x,2,2),d=h.canvas}return{canvas:d,offsetX:v-2*A,offsetY:g-2*C,scaleX:A,scaleY:C}}}();i.Mesh={fromIR:function Mesh_fromIR(t){var r=t[2],a=t[3],i=t[4],u=t[5],c=t[6],d=t[7],h=t[8];return{type:"Pattern",getPattern:function Mesh_getPattern(t,p,m){var v;if(applyBoundingBox(t,d),m)v=o.Util.singularValueDecompose2dScale(t.mozCurrentTransform);else if(v=o.Util.singularValueDecompose2dScale(p.baseTransform),c){var g=o.Util.singularValueDecompose2dScale(c);v=[v[0]*g[0],v[1]*g[1]]}var y=l(u,v,r,a,i,m?null:h,p.cachedCanvases,p.webGLContext);return m||(t.setTransform.apply(t,p.baseTransform),c&&t.transform.apply(t,c)),t.translate(y.offsetX,y.offsetY),t.scale(y.scaleX,y.scaleY),t.createPattern(y.canvas,"no-repeat")}}}},i.Dummy={fromIR:function Dummy_fromIR(){return{type:"Pattern",getPattern:function Dummy_fromIR_getPattern(){return"hotpink"}}}};var u=function TilingPatternClosure(){var t=1,r=2;function TilingPattern(t,r,a,o,i){this.operatorList=t[2],this.matrix=t[3]||[1,0,0,1,0,0],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=r,this.canvasGraphicsFactory=o,this.baseTransform=i,this.type="Pattern",this.ctx=a}return TilingPattern.prototype={createPatternCanvas:function TilinPattern_createPatternCanvas(t){var r=this.operatorList,a=this.bbox,i=this.xstep,l=this.ystep,u=this.paintType,c=this.tilingType,d=this.color,h=this.canvasGraphicsFactory;(0,o.info)("TilingType: "+c);var p=a[0],m=a[1],v=a[2],g=a[3],y=o.Util.singularValueDecompose2dScale(this.matrix),b=o.Util.singularValueDecompose2dScale(this.baseTransform),_=[y[0]*b[0],y[1]*b[1]],S=this.getSizeAndScale(i,this.ctx.canvas.width,_[0]),A=this.getSizeAndScale(l,this.ctx.canvas.height,_[1]),C=t.cachedCanvases.getCanvas("pattern",S.size,A.size,!0),R=C.context,k=h.createCanvasGraphics(R);return k.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(k,u,d),k.transform(S.scale,0,0,A.scale,0,0),k.transform(1,0,0,1,-p,-m),this.clipBbox(k,a,p,m,v,g),k.executeOperatorList(r),this.ctx.transform(1,0,0,1,p,m),this.ctx.scale(1/S.scale,1/A.scale),C.canvas},getSizeAndScale:function TilingPattern_getSizeAndScale(t,r,a){t=Math.abs(t);var o=Math.max(3e3,r),i=Math.ceil(t*a);return i>=o?i=o:a=i/t,{scale:a,size:i}},clipBbox:function clipBbox(t,r,a,o,i,l){if(Array.isArray(r)&&4===r.length){var u=i-a,c=l-o;t.ctx.rect(a,o,u,c),t.clip(),t.endPath()}},setFillAndStrokeStyleToContext:function setFillAndStrokeStyleToContext(a,i,l){var u=a.ctx,c=a.current;switch(i){case t:var d=this.ctx;u.fillStyle=d.fillStyle,u.strokeStyle=d.strokeStyle,c.fillColor=d.fillStyle,c.strokeColor=d.strokeStyle;break;case r:var h=o.Util.makeCssRgb(l[0],l[1],l[2]);u.fillStyle=h,u.strokeStyle=h,c.fillColor=h,c.strokeColor=h;break;default:throw new o.FormatError("Unsupported paint type: ".concat(i))}},getPattern:function TilingPattern_getPattern(t,r){(t=this.ctx).setTransform.apply(t,this.baseTransform),t.transform.apply(t,this.matrix);var a=this.createPatternCanvas(r);return t.createPattern(a,"repeat")}},TilingPattern}();r.TilingPattern=u},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.GlobalWorkerOptions=void 0;var o=Object.create(null);r.GlobalWorkerOptions=o,o.workerPort=void 0===o.workerPort?null:o.workerPort,o.workerSrc=void 0===o.workerSrc?"":o.workerSrc},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MessageHandler=void 0;var o=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(2)),i=a(5);function asyncGeneratorStep(t,r,a,o,i,l,u){try{var c=t[l](u),d=c.value}catch(t){return void a(t)}c.done?r(d):Promise.resolve(d).then(o,i)}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var o=r[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var l=1,u=2,c=1,d=2,h=3,p=4,m=5,v=6,g=7,y=8;function wrapReason(t){if("object"!==_typeof(t)||null===t)return t;switch(t.name){case"AbortException":return new i.AbortException(t.message);case"MissingPDFException":return new i.MissingPDFException(t.message);case"UnexpectedResponseException":return new i.UnexpectedResponseException(t.message,t.status);case"UnknownErrorException":return new i.UnknownErrorException(t.message,t.details);default:return new i.UnknownErrorException(t.message,t.toString())}}var b=function(){function MessageHandler(t,r,a){var o=this;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,MessageHandler),this.sourceName=t,this.targetName=r,this.comObj=a,this.callbackId=1,this.streamId=1,this.postMessageTransfers=!0,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=function(t){var r=t.data;if(r.targetName===o.sourceName)if(r.stream)o._processStreamMessage(r);else if(r.callback){var i=r.callbackId,c=o.callbackCapabilities[i];if(!c)throw new Error("Cannot resolve callback ".concat(i));if(delete o.callbackCapabilities[i],r.callback===l)c.resolve(r.data);else{if(r.callback!==u)throw new Error("Unexpected callback case");c.reject(wrapReason(r.reason))}}else{var d=o.actionHandler[r.action];if(!d)throw new Error("Unknown action from worker: ".concat(r.action));if(r.callbackId){var h=o.sourceName,p=r.sourceName;new Promise((function(t){t(d(r.data))})).then((function(t){a.postMessage({sourceName:h,targetName:p,callback:l,callbackId:r.callbackId,data:t})}),(function(t){a.postMessage({sourceName:h,targetName:p,callback:u,callbackId:r.callbackId,reason:wrapReason(t)})}))}else r.streamId?o._createStreamSink(r):d(r.data)}},a.addEventListener("message",this._onComObjOnMessage)}var t;return function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}(MessageHandler,[{key:"on",value:function on(t,r){var a=this.actionHandler;if(a[t])throw new Error('There is already an actionName called "'.concat(t,'"'));a[t]=r}},{key:"send",value:function send(t,r,a){this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:r},a)}},{key:"sendWithPromise",value:function sendWithPromise(t,r,a){var o=this.callbackId++,l=(0,i.createPromiseCapability)();this.callbackCapabilities[o]=l;try{this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:o,data:r},a)}catch(t){l.reject(t)}return l.promise}},{key:"sendWithStream",value:function sendWithStream(t,r,a,o){var l=this,u=this.streamId++,d=this.sourceName,h=this.targetName,p=this.comObj;return new ReadableStream({start:function start(a){var c=(0,i.createPromiseCapability)();return l.streamControllers[u]={controller:a,startCall:c,pullCall:null,cancelCall:null,isClosed:!1},l._postMessage({sourceName:d,targetName:h,action:t,streamId:u,data:r,desiredSize:a.desiredSize},o),c.promise},pull:function pull(t){var r=(0,i.createPromiseCapability)();return l.streamControllers[u].pullCall=r,p.postMessage({sourceName:d,targetName:h,stream:v,streamId:u,desiredSize:t.desiredSize}),r.promise},cancel:function cancel(t){(0,i.assert)(t instanceof Error,"cancel must have a valid reason");var r=(0,i.createPromiseCapability)();return l.streamControllers[u].cancelCall=r,l.streamControllers[u].isClosed=!0,p.postMessage({sourceName:d,targetName:h,stream:c,streamId:u,reason:wrapReason(t)}),r.promise}},a)}},{key:"_createStreamSink",value:function _createStreamSink(t){var r=this,a=this.actionHandler[t.action],o=t.streamId,l=this.sourceName,u=t.sourceName,c=this.comObj,d={enqueue:function enqueue(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,c=arguments.length>2?arguments[2]:void 0;if(!this.isCancelled){var d=this.desiredSize;this.desiredSize-=a,d>0&&this.desiredSize<=0&&(this.sinkCapability=(0,i.createPromiseCapability)(),this.ready=this.sinkCapability.promise),r._postMessage({sourceName:l,targetName:u,stream:p,streamId:o,chunk:t},c)}},close:function close(){this.isCancelled||(this.isCancelled=!0,c.postMessage({sourceName:l,targetName:u,stream:h,streamId:o}),delete r.streamSinks[o])},error:function error(t){(0,i.assert)(t instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,c.postMessage({sourceName:l,targetName:u,stream:m,streamId:o,reason:wrapReason(t)}))},sinkCapability:(0,i.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[o]=d,new Promise((function(r){r(a(t.data,d))})).then((function(){c.postMessage({sourceName:l,targetName:u,stream:y,streamId:o,success:!0})}),(function(t){c.postMessage({sourceName:l,targetName:u,stream:y,streamId:o,reason:wrapReason(t)})}))}},{key:"_processStreamMessage",value:function _processStreamMessage(t){var r=t.streamId,a=this.sourceName,o=t.sourceName,l=this.comObj;switch(t.stream){case y:t.success?this.streamControllers[r].startCall.resolve():this.streamControllers[r].startCall.reject(wrapReason(t.reason));break;case g:t.success?this.streamControllers[r].pullCall.resolve():this.streamControllers[r].pullCall.reject(wrapReason(t.reason));break;case v:if(!this.streamSinks[r]){l.postMessage({sourceName:a,targetName:o,stream:g,streamId:r,success:!0});break}this.streamSinks[r].desiredSize<=0&&t.desiredSize>0&&this.streamSinks[r].sinkCapability.resolve(),this.streamSinks[r].desiredSize=t.desiredSize;var u=this.streamSinks[t.streamId].onPull;new Promise((function(t){t(u&&u())})).then((function(){l.postMessage({sourceName:a,targetName:o,stream:g,streamId:r,success:!0})}),(function(t){l.postMessage({sourceName:a,targetName:o,stream:g,streamId:r,reason:wrapReason(t)})}));break;case p:if((0,i.assert)(this.streamControllers[r],"enqueue should have stream controller"),this.streamControllers[r].isClosed)break;this.streamControllers[r].controller.enqueue(t.chunk);break;case h:if((0,i.assert)(this.streamControllers[r],"close should have stream controller"),this.streamControllers[r].isClosed)break;this.streamControllers[r].isClosed=!0,this.streamControllers[r].controller.close(),this._deleteStreamController(r);break;case m:(0,i.assert)(this.streamControllers[r],"error should have stream controller"),this.streamControllers[r].controller.error(wrapReason(t.reason)),this._deleteStreamController(r);break;case d:t.success?this.streamControllers[r].cancelCall.resolve():this.streamControllers[r].cancelCall.reject(wrapReason(t.reason)),this._deleteStreamController(r);break;case c:if(!this.streamSinks[r])break;var b=this.streamSinks[t.streamId].onCancel;new Promise((function(r){r(b&&b(wrapReason(t.reason)))})).then((function(){l.postMessage({sourceName:a,targetName:o,stream:d,streamId:r,success:!0})}),(function(t){l.postMessage({sourceName:a,targetName:o,stream:d,streamId:r,reason:wrapReason(t)})})),this.streamSinks[r].sinkCapability.reject(wrapReason(t.reason)),this.streamSinks[r].isCancelled=!0,delete this.streamSinks[r];break;default:throw new Error("Unexpected stream case")}}},{key:"_deleteStreamController",value:(t=function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(o,i){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,o,i,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,o,i,_next,_throw,"throw",t)}_next(void 0)}))}}(o.default.mark((function _callee(t){return o.default.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Promise.allSettled([this.streamControllers[t].startCall,this.streamControllers[t].pullCall,this.streamControllers[t].cancelCall].map((function(t){return t&&t.promise})));case 2:delete this.streamControllers[t];case 3:case"end":return r.stop()}}),_callee,this)}))),function _deleteStreamController(r){return t.apply(this,arguments)})},{key:"_postMessage",value:function _postMessage(t,r){r&&this.postMessageTransfers?this.comObj.postMessage(t,r):this.comObj.postMessage(t)}},{key:"destroy",value:function destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}]),MessageHandler}();r.MessageHandler=b},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Metadata=void 0;var o=a(5),i=a(206);function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var a=[],o=!0,i=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(o=(u=c.next()).done)&&(a.push(u.value),!r||a.length!==r);o=!0);}catch(t){i=!0,l=t}finally{try{o||null==c.return||c.return()}finally{if(i)throw l}}return a}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,o=new Array(r);a<r;a++)o[a]=t[a];return o}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var o=r[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var l=function(){function Metadata(t){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Metadata),(0,o.assert)("string"==typeof t,"Metadata: input is not a string"),t=this._repair(t);var r=(new i.SimpleXMLParser).parseFromString(t);this._metadataMap=new Map,r&&this._parse(r)}return function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}(Metadata,[{key:"_repair",value:function _repair(t){return t.replace(/^[^<]+/,"").replace(/>\\376\\377([^<]+)/g,(function(t,r){for(var a=r.replace(/\\([0-3])([0-7])([0-7])/g,(function(t,r,a,o){return String.fromCharCode(64*r+8*a+1*o)})).replace(/&(amp|apos|gt|lt|quot);/g,(function(t,r){switch(r){case"amp":return"&";case"apos":return"'";case"gt":return">";case"lt":return"<";case"quot":return'"'}throw new Error("_repair: ".concat(r," isn't defined."))})),o="",i=0,l=a.length;i<l;i+=2){var u=256*a.charCodeAt(i)+a.charCodeAt(i+1);o+=u>=32&&u<127&&60!==u&&62!==u&&38!==u?String.fromCharCode(u):"&#x"+(65536+u).toString(16).substring(1)+";"}return">"+o}))}},{key:"_parse",value:function _parse(t){var r=t.documentElement;if("rdf:rdf"!==r.nodeName.toLowerCase())for(r=r.firstChild;r&&"rdf:rdf"!==r.nodeName.toLowerCase();)r=r.nextSibling;var a=r?r.nodeName.toLowerCase():null;if(r&&"rdf:rdf"===a&&r.hasChildNodes())for(var o=r.childNodes,i=0,l=o.length;i<l;i++){var u=o[i];if("rdf:description"===u.nodeName.toLowerCase())for(var c=0,d=u.childNodes.length;c<d;c++)if("#text"!==u.childNodes[c].nodeName.toLowerCase()){var h=u.childNodes[c],p=h.nodeName.toLowerCase();this._metadataMap.set(p,h.textContent.trim())}}}},{key:"get",value:function get(t){return this._metadataMap.has(t)?this._metadataMap.get(t):null}},{key:"getAll",value:function getAll(){var t,r=Object.create(null),a=function _createForOfIteratorHelper(t,r){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var o=0,i=function F(){};return{s:i,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,c=!1;return{s:function s(){a=t[Symbol.iterator]()},n:function n(){var t=a.next();return u=t.done,t},e:function e(t){c=!0,l=t},f:function f(){try{u||null==a.return||a.return()}finally{if(c)throw l}}}}(this._metadataMap);try{for(a.s();!(t=a.n()).done;){var o=_slicedToArray(t.value,2),i=o[0],l=o[1];r[i]=l}}catch(t){a.e(t)}finally{a.f()}return r}},{key:"has",value:function has(t){return this._metadataMap.has(t)}}]),Metadata}();r.Metadata=l},function(t,r,a){"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var a=[],o=!0,i=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(o=(u=c.next()).done)&&(a.push(u.value),!r||a.length!==r);o=!0);}catch(t){i=!0,l=t}finally{try{o||null==c.return||c.return()}finally{if(i)throw l}}return a}(t,r)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,o=new Array(r);a<r;a++)o[a]=t[a];return o}function _get(t,r,a){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(t,r,a){var o=function _superPropBase(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=_getPrototypeOf(t)););return t}(t,r);if(o){var i=Object.getOwnPropertyDescriptor(o,r);return i.get?i.get.call(a):i.value}})(t,r,a||t)}function _setPrototypeOf(t,r){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t})(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var a,o=_getPrototypeOf(t);if(r){var i=_getPrototypeOf(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var o=r[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}Object.defineProperty(r,"__esModule",{value:!0}),r.SimpleXMLParser=void 0;var o=0,i=-2,l=-3,u=-4,c=-5,d=-6,h=-9;function isWhitespace(t,r){var a=t[r];return" "===a||"\n"===a||"\r"===a||"\t"===a}var p=function(){function XMLParserBase(){_classCallCheck(this,XMLParserBase)}return _createClass(XMLParserBase,[{key:"_resolveEntities",value:function _resolveEntities(t){var r=this;return t.replace(/&([^;]+);/g,(function(t,a){if("#x"===a.substring(0,2))return String.fromCharCode(parseInt(a.substring(2),16));if("#"===a.substring(0,1))return String.fromCharCode(parseInt(a.substring(1),10));switch(a){case"lt":return"<";case"gt":return">";case"amp":return"&";case"quot":return'"'}return r.onResolveEntity(a)}))}},{key:"_parseContent",value:function _parseContent(t,r){var a=[],o=r;function skipWs(){for(;o<t.length&&isWhitespace(t,o);)++o}for(;o<t.length&&!isWhitespace(t,o)&&">"!==t[o]&&"/"!==t[o];)++o;var i=t.substring(r,o);for(skipWs();o<t.length&&">"!==t[o]&&"/"!==t[o]&&"?"!==t[o];){skipWs();for(var l,u="";o<t.length&&!isWhitespace(t,o)&&"="!==t[o];)u+=t[o],++o;if(skipWs(),"="!==t[o])return null;++o,skipWs();var c=t[o];if('"'!==c&&"'"!==c)return null;var d=t.indexOf(c,++o);if(d<0)return null;l=t.substring(o,d),a.push({name:u,value:this._resolveEntities(l)}),o=d+1,skipWs()}return{name:i,attributes:a,parsed:o-r}}},{key:"_parseProcessingInstruction",value:function _parseProcessingInstruction(t,r){var a=r;for(;a<t.length&&!isWhitespace(t,a)&&">"!==t[a]&&"/"!==t[a];)++a;var o=t.substring(r,a);!function skipWs(){for(;a<t.length&&isWhitespace(t,a);)++a}();for(var i=a;a<t.length&&("?"!==t[a]||">"!==t[a+1]);)++a;return{name:o,value:t.substring(i,a),parsed:a-r}}},{key:"parseXml",value:function parseXml(t){for(var r=0;r<t.length;){var a=r;if("<"===t[r]){var o=void 0;switch(t[++a]){case"/":if(++a,(o=t.indexOf(">",a))<0)return void this.onError(h);this.onEndElement(t.substring(a,o)),a=o+1;break;case"?":++a;var p=this._parseProcessingInstruction(t,a);if("?>"!==t.substring(a+p.parsed,a+p.parsed+2))return void this.onError(l);this.onPi(p.name,p.value),a+=p.parsed+2;break;case"!":if("--"===t.substring(a+1,a+3)){if((o=t.indexOf("--\x3e",a+3))<0)return void this.onError(c);this.onComment(t.substring(a+3,o)),a=o+3}else if("[CDATA["===t.substring(a+1,a+8)){if((o=t.indexOf("]]>",a+8))<0)return void this.onError(i);this.onCdata(t.substring(a+8,o)),a=o+3}else{if("DOCTYPE"!==t.substring(a+1,a+8))return void this.onError(d);var m=t.indexOf("[",a+8),v=!1;if((o=t.indexOf(">",a+8))<0)return void this.onError(u);if(m>0&&o>m){if((o=t.indexOf("]>",a+8))<0)return void this.onError(u);v=!0}var g=t.substring(a+8,o+(v?1:0));this.onDoctype(g),a=o+(v?2:1)}break;default:var y=this._parseContent(t,a);if(null===y)return void this.onError(d);var b=!1;if("/>"===t.substring(a+y.parsed,a+y.parsed+2))b=!0;else if(">"!==t.substring(a+y.parsed,a+y.parsed+1))return void this.onError(h);this.onBeginElement(y.name,y.attributes,b),a+=y.parsed+(b?2:1)}}else{for(;a<t.length&&"<"!==t[a];)a++;var _=t.substring(r,a);this.onText(this._resolveEntities(_))}r=a}}},{key:"onResolveEntity",value:function onResolveEntity(t){return"&".concat(t,";")}},{key:"onPi",value:function onPi(t,r){}},{key:"onComment",value:function onComment(t){}},{key:"onCdata",value:function onCdata(t){}},{key:"onDoctype",value:function onDoctype(t){}},{key:"onText",value:function onText(t){}},{key:"onBeginElement",value:function onBeginElement(t,r,a){}},{key:"onEndElement",value:function onEndElement(t){}},{key:"onError",value:function onError(t){}}]),XMLParserBase}(),m=function(){function SimpleDOMNode(t,r){_classCallCheck(this,SimpleDOMNode),this.nodeName=t,this.nodeValue=r,Object.defineProperty(this,"parentNode",{value:null,writable:!0})}return _createClass(SimpleDOMNode,[{key:"hasChildNodes",value:function hasChildNodes(){return this.childNodes&&this.childNodes.length>0}},{key:"firstChild",get:function get(){return this.childNodes&&this.childNodes[0]}},{key:"nextSibling",get:function get(){var t=this.parentNode.childNodes;if(t){var r=t.indexOf(this);if(-1!==r)return t[r+1]}}},{key:"textContent",get:function get(){return this.childNodes?this.childNodes.map((function(t){return t.textContent})).join(""):this.nodeValue||""}}]),SimpleDOMNode}(),v=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}(SimpleXMLParser,t);var r=_createSuper(SimpleXMLParser);function SimpleXMLParser(){var t;return _classCallCheck(this,SimpleXMLParser),(t=r.call(this))._currentFragment=null,t._stack=null,t._errorCode=o,t}return _createClass(SimpleXMLParser,[{key:"parseFromString",value:function parseFromString(t){if(this._currentFragment=[],this._stack=[],this._errorCode=o,this.parseXml(t),this._errorCode===o){var r=_slicedToArray(this._currentFragment,1)[0];if(r)return{documentElement:r}}}},{key:"onResolveEntity",value:function onResolveEntity(t){switch(t){case"apos":return"'"}return _get(_getPrototypeOf(SimpleXMLParser.prototype),"onResolveEntity",this).call(this,t)}},{key:"onText",value:function onText(t){if(!function isWhitespaceString(t){for(var r=0,a=t.length;r<a;r++)if(!isWhitespace(t,r))return!1;return!0}(t)){var r=new m("#text",t);this._currentFragment.push(r)}}},{key:"onCdata",value:function onCdata(t){var r=new m("#text",t);this._currentFragment.push(r)}},{key:"onBeginElement",value:function onBeginElement(t,r,a){var o=new m(t);o.childNodes=[],this._currentFragment.push(o),a||(this._stack.push(this._currentFragment),this._currentFragment=o.childNodes)}},{key:"onEndElement",value:function onEndElement(t){this._currentFragment=this._stack.pop()||[];var r=this._currentFragment[this._currentFragment.length-1];if(r)for(var a=0,o=r.childNodes.length;a<o;a++)r.childNodes[a].parentNode=r}},{key:"onError",value:function onError(t){this._errorCode=t}}]),SimpleXMLParser}(p);r.SimpleXMLParser=v},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PDFDataTransportStream=void 0;var o=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(2)),i=a(5);function asyncGeneratorStep(t,r,a,o,i,l,u){try{var c=t[l](u),d=c.value}catch(t){return void a(t)}c.done?r(d):Promise.resolve(d).then(o,i)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(o,i){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,o,i,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,o,i,_next,_throw,"throw",t)}_next(void 0)}))}}function _createForOfIteratorHelper(t,r){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var o=0,i=function F(){};return{s:i,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,c=!1;return{s:function s(){a=t[Symbol.iterator]()},n:function n(){var t=a.next();return u=t.done,t},e:function e(t){c=!0,l=t},f:function f(){try{u||null==a.return||a.return()}finally{if(c)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,o=new Array(r);a<r;a++)o[a]=t[a];return o}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var o=r[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}var l=function(){function PDFDataTransportStream(t,r){var a=this;_classCallCheck(this,PDFDataTransportStream),(0,i.assert)(r,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=t.progressiveDone||!1;var o=t.initialData;if(o&&o.length>0){var l=new Uint8Array(o).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=r,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._contentLength=t.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((function(t,r){a._onReceiveData({begin:t,chunk:r})})),this._pdfDataRangeTransport.addProgressListener((function(t,r){a._onProgress({loaded:t,total:r})})),this._pdfDataRangeTransport.addProgressiveReadListener((function(t){a._onReceiveData({chunk:t})})),this._pdfDataRangeTransport.addProgressiveDoneListener((function(){a._onProgressiveDone()})),this._pdfDataRangeTransport.transportReady()}return _createClass(PDFDataTransportStream,[{key:"_onReceiveData",value:function _onReceiveData(t){var r=new Uint8Array(t.chunk).buffer;if(void 0===t.begin)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{var a=this._rangeReaders.some((function(a){return a._begin===t.begin&&(a._enqueue(r),!0)}));(0,i.assert)(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}},{key:"_onProgress",value:function _onProgress(t){if(void 0===t.total){var r=this._rangeReaders[0];r&&r.onProgress&&r.onProgress({loaded:t.loaded})}else{var a=this._fullRequestReader;a&&a.onProgress&&a.onProgress({loaded:t.loaded,total:t.total})}}},{key:"_onProgressiveDone",value:function _onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}},{key:"_removeRangeReader",value:function _removeRangeReader(t){var r=this._rangeReaders.indexOf(t);r>=0&&this._rangeReaders.splice(r,1)}},{key:"getFullReader",value:function getFullReader(){(0,i.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");var t=this._queuedChunks;return this._queuedChunks=null,new u(this,t,this._progressiveDone)}},{key:"getRangeReader",value:function getRangeReader(t,r){if(r<=this._progressiveDataLength)return null;var a=new c(this,t,r);return this._pdfDataRangeTransport.requestDataRange(t,r),this._rangeReaders.push(a),a}},{key:"cancelAllRequests",value:function cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t),this._rangeReaders.slice(0).forEach((function(r){r.cancel(t)})),this._pdfDataRangeTransport.abort()}},{key:"_progressiveDataLength",get:function get(){return this._fullRequestReader?this._fullRequestReader._loaded:0}}]),PDFDataTransportStream}();r.PDFDataTransportStream=l;var u=function(){function PDFDataTransportStreamReader(t,r){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_classCallCheck(this,PDFDataTransportStreamReader),this._stream=t,this._done=a||!1,this._filename=null,this._queuedChunks=r||[],this._loaded=0;var o,i=_createForOfIteratorHelper(this._queuedChunks);try{for(i.s();!(o=i.n()).done;){var l=o.value;this._loaded+=l.byteLength}}catch(t){i.e(t)}finally{i.f()}this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}var t;return _createClass(PDFDataTransportStreamReader,[{key:"_enqueue",value:function _enqueue(t){if(!this._done){if(this._requests.length>0)this._requests.shift().resolve({value:t,done:!1});else this._queuedChunks.push(t);this._loaded+=t.byteLength}}},{key:"read",value:(t=_asyncToGenerator(o.default.mark((function _callee(){var t,r;return o.default.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:if(!(this._queuedChunks.length>0)){a.next=3;break}return t=this._queuedChunks.shift(),a.abrupt("return",{value:t,done:!1});case 3:if(!this._done){a.next=5;break}return a.abrupt("return",{value:void 0,done:!0});case 5:return r=(0,i.createPromiseCapability)(),this._requests.push(r),a.abrupt("return",r.promise);case 8:case"end":return a.stop()}}),_callee,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._done=!0,this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})})),this._requests=[]}},{key:"progressiveDone",value:function progressiveDone(){this._done||(this._done=!0)}},{key:"headersReady",get:function get(){return this._headersReady}},{key:"filename",get:function get(){return this._filename}},{key:"isRangeSupported",get:function get(){return this._stream._isRangeSupported}},{key:"isStreamingSupported",get:function get(){return this._stream._isStreamingSupported}},{key:"contentLength",get:function get(){return this._stream._contentLength}}]),PDFDataTransportStreamReader}(),c=function(){function PDFDataTransportStreamRangeReader(t,r,a){_classCallCheck(this,PDFDataTransportStreamRangeReader),this._stream=t,this._begin=r,this._end=a,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}var t;return _createClass(PDFDataTransportStreamRangeReader,[{key:"_enqueue",value:function _enqueue(t){if(!this._done){if(0===this._requests.length)this._queuedChunk=t;else this._requests.shift().resolve({value:t,done:!1}),this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})})),this._requests=[];this._done=!0,this._stream._removeRangeReader(this)}}},{key:"read",value:(t=_asyncToGenerator(o.default.mark((function _callee2(){var t,r;return o.default.wrap((function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:if(!this._queuedChunk){a.next=4;break}return t=this._queuedChunk,this._queuedChunk=null,a.abrupt("return",{value:t,done:!1});case 4:if(!this._done){a.next=6;break}return a.abrupt("return",{value:void 0,done:!0});case 6:return r=(0,i.createPromiseCapability)(),this._requests.push(r),a.abrupt("return",r.promise);case 9:case"end":return a.stop()}}),_callee2,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._done=!0,this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})})),this._requests=[],this._stream._removeRangeReader(this)}},{key:"isStreamingSupported",get:function get(){return!1}}]),PDFDataTransportStreamRangeReader}()},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.WebGLContext=void 0;var o=a(5);function _defineProperties(t,r){for(var a=0;a<r.length;a++){var o=r[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var i=function(){function WebGLContext(t){var r=t.enable,a=void 0!==r&&r;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,WebGLContext),this._enabled=!0===a}return function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}(WebGLContext,[{key:"composeSMask",value:function composeSMask(t){var r=t.layer,a=t.mask,o=t.properties;return l.composeSMask(r,a,o)}},{key:"drawFigures",value:function drawFigures(t){var r=t.width,a=t.height,o=t.backgroundColor,i=t.figures,u=t.context;return l.drawFigures(r,a,o,i,u)}},{key:"clear",value:function clear(){l.cleanup()}},{key:"isEnabled",get:function get(){var t=this._enabled;return t&&(t=l.tryInitGL()),(0,o.shadow)(this,"isEnabled",t)}}]),WebGLContext}();r.WebGLContext=i;var l=function WebGLUtilsClosure(){function loadShader(t,r,a){var o=t.createShader(a);if(t.shaderSource(o,r),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS)){var i=t.getShaderInfoLog(o);throw new Error("Error during shader compilation: "+i)}return o}function createVertexShader(t,r){return loadShader(t,r,t.VERTEX_SHADER)}function createFragmentShader(t,r){return loadShader(t,r,t.FRAGMENT_SHADER)}function createProgram(t,r){for(var a=t.createProgram(),o=0,i=r.length;o<i;++o)t.attachShader(a,r[o]);if(t.linkProgram(a),!t.getProgramParameter(a,t.LINK_STATUS)){var l=t.getProgramInfoLog(a);throw new Error("Error during program linking: "+l)}return a}function createTexture(t,r,a){t.activeTexture(a);var o=t.createTexture();return t.bindTexture(t.TEXTURE_2D,o),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r),o}var t,r;function generateGL(){t||(r=document.createElement("canvas"),t=r.getContext("webgl",{premultipliedalpha:!1}))}var a=null;var o=null;return{tryInitGL:function tryInitGL(){try{return generateGL(),!!t}catch(t){}return!1},composeSMask:function composeSMask(o,i,l){var u=o.width,c=o.height;a||function initSmaskGL(){var o,i;generateGL(),o=r,r=null,i=t,t=null;var l=createProgram(i,[createVertexShader(i,"  attribute vec2 a_position;                                      attribute vec2 a_texCoord;                                                                                                      uniform vec2 u_resolution;                                                                                                      varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_texCoord = a_texCoord;                                      }                                                             "),createFragmentShader(i,"  precision mediump float;                                                                                                        uniform vec4 u_backdrop;                                        uniform int u_subtype;                                          uniform sampler2D u_image;                                      uniform sampler2D u_mask;                                                                                                       varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec4 imageColor = texture2D(u_image, v_texCoord);               vec4 maskColor = texture2D(u_mask, v_texCoord);                 if (u_backdrop.a > 0.0) {                                         maskColor.rgb = maskColor.rgb * maskColor.a +                                   u_backdrop.rgb * (1.0 - maskColor.a);         }                                                               float lum;                                                      if (u_subtype == 0) {                                             lum = maskColor.a;                                            } else {                                                          lum = maskColor.r * 0.3 + maskColor.g * 0.59 +                        maskColor.b * 0.11;                                     }                                                               imageColor.a *= lum;                                            imageColor.rgb *= imageColor.a;                                 gl_FragColor = imageColor;                                    }                                                             ")]);i.useProgram(l);var u={};u.gl=i,u.canvas=o,u.resolutionLocation=i.getUniformLocation(l,"u_resolution"),u.positionLocation=i.getAttribLocation(l,"a_position"),u.backdropLocation=i.getUniformLocation(l,"u_backdrop"),u.subtypeLocation=i.getUniformLocation(l,"u_subtype");var c=i.getAttribLocation(l,"a_texCoord"),d=i.getUniformLocation(l,"u_image"),h=i.getUniformLocation(l,"u_mask"),p=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,p),i.bufferData(i.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),i.STATIC_DRAW),i.enableVertexAttribArray(c),i.vertexAttribPointer(c,2,i.FLOAT,!1,0,0),i.uniform1i(d,0),i.uniform1i(h,1),a=u}();var d=a,h=d.canvas,p=d.gl;h.width=u,h.height=c,p.viewport(0,0,p.drawingBufferWidth,p.drawingBufferHeight),p.uniform2f(d.resolutionLocation,u,c),l.backdrop?p.uniform4f(d.resolutionLocation,l.backdrop[0],l.backdrop[1],l.backdrop[2],1):p.uniform4f(d.resolutionLocation,0,0,0,0),p.uniform1i(d.subtypeLocation,"Luminosity"===l.subtype?1:0);var m=createTexture(p,o,p.TEXTURE0),v=createTexture(p,i,p.TEXTURE1),g=p.createBuffer();return p.bindBuffer(p.ARRAY_BUFFER,g),p.bufferData(p.ARRAY_BUFFER,new Float32Array([0,0,u,0,0,c,0,c,u,0,u,c]),p.STATIC_DRAW),p.enableVertexAttribArray(d.positionLocation),p.vertexAttribPointer(d.positionLocation,2,p.FLOAT,!1,0,0),p.clearColor(0,0,0,0),p.enable(p.BLEND),p.blendFunc(p.ONE,p.ONE_MINUS_SRC_ALPHA),p.clear(p.COLOR_BUFFER_BIT),p.drawArrays(p.TRIANGLES,0,6),p.flush(),p.deleteTexture(m),p.deleteTexture(v),p.deleteBuffer(g),h},drawFigures:function drawFigures(a,i,l,u,c){o||function initFiguresGL(){var a,i;generateGL(),a=r,r=null,i=t,t=null;var l=createProgram(i,[createVertexShader(i,"  attribute vec2 a_position;                                      attribute vec3 a_color;                                                                                                         uniform vec2 u_resolution;                                      uniform vec2 u_scale;                                           uniform vec2 u_offset;                                                                                                          varying vec4 v_color;                                                                                                           void main() {                                                     vec2 position = (a_position + u_offset) * u_scale;              vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;         gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_color = vec4(a_color / 255.0, 1.0);                         }                                                             "),createFragmentShader(i,"  precision mediump float;                                                                                                        varying vec4 v_color;                                                                                                           void main() {                                                     gl_FragColor = v_color;                                       }                                                             ")]);i.useProgram(l);var u={};u.gl=i,u.canvas=a,u.resolutionLocation=i.getUniformLocation(l,"u_resolution"),u.scaleLocation=i.getUniformLocation(l,"u_scale"),u.offsetLocation=i.getUniformLocation(l,"u_offset"),u.positionLocation=i.getAttribLocation(l,"a_position"),u.colorLocation=i.getAttribLocation(l,"a_color"),o=u}();var d=o,h=d.canvas,p=d.gl;h.width=a,h.height=i,p.viewport(0,0,p.drawingBufferWidth,p.drawingBufferHeight),p.uniform2f(d.resolutionLocation,a,i);var m,v,g,y=0;for(m=0,v=u.length;m<v;m++)switch(u[m].type){case"lattice":y+=((g=u[m].coords.length/u[m].verticesPerRow|0)-1)*(u[m].verticesPerRow-1)*6;break;case"triangles":y+=u[m].coords.length}var b=new Float32Array(2*y),_=new Uint8Array(3*y),S=c.coords,A=c.colors,C=0,R=0;for(m=0,v=u.length;m<v;m++){var k=u[m],P=k.coords,w=k.colors;switch(k.type){case"lattice":var x=k.verticesPerRow;g=P.length/x|0;for(var T=1;T<g;T++)for(var E=T*x+1,O=1;O<x;O++,E++)b[C]=S[P[E-x-1]],b[C+1]=S[P[E-x-1]+1],b[C+2]=S[P[E-x]],b[C+3]=S[P[E-x]+1],b[C+4]=S[P[E-1]],b[C+5]=S[P[E-1]+1],_[R]=A[w[E-x-1]],_[R+1]=A[w[E-x-1]+1],_[R+2]=A[w[E-x-1]+2],_[R+3]=A[w[E-x]],_[R+4]=A[w[E-x]+1],_[R+5]=A[w[E-x]+2],_[R+6]=A[w[E-1]],_[R+7]=A[w[E-1]+1],_[R+8]=A[w[E-1]+2],b[C+6]=b[C+2],b[C+7]=b[C+3],b[C+8]=b[C+4],b[C+9]=b[C+5],b[C+10]=S[P[E]],b[C+11]=S[P[E]+1],_[R+9]=_[R+3],_[R+10]=_[R+4],_[R+11]=_[R+5],_[R+12]=_[R+6],_[R+13]=_[R+7],_[R+14]=_[R+8],_[R+15]=A[w[E]],_[R+16]=A[w[E]+1],_[R+17]=A[w[E]+2],C+=12,R+=18;break;case"triangles":for(var I=0,D=P.length;I<D;I++)b[C]=S[P[I]],b[C+1]=S[P[I]+1],_[R]=A[w[I]],_[R+1]=A[w[I]+1],_[R+2]=A[w[I]+2],C+=2,R+=3}}l?p.clearColor(l[0]/255,l[1]/255,l[2]/255,1):p.clearColor(0,0,0,0),p.clear(p.COLOR_BUFFER_BIT);var L=p.createBuffer();p.bindBuffer(p.ARRAY_BUFFER,L),p.bufferData(p.ARRAY_BUFFER,b,p.STATIC_DRAW),p.enableVertexAttribArray(d.positionLocation),p.vertexAttribPointer(d.positionLocation,2,p.FLOAT,!1,0,0);var W=p.createBuffer();return p.bindBuffer(p.ARRAY_BUFFER,W),p.bufferData(p.ARRAY_BUFFER,_,p.STATIC_DRAW),p.enableVertexAttribArray(d.colorLocation),p.vertexAttribPointer(d.colorLocation,3,p.UNSIGNED_BYTE,!1,0,0),p.uniform2f(d.scaleLocation,c.scaleX,c.scaleY),p.uniform2f(d.offsetLocation,c.offsetX,c.offsetY),p.drawArrays(p.TRIANGLES,0,y),p.flush(),p.deleteBuffer(L),p.deleteBuffer(W),h},cleanup:function cleanup(){a&&a.canvas&&(a.canvas.width=0,a.canvas.height=0),o&&o.canvas&&(o.canvas.width=0,o.canvas.height=0),a=null,o=null}}}()},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AnnotationLayer=void 0;var o=a(1),i=a(5);function _createForOfIteratorHelper(t,r){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var o=0,i=function F(){};return{s:i,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,c=!1;return{s:function s(){a=t[Symbol.iterator]()},n:function n(){var t=a.next();return u=t.done,t},e:function e(t){c=!0,l=t},f:function f(){try{u||null==a.return||a.return()}finally{if(c)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,o=new Array(r);a<r;a++)o[a]=t[a];return o}function _get(t,r,a){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(t,r,a){var o=function _superPropBase(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=_getPrototypeOf(t)););return t}(t,r);if(o){var i=Object.getOwnPropertyDescriptor(o,r);return i.get?i.get.call(a):i.value}})(t,r,a||t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t})(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var a,o=_getPrototypeOf(t);if(r){var i=_getPrototypeOf(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(t):r}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var o=r[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}var l=function(){function AnnotationElementFactory(){_classCallCheck(this,AnnotationElementFactory)}return _createClass(AnnotationElementFactory,null,[{key:"create",value:function create(t){switch(t.data.annotationType){case i.AnnotationType.LINK:return new c(t);case i.AnnotationType.TEXT:return new d(t);case i.AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new p(t);case"Btn":return t.data.radioButton?new v(t):t.data.checkBox?new m(t):new g(t);case"Ch":return new y(t)}return new h(t);case i.AnnotationType.POPUP:return new b(t);case i.AnnotationType.FREETEXT:return new S(t);case i.AnnotationType.LINE:return new A(t);case i.AnnotationType.SQUARE:return new C(t);case i.AnnotationType.CIRCLE:return new R(t);case i.AnnotationType.POLYLINE:return new k(t);case i.AnnotationType.CARET:return new w(t);case i.AnnotationType.INK:return new x(t);case i.AnnotationType.POLYGON:return new P(t);case i.AnnotationType.HIGHLIGHT:return new T(t);case i.AnnotationType.UNDERLINE:return new E(t);case i.AnnotationType.SQUIGGLY:return new O(t);case i.AnnotationType.STRIKEOUT:return new I(t);case i.AnnotationType.STAMP:return new D(t);case i.AnnotationType.FILEATTACHMENT:return new L(t);default:return new u(t)}}}]),AnnotationElementFactory}(),u=function(){function AnnotationElement(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_classCallCheck(this,AnnotationElement),this.isRenderable=r,this.data=t.data,this.layer=t.layer,this.page=t.page,this.viewport=t.viewport,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderInteractiveForms=t.renderInteractiveForms,this.svgFactory=t.svgFactory,r&&(this.container=this._createContainer(a))}return _createClass(AnnotationElement,[{key:"_createContainer",value:function _createContainer(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.data,a=this.page,o=this.viewport,l=document.createElement("section"),u=r.rect[2]-r.rect[0],c=r.rect[3]-r.rect[1];l.setAttribute("data-annotation-id",r.id);var d=i.Util.normalizeRect([r.rect[0],a.view[3]-r.rect[1]+a.view[1],r.rect[2],a.view[3]-r.rect[3]+a.view[1]]);if(l.style.transform="matrix(".concat(o.transform.join(","),")"),l.style.transformOrigin="".concat(-d[0],"px ").concat(-d[1],"px"),!t&&r.borderStyle.width>0){l.style.borderWidth="".concat(r.borderStyle.width,"px"),r.borderStyle.style!==i.AnnotationBorderStyleType.UNDERLINE&&(u-=2*r.borderStyle.width,c-=2*r.borderStyle.width);var h=r.borderStyle.horizontalCornerRadius,p=r.borderStyle.verticalCornerRadius;if(h>0||p>0){var m="".concat(h,"px / ").concat(p,"px");l.style.borderRadius=m}switch(r.borderStyle.style){case i.AnnotationBorderStyleType.SOLID:l.style.borderStyle="solid";break;case i.AnnotationBorderStyleType.DASHED:l.style.borderStyle="dashed";break;case i.AnnotationBorderStyleType.BEVELED:(0,i.warn)("Unimplemented border style: beveled");break;case i.AnnotationBorderStyleType.INSET:(0,i.warn)("Unimplemented border style: inset");break;case i.AnnotationBorderStyleType.UNDERLINE:l.style.borderBottomStyle="solid"}r.color?l.style.borderColor=i.Util.makeCssRgb(0|r.color[0],0|r.color[1],0|r.color[2]):l.style.borderWidth=0}return l.style.left="".concat(d[0],"px"),l.style.top="".concat(d[1],"px"),l.style.width="".concat(u,"px"),l.style.height="".concat(c,"px"),l}},{key:"_createPopup",value:function _createPopup(t,r,a){r||((r=document.createElement("div")).style.height=t.style.height,r.style.width=t.style.width,t.appendChild(r));var o=new _({container:t,trigger:r,color:a.color,title:a.title,modificationDate:a.modificationDate,contents:a.contents,hideWrapper:!0}).render();o.style.left=t.style.width,t.appendChild(o)}},{key:"render",value:function render(){(0,i.unreachable)("Abstract method `AnnotationElement.render` called")}}]),AnnotationElement}(),c=function(t){_inherits(LinkAnnotationElement,t);var r=_createSuper(LinkAnnotationElement);function LinkAnnotationElement(t){_classCallCheck(this,LinkAnnotationElement);var a=!!(t.data.url||t.data.dest||t.data.action);return r.call(this,t,a)}return _createClass(LinkAnnotationElement,[{key:"render",value:function render(){this.container.className="linkAnnotation";var t=this.data,r=this.linkService,a=document.createElement("a");return t.url?(0,o.addLinkAttributes)(a,{url:t.url,target:t.newWindow?o.LinkTarget.BLANK:r.externalLinkTarget,rel:r.externalLinkRel,enabled:r.externalLinkEnabled}):t.action?this._bindNamedAction(a,t.action):this._bindLink(a,t.dest),this.container.appendChild(a),this.container}},{key:"_bindLink",value:function _bindLink(t,r){var a=this;t.href=this.linkService.getDestinationHash(r),t.onclick=function(){return r&&a.linkService.navigateTo(r),!1},r&&(t.className="internalLink")}},{key:"_bindNamedAction",value:function _bindNamedAction(t,r){var a=this;t.href=this.linkService.getAnchorUrl(""),t.onclick=function(){return a.linkService.executeNamedAction(r),!1},t.className="internalLink"}}]),LinkAnnotationElement}(u),d=function(t){_inherits(TextAnnotationElement,t);var r=_createSuper(TextAnnotationElement);function TextAnnotationElement(t){_classCallCheck(this,TextAnnotationElement);var a=!!(t.data.hasPopup||t.data.title||t.data.contents);return r.call(this,t,a)}return _createClass(TextAnnotationElement,[{key:"render",value:function render(){this.container.className="textAnnotation";var t=document.createElement("img");return t.style.height=this.container.style.height,t.style.width=this.container.style.width,t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.alt="[{{type}} Annotation]",t.dataset.l10nId="text_annotation_type",t.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(this.container,t,this.data),this.container.appendChild(t),this.container}}]),TextAnnotationElement}(u),h=function(t){_inherits(WidgetAnnotationElement,t);var r=_createSuper(WidgetAnnotationElement);function WidgetAnnotationElement(){return _classCallCheck(this,WidgetAnnotationElement),r.apply(this,arguments)}return _createClass(WidgetAnnotationElement,[{key:"render",value:function render(){return this.container}}]),WidgetAnnotationElement}(u),p=function(t){_inherits(TextWidgetAnnotationElement,t);var r=_createSuper(TextWidgetAnnotationElement);function TextWidgetAnnotationElement(t){_classCallCheck(this,TextWidgetAnnotationElement);var a=t.renderInteractiveForms||!t.data.hasAppearance&&!!t.data.fieldValue;return r.call(this,t,a)}return _createClass(TextWidgetAnnotationElement,[{key:"render",value:function render(){this.container.className="textWidgetAnnotation";var t=null;if(this.renderInteractiveForms){if(this.data.multiLine?(t=document.createElement("textarea")).textContent=this.data.fieldValue:((t=document.createElement("input")).type="text",t.setAttribute("value",this.data.fieldValue)),t.disabled=this.data.readOnly,t.name=this.data.fieldName,null!==this.data.maxLen&&(t.maxLength=this.data.maxLen),this.data.comb){var r=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;t.classList.add("comb"),t.style.letterSpacing="calc(".concat(r,"px - 1ch)")}}else{(t=document.createElement("div")).textContent=this.data.fieldValue,t.style.verticalAlign="middle",t.style.display="table-cell";var a=null;this.data.fontRefName&&this.page.commonObjs.has(this.data.fontRefName)&&(a=this.page.commonObjs.get(this.data.fontRefName)),this._setTextStyle(t,a)}return null!==this.data.textAlignment&&(t.style.textAlign=["left","center","right"][this.data.textAlignment]),this.container.appendChild(t),this.container}},{key:"_setTextStyle",value:function _setTextStyle(t,r){var a=t.style;if(a.fontSize="".concat(this.data.fontSize,"px"),a.direction=this.data.fontDirection<0?"rtl":"ltr",r){var o="normal";r.black?o="900":r.bold&&(o="bold"),a.fontWeight=o,a.fontStyle=r.italic?"italic":"normal";var i=r.loadedName?'"'.concat(r.loadedName,'", '):"",l=r.fallbackName||"Helvetica, sans-serif";a.fontFamily=i+l}}}]),TextWidgetAnnotationElement}(h),m=function(t){_inherits(CheckboxWidgetAnnotationElement,t);var r=_createSuper(CheckboxWidgetAnnotationElement);function CheckboxWidgetAnnotationElement(t){return _classCallCheck(this,CheckboxWidgetAnnotationElement),r.call(this,t,t.renderInteractiveForms)}return _createClass(CheckboxWidgetAnnotationElement,[{key:"render",value:function render(){this.container.className="buttonWidgetAnnotation checkBox";var t=document.createElement("input");return t.disabled=this.data.readOnly,t.type="checkbox",t.name=this.data.fieldName,this.data.fieldValue&&"Off"!==this.data.fieldValue&&t.setAttribute("checked",!0),this.container.appendChild(t),this.container}}]),CheckboxWidgetAnnotationElement}(h),v=function(t){_inherits(RadioButtonWidgetAnnotationElement,t);var r=_createSuper(RadioButtonWidgetAnnotationElement);function RadioButtonWidgetAnnotationElement(t){return _classCallCheck(this,RadioButtonWidgetAnnotationElement),r.call(this,t,t.renderInteractiveForms)}return _createClass(RadioButtonWidgetAnnotationElement,[{key:"render",value:function render(){this.container.className="buttonWidgetAnnotation radioButton";var t=document.createElement("input");return t.disabled=this.data.readOnly,t.type="radio",t.name=this.data.fieldName,this.data.fieldValue===this.data.buttonValue&&t.setAttribute("checked",!0),this.container.appendChild(t),this.container}}]),RadioButtonWidgetAnnotationElement}(h),g=function(t){_inherits(PushButtonWidgetAnnotationElement,t);var r=_createSuper(PushButtonWidgetAnnotationElement);function PushButtonWidgetAnnotationElement(){return _classCallCheck(this,PushButtonWidgetAnnotationElement),r.apply(this,arguments)}return _createClass(PushButtonWidgetAnnotationElement,[{key:"render",value:function render(){var t=_get(_getPrototypeOf(PushButtonWidgetAnnotationElement.prototype),"render",this).call(this);return t.className="buttonWidgetAnnotation pushButton",t}}]),PushButtonWidgetAnnotationElement}(c),y=function(t){_inherits(ChoiceWidgetAnnotationElement,t);var r=_createSuper(ChoiceWidgetAnnotationElement);function ChoiceWidgetAnnotationElement(t){return _classCallCheck(this,ChoiceWidgetAnnotationElement),r.call(this,t,t.renderInteractiveForms)}return _createClass(ChoiceWidgetAnnotationElement,[{key:"render",value:function render(){this.container.className="choiceWidgetAnnotation";var t=document.createElement("select");t.disabled=this.data.readOnly,t.name=this.data.fieldName,this.data.combo||(t.size=this.data.options.length,this.data.multiSelect&&(t.multiple=!0));var r,a=_createForOfIteratorHelper(this.data.options);try{for(a.s();!(r=a.n()).done;){var o=r.value,i=document.createElement("option");i.textContent=o.displayValue,i.value=o.exportValue,this.data.fieldValue.includes(o.displayValue)&&i.setAttribute("selected",!0),t.appendChild(i)}}catch(t){a.e(t)}finally{a.f()}return this.container.appendChild(t),this.container}}]),ChoiceWidgetAnnotationElement}(h),b=function(t){_inherits(PopupAnnotationElement,t);var r=_createSuper(PopupAnnotationElement);function PopupAnnotationElement(t){_classCallCheck(this,PopupAnnotationElement);var a=!(!t.data.title&&!t.data.contents);return r.call(this,t,a)}return _createClass(PopupAnnotationElement,[{key:"render",value:function render(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;var t='[data-annotation-id="'.concat(this.data.parentId,'"]'),r=this.layer.querySelector(t);if(!r)return this.container;var a=new _({container:this.container,trigger:r,color:this.data.color,title:this.data.title,modificationDate:this.data.modificationDate,contents:this.data.contents}),o=parseFloat(r.style.left),i=parseFloat(r.style.width);return this.container.style.transformOrigin="-".concat(o+i,"px -").concat(r.style.top),this.container.style.left="".concat(o+i,"px"),this.container.appendChild(a.render()),this.container}}]),PopupAnnotationElement}(u),_=function(){function PopupElement(t){_classCallCheck(this,PopupElement),this.container=t.container,this.trigger=t.trigger,this.color=t.color,this.title=t.title,this.modificationDate=t.modificationDate,this.contents=t.contents,this.hideWrapper=t.hideWrapper||!1,this.pinned=!1}return _createClass(PopupElement,[{key:"render",value:function render(){var t=document.createElement("div");t.className="popupWrapper",this.hideElement=this.hideWrapper?t:this.container,this.hideElement.setAttribute("hidden",!0);var r=document.createElement("div");r.className="popup";var a=this.color;if(a){var l=.7*(255-a[0])+a[0],u=.7*(255-a[1])+a[1],c=.7*(255-a[2])+a[2];r.style.backgroundColor=i.Util.makeCssRgb(0|l,0|u,0|c)}var d=document.createElement("h1");d.textContent=this.title,r.appendChild(d);var h=o.PDFDateString.toDateObject(this.modificationDate);if(h){var p=document.createElement("span");p.textContent="{{date}}, {{time}}",p.dataset.l10nId="annotation_date_string",p.dataset.l10nArgs=JSON.stringify({date:h.toLocaleDateString(),time:h.toLocaleTimeString()}),r.appendChild(p)}var m=this._formatContents(this.contents);return r.appendChild(m),this.trigger.addEventListener("click",this._toggle.bind(this)),this.trigger.addEventListener("mouseover",this._show.bind(this,!1)),this.trigger.addEventListener("mouseout",this._hide.bind(this,!1)),r.addEventListener("click",this._hide.bind(this,!0)),t.appendChild(r),t}},{key:"_formatContents",value:function _formatContents(t){for(var r=document.createElement("p"),a=t.split(/(?:\r\n?|\n)/),o=0,i=a.length;o<i;++o){var l=a[o];r.appendChild(document.createTextNode(l)),o<i-1&&r.appendChild(document.createElement("br"))}return r}},{key:"_toggle",value:function _toggle(){this.pinned?this._hide(!0):this._show(!0)}},{key:"_show",value:function _show(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t&&(this.pinned=!0),this.hideElement.hasAttribute("hidden")&&(this.hideElement.removeAttribute("hidden"),this.container.style.zIndex+=1)}},{key:"_hide",value:function _hide(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&(this.pinned=!1),this.hideElement.hasAttribute("hidden")||this.pinned||(this.hideElement.setAttribute("hidden",!0),this.container.style.zIndex-=1)}}]),PopupElement}(),S=function(t){_inherits(FreeTextAnnotationElement,t);var r=_createSuper(FreeTextAnnotationElement);function FreeTextAnnotationElement(t){_classCallCheck(this,FreeTextAnnotationElement);var a=!!(t.data.hasPopup||t.data.title||t.data.contents);return r.call(this,t,a,!0)}return _createClass(FreeTextAnnotationElement,[{key:"render",value:function render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),FreeTextAnnotationElement}(u),A=function(t){_inherits(LineAnnotationElement,t);var r=_createSuper(LineAnnotationElement);function LineAnnotationElement(t){_classCallCheck(this,LineAnnotationElement);var a=!!(t.data.hasPopup||t.data.title||t.data.contents);return r.call(this,t,a,!0)}return _createClass(LineAnnotationElement,[{key:"render",value:function render(){this.container.className="lineAnnotation";var t=this.data,r=t.rect[2]-t.rect[0],a=t.rect[3]-t.rect[1],o=this.svgFactory.create(r,a),i=this.svgFactory.createElement("svg:line");return i.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),i.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),i.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),i.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),i.setAttribute("stroke-width",t.borderStyle.width||1),i.setAttribute("stroke","transparent"),o.appendChild(i),this.container.append(o),this._createPopup(this.container,i,t),this.container}}]),LineAnnotationElement}(u),C=function(t){_inherits(SquareAnnotationElement,t);var r=_createSuper(SquareAnnotationElement);function SquareAnnotationElement(t){_classCallCheck(this,SquareAnnotationElement);var a=!!(t.data.hasPopup||t.data.title||t.data.contents);return r.call(this,t,a,!0)}return _createClass(SquareAnnotationElement,[{key:"render",value:function render(){this.container.className="squareAnnotation";var t=this.data,r=t.rect[2]-t.rect[0],a=t.rect[3]-t.rect[1],o=this.svgFactory.create(r,a),i=t.borderStyle.width,l=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",i/2),l.setAttribute("y",i/2),l.setAttribute("width",r-i),l.setAttribute("height",a-i),l.setAttribute("stroke-width",i||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","none"),o.appendChild(l),this.container.append(o),this._createPopup(this.container,l,t),this.container}}]),SquareAnnotationElement}(u),R=function(t){_inherits(CircleAnnotationElement,t);var r=_createSuper(CircleAnnotationElement);function CircleAnnotationElement(t){_classCallCheck(this,CircleAnnotationElement);var a=!!(t.data.hasPopup||t.data.title||t.data.contents);return r.call(this,t,a,!0)}return _createClass(CircleAnnotationElement,[{key:"render",value:function render(){this.container.className="circleAnnotation";var t=this.data,r=t.rect[2]-t.rect[0],a=t.rect[3]-t.rect[1],o=this.svgFactory.create(r,a),i=t.borderStyle.width,l=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",r/2),l.setAttribute("cy",a/2),l.setAttribute("rx",r/2-i/2),l.setAttribute("ry",a/2-i/2),l.setAttribute("stroke-width",i||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","none"),o.appendChild(l),this.container.append(o),this._createPopup(this.container,l,t),this.container}}]),CircleAnnotationElement}(u),k=function(t){_inherits(PolylineAnnotationElement,t);var r=_createSuper(PolylineAnnotationElement);function PolylineAnnotationElement(t){var a;_classCallCheck(this,PolylineAnnotationElement);var o=!!(t.data.hasPopup||t.data.title||t.data.contents);return(a=r.call(this,t,o,!0)).containerClassName="polylineAnnotation",a.svgElementName="svg:polyline",a}return _createClass(PolylineAnnotationElement,[{key:"render",value:function render(){this.container.className=this.containerClassName;var t,r=this.data,a=r.rect[2]-r.rect[0],o=r.rect[3]-r.rect[1],i=this.svgFactory.create(a,o),l=[],u=_createForOfIteratorHelper(r.vertices);try{for(u.s();!(t=u.n()).done;){var c=t.value,d=c.x-r.rect[0],h=r.rect[3]-c.y;l.push(d+","+h)}}catch(t){u.e(t)}finally{u.f()}l=l.join(" ");var p=this.svgFactory.createElement(this.svgElementName);return p.setAttribute("points",l),p.setAttribute("stroke-width",r.borderStyle.width||1),p.setAttribute("stroke","transparent"),p.setAttribute("fill","none"),i.appendChild(p),this.container.append(i),this._createPopup(this.container,p,r),this.container}}]),PolylineAnnotationElement}(u),P=function(t){_inherits(PolygonAnnotationElement,t);var r=_createSuper(PolygonAnnotationElement);function PolygonAnnotationElement(t){var a;return _classCallCheck(this,PolygonAnnotationElement),(a=r.call(this,t)).containerClassName="polygonAnnotation",a.svgElementName="svg:polygon",a}return PolygonAnnotationElement}(k),w=function(t){_inherits(CaretAnnotationElement,t);var r=_createSuper(CaretAnnotationElement);function CaretAnnotationElement(t){_classCallCheck(this,CaretAnnotationElement);var a=!!(t.data.hasPopup||t.data.title||t.data.contents);return r.call(this,t,a,!0)}return _createClass(CaretAnnotationElement,[{key:"render",value:function render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),CaretAnnotationElement}(u),x=function(t){_inherits(InkAnnotationElement,t);var r=_createSuper(InkAnnotationElement);function InkAnnotationElement(t){var a;_classCallCheck(this,InkAnnotationElement);var o=!!(t.data.hasPopup||t.data.title||t.data.contents);return(a=r.call(this,t,o,!0)).containerClassName="inkAnnotation",a.svgElementName="svg:polyline",a}return _createClass(InkAnnotationElement,[{key:"render",value:function render(){this.container.className=this.containerClassName;var t,r=this.data,a=r.rect[2]-r.rect[0],o=r.rect[3]-r.rect[1],i=this.svgFactory.create(a,o),l=_createForOfIteratorHelper(r.inkLists);try{for(l.s();!(t=l.n()).done;){var u,c=t.value,d=[],h=_createForOfIteratorHelper(c);try{for(h.s();!(u=h.n()).done;){var p=u.value,m=p.x-r.rect[0],v=r.rect[3]-p.y;d.push("".concat(m,",").concat(v))}}catch(t){h.e(t)}finally{h.f()}d=d.join(" ");var g=this.svgFactory.createElement(this.svgElementName);g.setAttribute("points",d),g.setAttribute("stroke-width",r.borderStyle.width||1),g.setAttribute("stroke","transparent"),g.setAttribute("fill","none"),this._createPopup(this.container,g,r),i.appendChild(g)}}catch(t){l.e(t)}finally{l.f()}return this.container.append(i),this.container}}]),InkAnnotationElement}(u),T=function(t){_inherits(HighlightAnnotationElement,t);var r=_createSuper(HighlightAnnotationElement);function HighlightAnnotationElement(t){_classCallCheck(this,HighlightAnnotationElement);var a=!!(t.data.hasPopup||t.data.title||t.data.contents);return r.call(this,t,a,!0)}return _createClass(HighlightAnnotationElement,[{key:"render",value:function render(){return this.container.className="highlightAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),HighlightAnnotationElement}(u),E=function(t){_inherits(UnderlineAnnotationElement,t);var r=_createSuper(UnderlineAnnotationElement);function UnderlineAnnotationElement(t){_classCallCheck(this,UnderlineAnnotationElement);var a=!!(t.data.hasPopup||t.data.title||t.data.contents);return r.call(this,t,a,!0)}return _createClass(UnderlineAnnotationElement,[{key:"render",value:function render(){return this.container.className="underlineAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),UnderlineAnnotationElement}(u),O=function(t){_inherits(SquigglyAnnotationElement,t);var r=_createSuper(SquigglyAnnotationElement);function SquigglyAnnotationElement(t){_classCallCheck(this,SquigglyAnnotationElement);var a=!!(t.data.hasPopup||t.data.title||t.data.contents);return r.call(this,t,a,!0)}return _createClass(SquigglyAnnotationElement,[{key:"render",value:function render(){return this.container.className="squigglyAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),SquigglyAnnotationElement}(u),I=function(t){_inherits(StrikeOutAnnotationElement,t);var r=_createSuper(StrikeOutAnnotationElement);function StrikeOutAnnotationElement(t){_classCallCheck(this,StrikeOutAnnotationElement);var a=!!(t.data.hasPopup||t.data.title||t.data.contents);return r.call(this,t,a,!0)}return _createClass(StrikeOutAnnotationElement,[{key:"render",value:function render(){return this.container.className="strikeoutAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),StrikeOutAnnotationElement}(u),D=function(t){_inherits(StampAnnotationElement,t);var r=_createSuper(StampAnnotationElement);function StampAnnotationElement(t){_classCallCheck(this,StampAnnotationElement);var a=!!(t.data.hasPopup||t.data.title||t.data.contents);return r.call(this,t,a,!0)}return _createClass(StampAnnotationElement,[{key:"render",value:function render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),StampAnnotationElement}(u),L=function(t){_inherits(FileAttachmentAnnotationElement,t);var r=_createSuper(FileAttachmentAnnotationElement);function FileAttachmentAnnotationElement(t){var a;_classCallCheck(this,FileAttachmentAnnotationElement);var l=(a=r.call(this,t,!0)).data.file,u=l.filename,c=l.content;return a.filename=(0,o.getFilenameFromUrl)(u),a.content=c,a.linkService.eventBus&&a.linkService.eventBus.dispatch("fileattachmentannotation",{source:_assertThisInitialized(a),id:(0,i.stringToPDFString)(u),filename:u,content:c}),a}return _createClass(FileAttachmentAnnotationElement,[{key:"render",value:function render(){this.container.className="fileAttachmentAnnotation";var t=document.createElement("div");return t.style.height=this.container.style.height,t.style.width=this.container.style.width,t.addEventListener("dblclick",this._download.bind(this)),this.data.hasPopup||!this.data.title&&!this.data.contents||this._createPopup(this.container,t,this.data),this.container.appendChild(t),this.container}},{key:"_download",value:function _download(){this.downloadManager?this.downloadManager.downloadData(this.content,this.filename,""):(0,i.warn)("Download cannot be started due to unavailable download manager")}}]),FileAttachmentAnnotationElement}(u),W=function(){function AnnotationLayer(){_classCallCheck(this,AnnotationLayer)}return _createClass(AnnotationLayer,null,[{key:"render",value:function render(t){var r,a=[],u=[],c=_createForOfIteratorHelper(t.annotations);try{for(c.s();!(r=c.n()).done;){var d=r.value;d&&(d.annotationType!==i.AnnotationType.POPUP?a.push(d):u.push(d))}}catch(t){c.e(t)}finally{c.f()}u.length&&a.push.apply(a,u);for(var h=0,p=a;h<p.length;h++){var m=p[h],v=l.create({data:m,layer:t.div,page:t.page,viewport:t.viewport,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderInteractiveForms:t.renderInteractiveForms||!1,svgFactory:new o.DOMSVGFactory});v.isRenderable&&t.div.appendChild(v.render())}}},{key:"update",value:function update(t){var r,a=_createForOfIteratorHelper(t.annotations);try{for(a.s();!(r=a.n()).done;){var o=r.value,i=t.div.querySelector('[data-annotation-id="'.concat(o.id,'"]'));i&&(i.style.transform="matrix(".concat(t.viewport.transform.join(","),")"))}}catch(t){a.e(t)}finally{a.f()}t.div.removeAttribute("hidden")}}]),AnnotationLayer}();r.AnnotationLayer=W},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.renderTextLayer=void 0;var o=a(5),i=function renderTextLayerClosure(){var t=/\S/;function appendText(r,a,i){var l=document.createElement("span"),u={angle:0,canvasWidth:0,isWhitespace:!1,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1};if(r._textDivs.push(l),function isAllWhitespace(r){return!t.test(r)}(a.str))return u.isWhitespace=!0,void r._textDivProperties.set(l,u);var c=o.Util.transform(r._viewport.transform,a.transform),d=Math.atan2(c[1],c[0]),h=i[a.fontName];h.vertical&&(d+=Math.PI/2);var p,m,v=Math.sqrt(c[2]*c[2]+c[3]*c[3]),g=v;h.ascent?g=h.ascent*g:h.descent&&(g=(1+h.descent)*g),0===d?(p=c[4],m=c[5]-g):(p=c[4]+g*Math.sin(d),m=c[5]-g*Math.cos(d)),l.style.left="".concat(p,"px"),l.style.top="".concat(m,"px"),l.style.fontSize="".concat(v,"px"),l.style.fontFamily=h.fontFamily,l.textContent=a.str,r._fontInspectorEnabled&&(l.dataset.fontName=a.fontName),0!==d&&(u.angle=d*(180/Math.PI));var y=!1;if(a.str.length>1)y=!0;else if(a.transform[0]!==a.transform[3]){var b=Math.abs(a.transform[0]),_=Math.abs(a.transform[3]);b!==_&&Math.max(b,_)/Math.min(b,_)>1.5&&(y=!0)}if(y&&(h.vertical?u.canvasWidth=a.height*r._viewport.scale:u.canvasWidth=a.width*r._viewport.scale),r._textDivProperties.set(l,u),r._textContentStream&&r._layoutText(l),r._enhanceTextSelection){var S=1,A=0;0!==d&&(S=Math.cos(d),A=Math.sin(d));var C,R,k=(h.vertical?a.height:a.width)*r._viewport.scale,P=v;0!==d?(C=[S,A,-A,S,p,m],R=o.Util.getAxialAlignedBoundingBox([0,0,k,P],C)):R=[p,m,p+k,m+P],r._bounds.push({left:R[0],top:R[1],right:R[2],bottom:R[3],div:l,size:[k,P],m:C})}}function render(t){if(!t._canceled){var r=t._textDivs,a=t._capability,o=r.length;if(o>1e5)return t._renderingDone=!0,void a.resolve();if(!t._textContentStream)for(var i=0;i<o;i++)t._layoutText(r[i]);t._renderingDone=!0,a.resolve()}}function findPositiveMin(t,r,a){for(var o=0,i=0;i<a;i++){var l=t[r++];l>0&&(o=o?Math.min(l,o):l)}return o}function expand(t){for(var r=t._bounds,a=t._viewport,i=function expandBounds(t,r,a){var o=a.map((function(t,r){return{x1:t.left,y1:t.top,x2:t.right,y2:t.bottom,index:r,x1New:void 0,x2New:void 0}}));expandBoundsLTR(t,o);var i=new Array(a.length);return o.forEach((function(t){var r=t.index;i[r]={left:t.x1New,top:0,right:t.x2New,bottom:0}})),a.map((function(r,a){var l=i[a],u=o[a];u.x1=r.top,u.y1=t-l.right,u.x2=r.bottom,u.y2=t-l.left,u.index=a,u.x1New=void 0,u.x2New=void 0})),expandBoundsLTR(r,o),o.forEach((function(t){var r=t.index;i[r].top=t.x1New,i[r].bottom=t.x2New})),i}(a.width,a.height,r),l=0;l<i.length;l++){var u=r[l].div,c=t._textDivProperties.get(u);if(0!==c.angle){var d=i[l],h=r[l],p=h.m,m=p[0],v=p[1],g=[[0,0],[0,h.size[1]],[h.size[0],0],h.size],y=new Float64Array(64);g.forEach((function(t,r){var a=o.Util.applyTransform(t,p);y[r+0]=m&&(d.left-a[0])/m,y[r+4]=v&&(d.top-a[1])/v,y[r+8]=m&&(d.right-a[0])/m,y[r+12]=v&&(d.bottom-a[1])/v,y[r+16]=v&&(d.left-a[0])/-v,y[r+20]=m&&(d.top-a[1])/m,y[r+24]=v&&(d.right-a[0])/-v,y[r+28]=m&&(d.bottom-a[1])/m,y[r+32]=m&&(d.left-a[0])/-m,y[r+36]=v&&(d.top-a[1])/-v,y[r+40]=m&&(d.right-a[0])/-m,y[r+44]=v&&(d.bottom-a[1])/-v,y[r+48]=v&&(d.left-a[0])/v,y[r+52]=m&&(d.top-a[1])/-m,y[r+56]=v&&(d.right-a[0])/v,y[r+60]=m&&(d.bottom-a[1])/-m}));var b=1+Math.min(Math.abs(m),Math.abs(v));c.paddingLeft=findPositiveMin(y,32,16)/b,c.paddingTop=findPositiveMin(y,48,16)/b,c.paddingRight=findPositiveMin(y,0,16)/b,c.paddingBottom=findPositiveMin(y,16,16)/b,t._textDivProperties.set(u,c)}else c.paddingLeft=r[l].left-i[l].left,c.paddingTop=r[l].top-i[l].top,c.paddingRight=i[l].right-r[l].right,c.paddingBottom=i[l].bottom-r[l].bottom,t._textDivProperties.set(u,c)}}function expandBoundsLTR(t,r){r.sort((function(t,r){return t.x1-r.x1||t.index-r.index}));var a=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];r.forEach((function(t){for(var r=0;r<a.length&&a[r].end<=t.y1;)r++;for(var o,i,l=a.length-1;l>=0&&a[l].start>=t.y2;)l--;var u,c,d=-1/0;for(u=r;u<=l;u++){var h;(h=(i=(o=a[u]).boundary).x2>t.x1?i.index>t.index?i.x1New:t.x1:void 0===i.x2New?(i.x2+t.x1)/2:i.x2New)>d&&(d=h)}for(t.x1New=d,u=r;u<=l;u++)void 0===(i=(o=a[u]).boundary).x2New?i.x2>t.x1?i.index>t.index&&(i.x2New=i.x2):i.x2New=d:i.x2New>d&&(i.x2New=Math.max(d,i.x2));var p=[],m=null;for(u=r;u<=l;u++){var v=(i=(o=a[u]).boundary).x2>t.x2?i:t;m===v?p[p.length-1].end=o.end:(p.push({start:o.start,end:o.end,boundary:v}),m=v)}for(a[r].start<t.y1&&(p[0].start=t.y1,p.unshift({start:a[r].start,end:t.y1,boundary:a[r].boundary})),t.y2<a[l].end&&(p[p.length-1].end=t.y2,p.push({start:t.y2,end:a[l].end,boundary:a[l].boundary})),u=r;u<=l;u++)if(void 0===(i=(o=a[u]).boundary).x2New){var g=!1;for(c=r-1;!g&&c>=0&&a[c].start>=i.y1;c--)g=a[c].boundary===i;for(c=l+1;!g&&c<a.length&&a[c].end<=i.y2;c++)g=a[c].boundary===i;for(c=0;!g&&c<p.length;c++)g=p[c].boundary===i;g||(i.x2New=d)}Array.prototype.splice.apply(a,[r,l-r+1].concat(p))})),a.forEach((function(r){var a=r.boundary;void 0===a.x2New&&(a.x2New=Math.max(t,a.x2))}))}function TextLayerRenderTask(t){var r=this,a=t.textContent,i=t.textContentStream,l=t.container,u=t.viewport,c=t.textDivs,d=t.textContentItemsStr,h=t.enhanceTextSelection;this._textContent=a,this._textContentStream=i,this._container=l,this._viewport=u,this._textDivs=c||[],this._textContentItemsStr=d||[],this._enhanceTextSelection=!!h,this._fontInspectorEnabled=!(!globalThis.FontInspector||!globalThis.FontInspector.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,o.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally((function(){r._layoutTextCtx&&(r._layoutTextCtx.canvas.width=0,r._layoutTextCtx.canvas.height=0,r._layoutTextCtx=null)})).catch((function(){}))}return TextLayerRenderTask.prototype={get promise(){return this._capability.promise},cancel:function TextLayer_cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new o.AbortException("TextLayer task cancelled.")),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))},_processItems:function _processItems(t,r){for(var a=0,o=t.length;a<o;a++)this._textContentItemsStr.push(t[a].str),appendText(this,t[a],r)},_layoutText:function _layoutText(t){var r=this._textDivProperties.get(t);if(!r.isWhitespace){var a="";if(0!==r.canvasWidth){var o=t.style,i=o.fontSize,l=o.fontFamily;i===this._layoutTextLastFontSize&&l===this._layoutTextLastFontFamily||(this._layoutTextCtx.font="".concat(i," ").concat(l),this._layoutTextLastFontSize=i,this._layoutTextLastFontFamily=l);var u=this._layoutTextCtx.measureText(t.textContent).width;u>0&&(r.scale=r.canvasWidth/u,a="scaleX(".concat(r.scale,")"))}0!==r.angle&&(a="rotate(".concat(r.angle,"deg) ").concat(a)),a.length>0&&(this._enhanceTextSelection&&(r.originalTransform=a),t.style.transform=a),this._textDivProperties.set(t,r),this._container.appendChild(t)}},_render:function TextLayer_render(t){var r=this,a=(0,o.createPromiseCapability)(),i=Object.create(null),l=document.createElement("canvas");if(l.mozOpaque=!0,this._layoutTextCtx=l.getContext("2d",{alpha:!1,willReadFrequently:!0}),this._textContent){var u=this._textContent.items,c=this._textContent.styles;this._processItems(u,c),a.resolve()}else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');this._reader=this._textContentStream.getReader(),function pump(){r._reader.read().then((function(t){var o=t.value;t.done?a.resolve():(Object.assign(i,o.styles),r._processItems(o.items,i),pump())}),a.reject)}()}a.promise.then((function(){i=null,t?r._renderTimer=setTimeout((function(){render(r),r._renderTimer=null}),t):render(r)}),this._capability.reject)},expandTextDivs:function TextLayer_expandTextDivs(t){if(this._enhanceTextSelection&&this._renderingDone){null!==this._bounds&&(expand(this),this._bounds=null);for(var r=[],a=[],o=0,i=this._textDivs.length;o<i;o++){var l=this._textDivs[o],u=this._textDivProperties.get(l);u.isWhitespace||(t?(r.length=0,a.length=0,u.originalTransform&&r.push(u.originalTransform),u.paddingTop>0?(a.push("".concat(u.paddingTop,"px")),r.push("translateY(".concat(-u.paddingTop,"px)"))):a.push(0),u.paddingRight>0?a.push("".concat(u.paddingRight/u.scale,"px")):a.push(0),u.paddingBottom>0?a.push("".concat(u.paddingBottom,"px")):a.push(0),u.paddingLeft>0?(a.push("".concat(u.paddingLeft/u.scale,"px")),r.push("translateX(".concat(-u.paddingLeft/u.scale,"px)"))):a.push(0),l.style.padding=a.join(" "),r.length&&(l.style.transform=r.join(" "))):(l.style.padding=null,l.style.transform=u.originalTransform))}}}},function renderTextLayer(t){var r=new TextLayerRenderTask({textContent:t.textContent,textContentStream:t.textContentStream,container:t.container,viewport:t.viewport,textDivs:t.textDivs,textContentItemsStr:t.textContentItemsStr,enhanceTextSelection:t.enhanceTextSelection});return r._render(t.timeout),r}}();r.renderTextLayer=i},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SVGGraphics=void 0;var o=a(5),i=a(1),l=a(7);function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var a=[],o=!0,i=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(o=(u=c.next()).done)&&(a.push(u.value),!r||a.length!==r);o=!0);}catch(t){i=!0,l=t}finally{try{o||null==c.return||c.return()}finally{if(i)throw l}}return a}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(t,r){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var o=0,i=function F(){};return{s:i,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,c=!1;return{s:function s(){a=t[Symbol.iterator]()},n:function n(){var t=a.next();return u=t.done,t},e:function e(t){c=!0,l=t},f:function f(){try{u||null==a.return||a.return()}finally{if(c)throw l}}}}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,o=new Array(r);a<r;a++)o[a]=t[a];return o}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var o=r[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}var u=function SVGGraphics(){throw new Error("Not implemented: SVGGraphics")};r.SVGGraphics=u;var c=function pf(t){if(Number.isInteger(t))return t.toString();var r=t.toFixed(10),a=r.length-1;if("0"!==r[a])return r;do{a--}while("0"===r[a]);return r.substring(0,"."===r[a]?a:a+1)},d=function pm(t){if(0===t[4]&&0===t[5]){if(0===t[1]&&0===t[2])return 1===t[0]&&1===t[3]?"":"scale(".concat(c(t[0])," ").concat(c(t[3]),")");if(t[0]===t[3]&&t[1]===-t[2]){var r=180*Math.acos(t[0])/Math.PI;return"rotate(".concat(c(r),")")}}else if(1===t[0]&&0===t[1]&&0===t[2]&&1===t[3])return"translate(".concat(c(t[4])," ").concat(c(t[5]),")");return"matrix(".concat(c(t[0])," ").concat(c(t[1])," ").concat(c(t[2])," ").concat(c(t[3])," ").concat(c(t[4])," ")+"".concat(c(t[5]),")")},h={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},p=["butt","round","square"],m=["miter","round","bevel"],v=function(){for(var t=new Uint8Array([137,80,78,71,13,10,26,10]),r=new Int32Array(256),a=0;a<256;a++){for(var i=a,u=0;u<8;u++)i=1&i?3988292384^i>>1&2147483647:i>>1&2147483647;r[a]=i}function writePngChunk(t,a,o,i){var l=i,u=a.length;o[l]=u>>24&255,o[l+1]=u>>16&255,o[l+2]=u>>8&255,o[l+3]=255&u,o[l+=4]=255&t.charCodeAt(0),o[l+1]=255&t.charCodeAt(1),o[l+2]=255&t.charCodeAt(2),o[l+3]=255&t.charCodeAt(3),l+=4,o.set(a,l);var c=function crc32(t,a,o){for(var i=-1,l=a;l<o;l++){var u=255&(i^t[l]);i=i>>>8^r[u]}return-1^i}(o,i+4,l+=a.length);o[l]=c>>24&255,o[l+1]=c>>16&255,o[l+2]=c>>8&255,o[l+3]=255&c}function deflateSyncUncompressed(t){var r=t.length,a=65535,o=Math.ceil(r/a),i=new Uint8Array(2+r+5*o+4),l=0;i[l++]=120,i[l++]=156;for(var u=0;r>a;)i[l++]=0,i[l++]=255,i[l++]=255,i[l++]=0,i[l++]=0,i.set(t.subarray(u,u+a),l),l+=a,u+=a,r-=a;i[l++]=1,i[l++]=255&r,i[l++]=r>>8&255,i[l++]=255&~r,i[l++]=(65535&~r)>>8&255,i.set(t.subarray(u),l),l+=t.length-u;var c=function adler32(t,r,a){for(var o=1,i=0,l=r;l<a;++l)i=(i+(o=(o+(255&t[l]))%65521))%65521;return i<<16|o}(t,0,t.length);return i[l++]=c>>24&255,i[l++]=c>>16&255,i[l++]=c>>8&255,i[l++]=255&c,i}function encode(r,a,i,u){var c,d,h,p=r.width,m=r.height,v=r.data;switch(a){case o.ImageKind.GRAYSCALE_1BPP:d=0,c=1,h=p+7>>3;break;case o.ImageKind.RGB_24BPP:d=2,c=8,h=3*p;break;case o.ImageKind.RGBA_32BPP:d=6,c=8,h=4*p;break;default:throw new Error("invalid format")}for(var g=new Uint8Array((1+h)*m),y=0,b=0,_=0;_<m;++_)g[y++]=0,g.set(v.subarray(b,b+h),y),b+=h,y+=h;if(a===o.ImageKind.GRAYSCALE_1BPP&&u){y=0;for(var S=0;S<m;S++){y++;for(var A=0;A<h;A++)g[y++]^=255}}var C=new Uint8Array([p>>24&255,p>>16&255,p>>8&255,255&p,m>>24&255,m>>16&255,m>>8&255,255&m,c,d,0,0,0]),R=function deflateSync(t){if(!l.isNodeJS)return deflateSyncUncompressed(t);try{var r;r=parseInt(process.versions.node)>=8?t:Buffer.from(t);var a=require("zlib").deflateSync(r,{level:9});return a instanceof Uint8Array?a:new Uint8Array(a)}catch(t){(0,o.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+t)}return deflateSyncUncompressed(t)}(g),k=t.length+36+C.length+R.length,P=new Uint8Array(k),w=0;return P.set(t,w),writePngChunk("IHDR",C,P,w+=t.length),writePngChunk("IDATA",R,P,w+=12+C.length),w+=12+R.length,writePngChunk("IEND",new Uint8Array(0),P,w),(0,o.createObjectURL)(P,"image/png",i)}return function convertImgDataToPng(t,r,a){return encode(t,void 0===t.kind?o.ImageKind.GRAYSCALE_1BPP:t.kind,r,a)}}(),g=function(){function SVGExtraState(){_classCallCheck(this,SVGExtraState),this.fontSizeScale=1,this.fontWeight=h.fontWeight,this.fontSize=0,this.textMatrix=o.IDENTITY_MATRIX,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=o.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=h.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}return _createClass(SVGExtraState,[{key:"clone",value:function clone(){return Object.create(this)}},{key:"setCurrentPoint",value:function setCurrentPoint(t,r){this.x=t,this.y=r}}]),SVGExtraState}(),y=0,b=0,_=0;r.SVGGraphics=u=function(){function SVGGraphics(t,r){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(var l in _classCallCheck(this,SVGGraphics),this.svgFactory=new i.DOMSVGFactory,this.current=new g,this.transformMatrix=o.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=t,this.objs=r,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!a,this._operatorIdMapping=[],o.OPS)this._operatorIdMapping[o.OPS[l]]=l}return _createClass(SVGGraphics,[{key:"save",value:function save(){this.transformStack.push(this.transformMatrix);var t=this.current;this.extraStack.push(t),this.current=t.clone()}},{key:"restore",value:function restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}},{key:"group",value:function group(t){this.save(),this.executeOpTree(t),this.restore()}},{key:"loadDependencies",value:function loadDependencies(t){for(var r=this,a=t.fnArray,i=t.argsArray,l=0,u=a.length;l<u;l++)if(a[l]===o.OPS.dependency){var c,d=_createForOfIteratorHelper(i[l]);try{var h=function _loop(){var t=c.value,a=t.startsWith("g_")?r.commonObjs:r.objs,o=new Promise((function(r){a.get(t,r)}));r.current.dependencies.push(o)};for(d.s();!(c=d.n()).done;)h()}catch(t){d.e(t)}finally{d.f()}}return Promise.all(this.current.dependencies)}},{key:"transform",value:function transform(t,r,a,i,l,u){var c=[t,r,a,i,l,u];this.transformMatrix=o.Util.transform(this.transformMatrix,c),this.tgrp=null}},{key:"getSVG",value:function getSVG(t,r){var a=this;this.viewport=r;var i=this._initialize(r);return this.loadDependencies(t).then((function(){return a.transformMatrix=o.IDENTITY_MATRIX,a.executeOpTree(a.convertOpList(t)),i}))}},{key:"convertOpList",value:function convertOpList(t){for(var r=this._operatorIdMapping,a=t.argsArray,o=t.fnArray,i=[],l=0,u=o.length;l<u;l++){var c=o[l];i.push({fnId:c,fn:r[c],args:a[l]})}return function opListToTree(t){var r,a=[],o=[],i=_createForOfIteratorHelper(t);try{for(i.s();!(r=i.n()).done;){var l=r.value;"save"!==l.fn?"restore"===l.fn?a=o.pop():a.push(l):(a.push({fnId:92,fn:"group",items:[]}),o.push(a),a=a[a.length-1].items)}}catch(t){i.e(t)}finally{i.f()}return a}(i)}},{key:"executeOpTree",value:function executeOpTree(t){var r,a=_createForOfIteratorHelper(t);try{for(a.s();!(r=a.n()).done;){var i=r.value,l=i.fn,u=i.fnId,c=i.args;switch(0|u){case o.OPS.beginText:this.beginText();break;case o.OPS.dependency:break;case o.OPS.setLeading:this.setLeading(c);break;case o.OPS.setLeadingMoveText:this.setLeadingMoveText(c[0],c[1]);break;case o.OPS.setFont:this.setFont(c);break;case o.OPS.showText:case o.OPS.showSpacedText:this.showText(c[0]);break;case o.OPS.endText:this.endText();break;case o.OPS.moveText:this.moveText(c[0],c[1]);break;case o.OPS.setCharSpacing:this.setCharSpacing(c[0]);break;case o.OPS.setWordSpacing:this.setWordSpacing(c[0]);break;case o.OPS.setHScale:this.setHScale(c[0]);break;case o.OPS.setTextMatrix:this.setTextMatrix(c[0],c[1],c[2],c[3],c[4],c[5]);break;case o.OPS.setTextRise:this.setTextRise(c[0]);break;case o.OPS.setTextRenderingMode:this.setTextRenderingMode(c[0]);break;case o.OPS.setLineWidth:this.setLineWidth(c[0]);break;case o.OPS.setLineJoin:this.setLineJoin(c[0]);break;case o.OPS.setLineCap:this.setLineCap(c[0]);break;case o.OPS.setMiterLimit:this.setMiterLimit(c[0]);break;case o.OPS.setFillRGBColor:this.setFillRGBColor(c[0],c[1],c[2]);break;case o.OPS.setStrokeRGBColor:this.setStrokeRGBColor(c[0],c[1],c[2]);break;case o.OPS.setStrokeColorN:this.setStrokeColorN(c);break;case o.OPS.setFillColorN:this.setFillColorN(c);break;case o.OPS.shadingFill:this.shadingFill(c[0]);break;case o.OPS.setDash:this.setDash(c[0],c[1]);break;case o.OPS.setRenderingIntent:this.setRenderingIntent(c[0]);break;case o.OPS.setFlatness:this.setFlatness(c[0]);break;case o.OPS.setGState:this.setGState(c[0]);break;case o.OPS.fill:this.fill();break;case o.OPS.eoFill:this.eoFill();break;case o.OPS.stroke:this.stroke();break;case o.OPS.fillStroke:this.fillStroke();break;case o.OPS.eoFillStroke:this.eoFillStroke();break;case o.OPS.clip:this.clip("nonzero");break;case o.OPS.eoClip:this.clip("evenodd");break;case o.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case o.OPS.paintImageXObject:this.paintImageXObject(c[0]);break;case o.OPS.paintInlineImageXObject:this.paintInlineImageXObject(c[0]);break;case o.OPS.paintImageMaskXObject:this.paintImageMaskXObject(c[0]);break;case o.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(c[0],c[1]);break;case o.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case o.OPS.closePath:this.closePath();break;case o.OPS.closeStroke:this.closeStroke();break;case o.OPS.closeFillStroke:this.closeFillStroke();break;case o.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case o.OPS.nextLine:this.nextLine();break;case o.OPS.transform:this.transform(c[0],c[1],c[2],c[3],c[4],c[5]);break;case o.OPS.constructPath:this.constructPath(c[0],c[1]);break;case o.OPS.endPath:this.endPath();break;case 92:this.group(i.items);break;default:(0,o.warn)("Unimplemented operator ".concat(l))}}}catch(t){a.e(t)}finally{a.f()}}},{key:"setWordSpacing",value:function setWordSpacing(t){this.current.wordSpacing=t}},{key:"setCharSpacing",value:function setCharSpacing(t){this.current.charSpacing=t}},{key:"nextLine",value:function nextLine(){this.moveText(0,this.current.leading)}},{key:"setTextMatrix",value:function setTextMatrix(t,r,a,o,i,l){var u=this.current;u.textMatrix=u.lineMatrix=[t,r,a,o,i,l],u.textMatrixScale=Math.sqrt(t*t+r*r),u.x=u.lineX=0,u.y=u.lineY=0,u.xcoords=[],u.ycoords=[],u.tspan=this.svgFactory.createElement("svg:tspan"),u.tspan.setAttributeNS(null,"font-family",u.fontFamily),u.tspan.setAttributeNS(null,"font-size","".concat(c(u.fontSize),"px")),u.tspan.setAttributeNS(null,"y",c(-u.y)),u.txtElement=this.svgFactory.createElement("svg:text"),u.txtElement.appendChild(u.tspan)}},{key:"beginText",value:function beginText(){var t=this.current;t.x=t.lineX=0,t.y=t.lineY=0,t.textMatrix=o.IDENTITY_MATRIX,t.lineMatrix=o.IDENTITY_MATRIX,t.textMatrixScale=1,t.tspan=this.svgFactory.createElement("svg:tspan"),t.txtElement=this.svgFactory.createElement("svg:text"),t.txtgrp=this.svgFactory.createElement("svg:g"),t.xcoords=[],t.ycoords=[]}},{key:"moveText",value:function moveText(t,r){var a=this.current;a.x=a.lineX+=t,a.y=a.lineY+=r,a.xcoords=[],a.ycoords=[],a.tspan=this.svgFactory.createElement("svg:tspan"),a.tspan.setAttributeNS(null,"font-family",a.fontFamily),a.tspan.setAttributeNS(null,"font-size","".concat(c(a.fontSize),"px")),a.tspan.setAttributeNS(null,"y",c(-a.y))}},{key:"showText",value:function showText(t){var r=this.current,a=r.font,i=r.fontSize;if(0!==i){var l,u=r.fontSizeScale,p=r.charSpacing,m=r.wordSpacing,v=r.fontDirection,g=r.textHScale*v,y=a.vertical,b=y?1:-1,_=a.defaultVMetrics,S=i*r.fontMatrix[0],A=0,C=_createForOfIteratorHelper(t);try{for(C.s();!(l=C.n()).done;){var R=l.value;if(null!==R)if((0,o.isNum)(R))A+=b*R*i/1e3;else{var k=(R.isSpace?m:0)+p,P=R.fontChar,w=void 0,x=void 0,T=R.width;if(y){var E=void 0,O=R.vmetric||_;E=-(E=R.vmetric?O[1]:.5*T)*S;var I=O[2]*S;T=O?-O[0]:T,w=E/u,x=(A+I)/u}else w=A/u,x=0;(R.isInFont||a.missingFile)&&(r.xcoords.push(r.x+w),y&&r.ycoords.push(-r.y+x),r.tspan.textContent+=P);A+=y?T*S-k*v:T*S+k*v}else A+=v*m}}catch(t){C.e(t)}finally{C.f()}r.tspan.setAttributeNS(null,"x",r.xcoords.map(c).join(" ")),y?r.tspan.setAttributeNS(null,"y",r.ycoords.map(c).join(" ")):r.tspan.setAttributeNS(null,"y",c(-r.y)),y?r.y-=A:r.x+=A*g,r.tspan.setAttributeNS(null,"font-family",r.fontFamily),r.tspan.setAttributeNS(null,"font-size","".concat(c(r.fontSize),"px")),r.fontStyle!==h.fontStyle&&r.tspan.setAttributeNS(null,"font-style",r.fontStyle),r.fontWeight!==h.fontWeight&&r.tspan.setAttributeNS(null,"font-weight",r.fontWeight);var D=r.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;if(D===o.TextRenderingMode.FILL||D===o.TextRenderingMode.FILL_STROKE?(r.fillColor!==h.fillColor&&r.tspan.setAttributeNS(null,"fill",r.fillColor),r.fillAlpha<1&&r.tspan.setAttributeNS(null,"fill-opacity",r.fillAlpha)):r.textRenderingMode===o.TextRenderingMode.ADD_TO_PATH?r.tspan.setAttributeNS(null,"fill","transparent"):r.tspan.setAttributeNS(null,"fill","none"),D===o.TextRenderingMode.STROKE||D===o.TextRenderingMode.FILL_STROKE){var L=1/(r.textMatrixScale||1);this._setStrokeAttributes(r.tspan,L)}var W=r.textMatrix;0!==r.textRise&&((W=W.slice())[5]+=r.textRise),r.txtElement.setAttributeNS(null,"transform","".concat(d(W)," scale(").concat(c(g),", -1)")),r.txtElement.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),r.txtElement.appendChild(r.tspan),r.txtgrp.appendChild(r.txtElement),this._ensureTransformGroup().appendChild(r.txtElement)}}},{key:"setLeadingMoveText",value:function setLeadingMoveText(t,r){this.setLeading(-r),this.moveText(t,r)}},{key:"addFontStyle",value:function addFontStyle(t){if(!t.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));var r=(0,o.createObjectURL)(t.data,t.mimetype,this.forceDataSchema);this.cssStyle.textContent+='@font-face { font-family: "'.concat(t.loadedName,'";')+" src: url(".concat(r,"); }\n")}},{key:"setFont",value:function setFont(t){var r=this.current,a=this.commonObjs.get(t[0]),i=t[1];r.font=a,!this.embedFonts||a.missingFile||this.embeddedFonts[a.loadedName]||(this.addFontStyle(a),this.embeddedFonts[a.loadedName]=a),r.fontMatrix=a.fontMatrix?a.fontMatrix:o.FONT_IDENTITY_MATRIX;var l="normal";a.black?l="900":a.bold&&(l="bold");var u=a.italic?"italic":"normal";i<0?(i=-i,r.fontDirection=-1):r.fontDirection=1,r.fontSize=i,r.fontFamily=a.loadedName,r.fontWeight=l,r.fontStyle=u,r.tspan=this.svgFactory.createElement("svg:tspan"),r.tspan.setAttributeNS(null,"y",c(-r.y)),r.xcoords=[],r.ycoords=[]}},{key:"endText",value:function endText(){var t=this.current;t.textRenderingMode&o.TextRenderingMode.ADD_TO_PATH_FLAG&&t.txtElement&&t.txtElement.hasChildNodes()&&(t.element=t.txtElement,this.clip("nonzero"),this.endPath())}},{key:"setLineWidth",value:function setLineWidth(t){t>0&&(this.current.lineWidth=t)}},{key:"setLineCap",value:function setLineCap(t){this.current.lineCap=p[t]}},{key:"setLineJoin",value:function setLineJoin(t){this.current.lineJoin=m[t]}},{key:"setMiterLimit",value:function setMiterLimit(t){this.current.miterLimit=t}},{key:"setStrokeAlpha",value:function setStrokeAlpha(t){this.current.strokeAlpha=t}},{key:"setStrokeRGBColor",value:function setStrokeRGBColor(t,r,a){this.current.strokeColor=o.Util.makeCssRgb(t,r,a)}},{key:"setFillAlpha",value:function setFillAlpha(t){this.current.fillAlpha=t}},{key:"setFillRGBColor",value:function setFillRGBColor(t,r,a){this.current.fillColor=o.Util.makeCssRgb(t,r,a),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}},{key:"setStrokeColorN",value:function setStrokeColorN(t){this.current.strokeColor=this._makeColorN_Pattern(t)}},{key:"setFillColorN",value:function setFillColorN(t){this.current.fillColor=this._makeColorN_Pattern(t)}},{key:"shadingFill",value:function shadingFill(t){var r=this.viewport.width,a=this.viewport.height,i=o.Util.inverseTransform(this.transformMatrix),l=o.Util.applyTransform([0,0],i),u=o.Util.applyTransform([0,a],i),c=o.Util.applyTransform([r,0],i),d=o.Util.applyTransform([r,a],i),h=Math.min(l[0],u[0],c[0],d[0]),p=Math.min(l[1],u[1],c[1],d[1]),m=Math.max(l[0],u[0],c[0],d[0]),v=Math.max(l[1],u[1],c[1],d[1]),g=this.svgFactory.createElement("svg:rect");g.setAttributeNS(null,"x",h),g.setAttributeNS(null,"y",p),g.setAttributeNS(null,"width",m-h),g.setAttributeNS(null,"height",v-p),g.setAttributeNS(null,"fill",this._makeShadingPattern(t)),this.current.fillAlpha<1&&g.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(g)}},{key:"_makeColorN_Pattern",value:function _makeColorN_Pattern(t){return"TilingPattern"===t[0]?this._makeTilingPattern(t):this._makeShadingPattern(t)}},{key:"_makeTilingPattern",value:function _makeTilingPattern(t){var r=t[1],a=t[2],i=t[3]||o.IDENTITY_MATRIX,l=_slicedToArray(t[4],4),u=l[0],c=l[1],d=l[2],h=l[3],p=t[5],m=t[6],v=t[7],g="shading".concat(_++),y=_slicedToArray(o.Util.applyTransform([u,c],i),2),b=y[0],S=y[1],A=_slicedToArray(o.Util.applyTransform([d,h],i),2),C=A[0],R=A[1],k=_slicedToArray(o.Util.singularValueDecompose2dScale(i),2),P=p*k[0],w=m*k[1],x=this.svgFactory.createElement("svg:pattern");x.setAttributeNS(null,"id",g),x.setAttributeNS(null,"patternUnits","userSpaceOnUse"),x.setAttributeNS(null,"width",P),x.setAttributeNS(null,"height",w),x.setAttributeNS(null,"x","".concat(b)),x.setAttributeNS(null,"y","".concat(S));var T=this.svg,E=this.transformMatrix,O=this.current.fillColor,I=this.current.strokeColor,D=this.svgFactory.create(C-b,R-S);if(this.svg=D,this.transformMatrix=i,2===v){var L=o.Util.makeCssRgb.apply(o.Util,_toConsumableArray(r));this.current.fillColor=L,this.current.strokeColor=L}return this.executeOpTree(this.convertOpList(a)),this.svg=T,this.transformMatrix=E,this.current.fillColor=O,this.current.strokeColor=I,x.appendChild(D.childNodes[0]),this.defs.appendChild(x),"url(#".concat(g,")")}},{key:"_makeShadingPattern",value:function _makeShadingPattern(t){switch(t[0]){case"RadialAxial":var r,a="shading".concat(_++),i=t[3];switch(t[1]){case"axial":var l=t[4],u=t[5];(r=this.svgFactory.createElement("svg:linearGradient")).setAttributeNS(null,"id",a),r.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),r.setAttributeNS(null,"x1",l[0]),r.setAttributeNS(null,"y1",l[1]),r.setAttributeNS(null,"x2",u[0]),r.setAttributeNS(null,"y2",u[1]);break;case"radial":var c=t[4],d=t[5],h=t[6],p=t[7];(r=this.svgFactory.createElement("svg:radialGradient")).setAttributeNS(null,"id",a),r.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),r.setAttributeNS(null,"cx",d[0]),r.setAttributeNS(null,"cy",d[1]),r.setAttributeNS(null,"r",p),r.setAttributeNS(null,"fx",c[0]),r.setAttributeNS(null,"fy",c[1]),r.setAttributeNS(null,"fr",h);break;default:throw new Error("Unknown RadialAxial type: ".concat(t[1]))}var m,v=_createForOfIteratorHelper(i);try{for(v.s();!(m=v.n()).done;){var g=m.value,y=this.svgFactory.createElement("svg:stop");y.setAttributeNS(null,"offset",g[0]),y.setAttributeNS(null,"stop-color",g[1]),r.appendChild(y)}}catch(t){v.e(t)}finally{v.f()}return this.defs.appendChild(r),"url(#".concat(a,")");case"Mesh":return(0,o.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error("Unknown IR type: ".concat(t[0]))}}},{key:"setDash",value:function setDash(t,r){this.current.dashArray=t,this.current.dashPhase=r}},{key:"constructPath",value:function constructPath(t,r){var a,i=this.current,l=i.x,u=i.y,d=[],h=0,p=_createForOfIteratorHelper(t);try{for(p.s();!(a=p.n()).done;){switch(0|a.value){case o.OPS.rectangle:l=r[h++],u=r[h++];var m=r[h++],v=r[h++],g=l+m,y=u+v;d.push("M",c(l),c(u),"L",c(g),c(u),"L",c(g),c(y),"L",c(l),c(y),"Z");break;case o.OPS.moveTo:l=r[h++],u=r[h++],d.push("M",c(l),c(u));break;case o.OPS.lineTo:l=r[h++],u=r[h++],d.push("L",c(l),c(u));break;case o.OPS.curveTo:l=r[h+4],u=r[h+5],d.push("C",c(r[h]),c(r[h+1]),c(r[h+2]),c(r[h+3]),c(l),c(u)),h+=6;break;case o.OPS.curveTo2:d.push("C",c(l),c(u),c(r[h]),c(r[h+1]),c(r[h+2]),c(r[h+3])),l=r[h+2],u=r[h+3],h+=4;break;case o.OPS.curveTo3:l=r[h+2],u=r[h+3],d.push("C",c(r[h]),c(r[h+1]),c(l),c(u),c(l),c(u)),h+=4;break;case o.OPS.closePath:d.push("Z")}}}catch(t){p.e(t)}finally{p.f()}d=d.join(" "),i.path&&t.length>0&&t[0]!==o.OPS.rectangle&&t[0]!==o.OPS.moveTo?d=i.path.getAttributeNS(null,"d")+d:(i.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(i.path)),i.path.setAttributeNS(null,"d",d),i.path.setAttributeNS(null,"fill","none"),i.element=i.path,i.setCurrentPoint(l,u)}},{key:"endPath",value:function endPath(){var t=this.current;if(t.path=null,this.pendingClip)if(t.element){var r="clippath".concat(y++),a=this.svgFactory.createElement("svg:clipPath");a.setAttributeNS(null,"id",r),a.setAttributeNS(null,"transform",d(this.transformMatrix));var o=t.element.cloneNode(!0);"evenodd"===this.pendingClip?o.setAttributeNS(null,"clip-rule","evenodd"):o.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,a.appendChild(o),this.defs.appendChild(a),t.activeClipUrl&&(t.clipGroup=null,this.extraStack.forEach((function(t){t.clipGroup=null})),a.setAttributeNS(null,"clip-path",t.activeClipUrl)),t.activeClipUrl="url(#".concat(r,")"),this.tgrp=null}else this.pendingClip=null}},{key:"clip",value:function clip(t){this.pendingClip=t}},{key:"closePath",value:function closePath(){var t=this.current;if(t.path){var r="".concat(t.path.getAttributeNS(null,"d"),"Z");t.path.setAttributeNS(null,"d",r)}}},{key:"setLeading",value:function setLeading(t){this.current.leading=-t}},{key:"setTextRise",value:function setTextRise(t){this.current.textRise=t}},{key:"setTextRenderingMode",value:function setTextRenderingMode(t){this.current.textRenderingMode=t}},{key:"setHScale",value:function setHScale(t){this.current.textHScale=t/100}},{key:"setRenderingIntent",value:function setRenderingIntent(t){}},{key:"setFlatness",value:function setFlatness(t){}},{key:"setGState",value:function setGState(t){var r,a=_createForOfIteratorHelper(t);try{for(a.s();!(r=a.n()).done;){var i=_slicedToArray(r.value,2),l=i[0],u=i[1];switch(l){case"LW":this.setLineWidth(u);break;case"LC":this.setLineCap(u);break;case"LJ":this.setLineJoin(u);break;case"ML":this.setMiterLimit(u);break;case"D":this.setDash(u[0],u[1]);break;case"RI":this.setRenderingIntent(u);break;case"FL":this.setFlatness(u);break;case"Font":this.setFont(u);break;case"CA":this.setStrokeAlpha(u);break;case"ca":this.setFillAlpha(u);break;default:(0,o.warn)("Unimplemented graphic state operator ".concat(l))}}}catch(t){a.e(t)}finally{a.f()}}},{key:"fill",value:function fill(){var t=this.current;t.element&&(t.element.setAttributeNS(null,"fill",t.fillColor),t.element.setAttributeNS(null,"fill-opacity",t.fillAlpha),this.endPath())}},{key:"stroke",value:function stroke(){var t=this.current;t.element&&(this._setStrokeAttributes(t.element),t.element.setAttributeNS(null,"fill","none"),this.endPath())}},{key:"_setStrokeAttributes",value:function _setStrokeAttributes(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=this.current,o=a.dashArray;1!==r&&o.length>0&&(o=o.map((function(t){return r*t}))),t.setAttributeNS(null,"stroke",a.strokeColor),t.setAttributeNS(null,"stroke-opacity",a.strokeAlpha),t.setAttributeNS(null,"stroke-miterlimit",c(a.miterLimit)),t.setAttributeNS(null,"stroke-linecap",a.lineCap),t.setAttributeNS(null,"stroke-linejoin",a.lineJoin),t.setAttributeNS(null,"stroke-width",c(r*a.lineWidth)+"px"),t.setAttributeNS(null,"stroke-dasharray",o.map(c).join(" ")),t.setAttributeNS(null,"stroke-dashoffset",c(r*a.dashPhase)+"px")}},{key:"eoFill",value:function eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}},{key:"fillStroke",value:function fillStroke(){this.stroke(),this.fill()}},{key:"eoFillStroke",value:function eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}},{key:"closeStroke",value:function closeStroke(){this.closePath(),this.stroke()}},{key:"closeFillStroke",value:function closeFillStroke(){this.closePath(),this.fillStroke()}},{key:"closeEOFillStroke",value:function closeEOFillStroke(){this.closePath(),this.eoFillStroke()}},{key:"paintSolidColorImageMask",value:function paintSolidColorImageMask(){var t=this.svgFactory.createElement("svg:rect");t.setAttributeNS(null,"x","0"),t.setAttributeNS(null,"y","0"),t.setAttributeNS(null,"width","1px"),t.setAttributeNS(null,"height","1px"),t.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(t)}},{key:"paintImageXObject",value:function paintImageXObject(t){var r=this.objs.get(t);r?this.paintInlineImageXObject(r):(0,o.warn)("Dependent image with object ID ".concat(t," is not ready yet"))}},{key:"paintInlineImageXObject",value:function paintInlineImageXObject(t,r){var a=t.width,o=t.height,i=v(t,this.forceDataSchema,!!r),l=this.svgFactory.createElement("svg:rect");l.setAttributeNS(null,"x","0"),l.setAttributeNS(null,"y","0"),l.setAttributeNS(null,"width",c(a)),l.setAttributeNS(null,"height",c(o)),this.current.element=l,this.clip("nonzero");var u=this.svgFactory.createElement("svg:image");u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i),u.setAttributeNS(null,"x","0"),u.setAttributeNS(null,"y",c(-o)),u.setAttributeNS(null,"width",c(a)+"px"),u.setAttributeNS(null,"height",c(o)+"px"),u.setAttributeNS(null,"transform","scale(".concat(c(1/a)," ").concat(c(-1/o),")")),r?r.appendChild(u):this._ensureTransformGroup().appendChild(u)}},{key:"paintImageMaskXObject",value:function paintImageMaskXObject(t){var r=this.current,a=t.width,o=t.height,i=r.fillColor;r.maskId="mask".concat(b++);var l=this.svgFactory.createElement("svg:mask");l.setAttributeNS(null,"id",r.maskId);var u=this.svgFactory.createElement("svg:rect");u.setAttributeNS(null,"x","0"),u.setAttributeNS(null,"y","0"),u.setAttributeNS(null,"width",c(a)),u.setAttributeNS(null,"height",c(o)),u.setAttributeNS(null,"fill",i),u.setAttributeNS(null,"mask","url(#".concat(r.maskId,")")),this.defs.appendChild(l),this._ensureTransformGroup().appendChild(u),this.paintInlineImageXObject(t,l)}},{key:"paintFormXObjectBegin",value:function paintFormXObjectBegin(t,r){if(Array.isArray(t)&&6===t.length&&this.transform(t[0],t[1],t[2],t[3],t[4],t[5]),r){var a=r[2]-r[0],o=r[3]-r[1],i=this.svgFactory.createElement("svg:rect");i.setAttributeNS(null,"x",r[0]),i.setAttributeNS(null,"y",r[1]),i.setAttributeNS(null,"width",c(a)),i.setAttributeNS(null,"height",c(o)),this.current.element=i,this.clip("nonzero"),this.endPath()}}},{key:"paintFormXObjectEnd",value:function paintFormXObjectEnd(){}},{key:"_initialize",value:function _initialize(t){var r=this.svgFactory.create(t.width,t.height),a=this.svgFactory.createElement("svg:defs");r.appendChild(a),this.defs=a;var o=this.svgFactory.createElement("svg:g");return o.setAttributeNS(null,"transform",d(t.transform)),r.appendChild(o),this.svg=o,r}},{key:"_ensureClipGroup",value:function _ensureClipGroup(){if(!this.current.clipGroup){var t=this.svgFactory.createElement("svg:g");t.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(t),this.current.clipGroup=t}return this.current.clipGroup}},{key:"_ensureTransformGroup",value:function _ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",d(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}]),SVGGraphics}()},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PDFNodeStream=void 0;var o=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(2)),i=a(5),l=a(213);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t})(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var a,o=_getPrototypeOf(t);if(r){var i=_getPrototypeOf(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function asyncGeneratorStep(t,r,a,o,i,l,u){try{var c=t[l](u),d=c.value}catch(t){return void a(t)}c.done?r(d):Promise.resolve(d).then(o,i)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(o,i){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,o,i,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,o,i,_next,_throw,"throw",t)}_next(void 0)}))}}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var o=r[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}var u=require("fs"),c=require("http"),d=require("https"),h=require("url"),p=/^file:\/\/\/[a-zA-Z]:\//;var m=function(){function PDFNodeStream(t){_classCallCheck(this,PDFNodeStream),this.source=t,this.url=function parseUrl(t){var r=h.parse(t);return"file:"===r.protocol||r.host?r:/^[a-z]:[/\\]/i.test(t)?h.parse("file:///".concat(t)):(r.host||(r.protocol="file:"),r)}(t.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}return _createClass(PDFNodeStream,[{key:"getFullReader",value:function getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new _(this):new y(this),this._fullRequestReader}},{key:"getRangeReader",value:function getRangeReader(t,r){if(r<=this._progressiveDataLength)return null;var a=this.isFsUrl?new S(this,t,r):new b(this,t,r);return this._rangeRequestReaders.push(a),a}},{key:"cancelAllRequests",value:function cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t),this._rangeRequestReaders.slice(0).forEach((function(r){r.cancel(t)}))}},{key:"_progressiveDataLength",get:function get(){return this._fullRequestReader?this._fullRequestReader._loaded:0}}]),PDFNodeStream}();r.PDFNodeStream=m;var v=function(){function BaseFullReader(t){_classCallCheck(this,BaseFullReader),this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;var r=t.source;this._contentLength=r.length,this._loaded=0,this._filename=null,this._disableRange=r.disableRange||!1,this._rangeChunkSize=r.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!r.disableStream,this._isRangeSupported=!r.disableRange,this._readableStream=null,this._readCapability=(0,i.createPromiseCapability)(),this._headersCapability=(0,i.createPromiseCapability)()}var t;return _createClass(BaseFullReader,[{key:"read",value:(t=_asyncToGenerator(o.default.mark((function _callee(){var t,r;return o.default.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this._readCapability.promise;case 2:if(!this._done){a.next=4;break}return a.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){a.next=6;break}throw this._storedError;case 6:if(null!==(t=this._readableStream.read())){a.next=10;break}return this._readCapability=(0,i.createPromiseCapability)(),a.abrupt("return",this.read());case 10:return this._loaded+=t.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),r=new Uint8Array(t).buffer,a.abrupt("return",{value:r,done:!1});case 14:case"end":return a.stop()}}),_callee,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}},{key:"_error",value:function _error(t){this._storedError=t,this._readCapability.resolve()}},{key:"_setReadableStream",value:function _setReadableStream(t){var r=this;this._readableStream=t,t.on("readable",(function(){r._readCapability.resolve()})),t.on("end",(function(){t.destroy(),r._done=!0,r._readCapability.resolve()})),t.on("error",(function(t){r._error(t)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new i.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}},{key:"headersReady",get:function get(){return this._headersCapability.promise}},{key:"filename",get:function get(){return this._filename}},{key:"contentLength",get:function get(){return this._contentLength}},{key:"isRangeSupported",get:function get(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported}}]),BaseFullReader}(),g=function(){function BaseRangeReader(t){_classCallCheck(this,BaseRangeReader),this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,i.createPromiseCapability)();var r=t.source;this._isStreamingSupported=!r.disableStream}var t;return _createClass(BaseRangeReader,[{key:"read",value:(t=_asyncToGenerator(o.default.mark((function _callee2(){var t,r;return o.default.wrap((function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this._readCapability.promise;case 2:if(!this._done){a.next=4;break}return a.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){a.next=6;break}throw this._storedError;case 6:if(null!==(t=this._readableStream.read())){a.next=10;break}return this._readCapability=(0,i.createPromiseCapability)(),a.abrupt("return",this.read());case 10:return this._loaded+=t.length,this.onProgress&&this.onProgress({loaded:this._loaded}),r=new Uint8Array(t).buffer,a.abrupt("return",{value:r,done:!1});case 14:case"end":return a.stop()}}),_callee2,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}},{key:"_error",value:function _error(t){this._storedError=t,this._readCapability.resolve()}},{key:"_setReadableStream",value:function _setReadableStream(t){var r=this;this._readableStream=t,t.on("readable",(function(){r._readCapability.resolve()})),t.on("end",(function(){t.destroy(),r._done=!0,r._readCapability.resolve()})),t.on("error",(function(t){r._error(t)})),this._storedError&&this._readableStream.destroy(this._storedError)}},{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported}}]),BaseRangeReader}();function createRequestOptions(t,r){return{protocol:t.protocol,auth:t.auth,host:t.hostname,port:t.port,path:t.path,method:"GET",headers:r}}var y=function(t){_inherits(PDFNodeStreamFullReader,t);var r=_createSuper(PDFNodeStreamFullReader);function PDFNodeStreamFullReader(t){var a;_classCallCheck(this,PDFNodeStreamFullReader);var o=function handleResponse(r){if(404===r.statusCode){var o=new i.MissingPDFException('Missing PDF "'.concat(a._url,'".'));return a._storedError=o,void a._headersCapability.reject(o)}a._headersCapability.resolve(),a._setReadableStream(r);var u=function getResponseHeader(t){return a._readableStream.headers[t.toLowerCase()]},c=(0,l.validateRangeRequestCapabilities)({getResponseHeader:u,isHttp:t.isHttp,rangeChunkSize:a._rangeChunkSize,disableRange:a._disableRange}),d=c.allowRangeRequests,h=c.suggestedLength;a._isRangeSupported=d,a._contentLength=h||a._contentLength,a._filename=(0,l.extractFilenameFromHeader)(u)};return(a=r.call(this,t))._request=null,"http:"===a._url.protocol?a._request=c.request(createRequestOptions(a._url,t.httpHeaders),o):a._request=d.request(createRequestOptions(a._url,t.httpHeaders),o),a._request.on("error",(function(t){a._storedError=t,a._headersCapability.reject(t)})),a._request.end(),a}return PDFNodeStreamFullReader}(v),b=function(t){_inherits(PDFNodeStreamRangeReader,t);var r=_createSuper(PDFNodeStreamRangeReader);function PDFNodeStreamRangeReader(t,a,o){var l;for(var u in _classCallCheck(this,PDFNodeStreamRangeReader),(l=r.call(this,t))._httpHeaders={},t.httpHeaders){var h=t.httpHeaders[u];void 0!==h&&(l._httpHeaders[u]=h)}l._httpHeaders.Range="bytes=".concat(a,"-").concat(o-1);var p=function handleResponse(t){if(404!==t.statusCode)l._setReadableStream(t);else{var r=new i.MissingPDFException('Missing PDF "'.concat(l._url,'".'));l._storedError=r}};return l._request=null,"http:"===l._url.protocol?l._request=c.request(createRequestOptions(l._url,l._httpHeaders),p):l._request=d.request(createRequestOptions(l._url,l._httpHeaders),p),l._request.on("error",(function(t){l._storedError=t})),l._request.end(),l}return PDFNodeStreamRangeReader}(g),_=function(t){_inherits(PDFNodeStreamFsFullReader,t);var r=_createSuper(PDFNodeStreamFsFullReader);function PDFNodeStreamFsFullReader(t){var a;_classCallCheck(this,PDFNodeStreamFsFullReader),a=r.call(this,t);var o=decodeURIComponent(a._url.path);return p.test(a._url.href)&&(o=o.replace(/^\//,"")),u.lstat(o,(function(t,r){if(t)return"ENOENT"===t.code&&(t=new i.MissingPDFException('Missing PDF "'.concat(o,'".'))),a._storedError=t,void a._headersCapability.reject(t);a._contentLength=r.size,a._setReadableStream(u.createReadStream(o)),a._headersCapability.resolve()})),a}return PDFNodeStreamFsFullReader}(v),S=function(t){_inherits(PDFNodeStreamFsRangeReader,t);var r=_createSuper(PDFNodeStreamFsRangeReader);function PDFNodeStreamFsRangeReader(t,a,o){var i;_classCallCheck(this,PDFNodeStreamFsRangeReader),i=r.call(this,t);var l=decodeURIComponent(i._url.path);return p.test(i._url.href)&&(l=l.replace(/^\//,"")),i._setReadableStream(u.createReadStream(l,{start:a,end:o-1})),i}return PDFNodeStreamFsRangeReader}(g)},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createResponseStatusError=function createResponseStatusError(t,r){if(404===t||0===t&&r.startsWith("file:"))return new o.MissingPDFException('Missing PDF "'+r+'".');return new o.UnexpectedResponseException("Unexpected server response ("+t+') while retrieving PDF "'+r+'".',t)},r.extractFilenameFromHeader=function extractFilenameFromHeader(t){var r=t("Content-Disposition");if(r){var a=(0,i.getFilenameFromContentDispositionHeader)(r);if(a.includes("%"))try{a=decodeURIComponent(a)}catch(t){}if(/\.pdf$/i.test(a))return a}return null},r.validateRangeRequestCapabilities=function validateRangeRequestCapabilities(t){var r=t.getResponseHeader,a=t.isHttp,i=t.rangeChunkSize,l=t.disableRange;(0,o.assert)(i>0,"Range chunk size must be larger than zero");var u={allowRangeRequests:!1,suggestedLength:void 0},c=parseInt(r("Content-Length"),10);if(!Number.isInteger(c))return u;if(u.suggestedLength=c,c<=2*i)return u;if(l||!a)return u;if("bytes"!==r("Accept-Ranges"))return u;if("identity"!==(r("Content-Encoding")||"identity"))return u;return u.allowRangeRequests=!0,u},r.validateResponseStatus=function validateResponseStatus(t){return 200===t||206===t};var o=a(5),i=a(214)},function(t,r,a){"use strict";function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var a=[],o=!0,i=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(o=(u=c.next()).done)&&(a.push(u.value),!r||a.length!==r);o=!0);}catch(t){i=!0,l=t}finally{try{o||null==c.return||c.return()}finally{if(i)throw l}}return a}(t,r)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,o=new Array(r);a<r;a++)o[a]=t[a];return o}Object.defineProperty(r,"__esModule",{value:!0}),r.getFilenameFromContentDispositionHeader=function getFilenameFromContentDispositionHeader(t){var r=!0,a=toParamRegExp("filename\\*","i").exec(t);if(a){var o=rfc2616unquote(a=a[1]);return fixupEncoding(o=rfc2047decode(o=rfc5987decode(o=unescape(o))))}if(a=function rfc2231getparam(t){var r,a=[],o=toParamRegExp("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(r=o.exec(t));){var i=_slicedToArray(r,4),l=i[1],u=i[2],c=i[3];if((l=parseInt(l,10))in a){if(0===l)break}else a[l]=[u,c]}for(var d=[],h=0;h<a.length&&h in a;++h){var p=_slicedToArray(a[h],2),m=p[0],v=p[1];v=rfc2616unquote(v),m&&(v=unescape(v),0===h&&(v=rfc5987decode(v))),d.push(v)}return d.join("")}(t)){return fixupEncoding(rfc2047decode(a))}if(a=toParamRegExp("filename","i").exec(t)){var i=rfc2616unquote(a=a[1]);return fixupEncoding(i=rfc2047decode(i))}function toParamRegExp(t,r){return new RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',r)}function textdecode(t,a){if(t){if(!/^[\x00-\xFF]+$/.test(a))return a;try{var o=new TextDecoder(t,{fatal:!0}),i=Array.from(a,(function(t){return 255&t.charCodeAt(0)}));a=o.decode(new Uint8Array(i)),r=!1}catch(o){if(/^utf-?8$/i.test(t))try{a=decodeURIComponent(escape(a)),r=!1}catch(t){}}}return a}function fixupEncoding(t){return r&&/[\x80-\xff]/.test(t)&&(t=textdecode("utf-8",t),r&&(t=textdecode("iso-8859-1",t))),t}function rfc2616unquote(t){if(t.startsWith('"')){for(var r=t.slice(1).split('\\"'),a=0;a<r.length;++a){var o=r[a].indexOf('"');-1!==o&&(r[a]=r[a].slice(0,o),r.length=a+1),r[a]=r[a].replace(/\\(.)/g,"$1")}t=r.join('"')}return t}function rfc5987decode(t){var r=t.indexOf("'");return-1===r?t:textdecode(t.slice(0,r),t.slice(r+1).replace(/^[^']*'/,""))}function rfc2047decode(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(t,r,a,o){if("q"===a||"Q"===a)return textdecode(r,o=(o=o.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,(function(t,r){return String.fromCharCode(parseInt(r,16))})));try{o=atob(o)}catch(t){}return textdecode(r,o)}))}return""}},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PDFNetworkStream=void 0;var o=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(2)),i=a(5),l=a(213);function asyncGeneratorStep(t,r,a,o,i,l,u){try{var c=t[l](u),d=c.value}catch(t){return void a(t)}c.done?r(d):Promise.resolve(d).then(o,i)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(o,i){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,o,i,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,o,i,_next,_throw,"throw",t)}_next(void 0)}))}}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var o=r[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}var u=function(){function NetworkManager(t,r){_classCallCheck(this,NetworkManager),this.url=t,r=r||{},this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&r.httpHeaders||{},this.withCredentials=r.withCredentials||!1,this.getXhr=r.getXhr||function NetworkManager_getXhr(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}return _createClass(NetworkManager,[{key:"requestRange",value:function requestRange(t,r,a){var o={begin:t,end:r};for(var i in a)o[i]=a[i];return this.request(o)}},{key:"requestFull",value:function requestFull(t){return this.request(t)}},{key:"request",value:function request(t){var r=this.getXhr(),a=this.currXhrId++,o=this.pendingRequests[a]={xhr:r};for(var i in r.open("GET",this.url),r.withCredentials=this.withCredentials,this.httpHeaders){var l=this.httpHeaders[i];void 0!==l&&r.setRequestHeader(i,l)}return this.isHttp&&"begin"in t&&"end"in t?(r.setRequestHeader("Range","bytes=".concat(t.begin,"-").concat(t.end-1)),o.expectedStatus=206):o.expectedStatus=200,r.responseType="arraybuffer",t.onError&&(r.onerror=function(a){t.onError(r.status)}),r.onreadystatechange=this.onStateChange.bind(this,a),r.onprogress=this.onProgress.bind(this,a),o.onHeadersReceived=t.onHeadersReceived,o.onDone=t.onDone,o.onError=t.onError,o.onProgress=t.onProgress,r.send(null),a}},{key:"onProgress",value:function onProgress(t,r){var a=this.pendingRequests[t];a&&a.onProgress&&a.onProgress(r)}},{key:"onStateChange",value:function onStateChange(t,r){var a=this.pendingRequests[t];if(a){var o=a.xhr;if(o.readyState>=2&&a.onHeadersReceived&&(a.onHeadersReceived(),delete a.onHeadersReceived),4===o.readyState&&t in this.pendingRequests)if(delete this.pendingRequests[t],0===o.status&&this.isHttp)a.onError&&a.onError(o.status);else{var l=o.status||200;if(200===l&&206===a.expectedStatus||l===a.expectedStatus){var u=function getArrayBuffer(t){var r=t.response;return"string"!=typeof r?r:(0,i.stringToBytes)(r).buffer}(o);if(206===l){var c=o.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);a.onDone({begin:parseInt(d[1],10),chunk:u})}else u?a.onDone({begin:0,chunk:u}):a.onError&&a.onError(o.status)}else a.onError&&a.onError(o.status)}}}},{key:"hasPendingRequests",value:function hasPendingRequests(){for(var t in this.pendingRequests)return!0;return!1}},{key:"getRequestXhr",value:function getRequestXhr(t){return this.pendingRequests[t].xhr}},{key:"isPendingRequest",value:function isPendingRequest(t){return t in this.pendingRequests}},{key:"abortAllRequests",value:function abortAllRequests(){for(var t in this.pendingRequests)this.abortRequest(0|t)}},{key:"abortRequest",value:function abortRequest(t){var r=this.pendingRequests[t].xhr;delete this.pendingRequests[t],r.abort()}}]),NetworkManager}(),c=function(){function PDFNetworkStream(t){_classCallCheck(this,PDFNetworkStream),this._source=t,this._manager=new u(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials}),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}return _createClass(PDFNetworkStream,[{key:"_onRangeRequestReaderClosed",value:function _onRangeRequestReaderClosed(t){var r=this._rangeRequestReaders.indexOf(t);r>=0&&this._rangeRequestReaders.splice(r,1)}},{key:"getFullReader",value:function getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new d(this._manager,this._source),this._fullRequestReader}},{key:"getRangeReader",value:function getRangeReader(t,r){var a=new h(this._manager,t,r);return a.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(a),a}},{key:"cancelAllRequests",value:function cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t),this._rangeRequestReaders.slice(0).forEach((function(r){r.cancel(t)}))}}]),PDFNetworkStream}();r.PDFNetworkStream=c;var d=function(){function PDFNetworkStreamFullRequestReader(t,r){_classCallCheck(this,PDFNetworkStreamFullRequestReader),this._manager=t;var a={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=r.url,this._fullRequestId=t.requestFull(a),this._headersReceivedCapability=(0,i.createPromiseCapability)(),this._disableRange=r.disableRange||!1,this._contentLength=r.length,this._rangeChunkSize=r.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}var t;return _createClass(PDFNetworkStreamFullRequestReader,[{key:"_onHeadersReceived",value:function _onHeadersReceived(){var t=this._fullRequestId,r=this._manager.getRequestXhr(t),a=function getResponseHeader(t){return r.getResponseHeader(t)},o=(0,l.validateRangeRequestCapabilities)({getResponseHeader:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange}),i=o.allowRangeRequests,u=o.suggestedLength;i&&(this._isRangeSupported=!0),this._contentLength=u||this._contentLength,this._filename=(0,l.extractFilenameFromHeader)(a),this._isRangeSupported&&this._manager.abortRequest(t),this._headersReceivedCapability.resolve()}},{key:"_onDone",value:function _onDone(t){t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk));this._done=!0,this._cachedChunks.length>0||(this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})})),this._requests=[])}},{key:"_onError",value:function _onError(t){var r=this._url,a=(0,l.createResponseStatusError)(t,r);this._storedError=a,this._headersReceivedCapability.reject(a),this._requests.forEach((function(t){t.reject(a)})),this._requests=[],this._cachedChunks=[]}},{key:"_onProgress",value:function _onProgress(t){this.onProgress&&this.onProgress({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}},{key:"read",value:(t=_asyncToGenerator(o.default.mark((function _callee(){var t,r;return o.default.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:if(!this._storedError){a.next=2;break}throw this._storedError;case 2:if(!(this._cachedChunks.length>0)){a.next=5;break}return t=this._cachedChunks.shift(),a.abrupt("return",{value:t,done:!1});case 5:if(!this._done){a.next=7;break}return a.abrupt("return",{value:void 0,done:!0});case 7:return r=(0,i.createPromiseCapability)(),this._requests.push(r),a.abrupt("return",r.promise);case 10:case"end":return a.stop()}}),_callee,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._done=!0,this._headersReceivedCapability.reject(t),this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})})),this._requests=[],this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}},{key:"filename",get:function get(){return this._filename}},{key:"isRangeSupported",get:function get(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported}},{key:"contentLength",get:function get(){return this._contentLength}},{key:"headersReady",get:function get(){return this._headersReceivedCapability.promise}}]),PDFNetworkStreamFullRequestReader}(),h=function(){function PDFNetworkStreamRangeRequestReader(t,r,a){_classCallCheck(this,PDFNetworkStreamRangeRequestReader),this._manager=t;var o={onDone:this._onDone.bind(this),onProgress:this._onProgress.bind(this)};this._requestId=t.requestRange(r,a,o),this._requests=[],this._queuedChunk=null,this._done=!1,this.onProgress=null,this.onClosed=null}var t;return _createClass(PDFNetworkStreamRangeRequestReader,[{key:"_close",value:function _close(){this.onClosed&&this.onClosed(this)}},{key:"_onDone",value:function _onDone(t){var r=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:r,done:!1}):this._queuedChunk=r;this._done=!0,this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})})),this._requests=[],this._close()}},{key:"_onProgress",value:function _onProgress(t){!this.isStreamingSupported&&this.onProgress&&this.onProgress({loaded:t.loaded})}},{key:"read",value:(t=_asyncToGenerator(o.default.mark((function _callee2(){var t,r;return o.default.wrap((function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:if(null===this._queuedChunk){a.next=4;break}return t=this._queuedChunk,this._queuedChunk=null,a.abrupt("return",{value:t,done:!1});case 4:if(!this._done){a.next=6;break}return a.abrupt("return",{value:void 0,done:!0});case 6:return r=(0,i.createPromiseCapability)(),this._requests.push(r),a.abrupt("return",r.promise);case 9:case"end":return a.stop()}}),_callee2,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._done=!0,this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})})),this._requests=[],this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}},{key:"isStreamingSupported",get:function get(){return!1}}]),PDFNetworkStreamRangeRequestReader}()},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PDFFetchStream=void 0;var o=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(2)),i=a(5),l=a(213);function asyncGeneratorStep(t,r,a,o,i,l,u){try{var c=t[l](u),d=c.value}catch(t){return void a(t)}c.done?r(d):Promise.resolve(d).then(o,i)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(o,i){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,o,i,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,o,i,_next,_throw,"throw",t)}_next(void 0)}))}}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var o=r[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}function createFetchOptions(t,r,a){return{method:"GET",headers:t,signal:a&&a.signal,mode:"cors",credentials:r?"include":"same-origin",redirect:"follow"}}function createHeaders(t){var r=new Headers;for(var a in t){var o=t[a];void 0!==o&&r.append(a,o)}return r}var u=function(){function PDFFetchStream(t){_classCallCheck(this,PDFFetchStream),this.source=t,this.isHttp=/^https?:/i.test(t.url),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}return _createClass(PDFFetchStream,[{key:"getFullReader",value:function getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new c(this),this._fullRequestReader}},{key:"getRangeReader",value:function getRangeReader(t,r){if(r<=this._progressiveDataLength)return null;var a=new d(this,t,r);return this._rangeRequestReaders.push(a),a}},{key:"cancelAllRequests",value:function cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t),this._rangeRequestReaders.slice(0).forEach((function(r){r.cancel(t)}))}},{key:"_progressiveDataLength",get:function get(){return this._fullRequestReader?this._fullRequestReader._loaded:0}}]),PDFFetchStream}();r.PDFFetchStream=u;var c=function(){function PDFFetchStreamReader(t){var r=this;_classCallCheck(this,PDFFetchStreamReader),this._stream=t,this._reader=null,this._loaded=0,this._filename=null;var a=t.source;this._withCredentials=a.withCredentials||!1,this._contentLength=a.length,this._headersCapability=(0,i.createPromiseCapability)(),this._disableRange=a.disableRange||!1,this._rangeChunkSize=a.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._isStreamingSupported=!a.disableStream,this._isRangeSupported=!a.disableRange,this._headers=createHeaders(this._stream.httpHeaders);var o=a.url;fetch(o,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then((function(t){if(!(0,l.validateResponseStatus)(t.status))throw(0,l.createResponseStatusError)(t.status,o);r._reader=t.body.getReader(),r._headersCapability.resolve();var a=function getResponseHeader(r){return t.headers.get(r)},u=(0,l.validateRangeRequestCapabilities)({getResponseHeader:a,isHttp:r._stream.isHttp,rangeChunkSize:r._rangeChunkSize,disableRange:r._disableRange}),c=u.allowRangeRequests,d=u.suggestedLength;r._isRangeSupported=c,r._contentLength=d||r._contentLength,r._filename=(0,l.extractFilenameFromHeader)(a),!r._isStreamingSupported&&r._isRangeSupported&&r.cancel(new i.AbortException("Streaming is disabled."))})).catch(this._headersCapability.reject),this.onProgress=null}var t;return _createClass(PDFFetchStreamReader,[{key:"read",value:(t=_asyncToGenerator(o.default.mark((function _callee(){var t,r,a,i;return o.default.wrap((function _callee$(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this._headersCapability.promise;case 2:return o.next=4,this._reader.read();case 4:if(t=o.sent,r=t.value,!(a=t.done)){o.next=9;break}return o.abrupt("return",{value:r,done:a});case 9:return this._loaded+=r.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),i=new Uint8Array(r).buffer,o.abrupt("return",{value:i,done:!1});case 13:case"end":return o.stop()}}),_callee,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._reader&&this._reader.cancel(t),this._abortController&&this._abortController.abort()}},{key:"headersReady",get:function get(){return this._headersCapability.promise}},{key:"filename",get:function get(){return this._filename}},{key:"contentLength",get:function get(){return this._contentLength}},{key:"isRangeSupported",get:function get(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported}}]),PDFFetchStreamReader}(),d=function(){function PDFFetchStreamRangeReader(t,r,a){var o=this;_classCallCheck(this,PDFFetchStreamRangeReader),this._stream=t,this._reader=null,this._loaded=0;var u=t.source;this._withCredentials=u.withCredentials||!1,this._readCapability=(0,i.createPromiseCapability)(),this._isStreamingSupported=!u.disableStream,"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._headers=createHeaders(this._stream.httpHeaders),this._headers.append("Range","bytes=".concat(r,"-").concat(a-1));var c=u.url;fetch(c,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then((function(t){if(!(0,l.validateResponseStatus)(t.status))throw(0,l.createResponseStatusError)(t.status,c);o._readCapability.resolve(),o._reader=t.body.getReader()})),this.onProgress=null}var t;return _createClass(PDFFetchStreamRangeReader,[{key:"read",value:(t=_asyncToGenerator(o.default.mark((function _callee2(){var t,r,a,i;return o.default.wrap((function _callee2$(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this._readCapability.promise;case 2:return o.next=4,this._reader.read();case 4:if(t=o.sent,r=t.value,!(a=t.done)){o.next=9;break}return o.abrupt("return",{value:r,done:a});case 9:return this._loaded+=r.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),i=new Uint8Array(r).buffer,o.abrupt("return",{value:i,done:!1});case 13:case"end":return o.stop()}}),_callee2,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._reader&&this._reader.cancel(t),this._abortController&&this._abortController.abort()}},{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported}}]),PDFFetchStreamRangeReader}()}])}));

//PDF Worker
!function webpackUniversalModuleDefinition(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("pdfjs-dist/build/pdf.worker",[],r):"object"==typeof exports?exports["pdfjs-dist/build/pdf.worker"]=r():t["pdfjs-dist/build/pdf.worker"]=t.pdfjsWorker=r()}(this,(function(){return function(t){var r={};function __w_pdfjs_require__(a){if(r[a])return r[a].exports;var i=r[a]={i:a,l:!1,exports:{}};return t[a].call(i.exports,i,i.exports,__w_pdfjs_require__),i.l=!0,i.exports}return __w_pdfjs_require__.m=t,__w_pdfjs_require__.c=r,__w_pdfjs_require__.d=function(t,r,a){__w_pdfjs_require__.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:a})},__w_pdfjs_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__w_pdfjs_require__.t=function(t,r){if(1&r&&(t=__w_pdfjs_require__(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(__w_pdfjs_require__.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var i in t)__w_pdfjs_require__.d(a,i,function(r){return t[r]}.bind(null,i));return a},__w_pdfjs_require__.n=function(t){var r=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __w_pdfjs_require__.d(r,"a",r),r},__w_pdfjs_require__.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},__w_pdfjs_require__.p="",__w_pdfjs_require__(__w_pdfjs_require__.s=0)}([function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"WorkerMessageHandler",{enumerable:!0,get:function get(){return i.WorkerMessageHandler}});var i=a(1)},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.WorkerMessageHandler=r.WorkerTask=void 0;var i=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(2)),o=a(5),l=a(198),c=a(199),u=a(7),h=a(238),d=a(239),p=a(201);function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var a=[],i=!0,o=!1,l=void 0;try{for(var c,u=t[Symbol.iterator]();!(i=(c=u.next()).done)&&(a.push(c.value),!r||a.length!==r);i=!0);}catch(t){o=!0,l=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw l}}return a}(t,r)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function asyncGeneratorStep(t,r,a,i,o,l,c){try{var u=t[l](c),h=u.value}catch(t){return void a(t)}u.done?r(h):Promise.resolve(h).then(i,o)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}var m=function WorkerTaskClosure(){function WorkerTask(t){this.name=t,this.terminated=!1,this._capability=(0,o.createPromiseCapability)()}return WorkerTask.prototype={get finished(){return this._capability.promise},finish:function finish(){this._capability.resolve()},terminate:function terminate(){this.terminated=!0},ensureNotTerminated:function ensureNotTerminated(){if(this.terminated)throw new Error("Worker task was terminated")}},WorkerTask}();r.WorkerTask=m;var g={setup:function setup(t,r){var a=!1;t.on("test",(function wphSetupTest(r){if(!a)if(a=!0,r instanceof Uint8Array){var i=255===r[0];t.postMessageTransfers=i,t.send("test",{supportTransfers:i})}else t.send("test",null)})),t.on("configure",(function wphConfigure(t){(0,o.setVerbosityLevel)(t.verbosity)})),t.on("GetDocRequest",(function wphSetupDoc(t){return g.createDocumentHandler(t,r)}))},createDocumentHandler:function createDocumentHandler(t,r){var a,u=!1,g=null,b=[],y=(0,o.getVerbosityLevel)(),v=t.apiVersion,S="2.5.207";if(v!==S)throw new Error('The API version "'.concat(v,'" does not match ')+'the Worker version "'.concat(S,'".'));var k=[];for(var w in[])k.push(w);if(k.length)throw new Error("The `Array.prototype` contains unexpected enumerable properties: "+k.join(", ")+"; thus breaking e.g. `for...in` iteration of `Array`s.");var C=t.docId,x=t.docBaseUrl,_=t.docId+"_worker",A=new h.MessageHandler(_,C,r);function ensureNotTerminated(){if(u)throw new Error("Worker was terminated")}function startWorkerTask(t){b.push(t)}function finishWorkerTask(t){t.finish();var r=b.indexOf(t);b.splice(r,1)}function loadDocument(t){return _loadDocument.apply(this,arguments)}function _loadDocument(){return(_loadDocument=_asyncToGenerator(i.default.mark((function _callee(t){var r,o,l,c;return i.default.wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,a.ensureDoc("checkHeader");case 2:return i.next=4,a.ensureDoc("parseStartXRef");case 4:return i.next=6,a.ensureDoc("parse",[t]);case 6:if(t){i.next=9;break}return i.next=9,a.ensureDoc("checkFirstPage");case 9:return i.next=11,Promise.all([a.ensureDoc("numPages"),a.ensureDoc("fingerprint")]);case 11:return r=i.sent,o=_slicedToArray(r,2),l=o[0],c=o[1],i.abrupt("return",{numPages:l,fingerprint:c});case 16:case"end":return i.stop()}}),_callee)})))).apply(this,arguments)}function getPdfManager(t,r){var a,i=(0,o.createPromiseCapability)(),l=t.source;if(l.data){try{a=new c.LocalPdfManager(C,l.data,l.password,r,x),i.resolve(a)}catch(t){i.reject(t)}return i.promise}var u,h=[];try{u=new d.PDFWorkerStream(A)}catch(t){return i.reject(t),i.promise}var p=u.getFullReader();p.headersReady.then((function(){if(p.isRangeSupported){var t=l.disableAutoFetch||p.isStreamingSupported;a=new c.NetworkPdfManager(C,u,{msgHandler:A,password:l.password,length:p.contentLength,disableAutoFetch:t,rangeChunkSize:l.rangeChunkSize},r,x);for(var o=0;o<h.length;o++)a.sendProgressiveData(h[o]);h=[],i.resolve(a),g=null}})).catch((function(t){i.reject(t),g=null}));var m=0;return new Promise((function(t,u){p.read().then((function readChunk(t){var d=t.value,b=t.done;try{if(ensureNotTerminated(),b)return a||function flushChunks(){var t=(0,o.arraysToBytes)(h);l.length&&t.length!==l.length&&(0,o.warn)("reported HTTP length is different from actual");try{a=new c.LocalPdfManager(C,t,l.password,r,x),i.resolve(a)}catch(t){i.reject(t)}h=[]}(),void(g=null);m+=(0,o.arrayByteLength)(d),p.isStreamingSupported||A.send("DocProgress",{loaded:m,total:Math.max(m,p.contentLength||0)}),a?a.sendProgressiveData(d):h.push(d),p.read().then(readChunk,u)}catch(t){u(t)}}),u)})).catch((function(t){i.reject(t),g=null})),g=function cancelXHRs(t){u.cancelAllRequests(t)},i.promise}return A.postMessageTransfers=t.postMessageTransfers,A.on("GetPage",(function wphSetupGetPage(t){return a.getPage(t.pageIndex).then((function(t){return Promise.all([a.ensure(t,"rotate"),a.ensure(t,"ref"),a.ensure(t,"userUnit"),a.ensure(t,"view")]).then((function(t){var r=_slicedToArray(t,4);return{rotate:r[0],ref:r[1],userUnit:r[2],view:r[3]}}))}))})),A.on("GetPageIndex",(function wphSetupGetPageIndex(t){var r=l.Ref.get(t.ref.num,t.ref.gen);return a.pdfDocument.catalog.getPageIndex(r)})),A.on("GetDestinations",(function wphSetupGetDestinations(t){return a.ensureCatalog("destinations")})),A.on("GetDestination",(function wphSetupGetDestination(t){return a.ensureCatalog("getDestination",[t.id])})),A.on("GetPageLabels",(function wphSetupGetPageLabels(t){return a.ensureCatalog("pageLabels")})),A.on("GetPageLayout",(function wphSetupGetPageLayout(t){return a.ensureCatalog("pageLayout")})),A.on("GetPageMode",(function wphSetupGetPageMode(t){return a.ensureCatalog("pageMode")})),A.on("GetViewerPreferences",(function(t){return a.ensureCatalog("viewerPreferences")})),A.on("GetOpenAction",(function(t){return a.ensureCatalog("openAction")})),A.on("GetAttachments",(function wphSetupGetAttachments(t){return a.ensureCatalog("attachments")})),A.on("GetJavaScript",(function wphSetupGetJavaScript(t){return a.ensureCatalog("javaScript")})),A.on("GetOutline",(function wphSetupGetOutline(t){return a.ensureCatalog("documentOutline")})),A.on("GetPermissions",(function(t){return a.ensureCatalog("permissions")})),A.on("GetMetadata",(function wphSetupGetMetadata(t){return Promise.all([a.ensureDoc("documentInfo"),a.ensureCatalog("metadata")])})),A.on("GetData",(function wphSetupGetData(t){return a.requestLoadedStream(),a.onLoadedStream().then((function(t){return t.bytes}))})),A.on("GetStats",(function wphSetupGetStats(t){return a.pdfDocument.xref.stats})),A.on("GetAnnotations",(function(t){var r=t.pageIndex,i=t.intent;return a.getPage(r).then((function(t){return t.getAnnotationsData(i)}))})),A.on("GetOperatorList",(function wphSetupRenderPage(t,r){var i=t.pageIndex;a.getPage(i).then((function(a){var l=new m("GetOperatorList: page ".concat(i));startWorkerTask(l);var c=y>=o.VerbosityLevel.INFOS?Date.now():0;a.getOperatorList({handler:A,sink:r,task:l,intent:t.intent,renderInteractiveForms:t.renderInteractiveForms}).then((function(t){finishWorkerTask(l),c&&(0,o.info)("page=".concat(i+1," - getOperatorList: time=")+"".concat(Date.now()-c,"ms, len=").concat(t.length)),r.close()}),(function(t){finishWorkerTask(l),l.terminated||(A.send("UnsupportedFeature",{featureId:o.UNSUPPORTED_FEATURES.errorOperatorList}),r.error(t))}))}))}),this),A.on("GetTextContent",(function wphExtractText(t,r){var i=t.pageIndex;r.onPull=function(t){},r.onCancel=function(t){},a.getPage(i).then((function(a){var l=new m("GetTextContent: page "+i);startWorkerTask(l);var c=y>=o.VerbosityLevel.INFOS?Date.now():0;a.extractTextContent({handler:A,task:l,sink:r,normalizeWhitespace:t.normalizeWhitespace,combineTextItems:t.combineTextItems}).then((function(){finishWorkerTask(l),c&&(0,o.info)("page=".concat(i+1," - getTextContent: time=")+"".concat(Date.now()-c,"ms")),r.close()}),(function(t){finishWorkerTask(l),l.terminated||r.error(t)}))}))})),A.on("FontFallback",(function(t){return a.fontFallback(t.id,A)})),A.on("Cleanup",(function wphCleanup(t){return a.cleanup(!0)})),A.on("Terminate",(function wphTerminate(t){u=!0;var r=[];if(a){a.terminate(new o.AbortException("Worker was terminated."));var i=a.cleanup();r.push(i),a=null}else(0,l.clearPrimitiveCaches)();return g&&g(new o.AbortException("Worker was terminated.")),b.forEach((function(t){r.push(t.finished),t.terminate()})),Promise.all(r).then((function(){A.destroy(),A=null}))})),A.on("Ready",(function wphReady(r){!function setupDoc(t){function onSuccess(t){ensureNotTerminated(),A.send("GetDoc",{pdfInfo:t})}function onFailure(t){if(ensureNotTerminated(),t instanceof o.PasswordException){var r=new m("PasswordException: response ".concat(t.code));startWorkerTask(r),A.sendWithPromise("PasswordRequest",t).then((function(t){var i=t.password;finishWorkerTask(r),a.updatePassword(i),pdfManagerReady()})).catch((function(){finishWorkerTask(r),A.send("DocException",t)}))}else t instanceof o.InvalidPDFException||t instanceof o.MissingPDFException||t instanceof o.UnexpectedResponseException||t instanceof o.UnknownErrorException?A.send("DocException",t):A.send("DocException",new o.UnknownErrorException(t.message,t.toString()))}function pdfManagerReady(){ensureNotTerminated(),loadDocument(!1).then(onSuccess,(function loadFailure(t){ensureNotTerminated(),t instanceof p.XRefParseException?(a.requestLoadedStream(),a.onLoadedStream().then((function(){ensureNotTerminated(),loadDocument(!0).then(onSuccess,onFailure)}))):onFailure(t)}),onFailure)}ensureNotTerminated(),getPdfManager(t,{maxImageSize:t.maxImageSize,disableFontFace:t.disableFontFace,ignoreErrors:t.ignoreErrors,isEvalSupported:t.isEvalSupported,fontExtraProperties:t.fontExtraProperties}).then((function(t){if(u)throw t.terminate(new o.AbortException("Worker was terminated.")),new Error("Worker was terminated");(a=t).onLoadedStream().then((function(t){A.send("DataLoaded",{length:t.bytes.byteLength})}))})).then(pdfManagerReady,onFailure)}(t),t=null})),_},initializeFromPort:function initializeFromPort(t){var r=new h.MessageHandler("worker","main",t);g.setup(r,t),r.send("ready",null)}};r.WorkerMessageHandler=g,"undefined"==typeof window&&!u.isNodeJS&&"undefined"!=typeof self&&function isMessagePort(t){return"function"==typeof t.postMessage&&"onmessage"in t}(self)&&g.initializeFromPort(self)},function(t,r,a){"use strict";t.exports=a(3)},function(t,r,a){"use strict";(function(t){function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=function(t){var r,a=Object.prototype,i=a.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function wrap(t,r,a,i){var o=r&&r.prototype instanceof Generator?r:Generator,l=Object.create(o.prototype),c=new Context(i||[]);return l._invoke=function makeInvokeMethod(t,r,a){var i=h;return function invoke(o,l){if(i===p)throw new Error("Generator is already running");if(i===m){if("throw"===o)throw l;return doneResult()}for(a.method=o,a.arg=l;;){var c=a.delegate;if(c){var u=maybeInvokeDelegate(c,a);if(u){if(u===g)continue;return u}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(i===h)throw i=m,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);i=p;var b=tryCatch(t,r,a);if("normal"===b.type){if(i=a.done?m:d,b.arg===g)continue;return{value:b.arg,done:a.done}}"throw"===b.type&&(i=m,a.method="throw",a.arg=b.arg)}}}(t,a,c),l}function tryCatch(t,r,a){try{return{type:"normal",arg:t.call(r,a)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var h="suspendedStart",d="suspendedYield",p="executing",m="completed",g={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var b={};b[l]=function(){return this};var y=Object.getPrototypeOf,v=y&&y(y(values([])));v&&v!==a&&i.call(v,l)&&(b=v);var S=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(b);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){t[r]=function(t){return this._invoke(r,t)}}))}function AsyncIterator(t,r){function invoke(a,o,l,c){var u=tryCatch(t[a],t,o);if("throw"!==u.type){var h=u.arg,d=h.value;return d&&"object"===_typeof(d)&&i.call(d,"__await")?r.resolve(d.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(d).then((function(t){h.value=t,l(h)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var a;this._invoke=function enqueue(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,a){var i=t.iterator[a.method];if(i===r){if(a.delegate=null,"throw"===a.method){if(t.iterator.return&&(a.method="return",a.arg=r,maybeInvokeDelegate(t,a),"throw"===a.method))return g;a.method="throw",a.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var o=tryCatch(i,t.iterator,a.arg);if("throw"===o.type)return a.method="throw",a.arg=o.arg,a.delegate=null,g;var l=o.arg;return l?l.done?(a[t.resultName]=l.value,a.next=t.nextLoc,"return"!==a.method&&(a.method="next",a.arg=r),a.delegate=null,g):l:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,g)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var a=t[l];if(a)return a.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,c=function next(){for(;++o<t.length;)if(i.call(t,o))return next.value=t[o],next.done=!1,next;return next.value=r,next.done=!0,next};return c.next=c}}return{next:doneResult}}function doneResult(){return{value:r,done:!0}}return GeneratorFunction.prototype=S.constructor=GeneratorFunctionPrototype,GeneratorFunctionPrototype.constructor=GeneratorFunction,GeneratorFunctionPrototype[u]=GeneratorFunction.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(S),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),AsyncIterator.prototype[c]=function(){return this},t.AsyncIterator=AsyncIterator,t.async=function(r,a,i,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,a,i,o),l);return t.isGeneratorFunction(a)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(S),S[u]="Generator",S[l]=function(){return this},S.toString=function(){return"[object Generator]"},t.keys=function(t){var r=[];for(var a in t)r.push(a);return r.reverse(),function next(){for(;r.length;){var a=r.pop();if(a in t)return next.value=a,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(resetTryEntry),!t)for(var a in this)"t"===a.charAt(0)&&i.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=r)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var a=this;function handle(i,o){return c.type="throw",c.arg=t,a.next=i,o&&(a.method="next",a.arg=r),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var l=this.tryEntries[o],c=l.completion;if("root"===l.tryLoc)return handle("end");if(l.tryLoc<=this.prev){var u=i.call(l,"catchLoc"),h=i.call(l,"finallyLoc");if(u&&h){if(this.prev<l.catchLoc)return handle(l.catchLoc,!0);if(this.prev<l.finallyLoc)return handle(l.finallyLoc)}else if(u){if(this.prev<l.catchLoc)return handle(l.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return handle(l.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,g):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),g},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),resetTryEntry(a),g}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc===t){var i=a.completion;if("throw"===i.type){var o=i.arg;resetTryEntry(a)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,a,i){return this.delegate={iterator:values(t),resultName:a,nextLoc:i},"next"===this.method&&(this.arg=r),g}},t}("object"===_typeof(t)?t.exports:{});try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}}).call(this,a(4)(t))},function(t,r,a){"use strict";t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function get(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function get(){return t.i}}),t.webpackPolyfill=1),t}},function(t,r,a){"use strict";function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t})(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var a,i=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.arrayByteLength=arrayByteLength,r.arraysToBytes=function arraysToBytes(t){var r=t.length;if(1===r&&t[0]instanceof Uint8Array)return t[0];for(var a=0,i=0;i<r;i++)a+=arrayByteLength(t[i]);for(var o=0,l=new Uint8Array(a),c=0;c<r;c++){var u=t[c];u instanceof Uint8Array||(u="string"==typeof u?stringToBytes(u):new Uint8Array(u));var h=u.byteLength;l.set(u,o),o+=h}return l},r.assert=assert,r.bytesToString=function bytesToString(t){assert(null!==t&&"object"===_typeof(t)&&void 0!==t.length,"Invalid argument for bytesToString");var r=t.length,a=8192;if(r<a)return String.fromCharCode.apply(null,t);for(var i=[],o=0;o<r;o+=a){var l=Math.min(o+a,r),c=t.subarray(o,l);i.push(String.fromCharCode.apply(null,c))}return i.join("")},r.createPromiseCapability=function createPromiseCapability(){var t=Object.create(null),r=!1;return Object.defineProperty(t,"settled",{get:function get(){return r}}),t.promise=new Promise((function(a,i){t.resolve=function(t){r=!0,a(t)},t.reject=function(t){r=!0,i(t)}})),t},r.getVerbosityLevel=function getVerbosityLevel(){return o},r.info=function info(t){o>=i.INFOS&&console.log("Info: ".concat(t))},r.isArrayBuffer=function isArrayBuffer(t){return"object"===_typeof(t)&&null!==t&&void 0!==t.byteLength},r.isArrayEqual=function isArrayEqual(t,r){if(t.length!==r.length)return!1;return t.every((function(t,a){return t===r[a]}))},r.isBool=function isBool(t){return"boolean"==typeof t},r.isEmptyObj=function isEmptyObj(t){for(var r in t)return!1;return!0},r.isNum=function isNum(t){return"number"==typeof t},r.isString=function isString(t){return"string"==typeof t},r.isSameOrigin=function isSameOrigin(t,r){var a;try{if(!(a=new URL(t)).origin||"null"===a.origin)return!1}catch(t){return!1}var i=new URL(r,a);return a.origin===i.origin},r.createValidAbsoluteUrl=function createValidAbsoluteUrl(t,r){if(!t)return null;try{var a=r?new URL(t,r):new URL(t);if(function _isValidProtocol(t){if(!t)return!1;switch(t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(a))return a}catch(t){}return null},r.removeNullCharacters=function removeNullCharacters(t){if("string"!=typeof t)return warn("The argument for removeNullCharacters must be a string."),t;return t.replace(b,"")},r.setVerbosityLevel=function setVerbosityLevel(t){Number.isInteger(t)&&(o=t)},r.shadow=shadow,r.string32=function string32(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)},r.stringToBytes=stringToBytes,r.stringToPDFString=function stringToPDFString(t){var r=t.length,a=[];if(""===t[0]&&""===t[1])for(var i=2;i<r;i+=2)a.push(String.fromCharCode(t.charCodeAt(i)<<8|t.charCodeAt(i+1)));else if(""===t[0]&&""===t[1])for(var o=2;o<r;o+=2)a.push(String.fromCharCode(t.charCodeAt(o+1)<<8|t.charCodeAt(o)));else for(var l=0;l<r;++l){var c=w[t.charCodeAt(l)];a.push(c?String.fromCharCode(c):t.charAt(l))}return a.join("")},r.stringToUTF8String=function stringToUTF8String(t){return decodeURIComponent(escape(t))},r.utf8StringToString=function utf8StringToString(t){return unescape(encodeURIComponent(t))},r.warn=warn,r.unreachable=unreachable,r.IsEvalSupportedCached=r.IsLittleEndianCached=r.createObjectURL=r.FormatError=r.Util=r.UnknownErrorException=r.UnexpectedResponseException=r.TextRenderingMode=r.StreamType=r.PermissionFlag=r.PasswordResponses=r.PasswordException=r.MissingPDFException=r.InvalidPDFException=r.AbortException=r.CMapCompressionType=r.ImageKind=r.FontType=r.AnnotationType=r.AnnotationStateModelType=r.AnnotationReviewState=r.AnnotationReplyType=r.AnnotationMarkedState=r.AnnotationFlag=r.AnnotationFieldFlag=r.AnnotationBorderStyleType=r.UNSUPPORTED_FEATURES=r.VerbosityLevel=r.OPS=r.IDENTITY_MATRIX=r.FONT_IDENTITY_MATRIX=r.BaseException=void 0,a(6);r.IDENTITY_MATRIX=[1,0,0,1,0,0];r.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0];r.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};r.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};r.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};r.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};r.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"};r.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"};r.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};r.AnnotationReplyType={GROUP:"Group",REPLY:"R"};r.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};r.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};r.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};r.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};r.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};var i={ERRORS:0,WARNINGS:1,INFOS:5};r.VerbosityLevel=i;r.CMapCompressionType={NONE:0,BINARY:1,STREAM:2};r.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};r.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontGetPath:"errorFontGetPath"};r.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};var o=i.WARNINGS;function warn(t){o>=i.WARNINGS&&console.log("Warning: ".concat(t))}function unreachable(t){throw new Error(t)}function assert(t,r){t||unreachable(r)}function shadow(t,r,a){return Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!1}),a}var l=function BaseExceptionClosure(){function BaseException(t){this.constructor===BaseException&&unreachable("Cannot initialize BaseException."),this.message=t,this.name=this.constructor.name}return BaseException.prototype=new Error,BaseException.constructor=BaseException,BaseException}();r.BaseException=l;var c=function(t){_inherits(PasswordException,t);var r=_createSuper(PasswordException);function PasswordException(t,a){var i;return _classCallCheck(this,PasswordException),(i=r.call(this,t)).code=a,i}return PasswordException}(l);r.PasswordException=c;var u=function(t){_inherits(UnknownErrorException,t);var r=_createSuper(UnknownErrorException);function UnknownErrorException(t,a){var i;return _classCallCheck(this,UnknownErrorException),(i=r.call(this,t)).details=a,i}return UnknownErrorException}(l);r.UnknownErrorException=u;var h=function(t){_inherits(InvalidPDFException,t);var r=_createSuper(InvalidPDFException);function InvalidPDFException(){return _classCallCheck(this,InvalidPDFException),r.apply(this,arguments)}return InvalidPDFException}(l);r.InvalidPDFException=h;var d=function(t){_inherits(MissingPDFException,t);var r=_createSuper(MissingPDFException);function MissingPDFException(){return _classCallCheck(this,MissingPDFException),r.apply(this,arguments)}return MissingPDFException}(l);r.MissingPDFException=d;var p=function(t){_inherits(UnexpectedResponseException,t);var r=_createSuper(UnexpectedResponseException);function UnexpectedResponseException(t,a){var i;return _classCallCheck(this,UnexpectedResponseException),(i=r.call(this,t)).status=a,i}return UnexpectedResponseException}(l);r.UnexpectedResponseException=p;var m=function(t){_inherits(FormatError,t);var r=_createSuper(FormatError);function FormatError(){return _classCallCheck(this,FormatError),r.apply(this,arguments)}return FormatError}(l);r.FormatError=m;var g=function(t){_inherits(AbortException,t);var r=_createSuper(AbortException);function AbortException(){return _classCallCheck(this,AbortException),r.apply(this,arguments)}return AbortException}(l);r.AbortException=g;var b=/\x00/g;function stringToBytes(t){assert("string"==typeof t,"Invalid argument for stringToBytes");for(var r=t.length,a=new Uint8Array(r),i=0;i<r;++i)a[i]=255&t.charCodeAt(i);return a}function arrayByteLength(t){return void 0!==t.length?t.length:(assert(void 0!==t.byteLength,"arrayByteLength - invalid argument."),t.byteLength)}var y={get value(){return shadow(this,"value",function isLittleEndian(){var t=new Uint8Array(4);return t[0]=1,1===new Uint32Array(t.buffer,0,1)[0]}())}};r.IsLittleEndianCached=y;var v={get value(){return shadow(this,"value",function isEvalSupported(){try{return new Function(""),!0}catch(t){return!1}}())}};r.IsEvalSupportedCached=v;var S=["rgb(",0,",",0,",",0,")"],k=function(){function Util(){_classCallCheck(this,Util)}return function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}(Util,null,[{key:"makeCssRgb",value:function makeCssRgb(t,r,a){return S[1]=t,S[3]=r,S[5]=a,S.join("")}},{key:"transform",value:function transform(t,r){return[t[0]*r[0]+t[2]*r[1],t[1]*r[0]+t[3]*r[1],t[0]*r[2]+t[2]*r[3],t[1]*r[2]+t[3]*r[3],t[0]*r[4]+t[2]*r[5]+t[4],t[1]*r[4]+t[3]*r[5]+t[5]]}},{key:"applyTransform",value:function applyTransform(t,r){return[t[0]*r[0]+t[1]*r[2]+r[4],t[0]*r[1]+t[1]*r[3]+r[5]]}},{key:"applyInverseTransform",value:function applyInverseTransform(t,r){var a=r[0]*r[3]-r[1]*r[2];return[(t[0]*r[3]-t[1]*r[2]+r[2]*r[5]-r[4]*r[3])/a,(-t[0]*r[1]+t[1]*r[0]+r[4]*r[1]-r[5]*r[0])/a]}},{key:"getAxialAlignedBoundingBox",value:function getAxialAlignedBoundingBox(t,r){var a=Util.applyTransform(t,r),i=Util.applyTransform(t.slice(2,4),r),o=Util.applyTransform([t[0],t[3]],r),l=Util.applyTransform([t[2],t[1]],r);return[Math.min(a[0],i[0],o[0],l[0]),Math.min(a[1],i[1],o[1],l[1]),Math.max(a[0],i[0],o[0],l[0]),Math.max(a[1],i[1],o[1],l[1])]}},{key:"inverseTransform",value:function inverseTransform(t){var r=t[0]*t[3]-t[1]*t[2];return[t[3]/r,-t[1]/r,-t[2]/r,t[0]/r,(t[2]*t[5]-t[4]*t[3])/r,(t[4]*t[1]-t[5]*t[0])/r]}},{key:"apply3dTransform",value:function apply3dTransform(t,r){return[t[0]*r[0]+t[1]*r[1]+t[2]*r[2],t[3]*r[0]+t[4]*r[1]+t[5]*r[2],t[6]*r[0]+t[7]*r[1]+t[8]*r[2]]}},{key:"singularValueDecompose2dScale",value:function singularValueDecompose2dScale(t){var r=[t[0],t[2],t[1],t[3]],a=t[0]*r[0]+t[1]*r[2],i=t[0]*r[1]+t[1]*r[3],o=t[2]*r[0]+t[3]*r[2],l=t[2]*r[1]+t[3]*r[3],c=(a+l)/2,u=Math.sqrt((a+l)*(a+l)-4*(a*l-o*i))/2,h=c+u||1,d=c-u||1;return[Math.sqrt(h),Math.sqrt(d)]}},{key:"normalizeRect",value:function normalizeRect(t){var r=t.slice(0);return t[0]>t[2]&&(r[0]=t[2],r[2]=t[0]),t[1]>t[3]&&(r[1]=t[3],r[3]=t[1]),r}},{key:"intersect",value:function intersect(t,r){function compare(t,r){return t-r}var a=[t[0],t[2],r[0],r[2]].sort(compare),i=[t[1],t[3],r[1],r[3]].sort(compare),o=[];return t=Util.normalizeRect(t),r=Util.normalizeRect(r),a[0]===t[0]&&a[1]===r[0]||a[0]===r[0]&&a[1]===t[0]?(o[0]=a[1],o[2]=a[2],i[0]===t[1]&&i[1]===r[1]||i[0]===r[1]&&i[1]===t[1]?(o[1]=i[1],o[3]=i[2],o):null):null}}]),Util}();r.Util=k;var w=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];var C=function createObjectURLClosure(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return function createObjectURL(r,a){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!i&&URL.createObjectURL){var o=new Blob([r],{type:a});return URL.createObjectURL(o)}for(var l="data:".concat(a,";base64,"),c=0,u=r.length;c<u;c+=3){var h=255&r[c],d=255&r[c+1],p=255&r[c+2],m=h>>2,g=(3&h)<<4|d>>4,b=c+1<u?(15&d)<<2|p>>6:64,y=c+2<u?63&p:64;l+=t[m]+t[g]+t[b]+t[y]}return l}}();r.createObjectURL=C},function(t,r,a){"use strict";var i=a(7);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}if("undefined"==typeof globalThis||!globalThis._pdfjsCompatibilityChecked){"undefined"!=typeof globalThis&&globalThis.Math===Math||(globalThis=a(8)),globalThis._pdfjsCompatibilityChecked=!0;var o="object"===("undefined"==typeof window?"undefined":_typeof(window))&&"object"===("undefined"==typeof document?"undefined":_typeof(document)),l="undefined"!=typeof navigator&&navigator.userAgent||"",c=/Trident/.test(l);!function checkNodeBtoa(){!globalThis.btoa&&i.isNodeJS&&(globalThis.btoa=function(t){return Buffer.from(t,"binary").toString("base64")})}(),function checkNodeAtob(){!globalThis.atob&&i.isNodeJS&&(globalThis.atob=function(t){return Buffer.from(t,"base64").toString("binary")})}(),function checkChildNodeRemove(){o&&void 0===Element.prototype.remove&&(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)})}(),function checkDOMTokenListAddRemove(){if(o&&!i.isNodeJS){var t=document.createElement("div");if(t.classList.add("testOne","testTwo"),!0!==t.classList.contains("testOne")||!0!==t.classList.contains("testTwo")){var r=DOMTokenList.prototype.add,a=DOMTokenList.prototype.remove;DOMTokenList.prototype.add=function(){for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];for(var o=0,l=a;o<l.length;o++){var c=l[o];r.call(this,c)}},DOMTokenList.prototype.remove=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var o=0,l=r;o<l.length;o++){var c=l[o];a.call(this,c)}}}}}(),function checkDOMTokenListToggle(){o&&!i.isNodeJS&&(!1!==document.createElement("div").classList.toggle("test",0)&&(DOMTokenList.prototype.toggle=function(t){var r=arguments.length>1?!!arguments[1]:!this.contains(t);return this[r?"add":"remove"](t),r}))}(),function checkWindowHistoryPushStateReplaceState(){if(o&&c){var t=window.history.pushState,r=window.history.replaceState;window.history.pushState=function(r,a,i){var o=void 0===i?[r,a]:[r,a,i];t.apply(this,o)},window.history.replaceState=function(t,a,i){var o=void 0===i?[t,a]:[t,a,i];r.apply(this,o)}}}(),function checkStringStartsWith(){String.prototype.startsWith||a(53)}(),function checkStringEndsWith(){String.prototype.endsWith||a(64)}(),function checkStringIncludes(){String.prototype.includes||a(66)}(),function checkArrayIncludes(){Array.prototype.includes||a(68)}(),function checkArrayFrom(){Array.from||a(76)}(),function checkObjectAssign(){Object.assign||a(98)}(),function checkMathLog2(){Math.log2||(Math.log2=a(101))}(),function checkNumberIsNaN(){Number.isNaN||(Number.isNaN=a(103))}(),function checkNumberIsInteger(){Number.isInteger||(Number.isInteger=a(105))}(),function checkTypedArraySlice(){Uint8Array.prototype.slice||a(108)}(),function checkPromise(){globalThis.Promise&&globalThis.Promise.allSettled||(globalThis.Promise=a(113))}(),function checkURL(){globalThis.URL=a(136)}(),function checkReadableStream(){var t=!1;if("undefined"!=typeof ReadableStream)try{new ReadableStream({start:function start(t){t.close()}}),t=!0}catch(t){}t||(globalThis.ReadableStream=a(143).ReadableStream)}(),function checkMapEntries(){globalThis.Map&&globalThis.Map.prototype.entries||(globalThis.Map=a(144))}(),function checkSetEntries(){globalThis.Set&&globalThis.Set.prototype.entries||(globalThis.Set=a(151))}(),function checkWeakMap(){globalThis.WeakMap||(globalThis.WeakMap=a(153))}(),function checkWeakSet(){globalThis.WeakSet||(globalThis.WeakSet=a(159))}(),function checkStringCodePointAt(){String.prototype.codePointAt||a(161)}(),function checkStringFromCodePoint(){String.fromCodePoint||(String.fromCodePoint=a(163))}(),function checkSymbol(){globalThis.Symbol||a(165)}(),function checkStringPadStart(){String.prototype.padStart||a(188)}(),function checkStringPadEnd(){String.prototype.padEnd||a(193)}(),function checkObjectValues(){Object.values||(Object.values=a(195))}()}},function(t,r,a){"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.isNodeJS=void 0;var i="object"===("undefined"==typeof process?"undefined":_typeof(process))&&process+""=="[object process]"&&!process.versions.nw&&!process.versions.electron;r.isNodeJS=i},function(t,r,a){a(9),t.exports=a(11)},function(t,r,a){a(10)({global:!0},{globalThis:a(11)})},function(t,r,a){var i=a(11),o=a(12).f,l=a(26),c=a(29),u=a(30),h=a(40),d=a(52);t.exports=function(t,r){var a,p,m,g,b,y=t.target,v=t.global,S=t.stat;if(a=v?i:S?i[y]||u(y,{}):(i[y]||{}).prototype)for(p in r){if(g=r[p],m=t.noTargetGet?(b=o(a,p))&&b.value:a[p],!d(v?p:y+(S?".":"#")+p,t.forced)&&void 0!==m){if(typeof g==typeof m)continue;h(g,m)}(t.sham||m&&m.sham)&&l(g,"sham",!0),c(a,p,g,t)}}},function(t,r){var check=function(t){return t&&t.Math==Math&&t};t.exports=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof global&&global)||Function("return this")()},function(t,r,a){var i=a(13),o=a(15),l=a(16),c=a(17),u=a(21),h=a(23),d=a(24),p=Object.getOwnPropertyDescriptor;r.f=i?p:function getOwnPropertyDescriptor(t,r){if(t=c(t),r=u(r,!0),d)try{return p(t,r)}catch(t){}if(h(t,r))return l(!o.f.call(t,r),t[r])}},function(t,r,a){var i=a(14);t.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(t,r){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,r,a){"use strict";var i={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,l=o&&!i.call({1:2},1);r.f=l?function propertyIsEnumerable(t){var r=o(this,t);return!!r&&r.enumerable}:i},function(t,r){t.exports=function(t,r){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:r}}},function(t,r,a){var i=a(18),o=a(20);t.exports=function(t){return i(o(t))}},function(t,r,a){var i=a(14),o=a(19),l="".split;t.exports=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==o(t)?l.call(t,""):Object(t)}:Object},function(t,r){var a={}.toString;t.exports=function(t){return a.call(t).slice(8,-1)}},function(t,r){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,r,a){var i=a(22);t.exports=function(t,r){if(!i(t))return t;var a,o;if(r&&"function"==typeof(a=t.toString)&&!i(o=a.call(t)))return o;if("function"==typeof(a=t.valueOf)&&!i(o=a.call(t)))return o;if(!r&&"function"==typeof(a=t.toString)&&!i(o=a.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,r){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,r){var a={}.hasOwnProperty;t.exports=function(t,r){return a.call(t,r)}},function(t,r,a){var i=a(13),o=a(14),l=a(25);t.exports=!i&&!o((function(){return 7!=Object.defineProperty(l("div"),"a",{get:function(){return 7}}).a}))},function(t,r,a){var i=a(11),o=a(22),l=i.document,c=o(l)&&o(l.createElement);t.exports=function(t){return c?l.createElement(t):{}}},function(t,r,a){var i=a(13),o=a(27),l=a(16);t.exports=i?function(t,r,a){return o.f(t,r,l(1,a))}:function(t,r,a){return t[r]=a,t}},function(t,r,a){var i=a(13),o=a(24),l=a(28),c=a(21),u=Object.defineProperty;r.f=i?u:function defineProperty(t,r,a){if(l(t),r=c(r,!0),l(a),o)try{return u(t,r,a)}catch(t){}if("get"in a||"set"in a)throw TypeError("Accessors not supported");return"value"in a&&(t[r]=a.value),t}},function(t,r,a){var i=a(22);t.exports=function(t){if(!i(t))throw TypeError(String(t)+" is not an object");return t}},function(t,r,a){var i=a(11),o=a(26),l=a(23),c=a(30),u=a(31),h=a(33),d=h.get,p=h.enforce,m=String(String).split("String");(t.exports=function(t,r,a,u){var h=!!u&&!!u.unsafe,d=!!u&&!!u.enumerable,g=!!u&&!!u.noTargetGet;"function"==typeof a&&("string"!=typeof r||l(a,"name")||o(a,"name",r),p(a).source=m.join("string"==typeof r?r:"")),t!==i?(h?!g&&t[r]&&(d=!0):delete t[r],d?t[r]=a:o(t,r,a)):d?t[r]=a:c(r,a)})(Function.prototype,"toString",(function toString(){return"function"==typeof this&&d(this).source||u(this)}))},function(t,r,a){var i=a(11),o=a(26);t.exports=function(t,r){try{o(i,t,r)}catch(a){i[t]=r}return r}},function(t,r,a){var i=a(32),o=Function.toString;"function"!=typeof i.inspectSource&&(i.inspectSource=function(t){return o.call(t)}),t.exports=i.inspectSource},function(t,r,a){var i=a(11),o=a(30),l="__core-js_shared__",c=i[l]||o(l,{});t.exports=c},function(t,r,a){var i,o,l,c=a(34),u=a(11),h=a(22),d=a(26),p=a(23),m=a(35),g=a(39),b=u.WeakMap;if(c){var y=new b,v=y.get,S=y.has,k=y.set;i=function(t,r){return k.call(y,t,r),r},o=function(t){return v.call(y,t)||{}},l=function(t){return S.call(y,t)}}else{var w=m("state");g[w]=!0,i=function(t,r){return d(t,w,r),r},o=function(t){return p(t,w)?t[w]:{}},l=function(t){return p(t,w)}}t.exports={set:i,get:o,has:l,enforce:function(t){return l(t)?o(t):i(t,{})},getterFor:function(t){return function(r){var a;if(!h(r)||(a=o(r)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return a}}}},function(t,r,a){var i=a(11),o=a(31),l=i.WeakMap;t.exports="function"==typeof l&&/native code/.test(o(l))},function(t,r,a){var i=a(36),o=a(38),l=i("keys");t.exports=function(t){return l[t]||(l[t]=o(t))}},function(t,r,a){var i=a(37),o=a(32);(t.exports=function(t,r){return o[t]||(o[t]=void 0!==r?r:{})})("versions",[]).push({version:"3.6.5",mode:i?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},function(t,r){t.exports=!1},function(t,r){var a=0,i=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++a+i).toString(36)}},function(t,r){t.exports={}},function(t,r,a){var i=a(23),o=a(41),l=a(12),c=a(27);t.exports=function(t,r){for(var a=o(r),u=c.f,h=l.f,d=0;d<a.length;d++){var p=a[d];i(t,p)||u(t,p,h(r,p))}}},function(t,r,a){var i=a(42),o=a(44),l=a(51),c=a(28);t.exports=i("Reflect","ownKeys")||function ownKeys(t){var r=o.f(c(t)),a=l.f;return a?r.concat(a(t)):r}},function(t,r,a){var i=a(43),o=a(11),aFunction=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,r){return arguments.length<2?aFunction(i[t])||aFunction(o[t]):i[t]&&i[t][r]||o[t]&&o[t][r]}},function(t,r,a){var i=a(11);t.exports=i},function(t,r,a){var i=a(45),o=a(50).concat("length","prototype");r.f=Object.getOwnPropertyNames||function getOwnPropertyNames(t){return i(t,o)}},function(t,r,a){var i=a(23),o=a(17),l=a(46).indexOf,c=a(39);t.exports=function(t,r){var a,u=o(t),h=0,d=[];for(a in u)!i(c,a)&&i(u,a)&&d.push(a);for(;r.length>h;)i(u,a=r[h++])&&(~l(d,a)||d.push(a));return d}},function(t,r,a){var i=a(17),o=a(47),l=a(49),createMethod=function(t){return function(r,a,c){var u,h=i(r),d=o(h.length),p=l(c,d);if(t&&a!=a){for(;d>p;)if((u=h[p++])!=u)return!0}else for(;d>p;p++)if((t||p in h)&&h[p]===a)return t||p||0;return!t&&-1}};t.exports={includes:createMethod(!0),indexOf:createMethod(!1)}},function(t,r,a){var i=a(48),o=Math.min;t.exports=function(t){return t>0?o(i(t),9007199254740991):0}},function(t,r){var a=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:a)(t)}},function(t,r,a){var i=a(48),o=Math.max,l=Math.min;t.exports=function(t,r){var a=i(t);return a<0?o(a+r,0):l(a,r)}},function(t,r){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,r){r.f=Object.getOwnPropertySymbols},function(t,r,a){var i=a(14),o=/#|\.prototype\./,isForced=function(t,r){var a=c[l(t)];return a==h||a!=u&&("function"==typeof r?i(r):!!r)},l=isForced.normalize=function(t){return String(t).replace(o,".").toLowerCase()},c=isForced.data={},u=isForced.NATIVE="N",h=isForced.POLYFILL="P";t.exports=isForced},function(t,r,a){a(54);var i=a(61);t.exports=i("String","startsWith")},function(t,r,a){"use strict";var i,o=a(10),l=a(12).f,c=a(47),u=a(55),h=a(20),d=a(60),p=a(37),m="".startsWith,g=Math.min,b=d("startsWith");o({target:"String",proto:!0,forced:!!(p||b||(i=l(String.prototype,"startsWith"),!i||i.writable))&&!b},{startsWith:function startsWith(t){var r=String(h(this));u(t);var a=c(g(arguments.length>1?arguments[1]:void 0,r.length)),i=String(t);return m?m.call(r,i,a):r.slice(a,a+i.length)===i}})},function(t,r,a){var i=a(56);t.exports=function(t){if(i(t))throw TypeError("The method doesn't accept regular expressions");return t}},function(t,r,a){var i=a(22),o=a(19),l=a(57)("match");t.exports=function(t){var r;return i(t)&&(void 0!==(r=t[l])?!!r:"RegExp"==o(t))}},function(t,r,a){var i=a(11),o=a(36),l=a(23),c=a(38),u=a(58),h=a(59),d=o("wks"),p=i.Symbol,m=h?p:p&&p.withoutSetter||c;t.exports=function(t){return l(d,t)||(u&&l(p,t)?d[t]=p[t]:d[t]=m("Symbol."+t)),d[t]}},function(t,r,a){var i=a(14);t.exports=!!Object.getOwnPropertySymbols&&!i((function(){return!String(Symbol())}))},function(t,r,a){var i=a(58);t.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,r,a){var i=a(57)("match");t.exports=function(t){var r=/./;try{"/./"[t](r)}catch(a){try{return r[i]=!1,"/./"[t](r)}catch(t){}}return!1}},function(t,r,a){var i=a(11),o=a(62),l=Function.call;t.exports=function(t,r,a){return o(l,i[t].prototype[r],a)}},function(t,r,a){var i=a(63);t.exports=function(t,r,a){if(i(t),void 0===r)return t;switch(a){case 0:return function(){return t.call(r)};case 1:return function(a){return t.call(r,a)};case 2:return function(a,i){return t.call(r,a,i)};case 3:return function(a,i,o){return t.call(r,a,i,o)}}return function(){return t.apply(r,arguments)}}},function(t,r){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,r,a){a(65);var i=a(61);t.exports=i("String","endsWith")},function(t,r,a){"use strict";var i,o=a(10),l=a(12).f,c=a(47),u=a(55),h=a(20),d=a(60),p=a(37),m="".endsWith,g=Math.min,b=d("endsWith");o({target:"String",proto:!0,forced:!!(p||b||(i=l(String.prototype,"endsWith"),!i||i.writable))&&!b},{endsWith:function endsWith(t){var r=String(h(this));u(t);var a=arguments.length>1?arguments[1]:void 0,i=c(r.length),o=void 0===a?i:g(c(a),i),l=String(t);return m?m.call(r,l,o):r.slice(o-l.length,o)===l}})},function(t,r,a){a(67);var i=a(61);t.exports=i("String","includes")},function(t,r,a){"use strict";var i=a(10),o=a(55),l=a(20);i({target:"String",proto:!0,forced:!a(60)("includes")},{includes:function includes(t){return!!~String(l(this)).indexOf(o(t),arguments.length>1?arguments[1]:void 0)}})},function(t,r,a){a(69);var i=a(61);t.exports=i("Array","includes")},function(t,r,a){"use strict";var i=a(10),o=a(46).includes,l=a(70);i({target:"Array",proto:!0,forced:!a(75)("indexOf",{ACCESSORS:!0,1:0})},{includes:function includes(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),l("includes")},function(t,r,a){var i=a(57),o=a(71),l=a(27),c=i("unscopables"),u=Array.prototype;null==u[c]&&l.f(u,c,{configurable:!0,value:o(null)}),t.exports=function(t){u[c][t]=!0}},function(t,r,a){var i,o=a(28),l=a(72),c=a(50),u=a(39),h=a(74),d=a(25),p=a(35),m=p("IE_PROTO"),EmptyConstructor=function(){},scriptTag=function(t){return"<script>"+t+"</"+"script>"},NullProtoObject=function(){try{i=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,r;NullProtoObject=i?function(t){t.write(scriptTag("")),t.close();var r=t.parentWindow.Object;return t=null,r}(i):((r=d("iframe")).style.display="none",h.appendChild(r),r.src=String("javascript:"),(t=r.contentWindow.document).open(),t.write(scriptTag("document.F=Object")),t.close(),t.F);for(var a=c.length;a--;)delete NullProtoObject.prototype[c[a]];return NullProtoObject()};u[m]=!0,t.exports=Object.create||function create(t,r){var a;return null!==t?(EmptyConstructor.prototype=o(t),a=new EmptyConstructor,EmptyConstructor.prototype=null,a[m]=t):a=NullProtoObject(),void 0===r?a:l(a,r)}},function(t,r,a){var i=a(13),o=a(27),l=a(28),c=a(73);t.exports=i?Object.defineProperties:function defineProperties(t,r){l(t);for(var a,i=c(r),u=i.length,h=0;u>h;)o.f(t,a=i[h++],r[a]);return t}},function(t,r,a){var i=a(45),o=a(50);t.exports=Object.keys||function keys(t){return i(t,o)}},function(t,r,a){var i=a(42);t.exports=i("document","documentElement")},function(t,r,a){var i=a(13),o=a(14),l=a(23),c=Object.defineProperty,u={},thrower=function(t){throw t};t.exports=function(t,r){if(l(u,t))return u[t];r||(r={});var a=[][t],h=!!l(r,"ACCESSORS")&&r.ACCESSORS,d=l(r,0)?r[0]:thrower,p=l(r,1)?r[1]:void 0;return u[t]=!!a&&!o((function(){if(h&&!i)return!0;var t={length:-1};h?c(t,1,{enumerable:!0,get:thrower}):t[1]=1,a.call(t,d,p)}))}},function(t,r,a){a(77),a(89);var i=a(43);t.exports=i.Array.from},function(t,r,a){"use strict";var i=a(78).charAt,o=a(33),l=a(79),c="String Iterator",u=o.set,h=o.getterFor(c);l(String,"String",(function(t){u(this,{type:c,string:String(t),index:0})}),(function next(){var t,r=h(this),a=r.string,o=r.index;return o>=a.length?{value:void 0,done:!0}:(t=i(a,o),r.index+=t.length,{value:t,done:!1})}))},function(t,r,a){var i=a(48),o=a(20),createMethod=function(t){return function(r,a){var l,c,u=String(o(r)),h=i(a),d=u.length;return h<0||h>=d?t?"":void 0:(l=u.charCodeAt(h))<55296||l>56319||h+1===d||(c=u.charCodeAt(h+1))<56320||c>57343?t?u.charAt(h):l:t?u.slice(h,h+2):c-56320+(l-55296<<10)+65536}};t.exports={codeAt:createMethod(!1),charAt:createMethod(!0)}},function(t,r,a){"use strict";var i=a(10),o=a(80),l=a(82),c=a(87),u=a(85),h=a(26),d=a(29),p=a(57),m=a(37),g=a(86),b=a(81),y=b.IteratorPrototype,v=b.BUGGY_SAFARI_ITERATORS,S=p("iterator"),k="keys",w="values",C="entries",returnThis=function(){return this};t.exports=function(t,r,a,p,b,x,_){o(a,r,p);var A,R,T,getIterationMethod=function(t){if(t===b&&B)return B;if(!v&&t in O)return O[t];switch(t){case k:return function keys(){return new a(this,t)};case w:return function values(){return new a(this,t)};case C:return function entries(){return new a(this,t)}}return function(){return new a(this)}},I=r+" Iterator",P=!1,O=t.prototype,E=O[S]||O["@@iterator"]||b&&O[b],B=!v&&E||getIterationMethod(b),D="Array"==r&&O.entries||E;if(D&&(A=l(D.call(new t)),y!==Object.prototype&&A.next&&(m||l(A)===y||(c?c(A,y):"function"!=typeof A[S]&&h(A,S,returnThis)),u(A,I,!0,!0),m&&(g[I]=returnThis))),b==w&&E&&E.name!==w&&(P=!0,B=function values(){return E.call(this)}),m&&!_||O[S]===B||h(O,S,B),g[r]=B,b)if(R={values:getIterationMethod(w),keys:x?B:getIterationMethod(k),entries:getIterationMethod(C)},_)for(T in R)(v||P||!(T in O))&&d(O,T,R[T]);else i({target:r,proto:!0,forced:v||P},R);return R}},function(t,r,a){"use strict";var i=a(81).IteratorPrototype,o=a(71),l=a(16),c=a(85),u=a(86),returnThis=function(){return this};t.exports=function(t,r,a){var h=r+" Iterator";return t.prototype=o(i,{next:l(1,a)}),c(t,h,!1,!0),u[h]=returnThis,t}},function(t,r,a){"use strict";var i,o,l,c=a(82),u=a(26),h=a(23),d=a(57),p=a(37),m=d("iterator"),g=!1;[].keys&&("next"in(l=[].keys())?(o=c(c(l)))!==Object.prototype&&(i=o):g=!0),null==i&&(i={}),p||h(i,m)||u(i,m,(function(){return this})),t.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:g}},function(t,r,a){var i=a(23),o=a(83),l=a(35),c=a(84),u=l("IE_PROTO"),h=Object.prototype;t.exports=c?Object.getPrototypeOf:function(t){return t=o(t),i(t,u)?t[u]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?h:null}},function(t,r,a){var i=a(20);t.exports=function(t){return Object(i(t))}},function(t,r,a){var i=a(14);t.exports=!i((function(){function F(){}return F.prototype.constructor=null,Object.getPrototypeOf(new F)!==F.prototype}))},function(t,r,a){var i=a(27).f,o=a(23),l=a(57)("toStringTag");t.exports=function(t,r,a){t&&!o(t=a?t:t.prototype,l)&&i(t,l,{configurable:!0,value:r})}},function(t,r){t.exports={}},function(t,r,a){var i=a(28),o=a(88);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,r=!1,a={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(a,[]),r=a instanceof Array}catch(t){}return function setPrototypeOf(a,l){return i(a),o(l),r?t.call(a,l):a.__proto__=l,a}}():void 0)},function(t,r,a){var i=a(22);t.exports=function(t){if(!i(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},function(t,r,a){var i=a(10),o=a(90);i({target:"Array",stat:!0,forced:!a(97)((function(t){Array.from(t)}))},{from:o})},function(t,r,a){"use strict";var i=a(62),o=a(83),l=a(91),c=a(92),u=a(47),h=a(93),d=a(94);t.exports=function from(t){var r,a,p,m,g,b,y=o(t),v="function"==typeof this?this:Array,S=arguments.length,k=S>1?arguments[1]:void 0,w=void 0!==k,C=d(y),x=0;if(w&&(k=i(k,S>2?arguments[2]:void 0,2)),null==C||v==Array&&c(C))for(a=new v(r=u(y.length));r>x;x++)b=w?k(y[x],x):y[x],h(a,x,b);else for(g=(m=C.call(y)).next,a=new v;!(p=g.call(m)).done;x++)b=w?l(m,k,[p.value,x],!0):p.value,h(a,x,b);return a.length=x,a}},function(t,r,a){var i=a(28);t.exports=function(t,r,a,o){try{return o?r(i(a)[0],a[1]):r(a)}catch(r){var l=t.return;throw void 0!==l&&i(l.call(t)),r}}},function(t,r,a){var i=a(57),o=a(86),l=i("iterator"),c=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||c[l]===t)}},function(t,r,a){"use strict";var i=a(21),o=a(27),l=a(16);t.exports=function(t,r,a){var c=i(r);c in t?o.f(t,c,l(0,a)):t[c]=a}},function(t,r,a){var i=a(95),o=a(86),l=a(57)("iterator");t.exports=function(t){if(null!=t)return t[l]||t["@@iterator"]||o[i(t)]}},function(t,r,a){var i=a(96),o=a(19),l=a(57)("toStringTag"),c="Arguments"==o(function(){return arguments}());t.exports=i?o:function(t){var r,a,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(a=function(t,r){try{return t[r]}catch(t){}}(r=Object(t),l))?a:c?o(r):"Object"==(i=o(r))&&"function"==typeof r.callee?"Arguments":i}},function(t,r,a){var i={};i[a(57)("toStringTag")]="z",t.exports="[object z]"===String(i)},function(t,r,a){var i=a(57)("iterator"),o=!1;try{var l=0,c={next:function(){return{done:!!l++}},return:function(){o=!0}};c[i]=function(){return this},Array.from(c,(function(){throw 2}))}catch(t){}t.exports=function(t,r){if(!r&&!o)return!1;var a=!1;try{var l={};l[i]=function(){return{next:function(){return{done:a=!0}}}},t(l)}catch(t){}return a}},function(t,r,a){a(99);var i=a(43);t.exports=i.Object.assign},function(t,r,a){var i=a(10),o=a(100);i({target:"Object",stat:!0,forced:Object.assign!==o},{assign:o})},function(t,r,a){"use strict";var i=a(13),o=a(14),l=a(73),c=a(51),u=a(15),h=a(83),d=a(18),p=Object.assign,m=Object.defineProperty;t.exports=!p||o((function(){if(i&&1!==p({b:1},p(m({},"a",{enumerable:!0,get:function(){m(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},r={},a=Symbol(),o="abcdefghijklmnopqrst";return t[a]=7,o.split("").forEach((function(t){r[t]=t})),7!=p({},t)[a]||l(p({},r)).join("")!=o}))?function assign(t,r){for(var a=h(t),o=arguments.length,p=1,m=c.f,g=u.f;o>p;)for(var b,y=d(arguments[p++]),v=m?l(y).concat(m(y)):l(y),S=v.length,k=0;S>k;)b=v[k++],i&&!g.call(y,b)||(a[b]=y[b]);return a}:p},function(t,r,a){a(102);var i=a(43);t.exports=i.Math.log2},function(t,r,a){var i=a(10),o=Math.log,l=Math.LN2;i({target:"Math",stat:!0},{log2:function log2(t){return o(t)/l}})},function(t,r,a){a(104);var i=a(43);t.exports=i.Number.isNaN},function(t,r,a){a(10)({target:"Number",stat:!0},{isNaN:function isNaN(t){return t!=t}})},function(t,r,a){a(106);var i=a(43);t.exports=i.Number.isInteger},function(t,r,a){a(10)({target:"Number",stat:!0},{isInteger:a(107)})},function(t,r,a){var i=a(22),o=Math.floor;t.exports=function isInteger(t){return!i(t)&&isFinite(t)&&o(t)===t}},function(t,r,a){a(109)},function(t,r,a){"use strict";var i=a(110),o=a(112),l=a(14),c=i.aTypedArray,u=i.aTypedArrayConstructor,h=i.exportTypedArrayMethod,d=[].slice;h("slice",(function slice(t,r){for(var a=d.call(c(this),t,r),i=o(this,this.constructor),l=0,h=a.length,p=new(u(i))(h);h>l;)p[l]=a[l++];return p}),l((function(){new Int8Array(1).slice()})))},function(t,r,a){"use strict";var i,o=a(111),l=a(13),c=a(11),u=a(22),h=a(23),d=a(95),p=a(26),m=a(29),g=a(27).f,b=a(82),y=a(87),v=a(57),S=a(38),k=c.Int8Array,w=k&&k.prototype,C=c.Uint8ClampedArray,x=C&&C.prototype,_=k&&b(k),A=w&&b(w),R=Object.prototype,T=R.isPrototypeOf,I=v("toStringTag"),P=S("TYPED_ARRAY_TAG"),O=o&&!!y&&"Opera"!==d(c.opera),E=!1,B={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},isTypedArray=function(t){return u(t)&&h(B,d(t))};for(i in B)c[i]||(O=!1);if((!O||"function"!=typeof _||_===Function.prototype)&&(_=function TypedArray(){throw TypeError("Incorrect invocation")},O))for(i in B)c[i]&&y(c[i],_);if((!O||!A||A===R)&&(A=_.prototype,O))for(i in B)c[i]&&y(c[i].prototype,A);if(O&&b(x)!==A&&y(x,A),l&&!h(A,I))for(i in E=!0,g(A,I,{get:function(){return u(this)?this[P]:void 0}}),B)c[i]&&p(c[i],P,i);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:O,TYPED_ARRAY_TAG:E&&P,aTypedArray:function(t){if(isTypedArray(t))return t;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(t){if(y){if(T.call(_,t))return t}else for(var r in B)if(h(B,i)){var a=c[r];if(a&&(t===a||T.call(a,t)))return t}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(t,r,a){if(l){if(a)for(var i in B){var o=c[i];o&&h(o.prototype,t)&&delete o.prototype[t]}A[t]&&!a||m(A,t,a?r:O&&w[t]||r)}},exportTypedArrayStaticMethod:function(t,r,a){var i,o;if(l){if(y){if(a)for(i in B)(o=c[i])&&h(o,t)&&delete o[t];if(_[t]&&!a)return;try{return m(_,t,a?r:O&&k[t]||r)}catch(t){}}for(i in B)!(o=c[i])||o[t]&&!a||m(o,t,r)}},isView:function isView(t){var r=d(t);return"DataView"===r||h(B,r)},isTypedArray:isTypedArray,TypedArray:_,TypedArrayPrototype:A}},function(t,r){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},function(t,r,a){var i=a(28),o=a(63),l=a(57)("species");t.exports=function(t,r){var a,c=i(t).constructor;return void 0===c||null==(a=i(c)[l])?r:o(a)}},function(t,r,a){a(114),a(77),a(116),a(119),a(134),a(135);var i=a(43);t.exports=i.Promise},function(t,r,a){var i=a(96),o=a(29),l=a(115);i||o(Object.prototype,"toString",l,{unsafe:!0})},function(t,r,a){"use strict";var i=a(96),o=a(95);t.exports=i?{}.toString:function toString(){return"[object "+o(this)+"]"}},function(t,r,a){var i=a(11),o=a(117),l=a(118),c=a(26),u=a(57),h=u("iterator"),d=u("toStringTag"),p=l.values;for(var m in o){var g=i[m],b=g&&g.prototype;if(b){if(b[h]!==p)try{c(b,h,p)}catch(t){b[h]=p}if(b[d]||c(b,d,m),o[m])for(var y in l)if(b[y]!==l[y])try{c(b,y,l[y])}catch(t){b[y]=l[y]}}}},function(t,r){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,r,a){"use strict";var i=a(17),o=a(70),l=a(86),c=a(33),u=a(79),h="Array Iterator",d=c.set,p=c.getterFor(h);t.exports=u(Array,"Array",(function(t,r){d(this,{type:h,target:i(t),index:0,kind:r})}),(function(){var t=p(this),r=t.target,a=t.kind,i=t.index++;return!r||i>=r.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==a?{value:i,done:!1}:"values"==a?{value:r[i],done:!1}:{value:[i,r[i]],done:!1}}),"values"),l.Arguments=l.Array,o("keys"),o("values"),o("entries")},function(t,r,a){"use strict";var i,o,l,c,u=a(10),h=a(37),d=a(11),p=a(42),m=a(120),g=a(29),b=a(121),y=a(85),v=a(122),S=a(22),k=a(63),w=a(123),C=a(19),x=a(31),_=a(124),A=a(97),R=a(112),T=a(125).set,I=a(128),P=a(129),O=a(131),E=a(130),B=a(132),D=a(33),M=a(52),L=a(57),N=a(133),U=L("species"),j="Promise",q=D.get,W=D.set,z=D.getterFor(j),G=m,H=d.TypeError,X=d.document,V=d.process,Y=p("fetch"),K=E.f,J=K,Z="process"==C(V),Q=!!(X&&X.createEvent&&d.dispatchEvent),$="unhandledrejection",ee=M(j,(function(){if(!(x(G)!==String(G))){if(66===N)return!0;if(!Z&&"function"!=typeof PromiseRejectionEvent)return!0}if(h&&!G.prototype.finally)return!0;if(N>=51&&/native code/.test(G))return!1;var t=G.resolve(1),FakePromise=function(t){t((function(){}),(function(){}))};return(t.constructor={})[U]=FakePromise,!(t.then((function(){}))instanceof FakePromise)})),te=ee||!A((function(t){G.all(t).catch((function(){}))})),isThenable=function(t){var r;return!(!S(t)||"function"!=typeof(r=t.then))&&r},notify=function(t,r,a){if(!r.notified){r.notified=!0;var i=r.reactions;I((function(){for(var o=r.value,l=1==r.state,c=0;i.length>c;){var u,h,d,p=i[c++],m=l?p.ok:p.fail,g=p.resolve,b=p.reject,y=p.domain;try{m?(l||(2===r.rejection&&onHandleUnhandled(t,r),r.rejection=1),!0===m?u=o:(y&&y.enter(),u=m(o),y&&(y.exit(),d=!0)),u===p.promise?b(H("Promise-chain cycle")):(h=isThenable(u))?h.call(u,g,b):g(u)):b(o)}catch(t){y&&!d&&y.exit(),b(t)}}r.reactions=[],r.notified=!1,a&&!r.rejection&&onUnhandled(t,r)}))}},dispatchEvent=function(t,r,a){var i,o;Q?((i=X.createEvent("Event")).promise=r,i.reason=a,i.initEvent(t,!1,!0),d.dispatchEvent(i)):i={promise:r,reason:a},(o=d["on"+t])?o(i):t===$&&O("Unhandled promise rejection",a)},onUnhandled=function(t,r){T.call(d,(function(){var a,i=r.value;if(isUnhandled(r)&&(a=B((function(){Z?V.emit("unhandledRejection",i,t):dispatchEvent($,t,i)})),r.rejection=Z||isUnhandled(r)?2:1,a.error))throw a.value}))},isUnhandled=function(t){return 1!==t.rejection&&!t.parent},onHandleUnhandled=function(t,r){T.call(d,(function(){Z?V.emit("rejectionHandled",t):dispatchEvent("rejectionhandled",t,r.value)}))},bind=function(t,r,a,i){return function(o){t(r,a,o,i)}},internalReject=function(t,r,a,i){r.done||(r.done=!0,i&&(r=i),r.value=a,r.state=2,notify(t,r,!0))},internalResolve=function(t,r,a,i){if(!r.done){r.done=!0,i&&(r=i);try{if(t===a)throw H("Promise can't be resolved itself");var o=isThenable(a);o?I((function(){var i={done:!1};try{o.call(a,bind(internalResolve,t,i,r),bind(internalReject,t,i,r))}catch(a){internalReject(t,i,a,r)}})):(r.value=a,r.state=1,notify(t,r,!1))}catch(a){internalReject(t,{done:!1},a,r)}}};ee&&(G=function Promise(t){w(this,G,j),k(t),i.call(this);var r=q(this);try{t(bind(internalResolve,this,r),bind(internalReject,this,r))}catch(t){internalReject(this,r,t)}},(i=function Promise(t){W(this,{type:j,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=b(G.prototype,{then:function then(t,r){var a=z(this),i=K(R(this,G));return i.ok="function"!=typeof t||t,i.fail="function"==typeof r&&r,i.domain=Z?V.domain:void 0,a.parent=!0,a.reactions.push(i),0!=a.state&&notify(this,a,!1),i.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new i,r=q(t);this.promise=t,this.resolve=bind(internalResolve,t,r),this.reject=bind(internalReject,t,r)},E.f=K=function(t){return t===G||t===l?new o(t):J(t)},h||"function"!=typeof m||(c=m.prototype.then,g(m.prototype,"then",(function then(t,r){var a=this;return new G((function(t,r){c.call(a,t,r)})).then(t,r)}),{unsafe:!0}),"function"==typeof Y&&u({global:!0,enumerable:!0,forced:!0},{fetch:function fetch(t){return P(G,Y.apply(d,arguments))}}))),u({global:!0,wrap:!0,forced:ee},{Promise:G}),y(G,j,!1,!0),v(j),l=p(j),u({target:j,stat:!0,forced:ee},{reject:function reject(t){var r=K(this);return r.reject.call(void 0,t),r.promise}}),u({target:j,stat:!0,forced:h||ee},{resolve:function resolve(t){return P(h&&this===l?G:this,t)}}),u({target:j,stat:!0,forced:te},{all:function all(t){var r=this,a=K(r),i=a.resolve,o=a.reject,l=B((function(){var a=k(r.resolve),l=[],c=0,u=1;_(t,(function(t){var h=c++,d=!1;l.push(void 0),u++,a.call(r,t).then((function(t){d||(d=!0,l[h]=t,--u||i(l))}),o)})),--u||i(l)}));return l.error&&o(l.value),a.promise},race:function race(t){var r=this,a=K(r),i=a.reject,o=B((function(){var o=k(r.resolve);_(t,(function(t){o.call(r,t).then(a.resolve,i)}))}));return o.error&&i(o.value),a.promise}})},function(t,r,a){var i=a(11);t.exports=i.Promise},function(t,r,a){var i=a(29);t.exports=function(t,r,a){for(var o in r)i(t,o,r[o],a);return t}},function(t,r,a){"use strict";var i=a(42),o=a(27),l=a(57),c=a(13),u=l("species");t.exports=function(t){var r=i(t),a=o.f;c&&r&&!r[u]&&a(r,u,{configurable:!0,get:function(){return this}})}},function(t,r){t.exports=function(t,r,a){if(!(t instanceof r))throw TypeError("Incorrect "+(a?a+" ":"")+"invocation");return t}},function(t,r,a){var i=a(28),o=a(92),l=a(47),c=a(62),u=a(94),h=a(91),Result=function(t,r){this.stopped=t,this.result=r};(t.exports=function(t,r,a,d,p){var m,g,b,y,v,S,k,w=c(r,a,d?2:1);if(p)m=t;else{if("function"!=typeof(g=u(t)))throw TypeError("Target is not iterable");if(o(g)){for(b=0,y=l(t.length);y>b;b++)if((v=d?w(i(k=t[b])[0],k[1]):w(t[b]))&&v instanceof Result)return v;return new Result(!1)}m=g.call(t)}for(S=m.next;!(k=S.call(m)).done;)if("object"==typeof(v=h(m,w,k.value,d))&&v&&v instanceof Result)return v;return new Result(!1)}).stop=function(t){return new Result(!0,t)}},function(t,r,a){var i,o,l,c=a(11),u=a(14),h=a(19),d=a(62),p=a(74),m=a(25),g=a(126),b=c.location,y=c.setImmediate,v=c.clearImmediate,S=c.process,k=c.MessageChannel,w=c.Dispatch,C=0,x={},_="onreadystatechange",run=function(t){if(x.hasOwnProperty(t)){var r=x[t];delete x[t],r()}},runner=function(t){return function(){run(t)}},listener=function(t){run(t.data)},post=function(t){c.postMessage(t+"",b.protocol+"//"+b.host)};y&&v||(y=function setImmediate(t){for(var r=[],a=1;arguments.length>a;)r.push(arguments[a++]);return x[++C]=function(){("function"==typeof t?t:Function(t)).apply(void 0,r)},i(C),C},v=function clearImmediate(t){delete x[t]},"process"==h(S)?i=function(t){S.nextTick(runner(t))}:w&&w.now?i=function(t){w.now(runner(t))}:k&&!g?(l=(o=new k).port2,o.port1.onmessage=listener,i=d(l.postMessage,l,1)):!c.addEventListener||"function"!=typeof postMessage||c.importScripts||u(post)||"file:"===b.protocol?i=_ in m("script")?function(t){p.appendChild(m("script")).onreadystatechange=function(){p.removeChild(this),run(t)}}:function(t){setTimeout(runner(t),0)}:(i=post,c.addEventListener("message",listener,!1))),t.exports={set:y,clear:v}},function(t,r,a){var i=a(127);t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(i)},function(t,r,a){var i=a(42);t.exports=i("navigator","userAgent")||""},function(t,r,a){var i,o,l,c,u,h,d,p,m=a(11),g=a(12).f,b=a(19),y=a(125).set,v=a(126),S=m.MutationObserver||m.WebKitMutationObserver,k=m.process,w=m.Promise,C="process"==b(k),x=g(m,"queueMicrotask"),_=x&&x.value;_||(i=function(){var t,r;for(C&&(t=k.domain)&&t.exit();o;){r=o.fn,o=o.next;try{r()}catch(t){throw o?c():l=void 0,t}}l=void 0,t&&t.enter()},C?c=function(){k.nextTick(i)}:S&&!v?(u=!0,h=document.createTextNode(""),new S(i).observe(h,{characterData:!0}),c=function(){h.data=u=!u}):w&&w.resolve?(d=w.resolve(void 0),p=d.then,c=function(){p.call(d,i)}):c=function(){y.call(m,i)}),t.exports=_||function(t){var r={fn:t,next:void 0};l&&(l.next=r),o||(o=r,c()),l=r}},function(t,r,a){var i=a(28),o=a(22),l=a(130);t.exports=function(t,r){if(i(t),o(r)&&r.constructor===t)return r;var a=l.f(t);return(0,a.resolve)(r),a.promise}},function(t,r,a){"use strict";var i=a(63),PromiseCapability=function(t){var r,a;this.promise=new t((function(t,i){if(void 0!==r||void 0!==a)throw TypeError("Bad Promise constructor");r=t,a=i})),this.resolve=i(r),this.reject=i(a)};t.exports.f=function(t){return new PromiseCapability(t)}},function(t,r,a){var i=a(11);t.exports=function(t,r){var a=i.console;a&&a.error&&(1===arguments.length?a.error(t):a.error(t,r))}},function(t,r){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},function(t,r,a){var i,o,l=a(11),c=a(127),u=l.process,h=u&&u.versions,d=h&&h.v8;d?o=(i=d.split("."))[0]+i[1]:c&&(!(i=c.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=c.match(/Chrome\/(\d+)/))&&(o=i[1]),t.exports=o&&+o},function(t,r,a){"use strict";var i=a(10),o=a(63),l=a(130),c=a(132),u=a(124);i({target:"Promise",stat:!0},{allSettled:function allSettled(t){var r=this,a=l.f(r),i=a.resolve,h=a.reject,d=c((function(){var a=o(r.resolve),l=[],c=0,h=1;u(t,(function(t){var o=c++,u=!1;l.push(void 0),h++,a.call(r,t).then((function(t){u||(u=!0,l[o]={status:"fulfilled",value:t},--h||i(l))}),(function(t){u||(u=!0,l[o]={status:"rejected",reason:t},--h||i(l))}))})),--h||i(l)}));return d.error&&h(d.value),a.promise}})},function(t,r,a){"use strict";var i=a(10),o=a(37),l=a(120),c=a(14),u=a(42),h=a(112),d=a(129),p=a(29);i({target:"Promise",proto:!0,real:!0,forced:!!l&&c((function(){l.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var r=h(this,u("Promise")),a="function"==typeof t;return this.then(a?function(a){return d(r,t()).then((function(){return a}))}:t,a?function(a){return d(r,t()).then((function(){throw a}))}:t)}}),o||"function"!=typeof l||l.prototype.finally||p(l.prototype,"finally",u("Promise").prototype.finally)},function(t,r,a){a(137),a(142),a(140);var i=a(43);t.exports=i.URL},function(t,r,a){"use strict";a(77);var i,o=a(10),l=a(13),c=a(138),u=a(11),h=a(72),d=a(29),p=a(123),m=a(23),g=a(100),b=a(90),y=a(78).codeAt,v=a(139),S=a(85),k=a(140),w=a(33),C=u.URL,x=k.URLSearchParams,_=k.getState,A=w.set,R=w.getterFor("URL"),T=Math.floor,I=Math.pow,P="Invalid scheme",O="Invalid host",E="Invalid port",B=/[A-Za-z]/,D=/[\d+-.A-Za-z]/,M=/\d/,L=/^(0x|0X)/,N=/^[0-7]+$/,U=/^\d+$/,j=/^[\dA-Fa-f]+$/,q=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,W=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,z=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,G=/[\u0009\u000A\u000D]/g,parseHost=function(t,r){var a,i,o;if("["==r.charAt(0)){if("]"!=r.charAt(r.length-1))return O;if(!(a=parseIPv6(r.slice(1,-1))))return O;t.host=a}else if(isSpecial(t)){if(r=v(r),q.test(r))return O;if(null===(a=parseIPv4(r)))return O;t.host=a}else{if(W.test(r))return O;for(a="",i=b(r),o=0;o<i.length;o++)a+=percentEncode(i[o],H);t.host=a}},parseIPv4=function(t){var r,a,i,o,l,c,u,h=t.split(".");if(h.length&&""==h[h.length-1]&&h.pop(),(r=h.length)>4)return t;for(a=[],i=0;i<r;i++){if(""==(o=h[i]))return t;if(l=10,o.length>1&&"0"==o.charAt(0)&&(l=L.test(o)?16:8,o=o.slice(8==l?1:2)),""===o)c=0;else{if(!(10==l?U:8==l?N:j).test(o))return t;c=parseInt(o,l)}a.push(c)}for(i=0;i<r;i++)if(c=a[i],i==r-1){if(c>=I(256,5-r))return null}else if(c>255)return null;for(u=a.pop(),i=0;i<a.length;i++)u+=a[i]*I(256,3-i);return u},parseIPv6=function(t){var r,a,i,o,l,c,u,h=[0,0,0,0,0,0,0,0],d=0,p=null,m=0,char=function(){return t.charAt(m)};if(":"==char()){if(":"!=t.charAt(1))return;m+=2,p=++d}for(;char();){if(8==d)return;if(":"!=char()){for(r=a=0;a<4&&j.test(char());)r=16*r+parseInt(char(),16),m++,a++;if("."==char()){if(0==a)return;if(m-=a,d>6)return;for(i=0;char();){if(o=null,i>0){if(!("."==char()&&i<4))return;m++}if(!M.test(char()))return;for(;M.test(char());){if(l=parseInt(char(),10),null===o)o=l;else{if(0==o)return;o=10*o+l}if(o>255)return;m++}h[d]=256*h[d]+o,2!=++i&&4!=i||d++}if(4!=i)return;break}if(":"==char()){if(m++,!char())return}else if(char())return;h[d++]=r}else{if(null!==p)return;m++,p=++d}}if(null!==p)for(c=d-p,d=7;0!=d&&c>0;)u=h[d],h[d--]=h[p+c-1],h[p+--c]=u;else if(8!=d)return;return h},serializeHost=function(t){var r,a,i,o;if("number"==typeof t){for(r=[],a=0;a<4;a++)r.unshift(t%256),t=T(t/256);return r.join(".")}if("object"==typeof t){for(r="",i=function(t){for(var r=null,a=1,i=null,o=0,l=0;l<8;l++)0!==t[l]?(o>a&&(r=i,a=o),i=null,o=0):(null===i&&(i=l),++o);return o>a&&(r=i,a=o),r}(t),a=0;a<8;a++)o&&0===t[a]||(o&&(o=!1),i===a?(r+=a?":":"::",o=!0):(r+=t[a].toString(16),a<7&&(r+=":")));return"["+r+"]"}return t},H={},X=g({},H,{" ":1,'"':1,"<":1,">":1,"`":1}),V=g({},X,{"#":1,"?":1,"{":1,"}":1}),Y=g({},V,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),percentEncode=function(t,r){var a=y(t,0);return a>32&&a<127&&!m(r,t)?t:encodeURIComponent(t)},K={ftp:21,file:null,http:80,https:443,ws:80,wss:443},isSpecial=function(t){return m(K,t.scheme)},includesCredentials=function(t){return""!=t.username||""!=t.password},cannotHaveUsernamePasswordPort=function(t){return!t.host||t.cannotBeABaseURL||"file"==t.scheme},isWindowsDriveLetter=function(t,r){var a;return 2==t.length&&B.test(t.charAt(0))&&(":"==(a=t.charAt(1))||!r&&"|"==a)},startsWithWindowsDriveLetter=function(t){var r;return t.length>1&&isWindowsDriveLetter(t.slice(0,2))&&(2==t.length||"/"===(r=t.charAt(2))||"\\"===r||"?"===r||"#"===r)},shortenURLsPath=function(t){var r=t.path,a=r.length;!a||"file"==t.scheme&&1==a&&isWindowsDriveLetter(r[0],!0)||r.pop()},isSingleDot=function(t){return"."===t||"%2e"===t.toLowerCase()},J={},Z={},Q={},$={},ee={},te={},re={},ae={},ne={},ie={},oe={},se={},le={},ce={},ue={},he={},fe={},de={},pe={},me={},ge={},parseURL=function(t,r,a,o){var l,c,u,h,d,p=a||J,g=0,y="",v=!1,S=!1,k=!1;for(a||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=!1,r=r.replace(z,"")),r=r.replace(G,""),l=b(r);g<=l.length;){switch(c=l[g],p){case J:if(!c||!B.test(c)){if(a)return P;p=Q;continue}y+=c.toLowerCase(),p=Z;break;case Z:if(c&&(D.test(c)||"+"==c||"-"==c||"."==c))y+=c.toLowerCase();else{if(":"!=c){if(a)return P;y="",p=Q,g=0;continue}if(a&&(isSpecial(t)!=m(K,y)||"file"==y&&(includesCredentials(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;if(t.scheme=y,a)return void(isSpecial(t)&&K[t.scheme]==t.port&&(t.port=null));y="","file"==t.scheme?p=ce:isSpecial(t)&&o&&o.scheme==t.scheme?p=$:isSpecial(t)?p=ae:"/"==l[g+1]?(p=ee,g++):(t.cannotBeABaseURL=!0,t.path.push(""),p=pe)}break;case Q:if(!o||o.cannotBeABaseURL&&"#"!=c)return P;if(o.cannotBeABaseURL&&"#"==c){t.scheme=o.scheme,t.path=o.path.slice(),t.query=o.query,t.fragment="",t.cannotBeABaseURL=!0,p=ge;break}p="file"==o.scheme?ce:te;continue;case $:if("/"!=c||"/"!=l[g+1]){p=te;continue}p=ne,g++;break;case ee:if("/"==c){p=ie;break}p=de;continue;case te:if(t.scheme=o.scheme,c==i)t.username=o.username,t.password=o.password,t.host=o.host,t.port=o.port,t.path=o.path.slice(),t.query=o.query;else if("/"==c||"\\"==c&&isSpecial(t))p=re;else if("?"==c)t.username=o.username,t.password=o.password,t.host=o.host,t.port=o.port,t.path=o.path.slice(),t.query="",p=me;else{if("#"!=c){t.username=o.username,t.password=o.password,t.host=o.host,t.port=o.port,t.path=o.path.slice(),t.path.pop(),p=de;continue}t.username=o.username,t.password=o.password,t.host=o.host,t.port=o.port,t.path=o.path.slice(),t.query=o.query,t.fragment="",p=ge}break;case re:if(!isSpecial(t)||"/"!=c&&"\\"!=c){if("/"!=c){t.username=o.username,t.password=o.password,t.host=o.host,t.port=o.port,p=de;continue}p=ie}else p=ne;break;case ae:if(p=ne,"/"!=c||"/"!=y.charAt(g+1))continue;g++;break;case ne:if("/"!=c&&"\\"!=c){p=ie;continue}break;case ie:if("@"==c){v&&(y="%40"+y),v=!0,u=b(y);for(var w=0;w<u.length;w++){var C=u[w];if(":"!=C||k){var x=percentEncode(C,Y);k?t.password+=x:t.username+=x}else k=!0}y=""}else if(c==i||"/"==c||"?"==c||"#"==c||"\\"==c&&isSpecial(t)){if(v&&""==y)return"Invalid authority";g-=b(y).length+1,y="",p=oe}else y+=c;break;case oe:case se:if(a&&"file"==t.scheme){p=he;continue}if(":"!=c||S){if(c==i||"/"==c||"?"==c||"#"==c||"\\"==c&&isSpecial(t)){if(isSpecial(t)&&""==y)return O;if(a&&""==y&&(includesCredentials(t)||null!==t.port))return;if(h=parseHost(t,y))return h;if(y="",p=fe,a)return;continue}"["==c?S=!0:"]"==c&&(S=!1),y+=c}else{if(""==y)return O;if(h=parseHost(t,y))return h;if(y="",p=le,a==se)return}break;case le:if(!M.test(c)){if(c==i||"/"==c||"?"==c||"#"==c||"\\"==c&&isSpecial(t)||a){if(""!=y){var _=parseInt(y,10);if(_>65535)return E;t.port=isSpecial(t)&&_===K[t.scheme]?null:_,y=""}if(a)return;p=fe;continue}return E}y+=c;break;case ce:if(t.scheme="file","/"==c||"\\"==c)p=ue;else{if(!o||"file"!=o.scheme){p=de;continue}if(c==i)t.host=o.host,t.path=o.path.slice(),t.query=o.query;else if("?"==c)t.host=o.host,t.path=o.path.slice(),t.query="",p=me;else{if("#"!=c){startsWithWindowsDriveLetter(l.slice(g).join(""))||(t.host=o.host,t.path=o.path.slice(),shortenURLsPath(t)),p=de;continue}t.host=o.host,t.path=o.path.slice(),t.query=o.query,t.fragment="",p=ge}}break;case ue:if("/"==c||"\\"==c){p=he;break}o&&"file"==o.scheme&&!startsWithWindowsDriveLetter(l.slice(g).join(""))&&(isWindowsDriveLetter(o.path[0],!0)?t.path.push(o.path[0]):t.host=o.host),p=de;continue;case he:if(c==i||"/"==c||"\\"==c||"?"==c||"#"==c){if(!a&&isWindowsDriveLetter(y))p=de;else if(""==y){if(t.host="",a)return;p=fe}else{if(h=parseHost(t,y))return h;if("localhost"==t.host&&(t.host=""),a)return;y="",p=fe}continue}y+=c;break;case fe:if(isSpecial(t)){if(p=de,"/"!=c&&"\\"!=c)continue}else if(a||"?"!=c)if(a||"#"!=c){if(c!=i&&(p=de,"/"!=c))continue}else t.fragment="",p=ge;else t.query="",p=me;break;case de:if(c==i||"/"==c||"\\"==c&&isSpecial(t)||!a&&("?"==c||"#"==c)){if(".."===(d=(d=y).toLowerCase())||"%2e."===d||".%2e"===d||"%2e%2e"===d?(shortenURLsPath(t),"/"==c||"\\"==c&&isSpecial(t)||t.path.push("")):isSingleDot(y)?"/"==c||"\\"==c&&isSpecial(t)||t.path.push(""):("file"==t.scheme&&!t.path.length&&isWindowsDriveLetter(y)&&(t.host&&(t.host=""),y=y.charAt(0)+":"),t.path.push(y)),y="","file"==t.scheme&&(c==i||"?"==c||"#"==c))for(;t.path.length>1&&""===t.path[0];)t.path.shift();"?"==c?(t.query="",p=me):"#"==c&&(t.fragment="",p=ge)}else y+=percentEncode(c,V);break;case pe:"?"==c?(t.query="",p=me):"#"==c?(t.fragment="",p=ge):c!=i&&(t.path[0]+=percentEncode(c,H));break;case me:a||"#"!=c?c!=i&&("'"==c&&isSpecial(t)?t.query+="%27":t.query+="#"==c?"%23":percentEncode(c,H)):(t.fragment="",p=ge);break;case ge:c!=i&&(t.fragment+=percentEncode(c,X))}g++}},be=function URL(t){var r,a,i=p(this,be,"URL"),o=arguments.length>1?arguments[1]:void 0,c=String(t),u=A(i,{type:"URL"});if(void 0!==o)if(o instanceof be)r=R(o);else if(a=parseURL(r={},String(o)))throw TypeError(a);if(a=parseURL(u,c,null,r))throw TypeError(a);var h=u.searchParams=new x,d=_(h);d.updateSearchParams(u.query),d.updateURL=function(){u.query=String(h)||null},l||(i.href=serializeURL.call(i),i.origin=getOrigin.call(i),i.protocol=getProtocol.call(i),i.username=getUsername.call(i),i.password=getPassword.call(i),i.host=getHost.call(i),i.hostname=getHostname.call(i),i.port=getPort.call(i),i.pathname=getPathname.call(i),i.search=getSearch.call(i),i.searchParams=getSearchParams.call(i),i.hash=getHash.call(i))},ye=be.prototype,serializeURL=function(){var t=R(this),r=t.scheme,a=t.username,i=t.password,o=t.host,l=t.port,c=t.path,u=t.query,h=t.fragment,d=r+":";return null!==o?(d+="//",includesCredentials(t)&&(d+=a+(i?":"+i:"")+"@"),d+=serializeHost(o),null!==l&&(d+=":"+l)):"file"==r&&(d+="//"),d+=t.cannotBeABaseURL?c[0]:c.length?"/"+c.join("/"):"",null!==u&&(d+="?"+u),null!==h&&(d+="#"+h),d},getOrigin=function(){var t=R(this),r=t.scheme,a=t.port;if("blob"==r)try{return new URL(r.path[0]).origin}catch(t){return"null"}return"file"!=r&&isSpecial(t)?r+"://"+serializeHost(t.host)+(null!==a?":"+a:""):"null"},getProtocol=function(){return R(this).scheme+":"},getUsername=function(){return R(this).username},getPassword=function(){return R(this).password},getHost=function(){var t=R(this),r=t.host,a=t.port;return null===r?"":null===a?serializeHost(r):serializeHost(r)+":"+a},getHostname=function(){var t=R(this).host;return null===t?"":serializeHost(t)},getPort=function(){var t=R(this).port;return null===t?"":String(t)},getPathname=function(){var t=R(this),r=t.path;return t.cannotBeABaseURL?r[0]:r.length?"/"+r.join("/"):""},getSearch=function(){var t=R(this).query;return t?"?"+t:""},getSearchParams=function(){return R(this).searchParams},getHash=function(){var t=R(this).fragment;return t?"#"+t:""},accessorDescriptor=function(t,r){return{get:t,set:r,configurable:!0,enumerable:!0}};if(l&&h(ye,{href:accessorDescriptor(serializeURL,(function(t){var r=R(this),a=String(t),i=parseURL(r,a);if(i)throw TypeError(i);_(r.searchParams).updateSearchParams(r.query)})),origin:accessorDescriptor(getOrigin),protocol:accessorDescriptor(getProtocol,(function(t){var r=R(this);parseURL(r,String(t)+":",J)})),username:accessorDescriptor(getUsername,(function(t){var r=R(this),a=b(String(t));if(!cannotHaveUsernamePasswordPort(r)){r.username="";for(var i=0;i<a.length;i++)r.username+=percentEncode(a[i],Y)}})),password:accessorDescriptor(getPassword,(function(t){var r=R(this),a=b(String(t));if(!cannotHaveUsernamePasswordPort(r)){r.password="";for(var i=0;i<a.length;i++)r.password+=percentEncode(a[i],Y)}})),host:accessorDescriptor(getHost,(function(t){var r=R(this);r.cannotBeABaseURL||parseURL(r,String(t),oe)})),hostname:accessorDescriptor(getHostname,(function(t){var r=R(this);r.cannotBeABaseURL||parseURL(r,String(t),se)})),port:accessorDescriptor(getPort,(function(t){var r=R(this);cannotHaveUsernamePasswordPort(r)||(""==(t=String(t))?r.port=null:parseURL(r,t,le))})),pathname:accessorDescriptor(getPathname,(function(t){var r=R(this);r.cannotBeABaseURL||(r.path=[],parseURL(r,t+"",fe))})),search:accessorDescriptor(getSearch,(function(t){var r=R(this);""==(t=String(t))?r.query=null:("?"==t.charAt(0)&&(t=t.slice(1)),r.query="",parseURL(r,t,me)),_(r.searchParams).updateSearchParams(r.query)})),searchParams:accessorDescriptor(getSearchParams),hash:accessorDescriptor(getHash,(function(t){var r=R(this);""!=(t=String(t))?("#"==t.charAt(0)&&(t=t.slice(1)),r.fragment="",parseURL(r,t,ge)):r.fragment=null}))}),d(ye,"toJSON",(function toJSON(){return serializeURL.call(this)}),{enumerable:!0}),d(ye,"toString",(function toString(){return serializeURL.call(this)}),{enumerable:!0}),C){var ve=C.createObjectURL,Se=C.revokeObjectURL;ve&&d(be,"createObjectURL",(function createObjectURL(t){return ve.apply(C,arguments)})),Se&&d(be,"revokeObjectURL",(function revokeObjectURL(t){return Se.apply(C,arguments)}))}S(be,"URL"),o({global:!0,forced:!c,sham:!l},{URL:be})},function(t,r,a){var i=a(14),o=a(57),l=a(37),c=o("iterator");t.exports=!i((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),r=t.searchParams,a="";return t.pathname="c%20d",r.forEach((function(t,i){r.delete("b"),a+=i+t})),l&&!t.toJSON||!r.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==r.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!r[c]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://").host||"#%D0%B1"!==new URL("http://a#").hash||"a1c3"!==a||"x"!==new URL("http://x",void 0).host}))},function(t,r,a){"use strict";var i=2147483647,o=/[^\0-\u007E]/,l=/[.\u3002\uFF0E\uFF61]/g,c="Overflow: input needs wider integers to process",u=Math.floor,h=String.fromCharCode,digitToBasic=function(t){return t+22+75*(t<26)},adapt=function(t,r,a){var i=0;for(t=a?u(t/700):t>>1,t+=u(t/r);t>455;i+=36)t=u(t/35);return u(i+36*t/(t+38))},encode=function(t){var r,a,o=[],l=(t=function(t){for(var r=[],a=0,i=t.length;a<i;){var o=t.charCodeAt(a++);if(o>=55296&&o<=56319&&a<i){var l=t.charCodeAt(a++);56320==(64512&l)?r.push(((1023&o)<<10)+(1023&l)+65536):(r.push(o),a--)}else r.push(o)}return r}(t)).length,d=128,p=0,m=72;for(r=0;r<t.length;r++)(a=t[r])<128&&o.push(h(a));var g=o.length,b=g;for(g&&o.push("-");b<l;){var y=i;for(r=0;r<t.length;r++)(a=t[r])>=d&&a<y&&(y=a);var v=b+1;if(y-d>u((i-p)/v))throw RangeError(c);for(p+=(y-d)*v,d=y,r=0;r<t.length;r++){if((a=t[r])<d&&++p>i)throw RangeError(c);if(a==d){for(var S=p,k=36;;k+=36){var w=k<=m?1:k>=m+26?26:k-m;if(S<w)break;var C=S-w,x=36-w;o.push(h(digitToBasic(w+C%x))),S=u(C/x)}o.push(h(digitToBasic(S))),m=adapt(p,v,b==g),p=0,++b}}++p,++d}return o.join("")};t.exports=function(t){var r,a,i=[],c=t.toLowerCase().replace(l,".").split(".");for(r=0;r<c.length;r++)a=c[r],i.push(o.test(a)?"xn--"+encode(a):a);return i.join(".")}},function(t,r,a){"use strict";a(118);var i=a(10),o=a(42),l=a(138),c=a(29),u=a(121),h=a(85),d=a(80),p=a(33),m=a(123),g=a(23),b=a(62),y=a(95),v=a(28),S=a(22),k=a(71),w=a(16),C=a(141),x=a(94),_=a(57),A=o("fetch"),R=o("Headers"),T=_("iterator"),I="URLSearchParams",P="URLSearchParamsIterator",O=p.set,E=p.getterFor(I),B=p.getterFor(P),D=/\+/g,M=Array(4),percentSequence=function(t){return M[t-1]||(M[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))},percentDecode=function(t){try{return decodeURIComponent(t)}catch(r){return t}},deserialize=function(t){var r=t.replace(D," "),a=4;try{return decodeURIComponent(r)}catch(t){for(;a;)r=r.replace(percentSequence(a--),percentDecode);return r}},L=/[!'()~]|%20/g,N={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},replacer=function(t){return N[t]},serialize=function(t){return encodeURIComponent(t).replace(L,replacer)},parseSearchParams=function(t,r){if(r)for(var a,i,o=r.split("&"),l=0;l<o.length;)(a=o[l++]).length&&(i=a.split("="),t.push({key:deserialize(i.shift()),value:deserialize(i.join("="))}))},updateSearchParams=function(t){this.entries.length=0,parseSearchParams(this.entries,t)},validateArgumentsLength=function(t,r){if(t<r)throw TypeError("Not enough arguments")},U=d((function Iterator(t,r){O(this,{type:P,iterator:C(E(t).entries),kind:r})}),"Iterator",(function next(){var t=B(this),r=t.kind,a=t.iterator.next(),i=a.value;return a.done||(a.value="keys"===r?i.key:"values"===r?i.value:[i.key,i.value]),a})),j=function URLSearchParams(){m(this,j,I);var t,r,a,i,o,l,c,u,h,d=arguments.length>0?arguments[0]:void 0,p=this,b=[];if(O(p,{type:I,entries:b,updateURL:function(){},updateSearchParams:updateSearchParams}),void 0!==d)if(S(d))if("function"==typeof(t=x(d)))for(a=(r=t.call(d)).next;!(i=a.call(r)).done;){if((c=(l=(o=C(v(i.value))).next).call(o)).done||(u=l.call(o)).done||!l.call(o).done)throw TypeError("Expected sequence with length 2");b.push({key:c.value+"",value:u.value+""})}else for(h in d)g(d,h)&&b.push({key:h,value:d[h]+""});else parseSearchParams(b,"string"==typeof d?"?"===d.charAt(0)?d.slice(1):d:d+"")},q=j.prototype;u(q,{append:function append(t,r){validateArgumentsLength(arguments.length,2);var a=E(this);a.entries.push({key:t+"",value:r+""}),a.updateURL()},delete:function(t){validateArgumentsLength(arguments.length,1);for(var r=E(this),a=r.entries,i=t+"",o=0;o<a.length;)a[o].key===i?a.splice(o,1):o++;r.updateURL()},get:function get(t){validateArgumentsLength(arguments.length,1);for(var r=E(this).entries,a=t+"",i=0;i<r.length;i++)if(r[i].key===a)return r[i].value;return null},getAll:function getAll(t){validateArgumentsLength(arguments.length,1);for(var r=E(this).entries,a=t+"",i=[],o=0;o<r.length;o++)r[o].key===a&&i.push(r[o].value);return i},has:function has(t){validateArgumentsLength(arguments.length,1);for(var r=E(this).entries,a=t+"",i=0;i<r.length;)if(r[i++].key===a)return!0;return!1},set:function set(t,r){validateArgumentsLength(arguments.length,1);for(var a,i=E(this),o=i.entries,l=!1,c=t+"",u=r+"",h=0;h<o.length;h++)(a=o[h]).key===c&&(l?o.splice(h--,1):(l=!0,a.value=u));l||o.push({key:c,value:u}),i.updateURL()},sort:function sort(){var t,r,a,i=E(this),o=i.entries,l=o.slice();for(o.length=0,a=0;a<l.length;a++){for(t=l[a],r=0;r<a;r++)if(o[r].key>t.key){o.splice(r,0,t);break}r===a&&o.push(t)}i.updateURL()},forEach:function forEach(t){for(var r,a=E(this).entries,i=b(t,arguments.length>1?arguments[1]:void 0,3),o=0;o<a.length;)i((r=a[o++]).value,r.key,this)},keys:function keys(){return new U(this,"keys")},values:function values(){return new U(this,"values")},entries:function entries(){return new U(this,"entries")}},{enumerable:!0}),c(q,T,q.entries),c(q,"toString",(function toString(){for(var t,r=E(this).entries,a=[],i=0;i<r.length;)t=r[i++],a.push(serialize(t.key)+"="+serialize(t.value));return a.join("&")}),{enumerable:!0}),h(j,I),i({global:!0,forced:!l},{URLSearchParams:j}),l||"function"!=typeof A||"function"!=typeof R||i({global:!0,enumerable:!0,forced:!0},{fetch:function fetch(t){var r,a,i,o=[t];return arguments.length>1&&(S(r=arguments[1])&&(a=r.body,y(a)===I&&((i=r.headers?new R(r.headers):new R).has("content-type")||i.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),r=k(r,{body:w(0,String(a)),headers:w(0,i)}))),o.push(r)),A.apply(this,o)}}),t.exports={URLSearchParams:j,getState:E}},function(t,r,a){var i=a(28),o=a(94);t.exports=function(t){var r=o(t);if("function"!=typeof r)throw TypeError(String(t)+" is not iterable");return i(r.call(t))}},function(t,r,a){"use strict";a(10)({target:"URL",proto:!0,enumerable:!0},{toJSON:function toJSON(){return URL.prototype.toString.call(this)}})},function(t,r,a){!function(t){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol:function(t){return"Symbol("+t+")"};function noop(){}var a=Number.isNaN||function(t){return t!=t},i=noop;function typeIsObject(t){return"object"==typeof t&&null!==t||"function"==typeof t}function createArrayFromList(t){return t.slice()}function ArrayBufferCopy(t,r,a,i,o){new Uint8Array(t).set(new Uint8Array(a,i,o),r)}function IsFiniteNonNegativeNumber(t){return!1!==IsNonNegativeNumber(t)&&t!==1/0}function IsNonNegativeNumber(t){return!("number"!=typeof t||a(t)||t<0)}function Call(t,r,a){if("function"!=typeof t)throw new TypeError("Argument is not a function");return Function.prototype.apply.call(t,r,a)}function CreateAlgorithmFromUnderlyingMethod(t,r,a,i){var o=t[r];if(void 0!==o){if("function"!=typeof o)throw new TypeError(o+" is not a method");switch(a){case 0:return function(){return PromiseCall(o,t,i)};case 1:return function(r){var a=[r].concat(i);return PromiseCall(o,t,a)}}}return function(){return promiseResolvedWith(void 0)}}function InvokeOrNoop(t,r,a){var i=t[r];if(void 0!==i)return Call(i,t,a)}function PromiseCall(t,r,a){try{return promiseResolvedWith(Call(t,r,a))}catch(t){return promiseRejectedWith(t)}}function TransferArrayBuffer(t){return t}function IsDetachedBuffer(t){return!1}function ValidateAndNormalizeHighWaterMark(t){if(t=Number(t),a(t)||t<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return t}function MakeSizeAlgorithmFromSizeFunction(t){if(void 0===t)return function(){return 1};if("function"!=typeof t)throw new TypeError("size property of a queuing strategy must be a function");return function(r){return t(r)}}var o=Promise,l=Promise.prototype.then,c=Promise.resolve.bind(o),u=Promise.reject.bind(o);function newPromise(t){return new o(t)}function promiseResolvedWith(t){return c(t)}function promiseRejectedWith(t){return u(t)}function PerformPromiseThen(t,r,a){return l.call(t,r,a)}function uponPromise(t,r,a){PerformPromiseThen(PerformPromiseThen(t,r,a),void 0,i)}function uponFulfillment(t,r){uponPromise(t,r)}function uponRejection(t,r){uponPromise(t,void 0,r)}function transformPromiseWith(t,r,a){return PerformPromiseThen(t,r,a)}function setPromiseIsHandledToTrue(t){PerformPromiseThen(t,void 0,i)}var h=16384,d=function(){function SimpleQueue(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}return Object.defineProperty(SimpleQueue.prototype,"length",{get:function(){return this._size},enumerable:!0,configurable:!0}),SimpleQueue.prototype.push=function(t){var r=this._back,a=r;r._elements.length===h-1&&(a={_elements:[],_next:void 0}),r._elements.push(t),a!==r&&(this._back=a,r._next=a),++this._size},SimpleQueue.prototype.shift=function(){var t=this._front,r=t,a=this._cursor,i=a+1,o=t._elements,l=o[a];return i===h&&(r=t._next,i=0),--this._size,this._cursor=i,t!==r&&(this._front=r),o[a]=void 0,l},SimpleQueue.prototype.forEach=function(t){for(var r=this._cursor,a=this._front,i=a._elements;!(r===i.length&&void 0===a._next||r===i.length&&(r=0,0===(i=(a=a._next)._elements).length));)t(i[r]),++r},SimpleQueue.prototype.peek=function(){var t=this._front,r=this._cursor;return t._elements[r]},SimpleQueue}();function ReadableStreamCreateReadResult(t,r,a){var i=null;!0===a&&(i=Object.prototype);var o=Object.create(i);return o.value=t,o.done=r,o}function ReadableStreamReaderGenericInitialize(t,r){t._forAuthorCode=!0,t._ownerReadableStream=r,r._reader=t,"readable"===r._state?defaultReaderClosedPromiseInitialize(t):"closed"===r._state?defaultReaderClosedPromiseInitializeAsResolved(t):defaultReaderClosedPromiseInitializeAsRejected(t,r._storedError)}function ReadableStreamReaderGenericCancel(t,r){return ReadableStreamCancel(t._ownerReadableStream,r)}function ReadableStreamReaderGenericRelease(t){"readable"===t._ownerReadableStream._state?defaultReaderClosedPromiseReject(t,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):defaultReaderClosedPromiseResetToRejected(t,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),t._ownerReadableStream._reader=void 0,t._ownerReadableStream=void 0}function readerLockException(t){return new TypeError("Cannot "+t+" a stream using a released reader")}function defaultReaderClosedPromiseInitialize(t){t._closedPromise=newPromise((function(r,a){t._closedPromise_resolve=r,t._closedPromise_reject=a}))}function defaultReaderClosedPromiseInitializeAsRejected(t,r){defaultReaderClosedPromiseInitialize(t),defaultReaderClosedPromiseReject(t,r)}function defaultReaderClosedPromiseInitializeAsResolved(t){defaultReaderClosedPromiseInitialize(t),defaultReaderClosedPromiseResolve(t)}function defaultReaderClosedPromiseReject(t,r){setPromiseIsHandledToTrue(t._closedPromise),t._closedPromise_reject(r),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0}function defaultReaderClosedPromiseResetToRejected(t,r){defaultReaderClosedPromiseInitializeAsRejected(t,r)}function defaultReaderClosedPromiseResolve(t){t._closedPromise_resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0}var p=r("[[CancelSteps]]"),m=r("[[PullSteps]]");function AcquireReadableStreamDefaultReader(t,r){void 0===r&&(r=!1);var a=new y(t);return a._forAuthorCode=r,a}function ReadableStreamAddReadRequest(t){return newPromise((function(r,a){var i={_resolve:r,_reject:a};t._reader._readRequests.push(i)}))}function ReadableStreamFulfillReadRequest(t,r,a){var i=t._reader;i._readRequests.shift()._resolve(ReadableStreamCreateReadResult(r,a,i._forAuthorCode))}function ReadableStreamGetNumReadRequests(t){return t._reader._readRequests.length}function ReadableStreamHasDefaultReader(t){var r=t._reader;return void 0!==r&&!!IsReadableStreamDefaultReader(r)}var g,b,y=function(){function ReadableStreamDefaultReader(t){if(!1===IsReadableStream(t))throw new TypeError("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(!0===IsReadableStreamLocked(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");ReadableStreamReaderGenericInitialize(this,t),this._readRequests=new d}return Object.defineProperty(ReadableStreamDefaultReader.prototype,"closed",{get:function(){return IsReadableStreamDefaultReader(this)?this._closedPromise:promiseRejectedWith(defaultReaderBrandCheckException("closed"))},enumerable:!0,configurable:!0}),ReadableStreamDefaultReader.prototype.cancel=function(t){return IsReadableStreamDefaultReader(this)?void 0===this._ownerReadableStream?promiseRejectedWith(readerLockException("cancel")):ReadableStreamReaderGenericCancel(this,t):promiseRejectedWith(defaultReaderBrandCheckException("cancel"))},ReadableStreamDefaultReader.prototype.read=function(){return IsReadableStreamDefaultReader(this)?void 0===this._ownerReadableStream?promiseRejectedWith(readerLockException("read from")):ReadableStreamDefaultReaderRead(this):promiseRejectedWith(defaultReaderBrandCheckException("read"))},ReadableStreamDefaultReader.prototype.releaseLock=function(){if(!IsReadableStreamDefaultReader(this))throw defaultReaderBrandCheckException("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ReadableStreamReaderGenericRelease(this)}},ReadableStreamDefaultReader}();function IsReadableStreamDefaultReader(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_readRequests")}function ReadableStreamDefaultReaderRead(t){var r=t._ownerReadableStream;return r._disturbed=!0,"closed"===r._state?promiseResolvedWith(ReadableStreamCreateReadResult(void 0,!0,t._forAuthorCode)):"errored"===r._state?promiseRejectedWith(r._storedError):r._readableStreamController[m]()}function defaultReaderBrandCheckException(t){return new TypeError("ReadableStreamDefaultReader.prototype."+t+" can only be used on a ReadableStreamDefaultReader")}"symbol"==typeof r.asyncIterator&&((g={})[r.asyncIterator]=function(){return this},b=g,Object.defineProperty(b,r.asyncIterator,{enumerable:!1}));var v={next:function(){if(!1===IsReadableStreamAsyncIterator(this))return promiseRejectedWith(streamAsyncIteratorBrandCheckException("next"));var t=this._asyncIteratorReader;return void 0===t._ownerReadableStream?promiseRejectedWith(readerLockException("iterate")):transformPromiseWith(ReadableStreamDefaultReaderRead(t),(function(r){var a=r.done;return a&&ReadableStreamReaderGenericRelease(t),ReadableStreamCreateReadResult(r.value,a,!0)}))},return:function(t){if(!1===IsReadableStreamAsyncIterator(this))return promiseRejectedWith(streamAsyncIteratorBrandCheckException("next"));var r=this._asyncIteratorReader;if(void 0===r._ownerReadableStream)return promiseRejectedWith(readerLockException("finish iterating"));if(r._readRequests.length>0)return promiseRejectedWith(new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled"));if(!1===this._preventCancel){var a=ReadableStreamReaderGenericCancel(r,t);return ReadableStreamReaderGenericRelease(r),transformPromiseWith(a,(function(){return ReadableStreamCreateReadResult(t,!0,!0)}))}return ReadableStreamReaderGenericRelease(r),promiseResolvedWith(ReadableStreamCreateReadResult(t,!0,!0))}};function AcquireReadableStreamAsyncIterator(t,r){void 0===r&&(r=!1);var a=AcquireReadableStreamDefaultReader(t),i=Object.create(v);return i._asyncIteratorReader=a,i._preventCancel=Boolean(r),i}function IsReadableStreamAsyncIterator(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_asyncIteratorReader")}function streamAsyncIteratorBrandCheckException(t){return new TypeError("ReadableStreamAsyncIterator."+t+" can only be used on a ReadableSteamAsyncIterator")}function DequeueValue(t){var r=t._queue.shift();return t._queueTotalSize-=r.size,t._queueTotalSize<0&&(t._queueTotalSize=0),r.value}function EnqueueValueWithSize(t,r,a){if(!IsFiniteNonNegativeNumber(a=Number(a)))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");t._queue.push({value:r,size:a}),t._queueTotalSize+=a}function PeekQueueValue(t){return t._queue.peek().value}function ResetQueue(t){t._queue=new d,t._queueTotalSize=0}void 0!==b&&Object.setPrototypeOf(v,b),Object.defineProperty(v,"next",{enumerable:!1}),Object.defineProperty(v,"return",{enumerable:!1});var S=r("[[AbortSteps]]"),k=r("[[ErrorSteps]]"),w=function(){function WritableStream(t,r){void 0===t&&(t={}),void 0===r&&(r={}),InitializeWritableStream(this);var a=r.size,i=r.highWaterMark;if(void 0!==t.type)throw new RangeError("Invalid type is specified");var o=MakeSizeAlgorithmFromSizeFunction(a);void 0===i&&(i=1),SetUpWritableStreamDefaultControllerFromUnderlyingSink(this,t,i=ValidateAndNormalizeHighWaterMark(i),o)}return Object.defineProperty(WritableStream.prototype,"locked",{get:function(){if(!1===IsWritableStream(this))throw streamBrandCheckException("locked");return IsWritableStreamLocked(this)},enumerable:!0,configurable:!0}),WritableStream.prototype.abort=function(t){return!1===IsWritableStream(this)?promiseRejectedWith(streamBrandCheckException("abort")):!0===IsWritableStreamLocked(this)?promiseRejectedWith(new TypeError("Cannot abort a stream that already has a writer")):WritableStreamAbort(this,t)},WritableStream.prototype.close=function(){return!1===IsWritableStream(this)?promiseRejectedWith(streamBrandCheckException("close")):!0===IsWritableStreamLocked(this)?promiseRejectedWith(new TypeError("Cannot close a stream that already has a writer")):!0===WritableStreamCloseQueuedOrInFlight(this)?promiseRejectedWith(new TypeError("Cannot close an already-closing stream")):WritableStreamClose(this)},WritableStream.prototype.getWriter=function(){if(!1===IsWritableStream(this))throw streamBrandCheckException("getWriter");return AcquireWritableStreamDefaultWriter(this)},WritableStream}();function AcquireWritableStreamDefaultWriter(t){return new C(t)}function CreateWritableStream(t,r,a,i,o,l){void 0===o&&(o=1),void 0===l&&(l=function(){return 1});var c=Object.create(w.prototype);return InitializeWritableStream(c),SetUpWritableStreamDefaultController(c,Object.create(x.prototype),t,r,a,i,o,l),c}function InitializeWritableStream(t){t._state="writable",t._storedError=void 0,t._writer=void 0,t._writableStreamController=void 0,t._writeRequests=new d,t._inFlightWriteRequest=void 0,t._closeRequest=void 0,t._inFlightCloseRequest=void 0,t._pendingAbortRequest=void 0,t._backpressure=!1}function IsWritableStream(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_writableStreamController")}function IsWritableStreamLocked(t){return void 0!==t._writer}function WritableStreamAbort(t,r){var a=t._state;if("closed"===a||"errored"===a)return promiseResolvedWith(void 0);if(void 0!==t._pendingAbortRequest)return t._pendingAbortRequest._promise;var i=!1;"erroring"===a&&(i=!0,r=void 0);var o=newPromise((function(a,o){t._pendingAbortRequest={_promise:void 0,_resolve:a,_reject:o,_reason:r,_wasAlreadyErroring:i}}));return t._pendingAbortRequest._promise=o,!1===i&&WritableStreamStartErroring(t,r),o}function WritableStreamClose(t){var r=t._state;if("closed"===r||"errored"===r)return promiseRejectedWith(new TypeError("The stream (in "+r+" state) is not in the writable state and cannot be closed"));var a=newPromise((function(r,a){var i={_resolve:r,_reject:a};t._closeRequest=i})),i=t._writer;return void 0!==i&&!0===t._backpressure&&"writable"===r&&defaultWriterReadyPromiseResolve(i),WritableStreamDefaultControllerClose(t._writableStreamController),a}function WritableStreamAddWriteRequest(t){return newPromise((function(r,a){var i={_resolve:r,_reject:a};t._writeRequests.push(i)}))}function WritableStreamDealWithRejection(t,r){"writable"!==t._state?WritableStreamFinishErroring(t):WritableStreamStartErroring(t,r)}function WritableStreamStartErroring(t,r){var a=t._writableStreamController;t._state="erroring",t._storedError=r;var i=t._writer;void 0!==i&&WritableStreamDefaultWriterEnsureReadyPromiseRejected(i,r),!1===WritableStreamHasOperationMarkedInFlight(t)&&!0===a._started&&WritableStreamFinishErroring(t)}function WritableStreamFinishErroring(t){t._state="errored",t._writableStreamController[k]();var r=t._storedError;if(t._writeRequests.forEach((function(t){t._reject(r)})),t._writeRequests=new d,void 0!==t._pendingAbortRequest){var a=t._pendingAbortRequest;if(t._pendingAbortRequest=void 0,!0===a._wasAlreadyErroring)return a._reject(r),void WritableStreamRejectCloseAndClosedPromiseIfNeeded(t);uponPromise(t._writableStreamController[S](a._reason),(function(){a._resolve(),WritableStreamRejectCloseAndClosedPromiseIfNeeded(t)}),(function(r){a._reject(r),WritableStreamRejectCloseAndClosedPromiseIfNeeded(t)}))}else WritableStreamRejectCloseAndClosedPromiseIfNeeded(t)}function WritableStreamFinishInFlightWrite(t){t._inFlightWriteRequest._resolve(void 0),t._inFlightWriteRequest=void 0}function WritableStreamFinishInFlightWriteWithError(t,r){t._inFlightWriteRequest._reject(r),t._inFlightWriteRequest=void 0,WritableStreamDealWithRejection(t,r)}function WritableStreamFinishInFlightClose(t){t._inFlightCloseRequest._resolve(void 0),t._inFlightCloseRequest=void 0,"erroring"===t._state&&(t._storedError=void 0,void 0!==t._pendingAbortRequest&&(t._pendingAbortRequest._resolve(),t._pendingAbortRequest=void 0)),t._state="closed";var r=t._writer;void 0!==r&&defaultWriterClosedPromiseResolve(r)}function WritableStreamFinishInFlightCloseWithError(t,r){t._inFlightCloseRequest._reject(r),t._inFlightCloseRequest=void 0,void 0!==t._pendingAbortRequest&&(t._pendingAbortRequest._reject(r),t._pendingAbortRequest=void 0),WritableStreamDealWithRejection(t,r)}function WritableStreamCloseQueuedOrInFlight(t){return void 0!==t._closeRequest||void 0!==t._inFlightCloseRequest}function WritableStreamHasOperationMarkedInFlight(t){return void 0!==t._inFlightWriteRequest||void 0!==t._inFlightCloseRequest}function WritableStreamMarkCloseRequestInFlight(t){t._inFlightCloseRequest=t._closeRequest,t._closeRequest=void 0}function WritableStreamMarkFirstWriteRequestInFlight(t){t._inFlightWriteRequest=t._writeRequests.shift()}function WritableStreamRejectCloseAndClosedPromiseIfNeeded(t){void 0!==t._closeRequest&&(t._closeRequest._reject(t._storedError),t._closeRequest=void 0);var r=t._writer;void 0!==r&&defaultWriterClosedPromiseReject(r,t._storedError)}function WritableStreamUpdateBackpressure(t,r){var a=t._writer;void 0!==a&&r!==t._backpressure&&(!0===r?defaultWriterReadyPromiseReset(a):defaultWriterReadyPromiseResolve(a)),t._backpressure=r}var C=function(){function WritableStreamDefaultWriter(t){if(!1===IsWritableStream(t))throw new TypeError("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(!0===IsWritableStreamLocked(t))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=t,t._writer=this;var r=t._state;if("writable"===r)!1===WritableStreamCloseQueuedOrInFlight(t)&&!0===t._backpressure?defaultWriterReadyPromiseInitialize(this):defaultWriterReadyPromiseInitializeAsResolved(this),defaultWriterClosedPromiseInitialize(this);else if("erroring"===r)defaultWriterReadyPromiseInitializeAsRejected(this,t._storedError),defaultWriterClosedPromiseInitialize(this);else if("closed"===r)defaultWriterReadyPromiseInitializeAsResolved(this),defaultWriterClosedPromiseInitializeAsResolved(this);else{var a=t._storedError;defaultWriterReadyPromiseInitializeAsRejected(this,a),defaultWriterClosedPromiseInitializeAsRejected(this,a)}}return Object.defineProperty(WritableStreamDefaultWriter.prototype,"closed",{get:function(){return!1===IsWritableStreamDefaultWriter(this)?promiseRejectedWith(defaultWriterBrandCheckException("closed")):this._closedPromise},enumerable:!0,configurable:!0}),Object.defineProperty(WritableStreamDefaultWriter.prototype,"desiredSize",{get:function(){if(!1===IsWritableStreamDefaultWriter(this))throw defaultWriterBrandCheckException("desiredSize");if(void 0===this._ownerWritableStream)throw defaultWriterLockException("desiredSize");return WritableStreamDefaultWriterGetDesiredSize(this)},enumerable:!0,configurable:!0}),Object.defineProperty(WritableStreamDefaultWriter.prototype,"ready",{get:function(){return!1===IsWritableStreamDefaultWriter(this)?promiseRejectedWith(defaultWriterBrandCheckException("ready")):this._readyPromise},enumerable:!0,configurable:!0}),WritableStreamDefaultWriter.prototype.abort=function(t){return!1===IsWritableStreamDefaultWriter(this)?promiseRejectedWith(defaultWriterBrandCheckException("abort")):void 0===this._ownerWritableStream?promiseRejectedWith(defaultWriterLockException("abort")):WritableStreamDefaultWriterAbort(this,t)},WritableStreamDefaultWriter.prototype.close=function(){if(!1===IsWritableStreamDefaultWriter(this))return promiseRejectedWith(defaultWriterBrandCheckException("close"));var t=this._ownerWritableStream;return void 0===t?promiseRejectedWith(defaultWriterLockException("close")):!0===WritableStreamCloseQueuedOrInFlight(t)?promiseRejectedWith(new TypeError("Cannot close an already-closing stream")):WritableStreamDefaultWriterClose(this)},WritableStreamDefaultWriter.prototype.releaseLock=function(){if(!1===IsWritableStreamDefaultWriter(this))throw defaultWriterBrandCheckException("releaseLock");void 0!==this._ownerWritableStream&&WritableStreamDefaultWriterRelease(this)},WritableStreamDefaultWriter.prototype.write=function(t){return!1===IsWritableStreamDefaultWriter(this)?promiseRejectedWith(defaultWriterBrandCheckException("write")):void 0===this._ownerWritableStream?promiseRejectedWith(defaultWriterLockException("write to")):WritableStreamDefaultWriterWrite(this,t)},WritableStreamDefaultWriter}();function IsWritableStreamDefaultWriter(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_ownerWritableStream")}function WritableStreamDefaultWriterAbort(t,r){return WritableStreamAbort(t._ownerWritableStream,r)}function WritableStreamDefaultWriterClose(t){return WritableStreamClose(t._ownerWritableStream)}function WritableStreamDefaultWriterCloseWithErrorPropagation(t){var r=t._ownerWritableStream,a=r._state;return!0===WritableStreamCloseQueuedOrInFlight(r)||"closed"===a?promiseResolvedWith(void 0):"errored"===a?promiseRejectedWith(r._storedError):WritableStreamDefaultWriterClose(t)}function WritableStreamDefaultWriterEnsureClosedPromiseRejected(t,r){"pending"===t._closedPromiseState?defaultWriterClosedPromiseReject(t,r):defaultWriterClosedPromiseResetToRejected(t,r)}function WritableStreamDefaultWriterEnsureReadyPromiseRejected(t,r){"pending"===t._readyPromiseState?defaultWriterReadyPromiseReject(t,r):defaultWriterReadyPromiseResetToRejected(t,r)}function WritableStreamDefaultWriterGetDesiredSize(t){var r=t._ownerWritableStream,a=r._state;return"errored"===a||"erroring"===a?null:"closed"===a?0:WritableStreamDefaultControllerGetDesiredSize(r._writableStreamController)}function WritableStreamDefaultWriterRelease(t){var r=t._ownerWritableStream,a=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");WritableStreamDefaultWriterEnsureReadyPromiseRejected(t,a),WritableStreamDefaultWriterEnsureClosedPromiseRejected(t,a),r._writer=void 0,t._ownerWritableStream=void 0}function WritableStreamDefaultWriterWrite(t,r){var a=t._ownerWritableStream,i=a._writableStreamController,o=WritableStreamDefaultControllerGetChunkSize(i,r);if(a!==t._ownerWritableStream)return promiseRejectedWith(defaultWriterLockException("write to"));var l=a._state;if("errored"===l)return promiseRejectedWith(a._storedError);if(!0===WritableStreamCloseQueuedOrInFlight(a)||"closed"===l)return promiseRejectedWith(new TypeError("The stream is closing or closed and cannot be written to"));if("erroring"===l)return promiseRejectedWith(a._storedError);var c=WritableStreamAddWriteRequest(a);return WritableStreamDefaultControllerWrite(i,r,o),c}var x=function(){function WritableStreamDefaultController(){throw new TypeError("WritableStreamDefaultController cannot be constructed explicitly")}return WritableStreamDefaultController.prototype.error=function(t){if(!1===IsWritableStreamDefaultController(this))throw new TypeError("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");"writable"===this._controlledWritableStream._state&&WritableStreamDefaultControllerError(this,t)},WritableStreamDefaultController.prototype[S]=function(t){var r=this._abortAlgorithm(t);return WritableStreamDefaultControllerClearAlgorithms(this),r},WritableStreamDefaultController.prototype[k]=function(){ResetQueue(this)},WritableStreamDefaultController}();function IsWritableStreamDefaultController(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_controlledWritableStream")}function SetUpWritableStreamDefaultController(t,r,a,i,o,l,c,u){r._controlledWritableStream=t,t._writableStreamController=r,r._queue=void 0,r._queueTotalSize=void 0,ResetQueue(r),r._started=!1,r._strategySizeAlgorithm=u,r._strategyHWM=c,r._writeAlgorithm=i,r._closeAlgorithm=o,r._abortAlgorithm=l;var h=WritableStreamDefaultControllerGetBackpressure(r);WritableStreamUpdateBackpressure(t,h),uponPromise(promiseResolvedWith(a()),(function(){r._started=!0,WritableStreamDefaultControllerAdvanceQueueIfNeeded(r)}),(function(a){r._started=!0,WritableStreamDealWithRejection(t,a)}))}function SetUpWritableStreamDefaultControllerFromUnderlyingSink(t,r,a,i){var o=Object.create(x.prototype);function startAlgorithm(){return InvokeOrNoop(r,"start",[o])}var l=CreateAlgorithmFromUnderlyingMethod(r,"write",1,[o]),c=CreateAlgorithmFromUnderlyingMethod(r,"close",0,[]),u=CreateAlgorithmFromUnderlyingMethod(r,"abort",1,[]);SetUpWritableStreamDefaultController(t,o,startAlgorithm,l,c,u,a,i)}function WritableStreamDefaultControllerClearAlgorithms(t){t._writeAlgorithm=void 0,t._closeAlgorithm=void 0,t._abortAlgorithm=void 0,t._strategySizeAlgorithm=void 0}function WritableStreamDefaultControllerClose(t){EnqueueValueWithSize(t,"close",0),WritableStreamDefaultControllerAdvanceQueueIfNeeded(t)}function WritableStreamDefaultControllerGetChunkSize(t,r){try{return t._strategySizeAlgorithm(r)}catch(r){return WritableStreamDefaultControllerErrorIfNeeded(t,r),1}}function WritableStreamDefaultControllerGetDesiredSize(t){return t._strategyHWM-t._queueTotalSize}function WritableStreamDefaultControllerWrite(t,r,a){var i={chunk:r};try{EnqueueValueWithSize(t,i,a)}catch(r){return void WritableStreamDefaultControllerErrorIfNeeded(t,r)}var o=t._controlledWritableStream;!1===WritableStreamCloseQueuedOrInFlight(o)&&"writable"===o._state&&WritableStreamUpdateBackpressure(o,WritableStreamDefaultControllerGetBackpressure(t)),WritableStreamDefaultControllerAdvanceQueueIfNeeded(t)}function WritableStreamDefaultControllerAdvanceQueueIfNeeded(t){var r=t._controlledWritableStream;if(!1!==t._started&&void 0===r._inFlightWriteRequest)if("erroring"!==r._state){if(0!==t._queue.length){var a=PeekQueueValue(t);"close"===a?WritableStreamDefaultControllerProcessClose(t):WritableStreamDefaultControllerProcessWrite(t,a.chunk)}}else WritableStreamFinishErroring(r)}function WritableStreamDefaultControllerErrorIfNeeded(t,r){"writable"===t._controlledWritableStream._state&&WritableStreamDefaultControllerError(t,r)}function WritableStreamDefaultControllerProcessClose(t){var r=t._controlledWritableStream;WritableStreamMarkCloseRequestInFlight(r),DequeueValue(t);var a=t._closeAlgorithm();WritableStreamDefaultControllerClearAlgorithms(t),uponPromise(a,(function(){WritableStreamFinishInFlightClose(r)}),(function(t){WritableStreamFinishInFlightCloseWithError(r,t)}))}function WritableStreamDefaultControllerProcessWrite(t,r){var a=t._controlledWritableStream;WritableStreamMarkFirstWriteRequestInFlight(a),uponPromise(t._writeAlgorithm(r),(function(){WritableStreamFinishInFlightWrite(a);var r=a._state;if(DequeueValue(t),!1===WritableStreamCloseQueuedOrInFlight(a)&&"writable"===r){var i=WritableStreamDefaultControllerGetBackpressure(t);WritableStreamUpdateBackpressure(a,i)}WritableStreamDefaultControllerAdvanceQueueIfNeeded(t)}),(function(r){"writable"===a._state&&WritableStreamDefaultControllerClearAlgorithms(t),WritableStreamFinishInFlightWriteWithError(a,r)}))}function WritableStreamDefaultControllerGetBackpressure(t){return WritableStreamDefaultControllerGetDesiredSize(t)<=0}function WritableStreamDefaultControllerError(t,r){var a=t._controlledWritableStream;WritableStreamDefaultControllerClearAlgorithms(t),WritableStreamStartErroring(a,r)}function streamBrandCheckException(t){return new TypeError("WritableStream.prototype."+t+" can only be used on a WritableStream")}function defaultWriterBrandCheckException(t){return new TypeError("WritableStreamDefaultWriter.prototype."+t+" can only be used on a WritableStreamDefaultWriter")}function defaultWriterLockException(t){return new TypeError("Cannot "+t+" a stream using a released writer")}function defaultWriterClosedPromiseInitialize(t){t._closedPromise=newPromise((function(r,a){t._closedPromise_resolve=r,t._closedPromise_reject=a,t._closedPromiseState="pending"}))}function defaultWriterClosedPromiseInitializeAsRejected(t,r){defaultWriterClosedPromiseInitialize(t),defaultWriterClosedPromiseReject(t,r)}function defaultWriterClosedPromiseInitializeAsResolved(t){defaultWriterClosedPromiseInitialize(t),defaultWriterClosedPromiseResolve(t)}function defaultWriterClosedPromiseReject(t,r){setPromiseIsHandledToTrue(t._closedPromise),t._closedPromise_reject(r),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="rejected"}function defaultWriterClosedPromiseResetToRejected(t,r){defaultWriterClosedPromiseInitializeAsRejected(t,r)}function defaultWriterClosedPromiseResolve(t){t._closedPromise_resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="resolved"}function defaultWriterReadyPromiseInitialize(t){t._readyPromise=newPromise((function(r,a){t._readyPromise_resolve=r,t._readyPromise_reject=a})),t._readyPromiseState="pending"}function defaultWriterReadyPromiseInitializeAsRejected(t,r){defaultWriterReadyPromiseInitialize(t),defaultWriterReadyPromiseReject(t,r)}function defaultWriterReadyPromiseInitializeAsResolved(t){defaultWriterReadyPromiseInitialize(t),defaultWriterReadyPromiseResolve(t)}function defaultWriterReadyPromiseReject(t,r){setPromiseIsHandledToTrue(t._readyPromise),t._readyPromise_reject(r),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="rejected"}function defaultWriterReadyPromiseReset(t){defaultWriterReadyPromiseInitialize(t)}function defaultWriterReadyPromiseResetToRejected(t,r){defaultWriterReadyPromiseInitializeAsRejected(t,r)}function defaultWriterReadyPromiseResolve(t){t._readyPromise_resolve(void 0),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="fulfilled"}function isAbortSignal(t){if("object"!=typeof t||null===t)return!1;try{return"boolean"==typeof t.aborted}catch(t){return!1}}var _="undefined"!=typeof DOMException?DOMException:void 0;function isDOMExceptionConstructor(t){if("function"!=typeof t&&"object"!=typeof t)return!1;try{return new t,!0}catch(t){return!1}}function createDOMExceptionPolyfill(){var t=function DOMException(t,r){this.message=t||"",this.name=r||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return t.prototype=Object.create(Error.prototype),Object.defineProperty(t.prototype,"constructor",{value:t,writable:!0,configurable:!0}),t}var A=isDOMExceptionConstructor(_)?_:createDOMExceptionPolyfill();function ReadableStreamPipeTo(t,r,a,i,o,l){var c=AcquireReadableStreamDefaultReader(t),u=AcquireWritableStreamDefaultWriter(r);t._disturbed=!0;var h=!1,d=promiseResolvedWith(void 0);return newPromise((function(p,m){var g;if(void 0!==l){if(g=function(){var a=new A("Aborted","AbortError"),l=[];!1===i&&l.push((function(){return"writable"===r._state?WritableStreamAbort(r,a):promiseResolvedWith(void 0)})),!1===o&&l.push((function(){return"readable"===t._state?ReadableStreamCancel(t,a):promiseResolvedWith(void 0)})),shutdownWithAction((function(){return Promise.all(l.map((function(t){return t()})))}),!0,a)},!0===l.aborted)return void g();l.addEventListener("abort",g)}function pipeLoop(){return newPromise((function(t,r){function next(a){a?t():PerformPromiseThen(pipeStep(),next,r)}next(!1)}))}function pipeStep(){return!0===h?promiseResolvedWith(!0):PerformPromiseThen(u._readyPromise,(function(){return PerformPromiseThen(ReadableStreamDefaultReaderRead(c),(function(t){return!0===t.done||(d=PerformPromiseThen(WritableStreamDefaultWriterWrite(u,t.value),void 0,noop),!1)}))}))}if(isOrBecomesErrored(t,c._closedPromise,(function(t){!1===i?shutdownWithAction((function(){return WritableStreamAbort(r,t)}),!0,t):shutdown(!0,t)})),isOrBecomesErrored(r,u._closedPromise,(function(r){!1===o?shutdownWithAction((function(){return ReadableStreamCancel(t,r)}),!0,r):shutdown(!0,r)})),isOrBecomesClosed(t,c._closedPromise,(function(){!1===a?shutdownWithAction((function(){return WritableStreamDefaultWriterCloseWithErrorPropagation(u)})):shutdown()})),!0===WritableStreamCloseQueuedOrInFlight(r)||"closed"===r._state){var b=new TypeError("the destination writable stream closed before all data could be piped to it");!1===o?shutdownWithAction((function(){return ReadableStreamCancel(t,b)}),!0,b):shutdown(!0,b)}function waitForWritesToFinish(){var t=d;return PerformPromiseThen(d,(function(){return t!==d?waitForWritesToFinish():void 0}))}function isOrBecomesErrored(t,r,a){"errored"===t._state?a(t._storedError):uponRejection(r,a)}function isOrBecomesClosed(t,r,a){"closed"===t._state?a():uponFulfillment(r,a)}function shutdownWithAction(t,a,i){function doTheRest(){uponPromise(t(),(function(){return finalize(a,i)}),(function(t){return finalize(!0,t)}))}!0!==h&&(h=!0,"writable"===r._state&&!1===WritableStreamCloseQueuedOrInFlight(r)?uponFulfillment(waitForWritesToFinish(),doTheRest):doTheRest())}function shutdown(t,a){!0!==h&&(h=!0,"writable"===r._state&&!1===WritableStreamCloseQueuedOrInFlight(r)?uponFulfillment(waitForWritesToFinish(),(function(){return finalize(t,a)})):finalize(t,a))}function finalize(t,r){WritableStreamDefaultWriterRelease(u),ReadableStreamReaderGenericRelease(c),void 0!==l&&l.removeEventListener("abort",g),t?m(r):p(void 0)}setPromiseIsHandledToTrue(pipeLoop())}))}var R=function(){function ReadableStreamDefaultController(){throw new TypeError}return Object.defineProperty(ReadableStreamDefaultController.prototype,"desiredSize",{get:function(){if(!1===IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException("desiredSize");return ReadableStreamDefaultControllerGetDesiredSize(this)},enumerable:!0,configurable:!0}),ReadableStreamDefaultController.prototype.close=function(){if(!1===IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException("close");if(!1===ReadableStreamDefaultControllerCanCloseOrEnqueue(this))throw new TypeError("The stream is not in a state that permits close");ReadableStreamDefaultControllerClose(this)},ReadableStreamDefaultController.prototype.enqueue=function(t){if(!1===IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException("enqueue");if(!1===ReadableStreamDefaultControllerCanCloseOrEnqueue(this))throw new TypeError("The stream is not in a state that permits enqueue");return ReadableStreamDefaultControllerEnqueue(this,t)},ReadableStreamDefaultController.prototype.error=function(t){if(!1===IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException("error");ReadableStreamDefaultControllerError(this,t)},ReadableStreamDefaultController.prototype[p]=function(t){ResetQueue(this);var r=this._cancelAlgorithm(t);return ReadableStreamDefaultControllerClearAlgorithms(this),r},ReadableStreamDefaultController.prototype[m]=function(){var t=this._controlledReadableStream;if(this._queue.length>0){var r=DequeueValue(this);return!0===this._closeRequested&&0===this._queue.length?(ReadableStreamDefaultControllerClearAlgorithms(this),ReadableStreamClose(t)):ReadableStreamDefaultControllerCallPullIfNeeded(this),promiseResolvedWith(ReadableStreamCreateReadResult(r,!1,t._reader._forAuthorCode))}var a=ReadableStreamAddReadRequest(t);return ReadableStreamDefaultControllerCallPullIfNeeded(this),a},ReadableStreamDefaultController}();function IsReadableStreamDefaultController(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_controlledReadableStream")}function ReadableStreamDefaultControllerCallPullIfNeeded(t){!1!==ReadableStreamDefaultControllerShouldCallPull(t)&&(!0!==t._pulling?(t._pulling=!0,uponPromise(t._pullAlgorithm(),(function(){t._pulling=!1,!0===t._pullAgain&&(t._pullAgain=!1,ReadableStreamDefaultControllerCallPullIfNeeded(t))}),(function(r){ReadableStreamDefaultControllerError(t,r)}))):t._pullAgain=!0)}function ReadableStreamDefaultControllerShouldCallPull(t){var r=t._controlledReadableStream;return!1!==ReadableStreamDefaultControllerCanCloseOrEnqueue(t)&&!1!==t._started&&(!0===IsReadableStreamLocked(r)&&ReadableStreamGetNumReadRequests(r)>0||ReadableStreamDefaultControllerGetDesiredSize(t)>0)}function ReadableStreamDefaultControllerClearAlgorithms(t){t._pullAlgorithm=void 0,t._cancelAlgorithm=void 0,t._strategySizeAlgorithm=void 0}function ReadableStreamDefaultControllerClose(t){var r=t._controlledReadableStream;t._closeRequested=!0,0===t._queue.length&&(ReadableStreamDefaultControllerClearAlgorithms(t),ReadableStreamClose(r))}function ReadableStreamDefaultControllerEnqueue(t,r){var a=t._controlledReadableStream;if(!0===IsReadableStreamLocked(a)&&ReadableStreamGetNumReadRequests(a)>0)ReadableStreamFulfillReadRequest(a,r,!1);else{var i=void 0;try{i=t._strategySizeAlgorithm(r)}catch(r){throw ReadableStreamDefaultControllerError(t,r),r}try{EnqueueValueWithSize(t,r,i)}catch(r){throw ReadableStreamDefaultControllerError(t,r),r}}ReadableStreamDefaultControllerCallPullIfNeeded(t)}function ReadableStreamDefaultControllerError(t,r){var a=t._controlledReadableStream;"readable"===a._state&&(ResetQueue(t),ReadableStreamDefaultControllerClearAlgorithms(t),ReadableStreamError(a,r))}function ReadableStreamDefaultControllerGetDesiredSize(t){var r=t._controlledReadableStream._state;return"errored"===r?null:"closed"===r?0:t._strategyHWM-t._queueTotalSize}function ReadableStreamDefaultControllerHasBackpressure(t){return!0!==ReadableStreamDefaultControllerShouldCallPull(t)}function ReadableStreamDefaultControllerCanCloseOrEnqueue(t){var r=t._controlledReadableStream._state;return!1===t._closeRequested&&"readable"===r}function SetUpReadableStreamDefaultController(t,r,a,i,o,l,c){r._controlledReadableStream=t,r._queue=void 0,r._queueTotalSize=void 0,ResetQueue(r),r._started=!1,r._closeRequested=!1,r._pullAgain=!1,r._pulling=!1,r._strategySizeAlgorithm=c,r._strategyHWM=l,r._pullAlgorithm=i,r._cancelAlgorithm=o,t._readableStreamController=r,uponPromise(promiseResolvedWith(a()),(function(){r._started=!0,ReadableStreamDefaultControllerCallPullIfNeeded(r)}),(function(t){ReadableStreamDefaultControllerError(r,t)}))}function SetUpReadableStreamDefaultControllerFromUnderlyingSource(t,r,a,i){var o=Object.create(R.prototype);function startAlgorithm(){return InvokeOrNoop(r,"start",[o])}var l=CreateAlgorithmFromUnderlyingMethod(r,"pull",0,[o]),c=CreateAlgorithmFromUnderlyingMethod(r,"cancel",1,[]);SetUpReadableStreamDefaultController(t,o,startAlgorithm,l,c,a,i)}function defaultControllerBrandCheckException(t){return new TypeError("ReadableStreamDefaultController.prototype."+t+" can only be used on a ReadableStreamDefaultController")}function ReadableStreamTee(t,r){var a,i,o,l,c,u=AcquireReadableStreamDefaultReader(t),h=!1,d=!1,p=!1,m=newPromise((function(t){c=t}));function pullAlgorithm(){return!0===h||(h=!0,setPromiseIsHandledToTrue(transformPromiseWith(ReadableStreamDefaultReaderRead(u),(function(t){if(h=!1,!0===t.done)return!1===d&&ReadableStreamDefaultControllerClose(o._readableStreamController),void(!1===p&&ReadableStreamDefaultControllerClose(l._readableStreamController));var r=t.value,a=r,i=r;!1===d&&ReadableStreamDefaultControllerEnqueue(o._readableStreamController,a),!1===p&&ReadableStreamDefaultControllerEnqueue(l._readableStreamController,i)})))),promiseResolvedWith(void 0)}function cancel1Algorithm(r){if(d=!0,a=r,!0===p){var o=createArrayFromList([a,i]),l=ReadableStreamCancel(t,o);c(l)}return m}function cancel2Algorithm(r){if(p=!0,i=r,!0===d){var o=createArrayFromList([a,i]),l=ReadableStreamCancel(t,o);c(l)}return m}function startAlgorithm(){}return o=CreateReadableStream(startAlgorithm,pullAlgorithm,cancel1Algorithm),l=CreateReadableStream(startAlgorithm,pullAlgorithm,cancel2Algorithm),uponRejection(u._closedPromise,(function(t){ReadableStreamDefaultControllerError(o._readableStreamController,t),ReadableStreamDefaultControllerError(l._readableStreamController,t)})),[o,l]}var T=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},I=function(){function ReadableStreamBYOBRequest(){throw new TypeError("ReadableStreamBYOBRequest cannot be used directly")}return Object.defineProperty(ReadableStreamBYOBRequest.prototype,"view",{get:function(){if(!1===IsReadableStreamBYOBRequest(this))throw byobRequestBrandCheckException("view");return this._view},enumerable:!0,configurable:!0}),ReadableStreamBYOBRequest.prototype.respond=function(t){if(!1===IsReadableStreamBYOBRequest(this))throw byobRequestBrandCheckException("respond");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");IsDetachedBuffer(this._view.buffer),ReadableByteStreamControllerRespond(this._associatedReadableByteStreamController,t)},ReadableStreamBYOBRequest.prototype.respondWithNewView=function(t){if(!1===IsReadableStreamBYOBRequest(this))throw byobRequestBrandCheckException("respond");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");if(!ArrayBuffer.isView(t))throw new TypeError("You can only respond with array buffer views");IsDetachedBuffer(t.buffer),ReadableByteStreamControllerRespondWithNewView(this._associatedReadableByteStreamController,t)},ReadableStreamBYOBRequest}(),P=function(){function ReadableByteStreamController(){throw new TypeError("ReadableByteStreamController constructor cannot be used directly")}return Object.defineProperty(ReadableByteStreamController.prototype,"byobRequest",{get:function(){if(!1===IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("byobRequest");if(void 0===this._byobRequest&&this._pendingPullIntos.length>0){var t=this._pendingPullIntos.peek(),r=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),a=Object.create(I.prototype);SetUpReadableStreamBYOBRequest(a,this,r),this._byobRequest=a}return this._byobRequest},enumerable:!0,configurable:!0}),Object.defineProperty(ReadableByteStreamController.prototype,"desiredSize",{get:function(){if(!1===IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("desiredSize");return ReadableByteStreamControllerGetDesiredSize(this)},enumerable:!0,configurable:!0}),ReadableByteStreamController.prototype.close=function(){if(!1===IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("close");if(!0===this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var t=this._controlledReadableByteStream._state;if("readable"!==t)throw new TypeError("The stream (in "+t+" state) is not in the readable state and cannot be closed");ReadableByteStreamControllerClose(this)},ReadableByteStreamController.prototype.enqueue=function(t){if(!1===IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("enqueue");if(!0===this._closeRequested)throw new TypeError("stream is closed or draining");var r=this._controlledReadableByteStream._state;if("readable"!==r)throw new TypeError("The stream (in "+r+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(t))throw new TypeError("You can only enqueue array buffer views when using a ReadableByteStreamController");IsDetachedBuffer(t.buffer),ReadableByteStreamControllerEnqueue(this,t)},ReadableByteStreamController.prototype.error=function(t){if(!1===IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("error");ReadableByteStreamControllerError(this,t)},ReadableByteStreamController.prototype[p]=function(t){this._pendingPullIntos.length>0&&(this._pendingPullIntos.peek().bytesFilled=0),ResetQueue(this);var r=this._cancelAlgorithm(t);return ReadableByteStreamControllerClearAlgorithms(this),r},ReadableByteStreamController.prototype[m]=function(){var t=this._controlledReadableByteStream;if(this._queueTotalSize>0){var r=this._queue.shift();this._queueTotalSize-=r.byteLength,ReadableByteStreamControllerHandleQueueDrain(this);var a=void 0;try{a=new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}catch(t){return promiseRejectedWith(t)}return promiseResolvedWith(ReadableStreamCreateReadResult(a,!1,t._reader._forAuthorCode))}var i=this._autoAllocateChunkSize;if(void 0!==i){var o=void 0;try{o=new ArrayBuffer(i)}catch(t){return promiseRejectedWith(t)}var l={buffer:o,byteOffset:0,byteLength:i,bytesFilled:0,elementSize:1,ctor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(l)}var c=ReadableStreamAddReadRequest(t);return ReadableByteStreamControllerCallPullIfNeeded(this),c},ReadableByteStreamController}();function IsReadableByteStreamController(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_controlledReadableByteStream")}function IsReadableStreamBYOBRequest(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_associatedReadableByteStreamController")}function ReadableByteStreamControllerCallPullIfNeeded(t){!1!==ReadableByteStreamControllerShouldCallPull(t)&&(!0!==t._pulling?(t._pulling=!0,uponPromise(t._pullAlgorithm(),(function(){t._pulling=!1,!0===t._pullAgain&&(t._pullAgain=!1,ReadableByteStreamControllerCallPullIfNeeded(t))}),(function(r){ReadableByteStreamControllerError(t,r)}))):t._pullAgain=!0)}function ReadableByteStreamControllerClearPendingPullIntos(t){ReadableByteStreamControllerInvalidateBYOBRequest(t),t._pendingPullIntos=new d}function ReadableByteStreamControllerCommitPullIntoDescriptor(t,r){var a=!1;"closed"===t._state&&(a=!0);var i=ReadableByteStreamControllerConvertPullIntoDescriptor(r);"default"===r.readerType?ReadableStreamFulfillReadRequest(t,i,a):ReadableStreamFulfillReadIntoRequest(t,i,a)}function ReadableByteStreamControllerConvertPullIntoDescriptor(t){var r=t.bytesFilled,a=t.elementSize;return new t.ctor(t.buffer,t.byteOffset,r/a)}function ReadableByteStreamControllerEnqueueChunkToQueue(t,r,a,i){t._queue.push({buffer:r,byteOffset:a,byteLength:i}),t._queueTotalSize+=i}function ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(t,r){var a=r.elementSize,i=r.bytesFilled-r.bytesFilled%a,o=Math.min(t._queueTotalSize,r.byteLength-r.bytesFilled),l=r.bytesFilled+o,c=l-l%a,u=o,h=!1;c>i&&(u=c-r.bytesFilled,h=!0);for(var d=t._queue;u>0;){var p=d.peek(),m=Math.min(u,p.byteLength),g=r.byteOffset+r.bytesFilled;ArrayBufferCopy(r.buffer,g,p.buffer,p.byteOffset,m),p.byteLength===m?d.shift():(p.byteOffset+=m,p.byteLength-=m),t._queueTotalSize-=m,ReadableByteStreamControllerFillHeadPullIntoDescriptor(t,m,r),u-=m}return h}function ReadableByteStreamControllerFillHeadPullIntoDescriptor(t,r,a){ReadableByteStreamControllerInvalidateBYOBRequest(t),a.bytesFilled+=r}function ReadableByteStreamControllerHandleQueueDrain(t){0===t._queueTotalSize&&!0===t._closeRequested?(ReadableByteStreamControllerClearAlgorithms(t),ReadableStreamClose(t._controlledReadableByteStream)):ReadableByteStreamControllerCallPullIfNeeded(t)}function ReadableByteStreamControllerInvalidateBYOBRequest(t){void 0!==t._byobRequest&&(t._byobRequest._associatedReadableByteStreamController=void 0,t._byobRequest._view=void 0,t._byobRequest=void 0)}function ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(t){for(;t._pendingPullIntos.length>0;){if(0===t._queueTotalSize)return;var r=t._pendingPullIntos.peek();!0===ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(t,r)&&(ReadableByteStreamControllerShiftPendingPullInto(t),ReadableByteStreamControllerCommitPullIntoDescriptor(t._controlledReadableByteStream,r))}}function ReadableByteStreamControllerPullInto(t,r){var a=t._controlledReadableByteStream,i=1;r.constructor!==DataView&&(i=r.constructor.BYTES_PER_ELEMENT);var o=r.constructor,l={buffer:TransferArrayBuffer(r.buffer),byteOffset:r.byteOffset,byteLength:r.byteLength,bytesFilled:0,elementSize:i,ctor:o,readerType:"byob"};if(t._pendingPullIntos.length>0)return t._pendingPullIntos.push(l),ReadableStreamAddReadIntoRequest(a);if("closed"===a._state)return promiseResolvedWith(ReadableStreamCreateReadResult(new o(l.buffer,l.byteOffset,0),!0,a._reader._forAuthorCode));if(t._queueTotalSize>0){if(!0===ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(t,l)){var c=ReadableByteStreamControllerConvertPullIntoDescriptor(l);return ReadableByteStreamControllerHandleQueueDrain(t),promiseResolvedWith(ReadableStreamCreateReadResult(c,!1,a._reader._forAuthorCode))}if(!0===t._closeRequested){var u=new TypeError("Insufficient bytes to fill elements in the given buffer");return ReadableByteStreamControllerError(t,u),promiseRejectedWith(u)}}t._pendingPullIntos.push(l);var h=ReadableStreamAddReadIntoRequest(a);return ReadableByteStreamControllerCallPullIfNeeded(t),h}function ReadableByteStreamControllerRespondInClosedState(t,r){r.buffer=TransferArrayBuffer(r.buffer);var a=t._controlledReadableByteStream;if(!0===ReadableStreamHasBYOBReader(a))for(;ReadableStreamGetNumReadIntoRequests(a)>0;)ReadableByteStreamControllerCommitPullIntoDescriptor(a,ReadableByteStreamControllerShiftPendingPullInto(t))}function ReadableByteStreamControllerRespondInReadableState(t,r,a){if(a.bytesFilled+r>a.byteLength)throw new RangeError("bytesWritten out of range");if(ReadableByteStreamControllerFillHeadPullIntoDescriptor(t,r,a),!(a.bytesFilled<a.elementSize)){ReadableByteStreamControllerShiftPendingPullInto(t);var i=a.bytesFilled%a.elementSize;if(i>0){var o=a.byteOffset+a.bytesFilled,l=a.buffer.slice(o-i,o);ReadableByteStreamControllerEnqueueChunkToQueue(t,l,0,l.byteLength)}a.buffer=TransferArrayBuffer(a.buffer),a.bytesFilled-=i,ReadableByteStreamControllerCommitPullIntoDescriptor(t._controlledReadableByteStream,a),ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(t)}}function ReadableByteStreamControllerRespondInternal(t,r){var a=t._pendingPullIntos.peek();if("closed"===t._controlledReadableByteStream._state){if(0!==r)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream");ReadableByteStreamControllerRespondInClosedState(t,a)}else ReadableByteStreamControllerRespondInReadableState(t,r,a);ReadableByteStreamControllerCallPullIfNeeded(t)}function ReadableByteStreamControllerShiftPendingPullInto(t){var r=t._pendingPullIntos.shift();return ReadableByteStreamControllerInvalidateBYOBRequest(t),r}function ReadableByteStreamControllerShouldCallPull(t){var r=t._controlledReadableByteStream;return"readable"===r._state&&!0!==t._closeRequested&&!1!==t._started&&(!0===ReadableStreamHasDefaultReader(r)&&ReadableStreamGetNumReadRequests(r)>0||!0===ReadableStreamHasBYOBReader(r)&&ReadableStreamGetNumReadIntoRequests(r)>0||ReadableByteStreamControllerGetDesiredSize(t)>0)}function ReadableByteStreamControllerClearAlgorithms(t){t._pullAlgorithm=void 0,t._cancelAlgorithm=void 0}function ReadableByteStreamControllerClose(t){var r=t._controlledReadableByteStream;if(t._queueTotalSize>0)t._closeRequested=!0;else{if(t._pendingPullIntos.length>0&&t._pendingPullIntos.peek().bytesFilled>0){var a=new TypeError("Insufficient bytes to fill elements in the given buffer");throw ReadableByteStreamControllerError(t,a),a}ReadableByteStreamControllerClearAlgorithms(t),ReadableStreamClose(r)}}function ReadableByteStreamControllerEnqueue(t,r){var a=t._controlledReadableByteStream,i=r.buffer,o=r.byteOffset,l=r.byteLength,c=TransferArrayBuffer(i);!0===ReadableStreamHasDefaultReader(a)?0===ReadableStreamGetNumReadRequests(a)?ReadableByteStreamControllerEnqueueChunkToQueue(t,c,o,l):ReadableStreamFulfillReadRequest(a,new Uint8Array(c,o,l),!1):!0===ReadableStreamHasBYOBReader(a)?(ReadableByteStreamControllerEnqueueChunkToQueue(t,c,o,l),ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(t)):ReadableByteStreamControllerEnqueueChunkToQueue(t,c,o,l),ReadableByteStreamControllerCallPullIfNeeded(t)}function ReadableByteStreamControllerError(t,r){var a=t._controlledReadableByteStream;"readable"===a._state&&(ReadableByteStreamControllerClearPendingPullIntos(t),ResetQueue(t),ReadableByteStreamControllerClearAlgorithms(t),ReadableStreamError(a,r))}function ReadableByteStreamControllerGetDesiredSize(t){var r=t._controlledReadableByteStream._state;return"errored"===r?null:"closed"===r?0:t._strategyHWM-t._queueTotalSize}function ReadableByteStreamControllerRespond(t,r){if(!1===IsFiniteNonNegativeNumber(r=Number(r)))throw new RangeError("bytesWritten must be a finite");ReadableByteStreamControllerRespondInternal(t,r)}function ReadableByteStreamControllerRespondWithNewView(t,r){var a=t._pendingPullIntos.peek();if(a.byteOffset+a.bytesFilled!==r.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(a.byteLength!==r.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");a.buffer=r.buffer,ReadableByteStreamControllerRespondInternal(t,r.byteLength)}function SetUpReadableByteStreamController(t,r,a,i,o,l,c){r._controlledReadableByteStream=t,r._pullAgain=!1,r._pulling=!1,r._byobRequest=void 0,r._queue=r._queueTotalSize=void 0,ResetQueue(r),r._closeRequested=!1,r._started=!1,r._strategyHWM=ValidateAndNormalizeHighWaterMark(l),r._pullAlgorithm=i,r._cancelAlgorithm=o,r._autoAllocateChunkSize=c,r._pendingPullIntos=new d,t._readableStreamController=r,uponPromise(promiseResolvedWith(a()),(function(){r._started=!0,ReadableByteStreamControllerCallPullIfNeeded(r)}),(function(t){ReadableByteStreamControllerError(r,t)}))}function SetUpReadableByteStreamControllerFromUnderlyingSource(t,r,a){var i=Object.create(P.prototype);function startAlgorithm(){return InvokeOrNoop(r,"start",[i])}var o=CreateAlgorithmFromUnderlyingMethod(r,"pull",0,[i]),l=CreateAlgorithmFromUnderlyingMethod(r,"cancel",1,[]),c=r.autoAllocateChunkSize;if(void 0!==c&&(c=Number(c),!1===T(c)||c<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");SetUpReadableByteStreamController(t,i,startAlgorithm,o,l,a,c)}function SetUpReadableStreamBYOBRequest(t,r,a){t._associatedReadableByteStreamController=r,t._view=a}function byobRequestBrandCheckException(t){return new TypeError("ReadableStreamBYOBRequest.prototype."+t+" can only be used on a ReadableStreamBYOBRequest")}function byteStreamControllerBrandCheckException(t){return new TypeError("ReadableByteStreamController.prototype."+t+" can only be used on a ReadableByteStreamController")}function AcquireReadableStreamBYOBReader(t,r){void 0===r&&(r=!1);var a=new O(t);return a._forAuthorCode=r,a}function ReadableStreamAddReadIntoRequest(t){return newPromise((function(r,a){var i={_resolve:r,_reject:a};t._reader._readIntoRequests.push(i)}))}function ReadableStreamFulfillReadIntoRequest(t,r,a){var i=t._reader;i._readIntoRequests.shift()._resolve(ReadableStreamCreateReadResult(r,a,i._forAuthorCode))}function ReadableStreamGetNumReadIntoRequests(t){return t._reader._readIntoRequests.length}function ReadableStreamHasBYOBReader(t){var r=t._reader;return void 0!==r&&!!IsReadableStreamBYOBReader(r)}var O=function(){function ReadableStreamBYOBReader(t){if(!IsReadableStream(t))throw new TypeError("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(!1===IsReadableByteStreamController(t._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(IsReadableStreamLocked(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");ReadableStreamReaderGenericInitialize(this,t),this._readIntoRequests=new d}return Object.defineProperty(ReadableStreamBYOBReader.prototype,"closed",{get:function(){return IsReadableStreamBYOBReader(this)?this._closedPromise:promiseRejectedWith(byobReaderBrandCheckException("closed"))},enumerable:!0,configurable:!0}),ReadableStreamBYOBReader.prototype.cancel=function(t){return IsReadableStreamBYOBReader(this)?void 0===this._ownerReadableStream?promiseRejectedWith(readerLockException("cancel")):ReadableStreamReaderGenericCancel(this,t):promiseRejectedWith(byobReaderBrandCheckException("cancel"))},ReadableStreamBYOBReader.prototype.read=function(t){return IsReadableStreamBYOBReader(this)?void 0===this._ownerReadableStream?promiseRejectedWith(readerLockException("read from")):ArrayBuffer.isView(t)?(IsDetachedBuffer(t.buffer),0===t.byteLength?promiseRejectedWith(new TypeError("view must have non-zero byteLength")):ReadableStreamBYOBReaderRead(this,t)):promiseRejectedWith(new TypeError("view must be an array buffer view")):promiseRejectedWith(byobReaderBrandCheckException("read"))},ReadableStreamBYOBReader.prototype.releaseLock=function(){if(!IsReadableStreamBYOBReader(this))throw byobReaderBrandCheckException("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ReadableStreamReaderGenericRelease(this)}},ReadableStreamBYOBReader}();function IsReadableStreamBYOBReader(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_readIntoRequests")}function ReadableStreamBYOBReaderRead(t,r){var a=t._ownerReadableStream;return a._disturbed=!0,"errored"===a._state?promiseRejectedWith(a._storedError):ReadableByteStreamControllerPullInto(a._readableStreamController,r)}function byobReaderBrandCheckException(t){return new TypeError("ReadableStreamBYOBReader.prototype."+t+" can only be used on a ReadableStreamBYOBReader")}var E=function(){function ReadableStream(t,r){void 0===t&&(t={}),void 0===r&&(r={}),InitializeReadableStream(this);var a=r.size,i=r.highWaterMark,o=t.type;if("bytes"===String(o)){if(void 0!==a)throw new RangeError("The strategy for a byte stream cannot have a size function");void 0===i&&(i=0),SetUpReadableByteStreamControllerFromUnderlyingSource(this,t,i=ValidateAndNormalizeHighWaterMark(i))}else{if(void 0!==o)throw new RangeError("Invalid type is specified");var l=MakeSizeAlgorithmFromSizeFunction(a);void 0===i&&(i=1),SetUpReadableStreamDefaultControllerFromUnderlyingSource(this,t,i=ValidateAndNormalizeHighWaterMark(i),l)}}return Object.defineProperty(ReadableStream.prototype,"locked",{get:function(){if(!1===IsReadableStream(this))throw streamBrandCheckException$1("locked");return IsReadableStreamLocked(this)},enumerable:!0,configurable:!0}),ReadableStream.prototype.cancel=function(t){return!1===IsReadableStream(this)?promiseRejectedWith(streamBrandCheckException$1("cancel")):!0===IsReadableStreamLocked(this)?promiseRejectedWith(new TypeError("Cannot cancel a stream that already has a reader")):ReadableStreamCancel(this,t)},ReadableStream.prototype.getReader=function(t){var r=(void 0===t?{}:t).mode;if(!1===IsReadableStream(this))throw streamBrandCheckException$1("getReader");if(void 0===r)return AcquireReadableStreamDefaultReader(this,!0);if("byob"===(r=String(r)))return AcquireReadableStreamBYOBReader(this,!0);throw new RangeError("Invalid mode is specified")},ReadableStream.prototype.pipeThrough=function(t,r){var a=t.writable,i=t.readable,o=void 0===r?{}:r,l=o.preventClose,c=o.preventAbort,u=o.preventCancel,h=o.signal;if(!1===IsReadableStream(this))throw streamBrandCheckException$1("pipeThrough");if(!1===IsWritableStream(a))throw new TypeError("writable argument to pipeThrough must be a WritableStream");if(!1===IsReadableStream(i))throw new TypeError("readable argument to pipeThrough must be a ReadableStream");if(l=Boolean(l),c=Boolean(c),u=Boolean(u),void 0!==h&&!isAbortSignal(h))throw new TypeError("ReadableStream.prototype.pipeThrough's signal option must be an AbortSignal");if(!0===IsReadableStreamLocked(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(!0===IsWritableStreamLocked(a))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return setPromiseIsHandledToTrue(ReadableStreamPipeTo(this,a,l,c,u,h)),i},ReadableStream.prototype.pipeTo=function(t,r){var a=void 0===r?{}:r,i=a.preventClose,o=a.preventAbort,l=a.preventCancel,c=a.signal;return!1===IsReadableStream(this)?promiseRejectedWith(streamBrandCheckException$1("pipeTo")):!1===IsWritableStream(t)?promiseRejectedWith(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream")):(i=Boolean(i),o=Boolean(o),l=Boolean(l),void 0===c||isAbortSignal(c)?!0===IsReadableStreamLocked(this)?promiseRejectedWith(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):!0===IsWritableStreamLocked(t)?promiseRejectedWith(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):ReadableStreamPipeTo(this,t,i,o,l,c):promiseRejectedWith(new TypeError("ReadableStream.prototype.pipeTo's signal option must be an AbortSignal")))},ReadableStream.prototype.tee=function(){if(!1===IsReadableStream(this))throw streamBrandCheckException$1("tee");return createArrayFromList(ReadableStreamTee(this))},ReadableStream.prototype.getIterator=function(t){var r=(void 0===t?{}:t).preventCancel,a=void 0!==r&&r;if(!1===IsReadableStream(this))throw streamBrandCheckException$1("getIterator");return AcquireReadableStreamAsyncIterator(this,a)},ReadableStream}();function CreateReadableStream(t,r,a,i,o){void 0===i&&(i=1),void 0===o&&(o=function(){return 1});var l=Object.create(E.prototype);return InitializeReadableStream(l),SetUpReadableStreamDefaultController(l,Object.create(R.prototype),t,r,a,i,o),l}function InitializeReadableStream(t){t._state="readable",t._reader=void 0,t._storedError=void 0,t._disturbed=!1}function IsReadableStream(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_readableStreamController")}function IsReadableStreamLocked(t){return void 0!==t._reader}function ReadableStreamCancel(t,r){return t._disturbed=!0,"closed"===t._state?promiseResolvedWith(void 0):"errored"===t._state?promiseRejectedWith(t._storedError):(ReadableStreamClose(t),transformPromiseWith(t._readableStreamController[p](r),noop))}function ReadableStreamClose(t){t._state="closed";var r=t._reader;void 0!==r&&(IsReadableStreamDefaultReader(r)&&(r._readRequests.forEach((function(t){t._resolve(ReadableStreamCreateReadResult(void 0,!0,r._forAuthorCode))})),r._readRequests=new d),defaultReaderClosedPromiseResolve(r))}function ReadableStreamError(t,r){t._state="errored",t._storedError=r;var a=t._reader;void 0!==a&&(IsReadableStreamDefaultReader(a)?(a._readRequests.forEach((function(t){t._reject(r)})),a._readRequests=new d):(a._readIntoRequests.forEach((function(t){t._reject(r)})),a._readIntoRequests=new d),defaultReaderClosedPromiseReject(a,r))}function streamBrandCheckException$1(t){return new TypeError("ReadableStream.prototype."+t+" can only be used on a ReadableStream")}"symbol"==typeof r.asyncIterator&&Object.defineProperty(E.prototype,r.asyncIterator,{value:E.prototype.getIterator,enumerable:!1,writable:!0,configurable:!0});var B=function(){function ByteLengthQueuingStrategy(t){var r=t.highWaterMark;this.highWaterMark=r}return ByteLengthQueuingStrategy.prototype.size=function(t){return t.byteLength},ByteLengthQueuingStrategy}(),D=function(){function CountQueuingStrategy(t){var r=t.highWaterMark;this.highWaterMark=r}return CountQueuingStrategy.prototype.size=function(){return 1},CountQueuingStrategy}(),M=function(){function TransformStream(t,r,a){void 0===t&&(t={}),void 0===r&&(r={}),void 0===a&&(a={});var i=r.size,o=r.highWaterMark,l=a.size,c=a.highWaterMark;if(void 0!==t.writableType)throw new RangeError("Invalid writable type specified");var u=MakeSizeAlgorithmFromSizeFunction(i);if(void 0===o&&(o=1),o=ValidateAndNormalizeHighWaterMark(o),void 0!==t.readableType)throw new RangeError("Invalid readable type specified");var h,d=MakeSizeAlgorithmFromSizeFunction(l);void 0===c&&(c=0),c=ValidateAndNormalizeHighWaterMark(c),InitializeTransformStream(this,newPromise((function(t){h=t})),o,u,c,d),SetUpTransformStreamDefaultControllerFromTransformer(this,t);var p=InvokeOrNoop(t,"start",[this._transformStreamController]);h(p)}return Object.defineProperty(TransformStream.prototype,"readable",{get:function(){if(!1===IsTransformStream(this))throw streamBrandCheckException$2("readable");return this._readable},enumerable:!0,configurable:!0}),Object.defineProperty(TransformStream.prototype,"writable",{get:function(){if(!1===IsTransformStream(this))throw streamBrandCheckException$2("writable");return this._writable},enumerable:!0,configurable:!0}),TransformStream}();function InitializeTransformStream(t,r,a,i,o,l){function startAlgorithm(){return r}function writeAlgorithm(r){return TransformStreamDefaultSinkWriteAlgorithm(t,r)}function abortAlgorithm(r){return TransformStreamDefaultSinkAbortAlgorithm(t,r)}function closeAlgorithm(){return TransformStreamDefaultSinkCloseAlgorithm(t)}function pullAlgorithm(){return TransformStreamDefaultSourcePullAlgorithm(t)}function cancelAlgorithm(r){return TransformStreamErrorWritableAndUnblockWrite(t,r),promiseResolvedWith(void 0)}t._writable=CreateWritableStream(startAlgorithm,writeAlgorithm,closeAlgorithm,abortAlgorithm,a,i),t._readable=CreateReadableStream(startAlgorithm,pullAlgorithm,cancelAlgorithm,o,l),t._backpressure=void 0,t._backpressureChangePromise=void 0,t._backpressureChangePromise_resolve=void 0,TransformStreamSetBackpressure(t,!0),t._transformStreamController=void 0}function IsTransformStream(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_transformStreamController")}function TransformStreamError(t,r){ReadableStreamDefaultControllerError(t._readable._readableStreamController,r),TransformStreamErrorWritableAndUnblockWrite(t,r)}function TransformStreamErrorWritableAndUnblockWrite(t,r){TransformStreamDefaultControllerClearAlgorithms(t._transformStreamController),WritableStreamDefaultControllerErrorIfNeeded(t._writable._writableStreamController,r),!0===t._backpressure&&TransformStreamSetBackpressure(t,!1)}function TransformStreamSetBackpressure(t,r){void 0!==t._backpressureChangePromise&&t._backpressureChangePromise_resolve(),t._backpressureChangePromise=newPromise((function(r){t._backpressureChangePromise_resolve=r})),t._backpressure=r}var L=function(){function TransformStreamDefaultController(){throw new TypeError("TransformStreamDefaultController instances cannot be created directly")}return Object.defineProperty(TransformStreamDefaultController.prototype,"desiredSize",{get:function(){if(!1===IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException$1("desiredSize");return ReadableStreamDefaultControllerGetDesiredSize(this._controlledTransformStream._readable._readableStreamController)},enumerable:!0,configurable:!0}),TransformStreamDefaultController.prototype.enqueue=function(t){if(!1===IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException$1("enqueue");TransformStreamDefaultControllerEnqueue(this,t)},TransformStreamDefaultController.prototype.error=function(t){if(!1===IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException$1("error");TransformStreamDefaultControllerError(this,t)},TransformStreamDefaultController.prototype.terminate=function(){if(!1===IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException$1("terminate");TransformStreamDefaultControllerTerminate(this)},TransformStreamDefaultController}();function IsTransformStreamDefaultController(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_controlledTransformStream")}function SetUpTransformStreamDefaultController(t,r,a,i){r._controlledTransformStream=t,t._transformStreamController=r,r._transformAlgorithm=a,r._flushAlgorithm=i}function SetUpTransformStreamDefaultControllerFromTransformer(t,r){var a=Object.create(L.prototype),transformAlgorithm=function(t){try{return TransformStreamDefaultControllerEnqueue(a,t),promiseResolvedWith(void 0)}catch(t){return promiseRejectedWith(t)}},i=r.transform;if(void 0!==i){if("function"!=typeof i)throw new TypeError("transform is not a method");transformAlgorithm=function(t){return PromiseCall(i,r,[t,a])}}var o=CreateAlgorithmFromUnderlyingMethod(r,"flush",0,[a]);SetUpTransformStreamDefaultController(t,a,transformAlgorithm,o)}function TransformStreamDefaultControllerClearAlgorithms(t){t._transformAlgorithm=void 0,t._flushAlgorithm=void 0}function TransformStreamDefaultControllerEnqueue(t,r){var a=t._controlledTransformStream,i=a._readable._readableStreamController;if(!1===ReadableStreamDefaultControllerCanCloseOrEnqueue(i))throw new TypeError("Readable side is not in a state that permits enqueue");try{ReadableStreamDefaultControllerEnqueue(i,r)}catch(t){throw TransformStreamErrorWritableAndUnblockWrite(a,t),a._readable._storedError}ReadableStreamDefaultControllerHasBackpressure(i)!==a._backpressure&&TransformStreamSetBackpressure(a,!0)}function TransformStreamDefaultControllerError(t,r){TransformStreamError(t._controlledTransformStream,r)}function TransformStreamDefaultControllerPerformTransform(t,r){return transformPromiseWith(t._transformAlgorithm(r),void 0,(function(r){throw TransformStreamError(t._controlledTransformStream,r),r}))}function TransformStreamDefaultControllerTerminate(t){var r=t._controlledTransformStream,a=r._readable._readableStreamController;!0===ReadableStreamDefaultControllerCanCloseOrEnqueue(a)&&ReadableStreamDefaultControllerClose(a),TransformStreamErrorWritableAndUnblockWrite(r,new TypeError("TransformStream terminated"))}function TransformStreamDefaultSinkWriteAlgorithm(t,r){var a=t._transformStreamController;return!0===t._backpressure?transformPromiseWith(t._backpressureChangePromise,(function(){var i=t._writable;if("erroring"===i._state)throw i._storedError;return TransformStreamDefaultControllerPerformTransform(a,r)})):TransformStreamDefaultControllerPerformTransform(a,r)}function TransformStreamDefaultSinkAbortAlgorithm(t,r){return TransformStreamError(t,r),promiseResolvedWith(void 0)}function TransformStreamDefaultSinkCloseAlgorithm(t){var r=t._readable,a=t._transformStreamController,i=a._flushAlgorithm();return TransformStreamDefaultControllerClearAlgorithms(a),transformPromiseWith(i,(function(){if("errored"===r._state)throw r._storedError;var t=r._readableStreamController;!0===ReadableStreamDefaultControllerCanCloseOrEnqueue(t)&&ReadableStreamDefaultControllerClose(t)}),(function(a){throw TransformStreamError(t,a),r._storedError}))}function TransformStreamDefaultSourcePullAlgorithm(t){return TransformStreamSetBackpressure(t,!1),t._backpressureChangePromise}function defaultControllerBrandCheckException$1(t){return new TypeError("TransformStreamDefaultController.prototype."+t+" can only be used on a TransformStreamDefaultController")}function streamBrandCheckException$2(t){return new TypeError("TransformStream.prototype."+t+" can only be used on a TransformStream")}t.ByteLengthQueuingStrategy=B,t.CountQueuingStrategy=D,t.ReadableStream=E,t.TransformStream=M,t.WritableStream=w,Object.defineProperty(t,"__esModule",{value:!0})}(r)},function(t,r,a){a(145),a(114),a(77),a(116);var i=a(43);t.exports=i.Map},function(t,r,a){"use strict";var i=a(146),o=a(150);t.exports=i("Map",(function(t){return function Map(){return t(this,arguments.length?arguments[0]:void 0)}}),o)},function(t,r,a){"use strict";var i=a(10),o=a(11),l=a(52),c=a(29),u=a(147),h=a(124),d=a(123),p=a(22),m=a(14),g=a(97),b=a(85),y=a(149);t.exports=function(t,r,a){var v=-1!==t.indexOf("Map"),S=-1!==t.indexOf("Weak"),k=v?"set":"add",w=o[t],C=w&&w.prototype,x=w,_={},fixMethod=function(t){var r=C[t];c(C,t,"add"==t?function add(t){return r.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(S&&!p(t))&&r.call(this,0===t?0:t)}:"get"==t?function get(t){return S&&!p(t)?void 0:r.call(this,0===t?0:t)}:"has"==t?function has(t){return!(S&&!p(t))&&r.call(this,0===t?0:t)}:function set(t,a){return r.call(this,0===t?0:t,a),this})};if(l(t,"function"!=typeof w||!(S||C.forEach&&!m((function(){(new w).entries().next()})))))x=a.getConstructor(r,t,v,k),u.REQUIRED=!0;else if(l(t,!0)){var A=new x,R=A[k](S?{}:-0,1)!=A,T=m((function(){A.has(1)})),I=g((function(t){new w(t)})),P=!S&&m((function(){for(var t=new w,r=5;r--;)t[k](r,r);return!t.has(-0)}));I||((x=r((function(r,a){d(r,x,t);var i=y(new w,r,x);return null!=a&&h(a,i[k],i,v),i}))).prototype=C,C.constructor=x),(T||P)&&(fixMethod("delete"),fixMethod("has"),v&&fixMethod("get")),(P||R)&&fixMethod(k),S&&C.clear&&delete C.clear}return _[t]=x,i({global:!0,forced:x!=w},_),b(x,t),S||a.setStrong(x,t,v),x}},function(t,r,a){var i=a(39),o=a(22),l=a(23),c=a(27).f,u=a(38),h=a(148),d=u("meta"),p=0,m=Object.isExtensible||function(){return!0},setMetadata=function(t){c(t,d,{value:{objectID:"O"+ ++p,weakData:{}}})},g=t.exports={REQUIRED:!1,fastKey:function(t,r){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!l(t,d)){if(!m(t))return"F";if(!r)return"E";setMetadata(t)}return t[d].objectID},getWeakData:function(t,r){if(!l(t,d)){if(!m(t))return!0;if(!r)return!1;setMetadata(t)}return t[d].weakData},onFreeze:function(t){return h&&g.REQUIRED&&m(t)&&!l(t,d)&&setMetadata(t),t}};i[d]=!0},function(t,r,a){var i=a(14);t.exports=!i((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(t,r,a){var i=a(22),o=a(87);t.exports=function(t,r,a){var l,c;return o&&"function"==typeof(l=r.constructor)&&l!==a&&i(c=l.prototype)&&c!==a.prototype&&o(t,c),t}},function(t,r,a){"use strict";var i=a(27).f,o=a(71),l=a(121),c=a(62),u=a(123),h=a(124),d=a(79),p=a(122),m=a(13),g=a(147).fastKey,b=a(33),y=b.set,v=b.getterFor;t.exports={getConstructor:function(t,r,a,d){var p=t((function(t,i){u(t,p,r),y(t,{type:r,index:o(null),first:void 0,last:void 0,size:0}),m||(t.size=0),null!=i&&h(i,t[d],t,a)})),b=v(r),define=function(t,r,a){var i,o,l=b(t),c=getEntry(t,r);return c?c.value=a:(l.last=c={index:o=g(r,!0),key:r,value:a,previous:i=l.last,next:void 0,removed:!1},l.first||(l.first=c),i&&(i.next=c),m?l.size++:t.size++,"F"!==o&&(l.index[o]=c)),t},getEntry=function(t,r){var a,i=b(t),o=g(r);if("F"!==o)return i.index[o];for(a=i.first;a;a=a.next)if(a.key==r)return a};return l(p.prototype,{clear:function clear(){for(var t=b(this),r=t.index,a=t.first;a;)a.removed=!0,a.previous&&(a.previous=a.previous.next=void 0),delete r[a.index],a=a.next;t.first=t.last=void 0,m?t.size=0:this.size=0},delete:function(t){var r=this,a=b(r),i=getEntry(r,t);if(i){var o=i.next,l=i.previous;delete a.index[i.index],i.removed=!0,l&&(l.next=o),o&&(o.previous=l),a.first==i&&(a.first=o),a.last==i&&(a.last=l),m?a.size--:r.size--}return!!i},forEach:function forEach(t){for(var r,a=b(this),i=c(t,arguments.length>1?arguments[1]:void 0,3);r=r?r.next:a.first;)for(i(r.value,r.key,this);r&&r.removed;)r=r.previous},has:function has(t){return!!getEntry(this,t)}}),l(p.prototype,a?{get:function get(t){var r=getEntry(this,t);return r&&r.value},set:function set(t,r){return define(this,0===t?0:t,r)}}:{add:function add(t){return define(this,t=0===t?0:t,t)}}),m&&i(p.prototype,"size",{get:function(){return b(this).size}}),p},setStrong:function(t,r,a){var i=r+" Iterator",o=v(r),l=v(i);d(t,r,(function(t,r){y(this,{type:i,target:t,state:o(t),kind:r,last:void 0})}),(function(){for(var t=l(this),r=t.kind,a=t.last;a&&a.removed;)a=a.previous;return t.target&&(t.last=a=a?a.next:t.state.first)?"keys"==r?{value:a.key,done:!1}:"values"==r?{value:a.value,done:!1}:{value:[a.key,a.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),a?"entries":"values",!a,!0),p(r)}}},function(t,r,a){a(152),a(114),a(77),a(116);var i=a(43);t.exports=i.Set},function(t,r,a){"use strict";var i=a(146),o=a(150);t.exports=i("Set",(function(t){return function Set(){return t(this,arguments.length?arguments[0]:void 0)}}),o)},function(t,r,a){a(114),a(154),a(116);var i=a(43);t.exports=i.WeakMap},function(t,r,a){"use strict";var i,o=a(11),l=a(121),c=a(147),u=a(146),h=a(155),d=a(22),p=a(33).enforce,m=a(34),g=!o.ActiveXObject&&"ActiveXObject"in o,b=Object.isExtensible,wrapper=function(t){return function WeakMap(){return t(this,arguments.length?arguments[0]:void 0)}},y=t.exports=u("WeakMap",wrapper,h);if(m&&g){i=h.getConstructor(wrapper,"WeakMap",!0),c.REQUIRED=!0;var v=y.prototype,S=v.delete,k=v.has,w=v.get,C=v.set;l(v,{delete:function(t){if(d(t)&&!b(t)){var r=p(this);return r.frozen||(r.frozen=new i),S.call(this,t)||r.frozen.delete(t)}return S.call(this,t)},has:function has(t){if(d(t)&&!b(t)){var r=p(this);return r.frozen||(r.frozen=new i),k.call(this,t)||r.frozen.has(t)}return k.call(this,t)},get:function get(t){if(d(t)&&!b(t)){var r=p(this);return r.frozen||(r.frozen=new i),k.call(this,t)?w.call(this,t):r.frozen.get(t)}return w.call(this,t)},set:function set(t,r){if(d(t)&&!b(t)){var a=p(this);a.frozen||(a.frozen=new i),k.call(this,t)?C.call(this,t,r):a.frozen.set(t,r)}else C.call(this,t,r);return this}})}},function(t,r,a){"use strict";var i=a(121),o=a(147).getWeakData,l=a(28),c=a(22),u=a(123),h=a(124),d=a(156),p=a(23),m=a(33),g=m.set,b=m.getterFor,y=d.find,v=d.findIndex,S=0,uncaughtFrozenStore=function(t){return t.frozen||(t.frozen=new UncaughtFrozenStore)},UncaughtFrozenStore=function(){this.entries=[]},findUncaughtFrozen=function(t,r){return y(t.entries,(function(t){return t[0]===r}))};UncaughtFrozenStore.prototype={get:function(t){var r=findUncaughtFrozen(this,t);if(r)return r[1]},has:function(t){return!!findUncaughtFrozen(this,t)},set:function(t,r){var a=findUncaughtFrozen(this,t);a?a[1]=r:this.entries.push([t,r])},delete:function(t){var r=v(this.entries,(function(r){return r[0]===t}));return~r&&this.entries.splice(r,1),!!~r}},t.exports={getConstructor:function(t,r,a,d){var m=t((function(t,i){u(t,m,r),g(t,{type:r,id:S++,frozen:void 0}),null!=i&&h(i,t[d],t,a)})),y=b(r),define=function(t,r,a){var i=y(t),c=o(l(r),!0);return!0===c?uncaughtFrozenStore(i).set(r,a):c[i.id]=a,t};return i(m.prototype,{delete:function(t){var r=y(this);if(!c(t))return!1;var a=o(t);return!0===a?uncaughtFrozenStore(r).delete(t):a&&p(a,r.id)&&delete a[r.id]},has:function has(t){var r=y(this);if(!c(t))return!1;var a=o(t);return!0===a?uncaughtFrozenStore(r).has(t):a&&p(a,r.id)}}),i(m.prototype,a?{get:function get(t){var r=y(this);if(c(t)){var a=o(t);return!0===a?uncaughtFrozenStore(r).get(t):a?a[r.id]:void 0}},set:function set(t,r){return define(this,t,r)}}:{add:function add(t){return define(this,t,!0)}}),m}}},function(t,r,a){var i=a(62),o=a(18),l=a(83),c=a(47),u=a(157),h=[].push,createMethod=function(t){var r=1==t,a=2==t,d=3==t,p=4==t,m=6==t,g=5==t||m;return function(b,y,v,S){for(var k,w,C=l(b),x=o(C),_=i(y,v,3),A=c(x.length),R=0,T=S||u,I=r?T(b,A):a?T(b,0):void 0;A>R;R++)if((g||R in x)&&(w=_(k=x[R],R,C),t))if(r)I[R]=w;else if(w)switch(t){case 3:return!0;case 5:return k;case 6:return R;case 2:h.call(I,k)}else if(p)return!1;return m?-1:d||p?p:I}};t.exports={forEach:createMethod(0),map:createMethod(1),filter:createMethod(2),some:createMethod(3),every:createMethod(4),find:createMethod(5),findIndex:createMethod(6)}},function(t,r,a){var i=a(22),o=a(158),l=a(57)("species");t.exports=function(t,r){var a;return o(t)&&("function"!=typeof(a=t.constructor)||a!==Array&&!o(a.prototype)?i(a)&&null===(a=a[l])&&(a=void 0):a=void 0),new(void 0===a?Array:a)(0===r?0:r)}},function(t,r,a){var i=a(19);t.exports=Array.isArray||function isArray(t){return"Array"==i(t)}},function(t,r,a){a(114),a(160),a(116);var i=a(43);t.exports=i.WeakSet},function(t,r,a){"use strict";a(146)("WeakSet",(function(t){return function WeakSet(){return t(this,arguments.length?arguments[0]:void 0)}}),a(155))},function(t,r,a){a(162);var i=a(61);t.exports=i("String","codePointAt")},function(t,r,a){"use strict";var i=a(10),o=a(78).codeAt;i({target:"String",proto:!0},{codePointAt:function codePointAt(t){return o(this,t)}})},function(t,r,a){a(164);var i=a(43);t.exports=i.String.fromCodePoint},function(t,r,a){var i=a(10),o=a(49),l=String.fromCharCode,c=String.fromCodePoint;i({target:"String",stat:!0,forced:!!c&&1!=c.length},{fromCodePoint:function fromCodePoint(t){for(var r,a=[],i=arguments.length,c=0;i>c;){if(r=+arguments[c++],o(r,1114111)!==r)throw RangeError(r+" is not a valid code point");a.push(r<65536?l(r):l(55296+((r-=65536)>>10),r%1024+56320))}return a.join("")}})},function(t,r,a){a(166),a(114),a(168),a(172),a(173),a(174),a(175),a(176),a(177),a(178),a(179),a(180),a(181),a(182),a(183),a(184),a(185),a(186),a(187);var i=a(43);t.exports=i.Symbol},function(t,r,a){"use strict";var i=a(10),o=a(14),l=a(158),c=a(22),u=a(83),h=a(47),d=a(93),p=a(157),m=a(167),g=a(57),b=a(133),y=g("isConcatSpreadable"),v=9007199254740991,S="Maximum allowed index exceeded",k=b>=51||!o((function(){var t=[];return t[y]=!1,t.concat()[0]!==t})),w=m("concat"),isConcatSpreadable=function(t){if(!c(t))return!1;var r=t[y];return void 0!==r?!!r:l(t)};i({target:"Array",proto:!0,forced:!k||!w},{concat:function concat(t){var r,a,i,o,l,c=u(this),m=p(c,0),g=0;for(r=-1,i=arguments.length;r<i;r++)if(isConcatSpreadable(l=-1===r?c:arguments[r])){if(g+(o=h(l.length))>v)throw TypeError(S);for(a=0;a<o;a++,g++)a in l&&d(m,g,l[a])}else{if(g>=v)throw TypeError(S);d(m,g++,l)}return m.length=g,m}})},function(t,r,a){var i=a(14),o=a(57),l=a(133),c=o("species");t.exports=function(t){return l>=51||!i((function(){var r=[];return(r.constructor={})[c]=function(){return{foo:1}},1!==r[t](Boolean).foo}))}},function(t,r,a){"use strict";var i=a(10),o=a(11),l=a(42),c=a(37),u=a(13),h=a(58),d=a(59),p=a(14),m=a(23),g=a(158),b=a(22),y=a(28),v=a(83),S=a(17),k=a(21),w=a(16),C=a(71),x=a(73),_=a(44),A=a(169),R=a(51),T=a(12),I=a(27),P=a(15),O=a(26),E=a(29),B=a(36),D=a(35),M=a(39),L=a(38),N=a(57),U=a(170),j=a(171),q=a(85),W=a(33),z=a(156).forEach,G=D("hidden"),H="Symbol",X=N("toPrimitive"),V=W.set,Y=W.getterFor(H),K=Object.prototype,J=o.Symbol,Z=l("JSON","stringify"),Q=T.f,$=I.f,ee=A.f,te=P.f,re=B("symbols"),ae=B("op-symbols"),ne=B("string-to-symbol-registry"),ie=B("symbol-to-string-registry"),oe=B("wks"),se=o.QObject,le=!se||!se.prototype||!se.prototype.findChild,ce=u&&p((function(){return 7!=C($({},"a",{get:function(){return $(this,"a",{value:7}).a}})).a}))?function(t,r,a){var i=Q(K,r);i&&delete K[r],$(t,r,a),i&&t!==K&&$(K,r,i)}:$,wrap=function(t,r){var a=re[t]=C(J.prototype);return V(a,{type:H,tag:t,description:r}),u||(a.description=r),a},ue=d?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof J},he=function defineProperty(t,r,a){t===K&&he(ae,r,a),y(t);var i=k(r,!0);return y(a),m(re,i)?(a.enumerable?(m(t,G)&&t[G][i]&&(t[G][i]=!1),a=C(a,{enumerable:w(0,!1)})):(m(t,G)||$(t,G,w(1,{})),t[G][i]=!0),ce(t,i,a)):$(t,i,a)},fe=function defineProperties(t,r){y(t);var a=S(r),i=x(a).concat(ge(a));return z(i,(function(r){u&&!de.call(a,r)||he(t,r,a[r])})),t},de=function propertyIsEnumerable(t){var r=k(t,!0),a=te.call(this,r);return!(this===K&&m(re,r)&&!m(ae,r))&&(!(a||!m(this,r)||!m(re,r)||m(this,G)&&this[G][r])||a)},pe=function getOwnPropertyDescriptor(t,r){var a=S(t),i=k(r,!0);if(a!==K||!m(re,i)||m(ae,i)){var o=Q(a,i);return!o||!m(re,i)||m(a,G)&&a[G][i]||(o.enumerable=!0),o}},me=function getOwnPropertyNames(t){var r=ee(S(t)),a=[];return z(r,(function(t){m(re,t)||m(M,t)||a.push(t)})),a},ge=function getOwnPropertySymbols(t){var r=t===K,a=ee(r?ae:S(t)),i=[];return z(a,(function(t){!m(re,t)||r&&!m(K,t)||i.push(re[t])})),i};(h||(E((J=function Symbol(){if(this instanceof J)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,r=L(t),setter=function(t){this===K&&setter.call(ae,t),m(this,G)&&m(this[G],r)&&(this[G][r]=!1),ce(this,r,w(1,t))};return u&&le&&ce(K,r,{configurable:!0,set:setter}),wrap(r,t)}).prototype,"toString",(function toString(){return Y(this).tag})),E(J,"withoutSetter",(function(t){return wrap(L(t),t)})),P.f=de,I.f=he,T.f=pe,_.f=A.f=me,R.f=ge,U.f=function(t){return wrap(N(t),t)},u&&($(J.prototype,"description",{configurable:!0,get:function description(){return Y(this).description}}),c||E(K,"propertyIsEnumerable",de,{unsafe:!0}))),i({global:!0,wrap:!0,forced:!h,sham:!h},{Symbol:J}),z(x(oe),(function(t){j(t)})),i({target:H,stat:!0,forced:!h},{for:function(t){var r=String(t);if(m(ne,r))return ne[r];var a=J(r);return ne[r]=a,ie[a]=r,a},keyFor:function keyFor(t){if(!ue(t))throw TypeError(t+" is not a symbol");if(m(ie,t))return ie[t]},useSetter:function(){le=!0},useSimple:function(){le=!1}}),i({target:"Object",stat:!0,forced:!h,sham:!u},{create:function create(t,r){return void 0===r?C(t):fe(C(t),r)},defineProperty:he,defineProperties:fe,getOwnPropertyDescriptor:pe}),i({target:"Object",stat:!0,forced:!h},{getOwnPropertyNames:me,getOwnPropertySymbols:ge}),i({target:"Object",stat:!0,forced:p((function(){R.f(1)}))},{getOwnPropertySymbols:function getOwnPropertySymbols(t){return R.f(v(t))}}),Z)&&i({target:"JSON",stat:!0,forced:!h||p((function(){var t=J();return"[null]"!=Z([t])||"{}"!=Z({a:t})||"{}"!=Z(Object(t))}))},{stringify:function stringify(t,r,a){for(var i,o=[t],l=1;arguments.length>l;)o.push(arguments[l++]);if(i=r,(b(r)||void 0!==t)&&!ue(t))return g(r)||(r=function(t,r){if("function"==typeof i&&(r=i.call(this,t,r)),!ue(r))return r}),o[1]=r,Z.apply(null,o)}});J.prototype[X]||O(J.prototype,X,J.prototype.valueOf),q(J,H),M[G]=!0},function(t,r,a){var i=a(17),o=a(44).f,l={}.toString,c="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function getOwnPropertyNames(t){return c&&"[object Window]"==l.call(t)?function(t){try{return o(t)}catch(t){return c.slice()}}(t):o(i(t))}},function(t,r,a){var i=a(57);r.f=i},function(t,r,a){var i=a(43),o=a(23),l=a(170),c=a(27).f;t.exports=function(t){var r=i.Symbol||(i.Symbol={});o(r,t)||c(r,t,{value:l.f(t)})}},function(t,r,a){a(171)("asyncIterator")},function(t,r,a){"use strict";var i=a(10),o=a(13),l=a(11),c=a(23),u=a(22),h=a(27).f,d=a(40),p=l.Symbol;if(o&&"function"==typeof p&&(!("description"in p.prototype)||void 0!==p().description)){var m={},g=function Symbol(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),r=this instanceof g?new p(t):void 0===t?p():p(t);return""===t&&(m[r]=!0),r};d(g,p);var b=g.prototype=p.prototype;b.constructor=g;var y=b.toString,v="Symbol(test)"==String(p("test")),S=/^Symbol\((.*)\)[^)]+$/;h(b,"description",{configurable:!0,get:function description(){var t=u(this)?this.valueOf():this,r=y.call(t);if(c(m,t))return"";var a=v?r.slice(7,-1):r.replace(S,"$1");return""===a?void 0:a}}),i({global:!0,forced:!0},{Symbol:g})}},function(t,r,a){a(171)("hasInstance")},function(t,r,a){a(171)("isConcatSpreadable")},function(t,r,a){a(171)("iterator")},function(t,r,a){a(171)("match")},function(t,r,a){a(171)("matchAll")},function(t,r,a){a(171)("replace")},function(t,r,a){a(171)("search")},function(t,r,a){a(171)("species")},function(t,r,a){a(171)("split")},function(t,r,a){a(171)("toPrimitive")},function(t,r,a){a(171)("toStringTag")},function(t,r,a){a(171)("unscopables")},function(t,r,a){a(85)(Math,"Math",!0)},function(t,r,a){var i=a(11);a(85)(i.JSON,"JSON",!0)},function(t,r,a){a(189);var i=a(61);t.exports=i("String","padStart")},function(t,r,a){"use strict";var i=a(10),o=a(190).start;i({target:"String",proto:!0,forced:a(192)},{padStart:function padStart(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,r,a){var i=a(47),o=a(191),l=a(20),c=Math.ceil,createMethod=function(t){return function(r,a,u){var h,d,p=String(l(r)),m=p.length,g=void 0===u?" ":String(u),b=i(a);return b<=m||""==g?p:(h=b-m,(d=o.call(g,c(h/g.length))).length>h&&(d=d.slice(0,h)),t?p+d:d+p)}};t.exports={start:createMethod(!1),end:createMethod(!0)}},function(t,r,a){"use strict";var i=a(48),o=a(20);t.exports="".repeat||function repeat(t){var r=String(o(this)),a="",l=i(t);if(l<0||l==1/0)throw RangeError("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(r+=r))1&l&&(a+=r);return a}},function(t,r,a){var i=a(127);t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(i)},function(t,r,a){a(194);var i=a(61);t.exports=i("String","padEnd")},function(t,r,a){"use strict";var i=a(10),o=a(190).end;i({target:"String",proto:!0,forced:a(192)},{padEnd:function padEnd(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,r,a){a(196);var i=a(43);t.exports=i.Object.values},function(t,r,a){var i=a(10),o=a(197).values;i({target:"Object",stat:!0},{values:function values(t){return o(t)}})},function(t,r,a){var i=a(13),o=a(73),l=a(17),c=a(15).f,createMethod=function(t){return function(r){for(var a,u=l(r),h=o(u),d=h.length,p=0,m=[];d>p;)a=h[p++],i&&!c.call(u,a)||m.push(t?[a,u[a]]:u[a]);return m}};t.exports={entries:createMethod(!0),values:createMethod(!1)}},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.clearPrimitiveCaches=function clearPrimitiveCaches(){c._clearCache(),l._clearCache(),h._clearCache()},r.isEOF=function isEOF(t){return t===o},r.isCmd=function isCmd(t,r){return t instanceof c&&(void 0===r||t.cmd===r)},r.isDict=isDict,r.isName=isName,r.isRef=function isRef(t){return t instanceof h},r.isRefsEqual=function isRefsEqual(t,r){return t.num===r.num&&t.gen===r.gen},r.isStream=function isStream(t){return"object"===_typeof(t)&&null!==t&&void 0!==t.getBytes},r.RefSetCache=r.RefSet=r.Ref=r.Name=r.Dict=r.Cmd=r.EOF=void 0;var i=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(2));a(5);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function asyncGeneratorStep(t,r,a,i,o,l,c){try{var u=t[l](c),h=u.value}catch(t){return void a(t)}u.done?r(h):Promise.resolve(h).then(i,o)}var o={};r.EOF=o;var l=function NameClosure(){var t=Object.create(null);function Name(t){this.name=t}return Name.prototype={},Name.get=function Name_get(r){var a=t[r];return a||(t[r]=new Name(r))},Name._clearCache=function(){t=Object.create(null)},Name}();r.Name=l;var c=function CmdClosure(){var t=Object.create(null);function Cmd(t){this.cmd=t}return Cmd.prototype={},Cmd.get=function Cmd_get(r){var a=t[r];return a||(t[r]=new Cmd(r))},Cmd._clearCache=function(){t=Object.create(null)},Cmd}();r.Cmd=c;var u=function DictClosure(){var t=function nonSerializableClosure(){return t};function Dict(r){this._map=Object.create(null),this.xref=r,this.objId=null,this.suppressEncryption=!1,this.__nonSerializable__=t}return Dict.prototype={assignXref:function Dict_assignXref(t){this.xref=t},get:function get(t,r,a){var i=this._map[t];return void 0===i&&void 0!==r&&void 0===(i=this._map[r])&&void 0!==a&&(i=this._map[a]),i instanceof h&&this.xref?this.xref.fetch(i,this.suppressEncryption):i},getAsync:function getAsync(t,r,a){var o=this;return function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}(i.default.mark((function _callee(){var l;return i.default.wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:if(void 0===(l=o._map[t])&&void 0!==r&&void 0===(l=o._map[r])&&void 0!==a&&(l=o._map[a]),!(l instanceof h&&o.xref)){i.next=4;break}return i.abrupt("return",o.xref.fetchAsync(l,o.suppressEncryption));case 4:return i.abrupt("return",l);case 5:case"end":return i.stop()}}),_callee)})))()},getArray:function getArray(t,r,a){var i=this.get(t,r,a);if(!Array.isArray(i)||!this.xref)return i;for(var o=0,l=(i=i.slice()).length;o<l;o++)i[o]instanceof h&&(i[o]=this.xref.fetch(i[o],this.suppressEncryption));return i},getRaw:function Dict_getRaw(t){return this._map[t]},getKeys:function Dict_getKeys(){return Object.keys(this._map)},set:function Dict_set(t,r){this._map[t]=r},has:function Dict_has(t){return void 0!==this._map[t]},forEach:function Dict_forEach(t){for(var r in this._map)t(r,this.get(r))}},Dict.empty=new Dict(null),Dict.merge=function(t,r){for(var a=new Dict(t),i=0,o=r.length;i<o;i++){var l=r[i];if(isDict(l))for(var c in l._map)void 0===a._map[c]&&(a._map[c]=l._map[c])}return a},Dict}();r.Dict=u;var h=function RefClosure(){var t=Object.create(null);function Ref(t,r){this.num=t,this.gen=r}return Ref.prototype={toString:function Ref_toString(){return 0===this.gen?"".concat(this.num,"R"):"".concat(this.num,"R").concat(this.gen)}},Ref.get=function(r,a){var i=0===a?"".concat(r,"R"):"".concat(r,"R").concat(a),o=t[i];return o||(t[i]=new Ref(r,a))},Ref._clearCache=function(){t=Object.create(null)},Ref}();r.Ref=h;var d=function RefSetClosure(){function RefSet(){this.dict=Object.create(null)}return RefSet.prototype={has:function RefSet_has(t){return t.toString()in this.dict},put:function RefSet_put(t){this.dict[t.toString()]=!0},remove:function RefSet_remove(t){delete this.dict[t.toString()]}},RefSet}();r.RefSet=d;var p=function RefSetCacheClosure(){function RefSetCache(){this.dict=Object.create(null)}return RefSetCache.prototype={get size(){return Object.keys(this.dict).length},get:function RefSetCache_get(t){return this.dict[t.toString()]},has:function RefSetCache_has(t){return t.toString()in this.dict},put:function RefSetCache_put(t,r){this.dict[t.toString()]=r},putAlias:function RefSetCache_putAlias(t,r){this.dict[t.toString()]=this.get(r)},forEach:function RefSetCache_forEach(t){for(var r in this.dict)t(this.dict[r])},clear:function RefSetCache_clear(){this.dict=Object.create(null)}},RefSetCache}();function isName(t,r){return t instanceof l&&(void 0===r||t.name===r)}function isDict(t,r){return t instanceof u&&(void 0===r||isName(t.get("Type"),r))}r.RefSetCache=p},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.NetworkPdfManager=r.LocalPdfManager=void 0;var i=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(2)),o=a(5),l=a(200),c=a(201),u=a(202),h=a(205);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t})(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var a,i=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(t):r}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function asyncGeneratorStep(t,r,a,i,o,l,c){try{var u=t[l](c),h=u.value}catch(t){return void a(t)}u.done?r(h):Promise.resolve(h).then(i,o)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}var d=function(){function BasePdfManager(){_classCallCheck(this,BasePdfManager),this.constructor===BasePdfManager&&(0,o.unreachable)("Cannot initialize BasePdfManager.")}var t;return _createClass(BasePdfManager,[{key:"onLoadedStream",value:function onLoadedStream(){(0,o.unreachable)("Abstract method `onLoadedStream` called")}},{key:"ensureDoc",value:function ensureDoc(t,r){return this.ensure(this.pdfDocument,t,r)}},{key:"ensureXRef",value:function ensureXRef(t,r){return this.ensure(this.pdfDocument.xref,t,r)}},{key:"ensureCatalog",value:function ensureCatalog(t,r){return this.ensure(this.pdfDocument.catalog,t,r)}},{key:"getPage",value:function getPage(t){return this.pdfDocument.getPage(t)}},{key:"fontFallback",value:function fontFallback(t,r){return this.pdfDocument.fontFallback(t,r)}},{key:"cleanup",value:function cleanup(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.pdfDocument.cleanup(t)}},{key:"ensure",value:(t=_asyncToGenerator(i.default.mark((function _callee(t,r,a){return i.default.wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:(0,o.unreachable)("Abstract method `ensure` called");case 1:case"end":return t.stop()}}),_callee)}))),function ensure(r,a,i){return t.apply(this,arguments)})},{key:"requestRange",value:function requestRange(t,r){(0,o.unreachable)("Abstract method `requestRange` called")}},{key:"requestLoadedStream",value:function requestLoadedStream(){(0,o.unreachable)("Abstract method `requestLoadedStream` called")}},{key:"sendProgressiveData",value:function sendProgressiveData(t){(0,o.unreachable)("Abstract method `sendProgressiveData` called")}},{key:"updatePassword",value:function updatePassword(t){this._password=t}},{key:"terminate",value:function terminate(t){(0,o.unreachable)("Abstract method `terminate` called")}},{key:"docId",get:function get(){return this._docId}},{key:"password",get:function get(){return this._password}},{key:"docBaseUrl",get:function get(){var t=null;if(this._docBaseUrl){var r=(0,o.createValidAbsoluteUrl)(this._docBaseUrl);r?t=r.href:(0,o.warn)('Invalid absolute docBaseUrl: "'.concat(this._docBaseUrl,'".'))}return(0,o.shadow)(this,"docBaseUrl",t)}}]),BasePdfManager}(),p=function(t){_inherits(LocalPdfManager,t);var r,a=_createSuper(LocalPdfManager);function LocalPdfManager(t,r,i,o,l){var c;_classCallCheck(this,LocalPdfManager),(c=a.call(this))._docId=t,c._password=i,c._docBaseUrl=l,c.evaluatorOptions=o;var d=new h.Stream(r);return c.pdfDocument=new u.PDFDocument(_assertThisInitialized(c),d),c._loadedStreamPromise=Promise.resolve(d),c}return _createClass(LocalPdfManager,[{key:"ensure",value:(r=_asyncToGenerator(i.default.mark((function _callee2(t,r,a){var o;return i.default.wrap((function _callee2$(i){for(;;)switch(i.prev=i.next){case 0:if("function"!=typeof(o=t[r])){i.next=3;break}return i.abrupt("return",o.apply(t,a));case 3:return i.abrupt("return",o);case 4:case"end":return i.stop()}}),_callee2)}))),function ensure(t,a,i){return r.apply(this,arguments)})},{key:"requestRange",value:function requestRange(t,r){return Promise.resolve()}},{key:"requestLoadedStream",value:function requestLoadedStream(){}},{key:"onLoadedStream",value:function onLoadedStream(){return this._loadedStreamPromise}},{key:"terminate",value:function terminate(t){}}]),LocalPdfManager}(d);r.LocalPdfManager=p;var m=function(t){_inherits(NetworkPdfManager,t);var r,a=_createSuper(NetworkPdfManager);function NetworkPdfManager(t,r,i,o,c){var h;return _classCallCheck(this,NetworkPdfManager),(h=a.call(this))._docId=t,h._password=i.password,h._docBaseUrl=c,h.msgHandler=i.msgHandler,h.evaluatorOptions=o,h.streamManager=new l.ChunkedStreamManager(r,{msgHandler:i.msgHandler,length:i.length,disableAutoFetch:i.disableAutoFetch,rangeChunkSize:i.rangeChunkSize}),h.pdfDocument=new u.PDFDocument(_assertThisInitialized(h),h.streamManager.getStream()),h}return _createClass(NetworkPdfManager,[{key:"ensure",value:(r=_asyncToGenerator(i.default.mark((function _callee3(t,r,a){var o;return i.default.wrap((function _callee3$(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,"function"!=typeof(o=t[r])){i.next=4;break}return i.abrupt("return",o.apply(t,a));case 4:return i.abrupt("return",o);case 7:if(i.prev=7,i.t0=i.catch(0),i.t0 instanceof c.MissingDataException){i.next=11;break}throw i.t0;case 11:return i.next=13,this.requestRange(i.t0.begin,i.t0.end);case 13:return i.abrupt("return",this.ensure(t,r,a));case 14:case"end":return i.stop()}}),_callee3,this,[[0,7]])}))),function ensure(t,a,i){return r.apply(this,arguments)})},{key:"requestRange",value:function requestRange(t,r){return this.streamManager.requestRange(t,r)}},{key:"requestLoadedStream",value:function requestLoadedStream(){this.streamManager.requestAllChunks()}},{key:"sendProgressiveData",value:function sendProgressiveData(t){this.streamManager.onReceiveData({chunk:t})}},{key:"onLoadedStream",value:function onLoadedStream(){return this.streamManager.onLoadedStream()}},{key:"terminate",value:function terminate(t){this.streamManager.abort(t)}}]),NetworkPdfManager}(d);r.NetworkPdfManager=m},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ChunkedStreamManager=r.ChunkedStream=void 0;var i=a(5),o=a(201);function _createForOfIteratorHelper(t,r){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){a=t[Symbol.iterator]()},n:function n(){var t=a.next();return c=t.done,t},e:function e(t){u=!0,l=t},f:function f(){try{c||null==a.return||a.return()}finally{if(u)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}var l=function(){function ChunkedStream(t,r,a){_classCallCheck(this,ChunkedStream),this.bytes=new Uint8Array(t),this.start=0,this.pos=0,this.end=t,this.chunkSize=r,this.loadedChunks=[],this.numChunksLoaded=0,this.numChunks=Math.ceil(t/r),this.manager=a,this.progressiveDataLength=0,this.lastSuccessfulEnsureByteChunk=-1}return _createClass(ChunkedStream,[{key:"getMissingChunks",value:function getMissingChunks(){for(var t=[],r=0,a=this.numChunks;r<a;++r)this.loadedChunks[r]||t.push(r);return t}},{key:"getBaseStreams",value:function getBaseStreams(){return[this]}},{key:"allChunksLoaded",value:function allChunksLoaded(){return this.numChunksLoaded===this.numChunks}},{key:"onReceiveData",value:function onReceiveData(t,r){var a=this.chunkSize;if(t%a!=0)throw new Error("Bad begin offset: ".concat(t));var i=t+r.byteLength;if(i%a!=0&&i!==this.bytes.length)throw new Error("Bad end offset: ".concat(i));this.bytes.set(new Uint8Array(r),t);for(var o=Math.floor(t/a),l=Math.floor((i-1)/a)+1,c=o;c<l;++c)this.loadedChunks[c]||(this.loadedChunks[c]=!0,++this.numChunksLoaded)}},{key:"onReceiveProgressiveData",value:function onReceiveProgressiveData(t){var r=this.progressiveDataLength,a=Math.floor(r/this.chunkSize);this.bytes.set(new Uint8Array(t),r),r+=t.byteLength,this.progressiveDataLength=r;for(var i=r>=this.end?this.numChunks:Math.floor(r/this.chunkSize),o=a;o<i;++o)this.loadedChunks[o]||(this.loadedChunks[o]=!0,++this.numChunksLoaded)}},{key:"ensureByte",value:function ensureByte(t){if(!(t<this.progressiveDataLength)){var r=Math.floor(t/this.chunkSize);if(r!==this.lastSuccessfulEnsureByteChunk){if(!this.loadedChunks[r])throw new o.MissingDataException(t,t+1);this.lastSuccessfulEnsureByteChunk=r}}}},{key:"ensureRange",value:function ensureRange(t,r){if(!(t>=r||r<=this.progressiveDataLength))for(var a=this.chunkSize,i=Math.floor(t/a),l=Math.floor((r-1)/a)+1,c=i;c<l;++c)if(!this.loadedChunks[c])throw new o.MissingDataException(t,r)}},{key:"nextEmptyChunk",value:function nextEmptyChunk(t){for(var r=this.numChunks,a=0;a<r;++a){var i=(t+a)%r;if(!this.loadedChunks[i])return i}return null}},{key:"hasChunk",value:function hasChunk(t){return!!this.loadedChunks[t]}},{key:"getByte",value:function getByte(){var t=this.pos;return t>=this.end?-1:(t>=this.progressiveDataLength&&this.ensureByte(t),this.bytes[this.pos++])}},{key:"getUint16",value:function getUint16(){var t=this.getByte(),r=this.getByte();return-1===t||-1===r?-1:(t<<8)+r}},{key:"getInt32",value:function getInt32(){return(this.getByte()<<24)+(this.getByte()<<16)+(this.getByte()<<8)+this.getByte()}},{key:"getBytes",value:function getBytes(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.bytes,i=this.pos,o=this.end;if(!t){o>this.progressiveDataLength&&this.ensureRange(i,o);var l=a.subarray(i,o);return r?new Uint8ClampedArray(l):l}var c=i+t;c>o&&(c=o),c>this.progressiveDataLength&&this.ensureRange(i,c),this.pos=c;var u=a.subarray(i,c);return r?new Uint8ClampedArray(u):u}},{key:"peekByte",value:function peekByte(){var t=this.getByte();return-1!==t&&this.pos--,t}},{key:"peekBytes",value:function peekBytes(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.getBytes(t,r);return this.pos-=a.length,a}},{key:"getByteRange",value:function getByteRange(t,r){return t<0&&(t=0),r>this.end&&(r=this.end),r>this.progressiveDataLength&&this.ensureRange(t,r),this.bytes.subarray(t,r)}},{key:"skip",value:function skip(t){t||(t=1),this.pos+=t}},{key:"reset",value:function reset(){this.pos=this.start}},{key:"moveStart",value:function moveStart(){this.start=this.pos}},{key:"makeSubStream",value:function makeSubStream(t,r,a){function ChunkedStreamSubstream(){}r?t+r>this.progressiveDataLength&&this.ensureRange(t,t+r):t>=this.progressiveDataLength&&this.ensureByte(t),ChunkedStreamSubstream.prototype=Object.create(this),ChunkedStreamSubstream.prototype.getMissingChunks=function(){for(var t=this.chunkSize,r=Math.floor(this.start/t),a=Math.floor((this.end-1)/t)+1,i=[],o=r;o<a;++o)this.loadedChunks[o]||i.push(o);return i},ChunkedStreamSubstream.prototype.allChunksLoaded=function(){return this.numChunksLoaded===this.numChunks||0===this.getMissingChunks().length};var i=new ChunkedStreamSubstream;return i.pos=i.start=t,i.end=t+r||this.end,i.dict=a,i}},{key:"length",get:function get(){return this.end-this.start}},{key:"isEmpty",get:function get(){return 0===this.length}}]),ChunkedStream}();r.ChunkedStream=l;var c=function(){function ChunkedStreamManager(t,r){_classCallCheck(this,ChunkedStreamManager),this.length=r.length,this.chunkSize=r.rangeChunkSize,this.stream=new l(this.length,this.chunkSize,this),this.pdfNetworkStream=t,this.disableAutoFetch=r.disableAutoFetch,this.msgHandler=r.msgHandler,this.currRequestId=0,this.chunksNeededByRequest=Object.create(null),this.requestsByChunk=Object.create(null),this.promisesByRequest=Object.create(null),this.progressiveDataLength=0,this.aborted=!1,this._loadedStreamCapability=(0,i.createPromiseCapability)()}return _createClass(ChunkedStreamManager,[{key:"onLoadedStream",value:function onLoadedStream(){return this._loadedStreamCapability.promise}},{key:"sendRequest",value:function sendRequest(t,r){var a=this,o=this.pdfNetworkStream.getRangeReader(t,r);o.isStreamingSupported||(o.onProgress=this.onProgress.bind(this));var l=[],c=0;new Promise((function(t,r){o.read().then((function readChunk(u){try{if(!u.done){var h=u.value;return l.push(h),c+=(0,i.arrayByteLength)(h),o.isStreamingSupported&&a.onProgress({loaded:c}),void o.read().then(readChunk,r)}var d=(0,i.arraysToBytes)(l);l=null,t(d)}catch(t){r(t)}}),r)})).then((function(r){a.aborted||a.onReceiveData({chunk:r,begin:t})}))}},{key:"requestAllChunks",value:function requestAllChunks(){var t=this.stream.getMissingChunks();return this._requestChunks(t),this._loadedStreamCapability.promise}},{key:"_requestChunks",value:function _requestChunks(t){var r=this.currRequestId++,a=Object.create(null);this.chunksNeededByRequest[r]=a;var o,l=_createForOfIteratorHelper(t);try{for(l.s();!(o=l.n()).done;){var c=o.value;this.stream.hasChunk(c)||(a[c]=!0)}}catch(t){l.e(t)}finally{l.f()}if((0,i.isEmptyObj)(a))return Promise.resolve();var u=(0,i.createPromiseCapability)();this.promisesByRequest[r]=u;var h=[];for(var d in a)(d|=0)in this.requestsByChunk||(this.requestsByChunk[d]=[],h.push(d)),this.requestsByChunk[d].push(r);if(!h.length)return u.promise;var p,m=_createForOfIteratorHelper(this.groupChunks(h));try{for(m.s();!(p=m.n()).done;){var g=p.value,b=g.beginChunk*this.chunkSize,y=Math.min(g.endChunk*this.chunkSize,this.length);this.sendRequest(b,y)}}catch(t){m.e(t)}finally{m.f()}return u.promise}},{key:"getStream",value:function getStream(){return this.stream}},{key:"requestRange",value:function requestRange(t,r){r=Math.min(r,this.length);for(var a=this.getBeginChunk(t),i=this.getEndChunk(r),o=[],l=a;l<i;++l)o.push(l);return this._requestChunks(o)}},{key:"requestRanges",value:function requestRanges(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=[],i=_createForOfIteratorHelper(r);try{for(i.s();!(t=i.n()).done;)for(var o=t.value,l=this.getBeginChunk(o.begin),c=this.getEndChunk(o.end),u=l;u<c;++u)a.includes(u)||a.push(u)}catch(t){i.e(t)}finally{i.f()}return a.sort((function(t,r){return t-r})),this._requestChunks(a)}},{key:"groupChunks",value:function groupChunks(t){for(var r=[],a=-1,i=-1,o=0,l=t.length;o<l;++o){var c=t[o];a<0&&(a=c),i>=0&&i+1!==c&&(r.push({beginChunk:a,endChunk:i+1}),a=c),o+1===t.length&&r.push({beginChunk:a,endChunk:c+1}),i=c}return r}},{key:"onProgress",value:function onProgress(t){this.msgHandler.send("DocProgress",{loaded:this.stream.numChunksLoaded*this.chunkSize+t.loaded,total:this.length})}},{key:"onReceiveData",value:function onReceiveData(t){var r=t.chunk,a=void 0===t.begin,o=a?this.progressiveDataLength:t.begin,l=o+r.byteLength,c=Math.floor(o/this.chunkSize),u=l<this.length?Math.floor(l/this.chunkSize):Math.ceil(l/this.chunkSize);a?(this.stream.onReceiveProgressiveData(r),this.progressiveDataLength=l):this.stream.onReceiveData(o,r),this.stream.allChunksLoaded()&&this._loadedStreamCapability.resolve(this.stream);for(var h=[],d=c;d<u;++d){var p=this.requestsByChunk[d]||[];delete this.requestsByChunk[d];var m,g=_createForOfIteratorHelper(p);try{for(g.s();!(m=g.n()).done;){var b=m.value,y=this.chunksNeededByRequest[b];d in y&&delete y[d],(0,i.isEmptyObj)(y)&&h.push(b)}}catch(t){g.e(t)}finally{g.f()}}if(!this.disableAutoFetch&&(0,i.isEmptyObj)(this.requestsByChunk)){var v;if(1===this.stream.numChunksLoaded){var S=this.stream.numChunks-1;this.stream.hasChunk(S)||(v=S)}else v=this.stream.nextEmptyChunk(u);Number.isInteger(v)&&this._requestChunks([v])}for(var k=0,w=h;k<w.length;k++){var C=w[k],x=this.promisesByRequest[C];delete this.promisesByRequest[C],x.resolve()}this.msgHandler.send("DocProgress",{loaded:this.stream.numChunksLoaded*this.chunkSize,total:this.length})}},{key:"onError",value:function onError(t){this._loadedStreamCapability.reject(t)}},{key:"getBeginChunk",value:function getBeginChunk(t){return Math.floor(t/this.chunkSize)}},{key:"getEndChunk",value:function getEndChunk(t){return Math.floor((t-1)/this.chunkSize)+1}},{key:"abort",value:function abort(t){for(var r in this.aborted=!0,this.pdfNetworkStream&&this.pdfNetworkStream.cancelAllRequests(t),this.promisesByRequest)this.promisesByRequest[r].reject(t)}}]),ChunkedStreamManager}();r.ChunkedStreamManager=c},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getLookupTableFactory=function getLookupTableFactory(t){var r;return function(){return t&&(r=Object.create(null),t(r),t=null),r}},r.getInheritableProperty=function getInheritableProperty(t){var r,a=t.dict,o=t.key,l=t.getArray,c=void 0!==l&&l,u=t.stopWhenFound,h=void 0===u||u,d=0;for(;a;){var p=c?a.getArray(o):a.get(o);if(void 0!==p){if(h)return p;r||(r=[]),r.push(p)}if(++d>100){(0,i.warn)('getInheritableProperty: maximum loop count exceeded for "'.concat(o,'"'));break}a=a.get("Parent")}return r},r.toRomanNumerals=function toRomanNumerals(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,i.assert)(Number.isInteger(t)&&t>0,"The number should be a positive integer.");var a,o=[];for(;t>=1e3;)t-=1e3,o.push("M");a=t/100|0,t%=100,o.push(u[a]),a=t/10|0,t%=10,o.push(u[10+a]),o.push(u[20+t]);var l=o.join("");return r?l.toLowerCase():l},r.log2=function log2(t){if(t<=0)return 0;return Math.ceil(Math.log2(t))},r.readInt8=function readInt8(t,r){return t[r]<<24>>24},r.readUint16=function readUint16(t,r){return t[r]<<8|t[r+1]},r.readUint32=function readUint32(t,r){return(t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3])>>>0},r.isWhiteSpace=function isWhiteSpace(t){return 32===t||9===t||13===t||10===t},r.XRefParseException=r.XRefEntryException=r.MissingDataException=void 0;var i=a(5);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t})(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var a,i=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var o=function(t){_inherits(MissingDataException,t);var r=_createSuper(MissingDataException);function MissingDataException(t,a){var i;return _classCallCheck(this,MissingDataException),(i=r.call(this,"Missing data [".concat(t,", ").concat(a,")"))).begin=t,i.end=a,i}return MissingDataException}(i.BaseException);r.MissingDataException=o;var l=function(t){_inherits(XRefEntryException,t);var r=_createSuper(XRefEntryException);function XRefEntryException(){return _classCallCheck(this,XRefEntryException),r.apply(this,arguments)}return XRefEntryException}(i.BaseException);r.XRefEntryException=l;var c=function(t){_inherits(XRefParseException,t);var r=_createSuper(XRefParseException);function XRefParseException(){return _classCallCheck(this,XRefParseException),r.apply(this,arguments)}return XRefParseException}(i.BaseException);r.XRefParseException=c;var u=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"]},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PDFDocument=r.Page=void 0;var i=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(2)),o=a(5),l=a(203),c=a(198),u=a(201),h=a(205),d=a(218),p=a(215),m=a(204),g=a(219),b=a(220),y=a(234);function asyncGeneratorStep(t,r,a,i,o,l,c){try{var u=t[l](c),h=u.value}catch(t){return void a(t)}u.done?r(h):Promise.resolve(h).then(i,o)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var a=[],i=!0,o=!1,l=void 0;try{for(var c,u=t[Symbol.iterator]();!(i=(c=u.next()).done)&&(a.push(c.value),!r||a.length!==r);i=!0);}catch(t){o=!0,l=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw l}}return a}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(t,r){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){a=t[Symbol.iterator]()},n:function n(){var t=a.next();return c=t.done,t},e:function e(t){u=!0,l=t},f:function f(){try{c||null==a.return||a.return()}finally{if(u)throw l}}}}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}var v=[0,0,612,792];function isAnnotationRenderable(t,r){return"display"===r&&t.viewable||"print"===r&&t.printable}var S=function(){function Page(t){var r=t.pdfManager,a=t.xref,i=t.pageIndex,o=t.pageDict,l=t.ref,c=t.fontCache,u=t.builtInCMapCache,h=t.globalImageCache,d=t.pdfFunctionFactory;_classCallCheck(this,Page),this.pdfManager=r,this.pageIndex=i,this.pageDict=o,this.xref=a,this.ref=l,this.fontCache=c,this.builtInCMapCache=u,this.globalImageCache=h,this.pdfFunctionFactory=d,this.evaluatorOptions=r.evaluatorOptions,this.resourcesPromise=null;var p={obj:0};this.idFactory={createObjId:function createObjId(){return"p".concat(i,"_").concat(++p.obj)},getDocId:function getDocId(){return"g_".concat(r.docId)}}}return _createClass(Page,[{key:"_getInheritableProperty",value:function _getInheritableProperty(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=(0,u.getInheritableProperty)({dict:this.pageDict,key:t,getArray:r,stopWhenFound:!1});return Array.isArray(a)?1!==a.length&&(0,c.isDict)(a[0])?c.Dict.merge(this.xref,a):a[0]:a}},{key:"_getBoundingBox",value:function _getBoundingBox(t){var r=this._getInheritableProperty(t,!0);if(Array.isArray(r)&&4===r.length){if(r[2]-r[0]!=0&&r[3]-r[1]!=0)return r;(0,o.warn)("Empty /".concat(t," entry."))}return null}},{key:"getContentStream",value:function getContentStream(){var t,r=this.content;if(Array.isArray(r)){var a,i=this.xref,o=[],l=_createForOfIteratorHelper(r);try{for(l.s();!(a=l.n()).done;){var u=a.value;o.push(i.fetchIfRef(u))}}catch(t){l.e(t)}finally{l.f()}t=new h.StreamsSequenceStream(o)}else t=(0,c.isStream)(r)?r:new h.NullStream;return t}},{key:"loadResources",value:function loadResources(t){var r=this;return this.resourcesPromise||(this.resourcesPromise=this.pdfManager.ensure(this,"resources")),this.resourcesPromise.then((function(){return new l.ObjectLoader(r.resources,t,r.xref).load()}))}},{key:"getOperatorList",value:function getOperatorList(t){var r=this,a=t.handler,i=t.sink,l=t.task,c=t.intent,u=t.renderInteractiveForms,h=this.pdfManager.ensure(this,"getContentStream"),d=this.loadResources(["ExtGState","ColorSpace","Pattern","Shading","XObject","Font"]),p=new b.PartialEvaluator({xref:this.xref,handler:a,pageIndex:this.pageIndex,idFactory:this.idFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,globalImageCache:this.globalImageCache,options:this.evaluatorOptions,pdfFunctionFactory:this.pdfFunctionFactory}),m=Promise.all([h,d]).then((function(t){var o=_slicedToArray(t,1)[0],u=new g.OperatorList(c,i,r.pageIndex);return a.send("StartRenderPage",{transparency:p.hasBlendModes(r.resources),pageIndex:r.pageIndex,intent:c}),p.getOperatorList({stream:o,task:l,resources:r.resources,operatorList:u}).then((function(){return u}))}));return Promise.all([m,this._parsedAnnotations]).then((function(t){var r=_slicedToArray(t,2),a=r[0],i=r[1];if(0===i.length)return a.flush(!0),{length:a.totalLength};var h,d=[],m=_createForOfIteratorHelper(i);try{for(m.s();!(h=m.n()).done;){var g=h.value;isAnnotationRenderable(g,c)&&d.push(g.getOperatorList(p,l,u).catch((function(t){return(0,o.warn)("getOperatorList - ignoring annotation data during "+'"'.concat(l.name,'" task: "').concat(t,'".')),null})))}}catch(t){m.e(t)}finally{m.f()}return Promise.all(d).then((function(t){a.addOp(o.OPS.beginAnnotations,[]);var r,i=_createForOfIteratorHelper(t);try{for(i.s();!(r=i.n()).done;){var l=r.value;a.addOpList(l)}}catch(t){i.e(t)}finally{i.f()}return a.addOp(o.OPS.endAnnotations,[]),a.flush(!0),{length:a.totalLength}}))}))}},{key:"extractTextContent",value:function extractTextContent(t){var r=this,a=t.handler,i=t.task,o=t.normalizeWhitespace,l=t.sink,c=t.combineTextItems,u=this.pdfManager.ensure(this,"getContentStream"),h=this.loadResources(["ExtGState","XObject","Font"]);return Promise.all([u,h]).then((function(t){var u=_slicedToArray(t,1)[0];return new b.PartialEvaluator({xref:r.xref,handler:a,pageIndex:r.pageIndex,idFactory:r.idFactory,fontCache:r.fontCache,builtInCMapCache:r.builtInCMapCache,globalImageCache:r.globalImageCache,options:r.evaluatorOptions,pdfFunctionFactory:r.pdfFunctionFactory}).getTextContent({stream:u,task:i,resources:r.resources,normalizeWhitespace:o,combineTextItems:c,sink:l})}))}},{key:"getAnnotationsData",value:function getAnnotationsData(t){return this._parsedAnnotations.then((function(r){for(var a=[],i=0,o=r.length;i<o;i++)t&&!isAnnotationRenderable(r[i],t)||a.push(r[i].data);return a}))}},{key:"content",get:function get(){return this.pageDict.get("Contents")}},{key:"resources",get:function get(){return(0,o.shadow)(this,"resources",this._getInheritableProperty("Resources")||c.Dict.empty)}},{key:"mediaBox",get:function get(){return(0,o.shadow)(this,"mediaBox",this._getBoundingBox("MediaBox")||v)}},{key:"cropBox",get:function get(){return(0,o.shadow)(this,"cropBox",this._getBoundingBox("CropBox")||this.mediaBox)}},{key:"userUnit",get:function get(){var t=this.pageDict.get("UserUnit");return(!(0,o.isNum)(t)||t<=0)&&(t=1),(0,o.shadow)(this,"userUnit",t)}},{key:"view",get:function get(){var t,r=this.cropBox,a=this.mediaBox;if(r===a||(0,o.isArrayEqual)(r,a))t=a;else{var i=o.Util.intersect(r,a);i&&i[2]-i[0]!=0&&i[3]-i[1]!=0?t=i:(0,o.warn)("Empty /CropBox and /MediaBox intersection.")}return(0,o.shadow)(this,"view",t||a)}},{key:"rotate",get:function get(){var t=this._getInheritableProperty("Rotate")||0;return t%90!=0?t=0:t>=360?t%=360:t<0&&(t=(t%360+360)%360),(0,o.shadow)(this,"rotate",t)}},{key:"annotations",get:function get(){return(0,o.shadow)(this,"annotations",this._getInheritableProperty("Annots")||[])}},{key:"_parsedAnnotations",get:function get(){var t=this,r=this.pdfManager.ensure(this,"annotations").then((function(){var r,a=[],i=_createForOfIteratorHelper(t.annotations);try{for(i.s();!(r=i.n()).done;){var l=r.value;a.push(d.AnnotationFactory.create(t.xref,l,t.pdfManager,t.idFactory).catch((function(t){return(0,o.warn)('_parsedAnnotations: "'.concat(t,'".')),null})))}}catch(t){i.e(t)}finally{i.f()}return Promise.all(a).then((function(t){return t.filter((function(t){return!!t}))}))}));return(0,o.shadow)(this,"_parsedAnnotations",r)}}]),Page}();r.Page=S;var k=new Uint8Array([37,80,68,70,45]),w=new Uint8Array([115,116,97,114,116,120,114,101,102]),C=new Uint8Array([101,110,100,111,98,106]),x=/^[1-9]\.[0-9]$/;function find(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1024,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=r.length,l=t.peekBytes(a),c=l.length-o;if(c<=0)return!1;if(i)for(var u=o-1,h=l.length-1;h>=u;){for(var d=0;d<o&&l[h-d]===r[u-d];)d++;if(d>=o)return t.pos+=h-u,!0;h--}else for(var p=0;p<=c;){for(var m=0;m<o&&l[p+m]===r[m];)m++;if(m>=o)return t.pos+=p,!0;p++}return!1}var _=function(){function PDFDocument(t,r){var a;if(_classCallCheck(this,PDFDocument),(0,c.isStream)(r))a=r;else{if(!(0,o.isArrayBuffer)(r))throw new Error("PDFDocument: Unknown argument type");a=new h.Stream(r)}if(a.length<=0)throw new o.InvalidPDFException("The PDF file is empty, i.e. its size is zero bytes.");this.pdfManager=t,this.stream=a,this.xref=new l.XRef(a,t),this.pdfFunctionFactory=new y.PDFFunctionFactory({xref:this.xref,isEvalSupported:t.evaluatorOptions.isEvalSupported}),this._pagePromises=[]}var t;return _createClass(PDFDocument,[{key:"parse",value:function parse(t){this.setup(t);var r=this.catalog.catDict.get("Version");(0,c.isName)(r)&&(this.pdfFormatVersion=r.name);try{if(this.acroForm=this.catalog.catDict.get("AcroForm"),this.acroForm){this.xfa=this.acroForm.get("XFA");var a=this.acroForm.get("Fields");Array.isArray(a)&&0!==a.length||this.xfa||(this.acroForm=null)}}catch(t){if(t instanceof u.MissingDataException)throw t;(0,o.info)("Cannot fetch AcroForm entry; assuming no AcroForms are present"),this.acroForm=null}try{var i=this.catalog.catDict.get("Collection");(0,c.isDict)(i)&&i.getKeys().length>0&&(this.collection=i)}catch(t){if(t instanceof u.MissingDataException)throw t;(0,o.info)("Cannot fetch Collection dictionary.")}}},{key:"checkHeader",value:function checkHeader(){var t=this.stream;if(t.reset(),find(t,k)){t.moveStart();for(var r,a="";(r=t.getByte())>32&&!(a.length>=12);)a+=String.fromCharCode(r);this.pdfFormatVersion||(this.pdfFormatVersion=a.substring(5))}}},{key:"parseStartXRef",value:function parseStartXRef(){this.xref.setStartXRef(this.startXRef)}},{key:"setup",value:function setup(t){this.xref.parse(t),this.catalog=new l.Catalog(this.pdfManager,this.xref)}},{key:"_getLinearizationPage",value:function _getLinearizationPage(t){var r=this.catalog,a=this.linearization,i=c.Ref.get(a.objectNumberFirst,0);return this.xref.fetchAsync(i).then((function(t){if((0,c.isDict)(t,"Page")||(0,c.isDict)(t)&&!t.has("Type")&&t.has("Contents"))return i&&!r.pageKidsCountCache.has(i)&&r.pageKidsCountCache.put(i,1),[t,i];throw new o.FormatError("The Linearization dictionary doesn't point to a valid Page dictionary.")})).catch((function(a){return(0,o.info)(a),r.getPageDict(t)}))}},{key:"getPage",value:function getPage(t){var r=this;if(void 0!==this._pagePromises[t])return this._pagePromises[t];var a=this.catalog,i=this.linearization,o=i&&i.pageFirst===t?this._getLinearizationPage(t):a.getPageDict(t);return this._pagePromises[t]=o.then((function(i){var o=_slicedToArray(i,2),l=o[0],c=o[1];return new S({pdfManager:r.pdfManager,xref:r.xref,pageIndex:t,pageDict:l,ref:c,fontCache:a.fontCache,builtInCMapCache:a.builtInCMapCache,globalImageCache:a.globalImageCache,pdfFunctionFactory:r.pdfFunctionFactory})}))}},{key:"checkFirstPage",value:function checkFirstPage(){var t=this;return this.getPage(0).catch(function(){var r=_asyncToGenerator(i.default.mark((function _callee(r){return i.default.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:if(!(r instanceof u.XRefEntryException)){a.next=5;break}return t._pagePromises.length=0,a.next=4,t.cleanup();case 4:throw new u.XRefParseException;case 5:case"end":return a.stop()}}),_callee)})));return function(t){return r.apply(this,arguments)}}())}},{key:"fontFallback",value:function fontFallback(t,r){return this.catalog.fontFallback(t,r)}},{key:"cleanup",value:(t=_asyncToGenerator(i.default.mark((function _callee2(){var t,r=arguments;return i.default.wrap((function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:return t=r.length>0&&void 0!==r[0]&&r[0],a.abrupt("return",this.catalog?this.catalog.cleanup(t):(0,c.clearPrimitiveCaches)());case 2:case"end":return a.stop()}}),_callee2,this)}))),function cleanup(){return t.apply(this,arguments)})},{key:"linearization",get:function get(){var t=null;try{t=m.Linearization.create(this.stream)}catch(t){if(t instanceof u.MissingDataException)throw t;(0,o.info)(t)}return(0,o.shadow)(this,"linearization",t)}},{key:"startXRef",get:function get(){var t=this.stream,r=0;if(this.linearization)t.reset(),find(t,C)&&(r=t.pos+6-t.start);else{for(var a=w.length,i=!1,l=t.end;!i&&l>0;)(l-=1024-a)<0&&(l=0),t.pos=l,i=find(t,w,1024,!0);if(i){var c;t.skip(9);do{c=t.getByte()}while((0,u.isWhiteSpace)(c));for(var h="";c>=32&&c<=57;)h+=String.fromCharCode(c),c=t.getByte();r=parseInt(h,10),isNaN(r)&&(r=0)}}return(0,o.shadow)(this,"startXRef",r)}},{key:"numPages",get:function get(){var t=this.linearization,r=t?t.numPages:this.catalog.numPages;return(0,o.shadow)(this,"numPages",r)}},{key:"documentInfo",get:function get(){var t={Title:o.isString,Author:o.isString,Subject:o.isString,Keywords:o.isString,Creator:o.isString,Producer:o.isString,CreationDate:o.isString,ModDate:o.isString,Trapped:c.isName},r=this.pdfFormatVersion;"string"==typeof r&&x.test(r)||((0,o.warn)("Invalid PDF header version number: ".concat(r)),r=null);var a,i={PDFFormatVersion:r,IsLinearized:!!this.linearization,IsAcroFormPresent:!!this.acroForm,IsXFAPresent:!!this.xfa,IsCollectionPresent:!!this.collection};try{a=this.xref.trailer.get("Info")}catch(t){if(t instanceof u.MissingDataException)throw t;(0,o.info)("The document information dictionary is invalid.")}if((0,c.isDict)(a)){var l,h=_createForOfIteratorHelper(a.getKeys());try{for(h.s();!(l=h.n()).done;){var d=l.value,p=a.get(d);if(t[d])t[d](p)?i[d]="string"!=typeof p?p:(0,o.stringToPDFString)(p):(0,o.info)('Bad value in document info for "'.concat(d,'".'));else if("string"==typeof d){var m=void 0;if((0,o.isString)(p))m=(0,o.stringToPDFString)(p);else{if(!((0,c.isName)(p)||(0,o.isNum)(p)||(0,o.isBool)(p))){(0,o.info)('Unsupported value in document info for (custom) "'.concat(d,'".'));continue}m=p}i.Custom||(i.Custom=Object.create(null)),i.Custom[d]=m}}}catch(t){h.e(t)}finally{h.f()}}return(0,o.shadow)(this,"documentInfo",i)}},{key:"fingerprint",get:function get(){for(var t,r=this.xref.trailer.get("ID"),a=[],i=0,l=(t=Array.isArray(r)&&r[0]&&(0,o.isString)(r[0])&&"\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"!==r[0]?(0,o.stringToBytes)(r[0]):(0,p.calculateMD5)(this.stream.getByteRange(0,1024),0,1024)).length;i<l;i++){var c=t[i].toString(16);a.push(c.padStart(2,"0"))}return(0,o.shadow)(this,"fingerprint",a.join(""))}}]),PDFDocument}();r.PDFDocument=_},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FileSpec=r.XRef=r.ObjectLoader=r.Catalog=void 0;var i=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(2)),o=a(5),l=a(198),c=a(204),u=a(201),h=a(215),d=a(216),p=a(217);function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t})(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var a,i=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function asyncGeneratorStep(t,r,a,i,o,l,c){try{var u=t[l](c),h=u.value}catch(t){return void a(t)}u.done?r(h):Promise.resolve(h).then(i,o)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var a=[],i=!0,o=!1,l=void 0;try{for(var c,u=t[Symbol.iterator]();!(i=(c=u.next()).done)&&(a.push(c.value),!r||a.length!==r);i=!0);}catch(t){o=!0,l=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw l}}return a}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _createForOfIteratorHelper(t,r){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){a=t[Symbol.iterator]()},n:function n(){var t=a.next();return c=t.done,t},e:function e(t){u=!0,l=t},f:function f(){try{c||null==a.return||a.return()}finally{if(u)throw l}}}}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}function fetchDestination(t){return(0,l.isDict)(t)?t.get("D"):t}var m=function(){function Catalog(t,r){if(_classCallCheck(this,Catalog),this.pdfManager=t,this.xref=r,this.catDict=r.getCatalogObj(),!(0,l.isDict)(this.catDict))throw new o.FormatError("Catalog object is not a dictionary.");this.fontCache=new l.RefSetCache,this.builtInCMapCache=new Map,this.globalImageCache=new p.GlobalImageCache,this.pageKidsCountCache=new l.RefSetCache}return _createClass(Catalog,[{key:"_readDocumentOutline",value:function _readDocumentOutline(){var t=this.catDict.get("Outlines");if(!(0,l.isDict)(t))return null;if(t=t.getRaw("First"),!(0,l.isRef)(t))return null;var r={items:[]},a=[{obj:t,parent:r}],i=new l.RefSet;i.put(t);for(var c=this.xref,u=new Uint8ClampedArray(3);a.length>0;){var h=a.shift(),p=c.fetchIfRef(h.obj);if(null!==p){if(!p.has("Title"))throw new o.FormatError("Invalid outline item encountered.");var m={url:null,dest:null};Catalog.parseDestDictionary({destDict:p,resultObj:m,docBaseUrl:this.pdfManager.docBaseUrl});var g=p.get("Title"),b=p.get("F")||0,y=p.getArray("C"),v=p.get("Count"),S=u;!Array.isArray(y)||3!==y.length||0===y[0]&&0===y[1]&&0===y[2]||(S=d.ColorSpace.singletons.rgb.getRgb(y,0));var k={dest:m.dest,url:m.url,unsafeUrl:m.unsafeUrl,newWindow:m.newWindow,title:(0,o.stringToPDFString)(g),color:S,count:Number.isInteger(v)?v:void 0,bold:!!(2&b),italic:!!(1&b),items:[]};h.parent.items.push(k),t=p.getRaw("First"),(0,l.isRef)(t)&&!i.has(t)&&(a.push({obj:t,parent:k}),i.put(t)),t=p.getRaw("Next"),(0,l.isRef)(t)&&!i.has(t)&&(a.push({obj:t,parent:h.parent}),i.put(t))}}return r.items.length>0?r.items:null}},{key:"_readPermissions",value:function _readPermissions(){var t=this.xref.trailer.get("Encrypt");if(!(0,l.isDict)(t))return null;var r=t.get("P");if(!(0,o.isNum)(r))return null;r+=Math.pow(2,32);var a=[];for(var i in o.PermissionFlag){var c=o.PermissionFlag[i];r&c&&a.push(c)}return a}},{key:"getDestination",value:function getDestination(t){var r=this._readDests();return r instanceof y||r instanceof l.Dict?fetchDestination(r.get(t)||null):null}},{key:"_readDests",value:function _readDests(){var t=this.catDict.get("Names");return t&&t.has("Dests")?new y(t.getRaw("Dests"),this.xref):this.catDict.has("Dests")?this.catDict.get("Dests"):void 0}},{key:"_readPageLabels",value:function _readPageLabels(){var t=this.catDict.getRaw("PageLabels");if(!t)return null;for(var r=new Array(this.numPages),a=null,i="",c=new v(t,this.xref).getAll(),h="",d=1,p=0,m=this.numPages;p<m;p++){if(p in c){var g=c[p];if(!(0,l.isDict)(g))throw new o.FormatError("PageLabel is not a dictionary.");if(g.has("Type")&&!(0,l.isName)(g.get("Type"),"PageLabel"))throw new o.FormatError("Invalid type in PageLabel dictionary.");if(g.has("S")){var b=g.get("S");if(!(0,l.isName)(b))throw new o.FormatError("Invalid style in PageLabel dictionary.");a=b.name}else a=null;if(g.has("P")){var y=g.get("P");if(!(0,o.isString)(y))throw new o.FormatError("Invalid prefix in PageLabel dictionary.");i=(0,o.stringToPDFString)(y)}else i="";if(g.has("St")){var S=g.get("St");if(!(Number.isInteger(S)&&S>=1))throw new o.FormatError("Invalid start in PageLabel dictionary.");d=S}else d=1}switch(a){case"D":h=d;break;case"R":case"r":h=(0,u.toRomanNumerals)(d,"r"===a);break;case"A":case"a":for(var k="a"===a?97:65,w=d-1,C=String.fromCharCode(k+w%26),x=[],_=0,A=w/26|0;_<=A;_++)x.push(C);h=x.join("");break;default:if(a)throw new o.FormatError('Invalid style "'.concat(a,'" in PageLabel dictionary.'));h=""}r[p]=i+h,d++}return r}},{key:"fontFallback",value:function fontFallback(t,r){var a=[];return this.fontCache.forEach((function(t){a.push(t)})),Promise.all(a).then((function(a){var i,o=_createForOfIteratorHelper(a);try{for(o.s();!(i=o.n()).done;){var l=i.value;if(l.loadedName===t)return void l.fallback(r)}}catch(t){o.e(t)}finally{o.f()}}))}},{key:"cleanup",value:function cleanup(){var t=this,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,l.clearPrimitiveCaches)(),this.globalImageCache.clear(r),this.pageKidsCountCache.clear();var a=[];return this.fontCache.forEach((function(t){a.push(t)})),Promise.all(a).then((function(r){var a,i=_createForOfIteratorHelper(r);try{for(i.s();!(a=i.n()).done;){delete a.value.dict.translated}}catch(t){i.e(t)}finally{i.f()}t.fontCache.clear(),t.builtInCMapCache.clear()}))}},{key:"getPageDict",value:function getPageDict(t){var r,a=(0,o.createPromiseCapability)(),i=[this.catDict.getRaw("Pages")],c=new l.RefSet,u=this.xref,h=this.pageKidsCountCache,d=0;return function next(){for(var p=function _loop(){var p=i.pop();if((0,l.isRef)(p))return(r=h.get(p))>0&&d+r<t?(d+=r,"continue"):c.has(p)?(a.reject(new o.FormatError("Pages tree contains circular reference.")),{v:void 0}):(c.put(p),u.fetchAsync(p).then((function(r){(0,l.isDict)(r,"Page")||(0,l.isDict)(r)&&!r.has("Kids")?t===d?(p&&!h.has(p)&&h.put(p,1),a.resolve([r,p])):(d++,next()):(i.push(r),next())}),a.reject),{v:void 0});if(!(0,l.isDict)(p))return a.reject(new o.FormatError("Page dictionary kid reference points to wrong type of object.")),{v:void 0};if(r=p.get("Count"),Number.isInteger(r)&&r>=0){var m=p.objId;if(m&&!h.has(m)&&h.put(m,r),d+r<=t)return d+=r,"continue"}var g=p.get("Kids");if(!Array.isArray(g))return(0,l.isName)(p.get("Type"),"Page")||!p.has("Type")&&p.has("Contents")?d===t?(a.resolve([p,null]),{v:void 0}):(d++,"continue"):(a.reject(new o.FormatError("Page dictionary kids object is not an array.")),{v:void 0});for(var b=g.length-1;b>=0;b--)i.push(g[b])};i.length;){var m=p();switch(m){case"continue":continue;default:if("object"===_typeof(m))return m.v}}a.reject(new Error("Page index ".concat(t," not found.")))}(),a.promise}},{key:"getPageIndex",value:function getPageIndex(t){var r=this.xref;var a=0;return function next(i){return function pagesBeforeRef(a){var i,c=0;return r.fetchAsync(a).then((function(r){if((0,l.isRefsEqual)(a,t)&&!(0,l.isDict)(r,"Page")&&(!(0,l.isDict)(r)||r.has("Type")||!r.has("Contents")))throw new o.FormatError("The reference does not point to a /Page dictionary.");if(!r)return null;if(!(0,l.isDict)(r))throw new o.FormatError("Node must be a dictionary.");return i=r.getRaw("Parent"),r.getAsync("Parent")})).then((function(t){if(!t)return null;if(!(0,l.isDict)(t))throw new o.FormatError("Parent must be a dictionary.");return t.getAsync("Kids")})).then((function(t){if(!t)return null;for(var u=[],h=!1,d=0,p=t.length;d<p;d++){var m=t[d];if(!(0,l.isRef)(m))throw new o.FormatError("Kid must be a reference.");if((0,l.isRefsEqual)(m,a)){h=!0;break}u.push(r.fetchAsync(m).then((function(t){if(!(0,l.isDict)(t))throw new o.FormatError("Kid node must be a dictionary.");t.has("Count")?c+=t.get("Count"):c++})))}if(!h)throw new o.FormatError("Kid reference not found in parent's kids.");return Promise.all(u).then((function(){return[c,i]}))}))}(i).then((function(t){if(!t)return a;var r=_slicedToArray(t,2),i=r[0],o=r[1];return a+=i,next(o)}))}(t)}},{key:"metadata",get:function get(){var t=this.catDict.getRaw("Metadata");if(!(0,l.isRef)(t))return(0,o.shadow)(this,"metadata",null);var r,a=!(this.xref.encrypt&&this.xref.encrypt.encryptMetadata),i=this.xref.fetch(t,a);if(i&&(0,l.isDict)(i.dict)){var c=i.dict.get("Type"),h=i.dict.get("Subtype");if((0,l.isName)(c,"Metadata")&&(0,l.isName)(h,"XML"))try{r=(0,o.stringToUTF8String)((0,o.bytesToString)(i.getBytes()))}catch(t){if(t instanceof u.MissingDataException)throw t;(0,o.info)("Skipping invalid metadata.")}}return(0,o.shadow)(this,"metadata",r)}},{key:"toplevelPagesDict",get:function get(){var t=this.catDict.get("Pages");if(!(0,l.isDict)(t))throw new o.FormatError("Invalid top-level pages dictionary.");return(0,o.shadow)(this,"toplevelPagesDict",t)}},{key:"documentOutline",get:function get(){var t=null;try{t=this._readDocumentOutline()}catch(t){if(t instanceof u.MissingDataException)throw t;(0,o.warn)("Unable to read document outline.")}return(0,o.shadow)(this,"documentOutline",t)}},{key:"permissions",get:function get(){var t=null;try{t=this._readPermissions()}catch(t){if(t instanceof u.MissingDataException)throw t;(0,o.warn)("Unable to read permissions.")}return(0,o.shadow)(this,"permissions",t)}},{key:"numPages",get:function get(){var t=this.toplevelPagesDict.get("Count");if(!Number.isInteger(t))throw new o.FormatError("Page count in top-level pages dictionary is not an integer.");return(0,o.shadow)(this,"numPages",t)}},{key:"destinations",get:function get(){var t=this._readDests(),r=Object.create(null);if(t instanceof y){var a=t.getAll();for(var i in a)r[i]=fetchDestination(a[i])}else t instanceof l.Dict&&t.forEach((function(t,a){a&&(r[t]=fetchDestination(a))}));return(0,o.shadow)(this,"destinations",r)}},{key:"pageLabels",get:function get(){var t=null;try{t=this._readPageLabels()}catch(t){if(t instanceof u.MissingDataException)throw t;(0,o.warn)("Unable to read page labels.")}return(0,o.shadow)(this,"pageLabels",t)}},{key:"pageLayout",get:function get(){var t=this.catDict.get("PageLayout"),r="";if((0,l.isName)(t))switch(t.name){case"SinglePage":case"OneColumn":case"TwoColumnLeft":case"TwoColumnRight":case"TwoPageLeft":case"TwoPageRight":r=t.name}return(0,o.shadow)(this,"pageLayout",r)}},{key:"pageMode",get:function get(){var t=this.catDict.get("PageMode"),r="UseNone";if((0,l.isName)(t))switch(t.name){case"UseNone":case"UseOutlines":case"UseThumbs":case"FullScreen":case"UseOC":case"UseAttachments":r=t.name}return(0,o.shadow)(this,"pageMode",r)}},{key:"viewerPreferences",get:function get(){var t=this,r={HideToolbar:o.isBool,HideMenubar:o.isBool,HideWindowUI:o.isBool,FitWindow:o.isBool,CenterWindow:o.isBool,DisplayDocTitle:o.isBool,NonFullScreenPageMode:l.isName,Direction:l.isName,ViewArea:l.isName,ViewClip:l.isName,PrintArea:l.isName,PrintClip:l.isName,PrintScaling:l.isName,Duplex:l.isName,PickTrayByPDFSize:o.isBool,PrintPageRange:Array.isArray,NumCopies:Number.isInteger},a=this.catDict.get("ViewerPreferences"),i=null;if((0,l.isDict)(a))for(var c in r)if(a.has(c)){var u=a.get(c);if(r[c](u)){var h=void 0;switch(c){case"NonFullScreenPageMode":switch(u.name){case"UseNone":case"UseOutlines":case"UseThumbs":case"UseOC":h=u.name;break;default:h="UseNone"}break;case"Direction":switch(u.name){case"L2R":case"R2L":h=u.name;break;default:h="L2R"}break;case"ViewArea":case"ViewClip":case"PrintArea":case"PrintClip":switch(u.name){case"MediaBox":case"CropBox":case"BleedBox":case"TrimBox":case"ArtBox":h=u.name;break;default:h="CropBox"}break;case"PrintScaling":switch(u.name){case"None":case"AppDefault":h=u.name;break;default:h="AppDefault"}break;case"Duplex":switch(u.name){case"Simplex":case"DuplexFlipShortEdge":case"DuplexFlipLongEdge":h=u.name;break;default:h="None"}break;case"PrintPageRange":if(u.length%2!=0)break;u.every((function(r,a,i){return Number.isInteger(r)&&r>0&&(0===a||r>=i[a-1])&&r<=t.numPages}))&&(h=u);break;case"NumCopies":u>0&&(h=u);break;default:if("boolean"!=typeof u)throw new o.FormatError("viewerPreferences - expected a boolean value for: ".concat(c));h=u}void 0!==h?(i||(i=Object.create(null)),i[c]=h):(0,o.info)('Bad value in ViewerPreferences for "'.concat(c,'".'))}else(0,o.info)('Bad value in ViewerPreferences for "'.concat(c,'".'))}return(0,o.shadow)(this,"viewerPreferences",i)}},{key:"openAction",get:function get(){var t=this.catDict.get("OpenAction"),r=null;if((0,l.isDict)(t)){var a=new l.Dict(this.xref);a.set("A",t);var i={url:null,dest:null,action:null};Catalog.parseDestDictionary({destDict:a,resultObj:i}),Array.isArray(i.dest)?(r||(r=Object.create(null)),r.dest=i.dest):i.action&&(r||(r=Object.create(null)),r.action=i.action)}else Array.isArray(t)&&(r||(r=Object.create(null)),r.dest=t);return(0,o.shadow)(this,"openAction",r)}},{key:"attachments",get:function get(){var t=this.catDict.get("Names"),r=null;if(t&&t.has("EmbeddedFiles")){var a=new y(t.getRaw("EmbeddedFiles"),this.xref).getAll();for(var i in a){var l=new S(a[i],this.xref);r||(r=Object.create(null)),r[(0,o.stringToPDFString)(i)]=l.serializable}}return(0,o.shadow)(this,"attachments",r)}},{key:"javaScript",get:function get(){var t=this.catDict.get("Names"),r=null;function appendIfJavaScriptDict(t){var a=t.get("S");if((0,l.isName)(a,"JavaScript")){var i=t.get("JS");if((0,l.isStream)(i))i=(0,o.bytesToString)(i.getBytes());else if(!(0,o.isString)(i))return;r||(r=[]),r.push((0,o.stringToPDFString)(i))}}if(t&&t.has("JavaScript")){var a=new y(t.getRaw("JavaScript"),this.xref).getAll();for(var i in a){var c=a[i];(0,l.isDict)(c)&&appendIfJavaScriptDict(c)}}var u=this.catDict.get("OpenAction");return(0,l.isDict)(u)&&(0,l.isName)(u.get("S"),"JavaScript")&&appendIfJavaScriptDict(u),(0,o.shadow)(this,"javaScript",r)}}],[{key:"parseDestDictionary",value:function parseDestDictionary(t){var r=t.destDict;if((0,l.isDict)(r)){var a=t.resultObj;if("object"===_typeof(a)){var i,c,u=t.docBaseUrl||null,h=r.get("A");if(!(0,l.isDict)(h)&&r.has("Dest")&&(h=r.get("Dest")),(0,l.isDict)(h)){var d=h.get("S");if(!(0,l.isName)(d))return void(0,o.warn)("parseDestDictionary: Invalid type in Action dictionary.");var p=d.name;switch(p){case"URI":i=h.get("URI"),(0,l.isName)(i)?i="/"+i.name:(0,o.isString)(i)&&(i=function addDefaultProtocolToUrl(t){return t.startsWith("www.")?"http://".concat(t):t}(i));break;case"GoTo":c=h.get("D");break;case"Launch":case"GoToR":var m=h.get("F");(0,l.isDict)(m)?i=m.get("F")||null:(0,o.isString)(m)&&(i=m);var g=h.get("D");if(g&&((0,l.isName)(g)&&(g=g.name),(0,o.isString)(i))){var b=i.split("#")[0];(0,o.isString)(g)?i=b+"#"+g:Array.isArray(g)&&(i=b+"#"+JSON.stringify(g))}var y=h.get("NewWindow");(0,o.isBool)(y)&&(a.newWindow=y);break;case"Named":var v=h.get("N");(0,l.isName)(v)&&(a.action=v.name);break;case"JavaScript":var S,k=h.get("JS");if((0,l.isStream)(k)?S=(0,o.bytesToString)(k.getBytes()):(0,o.isString)(k)&&(S=k),S){var w=new RegExp("^\\s*("+["app.launchURL","window.open"].join("|").split(".").join("\\.")+")\\((?:'|\")([^'\"]*)(?:'|\")(?:,\\s*(\\w+)\\)|\\))","i").exec((0,o.stringToPDFString)(S));if(w&&w[2]){i=w[2],"true"===w[3]&&"app.launchURL"===w[1]&&(a.newWindow=!0);break}}default:(0,o.warn)('parseDestDictionary: unsupported action type "'.concat(p,'".'))}}else r.has("Dest")&&(c=r.get("Dest"));if((0,o.isString)(i)){i=function tryConvertUrlEncoding(t){try{return(0,o.stringToUTF8String)(t)}catch(r){return t}}(i);var C=(0,o.createValidAbsoluteUrl)(i,u);C&&(a.url=C.href),a.unsafeUrl=i}c&&((0,l.isName)(c)&&(c=c.name),((0,o.isString)(c)||Array.isArray(c))&&(a.dest=c))}else(0,o.warn)("parseDestDictionary: `resultObj` must be an object.")}else(0,o.warn)("parseDestDictionary: `destDict` must be a dictionary.")}}]),Catalog}();r.Catalog=m;var g=function XRefClosure(){function XRef(t,r){this.stream=t,this.pdfManager=r,this.entries=[],this.xrefstms=Object.create(null),this._cacheMap=new Map,this.stats={streamTypes:Object.create(null),fontTypes:Object.create(null)}}return XRef.prototype={setStartXRef:function XRef_setStartXRef(t){this.startXRefQueue=[t]},parse:function XRef_parse(t){var r,a,i;t?((0,o.warn)("Indexing all PDF objects"),r=this.indexObjects()):r=this.readXRef(),r.assignXref(this),this.trailer=r;try{a=r.get("Encrypt")}catch(t){if(t instanceof u.MissingDataException)throw t;(0,o.warn)('XRef.parse - Invalid "Encrypt" reference: "'.concat(t,'".'))}if((0,l.isDict)(a)){var c=r.get("ID"),d=c&&c.length?c[0]:"";a.suppressEncryption=!0,this.encrypt=new h.CipherTransformFactory(a,d,this.pdfManager.password)}try{i=r.get("Root")}catch(t){if(t instanceof u.MissingDataException)throw t;(0,o.warn)('XRef.parse - Invalid "Root" reference: "'.concat(t,'".'))}if(!(0,l.isDict)(i)||!i.has("Pages")){if(!t)throw new u.XRefParseException;throw new o.FormatError("Invalid root reference")}this.root=i},processXRefTable:function XRef_processXRefTable(t){"tableState"in this||(this.tableState={entryNum:0,streamPos:t.lexer.stream.pos,parserBuf1:t.buf1,parserBuf2:t.buf2});var r=this.readXRefTable(t);if(!(0,l.isCmd)(r,"trailer"))throw new o.FormatError("Invalid XRef table: could not find trailer dictionary");var a=t.getObj();if(!(0,l.isDict)(a)&&a.dict&&(a=a.dict),!(0,l.isDict)(a))throw new o.FormatError("Invalid XRef table: could not parse trailer dictionary");return delete this.tableState,a},readXRefTable:function XRef_readXRefTable(t){var r,a=t.lexer.stream,i=this.tableState;for(a.pos=i.streamPos,t.buf1=i.parserBuf1,t.buf2=i.parserBuf2;;){if(!("firstEntryNum"in i)||!("entryCount"in i)){if((0,l.isCmd)(r=t.getObj(),"trailer"))break;i.firstEntryNum=r,i.entryCount=t.getObj()}var c=i.firstEntryNum,u=i.entryCount;if(!Number.isInteger(c)||!Number.isInteger(u))throw new o.FormatError("Invalid XRef table: wrong types in subsection header");for(var h=i.entryNum;h<u;h++){i.streamPos=a.pos,i.entryNum=h,i.parserBuf1=t.buf1,i.parserBuf2=t.buf2;var d={};d.offset=t.getObj(),d.gen=t.getObj();var p=t.getObj();if(p instanceof l.Cmd)switch(p.cmd){case"f":d.free=!0;break;case"n":d.uncompressed=!0}if(!Number.isInteger(d.offset)||!Number.isInteger(d.gen)||!d.free&&!d.uncompressed)throw new o.FormatError("Invalid entry in XRef subsection: ".concat(c,", ").concat(u));0===h&&d.free&&1===c&&(c=0),this.entries[h+c]||(this.entries[h+c]=d)}i.entryNum=0,i.streamPos=a.pos,i.parserBuf1=t.buf1,i.parserBuf2=t.buf2,delete i.firstEntryNum,delete i.entryCount}if(this.entries[0]&&!this.entries[0].free)throw new o.FormatError("Invalid XRef table: unexpected first object");return r},processXRefStream:function XRef_processXRefStream(t){if(!("streamState"in this)){var r=t.dict,a=r.get("W"),i=r.get("Index");i||(i=[0,r.get("Size")]),this.streamState={entryRanges:i,byteWidths:a,entryNum:0,streamPos:t.pos}}return this.readXRefStream(t),delete this.streamState,t.dict},readXRefStream:function XRef_readXRefStream(t){var r,a,i=this.streamState;t.pos=i.streamPos;for(var l=i.byteWidths,c=l[0],u=l[1],h=l[2],d=i.entryRanges;d.length>0;){var p=d[0],m=d[1];if(!Number.isInteger(p)||!Number.isInteger(m))throw new o.FormatError("Invalid XRef range fields: ".concat(p,", ").concat(m));if(!Number.isInteger(c)||!Number.isInteger(u)||!Number.isInteger(h))throw new o.FormatError("Invalid XRef entry fields length: ".concat(p,", ").concat(m));for(r=i.entryNum;r<m;++r){i.entryNum=r,i.streamPos=t.pos;var g=0,b=0,y=0;for(a=0;a<c;++a)g=g<<8|t.getByte();for(0===c&&(g=1),a=0;a<u;++a)b=b<<8|t.getByte();for(a=0;a<h;++a)y=y<<8|t.getByte();var v={};switch(v.offset=b,v.gen=y,g){case 0:v.free=!0;break;case 1:v.uncompressed=!0;break;case 2:break;default:throw new o.FormatError("Invalid XRef entry type: ".concat(g))}this.entries[p+r]||(this.entries[p+r]=v)}i.entryNum=0,i.streamPos=t.pos,d.splice(0,2)}},indexObjects:function XRef_indexObjects(){function readToken(t,r){for(var a="",i=t[r];10!==i&&13!==i&&60!==i&&!(++r>=t.length);)a+=String.fromCharCode(i),i=t[r];return a}function skipUntil(t,r,a){for(var i=a.length,o=t.length,l=0;r<o;){for(var c=0;c<i&&t[r+c]===a[c];)++c;if(c>=i)break;r++,l++}return l}var t=/^(\d+)\s+(\d+)\s+obj\b/,r=/\bendobj[\b\s]$/,a=/\s+(\d+\s+\d+\s+obj[\b\s<])$/,i=new Uint8Array([116,114,97,105,108,101,114]),h=new Uint8Array([115,116,97,114,116,120,114,101,102]),d=new Uint8Array([111,98,106]),p=new Uint8Array([47,88,82,101,102]);this.entries.length=0;var m=this.stream;m.pos=0;for(var g,b,y,v=m.getBytes(),S=m.start,k=v.length,w=[],C=[];S<k;){var x=v[S];if(9!==x&&10!==x&&13!==x&&32!==x)if(37!==x){var _,A=readToken(v,S);if(A.startsWith("xref")&&(4===A.length||/\s/.test(A[4])))S+=skipUntil(v,S,i),w.push(S),S+=skipUntil(v,S,h);else if(_=t.exec(A)){var R=0|_[1],T=0|_[2];this.entries[R]&&this.entries[R].gen!==T||(this.entries[R]={offset:S-m.start,gen:T,uncompressed:!0});for(var I=void 0,P=S+A.length;P<v.length;){var O=P+skipUntil(v,P,d)+4;I=O-S;var E=Math.max(O-25,P),B=(0,o.bytesToString)(v.subarray(E,O));if(r.test(B))break;var D=a.exec(B);if(D&&D[1]){(0,o.warn)('indexObjects: Found new "obj" inside of another "obj", caused by missing "endobj" -- trying to recover.'),I-=D[1].length;break}P=O}var M=v.subarray(S,S+I),L=skipUntil(M,0,p);L<I&&M[L+5]<64&&(C.push(S-m.start),this.xrefstms[S-m.start]=1),S+=I}else A.startsWith("trailer")&&(7===A.length||/\s/.test(A[7]))?(w.push(S),S+=skipUntil(v,S,h)):S+=A.length+1}else do{if(++S>=k)break;x=v[S]}while(10!==x&&13!==x);else++S}for(g=0,b=C.length;g<b;++g)this.startXRefQueue.push(C[g]),this.readXRef(!0);for(g=0,b=w.length;g<b;++g){m.pos=w[g];var N=new c.Parser({lexer:new c.Lexer(m),xref:this,allowStreams:!0,recoveryMode:!0}),U=N.getObj();if((0,l.isCmd)(U,"trailer")){var j=N.getObj();if((0,l.isDict)(j)){var q=void 0;try{q=j.get("Root")}catch(t){if(t instanceof u.MissingDataException)throw t;continue}if((0,l.isDict)(q)&&q.has("Pages")){if(j.has("ID"))return j;y=j}}}}if(y)return y;throw new o.InvalidPDFException("Invalid PDF structure.")},readXRef:function XRef_readXRef(t){var r=this.stream,a=Object.create(null);try{for(;this.startXRefQueue.length;){var i=this.startXRefQueue[0];if(a[i])(0,o.warn)("readXRef - skipping XRef table since it was already parsed."),this.startXRefQueue.shift();else{a[i]=!0,r.pos=i+r.start;var h,d=new c.Parser({lexer:new c.Lexer(r),xref:this,allowStreams:!0}),p=d.getObj();if((0,l.isCmd)(p,"xref")){if(h=this.processXRefTable(d),this.topDict||(this.topDict=h),p=h.get("XRefStm"),Number.isInteger(p)){var m=p;m in this.xrefstms||(this.xrefstms[m]=1,this.startXRefQueue.push(m))}}else{if(!Number.isInteger(p))throw new o.FormatError("Invalid XRef stream header");if(!Number.isInteger(d.getObj())||!(0,l.isCmd)(d.getObj(),"obj")||!(0,l.isStream)(p=d.getObj()))throw new o.FormatError("Invalid XRef stream");if(h=this.processXRefStream(p),this.topDict||(this.topDict=h),!h)throw new o.FormatError("Failed to read XRef stream")}p=h.get("Prev"),Number.isInteger(p)?this.startXRefQueue.push(p):(0,l.isRef)(p)&&this.startXRefQueue.push(p.num),this.startXRefQueue.shift()}}return this.topDict}catch(t){if(t instanceof u.MissingDataException)throw t;(0,o.info)("(while reading XRef): "+t)}if(!t)throw new u.XRefParseException},getEntry:function XRef_getEntry(t){var r=this.entries[t];return r&&!r.free&&r.offset?r:null},fetchIfRef:function XRef_fetchIfRef(t,r){return t instanceof l.Ref?this.fetch(t,r):t},fetch:function XRef_fetch(t,r){if(!(t instanceof l.Ref))throw new Error("ref object is not a reference");var a=t.num,i=this._cacheMap.get(a);if(void 0!==i)return i instanceof l.Dict&&!i.objId&&(i.objId=t.toString()),i;var o=this.getEntry(a);return null===o?(this._cacheMap.set(a,o),o):(o=o.uncompressed?this.fetchUncompressed(t,o,r):this.fetchCompressed(t,o,r),(0,l.isDict)(o)?o.objId=t.toString():(0,l.isStream)(o)&&(o.dict.objId=t.toString()),o)},fetchUncompressed:function fetchUncompressed(t,r){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t.gen,o=t.num;if(r.gen!==i)throw new u.XRefEntryException("Inconsistent generation in XRef: ".concat(t));var h=this.stream.makeSubStream(r.offset+this.stream.start),d=new c.Parser({lexer:new c.Lexer(h),xref:this,allowStreams:!0}),p=d.getObj(),m=d.getObj(),g=d.getObj();if(p!==o||m!==i||!(g instanceof l.Cmd))throw new u.XRefEntryException("Bad (uncompressed) XRef entry: ".concat(t));if("obj"!==g.cmd){if(g.cmd.startsWith("obj")&&(o=parseInt(g.cmd.substring(3),10),!Number.isNaN(o)))return o;throw new u.XRefEntryException("Bad (uncompressed) XRef entry: ".concat(t))}return r=this.encrypt&&!a?d.getObj(this.encrypt.createCipherTransform(o,i)):d.getObj(),(0,l.isStream)(r)||this._cacheMap.set(o,r),r},fetchCompressed:function fetchCompressed(t,r){var a=r.offset,i=this.fetch(l.Ref.get(a,0));if(!(0,l.isStream)(i))throw new o.FormatError("bad ObjStm stream");var h=i.dict.get("First"),d=i.dict.get("N");if(!Number.isInteger(h)||!Number.isInteger(d))throw new o.FormatError("invalid first and n parameters for ObjStm stream");for(var p=new c.Parser({lexer:new c.Lexer(i),xref:this,allowStreams:!0}),m=new Array(d),g=0;g<d;++g){var b=p.getObj();if(!Number.isInteger(b))throw new o.FormatError("invalid object number in the ObjStm stream: ".concat(b));var y=p.getObj();if(!Number.isInteger(y))throw new o.FormatError("invalid object offset in the ObjStm stream: ".concat(y));m[g]=b}for(var v=new Array(d),S=0;S<d;++S){var k=p.getObj();if(v[S]=k,p.buf1 instanceof l.Cmd&&"endobj"===p.buf1.cmd&&p.shift(),!(0,l.isStream)(k)){var w=m[S],C=this.entries[w];C&&C.offset===a&&C.gen===S&&this._cacheMap.set(w,k)}}if(void 0===(r=v[r.gen]))throw new u.XRefEntryException("Bad (compressed) XRef entry: ".concat(t));return r},fetchIfRefAsync:function fetchIfRefAsync(t,r){var a=this;return _asyncToGenerator(i.default.mark((function _callee(){return i.default.wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:if(!(t instanceof l.Ref)){i.next=2;break}return i.abrupt("return",a.fetchAsync(t,r));case 2:return i.abrupt("return",t);case 3:case"end":return i.stop()}}),_callee)})))()},fetchAsync:function fetchAsync(t,r){var a=this;return _asyncToGenerator(i.default.mark((function _callee2(){return i.default.wrap((function _callee2$(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.abrupt("return",a.fetch(t,r));case 4:if(i.prev=4,i.t0=i.catch(0),i.t0 instanceof u.MissingDataException){i.next=8;break}throw i.t0;case 8:return i.next=10,a.pdfManager.requestRange(i.t0.begin,i.t0.end);case 10:return i.abrupt("return",a.fetchAsync(t,r));case 11:case"end":return i.stop()}}),_callee2,null,[[0,4]])})))()},getCatalogObj:function XRef_getCatalogObj(){return this.root}},XRef}();r.XRef=g;var b=function(){function NameOrNumberTree(t,r,a){_classCallCheck(this,NameOrNumberTree),this.constructor===NameOrNumberTree&&(0,o.unreachable)("Cannot initialize NameOrNumberTree."),this.root=t,this.xref=r,this._type=a}return _createClass(NameOrNumberTree,[{key:"getAll",value:function getAll(){var t=Object.create(null);if(!this.root)return t;var r=this.xref,a=new l.RefSet;a.put(this.root);for(var i=[this.root];i.length>0;){var c=r.fetchIfRef(i.shift());if((0,l.isDict)(c))if(c.has("Kids"))for(var u=c.get("Kids"),h=0,d=u.length;h<d;h++){var p=u[h];if(a.has(p))throw new o.FormatError('Duplicate entry in "'.concat(this._type,'" tree.'));i.push(p),a.put(p)}else{var m=c.get(this._type);if(Array.isArray(m))for(var g=0,b=m.length;g<b;g+=2)t[r.fetchIfRef(m[g])]=r.fetchIfRef(m[g+1])}}return t}},{key:"get",value:function get(t){if(!this.root)return null;for(var r=this.xref,a=r.fetchIfRef(this.root),i=0;a.has("Kids");){if(++i>10)return(0,o.warn)('Search depth limit reached for "'.concat(this._type,'" tree.')),null;var l=a.get("Kids");if(!Array.isArray(l))return null;for(var c=0,u=l.length-1;c<=u;){var h=c+u>>1,d=r.fetchIfRef(l[h]).get("Limits");if(t<r.fetchIfRef(d[0]))u=h-1;else{if(!(t>r.fetchIfRef(d[1]))){a=r.fetchIfRef(l[h]);break}c=h+1}}if(c>u)return null}var p=a.get(this._type);if(Array.isArray(p)){for(var m=0,g=p.length-2;m<=g;){var b=m+g>>1,y=b+(1&b),v=r.fetchIfRef(p[y]);if(t<v)g=y-2;else{if(!(t>v))return r.fetchIfRef(p[y+1]);m=y+2}}(0,o.info)('Falling back to an exhaustive search, for key "'.concat(t,'", ')+'in "'.concat(this._type,'" tree.'));for(var S=0,k=p.length;S<k;S+=2){if(r.fetchIfRef(p[S])===t)return(0,o.warn)('The "'.concat(t,'" key was found at an incorrect, ')+'i.e. out-of-order, position in "'.concat(this._type,'" tree.')),r.fetchIfRef(p[S+1])}}return null}}]),NameOrNumberTree}(),y=function(t){_inherits(NameTree,t);var r=_createSuper(NameTree);function NameTree(t,a){return _classCallCheck(this,NameTree),r.call(this,t,a,"Names")}return NameTree}(b),v=function(t){_inherits(NumberTree,t);var r=_createSuper(NumberTree);function NumberTree(t,a){return _classCallCheck(this,NumberTree),r.call(this,t,a,"Nums")}return NumberTree}(b),S=function FileSpecClosure(){function FileSpec(t,r){t&&(0,l.isDict)(t)&&(this.xref=r,this.root=t,t.has("FS")&&(this.fs=t.get("FS")),this.description=t.has("Desc")?(0,o.stringToPDFString)(t.get("Desc")):"",t.has("RF")&&(0,o.warn)("Related file specifications are not supported"),this.contentAvailable=!0,t.has("EF")||(this.contentAvailable=!1,(0,o.warn)("Non-embedded file specifications are not supported")))}function pickPlatformItem(t){return t.has("UF")?t.get("UF"):t.has("F")?t.get("F"):t.has("Unix")?t.get("Unix"):t.has("Mac")?t.get("Mac"):t.has("DOS")?t.get("DOS"):null}return FileSpec.prototype={get filename(){if(!this._filename&&this.root){var t=pickPlatformItem(this.root)||"unnamed";this._filename=(0,o.stringToPDFString)(t).replace(/\\\\/g,"\\").replace(/\\\//g,"/").replace(/\\/g,"/")}return this._filename},get content(){if(!this.contentAvailable)return null;!this.contentRef&&this.root&&(this.contentRef=pickPlatformItem(this.root.get("EF")));var t=null;if(this.contentRef){var r=this.xref.fetchIfRef(this.contentRef);r&&(0,l.isStream)(r)?t=r.getBytes():(0,o.warn)("Embedded file specification points to non-existing/invalid content")}else(0,o.warn)("Embedded file specification does not have a content");return t},get serializable(){return{filename:this.filename,content:this.content}}},FileSpec}();r.FileSpec=S;var k=function(){function mayHaveChildren(t){return t instanceof l.Ref||t instanceof l.Dict||Array.isArray(t)||(0,l.isStream)(t)}function addChildren(t,r){if(t instanceof l.Dict||(0,l.isStream)(t))for(var a=t instanceof l.Dict?t:t.dict,i=a.getKeys(),o=0,c=i.length;o<c;o++){var u=a.getRaw(i[o]);mayHaveChildren(u)&&r.push(u)}else if(Array.isArray(t))for(var h=0,d=t.length;h<d;h++){var p=t[h];mayHaveChildren(p)&&r.push(p)}}function ObjectLoader(t,r,a){this.dict=t,this.keys=r,this.xref=a,this.refSet=null}return ObjectLoader.prototype={load:function load(){var t=this;return _asyncToGenerator(i.default.mark((function _callee3(){var r,a,o,c,u,h;return i.default.wrap((function _callee3$(i){for(;;)switch(i.prev=i.next){case 0:if(t.xref.stream.allChunksLoaded&&!t.xref.stream.allChunksLoaded()){i.next=2;break}return i.abrupt("return",void 0);case 2:for(r=t.keys,a=t.dict,t.refSet=new l.RefSet,o=[],c=0,u=r.length;c<u;c++)void 0!==(h=a.getRaw(r[c]))&&o.push(h);return i.abrupt("return",t._walk(o));case 7:case"end":return i.stop()}}),_callee3)})))()},_walk:function _walk(t){var r=this;return _asyncToGenerator(i.default.mark((function _callee4(){var a,o,c,h,d,p,m,g,b,y,v;return i.default.wrap((function _callee4$(i){for(;;)switch(i.prev=i.next){case 0:a=[],o=[];case 2:if(!t.length){i.next=22;break}if(!((c=t.pop())instanceof l.Ref)){i.next=18;break}if(!r.refSet.has(c)){i.next=7;break}return i.abrupt("continue",2);case 7:i.prev=7,r.refSet.put(c),c=r.xref.fetch(c),i.next=18;break;case 12:if(i.prev=12,i.t0=i.catch(7),i.t0 instanceof u.MissingDataException){i.next=16;break}throw i.t0;case 16:a.push(c),o.push({begin:i.t0.begin,end:i.t0.end});case 18:if(c&&c.getBaseStreams){for(h=c.getBaseStreams(),d=!1,p=0,m=h.length;p<m;p++)(g=h[p]).allChunksLoaded&&!g.allChunksLoaded()&&(d=!0,o.push({begin:g.start,end:g.end}));d&&a.push(c)}addChildren(c,t),i.next=2;break;case 22:if(!o.length){i.next=27;break}return i.next=25,r.xref.stream.manager.requestRanges(o);case 25:for(b=0,y=a.length;b<y;b++)(v=a[b])instanceof l.Ref&&r.refSet.remove(v);return i.abrupt("return",r._walk(a));case 27:return r.refSet=null,i.abrupt("return",void 0);case 29:case"end":return i.stop()}}),_callee4,null,[[7,12]])})))()}},ObjectLoader}();r.ObjectLoader=k},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Parser=r.Linearization=r.Lexer=void 0;var i=a(205),o=a(5),l=a(198),c=a(201),u=a(206),h=a(208),d=a(211),p=a(213);function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}function computeAdler32(t){for(var r=t.length,a=1,i=0,o=0;o<r;++o)i+=a+=255&t[o];return i%65521<<16|a%65521}var m=function(){function Parser(t){var r=t.lexer,a=t.xref,i=t.allowStreams,o=void 0!==i&&i,l=t.recoveryMode,c=void 0!==l&&l;_classCallCheck(this,Parser),this.lexer=r,this.xref=a,this.allowStreams=o,this.recoveryMode=c,this.imageCache=Object.create(null),this.refill()}return _createClass(Parser,[{key:"refill",value:function refill(){this.buf1=this.lexer.getObj(),this.buf2=this.lexer.getObj()}},{key:"shift",value:function shift(){this.buf2 instanceof l.Cmd&&"ID"===this.buf2.cmd?(this.buf1=this.buf2,this.buf2=null):(this.buf1=this.buf2,this.buf2=this.lexer.getObj())}},{key:"tryShift",value:function tryShift(){try{return this.shift(),!0}catch(t){if(t instanceof c.MissingDataException)throw t;return!1}}},{key:"getObj",value:function getObj(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=this.buf1;if(this.shift(),r instanceof l.Cmd)switch(r.cmd){case"BI":return this.makeInlineImage(t);case"[":for(var a=[];!(0,l.isCmd)(this.buf1,"]")&&!(0,l.isEOF)(this.buf1);)a.push(this.getObj(t));if((0,l.isEOF)(this.buf1)){if(!this.recoveryMode)throw new o.FormatError("End of file inside array");return a}return this.shift(),a;case"<<":for(var i=new l.Dict(this.xref);!(0,l.isCmd)(this.buf1,">>")&&!(0,l.isEOF)(this.buf1);)if((0,l.isName)(this.buf1)){var c=this.buf1.name;if(this.shift(),(0,l.isEOF)(this.buf1))break;i.set(c,this.getObj(t))}else(0,o.info)("Malformed dictionary: key must be a name object"),this.shift();if((0,l.isEOF)(this.buf1)){if(!this.recoveryMode)throw new o.FormatError("End of file inside dictionary");return i}return(0,l.isCmd)(this.buf2,"stream")?this.allowStreams?this.makeStream(i,t):i:(this.shift(),i);default:return r}if(Number.isInteger(r)){if(Number.isInteger(this.buf1)&&(0,l.isCmd)(this.buf2,"R")){var u=l.Ref.get(r,this.buf1);return this.shift(),this.shift(),u}return r}return"string"==typeof r&&t?t.decryptString(r):r}},{key:"findDefaultInlineStreamEnd",value:function findDefaultInlineStreamEnd(t){for(var r,a,i=t.pos,l=0;-1!==(r=t.getByte());)if(0===l)l=69===r?1:0;else if(1===l)l=73===r?2:0;else if((0,o.assert)(2===l,"findDefaultInlineStreamEnd - invalid state."),32===r||10===r||13===r){a=t.pos;for(var u=t.peekBytes(10),h=0,d=u.length;h<d;h++)if((0!==(r=u[h])||0===u[h+1])&&10!==r&&13!==r&&(r<32||r>127)){l=0;break}if(2===l)break}else l=0;-1===r&&((0,o.warn)("findDefaultInlineStreamEnd: Reached the end of the stream without finding a valid EI marker"),a&&((0,o.warn)('... trying to recover by using the last "EI" occurrence.'),t.skip(-(t.pos-a))));var p=4;return t.skip(-p),r=t.peekByte(),t.skip(p),(0,c.isWhiteSpace)(r)||p--,t.pos-p-i}},{key:"findDCTDecodeInlineStreamEnd",value:function findDCTDecodeInlineStreamEnd(t){for(var r,a,i=t.pos,l=!1;-1!==(r=t.getByte());)if(255===r){switch(t.getByte()){case 0:break;case 255:t.skip(-1);break;case 217:l=!0;break;case 192:case 193:case 194:case 195:case 197:case 198:case 199:case 201:case 202:case 203:case 205:case 206:case 207:case 196:case 204:case 218:case 219:case 220:case 221:case 222:case 223:case 224:case 225:case 226:case 227:case 228:case 229:case 230:case 231:case 232:case 233:case 234:case 235:case 236:case 237:case 238:case 239:case 254:(a=t.getUint16())>2?t.skip(a-2):t.skip(-2)}if(l)break}var c=t.pos-i;return-1===r?((0,o.warn)("Inline DCTDecode image stream: EOI marker not found, searching for /EI/ instead."),t.skip(-c),this.findDefaultInlineStreamEnd(t)):(this.inlineStreamSkipEI(t),c)}},{key:"findASCII85DecodeInlineStreamEnd",value:function findASCII85DecodeInlineStreamEnd(t){for(var r,a=t.pos;-1!==(r=t.getByte());)if(126===r){var i=t.pos;for(r=t.peekByte();(0,c.isWhiteSpace)(r);)t.skip(),r=t.peekByte();if(62===r){t.skip();break}if(t.pos>i){var l=t.peekBytes(2);if(69===l[0]&&73===l[1])break}}var u=t.pos-a;return-1===r?((0,o.warn)("Inline ASCII85Decode image stream: EOD marker not found, searching for /EI/ instead."),t.skip(-u),this.findDefaultInlineStreamEnd(t)):(this.inlineStreamSkipEI(t),u)}},{key:"findASCIIHexDecodeInlineStreamEnd",value:function findASCIIHexDecodeInlineStreamEnd(t){for(var r,a=t.pos;-1!==(r=t.getByte())&&62!==r;);var i=t.pos-a;return-1===r?((0,o.warn)("Inline ASCIIHexDecode image stream: EOD marker not found, searching for /EI/ instead."),t.skip(-i),this.findDefaultInlineStreamEnd(t)):(this.inlineStreamSkipEI(t),i)}},{key:"inlineStreamSkipEI",value:function inlineStreamSkipEI(t){for(var r,a=0;-1!==(r=t.getByte());)if(0===a)a=69===r?1:0;else if(1===a)a=73===r?2:0;else if(2===a)break}},{key:"makeInlineImage",value:function makeInlineImage(t){for(var r,a=this.lexer,i=a.stream,c=new l.Dict(this.xref);!(0,l.isCmd)(this.buf1,"ID")&&!(0,l.isEOF)(this.buf1);){if(!(0,l.isName)(this.buf1))throw new o.FormatError("Dictionary key must be a name object");var u=this.buf1.name;if(this.shift(),(0,l.isEOF)(this.buf1))break;c.set(u,this.getObj(t))}-1!==a.beginInlineImagePos&&(r=i.pos-a.beginInlineImagePos);var h,d=c.get("Filter","F");if((0,l.isName)(d))h=d.name;else if(Array.isArray(d)){var p=this.xref.fetchIfRef(d[0]);(0,l.isName)(p)&&(h=p.name)}var m,g=i.pos;m="DCTDecode"===h||"DCT"===h?this.findDCTDecodeInlineStreamEnd(i):"ASCII85Decode"===h||"A85"===h?this.findASCII85DecodeInlineStreamEnd(i):"ASCIIHexDecode"===h||"AHx"===h?this.findASCIIHexDecodeInlineStreamEnd(i):this.findDefaultInlineStreamEnd(i);var b,y=i.makeSubStream(g,m,c);if(m<1e3&&r<5552){var v=y.getBytes();y.reset();var S=i.pos;i.pos=a.beginInlineImagePos;var k=i.getBytes(r);i.pos=S,b=computeAdler32(v)+"_"+computeAdler32(k);var w=this.imageCache[b];if(void 0!==w)return this.buf2=l.Cmd.get("EI"),this.shift(),w.reset(),w}return t&&(y=t.createStream(y,m)),(y=this.filter(y,c,m)).dict=c,void 0!==b&&(y.cacheKey="inline_".concat(m,"_").concat(b),this.imageCache[b]=y),this.buf2=l.Cmd.get("EI"),this.shift(),y}},{key:"_findStreamLength",value:function _findStreamLength(t,r){var a=this.lexer.stream;a.pos=t;for(var i=r.length;a.pos<a.end;){var o=a.peekBytes(2048),l=o.length-i;if(l<=0)break;for(var c=0;c<l;){for(var u=0;u<i&&o[c+u]===r[u];)u++;if(u>=i)return a.pos+=c,a.pos-t;c++}a.pos+=l}return-1}},{key:"makeStream",value:function makeStream(t,r){var a=this.lexer,i=a.stream;a.skipToNextLine();var u=i.pos-1,h=t.get("Length");if(Number.isInteger(h)||((0,o.info)('Bad length "'.concat(h,'" in stream')),h=0),i.pos=u+h,a.nextChar(),this.tryShift()&&(0,l.isCmd)(this.buf2,"endstream"))this.shift();else{var d=new Uint8Array([101,110,100,115,116,114,101,97,109]),p=this._findStreamLength(u,d);if(p<0){for(var m=1;m<=1;m++){var g=d.length-m,b=d.slice(0,g),y=this._findStreamLength(u,b);if(y>=0){var v=i.peekBytes(g+1)[g];if(!(0,c.isWhiteSpace)(v))break;(0,o.info)('Found "'.concat((0,o.bytesToString)(b),'" when ')+"searching for endstream command."),p=y;break}}if(p<0)throw new o.FormatError("Missing endstream command.")}h=p,a.nextChar(),this.shift(),this.shift()}return this.shift(),i=i.makeSubStream(u,h,t),r&&(i=r.createStream(i,h)),(i=this.filter(i,t,h)).dict=t,i}},{key:"filter",value:function filter(t,r,a){var filter=r.get("Filter","F"),i=r.get("DecodeParms","DP");if((0,l.isName)(filter))return Array.isArray(i)&&(0,o.warn)("/DecodeParms should not contain an Array, when /Filter contains a Name."),this.makeFilter(t,filter.name,a,i);var c=a;if(Array.isArray(filter))for(var u=filter,h=i,d=0,p=u.length;d<p;++d){if(filter=this.xref.fetchIfRef(u[d]),!(0,l.isName)(filter))throw new o.FormatError('Bad filter name "'.concat(filter,'"'));i=null,Array.isArray(h)&&d in h&&(i=this.xref.fetchIfRef(h[d])),t=this.makeFilter(t,filter.name,c,i),c=null}return t}},{key:"makeFilter",value:function makeFilter(t,r,a,l){if(0===a)return(0,o.warn)('Empty "'.concat(r,'" stream.')),new i.NullStream;try{var m=this.xref.stats.streamTypes;if("FlateDecode"===r||"Fl"===r)return m[o.StreamType.FLATE]=!0,l?new i.PredictorStream(new i.FlateStream(t,a),a,l):new i.FlateStream(t,a);if("LZWDecode"===r||"LZW"===r){m[o.StreamType.LZW]=!0;var g=1;return l?(l.has("EarlyChange")&&(g=l.get("EarlyChange")),new i.PredictorStream(new i.LZWStream(t,a,g),a,l)):new i.LZWStream(t,a,g)}return"DCTDecode"===r||"DCT"===r?(m[o.StreamType.DCT]=!0,new d.JpegStream(t,a,t.dict,l)):"JPXDecode"===r||"JPX"===r?(m[o.StreamType.JPX]=!0,new p.JpxStream(t,a,t.dict,l)):"ASCII85Decode"===r||"A85"===r?(m[o.StreamType.A85]=!0,new i.Ascii85Stream(t,a)):"ASCIIHexDecode"===r||"AHx"===r?(m[o.StreamType.AHX]=!0,new i.AsciiHexStream(t,a)):"CCITTFaxDecode"===r||"CCF"===r?(m[o.StreamType.CCF]=!0,new u.CCITTFaxStream(t,a,l)):"RunLengthDecode"===r||"RL"===r?(m[o.StreamType.RLX]=!0,new i.RunLengthStream(t,a)):"JBIG2Decode"===r?(m[o.StreamType.JBIG]=!0,new h.Jbig2Stream(t,a,t.dict,l)):((0,o.warn)('Filter "'.concat(r,'" is not supported.')),t)}catch(t){if(t instanceof c.MissingDataException)throw t;return(0,o.warn)('Invalid stream: "'.concat(t,'"')),new i.NullStream}}}]),Parser}();r.Parser=m;var g=[1,0,0,0,0,0,0,0,0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,2,0,0,2,2,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];function toHexDigit(t){return t>=48&&t<=57?15&t:t>=65&&t<=70||t>=97&&t<=102?9+(15&t):-1}var b=function(){function Lexer(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;_classCallCheck(this,Lexer),this.stream=t,this.nextChar(),this.strBuf=[],this.knownCommands=r,this._hexStringNumWarn=0,this.beginInlineImagePos=-1}return _createClass(Lexer,[{key:"nextChar",value:function nextChar(){return this.currentChar=this.stream.getByte()}},{key:"peekChar",value:function peekChar(){return this.stream.peekByte()}},{key:"getNumber",value:function getNumber(){var t=this.currentChar,r=!1,a=0,i=0;if(45===t?(i=-1,45===(t=this.nextChar())&&(t=this.nextChar())):43===t&&(i=1,t=this.nextChar()),10===t||13===t)do{t=this.nextChar()}while(10===t||13===t);if(46===t&&(a=10,t=this.nextChar()),t<48||t>57){if(10===a&&0===i&&((0,c.isWhiteSpace)(t)||-1===t))return(0,o.warn)("Lexer.getNumber - treating a single decimal point as zero."),0;throw new o.FormatError("Invalid number: ".concat(String.fromCharCode(t)," (charCode ").concat(t,")"))}i=i||1;for(var l=t-48,u=0,h=1;(t=this.nextChar())>=0;)if(t>=48&&t<=57){var d=t-48;r?u=10*u+d:(0!==a&&(a*=10),l=10*l+d)}else if(46===t){if(0!==a)break;a=1}else if(45===t)(0,o.warn)("Badly formatted number: minus sign in the middle");else{if(69!==t&&101!==t)break;if(43===(t=this.peekChar())||45===t)h=45===t?-1:1,this.nextChar();else if(t<48||t>57)break;r=!0}return 0!==a&&(l/=a),r&&(l*=Math.pow(10,h*u)),i*l}},{key:"getString",value:function getString(){var t=1,r=!1,a=this.strBuf;a.length=0;for(var i=this.nextChar();;){var l=!1;switch(0|i){case-1:(0,o.warn)("Unterminated string"),r=!0;break;case 40:++t,a.push("(");break;case 41:0==--t?(this.nextChar(),r=!0):a.push(")");break;case 92:switch(i=this.nextChar()){case-1:(0,o.warn)("Unterminated string"),r=!0;break;case 110:a.push("\n");break;case 114:a.push("\r");break;case 116:a.push("\t");break;case 98:a.push("\b");break;case 102:a.push("\f");break;case 92:case 40:case 41:a.push(String.fromCharCode(i));break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:var c=15&i;l=!0,(i=this.nextChar())>=48&&i<=55&&(c=(c<<3)+(15&i),(i=this.nextChar())>=48&&i<=55&&(l=!1,c=(c<<3)+(15&i))),a.push(String.fromCharCode(c));break;case 13:10===this.peekChar()&&this.nextChar();break;case 10:break;default:a.push(String.fromCharCode(i))}break;default:a.push(String.fromCharCode(i))}if(r)break;l||(i=this.nextChar())}return a.join("")}},{key:"getName",value:function getName(){var t,r,a=this.strBuf;for(a.length=0;(t=this.nextChar())>=0&&!g[t];)if(35===t){if(t=this.nextChar(),g[t]){(0,o.warn)("Lexer_getName: NUMBER SIGN (#) should be followed by a hexadecimal number."),a.push("#");break}var i=toHexDigit(t);if(-1!==i){r=t;var c=toHexDigit(t=this.nextChar());if(-1===c){if((0,o.warn)("Lexer_getName: Illegal digit (".concat(String.fromCharCode(t),") ")+"in hexadecimal number."),a.push("#",String.fromCharCode(r)),g[t])break;a.push(String.fromCharCode(t));continue}a.push(String.fromCharCode(i<<4|c))}else a.push("#",String.fromCharCode(t))}else a.push(String.fromCharCode(t));return a.length>127&&(0,o.warn)("Name token is longer than allowed by the spec: ".concat(a.length)),l.Name.get(a.join(""))}},{key:"_hexStringWarn",value:function _hexStringWarn(t){5!=this._hexStringNumWarn++?this._hexStringNumWarn>5||(0,o.warn)("getHexString - ignoring invalid character: ".concat(t)):(0,o.warn)("getHexString - ignoring additional invalid characters.")}},{key:"getHexString",value:function getHexString(){var t=this.strBuf;t.length=0;var r,a,i=this.currentChar,l=!0;for(this._hexStringNumWarn=0;;){if(i<0){(0,o.warn)("Unterminated hex string");break}if(62===i){this.nextChar();break}if(1!==g[i]){if(l){if(-1===(r=toHexDigit(i))){this._hexStringWarn(i),i=this.nextChar();continue}}else{if(-1===(a=toHexDigit(i))){this._hexStringWarn(i),i=this.nextChar();continue}t.push(String.fromCharCode(r<<4|a))}l=!l,i=this.nextChar()}else i=this.nextChar()}return t.join("")}},{key:"getObj",value:function getObj(){for(var t=!1,r=this.currentChar;;){if(r<0)return l.EOF;if(t)10!==r&&13!==r||(t=!1);else if(37===r)t=!0;else if(1!==g[r])break;r=this.nextChar()}switch(0|r){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 43:case 45:case 46:return this.getNumber();case 40:return this.getString();case 47:return this.getName();case 91:return this.nextChar(),l.Cmd.get("[");case 93:return this.nextChar(),l.Cmd.get("]");case 60:return 60===(r=this.nextChar())?(this.nextChar(),l.Cmd.get("<<")):this.getHexString();case 62:return 62===(r=this.nextChar())?(this.nextChar(),l.Cmd.get(">>")):l.Cmd.get(">");case 123:return this.nextChar(),l.Cmd.get("{");case 125:return this.nextChar(),l.Cmd.get("}");case 41:throw this.nextChar(),new o.FormatError("Illegal character: ".concat(r))}for(var a=String.fromCharCode(r),i=this.knownCommands,c=i&&void 0!==i[a];(r=this.nextChar())>=0&&!g[r];){var u=a+String.fromCharCode(r);if(c&&void 0===i[u])break;if(128===a.length)throw new o.FormatError("Command token too long: ".concat(a.length));a=u,c=i&&void 0!==i[a]}return"true"===a||"false"!==a&&("null"===a?null:("BI"===a&&(this.beginInlineImagePos=this.stream.pos),l.Cmd.get(a)))}},{key:"skipToNextLine",value:function skipToNextLine(){for(var t=this.currentChar;t>=0;){if(13===t){10===(t=this.nextChar())&&this.nextChar();break}if(10===t){this.nextChar();break}t=this.nextChar()}}}]),Lexer}();r.Lexer=b;var y=function(){function Linearization(){_classCallCheck(this,Linearization)}return _createClass(Linearization,null,[{key:"create",value:function create(t){function getInt(t,r){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t.get(r);if(Number.isInteger(i)&&(a?i>=0:i>0))return i;throw new Error('The "'.concat(r,'" parameter in the linearization ')+"dictionary is invalid.")}var r,a,i=new m({lexer:new b(t),xref:null}),c=i.getObj(),u=i.getObj(),h=i.getObj(),d=i.getObj();if(!(Number.isInteger(c)&&Number.isInteger(u)&&(0,l.isCmd)(h,"obj")&&(0,l.isDict)(d)&&(0,o.isNum)(r=d.get("Linearized"))&&r>0))return null;if((a=getInt(d,"L"))!==t.length)throw new Error('The "L" parameter in the linearization dictionary does not equal the stream length.');return{length:a,hints:function getHints(t){var r,a=t.get("H");if(Array.isArray(a)&&(2===(r=a.length)||4===r)){for(var i=0;i<r;i++){var o=a[i];if(!(Number.isInteger(o)&&o>0))throw new Error("Hint (".concat(i,") in the linearization dictionary is invalid."))}return a}throw new Error("Hint array in the linearization dictionary is invalid.")}(d),objectNumberFirst:getInt(d,"O"),endFirst:getInt(d,"E"),numPages:getInt(d,"N"),mainXRefEntriesOffset:getInt(d,"T"),pageFirst:d.has("P")?getInt(d,"P",!0):0}}}]),Linearization}();r.Linearization=y},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.LZWStream=r.StringStream=r.StreamsSequenceStream=r.Stream=r.RunLengthStream=r.PredictorStream=r.NullStream=r.FlateStream=r.DecodeStream=r.DecryptStream=r.AsciiHexStream=r.Ascii85Stream=void 0;var i=a(5),o=a(198),l=a(201);function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}var c=function StreamClosure(){function Stream(t,r,a,i){this.bytes=t instanceof Uint8Array?t:new Uint8Array(t),this.start=r||0,this.pos=this.start,this.end=r+a||this.bytes.length,this.dict=i}return Stream.prototype={get length(){return this.end-this.start},get isEmpty(){return 0===this.length},getByte:function Stream_getByte(){return this.pos>=this.end?-1:this.bytes[this.pos++]},getUint16:function Stream_getUint16(){var t=this.getByte(),r=this.getByte();return-1===t||-1===r?-1:(t<<8)+r},getInt32:function Stream_getInt32(){return(this.getByte()<<24)+(this.getByte()<<16)+(this.getByte()<<8)+this.getByte()},getBytes:function getBytes(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.bytes,i=this.pos,o=this.end;if(!t){var l=a.subarray(i,o);return r?new Uint8ClampedArray(l):l}var c=i+t;c>o&&(c=o),this.pos=c;var u=a.subarray(i,c);return r?new Uint8ClampedArray(u):u},peekByte:function Stream_peekByte(){var t=this.getByte();return-1!==t&&this.pos--,t},peekBytes:function peekBytes(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.getBytes(t,r);return this.pos-=a.length,a},getByteRange:function getByteRange(t,r){return t<0&&(t=0),r>this.end&&(r=this.end),this.bytes.subarray(t,r)},skip:function Stream_skip(t){t||(t=1),this.pos+=t},reset:function Stream_reset(){this.pos=this.start},moveStart:function Stream_moveStart(){this.start=this.pos},makeSubStream:function Stream_makeSubStream(t,r,a){return new Stream(this.bytes.buffer,t,r,a)}},Stream}();r.Stream=c;var u=function StringStreamClosure(){function StringStream(t){var r=(0,i.stringToBytes)(t);c.call(this,r)}return StringStream.prototype=c.prototype,StringStream}();r.StringStream=u;var h=function DecodeStreamClosure(){var t=new Uint8Array(0);function DecodeStream(r){if(this._rawMinBufferLength=r||0,this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=t,this.minBufferLength=512,r)for(;this.minBufferLength<r;)this.minBufferLength*=2}return DecodeStream.prototype={get isEmpty(){for(;!this.eof&&0===this.bufferLength;)this.readBlock();return 0===this.bufferLength},ensureBuffer:function DecodeStream_ensureBuffer(t){var r=this.buffer;if(t<=r.byteLength)return r;for(var a=this.minBufferLength;a<t;)a*=2;var i=new Uint8Array(a);return i.set(r),this.buffer=i},getByte:function DecodeStream_getByte(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return-1;this.readBlock()}return this.buffer[this.pos++]},getUint16:function DecodeStream_getUint16(){var t=this.getByte(),r=this.getByte();return-1===t||-1===r?-1:(t<<8)+r},getInt32:function DecodeStream_getInt32(){return(this.getByte()<<24)+(this.getByte()<<16)+(this.getByte()<<8)+this.getByte()},getBytes:function getBytes(t){var r,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.pos;if(t){for(this.ensureBuffer(i+t),r=i+t;!this.eof&&this.bufferLength<r;)this.readBlock();var o=this.bufferLength;r>o&&(r=o)}else{for(;!this.eof;)this.readBlock();r=this.bufferLength}this.pos=r;var l=this.buffer.subarray(i,r);return!a||l instanceof Uint8ClampedArray?l:new Uint8ClampedArray(l)},peekByte:function DecodeStream_peekByte(){var t=this.getByte();return-1!==t&&this.pos--,t},peekBytes:function peekBytes(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.getBytes(t,r);return this.pos-=a.length,a},makeSubStream:function DecodeStream_makeSubStream(t,r,a){for(var i=t+r;this.bufferLength<=i&&!this.eof;)this.readBlock();return new c(this.buffer,t,r,a)},getByteRange:function getByteRange(t,r){(0,i.unreachable)("Should not call DecodeStream.getByteRange")},skip:function DecodeStream_skip(t){t||(t=1),this.pos+=t},reset:function DecodeStream_reset(){this.pos=0},getBaseStreams:function DecodeStream_getBaseStreams(){return this.str&&this.str.getBaseStreams?this.str.getBaseStreams():[]}},DecodeStream}();r.DecodeStream=h;var d=function StreamsSequenceStreamClosure(){function StreamsSequenceStream(t){this.streams=t;for(var r=0,a=0,i=t.length;a<i;a++){var o=t[a];r+=o instanceof h?o._rawMinBufferLength:o.length}h.call(this,r)}return StreamsSequenceStream.prototype=Object.create(h.prototype),StreamsSequenceStream.prototype.readBlock=function streamSequenceStreamReadBlock(){var t=this.streams;if(0!==t.length){var r=t.shift().getBytes(),a=this.bufferLength,i=a+r.length;this.ensureBuffer(i).set(r,a),this.bufferLength=i}else this.eof=!0},StreamsSequenceStream.prototype.getBaseStreams=function StreamsSequenceStream_getBaseStreams(){for(var t=[],r=0,a=this.streams.length;r<a;r++){var i=this.streams[r];i.getBaseStreams&&t.push.apply(t,_toConsumableArray(i.getBaseStreams()))}return t},StreamsSequenceStream}();r.StreamsSequenceStream=d;var p=function FlateStreamClosure(){var t=new Int32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),r=new Int32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),a=new Int32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),o=[new Int32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],l=[new Int32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];function FlateStream(t,r){this.str=t,this.dict=t.dict;var a=t.getByte(),o=t.getByte();if(-1===a||-1===o)throw new i.FormatError("Invalid header in flate stream: ".concat(a,", ").concat(o));if(8!=(15&a))throw new i.FormatError("Unknown compression method in flate stream: ".concat(a,", ").concat(o));if(((a<<8)+o)%31!=0)throw new i.FormatError("Bad FCHECK in flate stream: ".concat(a,", ").concat(o));if(32&o)throw new i.FormatError("FDICT bit set in flate stream: ".concat(a,", ").concat(o));this.codeSize=0,this.codeBuf=0,h.call(this,r)}return FlateStream.prototype=Object.create(h.prototype),FlateStream.prototype.getBits=function FlateStream_getBits(t){for(var r,a=this.str,o=this.codeSize,l=this.codeBuf;o<t;){if(-1===(r=a.getByte()))throw new i.FormatError("Bad encoding in flate stream");l|=r<<o,o+=8}return r=l&(1<<t)-1,this.codeBuf=l>>t,this.codeSize=o-=t,r},FlateStream.prototype.getCode=function FlateStream_getCode(t){for(var r,a=this.str,o=t[0],l=t[1],c=this.codeSize,u=this.codeBuf;c<l&&-1!==(r=a.getByte());)u|=r<<c,c+=8;var h=o[u&(1<<l)-1],d=h>>16,p=65535&h;if(d<1||c<d)throw new i.FormatError("Bad encoding in flate stream");return this.codeBuf=u>>d,this.codeSize=c-d,p},FlateStream.prototype.generateHuffmanTable=function flateStreamGenerateHuffmanTable(t){var r,a=t.length,i=0;for(r=0;r<a;++r)t[r]>i&&(i=t[r]);for(var o=1<<i,l=new Int32Array(o),c=1,u=0,h=2;c<=i;++c,u<<=1,h<<=1)for(var d=0;d<a;++d)if(t[d]===c){var p=0,m=u;for(r=0;r<c;++r)p=p<<1|1&m,m>>=1;for(r=p;r<o;r+=h)l[r]=c<<16|d;++u}return[l,i]},FlateStream.prototype.readBlock=function FlateStream_readBlock(){var c,u,h=this.str,d=this.getBits(3);if(1&d&&(this.eof=!0),0!==(d>>=1)){var p,m;if(1===d)p=o,m=l;else{if(2!==d)throw new i.FormatError("Unknown block type in flate stream");var g,b=this.getBits(5)+257,y=this.getBits(5)+1,v=this.getBits(4)+4,S=new Uint8Array(t.length);for(g=0;g<v;++g)S[t[g]]=this.getBits(3);var k=this.generateHuffmanTable(S);u=0,g=0;for(var w,C,x,_=b+y,A=new Uint8Array(_);g<_;){var R=this.getCode(k);if(16===R)w=2,C=3,x=u;else if(17===R)w=3,C=3,x=u=0;else{if(18!==R){A[g++]=u=R;continue}w=7,C=11,x=u=0}for(var T=this.getBits(w)+C;T-- >0;)A[g++]=x}p=this.generateHuffmanTable(A.subarray(0,b)),m=this.generateHuffmanTable(A.subarray(b,_))}for(var I=(c=this.buffer)?c.length:0,P=this.bufferLength;;){var O=this.getCode(p);if(O<256)P+1>=I&&(I=(c=this.ensureBuffer(P+1)).length),c[P++]=O;else{if(256===O)return void(this.bufferLength=P);var E=(O=r[O-=257])>>16;E>0&&(E=this.getBits(E)),u=(65535&O)+E,O=this.getCode(m),(E=(O=a[O])>>16)>0&&(E=this.getBits(E));var B=(65535&O)+E;P+u>=I&&(I=(c=this.ensureBuffer(P+u)).length);for(var D=0;D<u;++D,++P)c[P]=c[P-B]}}}else{var M;if(-1===(M=h.getByte()))throw new i.FormatError("Bad block header in flate stream");var L=M;if(-1===(M=h.getByte()))throw new i.FormatError("Bad block header in flate stream");if(L|=M<<8,-1===(M=h.getByte()))throw new i.FormatError("Bad block header in flate stream");var N=M;if(-1===(M=h.getByte()))throw new i.FormatError("Bad block header in flate stream");if((N|=M<<8)!==(65535&~L)&&(0!==L||0!==N))throw new i.FormatError("Bad uncompressed block length in flate stream");this.codeBuf=0,this.codeSize=0;var U=this.bufferLength,j=U+L;if(c=this.ensureBuffer(j),this.bufferLength=j,0===L)-1===h.peekByte()&&(this.eof=!0);else{var q=h.getBytes(L);c.set(q,U),q.length<L&&(this.eof=!0)}}},FlateStream}();r.FlateStream=p;var m=function PredictorStreamClosure(){function PredictorStream(t,r,a){if(!(0,o.isDict)(a))return t;var l=this.predictor=a.get("Predictor")||1;if(l<=1)return t;if(2!==l&&(l<10||l>15))throw new i.FormatError("Unsupported predictor: ".concat(l));this.readBlock=2===l?this.readBlockTiff:this.readBlockPng,this.str=t,this.dict=t.dict;var c=this.colors=a.get("Colors")||1,u=this.bits=a.get("BitsPerComponent")||8,d=this.columns=a.get("Columns")||1;return this.pixBytes=c*u+7>>3,this.rowBytes=d*c*u+7>>3,h.call(this,r),this}return PredictorStream.prototype=Object.create(h.prototype),PredictorStream.prototype.readBlockTiff=function predictorStreamReadBlockTiff(){var t=this.rowBytes,r=this.bufferLength,a=this.ensureBuffer(r+t),i=this.bits,o=this.colors,l=this.str.getBytes(t);if(this.eof=!l.length,!this.eof){var c,u=0,h=0,d=0,p=0,m=r;if(1===i&&1===o)for(c=0;c<t;++c){var g=l[c]^u;g^=g>>1,g^=g>>2,u=(1&(g^=g>>4))<<7,a[m++]=g}else if(8===i){for(c=0;c<o;++c)a[m++]=l[c];for(;c<t;++c)a[m]=a[m-o]+l[c],m++}else if(16===i){var b=2*o;for(c=0;c<b;++c)a[m++]=l[c];for(;c<t;c+=2){var y=((255&l[c])<<8)+(255&l[c+1])+((255&a[m-b])<<8)+(255&a[m-b+1]);a[m++]=y>>8&255,a[m++]=255&y}}else{var v=new Uint8Array(o+1),S=(1<<i)-1,k=0,w=r,C=this.columns;for(c=0;c<C;++c)for(var x=0;x<o;++x)d<i&&(u=u<<8|255&l[k++],d+=8),v[x]=v[x]+(u>>d-i)&S,d-=i,h=h<<i|v[x],(p+=i)>=8&&(a[w++]=h>>p-8&255,p-=8);p>0&&(a[w++]=(h<<8-p)+(u&(1<<8-p)-1))}this.bufferLength+=t}},PredictorStream.prototype.readBlockPng=function predictorStreamReadBlockPng(){var t=this.rowBytes,r=this.pixBytes,a=this.str.getByte(),o=this.str.getBytes(t);if(this.eof=!o.length,!this.eof){var l=this.bufferLength,c=this.ensureBuffer(l+t),u=c.subarray(l-t,l);0===u.length&&(u=new Uint8Array(t));var h,d,p,m=l;switch(a){case 0:for(h=0;h<t;++h)c[m++]=o[h];break;case 1:for(h=0;h<r;++h)c[m++]=o[h];for(;h<t;++h)c[m]=c[m-r]+o[h]&255,m++;break;case 2:for(h=0;h<t;++h)c[m++]=u[h]+o[h]&255;break;case 3:for(h=0;h<r;++h)c[m++]=(u[h]>>1)+o[h];for(;h<t;++h)c[m]=(u[h]+c[m-r]>>1)+o[h]&255,m++;break;case 4:for(h=0;h<r;++h)d=u[h],p=o[h],c[m++]=d+p;for(;h<t;++h){d=u[h];var g=u[h-r],b=c[m-r],y=b+d-g,v=y-b;v<0&&(v=-v);var S=y-d;S<0&&(S=-S);var k=y-g;k<0&&(k=-k),p=o[h],c[m++]=v<=S&&v<=k?b+p:S<=k?d+p:g+p}break;default:throw new i.FormatError("Unsupported predictor: ".concat(a))}this.bufferLength+=t}},PredictorStream}();r.PredictorStream=m;var g=function DecryptStreamClosure(){function DecryptStream(t,r,a){this.str=t,this.dict=t.dict,this.decrypt=a,this.nextChunk=null,this.initialized=!1,h.call(this,r)}return DecryptStream.prototype=Object.create(h.prototype),DecryptStream.prototype.readBlock=function DecryptStream_readBlock(){var t;if(this.initialized?t=this.nextChunk:(t=this.str.getBytes(512),this.initialized=!0),t&&0!==t.length){this.nextChunk=this.str.getBytes(512);var r=this.nextChunk&&this.nextChunk.length>0;t=(0,this.decrypt)(t,!r);var a,i=this.bufferLength,o=t.length,l=this.ensureBuffer(i+o);for(a=0;a<o;a++)l[i++]=t[a];this.bufferLength=i}else this.eof=!0},DecryptStream}();r.DecryptStream=g;var b=function Ascii85StreamClosure(){function Ascii85Stream(t,r){this.str=t,this.dict=t.dict,this.input=new Uint8Array(5),r&&(r*=.8),h.call(this,r)}return Ascii85Stream.prototype=Object.create(h.prototype),Ascii85Stream.prototype.readBlock=function Ascii85Stream_readBlock(){for(var t=this.str,r=t.getByte();(0,l.isWhiteSpace)(r);)r=t.getByte();if(-1!==r&&126!==r){var a,i,o=this.bufferLength;if(122===r){for(a=this.ensureBuffer(o+4),i=0;i<4;++i)a[o+i]=0;this.bufferLength+=4}else{var c=this.input;for(c[0]=r,i=1;i<5;++i){for(r=t.getByte();(0,l.isWhiteSpace)(r);)r=t.getByte();if(c[i]=r,-1===r||126===r)break}if(a=this.ensureBuffer(o+i-1),this.bufferLength+=i-1,i<5){for(;i<5;++i)c[i]=117;this.eof=!0}var u=0;for(i=0;i<5;++i)u=85*u+(c[i]-33);for(i=3;i>=0;--i)a[o+i]=255&u,u>>=8}}else this.eof=!0},Ascii85Stream}();r.Ascii85Stream=b;var y=function AsciiHexStreamClosure(){function AsciiHexStream(t,r){this.str=t,this.dict=t.dict,this.firstDigit=-1,r&&(r*=.5),h.call(this,r)}return AsciiHexStream.prototype=Object.create(h.prototype),AsciiHexStream.prototype.readBlock=function AsciiHexStream_readBlock(){var t=this.str.getBytes(8e3);if(t.length){for(var r=t.length+1>>1,a=this.ensureBuffer(this.bufferLength+r),i=this.bufferLength,o=this.firstDigit,l=0,c=t.length;l<c;l++){var u,h=t[l];if(h>=48&&h<=57)u=15&h;else{if(!(h>=65&&h<=70||h>=97&&h<=102)){if(62===h){this.eof=!0;break}continue}u=9+(15&h)}o<0?o=u:(a[i++]=o<<4|u,o=-1)}o>=0&&this.eof&&(a[i++]=o<<4,o=-1),this.firstDigit=o,this.bufferLength=i}else this.eof=!0},AsciiHexStream}();r.AsciiHexStream=y;var v=function RunLengthStreamClosure(){function RunLengthStream(t,r){this.str=t,this.dict=t.dict,h.call(this,r)}return RunLengthStream.prototype=Object.create(h.prototype),RunLengthStream.prototype.readBlock=function RunLengthStream_readBlock(){var t=this.str.getBytes(2);if(!t||t.length<2||128===t[0])this.eof=!0;else{var r,a=this.bufferLength,i=t[0];if(i<128){if((r=this.ensureBuffer(a+i+1))[a++]=t[1],i>0){var o=this.str.getBytes(i);r.set(o,a),a+=i}}else{i=257-i;var l=t[1];r=this.ensureBuffer(a+i+1);for(var c=0;c<i;c++)r[a++]=l}this.bufferLength=a}},RunLengthStream}();r.RunLengthStream=v;var S=function LZWStreamClosure(){function LZWStream(t,r,a){this.str=t,this.dict=t.dict,this.cachedData=0,this.bitsCached=0;for(var i=4096,o={earlyChange:a,codeLength:9,nextCode:258,dictionaryValues:new Uint8Array(i),dictionaryLengths:new Uint16Array(i),dictionaryPrevCodes:new Uint16Array(i),currentSequence:new Uint8Array(i),currentSequenceLength:0},l=0;l<256;++l)o.dictionaryValues[l]=l,o.dictionaryLengths[l]=1;this.lzwState=o,h.call(this,r)}return LZWStream.prototype=Object.create(h.prototype),LZWStream.prototype.readBits=function LZWStream_readBits(t){for(var r=this.bitsCached,a=this.cachedData;r<t;){var i=this.str.getByte();if(-1===i)return this.eof=!0,null;a=a<<8|i,r+=8}return this.bitsCached=r-=t,this.cachedData=a,this.lastCode=null,a>>>r&(1<<t)-1},LZWStream.prototype.readBlock=function LZWStream_readBlock(){var t,r,a,i=1024,o=this.lzwState;if(o){var l=o.earlyChange,c=o.nextCode,u=o.dictionaryValues,h=o.dictionaryLengths,d=o.dictionaryPrevCodes,p=o.codeLength,m=o.prevCode,g=o.currentSequence,b=o.currentSequenceLength,y=0,v=this.bufferLength,S=this.ensureBuffer(this.bufferLength+i);for(t=0;t<512;t++){var k=this.readBits(p),w=b>0;if(k<256)g[0]=k,b=1;else{if(!(k>=258)){if(256===k){p=9,c=258,b=0;continue}this.eof=!0,delete this.lzwState;break}if(k<c)for(r=(b=h[k])-1,a=k;r>=0;r--)g[r]=u[a],a=d[a];else g[b++]=g[0]}if(w&&(d[c]=m,h[c]=h[m]+1,u[c]=g[0],p=++c+l&c+l-1?p:0|Math.min(Math.log(c+l)/.6931471805599453+1,12)),m=k,i<(y+=b)){do{i+=512}while(i<y);S=this.ensureBuffer(this.bufferLength+i)}for(r=0;r<b;r++)S[v++]=g[r]}o.nextCode=c,o.codeLength=p,o.prevCode=m,o.currentSequenceLength=b,this.bufferLength=v}},LZWStream}();r.LZWStream=S;var k=function NullStreamClosure(){function NullStream(){c.call(this,new Uint8Array(0))}return NullStream.prototype=c.prototype,NullStream}();r.NullStream=k},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CCITTFaxStream=void 0;var i=a(198),o=a(207),l=a(205),c=function CCITTFaxStreamClosure(){function CCITTFaxStream(t,r,a){this.str=t,this.dict=t.dict,(0,i.isDict)(a)||(a=i.Dict.empty);var c={next:function next(){return t.getByte()}};this.ccittFaxDecoder=new o.CCITTFaxDecoder(c,{K:a.get("K"),EndOfLine:a.get("EndOfLine"),EncodedByteAlign:a.get("EncodedByteAlign"),Columns:a.get("Columns"),Rows:a.get("Rows"),EndOfBlock:a.get("EndOfBlock"),BlackIs1:a.get("BlackIs1")}),l.DecodeStream.call(this,r)}return CCITTFaxStream.prototype=Object.create(l.DecodeStream.prototype),CCITTFaxStream.prototype.readBlock=function(){for(;!this.eof;){var t=this.ccittFaxDecoder.readNextChar();if(-1===t)return void(this.eof=!0);this.ensureBuffer(this.bufferLength+1),this.buffer[this.bufferLength++]=t}},CCITTFaxStream}();r.CCITTFaxStream=c},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CCITTFaxDecoder=void 0;var i=a(5),o=function CCITTFaxDecoder(){var t=-1,r=[[-1,-1],[-1,-1],[7,8],[7,7],[6,6],[6,6],[6,5],[6,5],[4,0],[4,0],[4,0],[4,0],[4,0],[4,0],[4,0],[4,0],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2]],a=[[-1,-1],[12,-2],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[11,1792],[11,1792],[12,1984],[12,2048],[12,2112],[12,2176],[12,2240],[12,2304],[11,1856],[11,1856],[11,1920],[11,1920],[12,2368],[12,2432],[12,2496],[12,2560]],o=[[-1,-1],[-1,-1],[-1,-1],[-1,-1],[8,29],[8,29],[8,30],[8,30],[8,45],[8,45],[8,46],[8,46],[7,22],[7,22],[7,22],[7,22],[7,23],[7,23],[7,23],[7,23],[8,47],[8,47],[8,48],[8,48],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[7,20],[7,20],[7,20],[7,20],[8,33],[8,33],[8,34],[8,34],[8,35],[8,35],[8,36],[8,36],[8,37],[8,37],[8,38],[8,38],[7,19],[7,19],[7,19],[7,19],[8,31],[8,31],[8,32],[8,32],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[8,53],[8,53],[8,54],[8,54],[7,26],[7,26],[7,26],[7,26],[8,39],[8,39],[8,40],[8,40],[8,41],[8,41],[8,42],[8,42],[8,43],[8,43],[8,44],[8,44],[7,21],[7,21],[7,21],[7,21],[7,28],[7,28],[7,28],[7,28],[8,61],[8,61],[8,62],[8,62],[8,63],[8,63],[8,0],[8,0],[8,320],[8,320],[8,384],[8,384],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[7,27],[7,27],[7,27],[7,27],[8,59],[8,59],[8,60],[8,60],[9,1472],[9,1536],[9,1600],[9,1728],[7,18],[7,18],[7,18],[7,18],[7,24],[7,24],[7,24],[7,24],[8,49],[8,49],[8,50],[8,50],[8,51],[8,51],[8,52],[8,52],[7,25],[7,25],[7,25],[7,25],[8,55],[8,55],[8,56],[8,56],[8,57],[8,57],[8,58],[8,58],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[8,448],[8,448],[8,512],[8,512],[9,704],[9,768],[8,640],[8,640],[8,576],[8,576],[9,832],[9,896],[9,960],[9,1024],[9,1088],[9,1152],[9,1216],[9,1280],[9,1344],[9,1408],[7,256],[7,256],[7,256],[7,256],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7]],l=[[-1,-1],[-1,-1],[12,-2],[12,-2],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[11,1792],[11,1792],[11,1792],[11,1792],[12,1984],[12,1984],[12,2048],[12,2048],[12,2112],[12,2112],[12,2176],[12,2176],[12,2240],[12,2240],[12,2304],[12,2304],[11,1856],[11,1856],[11,1856],[11,1856],[11,1920],[11,1920],[11,1920],[11,1920],[12,2368],[12,2368],[12,2432],[12,2432],[12,2496],[12,2496],[12,2560],[12,2560],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[12,52],[12,52],[13,640],[13,704],[13,768],[13,832],[12,55],[12,55],[12,56],[12,56],[13,1280],[13,1344],[13,1408],[13,1472],[12,59],[12,59],[12,60],[12,60],[13,1536],[13,1600],[11,24],[11,24],[11,24],[11,24],[11,25],[11,25],[11,25],[11,25],[13,1664],[13,1728],[12,320],[12,320],[12,384],[12,384],[12,448],[12,448],[13,512],[13,576],[12,53],[12,53],[12,54],[12,54],[13,896],[13,960],[13,1024],[13,1088],[13,1152],[13,1216],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64]],c=[[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[11,23],[11,23],[12,50],[12,51],[12,44],[12,45],[12,46],[12,47],[12,57],[12,58],[12,61],[12,256],[10,16],[10,16],[10,16],[10,16],[10,17],[10,17],[10,17],[10,17],[12,48],[12,49],[12,62],[12,63],[12,30],[12,31],[12,32],[12,33],[12,40],[12,41],[11,22],[11,22],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[12,128],[12,192],[12,26],[12,27],[12,28],[12,29],[11,19],[11,19],[11,20],[11,20],[12,34],[12,35],[12,36],[12,37],[12,38],[12,39],[11,21],[11,21],[12,42],[12,43],[10,0],[10,0],[10,0],[10,0],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12]],u=[[-1,-1],[-1,-1],[-1,-1],[-1,-1],[6,9],[6,8],[5,7],[5,7],[4,6],[4,6],[4,6],[4,6],[4,5],[4,5],[4,5],[4,5],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2]];function CCITTFaxDecoder(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||"function"!=typeof t.next)throw new Error('CCITTFaxDecoder - invalid "source" parameter.');this.source=t,this.eof=!1,this.encoding=r.K||0,this.eoline=r.EndOfLine||!1,this.byteAlign=r.EncodedByteAlign||!1,this.columns=r.Columns||1728,this.rows=r.Rows||0;var a,i=r.EndOfBlock;for(null==i&&(i=!0),this.eoblock=i,this.black=r.BlackIs1||!1,this.codingLine=new Uint32Array(this.columns+1),this.refLine=new Uint32Array(this.columns+2),this.codingLine[0]=this.columns,this.codingPos=0,this.row=0,this.nextLine2D=this.encoding<0,this.inputBits=0,this.inputBuf=0,this.outputBits=0,this.rowsDone=!1;0===(a=this._lookBits(12));)this._eatBits(1);1===a&&this._eatBits(12),this.encoding>0&&(this.nextLine2D=!this._lookBits(1),this._eatBits(1))}return CCITTFaxDecoder.prototype={readNextChar:function readNextChar(){if(this.eof)return-1;var r,a,o,l,c,u=this.refLine,h=this.codingLine,d=this.columns;if(0===this.outputBits){if(this.rowsDone&&(this.eof=!0),this.eof)return-1;var p,m,g;if(this.err=!1,this.nextLine2D){for(l=0;h[l]<d;++l)u[l]=h[l];for(u[l++]=d,u[l]=d,h[0]=0,this.codingPos=0,r=0,a=0;h[this.codingPos]<d;)switch(p=this._getTwoDimCode()){case 0:this._addPixels(u[r+1],a),u[r+1]<d&&(r+=2);break;case 1:if(p=m=0,a){do{p+=g=this._getBlackCode()}while(g>=64);do{m+=g=this._getWhiteCode()}while(g>=64)}else{do{p+=g=this._getWhiteCode()}while(g>=64);do{m+=g=this._getBlackCode()}while(g>=64)}for(this._addPixels(h[this.codingPos]+p,a),h[this.codingPos]<d&&this._addPixels(h[this.codingPos]+m,1^a);u[r]<=h[this.codingPos]&&u[r]<d;)r+=2;break;case 7:if(this._addPixels(u[r]+3,a),a^=1,h[this.codingPos]<d)for(++r;u[r]<=h[this.codingPos]&&u[r]<d;)r+=2;break;case 5:if(this._addPixels(u[r]+2,a),a^=1,h[this.codingPos]<d)for(++r;u[r]<=h[this.codingPos]&&u[r]<d;)r+=2;break;case 3:if(this._addPixels(u[r]+1,a),a^=1,h[this.codingPos]<d)for(++r;u[r]<=h[this.codingPos]&&u[r]<d;)r+=2;break;case 2:if(this._addPixels(u[r],a),a^=1,h[this.codingPos]<d)for(++r;u[r]<=h[this.codingPos]&&u[r]<d;)r+=2;break;case 8:if(this._addPixelsNeg(u[r]-3,a),a^=1,h[this.codingPos]<d)for(r>0?--r:++r;u[r]<=h[this.codingPos]&&u[r]<d;)r+=2;break;case 6:if(this._addPixelsNeg(u[r]-2,a),a^=1,h[this.codingPos]<d)for(r>0?--r:++r;u[r]<=h[this.codingPos]&&u[r]<d;)r+=2;break;case 4:if(this._addPixelsNeg(u[r]-1,a),a^=1,h[this.codingPos]<d)for(r>0?--r:++r;u[r]<=h[this.codingPos]&&u[r]<d;)r+=2;break;case t:this._addPixels(d,0),this.eof=!0;break;default:(0,i.info)("bad 2d code"),this._addPixels(d,0),this.err=!0}}else for(h[0]=0,this.codingPos=0,a=0;h[this.codingPos]<d;){if(p=0,a)do{p+=g=this._getBlackCode()}while(g>=64);else do{p+=g=this._getWhiteCode()}while(g>=64);this._addPixels(h[this.codingPos]+p,a),a^=1}var b=!1;if(this.byteAlign&&(this.inputBits&=-8),this.eoblock||this.row!==this.rows-1){if(p=this._lookBits(12),this.eoline)for(;p!==t&&1!==p;)this._eatBits(1),p=this._lookBits(12);else for(;0===p;)this._eatBits(1),p=this._lookBits(12);1===p?(this._eatBits(12),b=!0):p===t&&(this.eof=!0)}else this.rowsDone=!0;if(!this.eof&&this.encoding>0&&!this.rowsDone&&(this.nextLine2D=!this._lookBits(1),this._eatBits(1)),this.eoblock&&b&&this.byteAlign){if(1===(p=this._lookBits(12))){if(this._eatBits(12),this.encoding>0&&(this._lookBits(1),this._eatBits(1)),this.encoding>=0)for(l=0;l<4;++l)1!==(p=this._lookBits(12))&&(0,i.info)("bad rtc code: "+p),this._eatBits(12),this.encoding>0&&(this._lookBits(1),this._eatBits(1));this.eof=!0}}else if(this.err&&this.eoline){for(;;){if((p=this._lookBits(13))===t)return this.eof=!0,-1;if(p>>1==1)break;this._eatBits(1)}this._eatBits(12),this.encoding>0&&(this._eatBits(1),this.nextLine2D=!(1&p))}h[0]>0?this.outputBits=h[this.codingPos=0]:this.outputBits=h[this.codingPos=1],this.row++}if(this.outputBits>=8)c=1&this.codingPos?0:255,this.outputBits-=8,0===this.outputBits&&h[this.codingPos]<d&&(this.codingPos++,this.outputBits=h[this.codingPos]-h[this.codingPos-1]);else{o=8,c=0;do{this.outputBits>o?(c<<=o,1&this.codingPos||(c|=255>>8-o),this.outputBits-=o,o=0):(c<<=this.outputBits,1&this.codingPos||(c|=255>>8-this.outputBits),o-=this.outputBits,this.outputBits=0,h[this.codingPos]<d?(this.codingPos++,this.outputBits=h[this.codingPos]-h[this.codingPos-1]):o>0&&(c<<=o,o=0))}while(o)}return this.black&&(c^=255),c},_addPixels:function _addPixels(t,r){var a=this.codingLine,o=this.codingPos;t>a[o]&&(t>this.columns&&((0,i.info)("row is wrong length"),this.err=!0,t=this.columns),1&o^r&&++o,a[o]=t),this.codingPos=o},_addPixelsNeg:function _addPixelsNeg(t,r){var a=this.codingLine,o=this.codingPos;if(t>a[o])t>this.columns&&((0,i.info)("row is wrong length"),this.err=!0,t=this.columns),1&o^r&&++o,a[o]=t;else if(t<a[o]){for(t<0&&((0,i.info)("invalid code"),this.err=!0,t=0);o>0&&t<a[o-1];)--o;a[o]=t}this.codingPos=o},_findTableCode:function _findTableCode(r,a,i,o){for(var l=o||0,c=r;c<=a;++c){var u=this._lookBits(c);if(u===t)return[!0,1,!1];if(c<a&&(u<<=a-c),!l||u>=l){var h=i[u-l];if(h[0]===c)return this._eatBits(c),[!0,h[1],!0]}}return[!1,0,!1]},_getTwoDimCode:function _getTwoDimCode(){var a,o=0;if(this.eoblock){if(o=this._lookBits(7),(a=r[o])&&a[0]>0)return this._eatBits(a[0]),a[1]}else{var l=this._findTableCode(1,7,r);if(l[0]&&l[2])return l[1]}return(0,i.info)("Bad two dim code"),t},_getWhiteCode:function _getWhiteCode(){var r,l=0;if(this.eoblock){if((l=this._lookBits(12))===t)return 1;if((r=l>>5==0?a[l]:o[l>>3])[0]>0)return this._eatBits(r[0]),r[1]}else{var c=this._findTableCode(1,9,o);if(c[0])return c[1];if((c=this._findTableCode(11,12,a))[0])return c[1]}return(0,i.info)("bad white code"),this._eatBits(1),1},_getBlackCode:function _getBlackCode(){var r,a;if(this.eoblock){if((r=this._lookBits(13))===t)return 1;if((a=r>>7==0?l[r]:r>>9==0&&r>>7!=0?c[(r>>1)-64]:u[r>>7])[0]>0)return this._eatBits(a[0]),a[1]}else{var o=this._findTableCode(2,6,u);if(o[0])return o[1];if((o=this._findTableCode(7,12,c,64))[0])return o[1];if((o=this._findTableCode(10,13,l))[0])return o[1]}return(0,i.info)("bad black code"),this._eatBits(1),1},_lookBits:function _lookBits(r){for(var a;this.inputBits<r;){if(-1===(a=this.source.next()))return 0===this.inputBits?t:this.inputBuf<<r-this.inputBits&65535>>16-r;this.inputBuf=this.inputBuf<<8|a,this.inputBits+=8}return this.inputBuf>>this.inputBits-r&65535>>16-r},_eatBits:function _eatBits(t){(this.inputBits-=t)<0&&(this.inputBits=0)}},CCITTFaxDecoder}();r.CCITTFaxDecoder=o},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Jbig2Stream=void 0;var i=a(198),o=a(205),l=a(209),c=a(5),u=function Jbig2StreamClosure(){function Jbig2Stream(t,r,a,i){this.stream=t,this.maybeLength=r,this.dict=a,this.params=i,o.DecodeStream.call(this,r)}return Jbig2Stream.prototype=Object.create(o.DecodeStream.prototype),Object.defineProperty(Jbig2Stream.prototype,"bytes",{get:function get(){return(0,c.shadow)(this,"bytes",this.stream.getBytes(this.maybeLength))},configurable:!0}),Jbig2Stream.prototype.ensureBuffer=function(t){},Jbig2Stream.prototype.readBlock=function(){if(!this.eof){var t=new l.Jbig2Image,r=[];if((0,i.isDict)(this.params)){var a=this.params.get("JBIG2Globals");if((0,i.isStream)(a)){var o=a.getBytes();r.push({data:o,start:0,end:o.length})}}r.push({data:this.bytes,start:0,end:this.bytes.length});for(var c=t.parseChunks(r),u=c.length,h=0;h<u;h++)c[h]^=255;this.buffer=c,this.bufferLength=u,this.eof=!0}},Jbig2Stream}();r.Jbig2Stream=u},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Jbig2Image=void 0;var i=a(5),o=a(201),l=a(210),c=a(207);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _setPrototypeOf(t,r){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t})(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var a,i=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}(Jbig2Error,t);var r=_createSuper(Jbig2Error);function Jbig2Error(t){return function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Jbig2Error),r.call(this,"JBIG2 error: ".concat(t))}return Jbig2Error}(i.BaseException),h=function Jbig2ImageClosure(){function ContextCache(){}function DecodingContext(t,r,a){this.data=t,this.start=r,this.end=a}function decodeInteger(t,r,a){var i=t.getContexts(r),o=1;function readBits(t){for(var r=0,l=0;l<t;l++){var c=a.readBit(i,o);o=o<256?o<<1|c:511&(o<<1|c)|256,r=r<<1|c}return r>>>0}var l=readBits(1),c=readBits(1)?readBits(1)?readBits(1)?readBits(1)?readBits(1)?readBits(32)+4436:readBits(12)+340:readBits(8)+84:readBits(6)+20:readBits(4)+4:readBits(2);return 0===l?c:c>0?-c:null}function decodeIAID(t,r,a){for(var i=t.getContexts("IAID"),o=1,l=0;l<a;l++){o=o<<1|r.readBit(i,o)}return a<31?o&(1<<a)-1:2147483647&o}ContextCache.prototype={getContexts:function getContexts(t){return t in this?this[t]:this[t]=new Int8Array(65536)}},DecodingContext.prototype={get decoder(){var t=new l.ArithmeticDecoder(this.data,this.start,this.end);return(0,i.shadow)(this,"decoder",t)},get contextCache(){var t=new ContextCache;return(0,i.shadow)(this,"contextCache",t)}};var t=["SymbolDictionary",null,null,null,"IntermediateTextRegion",null,"ImmediateTextRegion","ImmediateLosslessTextRegion",null,null,null,null,null,null,null,null,"PatternDictionary",null,null,null,"IntermediateHalftoneRegion",null,"ImmediateHalftoneRegion","ImmediateLosslessHalftoneRegion",null,null,null,null,null,null,null,null,null,null,null,null,"IntermediateGenericRegion",null,"ImmediateGenericRegion","ImmediateLosslessGenericRegion","IntermediateGenericRefinementRegion",null,"ImmediateGenericRefinementRegion","ImmediateLosslessGenericRefinementRegion",null,null,null,null,"PageInformation","EndOfPage","EndOfStripe","EndOfFile","Profiles","Tables",null,null,null,null,null,null,null,null,"Extension"],r=[[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:2,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-2,y:0},{x:-1,y:0}],[{x:-3,y:-1},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}]],a=[{coding:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:-1,y:1},{x:0,y:1},{x:1,y:1}]},{coding:[{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:0,y:1},{x:1,y:1}]}],h=[39717,1941,229,405],d=[32,8];function decodeBitmap(t,a,i,o,l,c,u,d){if(t)return decodeMMRBitmap(new Reader(d.data,d.start,d.end),a,i,!1);if(0===o&&!c&&!l&&4===u.length&&3===u[0].x&&-1===u[0].y&&-3===u[1].x&&-1===u[1].y&&2===u[2].x&&-2===u[2].y&&-2===u[3].x&&-2===u[3].y)return function decodeBitmapTemplate0(t,r,a){var i,o,l,c,u,h,d,p=a.decoder,m=a.contextCache.getContexts("GB"),g=[];for(o=0;o<r;o++)for(u=g[o]=new Uint8Array(t),h=o<1?u:g[o-1],i=(d=o<2?u:g[o-2])[0]<<13|d[1]<<12|d[2]<<11|h[0]<<7|h[1]<<6|h[2]<<5|h[3]<<4,l=0;l<t;l++)u[l]=c=p.readBit(m,i),i=(31735&i)<<1|(l+3<t?d[l+3]<<11:0)|(l+4<t?h[l+4]<<4:0)|c;return g}(a,i,d);var p=!!c,m=r[o].concat(u);m.sort((function(t,r){return t.y-r.y||t.x-r.x}));var g,b,y=m.length,v=new Int8Array(y),S=new Int8Array(y),k=[],w=0,C=0,x=0,_=0;for(b=0;b<y;b++)v[b]=m[b].x,S[b]=m[b].y,C=Math.min(C,m[b].x),x=Math.max(x,m[b].x),_=Math.min(_,m[b].y),b<y-1&&m[b].y===m[b+1].y&&m[b].x===m[b+1].x-1?w|=1<<y-1-b:k.push(b);var A=k.length,R=new Int8Array(A),T=new Int8Array(A),I=new Uint16Array(A);for(g=0;g<A;g++)b=k[g],R[g]=m[b].x,T[g]=m[b].y,I[g]=1<<y-1-b;for(var P,O,E,B,D,M=-C,L=-_,N=a-x,U=h[o],j=new Uint8Array(a),q=[],W=d.decoder,z=d.contextCache.getContexts("GB"),G=0,H=0,X=0;X<i;X++){if(l)if(G^=W.readBit(z,U)){q.push(j);continue}for(j=new Uint8Array(j),q.push(j),P=0;P<a;P++)if(p&&c[X][P])j[P]=0;else{if(P>=M&&P<N&&X>=L)for(H=H<<1&w,b=0;b<A;b++)O=X+T[b],E=P+R[b],(B=q[O][E])&&(H|=B=I[b]);else for(H=0,D=y-1,b=0;b<y;b++,D--)(E=P+v[b])>=0&&E<a&&(O=X+S[b])>=0&&(B=q[O][E])&&(H|=B<<D);var V=W.readBit(z,H);j[P]=V}}return q}function decodeRefinement(t,r,i,o,l,c,h,p,m){var g=a[i].coding;0===i&&(g=g.concat([p[0]]));var b,y=g.length,v=new Int32Array(y),S=new Int32Array(y);for(b=0;b<y;b++)v[b]=g[b].x,S[b]=g[b].y;var k=a[i].reference;0===i&&(k=k.concat([p[1]]));var w=k.length,C=new Int32Array(w),x=new Int32Array(w);for(b=0;b<w;b++)C[b]=k[b].x,x[b]=k[b].y;for(var _=o[0].length,A=o.length,R=d[i],T=[],I=m.decoder,P=m.contextCache.getContexts("GR"),O=0,E=0;E<r;E++){if(h)if(O^=I.readBit(P,R))throw new u("prediction is not supported");var B=new Uint8Array(t);T.push(B);for(var D=0;D<t;D++){var M,L,N=0;for(b=0;b<y;b++)M=E+S[b],L=D+v[b],M<0||L<0||L>=t?N<<=1:N=N<<1|T[M][L];for(b=0;b<w;b++)M=E+x[b]-c,L=D+C[b]-l,M<0||M>=A||L<0||L>=_?N<<=1:N=N<<1|o[M][L];var U=I.readBit(P,N);B[D]=U}}return T}function decodeTextRegion(t,r,a,i,o,l,c,h,d,p,m,g,b,y,v,S,k,w,C){if(t&&r)throw new u("refinement with Huffman is not supported");var x,_,A=[];for(x=0;x<i;x++){if(_=new Uint8Array(a),o)for(var R=0;R<a;R++)_[R]=o;A.push(_)}var T=k.decoder,I=k.contextCache,P=t?-y.tableDeltaT.decode(C):-decodeInteger(I,"IADT",T),O=0;for(x=0;x<l;){P+=t?y.tableDeltaT.decode(C):decodeInteger(I,"IADT",T);for(var E=O+=t?y.tableFirstS.decode(C):decodeInteger(I,"IAFS",T);;){var B=0;c>1&&(B=t?C.readBits(w):decodeInteger(I,"IAIT",T));var D=c*P+B,M=t?y.symbolIDTable.decode(C):decodeIAID(I,T,d),L=r&&(t?C.readBit():decodeInteger(I,"IARI",T)),N=h[M],U=N[0].length,j=N.length;if(L){var q=decodeInteger(I,"IARDW",T),W=decodeInteger(I,"IARDH",T);N=decodeRefinement(U+=q,j+=W,v,N,(q>>1)+decodeInteger(I,"IARDX",T),(W>>1)+decodeInteger(I,"IARDY",T),!1,S,k)}var z,G,H,X=D-(1&g?0:j-1),V=E-(2&g?U-1:0);if(p){for(z=0;z<j;z++)if(_=A[V+z]){H=N[z];var Y=Math.min(a-X,U);switch(b){case 0:for(G=0;G<Y;G++)_[X+G]|=H[G];break;case 2:for(G=0;G<Y;G++)_[X+G]^=H[G];break;default:throw new u("operator ".concat(b," is not supported"))}}E+=j-1}else{for(G=0;G<j;G++)if(_=A[X+G])switch(H=N[G],b){case 0:for(z=0;z<U;z++)_[V+z]|=H[z];break;case 2:for(z=0;z<U;z++)_[V+z]^=H[z];break;default:throw new u("operator ".concat(b," is not supported"))}E+=U-1}x++;var K=t?y.tableDeltaS.decode(C):decodeInteger(I,"IADS",T);if(null===K)break;E+=K+m}}return A}function readSegmentHeader(r,a){var i={};i.number=(0,o.readUint32)(r,a);var l=r[a+4],c=63&l;if(!t[c])throw new u("invalid segment type: "+c);i.type=c,i.typeName=t[c],i.deferredNonRetain=!!(128&l);var h=!!(64&l),d=r[a+5],m=d>>5&7,g=[31&d],b=a+6;if(7===d){m=536870911&(0,o.readUint32)(r,b-1),b+=3;var y=m+7>>3;for(g[0]=r[b++];--y>0;)g.push(r[b++])}else if(5===d||6===d)throw new u("invalid referred-to flags");i.retainBits=g;var v=4;i.number<=256?v=1:i.number<=65536&&(v=2);var S,k,w=[];for(S=0;S<m;S++){var C=void 0;C=1===v?r[b]:2===v?(0,o.readUint16)(r,b):(0,o.readUint32)(r,b),w.push(C),b+=v}if(i.referredTo=w,h?(i.pageAssociation=(0,o.readUint32)(r,b),b+=4):i.pageAssociation=r[b++],i.length=(0,o.readUint32)(r,b),b+=4,4294967295===i.length){if(38!==c)throw new u("invalid unknown segment length");var x=readRegionSegmentInformation(r,b),_=!!(1&r[b+p]),A=new Uint8Array(6);for(_||(A[0]=255,A[1]=172),A[2]=x.height>>>24&255,A[3]=x.height>>16&255,A[4]=x.height>>8&255,A[5]=255&x.height,S=b,k=r.length;S<k;S++){for(var R=0;R<6&&A[R]===r[S+R];)R++;if(6===R){i.length=S+6;break}}if(4294967295===i.length)throw new u("segment end was not found")}return i.headerEnd=b,i}function readSegments(t,r,a,i){for(var o=[],l=a;l<i;){var c=readSegmentHeader(r,l);l=c.headerEnd;var u={header:c,data:r};if(t.randomAccess||(u.start=l,l+=c.length,u.end=l),o.push(u),51===c.type)break}if(t.randomAccess)for(var h=0,d=o.length;h<d;h++)o[h].start=l,l+=o[h].header.length,o[h].end=l;return o}function readRegionSegmentInformation(t,r){return{width:(0,o.readUint32)(t,r),height:(0,o.readUint32)(t,r+4),x:(0,o.readUint32)(t,r+8),y:(0,o.readUint32)(t,r+12),combinationOperator:7&t[r+16]}}var p=17;function processSegment(t,r){var a,i,l,c,h=t.header,d=t.data,m=t.start,g=t.end;switch(h.type){case 0:var b={},y=(0,o.readUint16)(d,m);if(b.huffman=!!(1&y),b.refinement=!!(2&y),b.huffmanDHSelector=y>>2&3,b.huffmanDWSelector=y>>4&3,b.bitmapSizeSelector=y>>6&1,b.aggregationInstancesSelector=y>>7&1,b.bitmapCodingContextUsed=!!(256&y),b.bitmapCodingContextRetained=!!(512&y),b.template=y>>10&3,b.refinementTemplate=y>>12&1,m+=2,!b.huffman){for(c=0===b.template?4:1,i=[],l=0;l<c;l++)i.push({x:(0,o.readInt8)(d,m),y:(0,o.readInt8)(d,m+1)}),m+=2;b.at=i}if(b.refinement&&!b.refinementTemplate){for(i=[],l=0;l<2;l++)i.push({x:(0,o.readInt8)(d,m),y:(0,o.readInt8)(d,m+1)}),m+=2;b.refinementAt=i}b.numberOfExportedSymbols=(0,o.readUint32)(d,m),m+=4,b.numberOfNewSymbols=(0,o.readUint32)(d,m),m+=4,a=[b,h.number,h.referredTo,d,m,g];break;case 6:case 7:var v={};v.info=readRegionSegmentInformation(d,m),m+=p;var S=(0,o.readUint16)(d,m);if(m+=2,v.huffman=!!(1&S),v.refinement=!!(2&S),v.logStripSize=S>>2&3,v.stripSize=1<<v.logStripSize,v.referenceCorner=S>>4&3,v.transposed=!!(64&S),v.combinationOperator=S>>7&3,v.defaultPixelValue=S>>9&1,v.dsOffset=S<<17>>27,v.refinementTemplate=S>>15&1,v.huffman){var k=(0,o.readUint16)(d,m);m+=2,v.huffmanFS=3&k,v.huffmanDS=k>>2&3,v.huffmanDT=k>>4&3,v.huffmanRefinementDW=k>>6&3,v.huffmanRefinementDH=k>>8&3,v.huffmanRefinementDX=k>>10&3,v.huffmanRefinementDY=k>>12&3,v.huffmanRefinementSizeSelector=!!(16384&k)}if(v.refinement&&!v.refinementTemplate){for(i=[],l=0;l<2;l++)i.push({x:(0,o.readInt8)(d,m),y:(0,o.readInt8)(d,m+1)}),m+=2;v.refinementAt=i}v.numberOfSymbolInstances=(0,o.readUint32)(d,m),m+=4,a=[v,h.referredTo,d,m,g];break;case 16:var w={},C=d[m++];w.mmr=!!(1&C),w.template=C>>1&3,w.patternWidth=d[m++],w.patternHeight=d[m++],w.maxPatternIndex=(0,o.readUint32)(d,m),m+=4,a=[w,h.number,d,m,g];break;case 22:case 23:var x={};x.info=readRegionSegmentInformation(d,m),m+=p;var _=d[m++];x.mmr=!!(1&_),x.template=_>>1&3,x.enableSkip=!!(8&_),x.combinationOperator=_>>4&7,x.defaultPixelValue=_>>7&1,x.gridWidth=(0,o.readUint32)(d,m),m+=4,x.gridHeight=(0,o.readUint32)(d,m),m+=4,x.gridOffsetX=4294967295&(0,o.readUint32)(d,m),m+=4,x.gridOffsetY=4294967295&(0,o.readUint32)(d,m),m+=4,x.gridVectorX=(0,o.readUint16)(d,m),m+=2,x.gridVectorY=(0,o.readUint16)(d,m),m+=2,a=[x,h.referredTo,d,m,g];break;case 38:case 39:var A={};A.info=readRegionSegmentInformation(d,m),m+=p;var R=d[m++];if(A.mmr=!!(1&R),A.template=R>>1&3,A.prediction=!!(8&R),!A.mmr){for(c=0===A.template?4:1,i=[],l=0;l<c;l++)i.push({x:(0,o.readInt8)(d,m),y:(0,o.readInt8)(d,m+1)}),m+=2;A.at=i}a=[A,d,m,g];break;case 48:var T={width:(0,o.readUint32)(d,m),height:(0,o.readUint32)(d,m+4),resolutionX:(0,o.readUint32)(d,m+8),resolutionY:(0,o.readUint32)(d,m+12)};4294967295===T.height&&delete T.height;var I=d[m+16];(0,o.readUint16)(d,m+17),T.lossless=!!(1&I),T.refinement=!!(2&I),T.defaultPixelValue=I>>2&1,T.combinationOperator=I>>3&3,T.requiresBuffer=!!(32&I),T.combinationOperatorOverride=!!(64&I),a=[T];break;case 49:case 50:case 51:break;case 53:a=[h.number,d,m,g];break;case 62:break;default:throw new u("segment type ".concat(h.typeName,"(").concat(h.type,")")+" is not implemented")}var P="on"+h.typeName;P in r&&r[P].apply(r,a)}function processSegments(t,r){for(var a=0,i=t.length;a<i;a++)processSegment(t[a],r)}function SimpleSegmentVisitor(){}function HuffmanLine(t){2===t.length?(this.isOOB=!0,this.rangeLow=0,this.prefixLength=t[0],this.rangeLength=0,this.prefixCode=t[1],this.isLowerRange=!1):(this.isOOB=!1,this.rangeLow=t[0],this.prefixLength=t[1],this.rangeLength=t[2],this.prefixCode=t[3],this.isLowerRange="lower"===t[4])}function HuffmanTreeNode(t){this.children=[],t?(this.isLeaf=!0,this.rangeLength=t.rangeLength,this.rangeLow=t.rangeLow,this.isLowerRange=t.isLowerRange,this.isOOB=t.isOOB):this.isLeaf=!1}function HuffmanTable(t,r){r||this.assignPrefixCodes(t),this.rootNode=new HuffmanTreeNode(null);for(var a=0,i=t.length;a<i;a++){var o=t[a];o.prefixLength>0&&this.rootNode.buildTree(o,o.prefixLength-1)}}SimpleSegmentVisitor.prototype={onPageInformation:function SimpleSegmentVisitor_onPageInformation(t){this.currentPageInfo=t;var r=t.width+7>>3,a=new Uint8ClampedArray(r*t.height);if(t.defaultPixelValue)for(var i=0,o=a.length;i<o;i++)a[i]=255;this.buffer=a},drawBitmap:function SimpleSegmentVisitor_drawBitmap(t,r){var a,i,o,l,c=this.currentPageInfo,h=t.width,d=t.height,p=c.width+7>>3,m=c.combinationOperatorOverride?t.combinationOperator:c.combinationOperator,g=this.buffer,b=128>>(7&t.x),y=t.y*p+(t.x>>3);switch(m){case 0:for(a=0;a<d;a++){for(o=b,l=y,i=0;i<h;i++)r[a][i]&&(g[l]|=o),(o>>=1)||(o=128,l++);y+=p}break;case 2:for(a=0;a<d;a++){for(o=b,l=y,i=0;i<h;i++)r[a][i]&&(g[l]^=o),(o>>=1)||(o=128,l++);y+=p}break;default:throw new u("operator ".concat(m," is not supported"))}},onImmediateGenericRegion:function SimpleSegmentVisitor_onImmediateGenericRegion(t,r,a,i){var o=t.info,l=new DecodingContext(r,a,i),c=decodeBitmap(t.mmr,o.width,o.height,t.template,t.prediction,null,t.at,l);this.drawBitmap(o,c)},onImmediateLosslessGenericRegion:function SimpleSegmentVisitor_onImmediateLosslessGenericRegion(){this.onImmediateGenericRegion.apply(this,arguments)},onSymbolDictionary:function SimpleSegmentVisitor_onSymbolDictionary(t,r,a,i,l,c){var h,d;t.huffman&&(h=function getSymbolDictionaryHuffmanTables(t,r,a){var i,o,l,c,h=0;switch(t.huffmanDHSelector){case 0:case 1:i=getStandardTable(t.huffmanDHSelector+4);break;case 3:i=getCustomHuffmanTable(h,r,a),h++;break;default:throw new u("invalid Huffman DH selector")}switch(t.huffmanDWSelector){case 0:case 1:o=getStandardTable(t.huffmanDWSelector+2);break;case 3:o=getCustomHuffmanTable(h,r,a),h++;break;default:throw new u("invalid Huffman DW selector")}t.bitmapSizeSelector?(l=getCustomHuffmanTable(h,r,a),h++):l=getStandardTable(1);c=t.aggregationInstancesSelector?getCustomHuffmanTable(h,r,a):getStandardTable(1);return{tableDeltaHeight:i,tableDeltaWidth:o,tableBitmapSize:l,tableAggregateInstances:c}}(t,a,this.customTables),d=new Reader(i,l,c));var p=this.symbols;p||(this.symbols=p={});for(var m=[],g=0,b=a.length;g<b;g++){var y=p[a[g]];y&&(m=m.concat(y))}var v=new DecodingContext(i,l,c);p[r]=function decodeSymbolDictionary(t,r,a,i,l,c,h,d,p,m,g,b){if(t&&r)throw new u("symbol refinement with Huffman is not supported");var y,v,S=[],k=0,w=(0,o.log2)(a.length+i),C=g.decoder,x=g.contextCache;for(t&&(y=getStandardTable(1),v=[],w=Math.max(w,1));S.length<i;){k+=t?c.tableDeltaHeight.decode(b):decodeInteger(x,"IADH",C);for(var _=0,A=0,R=t?v.length:0;;){var T,I=t?c.tableDeltaWidth.decode(b):decodeInteger(x,"IADW",C);if(null===I)break;if(A+=_+=I,r){var P=decodeInteger(x,"IAAI",C);if(P>1)T=decodeTextRegion(t,r,_,k,0,P,1,a.concat(S),w,0,0,1,0,c,p,m,g,0,b);else{var O=decodeIAID(x,C,w),E=decodeInteger(x,"IARDX",C),B=decodeInteger(x,"IARDY",C);T=decodeRefinement(_,k,p,O<a.length?a[O]:S[O-a.length],E,B,!1,m,g)}S.push(T)}else t?v.push(_):(T=decodeBitmap(!1,_,k,h,!1,null,d,g),S.push(T))}if(t&&!r){var D=c.tableBitmapSize.decode(b);b.byteAlign();var M=void 0;if(0===D)M=readUncompressedBitmap(b,A,k);else{var L=b.end,N=b.position+D;b.end=N,M=decodeMMRBitmap(b,A,k,!1),b.end=L,b.position=N}var U=v.length;if(R===U-1)S.push(M);else{var j=void 0,q=void 0,W=0,z=void 0,G=void 0;for(j=R;j<U;j++){for(z=W+v[j],G=[],q=0;q<k;q++)G.push(M[q].subarray(W,z));S.push(G),W=z}}}}for(var H=[],X=[],V=!1,Y=a.length+i;X.length<Y;){for(var K=t?y.decode(b):decodeInteger(x,"IAEX",C);K--;)X.push(V);V=!V}for(var J=0,Z=a.length;J<Z;J++)X[J]&&H.push(a[J]);for(var Q=0;Q<i;J++,Q++)X[J]&&H.push(S[Q]);return H}(t.huffman,t.refinement,m,t.numberOfNewSymbols,t.numberOfExportedSymbols,h,t.template,t.at,t.refinementTemplate,t.refinementAt,v,d)},onImmediateTextRegion:function SimpleSegmentVisitor_onImmediateTextRegion(t,r,a,i,l){for(var c,h,d=t.info,p=this.symbols,m=[],g=0,b=r.length;g<b;g++){var y=p[r[g]];y&&(m=m.concat(y))}var v=(0,o.log2)(m.length);t.huffman&&(h=new Reader(a,i,l),c=function getTextRegionHuffmanTables(t,r,a,i,o){for(var l=[],c=0;c<=34;c++){var h=o.readBits(4);l.push(new HuffmanLine([c,h,0,0]))}var d=new HuffmanTable(l,!1);l.length=0;for(var p=0;p<i;){var m=d.decode(o);if(m>=32){var g=void 0,b=void 0,y=void 0;switch(m){case 32:if(0===p)throw new u("no previous value in symbol ID table");b=o.readBits(2)+3,g=l[p-1].prefixLength;break;case 33:b=o.readBits(3)+3,g=0;break;case 34:b=o.readBits(7)+11,g=0;break;default:throw new u("invalid code length in symbol ID table")}for(y=0;y<b;y++)l.push(new HuffmanLine([p,g,0,0])),p++}else l.push(new HuffmanLine([p,m,0,0])),p++}o.byteAlign();var v,S,k,w=new HuffmanTable(l,!1),C=0;switch(t.huffmanFS){case 0:case 1:v=getStandardTable(t.huffmanFS+6);break;case 3:v=getCustomHuffmanTable(C,r,a),C++;break;default:throw new u("invalid Huffman FS selector")}switch(t.huffmanDS){case 0:case 1:case 2:S=getStandardTable(t.huffmanDS+8);break;case 3:S=getCustomHuffmanTable(C,r,a),C++;break;default:throw new u("invalid Huffman DS selector")}switch(t.huffmanDT){case 0:case 1:case 2:k=getStandardTable(t.huffmanDT+11);break;case 3:k=getCustomHuffmanTable(C,r,a),C++;break;default:throw new u("invalid Huffman DT selector")}if(t.refinement)throw new u("refinement with Huffman is not supported");return{symbolIDTable:w,tableFirstS:v,tableDeltaS:S,tableDeltaT:k}}(t,r,this.customTables,m.length,h));var S=new DecodingContext(a,i,l),k=decodeTextRegion(t.huffman,t.refinement,d.width,d.height,t.defaultPixelValue,t.numberOfSymbolInstances,t.stripSize,m,v,t.transposed,t.dsOffset,t.referenceCorner,t.combinationOperator,c,t.refinementTemplate,t.refinementAt,S,t.logStripSize,h);this.drawBitmap(d,k)},onImmediateLosslessTextRegion:function SimpleSegmentVisitor_onImmediateLosslessTextRegion(){this.onImmediateTextRegion.apply(this,arguments)},onPatternDictionary:function onPatternDictionary(t,r,a,i,o){var l=this.patterns;l||(this.patterns=l={});var c=new DecodingContext(a,i,o);l[r]=function decodePatternDictionary(t,r,a,i,o,l){var c=[];t||(c.push({x:-r,y:0}),0===o&&(c.push({x:-3,y:-1}),c.push({x:2,y:-2}),c.push({x:-2,y:-2})));for(var u=decodeBitmap(t,(i+1)*r,a,o,!1,null,c,l),h=[],d=0;d<=i;d++){for(var p=[],m=r*d,g=m+r,b=0;b<a;b++)p.push(u[b].subarray(m,g));h.push(p)}return h}(t.mmr,t.patternWidth,t.patternHeight,t.maxPatternIndex,t.template,c)},onImmediateHalftoneRegion:function onImmediateHalftoneRegion(t,r,a,i,l){var c=this.patterns[r[0]],h=t.info,d=new DecodingContext(a,i,l),p=function decodeHalftoneRegion(t,r,a,i,l,c,h,d,p,m,g,b,y,v,S){if(h)throw new u("skip is not supported");if(0!==d)throw new u("operator "+d+" is not supported in halftone region");var k,w,C,x=[];for(k=0;k<l;k++){if(C=new Uint8Array(i),c)for(w=0;w<i;w++)C[w]=c;x.push(C)}var _=r.length,A=r[0],R=A[0].length,T=A.length,I=(0,o.log2)(_),P=[];t||(P.push({x:a<=1?3:2,y:-1}),0===a&&(P.push({x:-3,y:-1}),P.push({x:2,y:-2}),P.push({x:-2,y:-2})));var O,E,B,D,M,L,N,U,j,q,W,z=[];for(t&&(O=new Reader(S.data,S.start,S.end)),k=I-1;k>=0;k--)E=t?decodeMMRBitmap(O,p,m,!0):decodeBitmap(!1,p,m,a,!1,null,P,S),z[k]=E;for(B=0;B<m;B++)for(D=0;D<p;D++){for(M=0,L=0,w=I-1;w>=0;w--)L|=(M=z[w][B][D]^M)<<w;if(N=r[L],j=b+B*y-D*v>>8,(U=g+B*v+D*y>>8)>=0&&U+R<=i&&j>=0&&j+T<=l)for(k=0;k<T;k++)for(W=x[j+k],q=N[k],w=0;w<R;w++)W[U+w]|=q[w];else{var G=void 0,H=void 0;for(k=0;k<T;k++)if(!((H=j+k)<0||H>=l))for(W=x[H],q=N[k],w=0;w<R;w++)(G=U+w)>=0&&G<i&&(W[G]|=q[w])}}return x}(t.mmr,c,t.template,h.width,h.height,t.defaultPixelValue,t.enableSkip,t.combinationOperator,t.gridWidth,t.gridHeight,t.gridOffsetX,t.gridOffsetY,t.gridVectorX,t.gridVectorY,d);this.drawBitmap(h,p)},onImmediateLosslessHalftoneRegion:function onImmediateLosslessHalftoneRegion(){this.onImmediateHalftoneRegion.apply(this,arguments)},onTables:function onTables(t,r,a,i){var l=this.customTables;l||(this.customTables=l={}),l[t]=function decodeTablesSegment(t,r,a){var i,l,c=t[r],u=4294967295&(0,o.readUint32)(t,r+1),h=4294967295&(0,o.readUint32)(t,r+5),d=new Reader(t,r+9,a),p=1+(c>>1&7),m=1+(c>>4&7),g=[],b=u;do{i=d.readBits(p),l=d.readBits(m),g.push(new HuffmanLine([b,i,l,0])),b+=1<<l}while(b<h);i=d.readBits(p),g.push(new HuffmanLine([u-1,i,32,0,"lower"])),i=d.readBits(p),g.push(new HuffmanLine([h,i,32,0])),1&c&&(i=d.readBits(p),g.push(new HuffmanLine([i,0])));return new HuffmanTable(g,!1)}(r,a,i)}},HuffmanTreeNode.prototype={buildTree:function buildTree(t,r){var a=t.prefixCode>>r&1;if(r<=0)this.children[a]=new HuffmanTreeNode(t);else{var i=this.children[a];i||(this.children[a]=i=new HuffmanTreeNode(null)),i.buildTree(t,r-1)}},decodeNode:function decodeNode(t){if(this.isLeaf){if(this.isOOB)return null;var r=t.readBits(this.rangeLength);return this.rangeLow+(this.isLowerRange?-r:r)}var a=this.children[t.readBit()];if(!a)throw new u("invalid Huffman data");return a.decodeNode(t)}},HuffmanTable.prototype={decode:function decode(t){return this.rootNode.decodeNode(t)},assignPrefixCodes:function assignPrefixCodes(t){for(var r=t.length,a=0,i=0;i<r;i++)a=Math.max(a,t[i].prefixLength);for(var o=new Uint32Array(a+1),l=0;l<r;l++)o[t[l].prefixLength]++;var c,u,h,d=1,p=0;for(o[0]=0;d<=a;){for(c=p=p+o[d-1]<<1,u=0;u<r;)(h=t[u]).prefixLength===d&&(h.prefixCode=c,c++),u++;d++}}};var m={};function getStandardTable(t){var r,a=m[t];if(a)return a;switch(t){case 1:r=[[0,1,4,0],[16,2,8,2],[272,3,16,6],[65808,3,32,7]];break;case 2:r=[[0,1,0,0],[1,2,0,2],[2,3,0,6],[3,4,3,14],[11,5,6,30],[75,6,32,62],[6,63]];break;case 3:r=[[-256,8,8,254],[0,1,0,0],[1,2,0,2],[2,3,0,6],[3,4,3,14],[11,5,6,30],[-257,8,32,255,"lower"],[75,7,32,126],[6,62]];break;case 4:r=[[1,1,0,0],[2,2,0,2],[3,3,0,6],[4,4,3,14],[12,5,6,30],[76,5,32,31]];break;case 5:r=[[-255,7,8,126],[1,1,0,0],[2,2,0,2],[3,3,0,6],[4,4,3,14],[12,5,6,30],[-256,7,32,127,"lower"],[76,6,32,62]];break;case 6:r=[[-2048,5,10,28],[-1024,4,9,8],[-512,4,8,9],[-256,4,7,10],[-128,5,6,29],[-64,5,5,30],[-32,4,5,11],[0,2,7,0],[128,3,7,2],[256,3,8,3],[512,4,9,12],[1024,4,10,13],[-2049,6,32,62,"lower"],[2048,6,32,63]];break;case 7:r=[[-1024,4,9,8],[-512,3,8,0],[-256,4,7,9],[-128,5,6,26],[-64,5,5,27],[-32,4,5,10],[0,4,5,11],[32,5,5,28],[64,5,6,29],[128,4,7,12],[256,3,8,1],[512,3,9,2],[1024,3,10,3],[-1025,5,32,30,"lower"],[2048,5,32,31]];break;case 8:r=[[-15,8,3,252],[-7,9,1,508],[-5,8,1,253],[-3,9,0,509],[-2,7,0,124],[-1,4,0,10],[0,2,1,0],[2,5,0,26],[3,6,0,58],[4,3,4,4],[20,6,1,59],[22,4,4,11],[38,4,5,12],[70,5,6,27],[134,5,7,28],[262,6,7,60],[390,7,8,125],[646,6,10,61],[-16,9,32,510,"lower"],[1670,9,32,511],[2,1]];break;case 9:r=[[-31,8,4,252],[-15,9,2,508],[-11,8,2,253],[-7,9,1,509],[-5,7,1,124],[-3,4,1,10],[-1,3,1,2],[1,3,1,3],[3,5,1,26],[5,6,1,58],[7,3,5,4],[39,6,2,59],[43,4,5,11],[75,4,6,12],[139,5,7,27],[267,5,8,28],[523,6,8,60],[779,7,9,125],[1291,6,11,61],[-32,9,32,510,"lower"],[3339,9,32,511],[2,0]];break;case 10:r=[[-21,7,4,122],[-5,8,0,252],[-4,7,0,123],[-3,5,0,24],[-2,2,2,0],[2,5,0,25],[3,6,0,54],[4,7,0,124],[5,8,0,253],[6,2,6,1],[70,5,5,26],[102,6,5,55],[134,6,6,56],[198,6,7,57],[326,6,8,58],[582,6,9,59],[1094,6,10,60],[2118,7,11,125],[-22,8,32,254,"lower"],[4166,8,32,255],[2,2]];break;case 11:r=[[1,1,0,0],[2,2,1,2],[4,4,0,12],[5,4,1,13],[7,5,1,28],[9,5,2,29],[13,6,2,60],[17,7,2,122],[21,7,3,123],[29,7,4,124],[45,7,5,125],[77,7,6,126],[141,7,32,127]];break;case 12:r=[[1,1,0,0],[2,2,0,2],[3,3,1,6],[5,5,0,28],[6,5,1,29],[8,6,1,60],[10,7,0,122],[11,7,1,123],[13,7,2,124],[17,7,3,125],[25,7,4,126],[41,8,5,254],[73,8,32,255]];break;case 13:r=[[1,1,0,0],[2,3,0,4],[3,4,0,12],[4,5,0,28],[5,4,1,13],[7,3,3,5],[15,6,1,58],[17,6,2,59],[21,6,3,60],[29,6,4,61],[45,6,5,62],[77,7,6,126],[141,7,32,127]];break;case 14:r=[[-2,3,0,4],[-1,3,0,5],[0,1,0,0],[1,3,0,6],[2,3,0,7]];break;case 15:r=[[-24,7,4,124],[-8,6,2,60],[-4,5,1,28],[-2,4,0,12],[-1,3,0,4],[0,1,0,0],[1,3,0,5],[2,4,0,13],[3,5,1,29],[5,6,2,61],[9,7,4,125],[-25,7,32,126,"lower"],[25,7,32,127]];break;default:throw new u("standard table B.".concat(t," does not exist"))}for(var i=0,o=r.length;i<o;i++)r[i]=new HuffmanLine(r[i]);return a=new HuffmanTable(r,!0),m[t]=a,a}function Reader(t,r,a){this.data=t,this.start=r,this.end=a,this.position=r,this.shift=-1,this.currentByte=0}function getCustomHuffmanTable(t,r,a){for(var i=0,o=0,l=r.length;o<l;o++){var c=a[r[o]];if(c){if(t===i)return c;i++}}throw new u("can't find custom Huffman table")}function readUncompressedBitmap(t,r,a){for(var i=[],o=0;o<a;o++){var l=new Uint8Array(r);i.push(l);for(var c=0;c<r;c++)l[c]=t.readBit();t.byteAlign()}return i}function decodeMMRBitmap(t,r,a,i){for(var o,l={K:-1,Columns:r,Rows:a,BlackIs1:!0,EndOfBlock:i},u=new c.CCITTFaxDecoder(t,l),h=[],d=!1,p=0;p<a;p++){var m=new Uint8Array(r);h.push(m);for(var g=-1,b=0;b<r;b++)g<0&&(-1===(o=u.readNextChar())&&(o=0,d=!0),g=7),m[b]=o>>g&1,g--}if(i&&!d)for(var y=0;y<5&&-1!==u.readNextChar();y++);return h}function Jbig2Image(){}return Reader.prototype={readBit:function readBit(){if(this.shift<0){if(this.position>=this.end)throw new u("end of data while reading bit");this.currentByte=this.data[this.position++],this.shift=7}var t=this.currentByte>>this.shift&1;return this.shift--,t},readBits:function readBits(t){var r,a=0;for(r=t-1;r>=0;r--)a|=this.readBit()<<r;return a},byteAlign:function byteAlign(){this.shift=-1},next:function next(){return this.position>=this.end?-1:this.data[this.position++]}},Jbig2Image.prototype={parseChunks:function parseChunks(t){return function parseJbig2Chunks(t){for(var r=new SimpleSegmentVisitor,a=0,i=t.length;a<i;a++){var o=t[a];processSegments(readSegments({},o.data,o.start,o.end),r)}return r.buffer}(t)},parse:function parse(t){var r=function parseJbig2(t){var r=t.length,a=0;if(151!==t[a]||74!==t[a+1]||66!==t[a+2]||50!==t[a+3]||13!==t[a+4]||10!==t[a+5]||26!==t[a+6]||10!==t[a+7])throw new u("parseJbig2 - invalid header.");var i=Object.create(null);a+=8;var l=t[a++];i.randomAccess=!(1&l),2&l||(i.numberOfPages=(0,o.readUint32)(t,a),a+=4);var c=readSegments(i,t,a,r),h=new SimpleSegmentVisitor;processSegments(c,h);for(var d=h.currentPageInfo,p=d.width,m=d.height,g=h.buffer,b=new Uint8ClampedArray(p*m),y=0,v=0,S=0;S<m;S++)for(var k=0,w=void 0,C=0;C<p;C++)k||(k=128,w=g[v++]),b[y++]=w&k?0:255,k>>=1;return{imgData:b,width:p,height:m}}(t),a=r.imgData,i=r.width,l=r.height;return this.width=i,this.height=l,a}},Jbig2Image}();r.Jbig2Image=h},function(t,r,a){"use strict";function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(r,"__esModule",{value:!0}),r.ArithmeticDecoder=void 0;var i=[{qe:22017,nmps:1,nlps:1,switchFlag:1},{qe:13313,nmps:2,nlps:6,switchFlag:0},{qe:6145,nmps:3,nlps:9,switchFlag:0},{qe:2753,nmps:4,nlps:12,switchFlag:0},{qe:1313,nmps:5,nlps:29,switchFlag:0},{qe:545,nmps:38,nlps:33,switchFlag:0},{qe:22017,nmps:7,nlps:6,switchFlag:1},{qe:21505,nmps:8,nlps:14,switchFlag:0},{qe:18433,nmps:9,nlps:14,switchFlag:0},{qe:14337,nmps:10,nlps:14,switchFlag:0},{qe:12289,nmps:11,nlps:17,switchFlag:0},{qe:9217,nmps:12,nlps:18,switchFlag:0},{qe:7169,nmps:13,nlps:20,switchFlag:0},{qe:5633,nmps:29,nlps:21,switchFlag:0},{qe:22017,nmps:15,nlps:14,switchFlag:1},{qe:21505,nmps:16,nlps:14,switchFlag:0},{qe:20737,nmps:17,nlps:15,switchFlag:0},{qe:18433,nmps:18,nlps:16,switchFlag:0},{qe:14337,nmps:19,nlps:17,switchFlag:0},{qe:13313,nmps:20,nlps:18,switchFlag:0},{qe:12289,nmps:21,nlps:19,switchFlag:0},{qe:10241,nmps:22,nlps:19,switchFlag:0},{qe:9217,nmps:23,nlps:20,switchFlag:0},{qe:8705,nmps:24,nlps:21,switchFlag:0},{qe:7169,nmps:25,nlps:22,switchFlag:0},{qe:6145,nmps:26,nlps:23,switchFlag:0},{qe:5633,nmps:27,nlps:24,switchFlag:0},{qe:5121,nmps:28,nlps:25,switchFlag:0},{qe:4609,nmps:29,nlps:26,switchFlag:0},{qe:4353,nmps:30,nlps:27,switchFlag:0},{qe:2753,nmps:31,nlps:28,switchFlag:0},{qe:2497,nmps:32,nlps:29,switchFlag:0},{qe:2209,nmps:33,nlps:30,switchFlag:0},{qe:1313,nmps:34,nlps:31,switchFlag:0},{qe:1089,nmps:35,nlps:32,switchFlag:0},{qe:673,nmps:36,nlps:33,switchFlag:0},{qe:545,nmps:37,nlps:34,switchFlag:0},{qe:321,nmps:38,nlps:35,switchFlag:0},{qe:273,nmps:39,nlps:36,switchFlag:0},{qe:133,nmps:40,nlps:37,switchFlag:0},{qe:73,nmps:41,nlps:38,switchFlag:0},{qe:37,nmps:42,nlps:39,switchFlag:0},{qe:21,nmps:43,nlps:40,switchFlag:0},{qe:9,nmps:44,nlps:41,switchFlag:0},{qe:5,nmps:45,nlps:42,switchFlag:0},{qe:1,nmps:45,nlps:43,switchFlag:0},{qe:22017,nmps:46,nlps:46,switchFlag:0}],o=function(){function ArithmeticDecoder(t,r,a){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,ArithmeticDecoder),this.data=t,this.bp=r,this.dataEnd=a,this.chigh=t[r],this.clow=0,this.byteIn(),this.chigh=this.chigh<<7&65535|this.clow>>9&127,this.clow=this.clow<<7&65535,this.ct-=7,this.a=32768}return function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}(ArithmeticDecoder,[{key:"byteIn",value:function byteIn(){var t=this.data,r=this.bp;255===t[r]?t[r+1]>143?(this.clow+=65280,this.ct=8):(r++,this.clow+=t[r]<<9,this.ct=7,this.bp=r):(r++,this.clow+=r<this.dataEnd?t[r]<<8:65280,this.ct=8,this.bp=r),this.clow>65535&&(this.chigh+=this.clow>>16,this.clow&=65535)}},{key:"readBit",value:function readBit(t,r){var a,o=t[r]>>1,l=1&t[r],c=i[o],u=c.qe,h=this.a-u;if(this.chigh<u)h<u?(h=u,a=l,o=c.nmps):(h=u,a=1^l,1===c.switchFlag&&(l=a),o=c.nlps);else{if(this.chigh-=u,0!=(32768&h))return this.a=h,l;h<u?(a=1^l,1===c.switchFlag&&(l=a),o=c.nlps):(a=l,o=c.nmps)}do{0===this.ct&&this.byteIn(),h<<=1,this.chigh=this.chigh<<1&65535|this.clow>>15&1,this.clow=this.clow<<1&65535,this.ct--}while(0==(32768&h));return this.a=h,t[r]=o<<1|l,a}}]),ArithmeticDecoder}();r.ArithmeticDecoder=o},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.JpegStream=void 0;var i=a(205),o=a(198),l=a(212),c=a(5),u=function JpegStreamClosure(){function JpegStream(t,r,a,o){for(var l;-1!==(l=t.getByte());)if(255===l){t.skip(-1);break}this.stream=t,this.maybeLength=r,this.dict=a,this.params=o,i.DecodeStream.call(this,r)}return JpegStream.prototype=Object.create(i.DecodeStream.prototype),Object.defineProperty(JpegStream.prototype,"bytes",{get:function JpegStream_bytes(){return(0,c.shadow)(this,"bytes",this.stream.getBytes(this.maybeLength))},configurable:!0}),JpegStream.prototype.ensureBuffer=function(t){},JpegStream.prototype.readBlock=function(){if(!this.eof){var t={decodeTransform:void 0,colorTransform:void 0},r=this.dict.getArray("Decode","D");if(this.forceRGB&&Array.isArray(r)){for(var a=this.dict.get("BitsPerComponent")||8,i=r.length,c=new Int32Array(i),u=!1,h=(1<<a)-1,d=0;d<i;d+=2)c[d]=256*(r[d+1]-r[d])|0,c[d+1]=r[d]*h|0,256===c[d]&&0===c[d+1]||(u=!0);u&&(t.decodeTransform=c)}if((0,o.isDict)(this.params)){var p=this.params.get("ColorTransform");Number.isInteger(p)&&(t.colorTransform=p)}var m=new l.JpegImage(t);m.parse(this.bytes);var g=m.getData({width:this.drawWidth,height:this.drawHeight,forceRGB:this.forceRGB,isSourcePDF:!0});this.buffer=g,this.bufferLength=g.length,this.eof=!0}},JpegStream}();r.JpegStream=u},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.JpegImage=void 0;var i=a(5),o=a(201);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t})(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var a,i=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){_inherits(JpegError,t);var r=_createSuper(JpegError);function JpegError(t){return _classCallCheck(this,JpegError),r.call(this,"JPEG error: ".concat(t))}return JpegError}(i.BaseException),c=function(t){_inherits(DNLMarkerError,t);var r=_createSuper(DNLMarkerError);function DNLMarkerError(t,a){var i;return _classCallCheck(this,DNLMarkerError),(i=r.call(this,t)).scanLines=a,i}return DNLMarkerError}(i.BaseException),u=function(t){_inherits(EOIMarkerError,t);var r=_createSuper(EOIMarkerError);function EOIMarkerError(){return _classCallCheck(this,EOIMarkerError),r.apply(this,arguments)}return EOIMarkerError}(i.BaseException),h=function JpegImageClosure(){var t=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),r=4017,a=799,h=3406,d=2276,p=1567,m=3784,g=5793,b=2896;function JpegImage(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.decodeTransform,a=void 0===r?null:r,i=t.colorTransform,o=void 0===i?-1:i;this._decodeTransform=a,this._colorTransform=o}function buildHuffmanTable(t,r){for(var a,i,o=0,l=[],c=16;c>0&&!t[c-1];)c--;l.push({children:[],index:0});var u,h=l[0];for(a=0;a<c;a++){for(i=0;i<t[a];i++){for((h=l.pop()).children[h.index]=r[o];h.index>0;)h=l.pop();for(h.index++,l.push(h);l.length<=a;)l.push(u={children:[],index:0}),h.children[h.index]=u.children,h=u;o++}a+1<c&&(l.push(u={children:[],index:0}),h.children[h.index]=u.children,h=u)}return l[0].children}function getBlockBufferOffset(t,r,a){return 64*((t.blocksPerLine+1)*r+a)}function decodeScan(r,a,h,d,p,m,g,b,y){var v=arguments.length>9&&void 0!==arguments[9]&&arguments[9],S=h.mcusPerLine,k=h.progressive,w=a,C=0,x=0;function readBit(){if(x>0)return x--,C>>x&1;if(255===(C=r[a++])){var t=r[a++];if(t){if(220===t&&v){a+=2;var i=(0,o.readUint16)(r,a);if(a+=2,i>0&&i!==h.scanLines)throw new c("Found DNL marker (0xFFDC) while parsing scan data",i)}else if(217===t){if(v){var d=8*T;if(d>0&&d<h.scanLines/10)throw new c("Found EOI marker (0xFFD9) while parsing scan data, possibly caused by incorrect `scanLines` parameter",d)}throw new u("Found EOI marker (0xFFD9) while parsing scan data")}throw new l("unexpected marker ".concat((C<<8|t).toString(16)))}}return x=7,C>>>7}function decodeHuffman(t){for(var r=t;;){switch(_typeof(r=r[readBit()])){case"number":return r;case"object":continue}throw new l("invalid huffman sequence")}}function receive(t){for(var r=0;t>0;)r=r<<1|readBit(),t--;return r}function receiveAndExtend(t){if(1===t)return 1===readBit()?1:-1;var r=receive(t);return r>=1<<t-1?r:r+(-1<<t)+1}function decodeBaseline(r,a){var i=decodeHuffman(r.huffmanTableDC),o=0===i?0:receiveAndExtend(i);r.blockData[a]=r.pred+=o;for(var l=1;l<64;){var c=decodeHuffman(r.huffmanTableAC),u=15&c,h=c>>4;if(0!==u){var d=t[l+=h];r.blockData[a+d]=receiveAndExtend(u),l++}else{if(h<15)break;l+=16}}}function decodeDCFirst(t,r){var a=decodeHuffman(t.huffmanTableDC),i=0===a?0:receiveAndExtend(a)<<y;t.blockData[r]=t.pred+=i}function decodeDCSuccessive(t,r){t.blockData[r]|=readBit()<<y}var _=0;function decodeACFirst(r,a){if(_>0)_--;else for(var i=m,o=g;i<=o;){var l=decodeHuffman(r.huffmanTableAC),c=15&l,u=l>>4;if(0!==c){var h=t[i+=u];r.blockData[a+h]=receiveAndExtend(c)*(1<<y),i++}else{if(u<15){_=receive(u)+(1<<u)-1;break}i+=16}}}var A,R=0;function decodeACSuccessive(r,a){for(var i,o,c=m,u=g,h=0;c<=u;){var d=a+t[c],p=r.blockData[d]<0?-1:1;switch(R){case 0:if(h=(o=decodeHuffman(r.huffmanTableAC))>>4,0===(i=15&o))h<15?(_=receive(h)+(1<<h),R=4):(h=16,R=1);else{if(1!==i)throw new l("invalid ACn encoding");A=receiveAndExtend(i),R=h?2:3}continue;case 1:case 2:r.blockData[d]?r.blockData[d]+=p*(readBit()<<y):0===--h&&(R=2===R?3:0);break;case 3:r.blockData[d]?r.blockData[d]+=p*(readBit()<<y):(r.blockData[d]=A<<y,R=0);break;case 4:r.blockData[d]&&(r.blockData[d]+=p*(readBit()<<y))}c++}4===R&&0===--_&&(R=0)}var T=0;function decodeMcu(t,r,a,i,o){var l=a%S;T=(a/S|0)*t.v+i;var c=l*t.h+o;r(t,getBlockBufferOffset(t,T,c))}function decodeBlock(t,r,a){T=a/t.blocksPerLine|0;var i=a%t.blocksPerLine;r(t,getBlockBufferOffset(t,T,i))}var I,P,O,E,B,D,M=d.length;D=k?0===m?0===b?decodeDCFirst:decodeDCSuccessive:0===b?decodeACFirst:decodeACSuccessive:decodeBaseline;var L,N,U,j,q=0;for(N=1===M?d[0].blocksPerLine*d[0].blocksPerColumn:S*h.mcusPerColumn;q<=N;){var W=p?Math.min(N-q,p):N;if(W>0){for(P=0;P<M;P++)d[P].pred=0;if(_=0,1===M)for(I=d[0],B=0;B<W;B++)decodeBlock(I,D,q),q++;else for(B=0;B<W;B++){for(P=0;P<M;P++)for(U=(I=d[P]).h,j=I.v,O=0;O<j;O++)for(E=0;E<U;E++)decodeMcu(I,D,q,O,E);q++}}if(x=0,!(L=findNextFileMarker(r,a)))break;if(L.invalid){var z=W>0?"unexpected":"excessive";(0,i.warn)("decodeScan - ".concat(z," MCU data, current marker is: ").concat(L.invalid)),a=L.offset}if(!(L.marker>=65488&&L.marker<=65495))break;a+=2}return a-w}function quantizeAndInverse(t,i,o){var c,u,y,v,S,k,w,C,x,_,A,R,T,I,P,O,E,B=t.quantizationTable,D=t.blockData;if(!B)throw new l("missing required Quantization Table.");for(var M=0;M<64;M+=8)x=D[i+M],_=D[i+M+1],A=D[i+M+2],R=D[i+M+3],T=D[i+M+4],I=D[i+M+5],P=D[i+M+6],O=D[i+M+7],x*=B[M],0!=(_|A|R|T|I|P|O)?(_*=B[M+1],A*=B[M+2],R*=B[M+3],T*=B[M+4],I*=B[M+5],P*=B[M+6],O*=B[M+7],u=(c=(c=g*x+128>>8)+(u=g*T+128>>8)+1>>1)-u,E=(y=A)*m+(v=P)*p+128>>8,y=y*p-v*m+128>>8,w=(S=(S=b*(_-O)+128>>8)+(w=I<<4)+1>>1)-w,k=(C=(C=b*(_+O)+128>>8)+(k=R<<4)+1>>1)-k,v=(c=c+(v=E)+1>>1)-v,y=(u=u+y+1>>1)-y,E=S*d+C*h+2048>>12,S=S*h-C*d+2048>>12,C=E,E=k*a+w*r+2048>>12,k=k*r-w*a+2048>>12,w=E,o[M]=c+C,o[M+7]=c-C,o[M+1]=u+w,o[M+6]=u-w,o[M+2]=y+k,o[M+5]=y-k,o[M+3]=v+S,o[M+4]=v-S):(E=g*x+512>>10,o[M]=E,o[M+1]=E,o[M+2]=E,o[M+3]=E,o[M+4]=E,o[M+5]=E,o[M+6]=E,o[M+7]=E);for(var L=0;L<8;++L)x=o[L],0!=((_=o[L+8])|(A=o[L+16])|(R=o[L+24])|(T=o[L+32])|(I=o[L+40])|(P=o[L+48])|(O=o[L+56]))?(u=(c=4112+((c=g*x+2048>>12)+(u=g*T+2048>>12)+1>>1))-u,E=(y=A)*m+(v=P)*p+2048>>12,y=y*p-v*m+2048>>12,v=E,w=(S=(S=b*(_-O)+2048>>12)+(w=I)+1>>1)-w,k=(C=(C=b*(_+O)+2048>>12)+(k=R)+1>>1)-k,E=S*d+C*h+2048>>12,S=S*h-C*d+2048>>12,C=E,E=k*a+w*r+2048>>12,k=k*r-w*a+2048>>12,(x=(c=c+v+1>>1)+C)<16?x=0:x>=4080?x=255:x>>=4,(_=(u=u+y+1>>1)+(w=E))<16?_=0:_>=4080?_=255:_>>=4,(A=(y=u-y)+k)<16?A=0:A>=4080?A=255:A>>=4,(R=(v=c-v)+S)<16?R=0:R>=4080?R=255:R>>=4,(T=v-S)<16?T=0:T>=4080?T=255:T>>=4,(I=y-k)<16?I=0:I>=4080?I=255:I>>=4,(P=u-w)<16?P=0:P>=4080?P=255:P>>=4,(O=c-C)<16?O=0:O>=4080?O=255:O>>=4,D[i+L]=x,D[i+L+8]=_,D[i+L+16]=A,D[i+L+24]=R,D[i+L+32]=T,D[i+L+40]=I,D[i+L+48]=P,D[i+L+56]=O):(E=(E=g*x+8192>>14)<-2040?0:E>=2024?255:E+2056>>4,D[i+L]=E,D[i+L+8]=E,D[i+L+16]=E,D[i+L+24]=E,D[i+L+32]=E,D[i+L+40]=E,D[i+L+48]=E,D[i+L+56]=E)}function buildComponentData(t,r){for(var a=r.blocksPerLine,i=r.blocksPerColumn,o=new Int16Array(64),l=0;l<i;l++)for(var c=0;c<a;c++){quantizeAndInverse(r,getBlockBufferOffset(r,l,c),o)}return r.blockData}function findNextFileMarker(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,i=t.length-1,l=a<r?a:r;if(r>=i)return null;var c=(0,o.readUint16)(t,r);if(c>=65472&&c<=65534)return{invalid:null,marker:c,offset:r};for(var u=(0,o.readUint16)(t,l);!(u>=65472&&u<=65534);){if(++l>=i)return null;u=(0,o.readUint16)(t,l)}return{invalid:c.toString(16),marker:u,offset:l}}return JpegImage.prototype={parse:function parse(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},h=a.dnlScanLines,d=void 0===h?null:h;function readDataBlock(){var t=(0,o.readUint16)(r,g),a=(g+=2)+t-2,l=findNextFileMarker(r,a,g);l&&l.invalid&&((0,i.warn)("readDataBlock - incorrect length, current marker is: "+l.invalid),a=l.offset);var c=r.subarray(g,a);return g+=c.length,c}function prepareComponents(t){for(var r=Math.ceil(t.samplesPerLine/8/t.maxH),a=Math.ceil(t.scanLines/8/t.maxV),i=0;i<t.components.length;i++){V=t.components[i];var o=Math.ceil(Math.ceil(t.samplesPerLine/8)*V.h/t.maxH),l=Math.ceil(Math.ceil(t.scanLines/8)*V.v/t.maxV),c=r*V.h,u=64*(a*V.v)*(c+1);V.blockData=new Int16Array(u),V.blocksPerLine=o,V.blocksPerColumn=l}t.mcusPerLine=r,t.mcusPerColumn=a}var p,m,g=0,b=null,y=null,v=0,S=[],k=[],w=[],C=(0,o.readUint16)(r,g);if(g+=2,65496!==C)throw new l("SOI not found");C=(0,o.readUint16)(r,g),g+=2;e:for(;65497!==C;){var x,_,A;switch(C){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var R=readDataBlock();65504===C&&74===R[0]&&70===R[1]&&73===R[2]&&70===R[3]&&0===R[4]&&(b={version:{major:R[5],minor:R[6]},densityUnits:R[7],xDensity:R[8]<<8|R[9],yDensity:R[10]<<8|R[11],thumbWidth:R[12],thumbHeight:R[13],thumbData:R.subarray(14,14+3*R[12]*R[13])}),65518===C&&65===R[0]&&100===R[1]&&111===R[2]&&98===R[3]&&101===R[4]&&(y={version:R[5]<<8|R[6],flags0:R[7]<<8|R[8],flags1:R[9]<<8|R[10],transformCode:R[11]});break;case 65499:for(var T=(0,o.readUint16)(r,g),I=T+(g+=2)-2;g<I;){var P=r[g++],O=new Uint16Array(64);if(P>>4==0)for(_=0;_<64;_++)O[t[_]]=r[g++];else{if(P>>4!=1)throw new l("DQT - invalid table spec");for(_=0;_<64;_++)O[t[_]]=(0,o.readUint16)(r,g),g+=2}S[15&P]=O}break;case 65472:case 65473:case 65474:if(p)throw new l("Only single frame JPEGs supported");g+=2,(p={}).extended=65473===C,p.progressive=65474===C,p.precision=r[g++];var E=(0,o.readUint16)(r,g);g+=2,p.scanLines=d||E,p.samplesPerLine=(0,o.readUint16)(r,g),g+=2,p.components=[],p.componentIds={};var B,D=r[g++],M=0,L=0;for(x=0;x<D;x++){B=r[g];var N=r[g+1]>>4,U=15&r[g+1];M<N&&(M=N),L<U&&(L=U);var j=r[g+2];A=p.components.push({h:N,v:U,quantizationId:j,quantizationTable:null}),p.componentIds[B]=A-1,g+=3}p.maxH=M,p.maxV=L,prepareComponents(p);break;case 65476:var q=(0,o.readUint16)(r,g);for(g+=2,x=2;x<q;){var W=r[g++],z=new Uint8Array(16),G=0;for(_=0;_<16;_++,g++)G+=z[_]=r[g];var H=new Uint8Array(G);for(_=0;_<G;_++,g++)H[_]=r[g];x+=17+G,(W>>4==0?w:k)[15&W]=buildHuffmanTable(z,H)}break;case 65501:g+=2,m=(0,o.readUint16)(r,g),g+=2;break;case 65498:var X=1==++v&&!d;g+=2;var V,Y=r[g++],K=[];for(x=0;x<Y;x++){var J=p.componentIds[r[g++]];V=p.components[J];var Z=r[g++];V.huffmanTableDC=w[Z>>4],V.huffmanTableAC=k[15&Z],K.push(V)}var Q=r[g++],$=r[g++],ee=r[g++];try{var te=decodeScan(r,g,p,K,m,Q,$,ee>>4,15&ee,X);g+=te}catch(t){if(t instanceof c)return(0,i.warn)("".concat(t.message," -- attempting to re-parse the JPEG image.")),this.parse(r,{dnlScanLines:t.scanLines});if(t instanceof u){(0,i.warn)("".concat(t.message," -- ignoring the rest of the image data."));break e}throw t}break;case 65500:g+=4;break;case 65535:255!==r[g]&&g--;break;default:var re=findNextFileMarker(r,g-2,g-3);if(re&&re.invalid){(0,i.warn)("JpegImage.parse - unexpected data, current marker is: "+re.invalid),g=re.offset;break}if(g>=r.length-1){(0,i.warn)("JpegImage.parse - reached the end of the image data without finding an EOI marker (0xFFD9).");break e}throw new l("JpegImage.parse - unknown marker: "+C.toString(16))}C=(0,o.readUint16)(r,g),g+=2}for(this.width=p.samplesPerLine,this.height=p.scanLines,this.jfif=b,this.adobe=y,this.components=[],x=0;x<p.components.length;x++){var ae=S[(V=p.components[x]).quantizationId];ae&&(V.quantizationTable=ae),this.components.push({output:buildComponentData(0,V),scaleX:V.h/p.maxH,scaleY:V.v/p.maxV,blocksPerLine:V.blocksPerLine,blocksPerColumn:V.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function _getLinearizedBlockData(t,r){var a,i,o,l,c,u,h,d,p,m,g,b,y=arguments.length>2&&void 0!==arguments[2]&&arguments[2],v=this.width/t,S=this.height/r,k=0,w=this.components.length,C=t*r*w,x=new Uint8ClampedArray(C),_=new Uint32Array(t),A=4294967288;for(h=0;h<w;h++){if(i=(a=this.components[h]).scaleX*v,o=a.scaleY*S,k=h,g=a.output,l=a.blocksPerLine+1<<3,i!==b){for(c=0;c<t;c++)d=0|c*i,_[c]=(d&A)<<3|7&d;b=i}for(u=0;u<r;u++)for(m=l*((d=0|u*o)&A)|(7&d)<<3,c=0;c<t;c++)x[k]=g[m+_[c]],k+=w}var R=this._decodeTransform;if(y||4!==w||R||(R=new Int32Array([-256,255,-256,255,-256,255,-256,255])),R)for(h=0;h<C;)for(d=0,p=0;d<w;d++,h++,p+=2)x[h]=(x[h]*R[p]>>8)+R[p+1];return x},get _isColorConversionNeeded(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0!==this._colorTransform:1===this._colorTransform},_convertYccToRgb:function convertYccToRgb(t){for(var r,a,i,o=0,l=t.length;o<l;o+=3)r=t[o],a=t[o+1],i=t[o+2],t[o]=r-179.456+1.402*i,t[o+1]=r+135.459-.344*a-.714*i,t[o+2]=r-226.816+1.772*a;return t},_convertYcckToRgb:function convertYcckToRgb(t){for(var r,a,i,o,l=0,c=0,u=t.length;c<u;c+=4)r=t[c],a=t[c+1],i=t[c+2],o=t[c+3],t[l++]=a*(-660635669420364e-19*a+.000437130475926232*i-54080610064599e-18*r+.00048449797120281*o-.154362151871126)-122.67195406894+i*(-.000957964378445773*i+.000817076911346625*r-.00477271405408747*o+1.53380253221734)+r*(.000961250184130688*r-.00266257332283933*o+.48357088451265)+o*(-.000336197177618394*o+.484791561490776),t[l++]=107.268039397724+a*(219927104525741e-19*a-.000640992018297945*i+.000659397001245577*r+.000426105652938837*o-.176491792462875)+i*(-.000778269941513683*i+.00130872261408275*r+.000770482631801132*o-.151051492775562)+r*(.00126935368114843*r-.00265090189010898*o+.25802910206845)+o*(-.000318913117588328*o-.213742400323665),t[l++]=a*(-.000570115196973677*a-263409051004589e-19*i+.0020741088115012*r-.00288260236853442*o+.814272968359295)-20.810012546947+i*(-153496057440975e-19*i-.000132689043961446*r+.000560833691242812*o-.195152027534049)+r*(.00174418132927582*r-.00255243321439347*o+.116935020465145)+o*(-.000343531996510555*o+.24165260232407);return t.subarray(0,l)},_convertYcckToCmyk:function convertYcckToCmyk(t){for(var r,a,i,o=0,l=t.length;o<l;o+=4)r=t[o],a=t[o+1],i=t[o+2],t[o]=434.456-r-1.402*i,t[o+1]=119.541-r+.344*a+.714*i,t[o+2]=481.816-r-1.772*a;return t},_convertCmykToRgb:function convertCmykToRgb(t){for(var r,a,i,o,l=0,c=0,u=t.length;c<u;c+=4)r=t[c],a=t[c+1],i=t[c+2],o=t[c+3],t[l++]=255+r*(-6747147073602441e-20*r+.0008379262121013727*a+.0002894718188643294*i+.003264231057537806*o-1.1185611867203937)+a*(26374107616089405e-21*a-8626949158638572e-20*i-.0002748769067499491*o-.02155688794978967)+i*(-3878099212869363e-20*i-.0003267808279485286*o+.0686742238595345)-o*(.0003361971776183937*o+.7430659151342254),t[l++]=255+r*(.00013596372813588848*r+.000924537132573585*a+.00010567359618683593*i+.0004791864687436512*o-.3109689587515875)+a*(-.00023545346108370344*a+.0002702845253534714*i+.0020200308977307156*o-.7488052167015494)+i*(6834815998235662e-20*i+.00015168452363460973*o-.09751927774728933)-o*(.0003189131175883281*o+.7364883807733168),t[l++]=255+r*(13598650411385307e-21*r+.00012423956175490851*a+.0004751985097583589*i-36729317476630422e-22*o-.05562186980264034)+a*(.00016141380598724676*a+.0009692239130725186*i+.0007782692450036253*o-.44015232367526463)+i*(5.068882914068769e-7*i+.0017778369011375071*o-.7591454649749609)-o*(.0003435319965105553*o+.7063770186160144);return t.subarray(0,l)},getData:function getData(t){var r=t.width,a=t.height,i=t.forceRGB,o=void 0!==i&&i,c=t.isSourcePDF,u=void 0!==c&&c;if(this.numComponents>4)throw new l("Unsupported color mode");var h=this._getLinearizedBlockData(r,a,u);if(1===this.numComponents&&o){for(var d=h.length,p=new Uint8ClampedArray(3*d),m=0,g=0;g<d;g++){var b=h[g];p[m++]=b,p[m++]=b,p[m++]=b}return p}if(3===this.numComponents&&this._isColorConversionNeeded)return this._convertYccToRgb(h);if(4===this.numComponents){if(this._isColorConversionNeeded)return o?this._convertYcckToRgb(h):this._convertYcckToCmyk(h);if(o)return this._convertCmykToRgb(h)}return h}},JpegImage}();r.JpegImage=h},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.JpxStream=void 0;var i=a(205),o=a(214),l=a(5),c=function JpxStreamClosure(){function JpxStream(t,r,a,o){this.stream=t,this.maybeLength=r,this.dict=a,this.params=o,i.DecodeStream.call(this,r)}return JpxStream.prototype=Object.create(i.DecodeStream.prototype),Object.defineProperty(JpxStream.prototype,"bytes",{get:function JpxStream_bytes(){return(0,l.shadow)(this,"bytes",this.stream.getBytes(this.maybeLength))},configurable:!0}),JpxStream.prototype.ensureBuffer=function(t){},JpxStream.prototype.readBlock=function(){if(!this.eof){var t=new o.JpxImage;t.parse(this.bytes);var r=t.width,a=t.height,i=t.componentsCount,l=t.tiles.length;if(1===l)this.buffer=t.tiles[0].items;else{for(var c=new Uint8ClampedArray(r*a*i),u=0;u<l;u++)for(var h=t.tiles[u],d=h.width,p=h.height,m=h.left,g=h.top,b=h.items,y=0,v=(r*g+m)*i,S=r*i,k=d*i,w=0;w<p;w++){var C=b.subarray(y,y+k);c.set(C,v),y+=k,v+=S}this.buffer=c}this.bufferLength=this.buffer.length,this.eof=!0}},JpxStream}();r.JpxStream=c},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.JpxImage=void 0;var i=a(5),o=a(201),l=a(210);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _setPrototypeOf(t,r){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t})(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var a,i=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}(JpxError,t);var r=_createSuper(JpxError);function JpxError(t){return function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,JpxError),r.call(this,"JPX error: ".concat(t))}return JpxError}(i.BaseException),u=function JpxImageClosure(){var t={LL:0,LH:1,HL:1,HH:2};function JpxImage(){this.failOnCorruptedImage=!1}function calculateComponentDimensions(t,r){t.x0=Math.ceil(r.XOsiz/t.XRsiz),t.x1=Math.ceil(r.Xsiz/t.XRsiz),t.y0=Math.ceil(r.YOsiz/t.YRsiz),t.y1=Math.ceil(r.Ysiz/t.YRsiz),t.width=t.x1-t.x0,t.height=t.y1-t.y0}function calculateTileGrids(t,r){for(var a,i=t.SIZ,o=[],l=Math.ceil((i.Xsiz-i.XTOsiz)/i.XTsiz),c=Math.ceil((i.Ysiz-i.YTOsiz)/i.YTsiz),u=0;u<c;u++)for(var h=0;h<l;h++)(a={}).tx0=Math.max(i.XTOsiz+h*i.XTsiz,i.XOsiz),a.ty0=Math.max(i.YTOsiz+u*i.YTsiz,i.YOsiz),a.tx1=Math.min(i.XTOsiz+(h+1)*i.XTsiz,i.Xsiz),a.ty1=Math.min(i.YTOsiz+(u+1)*i.YTsiz,i.Ysiz),a.width=a.tx1-a.tx0,a.height=a.ty1-a.ty0,a.components=[],o.push(a);t.tiles=o;for(var d=0,p=i.Csiz;d<p;d++)for(var m=r[d],g=0,b=o.length;g<b;g++){var y={};a=o[g],y.tcx0=Math.ceil(a.tx0/m.XRsiz),y.tcy0=Math.ceil(a.ty0/m.YRsiz),y.tcx1=Math.ceil(a.tx1/m.XRsiz),y.tcy1=Math.ceil(a.ty1/m.YRsiz),y.width=y.tcx1-y.tcx0,y.height=y.tcy1-y.tcy0,a.components[d]=y}}function getBlocksDimensions(t,r,a){var i=r.codingStyleParameters,o={};return i.entropyCoderWithCustomPrecincts?(o.PPx=i.precinctsSizes[a].PPx,o.PPy=i.precinctsSizes[a].PPy):(o.PPx=15,o.PPy=15),o.xcb_=a>0?Math.min(i.xcb,o.PPx-1):Math.min(i.xcb,o.PPx),o.ycb_=a>0?Math.min(i.ycb,o.PPy-1):Math.min(i.ycb,o.PPy),o}function buildPrecincts(t,r,a){var i=1<<a.PPx,o=1<<a.PPy,l=0===r.resLevel,c=1<<a.PPx+(l?0:-1),u=1<<a.PPy+(l?0:-1),h=r.trx1>r.trx0?Math.ceil(r.trx1/i)-Math.floor(r.trx0/i):0,d=r.try1>r.try0?Math.ceil(r.try1/o)-Math.floor(r.try0/o):0,p=h*d;r.precinctParameters={precinctWidth:i,precinctHeight:o,numprecinctswide:h,numprecinctshigh:d,numprecincts:p,precinctWidthInSubband:c,precinctHeightInSubband:u}}function buildCodeblocks(t,r,a){var i,o,l,c,u=a.xcb_,h=a.ycb_,d=1<<u,p=1<<h,m=r.tbx0>>u,g=r.tby0>>h,b=r.tbx1+d-1>>u,y=r.tby1+p-1>>h,v=r.resolution.precinctParameters,S=[],k=[];for(o=g;o<y;o++)for(i=m;i<b;i++){if((l={cbx:i,cby:o,tbx0:d*i,tby0:p*o,tbx1:d*(i+1),tby1:p*(o+1)}).tbx0_=Math.max(r.tbx0,l.tbx0),l.tby0_=Math.max(r.tby0,l.tby0),l.tbx1_=Math.min(r.tbx1,l.tbx1),l.tby1_=Math.min(r.tby1,l.tby1),c=Math.floor((l.tbx0_-r.tbx0)/v.precinctWidthInSubband)+Math.floor((l.tby0_-r.tby0)/v.precinctHeightInSubband)*v.numprecinctswide,l.precinctNumber=c,l.subbandType=r.type,l.Lblock=3,!(l.tbx1_<=l.tbx0_||l.tby1_<=l.tby0_)){S.push(l);var w=k[c];void 0!==w?(i<w.cbxMin?w.cbxMin=i:i>w.cbxMax&&(w.cbxMax=i),o<w.cbyMin?w.cbxMin=o:o>w.cbyMax&&(w.cbyMax=o)):k[c]=w={cbxMin:i,cbyMin:o,cbxMax:i,cbyMax:o},l.precinct=w}}r.codeblockParameters={codeblockWidth:u,codeblockHeight:h,numcodeblockwide:b-m+1,numcodeblockhigh:y-g+1},r.codeblocks=S,r.precincts=k}function createPacket(t,r,a){for(var i=[],o=t.subbands,l=0,c=o.length;l<c;l++)for(var u=o[l].codeblocks,h=0,d=u.length;h<d;h++){var p=u[h];p.precinctNumber===r&&i.push(p)}return{layerNumber:a,codeblocks:i}}function LayerResolutionComponentPositionIterator(t){for(var r=t.SIZ,a=t.currentTile.index,i=t.tiles[a],o=i.codingStyleDefaultParameters.layersCount,l=r.Csiz,u=0,h=0;h<l;h++)u=Math.max(u,i.components[h].codingStyleParameters.decompositionLevelsCount);var d=0,p=0,m=0,g=0;this.nextPacket=function JpxImage_nextPacket(){for(;d<o;d++){for(;p<=u;p++){for(;m<l;m++){var t=i.components[m];if(!(p>t.codingStyleParameters.decompositionLevelsCount)){for(var r=t.resolutions[p],a=r.precinctParameters.numprecincts;g<a;){var h=createPacket(r,g,d);return g++,h}g=0}}m=0}p=0}throw new c("Out of packets")}}function ResolutionLayerComponentPositionIterator(t){for(var r=t.SIZ,a=t.currentTile.index,i=t.tiles[a],o=i.codingStyleDefaultParameters.layersCount,l=r.Csiz,u=0,h=0;h<l;h++)u=Math.max(u,i.components[h].codingStyleParameters.decompositionLevelsCount);var d=0,p=0,m=0,g=0;this.nextPacket=function JpxImage_nextPacket(){for(;d<=u;d++){for(;p<o;p++){for(;m<l;m++){var t=i.components[m];if(!(d>t.codingStyleParameters.decompositionLevelsCount)){for(var r=t.resolutions[d],a=r.precinctParameters.numprecincts;g<a;){var h=createPacket(r,g,p);return g++,h}g=0}}m=0}p=0}throw new c("Out of packets")}}function ResolutionPositionComponentLayerIterator(t){var r,a,i,o,l=t.SIZ,u=t.currentTile.index,h=t.tiles[u],d=h.codingStyleDefaultParameters.layersCount,p=l.Csiz,m=0;for(i=0;i<p;i++){var g=h.components[i];m=Math.max(m,g.codingStyleParameters.decompositionLevelsCount)}var b=new Int32Array(m+1);for(a=0;a<=m;++a){var y=0;for(i=0;i<p;++i){var v=h.components[i].resolutions;a<v.length&&(y=Math.max(y,v[a].precinctParameters.numprecincts))}b[a]=y}r=0,a=0,i=0,o=0,this.nextPacket=function JpxImage_nextPacket(){for(;a<=m;a++){for(;o<b[a];o++){for(;i<p;i++){var t=h.components[i];if(!(a>t.codingStyleParameters.decompositionLevelsCount)){var l=t.resolutions[a],u=l.precinctParameters.numprecincts;if(!(o>=u)){for(;r<d;){var g=createPacket(l,o,r);return r++,g}r=0}}}i=0}o=0}throw new c("Out of packets")}}function PositionComponentResolutionLayerIterator(t){var r=t.SIZ,a=t.currentTile.index,i=t.tiles[a],o=i.codingStyleDefaultParameters.layersCount,l=r.Csiz,u=getPrecinctSizesInImageScale(i),h=u,d=0,p=0,m=0,g=0,b=0;this.nextPacket=function JpxImage_nextPacket(){for(;b<h.maxNumHigh;b++){for(;g<h.maxNumWide;g++){for(;m<l;m++){for(var t=i.components[m],r=t.codingStyleParameters.decompositionLevelsCount;p<=r;p++){var a=t.resolutions[p],y=u.components[m].resolutions[p],v=getPrecinctIndexIfExist(g,b,y,h,a);if(null!==v){for(;d<o;){var S=createPacket(a,v,d);return d++,S}d=0}}p=0}m=0}g=0}throw new c("Out of packets")}}function ComponentPositionResolutionLayerIterator(t){var r=t.SIZ,a=t.currentTile.index,i=t.tiles[a],o=i.codingStyleDefaultParameters.layersCount,l=r.Csiz,u=getPrecinctSizesInImageScale(i),h=0,d=0,p=0,m=0,g=0;this.nextPacket=function JpxImage_nextPacket(){for(;p<l;++p){for(var t=i.components[p],r=u.components[p],a=t.codingStyleParameters.decompositionLevelsCount;g<r.maxNumHigh;g++){for(;m<r.maxNumWide;m++){for(;d<=a;d++){var b=t.resolutions[d],y=r.resolutions[d],v=getPrecinctIndexIfExist(m,g,y,r,b);if(null!==v){for(;h<o;){var S=createPacket(b,v,h);return h++,S}h=0}}d=0}m=0}g=0}throw new c("Out of packets")}}function getPrecinctIndexIfExist(t,r,a,i,o){var l=t*i.minWidth,c=r*i.minHeight;if(l%a.width!=0||c%a.height!=0)return null;var u=c/a.width*o.precinctParameters.numprecinctswide;return l/a.height+u}function getPrecinctSizesInImageScale(t){for(var r=t.components.length,a=Number.MAX_VALUE,i=Number.MAX_VALUE,o=0,l=0,c=new Array(r),u=0;u<r;u++){for(var h=t.components[u],d=h.codingStyleParameters.decompositionLevelsCount,p=new Array(d+1),m=Number.MAX_VALUE,g=Number.MAX_VALUE,b=0,y=0,v=1,S=d;S>=0;--S){var k=h.resolutions[S],w=v*k.precinctParameters.precinctWidth,C=v*k.precinctParameters.precinctHeight;m=Math.min(m,w),g=Math.min(g,C),b=Math.max(b,k.precinctParameters.numprecinctswide),y=Math.max(y,k.precinctParameters.numprecinctshigh),p[S]={width:w,height:C},v<<=1}a=Math.min(a,m),i=Math.min(i,g),o=Math.max(o,b),l=Math.max(l,y),c[u]={resolutions:p,minWidth:m,minHeight:g,maxNumWide:b,maxNumHigh:y}}return{components:c,minWidth:a,minHeight:i,maxNumWide:o,maxNumHigh:l}}function buildPackets(t){for(var r=t.SIZ,a=t.currentTile.index,i=t.tiles[a],o=r.Csiz,l=0;l<o;l++){for(var u=i.components[l],h=u.codingStyleParameters.decompositionLevelsCount,d=[],p=[],m=0;m<=h;m++){var g,b=getBlocksDimensions(0,u,m),y={},v=1<<h-m;if(y.trx0=Math.ceil(u.tcx0/v),y.try0=Math.ceil(u.tcy0/v),y.trx1=Math.ceil(u.tcx1/v),y.try1=Math.ceil(u.tcy1/v),y.resLevel=m,buildPrecincts(0,y,b),d.push(y),0===m)(g={}).type="LL",g.tbx0=Math.ceil(u.tcx0/v),g.tby0=Math.ceil(u.tcy0/v),g.tbx1=Math.ceil(u.tcx1/v),g.tby1=Math.ceil(u.tcy1/v),g.resolution=y,buildCodeblocks(0,g,b),p.push(g),y.subbands=[g];else{var S=1<<h-m+1,k=[];(g={}).type="HL",g.tbx0=Math.ceil(u.tcx0/S-.5),g.tby0=Math.ceil(u.tcy0/S),g.tbx1=Math.ceil(u.tcx1/S-.5),g.tby1=Math.ceil(u.tcy1/S),g.resolution=y,buildCodeblocks(0,g,b),p.push(g),k.push(g),(g={}).type="LH",g.tbx0=Math.ceil(u.tcx0/S),g.tby0=Math.ceil(u.tcy0/S-.5),g.tbx1=Math.ceil(u.tcx1/S),g.tby1=Math.ceil(u.tcy1/S-.5),g.resolution=y,buildCodeblocks(0,g,b),p.push(g),k.push(g),(g={}).type="HH",g.tbx0=Math.ceil(u.tcx0/S-.5),g.tby0=Math.ceil(u.tcy0/S-.5),g.tbx1=Math.ceil(u.tcx1/S-.5),g.tby1=Math.ceil(u.tcy1/S-.5),g.resolution=y,buildCodeblocks(0,g,b),p.push(g),k.push(g),y.subbands=k}}u.resolutions=d,u.subbands=p}var w=i.codingStyleDefaultParameters.progressionOrder;switch(w){case 0:i.packetsIterator=new LayerResolutionComponentPositionIterator(t);break;case 1:i.packetsIterator=new ResolutionLayerComponentPositionIterator(t);break;case 2:i.packetsIterator=new ResolutionPositionComponentLayerIterator(t);break;case 3:i.packetsIterator=new PositionComponentResolutionLayerIterator(t);break;case 4:i.packetsIterator=new ComponentPositionResolutionLayerIterator(t);break;default:throw new c("Unsupported progression order ".concat(w))}}function parseTilePackets(t,i,l,c){var u,h=0,d=0,p=!1;function readBits(t){for(;d<t;){var r=i[l+h];h++,p?(u=u<<7|r,d+=7,p=!1):(u=u<<8|r,d+=8),255===r&&(p=!0)}return u>>>(d-=t)&(1<<t)-1}function skipMarkerIfEqual(t){return 255===i[l+h-1]&&i[l+h]===t?(skipBytes(1),!0):255===i[l+h]&&i[l+h+1]===t&&(skipBytes(2),!0)}function skipBytes(t){h+=t}function alignToByte(){d=0,p&&(h++,p=!1)}function readCodingpasses(){if(0===readBits(1))return 1;if(0===readBits(1))return 2;var t=readBits(2);return t<3?t+3:(t=readBits(5))<31?t+6:(t=readBits(7))+37}for(var m=t.currentTile.index,g=t.tiles[m],b=t.COD.sopMarkerUsed,y=t.COD.ephMarkerUsed,v=g.packetsIterator;h<c;){alignToByte(),b&&skipMarkerIfEqual(145)&&skipBytes(4);var S=v.nextPacket();if(readBits(1)){for(var k,w=S.layerNumber,C=[],x=0,_=S.codeblocks.length;x<_;x++){var A=(k=S.codeblocks[x]).precinct,R=k.cbx-A.cbxMin,T=k.cby-A.cbyMin,I=!1,P=!1;if(void 0!==k.included)I=!!readBits(1);else{var O,E;if(void 0!==(A=k.precinct).inclusionTree)O=A.inclusionTree;else{var B=A.cbxMax-A.cbxMin+1,D=A.cbyMax-A.cbyMin+1;O=new a(B,D,w),E=new r(B,D),A.inclusionTree=O,A.zeroBitPlanesTree=E}if(O.reset(R,T,w))for(;;){if(!readBits(1)){O.incrementValue(w);break}if(!O.nextLevel()){k.included=!0,I=P=!0;break}}}if(I){if(P){for((E=A.zeroBitPlanesTree).reset(R,T);;)if(readBits(1)){if(!E.nextLevel())break}else E.incrementValue();k.zeroBitPlanes=E.value}for(var M=readCodingpasses();readBits(1);)k.Lblock++;var L=(0,o.log2)(M),N=readBits((M<1<<L?L-1:L)+k.Lblock);C.push({codeblock:k,codingpasses:M,dataLength:N})}}for(alignToByte(),y&&skipMarkerIfEqual(146);C.length>0;){var U=C.shift();void 0===(k=U.codeblock).data&&(k.data=[]),k.data.push({data:i,start:l+h,end:l+h+U.dataLength,codingpasses:U.codingpasses}),h+=U.dataLength}}}return h}function copyCoefficients(t,r,a,i,o,c,h,d){for(var p=i.tbx0,m=i.tby0,g=i.tbx1-i.tbx0,b=i.codeblocks,y="H"===i.type.charAt(0)?1:0,v="H"===i.type.charAt(1)?r:0,S=0,k=b.length;S<k;++S){var w=b[S],C=w.tbx1_-w.tbx0_,x=w.tby1_-w.tby0_;if(0!==C&&0!==x&&void 0!==w.data){var _,A;_=new u(C,x,w.subbandType,w.zeroBitPlanes,c),A=2;var R,T,I,P=w.data,O=0,E=0;for(R=0,T=P.length;R<T;R++)O+=(I=P[R]).end-I.start,E+=I.codingpasses;var B=new Uint8Array(O),D=0;for(R=0,T=P.length;R<T;R++){var M=(I=P[R]).data.subarray(I.start,I.end);B.set(M,D),D+=M.length}var L=new l.ArithmeticDecoder(B,0,O);for(_.setDecoder(L),R=0;R<E;R++){switch(A){case 0:_.runSignificancePropagationPass();break;case 1:_.runMagnitudeRefinementPass();break;case 2:_.runCleanupPass(),d&&_.checkSegmentationSymbol()}A=(A+1)%3}var N,U,j,q=w.tbx0_-p+(w.tby0_-m)*g,W=_.coefficentsSign,z=_.coefficentsMagnitude,G=_.bitsDecoded,H=h?0:.5;D=0;var X="LL"!==i.type;for(R=0;R<x;R++){var V=2*(q/g|0)*(r-g)+y+v;for(N=0;N<C;N++){if(0!==(U=z[D])){U=(U+H)*o,0!==W[D]&&(U=-U),j=G[D];var Y=X?V+(q<<1):q;t[Y]=h&&j>=c?U:U*(1<<c-j)}q++,D++}q+=g-C}}}}function transformTile(r,a,i){for(var o=a.components[i],l=o.codingStyleParameters,c=o.quantizationParameters,u=l.decompositionLevelsCount,h=c.SPqcds,m=c.scalarExpounded,g=c.guardBits,b=l.segmentationSymbolUsed,y=r.components[i].precision,v=l.reversibleTransformation,S=v?new p:new d,k=[],w=0,C=0;C<=u;C++){for(var x=o.resolutions[C],_=x.trx1-x.trx0,A=x.try1-x.try0,R=new Float32Array(_*A),T=0,I=x.subbands.length;T<I;T++){var P,O;m?(P=h[w].mu,O=h[w].epsilon,w++):(P=h[0].mu,O=h[0].epsilon+(C>0?1-C:0));var E=x.subbands[T],B=t[E.type];copyCoefficients(R,_,0,E,v?1:Math.pow(2,y+B-O)*(1+P/2048),g+O-1,v,b)}k.push({width:_,height:A,items:R})}var D=S.calculate(k,o.tcx0,o.tcy0);return{left:o.tcx0,top:o.tcy0,width:D.width,height:D.height,items:D.items}}function initializeTile(t,r){for(var a=t.SIZ.Csiz,i=t.tiles[r],o=0;o<a;o++){var l=i.components[o],c=void 0!==t.currentTile.QCC[o]?t.currentTile.QCC[o]:t.currentTile.QCD;l.quantizationParameters=c;var u=void 0!==t.currentTile.COC[o]?t.currentTile.COC[o]:t.currentTile.COD;l.codingStyleParameters=u}i.codingStyleDefaultParameters=t.currentTile.COD}JpxImage.prototype={parse:function JpxImage_parse(t){if(65359!==(0,o.readUint16)(t,0))for(var r=0,a=t.length;r<a;){var l=8,u=(0,o.readUint32)(t,r),h=(0,o.readUint32)(t,r+4);if(r+=l,1===u&&(u=4294967296*(0,o.readUint32)(t,r)+(0,o.readUint32)(t,r+4),r+=8,l+=8),0===u&&(u=a-r+l),u<l)throw new c("Invalid box field size");var d=u-l,p=!0;switch(h){case 1785737832:p=!1;break;case 1668246642:var m=t[r];if(1===m){var g=(0,o.readUint32)(t,r+3);switch(g){case 16:case 17:case 18:break;default:(0,i.warn)("Unknown colorspace "+g)}}else 2===m&&(0,i.info)("ICC profile not supported");break;case 1785737827:this.parseCodestream(t,r,r+d);break;case 1783636e3:218793738!==(0,o.readUint32)(t,r)&&(0,i.warn)("Invalid JP2 signature");break;case 1783634458:case 1718909296:case 1920099697:case 1919251232:case 1768449138:break;default:var b=String.fromCharCode(h>>24&255,h>>16&255,h>>8&255,255&h);(0,i.warn)("Unsupported header type "+h+" ("+b+")")}p&&(r+=d)}else this.parseCodestream(t,0,t.length)},parseImageProperties:function JpxImage_parseImageProperties(t){for(var r=t.getByte();r>=0;){if(65361===(r<<8|(r=t.getByte()))){t.skip(4);var a=t.getInt32()>>>0,i=t.getInt32()>>>0,o=t.getInt32()>>>0,l=t.getInt32()>>>0;t.skip(16);var u=t.getUint16();return this.width=a-o,this.height=i-l,this.componentsCount=u,void(this.bitsPerComponent=8)}}throw new c("No size marker found in JPX stream")},parseCodestream:function JpxImage_parseCodestream(t,r,a){var l={},u=!1;try{for(var h=r;h+1<a;){var d=(0,o.readUint16)(t,h);h+=2;var p,m,g,b,y,v,S=0;switch(d){case 65359:l.mainHeader=!0;break;case 65497:break;case 65361:S=(0,o.readUint16)(t,h);var k={};k.Xsiz=(0,o.readUint32)(t,h+4),k.Ysiz=(0,o.readUint32)(t,h+8),k.XOsiz=(0,o.readUint32)(t,h+12),k.YOsiz=(0,o.readUint32)(t,h+16),k.XTsiz=(0,o.readUint32)(t,h+20),k.YTsiz=(0,o.readUint32)(t,h+24),k.XTOsiz=(0,o.readUint32)(t,h+28),k.YTOsiz=(0,o.readUint32)(t,h+32);var w=(0,o.readUint16)(t,h+36);k.Csiz=w;var C=[];p=h+38;for(var x=0;x<w;x++){var _={precision:1+(127&t[p]),isSigned:!!(128&t[p]),XRsiz:t[p+1],YRsiz:t[p+2]};p+=3,calculateComponentDimensions(_,k),C.push(_)}l.SIZ=k,l.components=C,calculateTileGrids(l,C),l.QCC=[],l.COC=[];break;case 65372:S=(0,o.readUint16)(t,h);var A={};switch(p=h+2,31&(m=t[p++])){case 0:b=8,y=!0;break;case 1:b=16,y=!1;break;case 2:b=16,y=!0;break;default:throw new Error("Invalid SQcd value "+m)}for(A.noQuantization=8===b,A.scalarExpounded=y,A.guardBits=m>>5,g=[];p<S+h;){var R={};8===b?(R.epsilon=t[p++]>>3,R.mu=0):(R.epsilon=t[p]>>3,R.mu=(7&t[p])<<8|t[p+1],p+=2),g.push(R)}A.SPqcds=g,l.mainHeader?l.QCD=A:(l.currentTile.QCD=A,l.currentTile.QCC=[]);break;case 65373:S=(0,o.readUint16)(t,h);var T,I={};switch(p=h+2,l.SIZ.Csiz<257?T=t[p++]:(T=(0,o.readUint16)(t,p),p+=2),31&(m=t[p++])){case 0:b=8,y=!0;break;case 1:b=16,y=!1;break;case 2:b=16,y=!0;break;default:throw new Error("Invalid SQcd value "+m)}for(I.noQuantization=8===b,I.scalarExpounded=y,I.guardBits=m>>5,g=[];p<S+h;)R={},8===b?(R.epsilon=t[p++]>>3,R.mu=0):(R.epsilon=t[p]>>3,R.mu=(7&t[p])<<8|t[p+1],p+=2),g.push(R);I.SPqcds=g,l.mainHeader?l.QCC[T]=I:l.currentTile.QCC[T]=I;break;case 65362:S=(0,o.readUint16)(t,h);var P={};p=h+2;var O=t[p++];P.entropyCoderWithCustomPrecincts=!!(1&O),P.sopMarkerUsed=!!(2&O),P.ephMarkerUsed=!!(4&O),P.progressionOrder=t[p++],P.layersCount=(0,o.readUint16)(t,p),p+=2,P.multipleComponentTransform=t[p++],P.decompositionLevelsCount=t[p++],P.xcb=2+(15&t[p++]),P.ycb=2+(15&t[p++]);var E=t[p++];if(P.selectiveArithmeticCodingBypass=!!(1&E),P.resetContextProbabilities=!!(2&E),P.terminationOnEachCodingPass=!!(4&E),P.verticallyStripe=!!(8&E),P.predictableTermination=!!(16&E),P.segmentationSymbolUsed=!!(32&E),P.reversibleTransformation=t[p++],P.entropyCoderWithCustomPrecincts){for(var B=[];p<S+h;){var D=t[p++];B.push({PPx:15&D,PPy:D>>4})}P.precinctsSizes=B}var M=[];if(P.selectiveArithmeticCodingBypass&&M.push("selectiveArithmeticCodingBypass"),P.resetContextProbabilities&&M.push("resetContextProbabilities"),P.terminationOnEachCodingPass&&M.push("terminationOnEachCodingPass"),P.verticallyStripe&&M.push("verticallyStripe"),P.predictableTermination&&M.push("predictableTermination"),M.length>0)throw u=!0,new Error("Unsupported COD options ("+M.join(", ")+")");l.mainHeader?l.COD=P:(l.currentTile.COD=P,l.currentTile.COC=[]);break;case 65424:S=(0,o.readUint16)(t,h),(v={}).index=(0,o.readUint16)(t,h+2),v.length=(0,o.readUint32)(t,h+4),v.dataEnd=v.length+h-2,v.partIndex=t[h+8],v.partsCount=t[h+9],l.mainHeader=!1,0===v.partIndex&&(v.COD=l.COD,v.COC=l.COC.slice(0),v.QCD=l.QCD,v.QCC=l.QCC.slice(0)),l.currentTile=v;break;case 65427:0===(v=l.currentTile).partIndex&&(initializeTile(l,v.index),buildPackets(l)),parseTilePackets(l,t,h,S=v.dataEnd-h);break;case 65365:case 65367:case 65368:case 65380:S=(0,o.readUint16)(t,h);break;case 65363:throw new Error("Codestream code 0xFF53 (COC) is not implemented");default:throw new Error("Unknown codestream code: "+d.toString(16))}h+=S}}catch(t){if(u||this.failOnCorruptedImage)throw new c(t.message);(0,i.warn)("JPX: Trying to recover from: "+t.message)}this.tiles=function transformComponents(t){for(var r=t.SIZ,a=t.components,i=r.Csiz,o=[],l=0,c=t.tiles.length;l<c;l++){var u,h=t.tiles[l],d=[];for(u=0;u<i;u++)d[u]=transformTile(t,h,u);var p,m,g,b,y,v,S,k=d[0],w=new Uint8ClampedArray(k.items.length*i),C={left:k.left,top:k.top,width:k.width,height:k.height,items:w},x=0;if(h.codingStyleDefaultParameters.multipleComponentTransform){var _=4===i,A=d[0].items,R=d[1].items,T=d[2].items,I=_?d[3].items:null;m=.5+(128<<(p=a[0].precision-8));var P=h.components[0],O=i-3;if(b=A.length,P.codingStyleParameters.reversibleTransformation)for(g=0;g<b;g++,x+=O){y=A[g]+m,v=R[g];var E=y-((S=T[g])+v>>2);w[x++]=E+S>>p,w[x++]=E>>p,w[x++]=E+v>>p}else for(g=0;g<b;g++,x+=O)y=A[g]+m,v=R[g],S=T[g],w[x++]=y+1.402*S>>p,w[x++]=y-.34413*v-.71414*S>>p,w[x++]=y+1.772*v>>p;if(_)for(g=0,x=3;g<b;g++,x+=4)w[x]=I[g]+m>>p}else for(u=0;u<i;u++){var B=d[u].items;for(m=.5+(128<<(p=a[u].precision-8)),x=u,g=0,b=B.length;g<b;g++)w[x]=B[g]+m>>p,x+=i}o.push(C)}return o}(l),this.width=l.SIZ.Xsiz-l.SIZ.XOsiz,this.height=l.SIZ.Ysiz-l.SIZ.YOsiz,this.componentsCount=l.SIZ.Csiz}};var r=function TagTreeClosure(){function TagTree(t,r){var a=(0,o.log2)(Math.max(t,r))+1;this.levels=[];for(var i=0;i<a;i++){var l={width:t,height:r,items:[]};this.levels.push(l),t=Math.ceil(t/2),r=Math.ceil(r/2)}}return TagTree.prototype={reset:function TagTree_reset(t,r){for(var a,i=0,o=0;i<this.levels.length;){var l=t+r*(a=this.levels[i]).width;if(void 0!==a.items[l]){o=a.items[l];break}a.index=l,t>>=1,r>>=1,i++}i--,(a=this.levels[i]).items[a.index]=o,this.currentLevel=i,delete this.value},incrementValue:function TagTree_incrementValue(){var t=this.levels[this.currentLevel];t.items[t.index]++},nextLevel:function TagTree_nextLevel(){var t=this.currentLevel,r=this.levels[t],a=r.items[r.index];return--t<0?(this.value=a,!1):(this.currentLevel=t,(r=this.levels[t]).items[r.index]=a,!0)}},TagTree}(),a=function InclusionTreeClosure(){function InclusionTree(t,r,a){var i=(0,o.log2)(Math.max(t,r))+1;this.levels=[];for(var l=0;l<i;l++){for(var c=new Uint8Array(t*r),u=0,h=c.length;u<h;u++)c[u]=a;var d={width:t,height:r,items:c};this.levels.push(d),t=Math.ceil(t/2),r=Math.ceil(r/2)}}return InclusionTree.prototype={reset:function InclusionTree_reset(t,r,a){for(var i=0;i<this.levels.length;){var o=this.levels[i],l=t+r*o.width;o.index=l;var c=o.items[l];if(255===c)break;if(c>a)return this.currentLevel=i,this.propagateValues(),!1;t>>=1,r>>=1,i++}return this.currentLevel=i-1,!0},incrementValue:function InclusionTree_incrementValue(t){var r=this.levels[this.currentLevel];r.items[r.index]=t+1,this.propagateValues()},propagateValues:function InclusionTree_propagateValues(){for(var t=this.currentLevel,r=this.levels[t],a=r.items[r.index];--t>=0;)(r=this.levels[t]).items[r.index]=a},nextLevel:function InclusionTree_nextLevel(){var t=this.currentLevel,r=this.levels[t],a=r.items[r.index];return r.items[r.index]=255,!(--t<0)&&(this.currentLevel=t,(r=this.levels[t]).items[r.index]=a,!0)}},InclusionTree}(),u=function BitModelClosure(){var t=17,r=new Uint8Array([0,5,8,0,3,7,8,0,4,7,8,0,0,0,0,0,1,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8]),a=new Uint8Array([0,3,4,0,5,7,7,0,8,8,8,0,0,0,0,0,1,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8]),i=new Uint8Array([0,1,2,0,1,2,2,0,2,2,2,0,0,0,0,0,3,4,5,0,4,5,5,0,5,5,5,0,0,0,0,0,6,7,7,0,7,7,7,0,7,7,7,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8]);function BitModel(t,o,l,c,u){var h;this.width=t,this.height=o,h="HH"===l?i:"HL"===l?a:r,this.contextLabelTable=h;var d,p=t*o;this.neighborsSignificance=new Uint8Array(p),this.coefficentsSign=new Uint8Array(p),d=u>14?new Uint32Array(p):u>6?new Uint16Array(p):new Uint8Array(p),this.coefficentsMagnitude=d,this.processingFlags=new Uint8Array(p);var m=new Uint8Array(p);if(0!==c)for(var g=0;g<p;g++)m[g]=c;this.bitsDecoded=m,this.reset()}return BitModel.prototype={setDecoder:function BitModel_setDecoder(t){this.decoder=t},reset:function BitModel_reset(){this.contexts=new Int8Array(19),this.contexts[0]=8,this.contexts[17]=92,this.contexts[18]=6},setNeighborsSignificance:function BitModel_setNeighborsSignificance(t,r,a){var i,o=this.neighborsSignificance,l=this.width,c=this.height,u=r>0,h=r+1<l;t>0&&(i=a-l,u&&(o[i-1]+=16),h&&(o[i+1]+=16),o[i]+=4),t+1<c&&(i=a+l,u&&(o[i-1]+=16),h&&(o[i+1]+=16),o[i]+=4),u&&(o[a-1]+=1),h&&(o[a+1]+=1),o[a]|=128},runSignificancePropagationPass:function BitModel_runSignificancePropagationPass(){for(var t=this.decoder,r=this.width,a=this.height,i=this.coefficentsMagnitude,o=this.coefficentsSign,l=this.neighborsSignificance,c=this.processingFlags,u=this.contexts,h=this.contextLabelTable,d=this.bitsDecoded,p=0;p<a;p+=4)for(var m=0;m<r;m++)for(var g=p*r+m,b=0;b<4;b++,g+=r){var y=p+b;if(y>=a)break;if(c[g]&=-2,!i[g]&&l[g]){var v=h[l[g]];if(t.readBit(u,v)){var S=this.decodeSignBit(y,m,g);o[g]=S,i[g]=1,this.setNeighborsSignificance(y,m,g),c[g]|=2}d[g]++,c[g]|=1}}},decodeSignBit:function BitModel_decodeSignBit(t,r,a){var i,o,l,c,u,h,d=this.width,p=this.height,m=this.coefficentsMagnitude,g=this.coefficentsSign;c=r>0&&0!==m[a-1],r+1<d&&0!==m[a+1]?(l=g[a+1],i=c?1-l-(o=g[a-1]):1-l-l):i=c?1-(o=g[a-1])-o:0;var b=3*i;return c=t>0&&0!==m[a-d],t+1<p&&0!==m[a+d]?(l=g[a+d],i=c?1-l-(o=g[a-d])+b:1-l-l+b):i=c?1-(o=g[a-d])-o+b:b,i>=0?(u=9+i,h=this.decoder.readBit(this.contexts,u)):(u=9-i,h=1^this.decoder.readBit(this.contexts,u)),h},runMagnitudeRefinementPass:function BitModel_runMagnitudeRefinementPass(){for(var t,r=this.decoder,a=this.width,i=this.height,o=this.coefficentsMagnitude,l=this.neighborsSignificance,c=this.contexts,u=this.bitsDecoded,h=this.processingFlags,d=a*i,p=4*a,m=0;m<d;m=t){t=Math.min(d,m+p);for(var g=0;g<a;g++)for(var b=m+g;b<t;b+=a)if(o[b]&&0==(1&h[b])){var y=16;if(0!=(2&h[b]))h[b]^=2,y=0===(127&l[b])?15:14;var v=r.readBit(c,y);o[b]=o[b]<<1|v,u[b]++,h[b]|=1}}},runCleanupPass:function BitModel_runCleanupPass(){for(var r,a=this.decoder,i=this.width,o=this.height,l=this.neighborsSignificance,c=this.coefficentsMagnitude,u=this.coefficentsSign,h=this.contexts,d=this.contextLabelTable,p=this.bitsDecoded,m=this.processingFlags,g=i,b=2*i,y=3*i,v=0;v<o;v=r){r=Math.min(v+4,o);for(var S=v*i,k=v+3<o,w=0;w<i;w++){var C,x=S+w,_=0,A=x,R=v;if(k&&0===m[x]&&0===m[x+g]&&0===m[x+b]&&0===m[x+y]&&0===l[x]&&0===l[x+g]&&0===l[x+b]&&0===l[x+y]){if(!a.readBit(h,18)){p[x]++,p[x+g]++,p[x+b]++,p[x+y]++;continue}0!==(_=a.readBit(h,t)<<1|a.readBit(h,t))&&(R=v+_,A+=_*i),C=this.decodeSignBit(R,w,A),u[A]=C,c[A]=1,this.setNeighborsSignificance(R,w,A),m[A]|=2,A=x;for(var T=v;T<=R;T++,A+=i)p[A]++;_++}for(R=v+_;R<r;R++,A+=i)if(!c[A]&&0==(1&m[A])){var I=d[l[A]];1===a.readBit(h,I)&&(C=this.decodeSignBit(R,w,A),u[A]=C,c[A]=1,this.setNeighborsSignificance(R,w,A),m[A]|=2),p[A]++}}}},checkSegmentationSymbol:function BitModel_checkSegmentationSymbol(){var r=this.decoder,a=this.contexts;if(10!==(r.readBit(a,t)<<3|r.readBit(a,t)<<2|r.readBit(a,t)<<1|r.readBit(a,t)))throw new c("Invalid segmentation symbol")}},BitModel}(),h=function TransformClosure(){function Transform(){}return Transform.prototype.calculate=function transformCalculate(t,r,a){for(var i=t[0],o=1,l=t.length;o<l;o++)i=this.iterate(i,t[o],r,a);return i},Transform.prototype.extend=function extend(t,r,a){var i=r-1,o=r+1,l=r+a-2,c=r+a;t[i--]=t[o++],t[c++]=t[l--],t[i--]=t[o++],t[c++]=t[l--],t[i--]=t[o++],t[c++]=t[l--],t[i]=t[o],t[c]=t[l]},Transform.prototype.iterate=function Transform_iterate(t,r,a,i){var o,l,c,u,h,d,p=t.width,m=t.height,g=t.items,b=r.width,y=r.height,v=r.items;for(c=0,o=0;o<m;o++)for(u=2*o*b,l=0;l<p;l++,c++,u+=2)v[u]=g[c];g=t.items=null;var S=new Float32Array(b+8);if(1===b){if(0!=(1&a))for(d=0,c=0;d<y;d++,c+=b)v[c]*=.5}else for(d=0,c=0;d<y;d++,c+=b)S.set(v.subarray(c,c+b),4),this.extend(S,4,b),this.filter(S,4,b),v.set(S.subarray(4,4+b),c);var k=16,w=[];for(o=0;o<k;o++)w.push(new Float32Array(y+8));var C,x=0;if(t=4+y,1===y){if(0!=(1&i))for(h=0;h<b;h++)v[h]*=.5}else for(h=0;h<b;h++){if(0===x){for(k=Math.min(b-h,k),c=h,u=4;u<t;c+=b,u++)for(C=0;C<k;C++)w[C][u]=v[c+C];x=k}var _=w[--x];if(this.extend(_,4,y),this.filter(_,4,y),0===x)for(c=h-k+1,u=4;u<t;c+=b,u++)for(C=0;C<k;C++)v[c+C]=w[C][u]}return{width:b,height:y,items:v}},Transform}(),d=function IrreversibleTransformClosure(){function IrreversibleTransform(){h.call(this)}return IrreversibleTransform.prototype=Object.create(h.prototype),IrreversibleTransform.prototype.filter=function irreversibleTransformFilter(t,r,a){var i,o,l,c,u=a>>1,h=-1.586134342059924,d=-.052980118572961,p=.882911075530934,m=.443506852043971,g=1.230174104914001;for(i=(r|=0)-3,o=u+4;o--;i+=2)t[i]*=.8128930661159609;for(l=m*t[(i=r-2)-1],o=u+3;o--&&(c=m*t[i+1],t[i]=g*t[i]-l-c,o--);i+=2)l=m*t[(i+=2)+1],t[i]=g*t[i]-l-c;for(l=p*t[(i=r-1)-1],o=u+2;o--&&(c=p*t[i+1],t[i]-=l+c,o--);i+=2)l=p*t[(i+=2)+1],t[i]-=l+c;for(l=d*t[(i=r)-1],o=u+1;o--&&(c=d*t[i+1],t[i]-=l+c,o--);i+=2)l=d*t[(i+=2)+1],t[i]-=l+c;if(0!==u)for(l=h*t[(i=r+1)-1],o=u;o--&&(c=h*t[i+1],t[i]-=l+c,o--);i+=2)l=h*t[(i+=2)+1],t[i]-=l+c},IrreversibleTransform}(),p=function ReversibleTransformClosure(){function ReversibleTransform(){h.call(this)}return ReversibleTransform.prototype=Object.create(h.prototype),ReversibleTransform.prototype.filter=function reversibleTransformFilter(t,r,a){var i,o,l=a>>1;for(i=r|=0,o=l+1;o--;i+=2)t[i]-=t[i-1]+t[i+1]+2>>2;for(i=r+1,o=l;o--;i+=2)t[i]+=t[i-1]+t[i+1]>>1},ReversibleTransform}();return JpxImage}();r.JpxImage=u},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.calculateSHA512=r.calculateSHA384=r.calculateSHA256=r.calculateMD5=r.PDF20=r.PDF17=r.CipherTransformFactory=r.ARCFourCipher=r.AES256Cipher=r.AES128Cipher=void 0;var i=a(5),o=a(198),l=a(205);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t})(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var a,i=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}var c=function ARCFourCipherClosure(){function ARCFourCipher(t){this.a=0,this.b=0;var r,a,i=new Uint8Array(256),o=0,l=t.length;for(r=0;r<256;++r)i[r]=r;for(r=0;r<256;++r)o=o+(a=i[r])+t[r%l]&255,i[r]=i[o],i[o]=a;this.s=i}return ARCFourCipher.prototype={encryptBlock:function ARCFourCipher_encryptBlock(t){var r,a,i,o=t.length,l=this.a,c=this.b,u=this.s,h=new Uint8Array(o);for(r=0;r<o;++r)i=u[c=c+(a=u[l=l+1&255])&255],u[l]=i,u[c]=a,h[r]=t[r]^u[a+i&255];return this.a=l,this.b=c,h}},ARCFourCipher.prototype.decryptBlock=ARCFourCipher.prototype.encryptBlock,ARCFourCipher}();r.ARCFourCipher=c;var u=function calculateMD5Closure(){var t=new Uint8Array([7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21]),r=new Int32Array([-680876936,-389564586,606105819,-1044525330,-176418897,1200080426,-1473231341,-45705983,1770035416,-1958414417,-42063,-1990404162,1804603682,-40341101,-1502002290,1236535329,-165796510,-1069501632,643717713,-373897302,-701558691,38016083,-660478335,-405537848,568446438,-1019803690,-187363961,1163531501,-1444681467,-51403784,1735328473,-1926607734,-378558,-2022574463,1839030562,-35309556,-1530992060,1272893353,-155497632,-1094730640,681279174,-358537222,-722521979,76029189,-640364487,-421815835,530742520,-995338651,-198630844,1126891415,-1416354905,-57434055,1700485571,-1894986606,-1051523,-2054922799,1873313359,-30611744,-1560198380,1309151649,-145523070,-1120210379,718787259,-343485551]);return function hash(a,i,o){var l,c,u,h=1732584193,d=-271733879,p=-1732584194,m=271733878,g=o+72&-64,b=new Uint8Array(g);for(l=0;l<o;++l)b[l]=a[i++];for(b[l++]=128,u=g-8;l<u;)b[l++]=0;b[l++]=o<<3&255,b[l++]=o>>5&255,b[l++]=o>>13&255,b[l++]=o>>21&255,b[l++]=o>>>29&255,b[l++]=0,b[l++]=0,b[l++]=0;var y=new Int32Array(16);for(l=0;l<g;){for(c=0;c<16;++c,l+=4)y[c]=b[l]|b[l+1]<<8|b[l+2]<<16|b[l+3]<<24;var v,S,k=h,w=d,C=p,x=m;for(c=0;c<64;++c){c<16?(v=w&C|~w&x,S=c):c<32?(v=x&w|~x&C,S=5*c+1&15):c<48?(v=w^C^x,S=3*c+5&15):(v=C^(w|~x),S=7*c&15);var _=x,A=k+v+r[c]+y[S]|0,R=t[c];x=C,C=w,w=w+(A<<R|A>>>32-R)|0,k=_}h=h+k|0,d=d+w|0,p=p+C|0,m=m+x|0}return new Uint8Array([255&h,h>>8&255,h>>16&255,h>>>24&255,255&d,d>>8&255,d>>16&255,d>>>24&255,255&p,p>>8&255,p>>16&255,p>>>24&255,255&m,m>>8&255,m>>16&255,m>>>24&255])}}();r.calculateMD5=u;var h=function Word64Closure(){function Word64(t,r){this.high=0|t,this.low=0|r}return Word64.prototype={and:function Word64_and(t){this.high&=t.high,this.low&=t.low},xor:function Word64_xor(t){this.high^=t.high,this.low^=t.low},or:function Word64_or(t){this.high|=t.high,this.low|=t.low},shiftRight:function Word64_shiftRight(t){t>=32?(this.low=this.high>>>t-32|0,this.high=0):(this.low=this.low>>>t|this.high<<32-t,this.high=this.high>>>t|0)},shiftLeft:function Word64_shiftLeft(t){t>=32?(this.high=this.low<<t-32,this.low=0):(this.high=this.high<<t|this.low>>>32-t,this.low=this.low<<t)},rotateRight:function Word64_rotateRight(t){var r,a;32&t?(a=this.low,r=this.high):(r=this.low,a=this.high),t&=31,this.low=r>>>t|a<<32-t,this.high=a>>>t|r<<32-t},not:function Word64_not(){this.high=~this.high,this.low=~this.low},add:function Word64_add(t){var r=(this.low>>>0)+(t.low>>>0),a=(this.high>>>0)+(t.high>>>0);r>4294967295&&(a+=1),this.low=0|r,this.high=0|a},copyTo:function Word64_copyTo(t,r){t[r]=this.high>>>24&255,t[r+1]=this.high>>16&255,t[r+2]=this.high>>8&255,t[r+3]=255&this.high,t[r+4]=this.low>>>24&255,t[r+5]=this.low>>16&255,t[r+6]=this.low>>8&255,t[r+7]=255&this.low},assign:function Word64_assign(t){this.high=t.high,this.low=t.low}},Word64}(),d=function calculateSHA256Closure(){function rotr(t,r){return t>>>r|t<<32-r}function ch(t,r,a){return t&r^~t&a}function maj(t,r,a){return t&r^t&a^r&a}function sigma(t){return rotr(t,2)^rotr(t,13)^rotr(t,22)}function sigmaPrime(t){return rotr(t,6)^rotr(t,11)^rotr(t,25)}function littleSigma(t){return rotr(t,7)^rotr(t,18)^t>>>3}var t=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];return function hash(r,a,i){var o,l,c,u=1779033703,h=3144134277,d=1013904242,p=2773480762,m=1359893119,g=2600822924,b=528734635,y=1541459225,v=64*Math.ceil((i+9)/64),S=new Uint8Array(v);for(o=0;o<i;++o)S[o]=r[a++];for(S[o++]=128,c=v-8;o<c;)S[o++]=0;S[o++]=0,S[o++]=0,S[o++]=0,S[o++]=i>>>29&255,S[o++]=i>>21&255,S[o++]=i>>13&255,S[o++]=i>>5&255,S[o++]=i<<3&255;var k,w=new Uint32Array(64);for(o=0;o<v;){for(l=0;l<16;++l)w[l]=S[o]<<24|S[o+1]<<16|S[o+2]<<8|S[o+3],o+=4;for(l=16;l<64;++l)w[l]=0|(rotr(k=w[l-2],17)^rotr(k,19)^k>>>10)+w[l-7]+littleSigma(w[l-15])+w[l-16];var C,x,_=u,A=h,R=d,T=p,I=m,P=g,O=b,E=y;for(l=0;l<64;++l)C=E+sigmaPrime(I)+ch(I,P,O)+t[l]+w[l],x=sigma(_)+maj(_,A,R),E=O,O=P,P=I,I=T+C|0,T=R,R=A,A=_,_=C+x|0;u=u+_|0,h=h+A|0,d=d+R|0,p=p+T|0,m=m+I|0,g=g+P|0,b=b+O|0,y=y+E|0}return new Uint8Array([u>>24&255,u>>16&255,u>>8&255,255&u,h>>24&255,h>>16&255,h>>8&255,255&h,d>>24&255,d>>16&255,d>>8&255,255&d,p>>24&255,p>>16&255,p>>8&255,255&p,m>>24&255,m>>16&255,m>>8&255,255&m,g>>24&255,g>>16&255,g>>8&255,255&g,b>>24&255,b>>16&255,b>>8&255,255&b,y>>24&255,y>>16&255,y>>8&255,255&y])}}();r.calculateSHA256=d;var p=function calculateSHA512Closure(){function ch(t,r,a,i,o){t.assign(r),t.and(a),o.assign(r),o.not(),o.and(i),t.xor(o)}function maj(t,r,a,i,o){t.assign(r),t.and(a),o.assign(r),o.and(i),t.xor(o),o.assign(a),o.and(i),t.xor(o)}function sigma(t,r,a){t.assign(r),t.rotateRight(28),a.assign(r),a.rotateRight(34),t.xor(a),a.assign(r),a.rotateRight(39),t.xor(a)}function sigmaPrime(t,r,a){t.assign(r),t.rotateRight(14),a.assign(r),a.rotateRight(18),t.xor(a),a.assign(r),a.rotateRight(41),t.xor(a)}function littleSigma(t,r,a){t.assign(r),t.rotateRight(1),a.assign(r),a.rotateRight(8),t.xor(a),a.assign(r),a.shiftRight(7),t.xor(a)}function littleSigmaPrime(t,r,a){t.assign(r),t.rotateRight(19),a.assign(r),a.rotateRight(61),t.xor(a),a.assign(r),a.shiftRight(6),t.xor(a)}var t=[new h(1116352408,3609767458),new h(1899447441,602891725),new h(3049323471,3964484399),new h(3921009573,2173295548),new h(961987163,4081628472),new h(1508970993,3053834265),new h(2453635748,2937671579),new h(2870763221,3664609560),new h(3624381080,2734883394),new h(310598401,1164996542),new h(607225278,1323610764),new h(1426881987,3590304994),new h(1925078388,4068182383),new h(2162078206,991336113),new h(2614888103,633803317),new h(3248222580,3479774868),new h(3835390401,2666613458),new h(4022224774,944711139),new h(264347078,2341262773),new h(604807628,2007800933),new h(770255983,1495990901),new h(1249150122,1856431235),new h(1555081692,3175218132),new h(1996064986,2198950837),new h(2554220882,3999719339),new h(2821834349,766784016),new h(2952996808,2566594879),new h(3210313671,3203337956),new h(3336571891,1034457026),new h(3584528711,2466948901),new h(113926993,3758326383),new h(338241895,168717936),new h(666307205,1188179964),new h(773529912,1546045734),new h(1294757372,1522805485),new h(1396182291,2643833823),new h(1695183700,2343527390),new h(1986661051,1014477480),new h(2177026350,1206759142),new h(2456956037,344077627),new h(2730485921,1290863460),new h(2820302411,3158454273),new h(3259730800,3505952657),new h(3345764771,106217008),new h(3516065817,3606008344),new h(3600352804,1432725776),new h(4094571909,1467031594),new h(275423344,851169720),new h(430227734,3100823752),new h(506948616,1363258195),new h(659060556,3750685593),new h(883997877,3785050280),new h(958139571,3318307427),new h(1322822218,3812723403),new h(1537002063,2003034995),new h(1747873779,3602036899),new h(1955562222,1575990012),new h(2024104815,1125592928),new h(2227730452,2716904306),new h(2361852424,442776044),new h(2428436474,593698344),new h(2756734187,3733110249),new h(3204031479,2999351573),new h(3329325298,3815920427),new h(3391569614,3928383900),new h(3515267271,566280711),new h(3940187606,3454069534),new h(4118630271,4000239992),new h(116418474,1914138554),new h(174292421,2731055270),new h(289380356,3203993006),new h(460393269,320620315),new h(685471733,587496836),new h(852142971,1086792851),new h(1017036298,365543100),new h(1126000580,2618297676),new h(1288033470,3409855158),new h(1501505948,4234509866),new h(1607167915,987167468),new h(1816402316,1246189591)];return function hash(r,a,i,o){var l,c,u,d,p,m,g,b;(o=!!o)?(l=new h(3418070365,3238371032),c=new h(1654270250,914150663),u=new h(2438529370,812702999),d=new h(355462360,4144912697),p=new h(1731405415,4290775857),m=new h(2394180231,1750603025),g=new h(3675008525,1694076839),b=new h(1203062813,3204075428)):(l=new h(1779033703,4089235720),c=new h(3144134277,2227873595),u=new h(1013904242,4271175723),d=new h(2773480762,1595750129),p=new h(1359893119,2917565137),m=new h(2600822924,725511199),g=new h(528734635,4215389547),b=new h(1541459225,327033209));var y,v,S,k=128*Math.ceil((i+17)/128),w=new Uint8Array(k);for(y=0;y<i;++y)w[y]=r[a++];for(w[y++]=128,S=k-16;y<S;)w[y++]=0;w[y++]=0,w[y++]=0,w[y++]=0,w[y++]=0,w[y++]=0,w[y++]=0,w[y++]=0,w[y++]=0,w[y++]=0,w[y++]=0,w[y++]=0,w[y++]=i>>>29&255,w[y++]=i>>21&255,w[y++]=i>>13&255,w[y++]=i>>5&255,w[y++]=i<<3&255;var C=new Array(80);for(y=0;y<80;y++)C[y]=new h(0,0);var x,_,A=new h(0,0),R=new h(0,0),T=new h(0,0),I=new h(0,0),P=new h(0,0),O=new h(0,0),E=new h(0,0),B=new h(0,0),D=new h(0,0),M=new h(0,0),L=new h(0,0),N=new h(0,0);for(y=0;y<k;){for(v=0;v<16;++v)C[v].high=w[y]<<24|w[y+1]<<16|w[y+2]<<8|w[y+3],C[v].low=w[y+4]<<24|w[y+5]<<16|w[y+6]<<8|w[y+7],y+=8;for(v=16;v<80;++v)littleSigmaPrime(x=C[v],C[v-2],N),x.add(C[v-7]),littleSigma(L,C[v-15],N),x.add(L),x.add(C[v-16]);for(A.assign(l),R.assign(c),T.assign(u),I.assign(d),P.assign(p),O.assign(m),E.assign(g),B.assign(b),v=0;v<80;++v)D.assign(B),sigmaPrime(L,P,N),D.add(L),ch(L,P,O,E,N),D.add(L),D.add(t[v]),D.add(C[v]),sigma(M,A,N),maj(L,A,R,T,N),M.add(L),x=B,B=E,E=O,O=P,I.add(D),P=I,I=T,T=R,R=A,x.assign(D),x.add(M),A=x;l.add(A),c.add(R),u.add(T),d.add(I),p.add(P),m.add(O),g.add(E),b.add(B)}return o?(_=new Uint8Array(48),l.copyTo(_,0),c.copyTo(_,8),u.copyTo(_,16),d.copyTo(_,24),p.copyTo(_,32),m.copyTo(_,40)):(_=new Uint8Array(64),l.copyTo(_,0),c.copyTo(_,8),u.copyTo(_,16),d.copyTo(_,24),p.copyTo(_,32),m.copyTo(_,40),g.copyTo(_,48),b.copyTo(_,56)),_}}();r.calculateSHA512=p;var m=function calculateSHA384Closure(){return function hash(t,r,a){return p(t,r,a,!0)}}();r.calculateSHA384=m;var g=function NullCipherClosure(){function NullCipher(){}return NullCipher.prototype={decryptBlock:function NullCipher_decryptBlock(t){return t}},NullCipher}(),b=function(){function AESBaseCipher(){_classCallCheck(this,AESBaseCipher),this.constructor===AESBaseCipher&&(0,i.unreachable)("Cannot initialize AESBaseCipher."),this._s=new Uint8Array([99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22]),this._inv_s=new Uint8Array([82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125]),this._mix=new Uint32Array([0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795]),this._mixCol=new Uint8Array(256);for(var t=0;t<256;t++)this._mixCol[t]=t<128?t<<1:t<<1^27;this.buffer=new Uint8Array(16),this.bufferPosition=0}return _createClass(AESBaseCipher,[{key:"_expandKey",value:function _expandKey(t){(0,i.unreachable)("Cannot call `_expandKey` on the base class")}},{key:"_decrypt",value:function _decrypt(t,r){var a,i,o,l=new Uint8Array(16);l.set(t);for(var c=0,u=this._keySize;c<16;++c,++u)l[c]^=r[u];for(var h=this._cyclesOfRepetition-1;h>=1;--h){a=l[13],l[13]=l[9],l[9]=l[5],l[5]=l[1],l[1]=a,a=l[14],i=l[10],l[14]=l[6],l[10]=l[2],l[6]=a,l[2]=i,a=l[15],i=l[11],o=l[7],l[15]=l[3],l[11]=a,l[7]=i,l[3]=o;for(var d=0;d<16;++d)l[d]=this._inv_s[l[d]];for(var p=0,m=16*h;p<16;++p,++m)l[p]^=r[m];for(var g=0;g<16;g+=4){var b=this._mix[l[g]],y=this._mix[l[g+1]],v=this._mix[l[g+2]],S=this._mix[l[g+3]];a=b^y>>>8^y<<24^v>>>16^v<<16^S>>>24^S<<8,l[g]=a>>>24&255,l[g+1]=a>>16&255,l[g+2]=a>>8&255,l[g+3]=255&a}}a=l[13],l[13]=l[9],l[9]=l[5],l[5]=l[1],l[1]=a,a=l[14],i=l[10],l[14]=l[6],l[10]=l[2],l[6]=a,l[2]=i,a=l[15],i=l[11],o=l[7],l[15]=l[3],l[11]=a,l[7]=i,l[3]=o;for(var k=0;k<16;++k)l[k]=this._inv_s[l[k]],l[k]^=r[k];return l}},{key:"_encrypt",value:function _encrypt(t,r){var a,i,o,l=this._s,c=new Uint8Array(16);c.set(t);for(var u=0;u<16;++u)c[u]^=r[u];for(var h=1;h<this._cyclesOfRepetition;h++){for(var d=0;d<16;++d)c[d]=l[c[d]];o=c[1],c[1]=c[5],c[5]=c[9],c[9]=c[13],c[13]=o,o=c[2],i=c[6],c[2]=c[10],c[6]=c[14],c[10]=o,c[14]=i,o=c[3],i=c[7],a=c[11],c[3]=c[15],c[7]=o,c[11]=i,c[15]=a;for(var p=0;p<16;p+=4){var m=c[p+0],g=c[p+1],b=c[p+2],y=c[p+3];a=m^g^b^y,c[p+0]^=a^this._mixCol[m^g],c[p+1]^=a^this._mixCol[g^b],c[p+2]^=a^this._mixCol[b^y],c[p+3]^=a^this._mixCol[y^m]}for(var v=0,S=16*h;v<16;++v,++S)c[v]^=r[S]}for(var k=0;k<16;++k)c[k]=l[c[k]];o=c[1],c[1]=c[5],c[5]=c[9],c[9]=c[13],c[13]=o,o=c[2],i=c[6],c[2]=c[10],c[6]=c[14],c[10]=o,c[14]=i,o=c[3],i=c[7],a=c[11],c[3]=c[15],c[7]=o,c[11]=i,c[15]=a;for(var w=0,C=this._keySize;w<16;++w,++C)c[w]^=r[C];return c}},{key:"_decryptBlock2",value:function _decryptBlock2(t,r){for(var a=t.length,i=this.buffer,o=this.bufferPosition,l=[],c=this.iv,u=0;u<a;++u)if(i[o]=t[u],!(++o<16)){for(var h=this._decrypt(i,this._key),d=0;d<16;++d)h[d]^=c[d];c=i,l.push(h),i=new Uint8Array(16),o=0}if(this.buffer=i,this.bufferLength=o,this.iv=c,0===l.length)return new Uint8Array(0);var p=16*l.length;if(r){var m=l[l.length-1],g=m[15];if(g<=16){for(var b=15,y=16-g;b>=y;--b)if(m[b]!==g){g=0;break}p-=g,l[l.length-1]=m.subarray(0,16-g)}}for(var v=new Uint8Array(p),S=0,k=0,w=l.length;S<w;++S,k+=16)v.set(l[S],k);return v}},{key:"decryptBlock",value:function decryptBlock(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=t.length,o=this.buffer,l=this.bufferPosition;if(a)this.iv=a;else{for(var c=0;l<16&&c<i;++c,++l)o[l]=t[c];if(l<16)return this.bufferLength=l,new Uint8Array(0);this.iv=o,t=t.subarray(16)}return this.buffer=new Uint8Array(16),this.bufferLength=0,this.decryptBlock=this._decryptBlock2,this.decryptBlock(t,r)}},{key:"encrypt",value:function encrypt(t,r){var a=t.length,i=this.buffer,o=this.bufferPosition,l=[];r||(r=new Uint8Array(16));for(var c=0;c<a;++c)if(i[o]=t[c],!(++o<16)){for(var u=0;u<16;++u)i[u]^=r[u];var h=this._encrypt(i,this._key);r=h,l.push(h),i=new Uint8Array(16),o=0}if(this.buffer=i,this.bufferLength=o,this.iv=r,0===l.length)return new Uint8Array(0);for(var d=16*l.length,p=new Uint8Array(d),m=0,g=0,b=l.length;m<b;++m,g+=16)p.set(l[m],g);return p}}]),AESBaseCipher}(),y=function(t){_inherits(AES128Cipher,t);var r=_createSuper(AES128Cipher);function AES128Cipher(t){var a;return _classCallCheck(this,AES128Cipher),(a=r.call(this))._cyclesOfRepetition=10,a._keySize=160,a._rcon=new Uint8Array([141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141]),a._key=a._expandKey(t),a}return _createClass(AES128Cipher,[{key:"_expandKey",value:function _expandKey(t){var r=this._s,a=this._rcon,i=new Uint8Array(176);i.set(t);for(var o=16,l=1;o<176;++l){var c=i[o-3],u=i[o-2],h=i[o-1],d=i[o-4];c=r[c],u=r[u],h=r[h],d=r[d],c^=a[l];for(var p=0;p<4;++p)i[o]=c^=i[o-16],i[++o]=u^=i[o-16],i[++o]=h^=i[o-16],i[++o]=d^=i[o-16],o++}return i}}]),AES128Cipher}(b);r.AES128Cipher=y;var v=function(t){_inherits(AES256Cipher,t);var r=_createSuper(AES256Cipher);function AES256Cipher(t){var a;return _classCallCheck(this,AES256Cipher),(a=r.call(this))._cyclesOfRepetition=14,a._keySize=224,a._key=a._expandKey(t),a}return _createClass(AES256Cipher,[{key:"_expandKey",value:function _expandKey(t){var r=this._s,a=new Uint8Array(240);a.set(t);for(var i,o,l,c,u=1,h=32,d=1;h<240;++d){h%32==16?(i=r[i],o=r[o],l=r[l],c=r[c]):h%32==0&&(i=a[h-3],o=a[h-2],l=a[h-1],c=a[h-4],i=r[i],o=r[o],l=r[l],c=r[c],i^=u,(u<<=1)>=256&&(u=255&(27^u)));for(var p=0;p<4;++p)a[h]=i^=a[h-32],a[++h]=o^=a[h-32],a[++h]=l^=a[h-32],a[++h]=c^=a[h-32],h++}return a}}]),AES256Cipher}(b);r.AES256Cipher=v;var S=function PDF17Closure(){function compareByteArrays(t,r){if(t.length!==r.length)return!1;for(var a=0;a<t.length;a++)if(t[a]!==r[a])return!1;return!0}function PDF17(){}return PDF17.prototype={checkOwnerPassword:function PDF17_checkOwnerPassword(t,r,a,i){var o=new Uint8Array(t.length+56);return o.set(t,0),o.set(r,t.length),o.set(a,t.length+r.length),compareByteArrays(d(o,0,o.length),i)},checkUserPassword:function PDF17_checkUserPassword(t,r,a){var i=new Uint8Array(t.length+8);return i.set(t,0),i.set(r,t.length),compareByteArrays(d(i,0,i.length),a)},getOwnerKey:function PDF17_getOwnerKey(t,r,a,i){var o=new Uint8Array(t.length+56);o.set(t,0),o.set(r,t.length),o.set(a,t.length+r.length);var l=d(o,0,o.length);return new v(l).decryptBlock(i,!1,new Uint8Array(16))},getUserKey:function PDF17_getUserKey(t,r,a){var i=new Uint8Array(t.length+8);i.set(t,0),i.set(r,t.length);var o=d(i,0,i.length);return new v(o).decryptBlock(a,!1,new Uint8Array(16))}},PDF17}();r.PDF17=S;var k=function PDF20Closure(){function concatArrays(t,r){var a=new Uint8Array(t.length+r.length);return a.set(t,0),a.set(r,t.length),a}function calculatePDF20Hash(t,r,a){for(var i=d(r,0,r.length).subarray(0,32),o=[0],l=0;l<64||o[o.length-1]>l-32;){var c=t.length+i.length+a.length,u=new Uint8Array(64*c),h=concatArrays(t,i);h=concatArrays(h,a);for(var g=0,b=0;g<64;g++,b+=c)u.set(h,b);o=new y(i.subarray(0,16)).encrypt(u,i.subarray(16,32));for(var v=0,S=0;S<16;S++)v*=1,v%=3,v+=(o[S]>>>0)%3,v%=3;0===v?i=d(o,0,o.length):1===v?i=m(o,0,o.length):2===v&&(i=p(o,0,o.length)),l++}return i.subarray(0,32)}function PDF20(){}function compareByteArrays(t,r){if(t.length!==r.length)return!1;for(var a=0;a<t.length;a++)if(t[a]!==r[a])return!1;return!0}return PDF20.prototype={hash:function PDF20_hash(t,r,a){return calculatePDF20Hash(t,r,a)},checkOwnerPassword:function PDF20_checkOwnerPassword(t,r,a,i){var o=new Uint8Array(t.length+56);return o.set(t,0),o.set(r,t.length),o.set(a,t.length+r.length),compareByteArrays(calculatePDF20Hash(t,o,a),i)},checkUserPassword:function PDF20_checkUserPassword(t,r,a){var i=new Uint8Array(t.length+8);return i.set(t,0),i.set(r,t.length),compareByteArrays(calculatePDF20Hash(t,i,[]),a)},getOwnerKey:function PDF20_getOwnerKey(t,r,a,i){var o=new Uint8Array(t.length+56);o.set(t,0),o.set(r,t.length),o.set(a,t.length+r.length);var l=calculatePDF20Hash(t,o,a);return new v(l).decryptBlock(i,!1,new Uint8Array(16))},getUserKey:function PDF20_getUserKey(t,r,a){var i=new Uint8Array(t.length+8);i.set(t,0),i.set(r,t.length);var o=calculatePDF20Hash(t,i,[]);return new v(o).decryptBlock(a,!1,new Uint8Array(16))}},PDF20}();r.PDF20=k;var w=function CipherTransformClosure(){function CipherTransform(t,r){this.StringCipherConstructor=t,this.StreamCipherConstructor=r}return CipherTransform.prototype={createStream:function CipherTransform_createStream(t,r){var a=new this.StreamCipherConstructor;return new l.DecryptStream(t,r,(function cipherTransformDecryptStream(t,r){return a.decryptBlock(t,r)}))},decryptString:function CipherTransform_decryptString(t){var r=new this.StringCipherConstructor,a=(0,i.stringToBytes)(t);return a=r.decryptBlock(a,!0),(0,i.bytesToString)(a)}},CipherTransform}(),C=function CipherTransformFactoryClosure(){var t=new Uint8Array([40,191,78,94,78,117,138,65,100,0,78,86,255,250,1,8,46,46,0,182,208,104,62,128,47,12,169,254,100,83,105,122]);function prepareKeyData(r,a,i,o,l,h,d,p){var m,g,b=40+i.length+r.length,y=new Uint8Array(b),v=0;if(a)for(g=Math.min(32,a.length);v<g;++v)y[v]=a[v];for(m=0;v<32;)y[v++]=t[m++];for(m=0,g=i.length;m<g;++m)y[v++]=i[m];for(y[v++]=255&l,y[v++]=l>>8&255,y[v++]=l>>16&255,y[v++]=l>>>24&255,m=0,g=r.length;m<g;++m)y[v++]=r[m];h>=4&&!p&&(y[v++]=255,y[v++]=255,y[v++]=255,y[v++]=255);var S=u(y,0,v),k=d>>3;if(h>=3)for(m=0;m<50;++m)S=u(S,0,k);var w,C=S.subarray(0,k);if(h>=3){for(v=0;v<32;++v)y[v]=t[v];for(m=0,g=r.length;m<g;++m)y[v++]=r[m];w=new c(C).encryptBlock(u(y,0,v)),g=C.length;var x,_=new Uint8Array(g);for(m=1;m<=19;++m){for(x=0;x<g;++x)_[x]=C[x]^m;w=new c(_).encryptBlock(w)}for(m=0,g=w.length;m<g;++m)if(o[m]!==w[m])return null}else for(m=0,g=(w=new c(C).encryptBlock(t)).length;m<g;++m)if(o[m]!==w[m])return null;return C}var r=o.Name.get("Identity");function CipherTransformFactory(a,l,h){var d=a.get("Filter");if(!(0,o.isName)(d,"Standard"))throw new i.FormatError("unknown encryption method");this.dict=a;var p=a.get("V");if(!Number.isInteger(p)||1!==p&&2!==p&&4!==p&&5!==p)throw new i.FormatError("unsupported encryption algorithm");this.algorithm=p;var m=a.get("Length");if(!m)if(p<=3)m=40;else{var g=a.get("CF"),b=a.get("StmF");if((0,o.isDict)(g)&&(0,o.isName)(b)){g.suppressEncryption=!0;var y=g.get(b.name);(m=y&&y.get("Length")||128)<40&&(m<<=3)}}if(!Number.isInteger(m)||m<40||m%8!=0)throw new i.FormatError("invalid key length");var v=(0,i.stringToBytes)(a.get("O")).subarray(0,32),w=(0,i.stringToBytes)(a.get("U")).subarray(0,32),C=a.get("P"),x=a.get("R"),_=(4===p||5===p)&&!1!==a.get("EncryptMetadata");this.encryptMetadata=_;var A,R,T=(0,i.stringToBytes)(l);if(h){if(6===x)try{h=(0,i.utf8StringToString)(h)}catch(t){(0,i.warn)("CipherTransformFactory: Unable to convert UTF8 encoded password.")}A=(0,i.stringToBytes)(h)}if(5!==p)R=prepareKeyData(T,A,v,w,C,x,m,_);else{var I=(0,i.stringToBytes)(a.get("O")).subarray(32,40),P=(0,i.stringToBytes)(a.get("O")).subarray(40,48),O=(0,i.stringToBytes)(a.get("U")).subarray(0,48),E=(0,i.stringToBytes)(a.get("U")).subarray(32,40),B=(0,i.stringToBytes)(a.get("U")).subarray(40,48),D=(0,i.stringToBytes)(a.get("OE")),M=(0,i.stringToBytes)(a.get("UE"));(0,i.stringToBytes)(a.get("Perms"));R=function createEncryptionKey20(t,r,a,i,o,l,c,u,h,d,p,m){if(r){var g=Math.min(127,r.length);r=r.subarray(0,g)}else r=[];var b;return(b=6===t?new k:new S).checkUserPassword(r,u,c)?b.getUserKey(r,h,p):r.length&&b.checkOwnerPassword(r,i,l,a)?b.getOwnerKey(r,o,l,d):null}(x,A,v,I,P,O,w,E,B,D,M)}if(!R&&!h)throw new i.PasswordException("No password given",i.PasswordResponses.NEED_PASSWORD);if(!R&&h&&(R=prepareKeyData(T,function decodeUserPassword(r,a,i,o){var l,h,d=new Uint8Array(32),p=0;for(h=Math.min(32,r.length);p<h;++p)d[p]=r[p];for(l=0;p<32;)d[p++]=t[l++];var m,g=u(d,0,p),b=o>>3;if(i>=3)for(l=0;l<50;++l)g=u(g,0,g.length);if(i>=3){m=a;var y,v=new Uint8Array(b);for(l=19;l>=0;l--){for(y=0;y<b;++y)v[y]=g[y]^l;m=new c(v).encryptBlock(m)}}else m=new c(g.subarray(0,b)).encryptBlock(a);return m}(A,v,x,m),v,w,C,x,m,_)),!R)throw new i.PasswordException("Incorrect Password",i.PasswordResponses.INCORRECT_PASSWORD);if(this.encryptionKey=R,p>=4){var L=a.get("CF");(0,o.isDict)(L)&&(L.suppressEncryption=!0),this.cf=L,this.stmf=a.get("StmF")||r,this.strf=a.get("StrF")||r,this.eff=a.get("EFF")||this.stmf}}function buildObjectKey(t,r,a,i){var o,l,c=new Uint8Array(a.length+9);for(o=0,l=a.length;o<l;++o)c[o]=a[o];return c[o++]=255&t,c[o++]=t>>8&255,c[o++]=t>>16&255,c[o++]=255&r,c[o++]=r>>8&255,i&&(c[o++]=115,c[o++]=65,c[o++]=108,c[o++]=84),u(c,0,o).subarray(0,Math.min(a.length+5,16))}function buildCipherConstructor(t,r,a,l,u){if(!(0,o.isName)(r))throw new i.FormatError("Invalid crypt filter name.");var h,d=t.get(r.name);if(null!=d&&(h=d.get("CFM")),!h||"None"===h.name)return function cipherTransformFactoryBuildCipherConstructorNone(){return new g};if("V2"===h.name)return function cipherTransformFactoryBuildCipherConstructorV2(){return new c(buildObjectKey(a,l,u,!1))};if("AESV2"===h.name)return function cipherTransformFactoryBuildCipherConstructorAESV2(){return new y(buildObjectKey(a,l,u,!0))};if("AESV3"===h.name)return function cipherTransformFactoryBuildCipherConstructorAESV3(){return new v(u)};throw new i.FormatError("Unknown crypto method")}return CipherTransformFactory.prototype={createCipherTransform:function CipherTransformFactory_createCipherTransform(t,r){if(4===this.algorithm||5===this.algorithm)return new w(buildCipherConstructor(this.cf,this.stmf,t,r,this.encryptionKey),buildCipherConstructor(this.cf,this.strf,t,r,this.encryptionKey));var a=buildObjectKey(t,r,this.encryptionKey,!1),i=function buildCipherCipherConstructor(){return new c(a)};return new w(i,i)}},CipherTransformFactory}();r.CipherTransformFactory=C},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ColorSpace=void 0;var i=a(5),o=a(198);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t})(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var a,i=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}var l=function(){function ColorSpace(t,r){_classCallCheck(this,ColorSpace),this.constructor===ColorSpace&&(0,i.unreachable)("Cannot initialize ColorSpace."),this.name=t,this.numComps=r}return _createClass(ColorSpace,[{key:"getRgb",value:function getRgb(t,r){var a=new Uint8ClampedArray(3);return this.getRgbItem(t,r,a,0),a}},{key:"getRgbItem",value:function getRgbItem(t,r,a,o){(0,i.unreachable)("Should not call ColorSpace.getRgbItem")}},{key:"getRgbBuffer",value:function getRgbBuffer(t,r,a,o,l,c,u){(0,i.unreachable)("Should not call ColorSpace.getRgbBuffer")}},{key:"getOutputLength",value:function getOutputLength(t,r){(0,i.unreachable)("Should not call ColorSpace.getOutputLength")}},{key:"isPassthrough",value:function isPassthrough(t){return!1}},{key:"isDefaultDecode",value:function isDefaultDecode(t,r){return ColorSpace.isDefaultDecode(t,this.numComps)}},{key:"fillRgb",value:function fillRgb(t,r,a,i,o,l,c,u,h){var d=r*a,p=null,m=1<<c,g=a!==o||r!==i;if(this.isPassthrough(c))p=u;else if(1===this.numComps&&d>m&&"DeviceGray"!==this.name&&"DeviceRGB"!==this.name){for(var b=c<=8?new Uint8Array(m):new Uint16Array(m),y=0;y<m;y++)b[y]=y;var v=new Uint8ClampedArray(3*m);if(this.getRgbBuffer(b,0,m,v,0,c,0),g){p=new Uint8Array(3*d);for(var S=0,k=0;k<d;++k){var w=3*u[k];p[S++]=v[w],p[S++]=v[w+1],p[S++]=v[w+2]}}else for(var C=0,x=0;x<d;++x){var _=3*u[x];t[C++]=v[_],t[C++]=v[_+1],t[C++]=v[_+2],C+=h}}else g?(p=new Uint8ClampedArray(3*d),this.getRgbBuffer(u,0,d,p,0,c,0)):this.getRgbBuffer(u,0,i*l,t,0,c,h);if(p)if(g)!function resizeRgbImage(t,r,a,i,o,l,c){c=1!==c?0:c;for(var u,h=a/o,d=i/l,p=0,m=new Uint16Array(o),g=3*a,b=0;b<o;b++)m[b]=3*Math.floor(b*h);for(var y=0;y<l;y++)for(var v=Math.floor(y*d)*g,S=0;S<o;S++)u=v+m[S],r[p++]=t[u++],r[p++]=t[u++],r[p++]=t[u++],p+=c}(p,t,r,a,i,o,h);else for(var A=0,R=0,T=0,I=i*l;T<I;T++)t[A++]=p[R++],t[A++]=p[R++],t[A++]=p[R++],A+=h}},{key:"usesZeroToOneRange",get:function get(){return(0,i.shadow)(this,"usesZeroToOneRange",!0)}}],[{key:"parse",value:function parse(t,r,a,i){var o=this.parseToIR(t,r,a,i);return this.fromIR(o)}},{key:"fromIR",value:function fromIR(t){var r,a,o,l=Array.isArray(t)?t[0]:t;switch(l){case"DeviceGrayCS":return this.singletons.gray;case"DeviceRgbCS":return this.singletons.rgb;case"DeviceCmykCS":return this.singletons.cmyk;case"CalGrayCS":return r=t[1],a=t[2],o=t[3],new g(r,a,o);case"CalRGBCS":r=t[1],a=t[2],o=t[3];var d=t[4];return new b(r,a,o,d);case"PatternCS":var p=t[1];return p&&(p=this.fromIR(p)),new u(p);case"IndexedCS":var m=t[1],v=t[2],S=t[3];return new h(this.fromIR(m),v,S);case"AlternateCS":var k=t[1],w=t[2],C=t[3];return new c(k,this.fromIR(w),C);case"LabCS":r=t[1],a=t[2];var x=t[3];return new y(r,a,x);default:throw new i.FormatError("Unknown colorspace name: ".concat(l))}}},{key:"parseToIR",value:function parseToIR(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3?arguments[3]:void 0;if(t=r.fetchIfRef(t),(0,o.isName)(t))switch(t.name){case"DeviceGray":case"G":return"DeviceGrayCS";case"DeviceRGB":case"RGB":return"DeviceRgbCS";case"DeviceCMYK":case"CMYK":return"DeviceCmykCS";case"Pattern":return["PatternCS",null];default:if((0,o.isDict)(a)){var c=a.get("ColorSpace");if((0,o.isDict)(c)){var u=c.get(t.name);if(u){if((0,o.isName)(u))return this.parseToIR(u,r,a,l);t=u;break}}}throw new i.FormatError("unrecognized colorspace ".concat(t.name))}if(Array.isArray(t)){var h,d,p,m,g,b,y=r.fetchIfRef(t[0]).name;switch(y){case"DeviceGray":case"G":return"DeviceGrayCS";case"DeviceRGB":case"RGB":return"DeviceRgbCS";case"DeviceCMYK":case"CMYK":return"DeviceCmykCS";case"CalGray":return["CalGrayCS",m=(d=r.fetchIfRef(t[1])).getArray("WhitePoint"),g=d.getArray("BlackPoint"),b=d.get("Gamma")];case"CalRGB":m=(d=r.fetchIfRef(t[1])).getArray("WhitePoint"),g=d.getArray("BlackPoint"),b=d.getArray("Gamma");var v=d.getArray("Matrix");return["CalRGBCS",m,g,b,v];case"ICCBased":var S=r.fetchIfRef(t[1]),k=S.dict;if(h=k.get("N"),p=k.get("Alternate")){var w=this.parseToIR(p,r,a,l),C=this.fromIR(w,l);if(C.numComps===h)return w;(0,i.warn)("ICCBased color space: Ignoring incorrect /Alternate entry.")}if(1===h)return"DeviceGrayCS";if(3===h)return"DeviceRgbCS";if(4===h)return"DeviceCmykCS";break;case"Pattern":var x=t[1]||null;return x&&(x=this.parseToIR(x,r,a,l)),["PatternCS",x];case"Indexed":case"I":var _=this.parseToIR(t[1],r,a,l),A=r.fetchIfRef(t[2])+1,R=r.fetchIfRef(t[3]);return(0,o.isStream)(R)&&(R=R.getBytes()),["IndexedCS",_,A,R];case"Separation":case"DeviceN":var T=r.fetchIfRef(t[1]);h=Array.isArray(T)?T.length:1,p=this.parseToIR(t[2],r,a,l);var I=l.create(r.fetchIfRef(t[3]));return["AlternateCS",h,p,I];case"Lab":m=(d=r.fetchIfRef(t[1])).getArray("WhitePoint"),g=d.getArray("BlackPoint");var P=d.getArray("Range");return["LabCS",m,g,P];default:throw new i.FormatError('unimplemented color space object "'.concat(y,'"'))}}throw new i.FormatError('unrecognized color space object: "'.concat(t,'"'))}},{key:"isDefaultDecode",value:function isDefaultDecode(t,r){if(!Array.isArray(t))return!0;if(2*r!==t.length)return(0,i.warn)("The decode map is not the correct length"),!0;for(var a=0,o=t.length;a<o;a+=2)if(0!==t[a]||1!==t[a+1])return!1;return!0}},{key:"singletons",get:function get(){return(0,i.shadow)(this,"singletons",{get gray(){return(0,i.shadow)(this,"gray",new d)},get rgb(){return(0,i.shadow)(this,"rgb",new p)},get cmyk(){return(0,i.shadow)(this,"cmyk",new m)}})}}]),ColorSpace}();r.ColorSpace=l;var c=function(t){_inherits(AlternateCS,t);var r=_createSuper(AlternateCS);function AlternateCS(t,a,i){var o;return _classCallCheck(this,AlternateCS),(o=r.call(this,"Alternate",t)).base=a,o.tintFn=i,o.tmpBuf=new Float32Array(a.numComps),o}return _createClass(AlternateCS,[{key:"getRgbItem",value:function getRgbItem(t,r,a,i){var o=this.tmpBuf;this.tintFn(t,r,o,0),this.base.getRgbItem(o,0,a,i)}},{key:"getRgbBuffer",value:function getRgbBuffer(t,r,a,i,o,l,c){var u,h,d=this.tintFn,p=this.base,m=1/((1<<l)-1),g=p.numComps,b=p.usesZeroToOneRange,y=(p.isPassthrough(8)||!b)&&0===c,v=y?o:0,S=y?i:new Uint8ClampedArray(g*a),k=this.numComps,w=new Float32Array(k),C=new Float32Array(g);for(u=0;u<a;u++){for(h=0;h<k;h++)w[h]=t[r++]*m;if(d(w,0,C,0),b)for(h=0;h<g;h++)S[v++]=255*C[h];else p.getRgbItem(C,0,S,v),v+=g}y||p.getRgbBuffer(S,0,a,i,o,8,c)}},{key:"getOutputLength",value:function getOutputLength(t,r){return this.base.getOutputLength(t*this.base.numComps/this.numComps,r)}}]),AlternateCS}(l),u=function(t){_inherits(PatternCS,t);var r=_createSuper(PatternCS);function PatternCS(t){var a;return _classCallCheck(this,PatternCS),(a=r.call(this,"Pattern",null)).base=t,a}return _createClass(PatternCS,[{key:"isDefaultDecode",value:function isDefaultDecode(t,r){(0,i.unreachable)("Should not call PatternCS.isDefaultDecode")}}]),PatternCS}(l),h=function(t){_inherits(IndexedCS,t);var r=_createSuper(IndexedCS);function IndexedCS(t,a,l){var c;_classCallCheck(this,IndexedCS),(c=r.call(this,"Indexed",1)).base=t,c.highVal=a;var u=t.numComps*a;if((0,o.isStream)(l)){c.lookup=new Uint8Array(u);var h=l.getBytes(u);c.lookup.set(h)}else if((0,i.isString)(l)){c.lookup=new Uint8Array(u);for(var d=0;d<u;++d)c.lookup[d]=l.charCodeAt(d)}else{if(!(l instanceof Uint8Array))throw new i.FormatError("Unrecognized lookup table: ".concat(l));c.lookup=l}return c}return _createClass(IndexedCS,[{key:"getRgbItem",value:function getRgbItem(t,r,a,i){var o=this.base.numComps,l=t[r]*o;this.base.getRgbBuffer(this.lookup,l,1,a,i,8,0)}},{key:"getRgbBuffer",value:function getRgbBuffer(t,r,a,i,o,l,c){for(var u=this.base,h=u.numComps,d=u.getOutputLength(h,c),p=this.lookup,m=0;m<a;++m){var g=t[r++]*h;u.getRgbBuffer(p,g,1,i,o,8,c),o+=d}}},{key:"getOutputLength",value:function getOutputLength(t,r){return this.base.getOutputLength(t*this.base.numComps,r)}},{key:"isDefaultDecode",value:function isDefaultDecode(t,r){return!Array.isArray(t)||(2!==t.length?((0,i.warn)("Decode map length is not correct"),!0):!Number.isInteger(r)||r<1?((0,i.warn)("Bits per component is not correct"),!0):0===t[0]&&t[1]===(1<<r)-1)}}]),IndexedCS}(l),d=function(t){_inherits(DeviceGrayCS,t);var r=_createSuper(DeviceGrayCS);function DeviceGrayCS(){return _classCallCheck(this,DeviceGrayCS),r.call(this,"DeviceGray",1)}return _createClass(DeviceGrayCS,[{key:"getRgbItem",value:function getRgbItem(t,r,a,i){var o=255*t[r];a[i]=a[i+1]=a[i+2]=o}},{key:"getRgbBuffer",value:function getRgbBuffer(t,r,a,i,o,l,c){for(var u=255/((1<<l)-1),h=r,d=o,p=0;p<a;++p){var m=u*t[h++];i[d++]=m,i[d++]=m,i[d++]=m,d+=c}}},{key:"getOutputLength",value:function getOutputLength(t,r){return t*(3+r)}}]),DeviceGrayCS}(l),p=function(t){_inherits(DeviceRgbCS,t);var r=_createSuper(DeviceRgbCS);function DeviceRgbCS(){return _classCallCheck(this,DeviceRgbCS),r.call(this,"DeviceRGB",3)}return _createClass(DeviceRgbCS,[{key:"getRgbItem",value:function getRgbItem(t,r,a,i){a[i]=255*t[r],a[i+1]=255*t[r+1],a[i+2]=255*t[r+2]}},{key:"getRgbBuffer",value:function getRgbBuffer(t,r,a,i,o,l,c){if(8!==l||0!==c)for(var u=255/((1<<l)-1),h=r,d=o,p=0;p<a;++p)i[d++]=u*t[h++],i[d++]=u*t[h++],i[d++]=u*t[h++],d+=c;else i.set(t.subarray(r,r+3*a),o)}},{key:"getOutputLength",value:function getOutputLength(t,r){return t*(3+r)/3|0}},{key:"isPassthrough",value:function isPassthrough(t){return 8===t}}]),DeviceRgbCS}(l),m=function DeviceCmykCSClosure(){function convertToRgb(t,r,a,i,o){var l=t[r]*a,c=t[r+1]*a,u=t[r+2]*a,h=t[r+3]*a;i[o]=255+l*(-4.387332384609988*l+54.48615194189176*c+18.82290502165302*u+212.25662451639585*h-285.2331026137004)+c*(1.7149763477362134*c-5.6096736904047315*u+-17.873870861415444*h-5.497006427196366)+u*(-2.5217340131683033*u-21.248923337353073*h+17.5119270841813)+h*(-21.86122147463605*h-189.48180835922747),i[o+1]=255+l*(8.841041422036149*l+60.118027045597366*c+6.871425592049007*u+31.159100130055922*h-79.2970844816548)+c*(-15.310361306967817*c+17.575251261109482*u+131.35250912493976*h-190.9453302588951)+u*(4.444339102852739*u+9.8632861493405*h-24.86741582555878)+h*(-20.737325471181034*h-187.80453709719578),i[o+2]=255+l*(.8842522430003296*l+8.078677503112928*c+30.89978309703729*u-.23883238689178934*h-14.183576799673286)+c*(10.49593273432072*c+63.02378494754052*u+50.606957656360734*h-112.23884253719248)+u*(.03296041114873217*u+115.60384449646641*h-193.58209356861505)+h*(-22.33816807309886*h-180.12613974708367)}return function(t){_inherits(DeviceCmykCS,t);var r=_createSuper(DeviceCmykCS);function DeviceCmykCS(){return _classCallCheck(this,DeviceCmykCS),r.call(this,"DeviceCMYK",4)}return _createClass(DeviceCmykCS,[{key:"getRgbItem",value:function getRgbItem(t,r,a,i){convertToRgb(t,r,1,a,i)}},{key:"getRgbBuffer",value:function getRgbBuffer(t,r,a,i,o,l,c){for(var u=1/((1<<l)-1),h=0;h<a;h++)convertToRgb(t,r,u,i,o),r+=4,o+=3+c}},{key:"getOutputLength",value:function getOutputLength(t,r){return t/4*(3+r)|0}}]),DeviceCmykCS}(l)}(),g=function CalGrayCSClosure(){function convertToRgb(t,r,a,i,o,l){var c=r[a]*l,u=Math.pow(c,t.G),h=t.YW*u,d=Math.max(295.8*Math.pow(h,.3333333333333333)-40.8,0);i[o]=d,i[o+1]=d,i[o+2]=d}return function(t){_inherits(CalGrayCS,t);var r=_createSuper(CalGrayCS);function CalGrayCS(t,a,o){var l;if(_classCallCheck(this,CalGrayCS),l=r.call(this,"CalGray",1),!t)throw new i.FormatError("WhitePoint missing - required for color space CalGray");if(a=a||[0,0,0],o=o||1,l.XW=t[0],l.YW=t[1],l.ZW=t[2],l.XB=a[0],l.YB=a[1],l.ZB=a[2],l.G=o,l.XW<0||l.ZW<0||1!==l.YW)throw new i.FormatError("Invalid WhitePoint components for ".concat(l.name)+", no fallback available");return(l.XB<0||l.YB<0||l.ZB<0)&&((0,i.info)("Invalid BlackPoint for ".concat(l.name,", falling back to default.")),l.XB=l.YB=l.ZB=0),0===l.XB&&0===l.YB&&0===l.ZB||(0,i.warn)("".concat(l.name,", BlackPoint: XB: ").concat(l.XB,", YB: ").concat(l.YB,", ")+"ZB: ".concat(l.ZB,", only default values are supported.")),l.G<1&&((0,i.info)("Invalid Gamma: ".concat(l.G," for ").concat(l.name,", ")+"falling back to default."),l.G=1),l}return _createClass(CalGrayCS,[{key:"getRgbItem",value:function getRgbItem(t,r,a,i){convertToRgb(this,t,r,a,i,1)}},{key:"getRgbBuffer",value:function getRgbBuffer(t,r,a,i,o,l,c){for(var u=1/((1<<l)-1),h=0;h<a;++h)convertToRgb(this,t,r,i,o,u),r+=1,o+=3+c}},{key:"getOutputLength",value:function getOutputLength(t,r){return t*(3+r)}}]),CalGrayCS}(l)}(),b=function CalRGBCSClosure(){var t=new Float32Array([.8951,.2664,-.1614,-.7502,1.7135,.0367,.0389,-.0685,1.0296]),r=new Float32Array([.9869929,-.1470543,.1599627,.4323053,.5183603,.0492912,-.0085287,.0400428,.9684867]),a=new Float32Array([3.2404542,-1.5371385,-.4985314,-.969266,1.8760108,.041556,.0556434,-.2040259,1.0572252]),o=new Float32Array([1,1,1]),c=new Float32Array(3),u=new Float32Array(3),h=new Float32Array(3),d=Math.pow(24/116,3)/8;function matrixProduct(t,r,a){a[0]=t[0]*r[0]+t[1]*r[1]+t[2]*r[2],a[1]=t[3]*r[0]+t[4]*r[1]+t[5]*r[2],a[2]=t[6]*r[0]+t[7]*r[1]+t[8]*r[2]}function sRGBTransferFunction(t){return adjustToRange(0,1,t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function adjustToRange(t,r,a){return Math.max(t,Math.min(r,a))}function decodeL(t){return t<0?-decodeL(-t):t>8?Math.pow((t+16)/116,3):t*d}function convertToRgb(i,l,d,p,m,g){var b=adjustToRange(0,1,l[d]*g),y=adjustToRange(0,1,l[d+1]*g),v=adjustToRange(0,1,l[d+2]*g),S=Math.pow(b,i.GR),k=Math.pow(y,i.GG),w=Math.pow(v,i.GB),C=i.MXA*S+i.MXB*k+i.MXC*w,x=i.MYA*S+i.MYB*k+i.MYC*w,_=i.MZA*S+i.MZB*k+i.MZC*w,A=u;A[0]=C,A[1]=x,A[2]=_;var R=h;!function normalizeWhitePointToFlat(a,i,o){if(1===a[0]&&1===a[2])return o[0]=i[0],o[1]=i[1],void(o[2]=i[2]);var l=o;matrixProduct(t,i,l);var u=c;!function convertToFlat(t,r,a){a[0]=1*r[0]/t[0],a[1]=1*r[1]/t[1],a[2]=1*r[2]/t[2]}(a,l,u),matrixProduct(r,u,o)}(i.whitePoint,A,R);var T=u;!function compensateBlackPoint(t,r,a){if(0===t[0]&&0===t[1]&&0===t[2])return a[0]=r[0],a[1]=r[1],void(a[2]=r[2]);var i=decodeL(0),o=(1-i)/(1-decodeL(t[0])),l=1-o,c=(1-i)/(1-decodeL(t[1])),u=1-c,h=(1-i)/(1-decodeL(t[2])),d=1-h;a[0]=r[0]*o+l,a[1]=r[1]*c+u,a[2]=r[2]*h+d}(i.blackPoint,R,T);var I=h;!function normalizeWhitePointToD65(a,i,o){var l=o;matrixProduct(t,i,l);var u=c;!function convertToD65(t,r,a){a[0]=.95047*r[0]/t[0],a[1]=1*r[1]/t[1],a[2]=1.08883*r[2]/t[2]}(a,l,u),matrixProduct(r,u,o)}(o,T,I);var P=u;matrixProduct(a,I,P),p[m]=255*sRGBTransferFunction(P[0]),p[m+1]=255*sRGBTransferFunction(P[1]),p[m+2]=255*sRGBTransferFunction(P[2])}return function(t){_inherits(CalRGBCS,t);var r=_createSuper(CalRGBCS);function CalRGBCS(t,a,o,l){var c;if(_classCallCheck(this,CalRGBCS),c=r.call(this,"CalRGB",3),!t)throw new i.FormatError("WhitePoint missing - required for color space CalRGB");a=a||new Float32Array(3),o=o||new Float32Array([1,1,1]),l=l||new Float32Array([1,0,0,0,1,0,0,0,1]);var u=t[0],h=t[1],d=t[2];c.whitePoint=t;var p=a[0],m=a[1],g=a[2];if(c.blackPoint=a,c.GR=o[0],c.GG=o[1],c.GB=o[2],c.MXA=l[0],c.MYA=l[1],c.MZA=l[2],c.MXB=l[3],c.MYB=l[4],c.MZB=l[5],c.MXC=l[6],c.MYC=l[7],c.MZC=l[8],u<0||d<0||1!==h)throw new i.FormatError("Invalid WhitePoint components for ".concat(c.name)+", no fallback available");return(p<0||m<0||g<0)&&((0,i.info)("Invalid BlackPoint for ".concat(c.name," [").concat(p,", ").concat(m,", ").concat(g,"], ")+"falling back to default."),c.blackPoint=new Float32Array(3)),(c.GR<0||c.GG<0||c.GB<0)&&((0,i.info)("Invalid Gamma [".concat(c.GR,", ").concat(c.GG,", ").concat(c.GB,"] for ")+"".concat(c.name,", falling back to default.")),c.GR=c.GG=c.GB=1),c}return _createClass(CalRGBCS,[{key:"getRgbItem",value:function getRgbItem(t,r,a,i){convertToRgb(this,t,r,a,i,1)}},{key:"getRgbBuffer",value:function getRgbBuffer(t,r,a,i,o,l,c){for(var u=1/((1<<l)-1),h=0;h<a;++h)convertToRgb(this,t,r,i,o,u),r+=3,o+=3+c}},{key:"getOutputLength",value:function getOutputLength(t,r){return t*(3+r)/3|0}}]),CalRGBCS}(l)}(),y=function LabCSClosure(){function fn_g(t){return t>=6/29?t*t*t:108/841*(t-4/29)}function decode(t,r,a,i){return a+t*(i-a)/r}function convertToRgb(t,r,a,i,o,l){var c=r[a],u=r[a+1],h=r[a+2];!1!==i&&(c=decode(c,i,0,100),u=decode(u,i,t.amin,t.amax),h=decode(h,i,t.bmin,t.bmax)),u>t.amax?u=t.amax:u<t.amin&&(u=t.amin),h>t.bmax?h=t.bmax:h<t.bmin&&(h=t.bmin);var d,p,m,g=(c+16)/116,b=g+u/500,y=g-h/200,v=t.XW*fn_g(b),S=t.YW*fn_g(g),k=t.ZW*fn_g(y);t.ZW<1?(d=3.1339*v+-1.617*S+-.4906*k,p=-.9785*v+1.916*S+.0333*k,m=.072*v+-.229*S+1.4057*k):(d=3.2406*v+-1.5372*S+-.4986*k,p=-.9689*v+1.8758*S+.0415*k,m=.0557*v+-.204*S+1.057*k),o[l]=255*Math.sqrt(d),o[l+1]=255*Math.sqrt(p),o[l+2]=255*Math.sqrt(m)}return function(t){_inherits(LabCS,t);var r=_createSuper(LabCS);function LabCS(t,a,o){var l;if(_classCallCheck(this,LabCS),l=r.call(this,"Lab",3),!t)throw new i.FormatError("WhitePoint missing - required for color space Lab");if(a=a||[0,0,0],o=o||[-100,100,-100,100],l.XW=t[0],l.YW=t[1],l.ZW=t[2],l.amin=o[0],l.amax=o[1],l.bmin=o[2],l.bmax=o[3],l.XB=a[0],l.YB=a[1],l.ZB=a[2],l.XW<0||l.ZW<0||1!==l.YW)throw new i.FormatError("Invalid WhitePoint components, no fallback available");return(l.XB<0||l.YB<0||l.ZB<0)&&((0,i.info)("Invalid BlackPoint, falling back to default"),l.XB=l.YB=l.ZB=0),(l.amin>l.amax||l.bmin>l.bmax)&&((0,i.info)("Invalid Range, falling back to defaults"),l.amin=-100,l.amax=100,l.bmin=-100,l.bmax=100),l}return _createClass(LabCS,[{key:"getRgbItem",value:function getRgbItem(t,r,a,i){convertToRgb(this,t,r,!1,a,i)}},{key:"getRgbBuffer",value:function getRgbBuffer(t,r,a,i,o,l,c){for(var u=(1<<l)-1,h=0;h<a;h++)convertToRgb(this,t,r,u,i,o),r+=3,o+=3+c}},{key:"getOutputLength",value:function getOutputLength(t,r){return t*(3+r)/3|0}},{key:"isDefaultDecode",value:function isDefaultDecode(t,r){return!0}},{key:"usesZeroToOneRange",get:function get(){return(0,i.shadow)(this,"usesZeroToOneRange",!1)}}]),LabCS}(l)}()},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.GlobalImageCache=r.LocalImageCache=void 0;var i=a(5),o=a(198);function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}var l=function(){function LocalImageCache(){_classCallCheck(this,LocalImageCache),this._nameRefMap=new Map,this._imageMap=new Map,this._imageCache=new o.RefSetCache}return _createClass(LocalImageCache,[{key:"getByName",value:function getByName(t){var r=this._nameRefMap.get(t);return r?this.getByRef(r):this._imageMap.get(t)||null}},{key:"getByRef",value:function getByRef(t){return this._imageCache.get(t)||null}},{key:"set",value:function set(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2?arguments[2]:void 0;if(!t)throw new Error('LocalImageCache.set - expected "name" argument.');if(r){if(this._imageCache.has(r))return;return this._nameRefMap.set(t,r),void this._imageCache.put(r,a)}this._imageMap.has(t)||this._imageMap.set(t,a)}}]),LocalImageCache}();r.LocalImageCache=l;var c=function(){function GlobalImageCache(){_classCallCheck(this,GlobalImageCache),this._refCache=new o.RefSetCache,this._imageCache=new o.RefSetCache}return _createClass(GlobalImageCache,null,[{key:"NUM_PAGES_THRESHOLD",get:function get(){return(0,i.shadow)(this,"NUM_PAGES_THRESHOLD",2)}},{key:"MAX_IMAGES_TO_CACHE",get:function get(){return(0,i.shadow)(this,"MAX_IMAGES_TO_CACHE",10)}}]),_createClass(GlobalImageCache,[{key:"shouldCache",value:function shouldCache(t,r){var a=this._refCache.get(t);return!((a?a.size+(a.has(r)?0:1):1)<GlobalImageCache.NUM_PAGES_THRESHOLD)&&!(!this._imageCache.has(t)&&this._imageCache.size>=GlobalImageCache.MAX_IMAGES_TO_CACHE)}},{key:"addPageIndex",value:function addPageIndex(t,r){var a=this._refCache.get(t);a||(a=new Set,this._refCache.put(t,a)),a.add(r)}},{key:"getData",value:function getData(t,r){if(!this._refCache.has(t))return null;var a=this._refCache.get(t);return a.size<GlobalImageCache.NUM_PAGES_THRESHOLD?null:this._imageCache.has(t)?(a.add(r),this._imageCache.get(t)):null}},{key:"setData",value:function setData(t,r){if(!this._refCache.has(t))throw new Error('GlobalImageCache.setData - expected "addPageIndex" to have been called.');this._imageCache.has(t)||(this._imageCache.size>=GlobalImageCache.MAX_IMAGES_TO_CACHE?(0,i.info)("GlobalImageCache.setData - ignoring image above MAX_IMAGES_TO_CACHE."):this._imageCache.put(t,r))}},{key:"clear",value:function clear(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t||this._refCache.clear(),this._imageCache.clear()}}]),GlobalImageCache}();r.GlobalImageCache=c},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getQuadPoints=getQuadPoints,r.MarkupAnnotation=r.AnnotationFactory=r.AnnotationBorderStyle=r.Annotation=void 0;var i=a(5),o=a(203),l=a(198),c=a(216),u=a(201),h=a(219),d=a(205);function _get(t,r,a){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(t,r,a){var i=function _superPropBase(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=_getPrototypeOf(t)););return t}(t,r);if(i){var o=Object.getOwnPropertyDescriptor(i,r);return o.get?o.get.call(a):o.value}})(t,r,a||t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t})(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var a,i=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _createForOfIteratorHelper(t,r){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){a=t[Symbol.iterator]()},n:function n(){var t=a.next();return c=t.done,t},e:function e(t){u=!0,l=t},f:function f(){try{c||null==a.return||a.return()}finally{if(u)throw l}}}}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var a=[],i=!0,o=!1,l=void 0;try{for(var c,u=t[Symbol.iterator]();!(i=(c=u.next()).done)&&(a.push(c.value),!r||a.length!==r);i=!0);}catch(t){o=!0,l=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw l}}return a}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}var p=function(){function AnnotationFactory(){_classCallCheck(this,AnnotationFactory)}return _createClass(AnnotationFactory,null,[{key:"create",value:function create(t,r,a,i){return a.ensure(this,"_create",[t,r,a,i])}},{key:"_create",value:function _create(t,r,a,o){var c=t.fetchIfRef(r);if((0,l.isDict)(c)){var h=(0,l.isRef)(r)?r.toString():"annot_".concat(o.createObjId()),d=c.get("Subtype"),p={xref:t,dict:c,subtype:d=(0,l.isName)(d)?d.name:null,id:h,pdfManager:a};switch(d){case"Link":return new C(p);case"Text":return new w(p);case"Widget":var g=(0,u.getInheritableProperty)({dict:c,key:"FT"});switch(g=(0,l.isName)(g)?g.name:null){case"Tx":return new v(p);case"Btn":return new S(p);case"Ch":return new k(p)}return(0,i.warn)('Unimplemented widget field type "'+g+'", falling back to base field type.'),new y(p);case"Popup":return new x(p);case"FreeText":return new _(p);case"Line":return new A(p);case"Square":return new R(p);case"Circle":return new T(p);case"PolyLine":return new I(p);case"Polygon":return new P(p);case"Caret":return new O(p);case"Ink":return new E(p);case"Highlight":return new B(p);case"Underline":return new D(p);case"Squiggly":return new M(p);case"StrikeOut":return new L(p);case"Stamp":return new N(p);case"FileAttachment":return new U(p);default:return d?(0,i.warn)('Unimplemented annotation type "'+d+'", falling back to base annotation.'):(0,i.warn)("Annotation is missing the required /Subtype."),new m(p)}}}}]),AnnotationFactory}();function getQuadPoints(t,r){if(!t.has("QuadPoints"))return null;var a=t.getArray("QuadPoints");if(!Array.isArray(a)||a.length%8>0)return null;for(var i=[],o=0,l=a.length/8;o<l;o++){i.push([]);for(var c=8*o,u=8*o+8;c<u;c+=2){var h=a[c],d=a[c+1];if(h<r[0]||h>r[2]||d<r[1]||d>r[3])return null;i[o].push({x:h,y:d})}}return i}r.AnnotationFactory=p;var m=function(){function Annotation(t){_classCallCheck(this,Annotation);var r=t.dict;this.setContents(r.get("Contents")),this.setModificationDate(r.get("M")),this.setFlags(r.get("F")),this.setRectangle(r.getArray("Rect")),this.setColor(r.getArray("C")),this.setBorderStyle(r),this.setAppearance(r),this.data={annotationFlags:this.flags,borderStyle:this.borderStyle,color:this.color,contents:this.contents,hasAppearance:!!this.appearance,id:t.id,modificationDate:this.modificationDate,rect:this.rectangle,subtype:t.subtype}}return _createClass(Annotation,[{key:"_hasFlag",value:function _hasFlag(t,r){return!!(t&r)}},{key:"_isViewable",value:function _isViewable(t){return!this._hasFlag(t,i.AnnotationFlag.INVISIBLE)&&!this._hasFlag(t,i.AnnotationFlag.HIDDEN)&&!this._hasFlag(t,i.AnnotationFlag.NOVIEW)}},{key:"_isPrintable",value:function _isPrintable(t){return this._hasFlag(t,i.AnnotationFlag.PRINT)&&!this._hasFlag(t,i.AnnotationFlag.INVISIBLE)&&!this._hasFlag(t,i.AnnotationFlag.HIDDEN)}},{key:"setContents",value:function setContents(t){this.contents=(0,i.stringToPDFString)(t||"")}},{key:"setModificationDate",value:function setModificationDate(t){this.modificationDate=(0,i.isString)(t)?t:null}},{key:"setFlags",value:function setFlags(t){this.flags=Number.isInteger(t)&&t>0?t:0}},{key:"hasFlag",value:function hasFlag(t){return this._hasFlag(this.flags,t)}},{key:"setRectangle",value:function setRectangle(t){Array.isArray(t)&&4===t.length?this.rectangle=i.Util.normalizeRect(t):this.rectangle=[0,0,0,0]}},{key:"setColor",value:function setColor(t){var r=new Uint8ClampedArray(3);if(Array.isArray(t))switch(t.length){case 0:this.color=null;break;case 1:c.ColorSpace.singletons.gray.getRgbItem(t,0,r,0),this.color=r;break;case 3:c.ColorSpace.singletons.rgb.getRgbItem(t,0,r,0),this.color=r;break;case 4:c.ColorSpace.singletons.cmyk.getRgbItem(t,0,r,0),this.color=r;break;default:this.color=r}else this.color=r}},{key:"setBorderStyle",value:function setBorderStyle(t){if(this.borderStyle=new g,(0,l.isDict)(t))if(t.has("BS")){var r=t.get("BS"),a=r.get("Type");a&&!(0,l.isName)(a,"Border")||(this.borderStyle.setWidth(r.get("W"),this.rectangle),this.borderStyle.setStyle(r.get("S")),this.borderStyle.setDashArray(r.getArray("D")))}else if(t.has("Border")){var i=t.getArray("Border");Array.isArray(i)&&i.length>=3&&(this.borderStyle.setHorizontalCornerRadius(i[0]),this.borderStyle.setVerticalCornerRadius(i[1]),this.borderStyle.setWidth(i[2],this.rectangle),4===i.length&&this.borderStyle.setDashArray(i[3]))}else this.borderStyle.setWidth(0)}},{key:"setAppearance",value:function setAppearance(t){this.appearance=null;var r=t.get("AP");if((0,l.isDict)(r)){var a=r.get("N");if((0,l.isStream)(a))this.appearance=a;else if((0,l.isDict)(a)){var i=t.get("AS");(0,l.isName)(i)&&a.has(i.name)&&(this.appearance=a.get(i.name))}}}},{key:"loadResources",value:function loadResources(t){return this.appearance.dict.getAsync("Resources").then((function(r){if(r)return new o.ObjectLoader(r,t,r.xref).load().then((function(){return r}))}))}},{key:"getOperatorList",value:function getOperatorList(t,r,a){var o=this;if(!this.appearance)return Promise.resolve(new h.OperatorList);var l=this.data,c=this.appearance.dict,u=this.loadResources(["ExtGState","ColorSpace","Pattern","Shading","XObject","Font"]),d=c.getArray("BBox")||[0,0,1,1],p=c.getArray("Matrix")||[1,0,0,1,0,0],m=function getTransformMatrix(t,r,a){var o=_slicedToArray(i.Util.getAxialAlignedBoundingBox(r,a),4),l=o[0],c=o[1],u=o[2],h=o[3];if(l===u||c===h)return[1,0,0,1,t[0],t[1]];var d=(t[2]-t[0])/(u-l),p=(t[3]-t[1])/(h-c);return[d,0,0,p,t[0]-l*d,t[1]-c*p]}(l.rect,d,p);return u.then((function(a){var c=new h.OperatorList;return c.addOp(i.OPS.beginAnnotation,[l.rect,m,p]),t.getOperatorList({stream:o.appearance,task:r,resources:a,operatorList:c}).then((function(){return c.addOp(i.OPS.endAnnotation,[]),o.appearance.reset(),c}))}))}},{key:"viewable",get:function get(){return 0===this.flags||this._isViewable(this.flags)}},{key:"printable",get:function get(){return 0!==this.flags&&this._isPrintable(this.flags)}}]),Annotation}();r.Annotation=m;var g=function(){function AnnotationBorderStyle(){_classCallCheck(this,AnnotationBorderStyle),this.width=1,this.style=i.AnnotationBorderStyleType.SOLID,this.dashArray=[3],this.horizontalCornerRadius=0,this.verticalCornerRadius=0}return _createClass(AnnotationBorderStyle,[{key:"setWidth",value:function setWidth(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0,0];if((0,l.isName)(t))this.width=0;else if(Number.isInteger(t)){if(t>0){var a=(r[2]-r[0])/2,o=(r[3]-r[1])/2;a>0&&o>0&&(t>a||t>o)&&((0,i.warn)("AnnotationBorderStyle.setWidth - ignoring width: ".concat(t)),t=1)}this.width=t}}},{key:"setStyle",value:function setStyle(t){if((0,l.isName)(t))switch(t.name){case"S":this.style=i.AnnotationBorderStyleType.SOLID;break;case"D":this.style=i.AnnotationBorderStyleType.DASHED;break;case"B":this.style=i.AnnotationBorderStyleType.BEVELED;break;case"I":this.style=i.AnnotationBorderStyleType.INSET;break;case"U":this.style=i.AnnotationBorderStyleType.UNDERLINE}}},{key:"setDashArray",value:function setDashArray(t){if(Array.isArray(t)&&t.length>0){var r,a=!0,i=!0,o=_createForOfIteratorHelper(t);try{for(o.s();!(r=o.n()).done;){var l=r.value;if(!(+l>=0)){a=!1;break}l>0&&(i=!1)}}catch(t){o.e(t)}finally{o.f()}a&&!i?this.dashArray=t:this.width=0}else t&&(this.width=0)}},{key:"setHorizontalCornerRadius",value:function setHorizontalCornerRadius(t){Number.isInteger(t)&&(this.horizontalCornerRadius=t)}},{key:"setVerticalCornerRadius",value:function setVerticalCornerRadius(t){Number.isInteger(t)&&(this.verticalCornerRadius=t)}}]),AnnotationBorderStyle}();r.AnnotationBorderStyle=g;var b=function(t){_inherits(MarkupAnnotation,t);var r=_createSuper(MarkupAnnotation);function MarkupAnnotation(t){var a;_classCallCheck(this,MarkupAnnotation),a=r.call(this,t);var o=t.dict;if(o.has("IRT")){var c=o.getRaw("IRT");a.data.inReplyTo=(0,l.isRef)(c)?c.toString():null;var u=o.get("RT");a.data.replyType=(0,l.isName)(u)?u.name:i.AnnotationReplyType.REPLY}if(a.data.replyType===i.AnnotationReplyType.GROUP){var h=o.get("IRT");a.data.title=(0,i.stringToPDFString)(h.get("T")||""),a.setContents(h.get("Contents")),a.data.contents=a.contents,h.has("CreationDate")?(a.setCreationDate(h.get("CreationDate")),a.data.creationDate=a.creationDate):a.data.creationDate=null,h.has("M")?(a.setModificationDate(h.get("M")),a.data.modificationDate=a.modificationDate):a.data.modificationDate=null,a.data.hasPopup=h.has("Popup"),h.has("C")?(a.setColor(h.getArray("C")),a.data.color=a.color):a.data.color=null}else a.data.title=(0,i.stringToPDFString)(o.get("T")||""),a.setCreationDate(o.get("CreationDate")),a.data.creationDate=a.creationDate,a.data.hasPopup=o.has("Popup"),o.has("C")||(a.data.color=null);return a}return _createClass(MarkupAnnotation,[{key:"setCreationDate",value:function setCreationDate(t){this.creationDate=(0,i.isString)(t)?t:null}}]),MarkupAnnotation}(m);r.MarkupAnnotation=b;var y=function(t){_inherits(WidgetAnnotation,t);var r=_createSuper(WidgetAnnotation);function WidgetAnnotation(t){var a;_classCallCheck(this,WidgetAnnotation),a=r.call(this,t);var o=t.dict,c=a.data;c.annotationType=i.AnnotationType.WIDGET,c.fieldName=a._constructFieldName(o),c.fieldValue=(0,u.getInheritableProperty)({dict:o,key:"V",getArray:!0}),c.alternativeText=(0,i.stringToPDFString)(o.get("TU")||""),c.defaultAppearance=(0,u.getInheritableProperty)({dict:o,key:"DA"})||"";var h=(0,u.getInheritableProperty)({dict:o,key:"FT"});return c.fieldType=(0,l.isName)(h)?h.name:null,a.fieldResources=(0,u.getInheritableProperty)({dict:o,key:"DR"})||l.Dict.empty,c.fieldFlags=(0,u.getInheritableProperty)({dict:o,key:"Ff"}),(!Number.isInteger(c.fieldFlags)||c.fieldFlags<0)&&(c.fieldFlags=0),c.readOnly=a.hasFieldFlag(i.AnnotationFieldFlag.READONLY),"Sig"===c.fieldType&&(c.fieldValue=null,a.setFlags(i.AnnotationFlag.HIDDEN)),a}return _createClass(WidgetAnnotation,[{key:"_constructFieldName",value:function _constructFieldName(t){if(!t.has("T")&&!t.has("Parent"))return(0,i.warn)("Unknown field name, falling back to empty field name."),"";if(!t.has("Parent"))return(0,i.stringToPDFString)(t.get("T"));var r=[];t.has("T")&&r.unshift((0,i.stringToPDFString)(t.get("T")));for(var a=t;a.has("Parent")&&(a=a.get("Parent"),(0,l.isDict)(a));)a.has("T")&&r.unshift((0,i.stringToPDFString)(a.get("T")));return r.join(".")}},{key:"hasFieldFlag",value:function hasFieldFlag(t){return!!(this.data.fieldFlags&t)}},{key:"getOperatorList",value:function getOperatorList(t,r,a){return a?Promise.resolve(new h.OperatorList):_get(_getPrototypeOf(WidgetAnnotation.prototype),"getOperatorList",this).call(this,t,r,a)}}]),WidgetAnnotation}(m),v=function(t){_inherits(TextWidgetAnnotation,t);var r=_createSuper(TextWidgetAnnotation);function TextWidgetAnnotation(t){var a;_classCallCheck(this,TextWidgetAnnotation),a=r.call(this,t);var o=t.dict;a.data.fieldValue=(0,i.stringToPDFString)(a.data.fieldValue||"");var l=(0,u.getInheritableProperty)({dict:o,key:"Q"});(!Number.isInteger(l)||l<0||l>2)&&(l=null),a.data.textAlignment=l;var c=(0,u.getInheritableProperty)({dict:o,key:"MaxLen"});return(!Number.isInteger(c)||c<0)&&(c=null),a.data.maxLen=c,a.data.multiLine=a.hasFieldFlag(i.AnnotationFieldFlag.MULTILINE),a.data.comb=a.hasFieldFlag(i.AnnotationFieldFlag.COMB)&&!a.hasFieldFlag(i.AnnotationFieldFlag.MULTILINE)&&!a.hasFieldFlag(i.AnnotationFieldFlag.PASSWORD)&&!a.hasFieldFlag(i.AnnotationFieldFlag.FILESELECT)&&null!==a.data.maxLen,a}return _createClass(TextWidgetAnnotation,[{key:"getOperatorList",value:function getOperatorList(t,r,a){if(a||this.appearance)return _get(_getPrototypeOf(TextWidgetAnnotation.prototype),"getOperatorList",this).call(this,t,r,a);var o=new h.OperatorList;if(!this.data.defaultAppearance)return Promise.resolve(o);var l=new d.Stream((0,i.stringToBytes)(this.data.defaultAppearance));return t.getOperatorList({stream:l,task:r,resources:this.fieldResources,operatorList:o}).then((function(){return o}))}}]),TextWidgetAnnotation}(y),S=function(t){_inherits(ButtonWidgetAnnotation,t);var r=_createSuper(ButtonWidgetAnnotation);function ButtonWidgetAnnotation(t){var a;return _classCallCheck(this,ButtonWidgetAnnotation),(a=r.call(this,t)).data.checkBox=!a.hasFieldFlag(i.AnnotationFieldFlag.RADIO)&&!a.hasFieldFlag(i.AnnotationFieldFlag.PUSHBUTTON),a.data.radioButton=a.hasFieldFlag(i.AnnotationFieldFlag.RADIO)&&!a.hasFieldFlag(i.AnnotationFieldFlag.PUSHBUTTON),a.data.pushButton=a.hasFieldFlag(i.AnnotationFieldFlag.PUSHBUTTON),a.data.checkBox?a._processCheckBox(t):a.data.radioButton?a._processRadioButton(t):a.data.pushButton?a._processPushButton(t):(0,i.warn)("Invalid field flags for button widget annotation"),a}return _createClass(ButtonWidgetAnnotation,[{key:"_processCheckBox",value:function _processCheckBox(t){(0,l.isName)(this.data.fieldValue)&&(this.data.fieldValue=this.data.fieldValue.name);var r=t.dict.get("AP");if((0,l.isDict)(r)){var a=r.get("D");if((0,l.isDict)(a)){var i=a.getKeys();2===i.length&&(this.data.exportValue="Off"===i[0]?i[1]:i[0])}}}},{key:"_processRadioButton",value:function _processRadioButton(t){this.data.fieldValue=this.data.buttonValue=null;var r=t.dict.get("Parent");if((0,l.isDict)(r)&&r.has("V")){var a=r.get("V");(0,l.isName)(a)&&(this.data.fieldValue=a.name)}var i=t.dict.get("AP");if((0,l.isDict)(i)){var o=i.get("N");if((0,l.isDict)(o)){var c,u=_createForOfIteratorHelper(o.getKeys());try{for(u.s();!(c=u.n()).done;){var h=c.value;if("Off"!==h){this.data.buttonValue=h;break}}}catch(t){u.e(t)}finally{u.f()}}}}},{key:"_processPushButton",value:function _processPushButton(t){t.dict.has("A")?o.Catalog.parseDestDictionary({destDict:t.dict,resultObj:this.data,docBaseUrl:t.pdfManager.docBaseUrl}):(0,i.warn)("Push buttons without action dictionaries are not supported")}}]),ButtonWidgetAnnotation}(y),k=function(t){_inherits(ChoiceWidgetAnnotation,t);var r=_createSuper(ChoiceWidgetAnnotation);function ChoiceWidgetAnnotation(t){var a;_classCallCheck(this,ChoiceWidgetAnnotation),(a=r.call(this,t)).data.options=[];var o=(0,u.getInheritableProperty)({dict:t.dict,key:"Opt"});if(Array.isArray(o))for(var l=t.xref,c=0,h=o.length;c<h;c++){var d=l.fetchIfRef(o[c]),p=Array.isArray(d);a.data.options[c]={exportValue:p?l.fetchIfRef(d[0]):d,displayValue:(0,i.stringToPDFString)(p?l.fetchIfRef(d[1]):d)}}return Array.isArray(a.data.fieldValue)||(a.data.fieldValue=[a.data.fieldValue]),a.data.combo=a.hasFieldFlag(i.AnnotationFieldFlag.COMBO),a.data.multiSelect=a.hasFieldFlag(i.AnnotationFieldFlag.MULTISELECT),a}return ChoiceWidgetAnnotation}(y),w=function(t){_inherits(TextAnnotation,t);var r=_createSuper(TextAnnotation);function TextAnnotation(t){var a;_classCallCheck(this,TextAnnotation);a=r.call(this,t);var o=t.dict;return a.data.annotationType=i.AnnotationType.TEXT,a.data.hasAppearance?a.data.name="NoIcon":(a.data.rect[1]=a.data.rect[3]-22,a.data.rect[2]=a.data.rect[0]+22,a.data.name=o.has("Name")?o.get("Name").name:"Note"),o.has("State")?(a.data.state=o.get("State")||null,a.data.stateModel=o.get("StateModel")||null):(a.data.state=null,a.data.stateModel=null),a}return TextAnnotation}(b),C=function(t){_inherits(LinkAnnotation,t);var r=_createSuper(LinkAnnotation);function LinkAnnotation(t){var a;_classCallCheck(this,LinkAnnotation),(a=r.call(this,t)).data.annotationType=i.AnnotationType.LINK;var l=getQuadPoints(t.dict,a.rectangle);return l&&(a.data.quadPoints=l),o.Catalog.parseDestDictionary({destDict:t.dict,resultObj:a.data,docBaseUrl:t.pdfManager.docBaseUrl}),a}return LinkAnnotation}(m),x=function(t){_inherits(PopupAnnotation,t);var r=_createSuper(PopupAnnotation);function PopupAnnotation(t){var a;_classCallCheck(this,PopupAnnotation),(a=r.call(this,t)).data.annotationType=i.AnnotationType.POPUP;var o=t.dict.get("Parent");if(!o)return(0,i.warn)("Popup annotation has a missing or invalid parent annotation."),_possibleConstructorReturn(a);var c=o.get("Subtype");a.data.parentType=(0,l.isName)(c)?c.name:null;var u=t.dict.getRaw("Parent");a.data.parentId=(0,l.isRef)(u)?u.toString():null;var h=o.get("RT");if((0,l.isName)(h,i.AnnotationReplyType.GROUP)&&(o=o.get("IRT")),o.has("M")?(a.setModificationDate(o.get("M")),a.data.modificationDate=a.modificationDate):a.data.modificationDate=null,o.has("C")?(a.setColor(o.getArray("C")),a.data.color=a.color):a.data.color=null,!a.viewable){var d=o.get("F");a._isViewable(d)&&a.setFlags(d)}return a.data.title=(0,i.stringToPDFString)(o.get("T")||""),a.data.contents=(0,i.stringToPDFString)(o.get("Contents")||""),a}return PopupAnnotation}(m),_=function(t){_inherits(FreeTextAnnotation,t);var r=_createSuper(FreeTextAnnotation);function FreeTextAnnotation(t){var a;return _classCallCheck(this,FreeTextAnnotation),(a=r.call(this,t)).data.annotationType=i.AnnotationType.FREETEXT,a}return FreeTextAnnotation}(b),A=function(t){_inherits(LineAnnotation,t);var r=_createSuper(LineAnnotation);function LineAnnotation(t){var a;return _classCallCheck(this,LineAnnotation),(a=r.call(this,t)).data.annotationType=i.AnnotationType.LINE,a.data.lineCoordinates=i.Util.normalizeRect(t.dict.getArray("L")),a}return LineAnnotation}(b),R=function(t){_inherits(SquareAnnotation,t);var r=_createSuper(SquareAnnotation);function SquareAnnotation(t){var a;return _classCallCheck(this,SquareAnnotation),(a=r.call(this,t)).data.annotationType=i.AnnotationType.SQUARE,a}return SquareAnnotation}(b),T=function(t){_inherits(CircleAnnotation,t);var r=_createSuper(CircleAnnotation);function CircleAnnotation(t){var a;return _classCallCheck(this,CircleAnnotation),(a=r.call(this,t)).data.annotationType=i.AnnotationType.CIRCLE,a}return CircleAnnotation}(b),I=function(t){_inherits(PolylineAnnotation,t);var r=_createSuper(PolylineAnnotation);function PolylineAnnotation(t){var a;_classCallCheck(this,PolylineAnnotation),(a=r.call(this,t)).data.annotationType=i.AnnotationType.POLYLINE;var o=t.dict.getArray("Vertices");a.data.vertices=[];for(var l=0,c=o.length;l<c;l+=2)a.data.vertices.push({x:o[l],y:o[l+1]});return a}return PolylineAnnotation}(b),P=function(t){_inherits(PolygonAnnotation,t);var r=_createSuper(PolygonAnnotation);function PolygonAnnotation(t){var a;return _classCallCheck(this,PolygonAnnotation),(a=r.call(this,t)).data.annotationType=i.AnnotationType.POLYGON,a}return PolygonAnnotation}(I),O=function(t){_inherits(CaretAnnotation,t);var r=_createSuper(CaretAnnotation);function CaretAnnotation(t){var a;return _classCallCheck(this,CaretAnnotation),(a=r.call(this,t)).data.annotationType=i.AnnotationType.CARET,a}return CaretAnnotation}(b),E=function(t){_inherits(InkAnnotation,t);var r=_createSuper(InkAnnotation);function InkAnnotation(t){var a;_classCallCheck(this,InkAnnotation),(a=r.call(this,t)).data.annotationType=i.AnnotationType.INK;var o=t.xref,l=t.dict.getArray("InkList");a.data.inkLists=[];for(var c=0,u=l.length;c<u;++c){a.data.inkLists.push([]);for(var h=0,d=l[c].length;h<d;h+=2)a.data.inkLists[c].push({x:o.fetchIfRef(l[c][h]),y:o.fetchIfRef(l[c][h+1])})}return a}return InkAnnotation}(b),B=function(t){_inherits(HighlightAnnotation,t);var r=_createSuper(HighlightAnnotation);function HighlightAnnotation(t){var a;_classCallCheck(this,HighlightAnnotation),(a=r.call(this,t)).data.annotationType=i.AnnotationType.HIGHLIGHT;var o=getQuadPoints(t.dict,a.rectangle);return o&&(a.data.quadPoints=o),a}return HighlightAnnotation}(b),D=function(t){_inherits(UnderlineAnnotation,t);var r=_createSuper(UnderlineAnnotation);function UnderlineAnnotation(t){var a;_classCallCheck(this,UnderlineAnnotation),(a=r.call(this,t)).data.annotationType=i.AnnotationType.UNDERLINE;var o=getQuadPoints(t.dict,a.rectangle);return o&&(a.data.quadPoints=o),a}return UnderlineAnnotation}(b),M=function(t){_inherits(SquigglyAnnotation,t);var r=_createSuper(SquigglyAnnotation);function SquigglyAnnotation(t){var a;_classCallCheck(this,SquigglyAnnotation),(a=r.call(this,t)).data.annotationType=i.AnnotationType.SQUIGGLY;var o=getQuadPoints(t.dict,a.rectangle);return o&&(a.data.quadPoints=o),a}return SquigglyAnnotation}(b),L=function(t){_inherits(StrikeOutAnnotation,t);var r=_createSuper(StrikeOutAnnotation);function StrikeOutAnnotation(t){var a;_classCallCheck(this,StrikeOutAnnotation),(a=r.call(this,t)).data.annotationType=i.AnnotationType.STRIKEOUT;var o=getQuadPoints(t.dict,a.rectangle);return o&&(a.data.quadPoints=o),a}return StrikeOutAnnotation}(b),N=function(t){_inherits(StampAnnotation,t);var r=_createSuper(StampAnnotation);function StampAnnotation(t){var a;return _classCallCheck(this,StampAnnotation),(a=r.call(this,t)).data.annotationType=i.AnnotationType.STAMP,a}return StampAnnotation}(b),U=function(t){_inherits(FileAttachmentAnnotation,t);var r=_createSuper(FileAttachmentAnnotation);function FileAttachmentAnnotation(t){var a;_classCallCheck(this,FileAttachmentAnnotation),a=r.call(this,t);var l=new o.FileSpec(t.dict.get("FS"),t.xref);return a.data.annotationType=i.AnnotationType.FILEATTACHMENT,a.data.file=l.serializable,a}return FileAttachmentAnnotation}(b)},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.OperatorList=void 0;var i=a(5),o=function QueueOptimizerClosure(){function addState(t,r,a,i,o){for(var l=t,c=0,u=r.length-1;c<u;c++){var h=r[c];l=l[h]||(l[h]=[])}l[r[r.length-1]]={checkFn:a,iterateFn:i,processFn:o}}var t=[];function QueueOptimizer(t){this.queue=t,this.state=null,this.context={iCurr:0,fnArray:t.fnArray,argsArray:t.argsArray},this.match=null,this.lastProcessed=0}return addState(t,[i.OPS.save,i.OPS.transform,i.OPS.paintInlineImageXObject,i.OPS.restore],null,(function iterateInlineImageGroup(t,r){var a=t.fnArray,o=(r-(t.iCurr-3))%4;switch(o){case 0:return a[r]===i.OPS.save;case 1:return a[r]===i.OPS.transform;case 2:return a[r]===i.OPS.paintInlineImageXObject;case 3:return a[r]===i.OPS.restore}throw new Error("iterateInlineImageGroup - invalid pos: ".concat(o))}),(function foundInlineImageGroup(t,r){var a=t.fnArray,o=t.argsArray,l=t.iCurr,c=l-3,u=l-2,h=l-1,d=Math.min(Math.floor((r-c)/4),200);if(d<10)return r-(r-c)%4;var p,m=0,g=[],b=0,y=1,v=1;for(p=0;p<d;p++){var S=o[u+(p<<2)],k=o[h+(p<<2)][0];y+k.width>1e3&&(m=Math.max(m,y),v+=b+2,y=0,b=0),g.push({transform:S,x:y,y:v,w:k.width,h:k.height}),y+=k.width+2,b=Math.max(b,k.height)}var w=Math.max(m,y)+1,C=v+b+1,x=new Uint8ClampedArray(w*C*4),_=w<<2;for(p=0;p<d;p++){var A=o[h+(p<<2)][0].data,R=g[p].w<<2,T=0,I=g[p].x+g[p].y*w<<2;x.set(A.subarray(0,R),I-_);for(var P=0,O=g[p].h;P<O;P++)x.set(A.subarray(T,T+R),I),T+=R,I+=_;for(x.set(A.subarray(T-R,T),I);I>=0;)A[I-4]=A[I],A[I-3]=A[I+1],A[I-2]=A[I+2],A[I-1]=A[I+3],A[I+R]=A[I+R-4],A[I+R+1]=A[I+R-3],A[I+R+2]=A[I+R-2],A[I+R+3]=A[I+R-1],I-=_}return a.splice(c,4*d,i.OPS.paintInlineImageXObjectGroup),o.splice(c,4*d,[{width:w,height:C,kind:i.ImageKind.RGBA_32BPP,data:x},g]),c+1})),addState(t,[i.OPS.save,i.OPS.transform,i.OPS.paintImageMaskXObject,i.OPS.restore],null,(function iterateImageMaskGroup(t,r){var a=t.fnArray,o=(r-(t.iCurr-3))%4;switch(o){case 0:return a[r]===i.OPS.save;case 1:return a[r]===i.OPS.transform;case 2:return a[r]===i.OPS.paintImageMaskXObject;case 3:return a[r]===i.OPS.restore}throw new Error("iterateImageMaskGroup - invalid pos: ".concat(o))}),(function foundImageMaskGroup(t,r){var a,o=t.fnArray,l=t.argsArray,c=t.iCurr,u=c-3,h=c-2,d=c-1,p=Math.floor((r-u)/4);if((p=function handlePaintSolidColorImageMask(t,r,a,o){for(var l=t+2,c=0;c<r;c++){var u=o[l+4*c],h=1===u.length&&u[0];if(!h||1!==h.width||1!==h.height||h.data.length&&(1!==h.data.length||0!==h.data[0]))break;a[l+4*c]=i.OPS.paintSolidColorImageMask}return r-c}(u,p,o,l))<10)return r-(r-u)%4;var m,g,b=!1,y=l[d][0];if(0===l[h][1]&&0===l[h][2]){b=!0;var v=l[h][0],S=l[h][3];m=h+4;var k=d+4;for(a=1;a<p;a++,m+=4,k+=4)if(g=l[m],l[k][0]!==y||g[0]!==v||0!==g[1]||0!==g[2]||g[3]!==S){a<10?b=!1:p=a;break}}if(b){p=Math.min(p,1e3);var w=new Float32Array(2*p);for(m=h,a=0;a<p;a++,m+=4)g=l[m],w[a<<1]=g[4],w[1+(a<<1)]=g[5];o.splice(u,4*p,i.OPS.paintImageMaskXObjectRepeat),l.splice(u,4*p,[y,v,S,w])}else{p=Math.min(p,100);var C=[];for(a=0;a<p;a++){g=l[h+(a<<2)];var x=l[d+(a<<2)][0];C.push({data:x.data,width:x.width,height:x.height,transform:g})}o.splice(u,4*p,i.OPS.paintImageMaskXObjectGroup),l.splice(u,4*p,[C])}return u+1})),addState(t,[i.OPS.save,i.OPS.transform,i.OPS.paintImageXObject,i.OPS.restore],(function(t){var r=t.argsArray,a=t.iCurr-2;return 0===r[a][1]&&0===r[a][2]}),(function iterateImageGroup(t,r){var a=t.fnArray,o=t.argsArray,l=(r-(t.iCurr-3))%4;switch(l){case 0:return a[r]===i.OPS.save;case 1:if(a[r]!==i.OPS.transform)return!1;var c=t.iCurr-2,u=o[c][0],h=o[c][3];return o[r][0]===u&&0===o[r][1]&&0===o[r][2]&&o[r][3]===h;case 2:if(a[r]!==i.OPS.paintImageXObject)return!1;var d=o[t.iCurr-1][0];return o[r][0]===d;case 3:return a[r]===i.OPS.restore}throw new Error("iterateImageGroup - invalid pos: ".concat(l))}),(function(t,r){var a=t.fnArray,o=t.argsArray,l=t.iCurr,c=l-3,u=l-2,h=o[l-1][0],d=o[u][0],p=o[u][3],m=Math.min(Math.floor((r-c)/4),1e3);if(m<3)return r-(r-c)%4;for(var g=new Float32Array(2*m),b=u,y=0;y<m;y++,b+=4){var v=o[b];g[y<<1]=v[4],g[1+(y<<1)]=v[5]}var S=[h,d,p,g];return a.splice(c,4*m,i.OPS.paintImageXObjectRepeat),o.splice(c,4*m,S),c+1})),addState(t,[i.OPS.beginText,i.OPS.setFont,i.OPS.setTextMatrix,i.OPS.showText,i.OPS.endText],null,(function iterateShowTextGroup(t,r){var a=t.fnArray,o=t.argsArray,l=(r-(t.iCurr-4))%5;switch(l){case 0:return a[r]===i.OPS.beginText;case 1:return a[r]===i.OPS.setFont;case 2:return a[r]===i.OPS.setTextMatrix;case 3:if(a[r]!==i.OPS.showText)return!1;var c=t.iCurr-3,u=o[c][0],h=o[c][1];return o[r][0]===u&&o[r][1]===h;case 4:return a[r]===i.OPS.endText}throw new Error("iterateShowTextGroup - invalid pos: ".concat(l))}),(function(t,r){var a=t.fnArray,i=t.argsArray,o=t.iCurr,l=o-4,c=o-3,u=o-2,h=o-1,d=o,p=i[c][0],m=i[c][1],g=Math.min(Math.floor((r-l)/5),1e3);if(g<3)return r-(r-l)%5;var b=l;l>=4&&a[l-4]===a[c]&&a[l-3]===a[u]&&a[l-2]===a[h]&&a[l-1]===a[d]&&i[l-4][0]===p&&i[l-4][1]===m&&(g++,b-=5);for(var y=b+4,v=1;v<g;v++)a.splice(y,3),i.splice(y,3),y+=2;return y+1})),QueueOptimizer.prototype={_optimize:function _optimize(){var r=this.queue.fnArray,a=this.lastProcessed,i=r.length,o=this.state,l=this.match;if(o||l||a+1!==i||t[r[a]]){for(var c=this.context;a<i;){if(l){if((0,l.iterateFn)(c,a)){a++;continue}if(a=(0,l.processFn)(c,a+1),l=null,o=null,a>=(i=r.length))break}(o=(o||t)[r[a]])&&!Array.isArray(o)?(c.iCurr=a,a++,!o.checkFn||(0,o.checkFn)(c)?(l=o,o=null):o=null):a++}this.state=o,this.match=l,this.lastProcessed=a}else this.lastProcessed=i},push:function push(t,r){this.queue.fnArray.push(t),this.queue.argsArray.push(r),this._optimize()},flush:function flush(){for(;this.match;){var t=this.queue.fnArray.length;this.lastProcessed=(0,this.match.processFn)(this.context,t),this.match=null,this.state=null,this._optimize()}},reset:function reset(){this.state=null,this.match=null,this.lastProcessed=0}},QueueOptimizer}(),l=function NullOptimizerClosure(){function NullOptimizer(t){this.queue=t}return NullOptimizer.prototype={push:function push(t,r){this.queue.fnArray.push(t),this.queue.argsArray.push(r)},flush:function flush(){},reset:function reset(){}},NullOptimizer}(),c=function OperatorListClosure(){function OperatorList(t,r,a){this._streamSink=r,this.fnArray=[],this.argsArray=[],this.optimizer=r&&"oplist"!==t?new o(this):new l(this),this.dependencies=Object.create(null),this._totalLength=0,this.pageIndex=a,this.intent=t,this.weight=0,this._resolved=r?null:Promise.resolve()}return OperatorList.prototype={get length(){return this.argsArray.length},get ready(){return this._resolved||this._streamSink.ready},get totalLength(){return this._totalLength+this.length},addOp:function addOp(t,r){this.optimizer.push(t,r),this.weight++,this._streamSink&&(this.weight>=1e3||this.weight>=995&&(t===i.OPS.restore||t===i.OPS.endText))&&this.flush()},addDependency:function addDependency(t){t in this.dependencies||(this.dependencies[t]=!0,this.addOp(i.OPS.dependency,[t]))},addDependencies:function addDependencies(t){for(var r in t)this.addDependency(r)},addOpList:function addOpList(t){if(t instanceof OperatorList){Object.assign(this.dependencies,t.dependencies);for(var r=0,a=t.length;r<a;r++)this.addOp(t.fnArray[r],t.argsArray[r])}else(0,i.warn)('addOpList - ignoring invalid "opList" parameter.')},getIR:function getIR(){return{fnArray:this.fnArray,argsArray:this.argsArray,length:this.length}},get _transfers(){for(var t=[],r=this.fnArray,a=this.argsArray,o=this.length,l=0;l<o;l++)switch(r[l]){case i.OPS.paintInlineImageXObject:case i.OPS.paintInlineImageXObjectGroup:case i.OPS.paintImageMaskXObject:var c=a[l][0];c.cached||t.push(c.data.buffer)}return t},flush:function flush(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.optimizer.flush();var r=this.length;this._totalLength+=r,this._streamSink.enqueue({fnArray:this.fnArray,argsArray:this.argsArray,lastChunk:t,length:r},1,this._transfers),this.dependencies=Object.create(null),this.fnArray.length=0,this.argsArray.length=0,this.weight=0,this.optimizer.reset()}},OperatorList}();r.OperatorList=c},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PartialEvaluator=void 0;var i=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(2)),o=a(5),l=a(221),c=a(198),u=a(222),h=a(225),d=a(201),p=a(228),m=a(227),g=a(231),b=a(204),y=a(232),v=a(216),S=a(205),k=a(226),w=a(233),C=a(234),x=a(217),_=a(236),A=a(219),R=a(237);function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createForOfIteratorHelper(t,r){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){a=t[Symbol.iterator]()},n:function n(){var t=a.next();return c=t.done,t},e:function e(t){u=!0,l=t},f:function f(){try{c||null==a.return||a.return()}finally{if(u)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function asyncGeneratorStep(t,r,a,i,o,l,c){try{var u=t[l](c),h=u.value}catch(t){return void a(t)}u.done?r(h):Promise.resolve(h).then(i,o)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}var T=function PartialEvaluatorClosure(){var t={maxImageSize:-1,disableFontFace:!1,ignoreErrors:!1,isEvalSupported:!0,fontExtraProperties:!1};function PartialEvaluator(r){var a=this,l=r.xref,c=r.handler,u=r.pageIndex,h=r.idFactory,d=r.fontCache,p=r.builtInCMapCache,m=r.globalImageCache,g=r.options,b=void 0===g?null:g,y=r.pdfFunctionFactory;this.xref=l,this.handler=c,this.pageIndex=u,this.idFactory=h,this.fontCache=d,this.builtInCMapCache=p,this.globalImageCache=m,this.options=b||t,this.pdfFunctionFactory=y,this.parsingType3Font=!1,this.fetchBuiltInCMap=function(){var t=_asyncToGenerator(i.default.mark((function _callee(t){var r,l,c;return i.default.wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:if(!a.builtInCMapCache.has(t)){i.next=2;break}return i.abrupt("return",a.builtInCMapCache.get(t));case 2:return r=a.handler.sendWithStream("FetchBuiltInCMap",{name:t}),l=r.getReader(),i.next=6,new Promise((function(t,r){!function pump(){l.read().then((function(r){var a=r.value;r.done||(t(a),pump())}),r)}()}));case 6:return(c=i.sent).compressionType!==o.CMapCompressionType.NONE&&a.builtInCMapCache.set(t,c),i.abrupt("return",c);case 9:case"end":return i.stop()}}),_callee)})));return function(r){return t.apply(this,arguments)}}()}function TimeSlotManager(){this.reset()}function normalizeBlendMode(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Array.isArray(t)){for(var a=0,i=t.length;a<i;a++){var l=normalizeBlendMode(t[a],!0);if(l)return l}return(0,o.warn)("Unsupported blend mode Array: ".concat(t)),"source-over"}if(!(0,c.isName)(t))return r?null:"source-over";switch(t.name){case"Normal":case"Compatible":return"source-over";case"Multiply":return"multiply";case"Screen":return"screen";case"Overlay":return"overlay";case"Darken":return"darken";case"Lighten":return"lighten";case"ColorDodge":return"color-dodge";case"ColorBurn":return"color-burn";case"HardLight":return"hard-light";case"SoftLight":return"soft-light";case"Difference":return"difference";case"Exclusion":return"exclusion";case"Hue":return"hue";case"Saturation":return"saturation";case"Color":return"color";case"Luminosity":return"luminosity"}return r?null:((0,o.warn)("Unsupported blend mode: ".concat(t.name)),"source-over")}TimeSlotManager.prototype={check:function TimeSlotManager_check(){return!(++this.checked<100)&&(this.checked=0,this.endTime<=Date.now())},reset:function TimeSlotManager_reset(){this.endTime=Date.now()+20,this.checked=0}};var r=Promise.resolve();return PartialEvaluator.prototype={clone:function clone(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,a=Object.create(this);return a.options=r,a},hasBlendModes:function PartialEvaluator_hasBlendModes(t){if(!(t instanceof c.Dict))return!1;var r=Object.create(null);t.objId&&(r[t.objId]=!0);for(var a=[t],i=this.xref;a.length;){var l=a.shift(),u=l.get("ExtGState");if(u instanceof c.Dict)for(var h=u.getKeys(),p=0,m=h.length;p<m;p++){var g=h[p],b=u.getRaw(g);if(b instanceof c.Ref){if(r[b.toString()])continue;try{b=i.fetch(b)}catch(t){if(t instanceof d.MissingDataException)throw t;if(this.options.ignoreErrors){b instanceof c.Ref&&(r[b.toString()]=!0),this.handler.send("UnsupportedFeature",{featureId:o.UNSUPPORTED_FEATURES.errorExtGState}),(0,o.warn)('hasBlendModes - ignoring ExtGState: "'.concat(t,'".'));continue}throw t}}if(b instanceof c.Dict){b.objId&&(r[b.objId]=!0);var y=b.get("BM");if(y instanceof c.Name){if("Normal"!==y.name)return!0}else if(void 0!==y&&Array.isArray(y))for(var v=0,S=y.length;v<S;v++)if(y[v]instanceof c.Name&&"Normal"!==y[v].name)return!0}}var k=l.get("XObject");if(k instanceof c.Dict)for(var w=k.getKeys(),C=0,x=w.length;C<x;C++){var _=w[C],A=k.getRaw(_);if(A instanceof c.Ref){if(r[A.toString()])continue;try{A=i.fetch(A)}catch(t){if(t instanceof d.MissingDataException)throw t;if(this.options.ignoreErrors){A instanceof c.Ref&&(r[A.toString()]=!0),this.handler.send("UnsupportedFeature",{featureId:o.UNSUPPORTED_FEATURES.errorXObject}),(0,o.warn)('hasBlendModes - ignoring XObject: "'.concat(t,'".'));continue}throw t}}if((0,c.isStream)(A)){if(A.dict.objId){if(r[A.dict.objId])continue;r[A.dict.objId]=!0}var R=A.dict.get("Resources");!(R instanceof c.Dict)||R.objId&&r[R.objId]||(a.push(R),R.objId&&(r[R.objId]=!0))}}}return!1},buildFormXObject:function buildFormXObject(t,r,a,l,u,h){var d=this;return _asyncToGenerator(i.default.mark((function _callee2(){var p,m,g,b,y,S,k;return i.default.wrap((function _callee2$(i){for(;;)switch(i.prev=i.next){case 0:if(p=r.dict,m=p.getArray("Matrix"),g=p.getArray("BBox"),g=Array.isArray(g)&&4===g.length?o.Util.normalizeRect(g):null,!(b=p.get("Group"))){i.next=18;break}if(y={matrix:m,bbox:g,smask:a,isolated:!1,knockout:!1},S=b.get("S"),k=null,!(0,c.isName)(S,"Transparency")){i.next=16;break}if(y.isolated=b.get("I")||!1,y.knockout=b.get("K")||!1,!b.has("CS")){i.next=16;break}return i.next=15,d.parseColorSpace({cs:b.get("CS"),resources:t});case 15:k=i.sent;case 16:a&&a.backdrop&&(k=k||v.ColorSpace.singletons.rgb,a.backdrop=k.getRgb(a.backdrop,0)),l.addOp(o.OPS.beginGroup,[y]);case 18:return l.addOp(o.OPS.paintFormXObjectBegin,[m,g]),i.abrupt("return",d.getOperatorList({stream:r,task:u,resources:p.get("Resources")||t,operatorList:l,initialState:h}).then((function(){l.addOp(o.OPS.paintFormXObjectEnd,[]),b&&l.addOp(o.OPS.endGroup,[y])})));case 20:case"end":return i.stop()}}),_callee2)})))()},buildPaintImageXObject:function buildPaintImageXObject(t){var r=this;return _asyncToGenerator(i.default.mark((function _callee3(){var a,l,c,u,h,d,p,m,g,b,y,v,k,w,C,x,_,A,T,I,P,O,E,B,D;return i.default.wrap((function _callee3$(i){for(;;)switch(i.prev=i.next){case 0:if(a=t.resources,l=t.image,c=t.isInline,u=void 0!==c&&c,h=t.operatorList,d=t.cacheKey,p=t.localImageCache,m=l.dict,g=m.objId,b=m.get("Width","W"),y=m.get("Height","H"),b&&(0,o.isNum)(b)&&y&&(0,o.isNum)(y)){i.next=8;break}return(0,o.warn)("Image dimensions are missing, or not numbers."),i.abrupt("return",void 0);case 8:if(!(-1!==(v=r.options.maxImageSize)&&b*y>v)){i.next=12;break}return(0,o.warn)("Image exceeded maximum allowed size and was removed."),i.abrupt("return",void 0);case 12:if(!(m.get("ImageMask","IM")||!1)){i.next=25;break}return C=m.get("Width","W"),x=m.get("Height","H"),_=C+7>>3,A=l.getBytes(_*x,!0),T=m.getArray("Decode","D"),(k=R.PDFImage.createMask({imgArray:A,width:C,height:x,imageIsFromDecodeStream:l instanceof S.DecodeStream,inverseDecode:!!T&&T[0]>0})).cached=!!d,w=[k],h.addOp(o.OPS.paintImageMaskXObject,w),d&&p.set(d,g,{fn:o.OPS.paintImageMaskXObject,args:w}),i.abrupt("return",void 0);case 25:if(I=m.get("SMask","SM")||!1,P=m.get("Mask")||!1,200,!u||I||P||!(b+y<200)){i.next=33;break}return O=new R.PDFImage({xref:r.xref,res:a,image:l,isInline:u,pdfFunctionFactory:r.pdfFunctionFactory}),k=O.createImageData(!0),h.addOp(o.OPS.paintInlineImageXObject,[k]),i.abrupt("return",void 0);case 33:if(E="img_".concat(r.idFactory.createObjId()),B=!1,r.parsingType3Font?E="".concat(r.idFactory.getDocId(),"_type3res_").concat(E):g&&(B=r.globalImageCache.shouldCache(g,r.pageIndex))&&(E="".concat(r.idFactory.getDocId(),"_").concat(E)),h.addDependency(E),w=[E,b,y],D=R.PDFImage.buildImage({xref:r.xref,res:a,image:l,isInline:u,pdfFunctionFactory:r.pdfFunctionFactory}).then((function(t){if(k=t.createImageData(!1),r.parsingType3Font)return r.handler.sendWithPromise("commonobj",[E,"FontType3Res",k],[k.data.buffer]);B?r.handler.send("commonobj",[E,"Image",k],[k.data.buffer]):r.handler.send("obj",[E,r.pageIndex,"Image",k],[k.data.buffer])})).catch((function(t){if((0,o.warn)("Unable to decode image: "+t),r.parsingType3Font)return r.handler.sendWithPromise("commonobj",[E,"FontType3Res",null]);B?r.handler.send("commonobj",[E,"Image",null]):r.handler.send("obj",[E,r.pageIndex,"Image",null])})),!r.parsingType3Font){i.next=41;break}return i.next=41,D;case 41:return h.addOp(o.OPS.paintImageXObject,w),d&&(p.set(d,g,{fn:o.OPS.paintImageXObject,args:w}),g&&((0,o.assert)(!u,"Cannot cache an inline image globally."),r.globalImageCache.addPageIndex(g,r.pageIndex),B&&r.globalImageCache.setData(g,{objId:E,fn:o.OPS.paintImageXObject,args:w}))),i.abrupt("return",void 0);case 44:case"end":return i.stop()}}),_callee3)})))()},handleSMask:function PartialEvaluator_handleSmask(t,r,a,i,o){var l=t.get("G"),c={subtype:t.get("S").name,backdrop:t.get("BC")},u=t.get("TR");if((0,C.isPDFFunction)(u)){for(var h=this.pdfFunctionFactory.create(u),d=new Uint8Array(256),p=new Float32Array(1),m=0;m<256;m++)p[0]=m/255,h(p,0,p,0),d[m]=255*p[0]|0;c.transferMap=d}return this.buildFormXObject(r,l,c,a,i,o.state.clone())},handleTilingType:function handleTilingType(t,r,a,i,l,u,h){var d=this,p=new A.OperatorList,m=[l.get("Resources"),a],b=c.Dict.merge(this.xref,m);return this.getOperatorList({stream:i,task:h,resources:b,operatorList:p}).then((function(){return(0,g.getTilingPatternIR)({fnArray:p.fnArray,argsArray:p.argsArray},l,r)})).then((function(r){u.addDependencies(p.dependencies),u.addOp(t,r)}),(function(t){if(!(t instanceof o.AbortException)){if(d.options.ignoreErrors)return d.handler.send("UnsupportedFeature",{featureId:o.UNSUPPORTED_FEATURES.errorTilingPattern}),void(0,o.warn)('handleTilingType - ignoring pattern: "'.concat(t,'".'));throw t}}))},handleSetFont:function PartialEvaluator_handleSetFont(t,r,a,i,l,c){var h,d=this;return r&&(h=(r=r.slice())[0].name),this.loadFont(h,a,t).then((function(r){return r.font.isType3Font?r.loadType3Data(d,t,i,l).then((function(){return r})).catch((function(t){return d.handler.send("UnsupportedFeature",{featureId:o.UNSUPPORTED_FEATURES.errorFontLoadType3}),new I({loadedName:"g_font_error",font:new u.ErrorFont("Type3 font load error: ".concat(t)),dict:r.font,extraProperties:d.options.fontExtraProperties})})):r})).then((function(t){return c.font=t.font,t.send(d.handler),t.loadedName}))},handleText:function handleText(t,r){var a=r.font,i=a.charsToGlyphs(t);a.data&&((!!(r.textRenderingMode&o.TextRenderingMode.ADD_TO_PATH_FLAG)||"Pattern"===r.fillColorSpace.name||a.disableFontFace||this.options.disableFontFace)&&PartialEvaluator.buildFontPaths(a,i,this.handler));return i},ensureStateFont:function ensureStateFont(t){if(!t.font){var r=new o.FormatError("Missing setFont (Tf) operator before text rendering operator.");if(this.options.ignoreErrors)return this.handler.send("UnsupportedFeature",{featureId:o.UNSUPPORTED_FEATURES.errorFontState}),void(0,o.warn)('ensureStateFont: "'.concat(r,'".'));throw r}},setGState:function PartialEvaluator_setGState(t,r,a,i,l){for(var u=this,h=[],d=r.getKeys(),p=Promise.resolve(),m=function _loop(){var m=d[g],b=r.get(m);switch(m){case"Type":break;case"LW":case"LC":case"LJ":case"ML":case"D":case"RI":case"FL":case"CA":case"ca":h.push([m,b]);break;case"Font":p=p.then((function(){return u.handleSetFont(t,null,b[0],a,i,l.state).then((function(t){a.addDependency(t),h.push([m,[t,b[1]]])}))}));break;case"BM":h.push([m,normalizeBlendMode(b)]);break;case"SMask":if((0,c.isName)(b,"None")){h.push([m,!1]);break}(0,c.isDict)(b)?(p=p.then((function(){return u.handleSMask(b,t,a,i,l)})),h.push([m,!0])):(0,o.warn)("Unsupported SMask type");break;case"OP":case"op":case"OPM":case"BG":case"BG2":case"UCR":case"UCR2":case"TR":case"TR2":case"HT":case"SM":case"SA":case"AIS":case"TK":(0,o.info)("graphic state operator "+m);break;default:(0,o.info)("Unknown graphic state operator "+m)}},g=0,b=d.length;g<b;g++)m();return p.then((function(){h.length>0&&a.addOp(o.OPS.setGState,[h])}))},loadFont:function PartialEvaluator_loadFont(t,r,a){var i,l=this,h=function errorFont(){return Promise.resolve(new I({loadedName:"g_font_error",font:new u.ErrorFont('Font "'.concat(t,'" is not available.')),dict:r,extraProperties:l.options.fontExtraProperties}))},d=this.xref;if(r){if(!(0,c.isRef)(r))throw new o.FormatError('The "font" object should be a reference.');i=r}else{var p=a.get("Font");p&&(i=p.getRaw(t))}if(!i){var m='Font "'.concat(t||r&&r.toString(),'" is not available');if(!this.options.ignoreErrors&&!this.parsingType3Font)return(0,o.warn)("".concat(m,".")),h();this.handler.send("UnsupportedFeature",{featureId:o.UNSUPPORTED_FEATURES.errorFontMissing}),(0,o.warn)("".concat(m," -- attempting to fallback to a default font.")),i=PartialEvaluator.getFallbackFontDict()}if(this.fontCache.has(i))return this.fontCache.get(i);if(r=d.fetchIfRef(i),!(0,c.isDict)(r))return h();if(r.translated)return r.translated;var g,b,y=(0,o.createPromiseCapability)(),v=this.preEvaluateFont(r),S=v.descriptor,k=v.hash,w=(0,c.isRef)(i);if(w&&(g=i.toString()),k&&(0,c.isDict)(S)){S.fontAliases||(S.fontAliases=Object.create(null));var C=S.fontAliases;if(C[k]){var x=C[k].aliasRef;if(w&&x&&this.fontCache.has(x))return this.fontCache.putAlias(i,x),this.fontCache.get(i)}else C[k]={fontID:u.Font.getFontID()};w&&(C[k].aliasRef=i),g=C[k].fontID}w?this.fontCache.put(i,y.promise):(g||(g=this.idFactory.createObjId()),this.fontCache.put("id_".concat(g),y.promise)),(0,o.assert)(g,'The "fontID" must be defined.'),r.loadedName="".concat(this.idFactory.getDocId(),"_f").concat(g),r.translated=y.promise;try{b=this.translateFont(v)}catch(t){b=Promise.reject(t)}return b.then((function(t){void 0!==t.fontType&&(d.stats.fontTypes[t.fontType]=!0);y.resolve(new I({loadedName:r.loadedName,font:t,dict:r,extraProperties:l.options.fontExtraProperties}))})).catch((function(t){l.handler.send("UnsupportedFeature",{featureId:o.UNSUPPORTED_FEATURES.errorFontTranslate});try{var a=S&&S.get("FontFile3"),i=a&&a.get("Subtype"),c=(0,u.getFontType)(v.type,i&&i.name);d.stats.fontTypes[c]=!0}catch(t){}y.resolve(new I({loadedName:r.loadedName,font:new u.ErrorFont(t instanceof Error?t.message:t),dict:r,extraProperties:l.options.fontExtraProperties}))})),y.promise},buildPath:function buildPath(t,r,a){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=t.length-1;if(a||(a=[]),l<0||t.fnArray[l]!==o.OPS.constructPath)i&&((0,o.warn)('Encountered path operator "'.concat(r,'" inside of a text object.')),t.addOp(o.OPS.save,null)),t.addOp(o.OPS.constructPath,[[r],a]),i&&t.addOp(o.OPS.restore,null);else{var c=t.argsArray[l];c[0].push(r),Array.prototype.push.apply(c[1],a)}},parseColorSpace:function parseColorSpace(t){var r=this,a=t.cs,i=t.resources;return new Promise((function(t){t(v.ColorSpace.parse(a,r.xref,i,r.pdfFunctionFactory))})).catch((function(t){if(t instanceof o.AbortException)return null;if(r.options.ignoreErrors)return r.handler.send("UnsupportedFeature",{featureId:o.UNSUPPORTED_FEATURES.errorColorSpace}),(0,o.warn)('parseColorSpace - ignoring ColorSpace: "'.concat(t,'".')),null;throw t}))},handleColorN:function handleColorN(t,r,a,l,u,h,d){var p=this;return _asyncToGenerator(i.default.mark((function _callee4(){var m,b,y,v,S,k,w;return i.default.wrap((function _callee4$(i){for(;;)switch(i.prev=i.next){case 0:if(m=a[a.length-1],!(0,c.isName)(m)||!(b=u.get(m.name))){i.next=16;break}if(y=(0,c.isStream)(b)?b.dict:b,1!==(v=y.get("PatternType"))){i.next=9;break}return S=l.base?l.base.getRgb(a,0):null,i.abrupt("return",p.handleTilingType(r,S,h,b,y,t,d));case 9:if(2!==v){i.next=15;break}return k=y.get("Shading"),w=y.getArray("Matrix"),b=g.Pattern.parseShading(k,w,p.xref,h,p.handler,p.pdfFunctionFactory),t.addOp(r,b.getIR()),i.abrupt("return",void 0);case 15:throw new o.FormatError("Unknown PatternType: ".concat(v));case 16:throw new o.FormatError("Unknown PatternName: ".concat(m));case 17:case"end":return i.stop()}}),_callee4)})))()},getOperatorList:function getOperatorList(t){var a=this,i=t.stream,l=t.task,u=t.resources,h=t.operatorList,d=t.initialState,p=void 0===d?null:d;if(u=u||c.Dict.empty,p=p||new E,!h)throw new Error('getOperatorList: missing "operatorList" parameter');var m=this,b=this.xref,y=!1,S=new x.LocalImageCache,k=u.get("XObject")||c.Dict.empty,w=u.get("Pattern")||c.Dict.empty,C=new P(p),_=new B(i,b,C),A=new TimeSlotManager;function closePendingRestoreOPS(t){for(var r=0,a=_.savedStatesDepth;r<a;r++)h.addOp(o.OPS.restore,[])}return new Promise((function promiseBody(t,a){var i=function next(r){Promise.all([r,h.ready]).then((function(){try{promiseBody(t,a)}catch(t){a(t)}}),a)};l.ensureNotTerminated(),A.reset();for(var d,p,x,R,T={};!(d=A.check())&&(T.args=null,_.read(T));){var I=T.args,P=T.fn;switch(0|P){case o.OPS.paintXObject:var O=I[0].name;if(O){var E=S.getByName(O);if(E){h.addOp(E.fn,E.args),I=null;continue}}return void i(new Promise((function(t,r){if(!O)throw new o.FormatError("XObject must be referred to by name.");var a=k.getRaw(O);if(a instanceof c.Ref){var i=S.getByRef(a);if(i)return h.addOp(i.fn,i.args),void t();var d=m.globalImageCache.getData(a,m.pageIndex);if(d)return h.addDependency(d.objId),h.addOp(d.fn,d.args),void t();a=b.fetch(a)}if(!a)return h.addOp(P,I),void t();if(!(0,c.isStream)(a))throw new o.FormatError("XObject should be a stream");var p=a.dict.get("Subtype");if(!(0,c.isName)(p))throw new o.FormatError("XObject should have a Name subtype");if("Form"===p.name)return C.save(),void m.buildFormXObject(u,a,null,h,l,C.state.clone()).then((function(){C.restore(),t()}),r);if("Image"!==p.name){if("PS"!==p.name)throw new o.FormatError("Unhandled XObject subtype ".concat(p.name));(0,o.info)("Ignored XObject subtype PS"),t()}else m.buildPaintImageXObject({resources:u,image:a,operatorList:h,cacheKey:O,localImageCache:S}).then(t,r)})).catch((function(t){if(!(t instanceof o.AbortException)){if(m.options.ignoreErrors)return m.handler.send("UnsupportedFeature",{featureId:o.UNSUPPORTED_FEATURES.errorXObject}),void(0,o.warn)('getOperatorList - ignoring XObject: "'.concat(t,'".'));throw t}})));case o.OPS.setFont:var B=I[1];return void i(m.handleSetFont(u,I,null,h,l,C.state).then((function(t){h.addDependency(t),h.addOp(o.OPS.setFont,[t,B])})));case o.OPS.beginText:y=!0;break;case o.OPS.endText:y=!1;break;case o.OPS.endInlineImage:var D=I[0].cacheKey;if(D){var M=S.getByName(D);if(M){h.addOp(M.fn,M.args),I=null;continue}}return void i(m.buildPaintImageXObject({resources:u,image:I[0],isInline:!0,operatorList:h,cacheKey:D,localImageCache:S}));case o.OPS.showText:if(!C.state.font){m.ensureStateFont(C.state);continue}I[0]=m.handleText(I[0],C.state);break;case o.OPS.showSpacedText:if(!C.state.font){m.ensureStateFont(C.state);continue}var L=I[0],N=[],U=L.length,j=C.state;for(p=0;p<U;++p){var q=L[p];(0,o.isString)(q)?Array.prototype.push.apply(N,m.handleText(q,j)):(0,o.isNum)(q)&&N.push(q)}I[0]=N,P=o.OPS.showText;break;case o.OPS.nextLineShowText:if(!C.state.font){m.ensureStateFont(C.state);continue}h.addOp(o.OPS.nextLine),I[0]=m.handleText(I[0],C.state),P=o.OPS.showText;break;case o.OPS.nextLineSetSpacingShowText:if(!C.state.font){m.ensureStateFont(C.state);continue}h.addOp(o.OPS.nextLine),h.addOp(o.OPS.setWordSpacing,[I.shift()]),h.addOp(o.OPS.setCharSpacing,[I.shift()]),I[0]=m.handleText(I[0],C.state),P=o.OPS.showText;break;case o.OPS.setTextRenderingMode:C.state.textRenderingMode=I[0];break;case o.OPS.setFillColorSpace:return void i(m.parseColorSpace({cs:I[0],resources:u}).then((function(t){t&&(C.state.fillColorSpace=t)})));case o.OPS.setStrokeColorSpace:return void i(m.parseColorSpace({cs:I[0],resources:u}).then((function(t){t&&(C.state.strokeColorSpace=t)})));case o.OPS.setFillColor:R=C.state.fillColorSpace,I=R.getRgb(I,0),P=o.OPS.setFillRGBColor;break;case o.OPS.setStrokeColor:R=C.state.strokeColorSpace,I=R.getRgb(I,0),P=o.OPS.setStrokeRGBColor;break;case o.OPS.setFillGray:C.state.fillColorSpace=v.ColorSpace.singletons.gray,I=v.ColorSpace.singletons.gray.getRgb(I,0),P=o.OPS.setFillRGBColor;break;case o.OPS.setStrokeGray:C.state.strokeColorSpace=v.ColorSpace.singletons.gray,I=v.ColorSpace.singletons.gray.getRgb(I,0),P=o.OPS.setStrokeRGBColor;break;case o.OPS.setFillCMYKColor:C.state.fillColorSpace=v.ColorSpace.singletons.cmyk,I=v.ColorSpace.singletons.cmyk.getRgb(I,0),P=o.OPS.setFillRGBColor;break;case o.OPS.setStrokeCMYKColor:C.state.strokeColorSpace=v.ColorSpace.singletons.cmyk,I=v.ColorSpace.singletons.cmyk.getRgb(I,0),P=o.OPS.setStrokeRGBColor;break;case o.OPS.setFillRGBColor:C.state.fillColorSpace=v.ColorSpace.singletons.rgb,I=v.ColorSpace.singletons.rgb.getRgb(I,0);break;case o.OPS.setStrokeRGBColor:C.state.strokeColorSpace=v.ColorSpace.singletons.rgb,I=v.ColorSpace.singletons.rgb.getRgb(I,0);break;case o.OPS.setFillColorN:if("Pattern"===(R=C.state.fillColorSpace).name)return void i(m.handleColorN(h,o.OPS.setFillColorN,I,R,w,u,l));I=R.getRgb(I,0),P=o.OPS.setFillRGBColor;break;case o.OPS.setStrokeColorN:if("Pattern"===(R=C.state.strokeColorSpace).name)return void i(m.handleColorN(h,o.OPS.setStrokeColorN,I,R,w,u,l));I=R.getRgb(I,0),P=o.OPS.setStrokeRGBColor;break;case o.OPS.shadingFill:var W=u.get("Shading");if(!W)throw new o.FormatError("No shading resource found");var z=W.get(I[0].name);if(!z)throw new o.FormatError("No shading object found");var G=g.Pattern.parseShading(z,null,b,u,m.handler,m.pdfFunctionFactory).getIR();I=[G],P=o.OPS.shadingFill;break;case o.OPS.setGState:var H=I[0],X=u.get("ExtGState");if(!(0,c.isDict)(X)||!X.has(H.name))break;var V=X.get(H.name);return void i(m.setGState(u,V,h,l,C));case o.OPS.moveTo:case o.OPS.lineTo:case o.OPS.curveTo:case o.OPS.curveTo2:case o.OPS.curveTo3:case o.OPS.closePath:case o.OPS.rectangle:m.buildPath(h,P,I,y);continue;case o.OPS.markPoint:case o.OPS.markPointProps:case o.OPS.beginMarkedContent:case o.OPS.beginMarkedContentProps:case o.OPS.endMarkedContent:case o.OPS.beginCompat:case o.OPS.endCompat:continue;default:if(null!==I){for(p=0,x=I.length;p<x&&!(I[p]instanceof c.Dict);p++);if(p<x){(0,o.warn)("getOperatorList - ignoring operator: "+P);continue}}}h.addOp(P,I)}d?i(r):(closePendingRestoreOPS(),t())})).catch((function(t){if(!(t instanceof o.AbortException)){if(a.options.ignoreErrors)return a.handler.send("UnsupportedFeature",{featureId:o.UNSUPPORTED_FEATURES.errorOperatorList}),(0,o.warn)('getOperatorList - ignoring errors during "'.concat(l.name,'" ')+'task: "'.concat(t,'".')),void closePendingRestoreOPS();throw t}}))},getTextContent:function getTextContent(t){var a=this,i=t.stream,l=t.task,u=t.resources,h=t.stateManager,d=void 0===h?null:h,m=t.normalizeWhitespace,g=void 0!==m&&m,b=t.combineTextItems,v=void 0!==b&&b,S=t.sink,k=t.seenStyles,w=void 0===k?Object.create(null):k;u=u||c.Dict.empty,d=d||new P(new O);var C,_=/\s/g,A={items:[],styles:Object.create(null)},R={initialized:!1,str:[],width:0,height:0,vertical:!1,lastAdvanceWidth:0,lastAdvanceHeight:0,textAdvanceScale:0,spaceWidth:0,fakeSpaceMin:1/0,fakeMultiSpaceMin:1/0,fakeMultiSpaceMax:-0,textRunBreakAllowed:!1,transform:null,fontName:null},T=this,I=this.xref,E=null,D=new x.LocalImageCache,M=new B(i,I,d);function ensureTextContentItem(){if(R.initialized)return R;var t=C.font;t.loadedName in w||(w[t.loadedName]=!0,A.styles[t.loadedName]={fontFamily:t.fallbackName,ascent:t.ascent,descent:t.descent,vertical:t.vertical}),R.fontName=t.loadedName;var r=[C.fontSize*C.textHScale,0,0,C.fontSize,0,C.textRise];if(t.isType3Font&&C.fontSize<=1&&!(0,o.isArrayEqual)(C.fontMatrix,o.FONT_IDENTITY_MATRIX)){var a=t.bbox[3]-t.bbox[1];a>0&&(r[3]*=a*C.fontMatrix[3])}var i=o.Util.transform(C.ctm,o.Util.transform(C.textMatrix,r));R.transform=i,t.vertical?(R.width=Math.sqrt(i[0]*i[0]+i[1]*i[1]),R.height=0,R.vertical=!0):(R.width=0,R.height=Math.sqrt(i[2]*i[2]+i[3]*i[3]),R.vertical=!1);var l=C.textLineMatrix[0],c=C.textLineMatrix[1],u=Math.sqrt(l*l+c*c);l=C.ctm[0],c=C.ctm[1];var h=Math.sqrt(l*l+c*c);R.textAdvanceScale=h*u,R.lastAdvanceWidth=0,R.lastAdvanceHeight=0;var d=t.spaceWidth/1e3*C.fontSize;return d?(R.spaceWidth=d,R.fakeSpaceMin=.3*d,R.fakeMultiSpaceMin=1.5*d,R.fakeMultiSpaceMax=4*d,R.textRunBreakAllowed=!t.isMonospace):(R.spaceWidth=0,R.fakeSpaceMin=1/0,R.fakeMultiSpaceMin=1/0,R.fakeMultiSpaceMax=0,R.textRunBreakAllowed=!1),R.initialized=!0,R}function replaceWhitespace(t){for(var r,a=0,i=t.length;a<i&&(r=t.charCodeAt(a))>=32&&r<=127;)a++;return a<i?t.replace(_," "):t}function handleSetFont(t,r){return T.loadFont(t,r,u).then((function(t){C.font=t.font,C.fontMatrix=t.font.fontMatrix||o.FONT_IDENTITY_MATRIX}))}function buildTextContentItem(t){for(var r=C.font,a=ensureTextContentItem(),i=0,o=0,l=r.charsToGlyphs(t),c=0;c<l.length;c++){var u=l[c],h=null;h=r.vertical&&u.vmetric?u.vmetric[0]:u.width;var d=u.unicode,m=(0,p.getNormalizedUnicodes)();void 0!==m[d]&&(d=m[d]),d=(0,p.reverseIfRtl)(d);var g=C.charSpacing;if(u.isSpace){var b=C.wordSpacing;g+=b,b>0&&addFakeSpaces(b,a.str)}var y=0,v=0;if(r.vertical)o+=v=h*C.fontMatrix[0]*C.fontSize+g;else i+=y=(h*C.fontMatrix[0]*C.fontSize+g)*C.textHScale;C.translateTextMatrix(y,v),a.str.push(d)}return r.vertical?(a.lastAdvanceHeight=o,a.height+=Math.abs(o)):(a.lastAdvanceWidth=i,a.width+=i),a}function addFakeSpaces(t,r){if(!(t<R.fakeSpaceMin))if(t<R.fakeMultiSpaceMin)r.push(" ");else for(var a=Math.round(t/R.spaceWidth);a-- >0;)r.push(" ")}function flushTextContentItem(){R.initialized&&(R.vertical?R.height*=R.textAdvanceScale:R.width*=R.textAdvanceScale,A.items.push(function runBidiTransform(t){var r=t.str.join(""),a=(0,y.bidi)(r,-1,t.vertical);return{str:g?replaceWhitespace(a.str):a.str,dir:a.dir,width:t.width,height:t.height,transform:t.transform,fontName:t.fontName}}(R)),R.initialized=!1,R.str.length=0)}function enqueueChunk(){var t=A.items.length;t>0&&(S.enqueue(A,t),A.items=[],A.styles=Object.create(null))}var L=new TimeSlotManager;return new Promise((function promiseBody(t,a){var i=function next(r){enqueueChunk(),Promise.all([r,S.ready]).then((function(){try{promiseBody(t,a)}catch(t){a(t)}}),a)};l.ensureNotTerminated(),L.reset();for(var h,p={},m=[];!(h=L.check())&&(m.length=0,p.args=m,M.read(p));){C=d.state;var b,y=p.fn;switch(m=p.args,0|y){case o.OPS.setFont:var k=m[0].name,x=m[1];if(C.font&&k===C.fontName&&x===C.fontSize)break;return flushTextContentItem(),C.fontName=k,C.fontSize=x,void i(handleSetFont(k,null));case o.OPS.setTextRise:flushTextContentItem(),C.textRise=m[0];break;case o.OPS.setHScale:flushTextContentItem(),C.textHScale=m[0]/100;break;case o.OPS.setLeading:flushTextContentItem(),C.leading=m[0];break;case o.OPS.moveText:var _=!!C.font&&0===(C.font.vertical?m[0]:m[1]);if(b=m[0]-m[1],v&&_&&R.initialized&&b>0&&b<=R.fakeMultiSpaceMax){C.translateTextLineMatrix(m[0],m[1]),R.width+=m[0]-R.lastAdvanceWidth,R.height+=m[1]-R.lastAdvanceHeight,addFakeSpaces(m[0]-R.lastAdvanceWidth-(m[1]-R.lastAdvanceHeight),R.str);break}flushTextContentItem(),C.translateTextLineMatrix(m[0],m[1]),C.textMatrix=C.textLineMatrix.slice();break;case o.OPS.setLeadingMoveText:flushTextContentItem(),C.leading=-m[1],C.translateTextLineMatrix(m[0],m[1]),C.textMatrix=C.textLineMatrix.slice();break;case o.OPS.nextLine:flushTextContentItem(),C.carriageReturn();break;case o.OPS.setTextMatrix:if(b=C.calcTextLineMatrixAdvance(m[0],m[1],m[2],m[3],m[4],m[5]),v&&null!==b&&R.initialized&&b.value>0&&b.value<=R.fakeMultiSpaceMax){C.translateTextLineMatrix(b.width,b.height),R.width+=b.width-R.lastAdvanceWidth,R.height+=b.height-R.lastAdvanceHeight,addFakeSpaces(b.width-R.lastAdvanceWidth-(b.height-R.lastAdvanceHeight),R.str);break}flushTextContentItem(),C.setTextMatrix(m[0],m[1],m[2],m[3],m[4],m[5]),C.setTextLineMatrix(m[0],m[1],m[2],m[3],m[4],m[5]);break;case o.OPS.setCharSpacing:C.charSpacing=m[0];break;case o.OPS.setWordSpacing:C.wordSpacing=m[0];break;case o.OPS.beginText:flushTextContentItem(),C.textMatrix=o.IDENTITY_MATRIX.slice(),C.textLineMatrix=o.IDENTITY_MATRIX.slice();break;case o.OPS.showSpacedText:if(!d.state.font){T.ensureStateFont(d.state);continue}for(var O,B=m[0],N=0,U=B.length;N<U;N++)if("string"==typeof B[N])buildTextContentItem(B[N]);else if((0,o.isNum)(B[N])){ensureTextContentItem(),b=B[N]*C.fontSize/1e3;var j=!1;C.font.vertical?(O=b,C.translateTextMatrix(0,O),(j=R.textRunBreakAllowed&&b>R.fakeMultiSpaceMax)||(R.height+=O)):(O=(b=-b)*C.textHScale,C.translateTextMatrix(O,0),(j=R.textRunBreakAllowed&&b>R.fakeMultiSpaceMax)||(R.width+=O)),j?flushTextContentItem():b>0&&addFakeSpaces(b,R.str)}break;case o.OPS.showText:if(!d.state.font){T.ensureStateFont(d.state);continue}buildTextContentItem(m[0]);break;case o.OPS.nextLineShowText:if(!d.state.font){T.ensureStateFont(d.state);continue}flushTextContentItem(),C.carriageReturn(),buildTextContentItem(m[0]);break;case o.OPS.nextLineSetSpacingShowText:if(!d.state.font){T.ensureStateFont(d.state);continue}flushTextContentItem(),C.wordSpacing=m[0],C.charSpacing=m[1],C.carriageReturn(),buildTextContentItem(m[2]);break;case o.OPS.paintXObject:flushTextContentItem(),E||(E=u.get("XObject")||c.Dict.empty);var q=m[0].name;if(q&&D.getByName(q))break;return void i(new Promise((function(t,r){if(!q)throw new o.FormatError("XObject must be referred to by name.");var a=E.getRaw(q);if(a instanceof c.Ref){if(D.getByRef(a))return void t();a=I.fetch(a)}if(a){if(!(0,c.isStream)(a))throw new o.FormatError("XObject should be a stream");var i=a.dict.get("Subtype");if(!(0,c.isName)(i))throw new o.FormatError("XObject should have a Name subtype");if("Form"!==i.name)return D.set(q,a.dict.objId,!0),void t();var h=d.state.clone(),p=new P(h),m=a.dict.getArray("Matrix");Array.isArray(m)&&6===m.length&&p.transform(m),enqueueChunk();var b={enqueueInvoked:!1,enqueue:function enqueue(t,r){this.enqueueInvoked=!0,S.enqueue(t,r)},get desiredSize(){return S.desiredSize},get ready(){return S.ready}};T.getTextContent({stream:a,task:l,resources:a.dict.get("Resources")||u,stateManager:p,normalizeWhitespace:g,combineTextItems:v,sink:b,seenStyles:w}).then((function(){b.enqueueInvoked||D.set(q,a.dict.objId,!0),t()}),r)}else t()})).catch((function(t){if(!(t instanceof o.AbortException)){if(!T.options.ignoreErrors)throw t;(0,o.warn)('getTextContent - ignoring XObject: "'.concat(t,'".'))}})));case o.OPS.setGState:flushTextContentItem();var W=m[0],z=u.get("ExtGState");if(!(0,c.isDict)(z)||!(0,c.isName)(W))break;var G=z.get(W.name);if(!(0,c.isDict)(G))break;var H=G.get("Font");if(H)return C.fontName=null,C.fontSize=H[1],void i(handleSetFont(null,H[0]))}if(A.items.length>=S.desiredSize){h=!0;break}}h?i(r):(flushTextContentItem(),enqueueChunk(),t())})).catch((function(t){if(!(t instanceof o.AbortException)){if(a.options.ignoreErrors)return(0,o.warn)('getTextContent - ignoring errors during "'.concat(l.name,'" ')+'task: "'.concat(t,'".')),flushTextContentItem(),void enqueueChunk();throw t}}))},extractDataStructures:function PartialEvaluator_extractDataStructures(t,r,a){var i,l=this,d=this.xref,p=t.get("ToUnicode")||r.get("ToUnicode"),m=p?this.readToUnicode(p):Promise.resolve(void 0);if(a.composite){var g=t.get("CIDSystemInfo");(0,c.isDict)(g)&&(a.cidSystemInfo={registry:(0,o.stringToPDFString)(g.get("Registry")),ordering:(0,o.stringToPDFString)(g.get("Ordering")),supplement:g.get("Supplement")});var b=t.get("CIDToGIDMap");(0,c.isStream)(b)&&(i=b.getBytes())}var y,v=[],S=null;if(t.has("Encoding")){if(y=t.get("Encoding"),(0,c.isDict)(y)){if(S=y.get("BaseEncoding"),S=(0,c.isName)(S)?S.name:null,y.has("Differences"))for(var k=y.get("Differences"),w=0,C=0,x=k.length;C<x;C++){var _=d.fetchIfRef(k[C]);if((0,o.isNum)(_))w=_;else{if(!(0,c.isName)(_))throw new o.FormatError("Invalid entry in 'Differences' array: ".concat(_));v[w++]=_.name}}}else{if(!(0,c.isName)(y))throw new o.FormatError("Encoding is not a Name nor a Dict");S=y.name}"MacRomanEncoding"!==S&&"MacExpertEncoding"!==S&&"WinAnsiEncoding"!==S&&(S=null)}if(S)a.defaultEncoding=(0,h.getEncoding)(S).slice();else{var A=!!(a.flags&u.FontFlags.Symbolic),R=!!(a.flags&u.FontFlags.Nonsymbolic);y=h.StandardEncoding,"TrueType"!==a.type||R||(y=h.WinAnsiEncoding),A&&(y=h.MacRomanEncoding,a.file||(/Symbol/i.test(a.name)?y=h.SymbolSetEncoding:/Dingbats|Wingdings/i.test(a.name)&&(y=h.ZapfDingbatsEncoding))),a.defaultEncoding=y}return a.differences=v,a.baseEncodingName=S,a.hasEncoding=!!S||v.length>0,a.dict=t,m.then((function(t){return a.toUnicode=t,l.buildToUnicode(a)})).then((function(t){return a.toUnicode=t,i&&(a.cidToGidMap=l.readCidToGidMap(i,t)),a}))},_buildSimpleFontToUnicode:function _buildSimpleFontToUnicode(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,o.assert)(!t.composite,"Must be a simple font.");var a=[],i=t.defaultEncoding.slice(),l=t.baseEncodingName,c=t.differences;for(var d in c){var m=c[d];".notdef"!==m&&(i[d]=m)}var g=(0,k.getGlyphsUnicode)();for(var b in i){var y=i[b];if(""!==y)if(void 0!==g[y])a[b]=String.fromCharCode(g[y]);else{var v=0;switch(y[0]){case"G":3===y.length&&(v=parseInt(y.substring(1),16));break;case"g":5===y.length&&(v=parseInt(y.substring(1),16));break;case"C":case"c":if(y.length>=3&&y.length<=4){var S=y.substring(1);if(r){v=parseInt(S,16);break}if(v=+S,Number.isNaN(v)&&Number.isInteger(parseInt(S,16)))return this._buildSimpleFontToUnicode(t,!0)}break;default:var w=(0,p.getUnicodeForGlyph)(y,g);-1!==w&&(v=w)}if(v>0&&v<=1114111&&Number.isInteger(v)){if(l&&v===+b){var C=(0,h.getEncoding)(l);if(C&&(y=C[b])){a[b]=String.fromCharCode(g[y]);continue}}a[b]=String.fromCodePoint(v)}}}return new u.ToUnicodeMap(a)},buildToUnicode:function buildToUnicode(t){if(t.hasIncludedToUnicodeMap=!!t.toUnicode&&t.toUnicode.length>0,t.hasIncludedToUnicodeMap)return!t.composite&&t.hasEncoding&&(t.fallbackToUnicode=this._buildSimpleFontToUnicode(t)),Promise.resolve(t.toUnicode);if(!t.composite)return Promise.resolve(this._buildSimpleFontToUnicode(t));if(t.composite&&(t.cMap.builtInCMap&&!(t.cMap instanceof l.IdentityCMap)||"Adobe"===t.cidSystemInfo.registry&&("GB1"===t.cidSystemInfo.ordering||"CNS1"===t.cidSystemInfo.ordering||"Japan1"===t.cidSystemInfo.ordering||"Korea1"===t.cidSystemInfo.ordering))){var r=t.cidSystemInfo.registry,a=t.cidSystemInfo.ordering,i=c.Name.get(r+"-"+a+"-UCS2");return l.CMapFactory.create({encoding:i,fetchBuiltInCMap:this.fetchBuiltInCMap,useCMap:null}).then((function(r){var a=t.cMap,i=[];return a.forEach((function(t,a){if(a>65535)throw new o.FormatError("Max size of CID is 65,535");var l=r.lookup(a);l&&(i[t]=String.fromCharCode((l.charCodeAt(0)<<8)+l.charCodeAt(1)))})),new u.ToUnicodeMap(i)}))}return Promise.resolve(new u.IdentityToUnicodeMap(t.firstChar,t.lastChar))},readToUnicode:function PartialEvaluator_readToUnicode(t){var r=this,a=t;return(0,c.isName)(a)?l.CMapFactory.create({encoding:a,fetchBuiltInCMap:this.fetchBuiltInCMap,useCMap:null}).then((function(t){return t instanceof l.IdentityCMap?new u.IdentityToUnicodeMap(0,65535):new u.ToUnicodeMap(t.getMap())})):(0,c.isStream)(a)?l.CMapFactory.create({encoding:a,fetchBuiltInCMap:this.fetchBuiltInCMap,useCMap:null}).then((function(t){if(t instanceof l.IdentityCMap)return new u.IdentityToUnicodeMap(0,65535);var r=new Array(t.length);return t.forEach((function(t,a){for(var i=[],o=0;o<a.length;o+=2){var l=a.charCodeAt(o)<<8|a.charCodeAt(o+1);if(55296==(63488&l)){o+=2;var c=a.charCodeAt(o)<<8|a.charCodeAt(o+1);i.push(((1023&l)<<10)+(1023&c)+65536)}else i.push(l)}r[t]=String.fromCodePoint.apply(String,i)})),new u.ToUnicodeMap(r)}),(function(t){if(t instanceof o.AbortException)return null;if(r.options.ignoreErrors)return r.handler.send("UnsupportedFeature",{featureId:o.UNSUPPORTED_FEATURES.errorFontToUnicode}),(0,o.warn)('readToUnicode - ignoring ToUnicode data: "'.concat(t,'".')),null;throw t})):Promise.resolve(null)},readCidToGidMap:function readCidToGidMap(t,r){for(var a=[],i=0,o=t.length;i<o;i++){var l=t[i++]<<8|t[i],c=i>>1;(0!==l||r.has(c))&&(a[c]=l)}return a},extractWidths:function PartialEvaluator_extractWidths(t,r,a){var i,o,l,h,d,p,m,g,b=this.xref,y=[],v=0,S=[];if(a.composite){if(v=t.has("DW")?t.get("DW"):1e3,g=t.get("W"))for(o=0,l=g.length;o<l;o++)if(p=b.fetchIfRef(g[o++]),m=b.fetchIfRef(g[o]),Array.isArray(m))for(h=0,d=m.length;h<d;h++)y[p++]=b.fetchIfRef(m[h]);else{var k=b.fetchIfRef(g[++o]);for(h=p;h<=m;h++)y[h]=k}if(a.vertical){var w=t.getArray("DW2")||[880,-1e3];if(i=[w[1],.5*v,w[0]],w=t.get("W2"))for(o=0,l=w.length;o<l;o++)if(p=b.fetchIfRef(w[o++]),m=b.fetchIfRef(w[o]),Array.isArray(m))for(h=0,d=m.length;h<d;h++)S[p++]=[b.fetchIfRef(m[h++]),b.fetchIfRef(m[h++]),b.fetchIfRef(m[h])];else{var C=[b.fetchIfRef(w[++o]),b.fetchIfRef(w[++o]),b.fetchIfRef(w[++o])];for(h=p;h<=m;h++)S[h]=C}}}else{var x=a.firstChar;if(g=t.get("Widths")){for(h=x,o=0,l=g.length;o<l;o++)y[h++]=b.fetchIfRef(g[o]);v=parseFloat(r.get("MissingWidth"))||0}else{var _=t.get("BaseFont");if((0,c.isName)(_)){var A=this.getBaseFontMetrics(_.name);y=this.buildCharCodeToWidth(A.widths,a),v=A.defaultWidth}}}var R=!0,T=v;for(var I in y){var P=y[I];if(P)if(T){if(T!==P){R=!1;break}}else T=P}R&&(a.flags|=u.FontFlags.FixedPitch),a.defaultWidth=v,a.widths=y,a.defaultVMetrics=i,a.vmetrics=S},isSerifFont:function PartialEvaluator_isSerifFont(t){var r=t.split("-")[0];return r in(0,m.getSerifFonts)()||-1!==r.search(/serif/gi)},getBaseFontMetrics:function PartialEvaluator_getBaseFontMetrics(t){var r=0,a=[],i=!1,l=(0,m.getStdFontMap)()[t]||t,c=(0,w.getMetrics)();l in c||(l=this.isSerifFont(t)?"Times-Roman":"Helvetica");var u=c[l];return(0,o.isNum)(u)?(r=u,i=!0):a=u(),{defaultWidth:r,monospace:i,widths:a}},buildCharCodeToWidth:function PartialEvaluator_bulildCharCodeToWidth(t,r){for(var a=Object.create(null),i=r.differences,o=r.defaultEncoding,l=0;l<256;l++)l in i&&t[i[l]]?a[l]=t[i[l]]:l in o&&t[o[l]]&&(a[l]=t[o[l]]);return a},preEvaluateFont:function PartialEvaluator_preEvaluateFont(t){var r=t,a=t.get("Subtype");if(!(0,c.isName)(a))throw new o.FormatError("invalid font Subtype");var i,l=!1;if("Type0"===a.name){var u=t.get("DescendantFonts");if(!u)throw new o.FormatError("Descendant fonts are not specified");if(a=(t=Array.isArray(u)?this.xref.fetchIfRef(u[0]):u).get("Subtype"),!(0,c.isName)(a))throw new o.FormatError("invalid font Subtype");l=!0}var h=t.get("FontDescriptor");if(h){var d=new _.MurmurHash3_64,p=r.getRaw("Encoding");if((0,c.isName)(p))d.update(p.name);else if((0,c.isRef)(p))d.update(p.toString());else if((0,c.isDict)(p))for(var m=p.getKeys(),g=0,b=m.length;g<b;g++){var y=p.getRaw(m[g]);if((0,c.isName)(y))d.update(y.name);else if((0,c.isRef)(y))d.update(y.toString());else if(Array.isArray(y)){for(var v=y.length,S=new Array(v),k=0;k<v;k++){var w=y[k];(0,c.isName)(w)?S[k]=w.name:((0,o.isNum)(w)||(0,c.isRef)(w))&&(S[k]=w.toString())}d.update(S.join())}}var C=t.get("FirstChar")||0,x=t.get("LastChar")||(l?65535:255);d.update("".concat(C,"-").concat(x));var A=t.get("ToUnicode")||r.get("ToUnicode");if((0,c.isStream)(A)){var R=A.str||A;i=R.buffer?new Uint8Array(R.buffer.buffer,0,R.bufferLength):new Uint8Array(R.bytes.buffer,R.start,R.end-R.start),d.update(i)}else(0,c.isName)(A)&&d.update(A.name);var T=t.get("Widths")||r.get("Widths");T&&(i=new Uint8Array(new Uint32Array(T).buffer),d.update(i))}return{descriptor:h,dict:t,baseDict:r,composite:l,type:a.name,hash:d?d.hexdigest():""}},translateFont:function PartialEvaluator_translateFont(t){var r,a=this,i=t.baseDict,h=t.dict,d=t.composite,p=t.descriptor,g=t.type,b=d?65535:255,y=h.get("FirstChar")||0,v=h.get("LastChar")||b;if(!p){if("Type3"!==g){var S=h.get("BaseFont");if(!(0,c.isName)(S))throw new o.FormatError("Base font is not specified");S=S.name.replace(/[,_]/g,"-");var k=this.getBaseFontMetrics(S),w=S.split("-")[0],C=(this.isSerifFont(w)?u.FontFlags.Serif:0)|(k.monospace?u.FontFlags.FixedPitch:0)|((0,m.getSymbolsFonts)()[w]?u.FontFlags.Symbolic:u.FontFlags.Nonsymbolic);r={type:g,name:S,widths:k.widths,defaultWidth:k.defaultWidth,flags:C,firstChar:y,lastChar:v};var x=h.get("Widths");return this.extractDataStructures(h,h,r).then((function(t){if(x){for(var r=[],i=y,o=0,l=x.length;o<l;o++)r[i++]=a.xref.fetchIfRef(x[o]);t.widths=r}else t.widths=a.buildCharCodeToWidth(k.widths,t);return new u.Font(S,null,t)}))}(p=new c.Dict(null)).set("FontName",c.Name.get(g)),p.set("FontBBox",h.getArray("FontBBox")||[0,0,0,0])}var _=p.get("FontName"),A=h.get("BaseFont");if((0,o.isString)(_)&&(_=c.Name.get(_)),(0,o.isString)(A)&&(A=c.Name.get(A)),"Type3"!==g){var R=_&&_.name,T=A&&A.name;R!==T&&((0,o.info)("The FontDescriptor's FontName is \"".concat(R,'" but ')+"should be the same as the Font's BaseFont \"".concat(T,'".')),R&&T&&T.startsWith(R)&&(_=A))}if(_=_||A,!(0,c.isName)(_))throw new o.FormatError("invalid font name");var I,P=p.get("FontFile","FontFile2","FontFile3");if(P&&P.dict){var O=P.dict.get("Subtype");O&&(O=O.name);var E=P.dict.get("Length1"),B=P.dict.get("Length2"),D=P.dict.get("Length3")}if(r={type:g,name:_.name,subtype:O,file:P,length1:E,length2:B,length3:D,loadedName:i.loadedName,composite:d,fixedPitch:!1,fontMatrix:h.getArray("FontMatrix")||o.FONT_IDENTITY_MATRIX,firstChar:y||0,lastChar:v||b,bbox:p.getArray("FontBBox"),ascent:p.get("Ascent"),descent:p.get("Descent"),xHeight:p.get("XHeight"),capHeight:p.get("CapHeight"),flags:p.get("Flags"),italicAngle:p.get("ItalicAngle"),isType3Font:!1},d){var M=i.get("Encoding");(0,c.isName)(M)&&(r.cidEncoding=M.name),I=l.CMapFactory.create({encoding:M,fetchBuiltInCMap:this.fetchBuiltInCMap,useCMap:null}).then((function(t){r.cMap=t,r.vertical=r.cMap.vertical}))}else I=Promise.resolve(void 0);return I.then((function(){return a.extractDataStructures(h,i,r)})).then((function(t){return a.extractWidths(h,p,t),"Type3"===g&&(t.isType3Font=!0),new u.Font(_.name,P,t)}))}},PartialEvaluator.buildFontPaths=function(t,r,a){function buildPath(r){t.renderer.hasBuiltPath(r)||a.send("commonobj",["".concat(t.loadedName,"_path_").concat(r),"FontPath",t.renderer.getPathJs(r)])}var i,o=_createForOfIteratorHelper(r);try{for(o.s();!(i=o.n()).done;){var l=i.value;buildPath(l.fontChar);var c=l.accent;c&&c.fontChar&&buildPath(c.fontChar)}}catch(t){o.e(t)}finally{o.f()}},PartialEvaluator.getFallbackFontDict=function(){if(this._fallbackFontDict)return this._fallbackFontDict;var t=new c.Dict;return t.set("BaseFont",c.Name.get("PDFJS-FallbackFont")),t.set("Type",c.Name.get("FallbackType")),t.set("Subtype",c.Name.get("FallbackType")),t.set("Encoding",c.Name.get("WinAnsiEncoding")),this._fallbackFontDict=t},PartialEvaluator}();r.PartialEvaluator=T;var I=function(){function TranslatedFont(t){var r=t.loadedName,a=t.font,i=t.dict,o=t.extraProperties,l=void 0!==o&&o;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,TranslatedFont),this.loadedName=r,this.font=a,this.dict=i,this._extraProperties=l,this.type3Loaded=null,this.sent=!1}return function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}(TranslatedFont,[{key:"send",value:function send(t){this.sent||(this.sent=!0,t.send("commonobj",[this.loadedName,"Font",this.font.exportData(this._extraProperties)]))}},{key:"fallback",value:function fallback(t){if(this.font.data){this.font.disableFontFace=!0;var r=this.font.glyphCacheValues;T.buildFontPaths(this.font,r,t)}}},{key:"loadType3Data",value:function loadType3Data(t,r,a,i){if(!this.font.isType3Font)throw new Error("Must be a Type3 font.");if(this.type3Loaded)return this.type3Loaded;var l=Object.create(t.options);l.ignoreErrors=!1;var c=t.clone(l);c.parsingType3Font=!0;for(var u=this.font,h=Promise.resolve(),d=this.dict.get("CharProcs"),p=this.dict.get("Resources")||r,m=d.getKeys(),g=Object.create(null),b=function _loop2(){var t=m[y];h=h.then((function(){var r=d.get(t),l=new A.OperatorList;return c.getOperatorList({stream:r,task:i,resources:p,operatorList:l}).then((function(){g[t]=l.getIR(),a.addDependencies(l.dependencies)})).catch((function(r){(0,o.warn)('Type3 font resource "'.concat(t,'" is not available.'));var a=new A.OperatorList;g[t]=a.getIR()}))}))},y=0,v=m.length;y<v;++y)b();return this.type3Loaded=h.then((function(){u.charProcOperatorList=g})),this.type3Loaded}}]),TranslatedFont}(),P=function StateManagerClosure(){function StateManager(t){this.state=t,this.stateStack=[]}return StateManager.prototype={save:function save(){var t=this.state;this.stateStack.push(this.state),this.state=t.clone()},restore:function restore(){var t=this.stateStack.pop();t&&(this.state=t)},transform:function transform(t){this.state.ctm=o.Util.transform(this.state.ctm,t)}},StateManager}(),O=function TextStateClosure(){function TextState(){this.ctm=new Float32Array(o.IDENTITY_MATRIX),this.fontName=null,this.fontSize=0,this.font=null,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.textMatrix=o.IDENTITY_MATRIX.slice(),this.textLineMatrix=o.IDENTITY_MATRIX.slice(),this.charSpacing=0,this.wordSpacing=0,this.leading=0,this.textHScale=1,this.textRise=0}return TextState.prototype={setTextMatrix:function TextState_setTextMatrix(t,r,a,i,o,l){var c=this.textMatrix;c[0]=t,c[1]=r,c[2]=a,c[3]=i,c[4]=o,c[5]=l},setTextLineMatrix:function TextState_setTextMatrix(t,r,a,i,o,l){var c=this.textLineMatrix;c[0]=t,c[1]=r,c[2]=a,c[3]=i,c[4]=o,c[5]=l},translateTextMatrix:function TextState_translateTextMatrix(t,r){var a=this.textMatrix;a[4]=a[0]*t+a[2]*r+a[4],a[5]=a[1]*t+a[3]*r+a[5]},translateTextLineMatrix:function TextState_translateTextMatrix(t,r){var a=this.textLineMatrix;a[4]=a[0]*t+a[2]*r+a[4],a[5]=a[1]*t+a[3]*r+a[5]},calcTextLineMatrixAdvance:function TextState_calcTextLineMatrixAdvance(t,r,a,i,o,l){var c=this.font;if(!c)return null;var u=this.textLineMatrix;if(t!==u[0]||r!==u[1]||a!==u[2]||i!==u[3])return null;var h=o-u[4],d=l-u[5];if(c.vertical&&0!==h||!c.vertical&&0!==d)return null;var p,m,g=t*i-r*a;return c.vertical?(p=-d*a/g,m=d*t/g):(p=h*i/g,m=-h*r/g),{width:p,height:m,value:c.vertical?m:p}},calcRenderMatrix:function TextState_calcRendeMatrix(t){var r=[this.fontSize*this.textHScale,0,0,this.fontSize,0,this.textRise];return o.Util.transform(t,o.Util.transform(this.textMatrix,r))},carriageReturn:function TextState_carriageReturn(){this.translateTextLineMatrix(0,-this.leading),this.textMatrix=this.textLineMatrix.slice()},clone:function TextState_clone(){var t=Object.create(this);return t.textMatrix=this.textMatrix.slice(),t.textLineMatrix=this.textLineMatrix.slice(),t.fontMatrix=this.fontMatrix.slice(),t}},TextState}(),E=function EvalStateClosure(){function EvalState(){this.ctm=new Float32Array(o.IDENTITY_MATRIX),this.font=null,this.textRenderingMode=o.TextRenderingMode.FILL,this.fillColorSpace=v.ColorSpace.singletons.gray,this.strokeColorSpace=v.ColorSpace.singletons.gray}return EvalState.prototype={clone:function CanvasExtraState_clone(){return Object.create(this)}},EvalState}(),B=function EvaluatorPreprocessorClosure(){var t=(0,d.getLookupTableFactory)((function(t){t.w={id:o.OPS.setLineWidth,numArgs:1,variableArgs:!1},t.J={id:o.OPS.setLineCap,numArgs:1,variableArgs:!1},t.j={id:o.OPS.setLineJoin,numArgs:1,variableArgs:!1},t.M={id:o.OPS.setMiterLimit,numArgs:1,variableArgs:!1},t.d={id:o.OPS.setDash,numArgs:2,variableArgs:!1},t.ri={id:o.OPS.setRenderingIntent,numArgs:1,variableArgs:!1},t.i={id:o.OPS.setFlatness,numArgs:1,variableArgs:!1},t.gs={id:o.OPS.setGState,numArgs:1,variableArgs:!1},t.q={id:o.OPS.save,numArgs:0,variableArgs:!1},t.Q={id:o.OPS.restore,numArgs:0,variableArgs:!1},t.cm={id:o.OPS.transform,numArgs:6,variableArgs:!1},t.m={id:o.OPS.moveTo,numArgs:2,variableArgs:!1},t.l={id:o.OPS.lineTo,numArgs:2,variableArgs:!1},t.c={id:o.OPS.curveTo,numArgs:6,variableArgs:!1},t.v={id:o.OPS.curveTo2,numArgs:4,variableArgs:!1},t.y={id:o.OPS.curveTo3,numArgs:4,variableArgs:!1},t.h={id:o.OPS.closePath,numArgs:0,variableArgs:!1},t.re={id:o.OPS.rectangle,numArgs:4,variableArgs:!1},t.S={id:o.OPS.stroke,numArgs:0,variableArgs:!1},t.s={id:o.OPS.closeStroke,numArgs:0,variableArgs:!1},t.f={id:o.OPS.fill,numArgs:0,variableArgs:!1},t.F={id:o.OPS.fill,numArgs:0,variableArgs:!1},t["f*"]={id:o.OPS.eoFill,numArgs:0,variableArgs:!1},t.B={id:o.OPS.fillStroke,numArgs:0,variableArgs:!1},t["B*"]={id:o.OPS.eoFillStroke,numArgs:0,variableArgs:!1},t.b={id:o.OPS.closeFillStroke,numArgs:0,variableArgs:!1},t["b*"]={id:o.OPS.closeEOFillStroke,numArgs:0,variableArgs:!1},t.n={id:o.OPS.endPath,numArgs:0,variableArgs:!1},t.W={id:o.OPS.clip,numArgs:0,variableArgs:!1},t["W*"]={id:o.OPS.eoClip,numArgs:0,variableArgs:!1},t.BT={id:o.OPS.beginText,numArgs:0,variableArgs:!1},t.ET={id:o.OPS.endText,numArgs:0,variableArgs:!1},t.Tc={id:o.OPS.setCharSpacing,numArgs:1,variableArgs:!1},t.Tw={id:o.OPS.setWordSpacing,numArgs:1,variableArgs:!1},t.Tz={id:o.OPS.setHScale,numArgs:1,variableArgs:!1},t.TL={id:o.OPS.setLeading,numArgs:1,variableArgs:!1},t.Tf={id:o.OPS.setFont,numArgs:2,variableArgs:!1},t.Tr={id:o.OPS.setTextRenderingMode,numArgs:1,variableArgs:!1},t.Ts={id:o.OPS.setTextRise,numArgs:1,variableArgs:!1},t.Td={id:o.OPS.moveText,numArgs:2,variableArgs:!1},t.TD={id:o.OPS.setLeadingMoveText,numArgs:2,variableArgs:!1},t.Tm={id:o.OPS.setTextMatrix,numArgs:6,variableArgs:!1},t["T*"]={id:o.OPS.nextLine,numArgs:0,variableArgs:!1},t.Tj={id:o.OPS.showText,numArgs:1,variableArgs:!1},t.TJ={id:o.OPS.showSpacedText,numArgs:1,variableArgs:!1},t["'"]={id:o.OPS.nextLineShowText,numArgs:1,variableArgs:!1},t['"']={id:o.OPS.nextLineSetSpacingShowText,numArgs:3,variableArgs:!1},t.d0={id:o.OPS.setCharWidth,numArgs:2,variableArgs:!1},t.d1={id:o.OPS.setCharWidthAndBounds,numArgs:6,variableArgs:!1},t.CS={id:o.OPS.setStrokeColorSpace,numArgs:1,variableArgs:!1},t.cs={id:o.OPS.setFillColorSpace,numArgs:1,variableArgs:!1},t.SC={id:o.OPS.setStrokeColor,numArgs:4,variableArgs:!0},t.SCN={id:o.OPS.setStrokeColorN,numArgs:33,variableArgs:!0},t.sc={id:o.OPS.setFillColor,numArgs:4,variableArgs:!0},t.scn={id:o.OPS.setFillColorN,numArgs:33,variableArgs:!0},t.G={id:o.OPS.setStrokeGray,numArgs:1,variableArgs:!1},t.g={id:o.OPS.setFillGray,numArgs:1,variableArgs:!1},t.RG={id:o.OPS.setStrokeRGBColor,numArgs:3,variableArgs:!1},t.rg={id:o.OPS.setFillRGBColor,numArgs:3,variableArgs:!1},t.K={id:o.OPS.setStrokeCMYKColor,numArgs:4,variableArgs:!1},t.k={id:o.OPS.setFillCMYKColor,numArgs:4,variableArgs:!1},t.sh={id:o.OPS.shadingFill,numArgs:1,variableArgs:!1},t.BI={id:o.OPS.beginInlineImage,numArgs:0,variableArgs:!1},t.ID={id:o.OPS.beginImageData,numArgs:0,variableArgs:!1},t.EI={id:o.OPS.endInlineImage,numArgs:1,variableArgs:!1},t.Do={id:o.OPS.paintXObject,numArgs:1,variableArgs:!1},t.MP={id:o.OPS.markPoint,numArgs:1,variableArgs:!1},t.DP={id:o.OPS.markPointProps,numArgs:2,variableArgs:!1},t.BMC={id:o.OPS.beginMarkedContent,numArgs:1,variableArgs:!1},t.BDC={id:o.OPS.beginMarkedContentProps,numArgs:2,variableArgs:!1},t.EMC={id:o.OPS.endMarkedContent,numArgs:0,variableArgs:!1},t.BX={id:o.OPS.beginCompat,numArgs:0,variableArgs:!1},t.EX={id:o.OPS.endCompat,numArgs:0,variableArgs:!1},t.BM=null,t.BD=null,t.true=null,t.fa=null,t.fal=null,t.fals=null,t.false=null,t.nu=null,t.nul=null,t.null=null}));function EvaluatorPreprocessor(r,a,i){this.opMap=t(),this.parser=new b.Parser({lexer:new b.Lexer(r,this.opMap),xref:a}),this.stateManager=i,this.nonProcessedArgs=[],this._numInvalidPathOPS=0}return EvaluatorPreprocessor.prototype={get savedStatesDepth(){return this.stateManager.stateStack.length},read:function EvaluatorPreprocessor_read(t){for(var r=t.args;;){var a=this.parser.getObj();if(a instanceof c.Cmd){var i=a.cmd,l=this.opMap[i];if(!l){(0,o.warn)('Unknown command "'.concat(i,'".'));continue}var u=l.id,h=l.numArgs,d=null!==r?r.length:0;if(l.variableArgs)d>h&&(0,o.info)("Command ".concat(i,": expected [0, ").concat(h,"] args, ")+"but received ".concat(d," args."));else{if(d!==h){for(var p=this.nonProcessedArgs;d>h;)p.push(r.shift()),d--;for(;d<h&&0!==p.length;)null===r&&(r=[]),r.unshift(p.pop()),d++}if(d<h){var m="command ".concat(i,": expected ").concat(h," args, ")+"but received ".concat(d," args.");if(u>=o.OPS.moveTo&&u<=o.OPS.endPath&&++this._numInvalidPathOPS>20)throw new o.FormatError("Invalid ".concat(m));(0,o.warn)("Skipping ".concat(m)),null!==r&&(r.length=0);continue}}return this.preprocessCommand(u,r),t.fn=u,t.args=r,!0}if(a===c.EOF)return!1;if(null!==a&&(null===r&&(r=[]),r.push(a),r.length>33))throw new o.FormatError("Too many arguments")}},preprocessCommand:function EvaluatorPreprocessor_preprocessCommand(t,r){switch(0|t){case o.OPS.save:this.stateManager.save();break;case o.OPS.restore:this.stateManager.restore();break;case o.OPS.transform:this.stateManager.transform(r)}}},EvaluatorPreprocessor}()},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CMapFactory=r.IdentityCMap=r.CMap=void 0;var i=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(2)),o=a(5),l=a(198),c=a(204),u=a(201),h=a(205);function asyncGeneratorStep(t,r,a,i,o,l,c){try{var u=t[l](c),h=u.value}catch(t){return void a(t)}u.done?r(h):Promise.resolve(h).then(i,o)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _setPrototypeOf(t,r){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t})(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var a,i=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}var d=["Adobe-GB1-UCS2","Adobe-CNS1-UCS2","Adobe-Japan1-UCS2","Adobe-Korea1-UCS2","78-EUC-H","78-EUC-V","78-H","78-RKSJ-H","78-RKSJ-V","78-V","78ms-RKSJ-H","78ms-RKSJ-V","83pv-RKSJ-H","90ms-RKSJ-H","90ms-RKSJ-V","90msp-RKSJ-H","90msp-RKSJ-V","90pv-RKSJ-H","90pv-RKSJ-V","Add-H","Add-RKSJ-H","Add-RKSJ-V","Add-V","Adobe-CNS1-0","Adobe-CNS1-1","Adobe-CNS1-2","Adobe-CNS1-3","Adobe-CNS1-4","Adobe-CNS1-5","Adobe-CNS1-6","Adobe-GB1-0","Adobe-GB1-1","Adobe-GB1-2","Adobe-GB1-3","Adobe-GB1-4","Adobe-GB1-5","Adobe-Japan1-0","Adobe-Japan1-1","Adobe-Japan1-2","Adobe-Japan1-3","Adobe-Japan1-4","Adobe-Japan1-5","Adobe-Japan1-6","Adobe-Korea1-0","Adobe-Korea1-1","Adobe-Korea1-2","B5-H","B5-V","B5pc-H","B5pc-V","CNS-EUC-H","CNS-EUC-V","CNS1-H","CNS1-V","CNS2-H","CNS2-V","ETHK-B5-H","ETHK-B5-V","ETen-B5-H","ETen-B5-V","ETenms-B5-H","ETenms-B5-V","EUC-H","EUC-V","Ext-H","Ext-RKSJ-H","Ext-RKSJ-V","Ext-V","GB-EUC-H","GB-EUC-V","GB-H","GB-V","GBK-EUC-H","GBK-EUC-V","GBK2K-H","GBK2K-V","GBKp-EUC-H","GBKp-EUC-V","GBT-EUC-H","GBT-EUC-V","GBT-H","GBT-V","GBTpc-EUC-H","GBTpc-EUC-V","GBpc-EUC-H","GBpc-EUC-V","H","HKdla-B5-H","HKdla-B5-V","HKdlb-B5-H","HKdlb-B5-V","HKgccs-B5-H","HKgccs-B5-V","HKm314-B5-H","HKm314-B5-V","HKm471-B5-H","HKm471-B5-V","HKscs-B5-H","HKscs-B5-V","Hankaku","Hiragana","KSC-EUC-H","KSC-EUC-V","KSC-H","KSC-Johab-H","KSC-Johab-V","KSC-V","KSCms-UHC-H","KSCms-UHC-HW-H","KSCms-UHC-HW-V","KSCms-UHC-V","KSCpc-EUC-H","KSCpc-EUC-V","Katakana","NWP-H","NWP-V","RKSJ-H","RKSJ-V","Roman","UniCNS-UCS2-H","UniCNS-UCS2-V","UniCNS-UTF16-H","UniCNS-UTF16-V","UniCNS-UTF32-H","UniCNS-UTF32-V","UniCNS-UTF8-H","UniCNS-UTF8-V","UniGB-UCS2-H","UniGB-UCS2-V","UniGB-UTF16-H","UniGB-UTF16-V","UniGB-UTF32-H","UniGB-UTF32-V","UniGB-UTF8-H","UniGB-UTF8-V","UniJIS-UCS2-H","UniJIS-UCS2-HW-H","UniJIS-UCS2-HW-V","UniJIS-UCS2-V","UniJIS-UTF16-H","UniJIS-UTF16-V","UniJIS-UTF32-H","UniJIS-UTF32-V","UniJIS-UTF8-H","UniJIS-UTF8-V","UniJIS2004-UTF16-H","UniJIS2004-UTF16-V","UniJIS2004-UTF32-H","UniJIS2004-UTF32-V","UniJIS2004-UTF8-H","UniJIS2004-UTF8-V","UniJISPro-UCS2-HW-V","UniJISPro-UCS2-V","UniJISPro-UTF8-V","UniJISX0213-UTF32-H","UniJISX0213-UTF32-V","UniJISX02132004-UTF32-H","UniJISX02132004-UTF32-V","UniKS-UCS2-H","UniKS-UCS2-V","UniKS-UTF16-H","UniKS-UTF16-V","UniKS-UTF32-H","UniKS-UTF32-V","UniKS-UTF8-H","UniKS-UTF8-V","V","WP-Symbol"],p=Math.pow(2,24)-1,m=function(){function CMap(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];_classCallCheck(this,CMap),this.codespaceRanges=[[],[],[],[]],this.numCodespaceRanges=0,this._map=[],this.name="",this.vertical=!1,this.useCMap=null,this.builtInCMap=t}return _createClass(CMap,[{key:"addCodespaceRange",value:function addCodespaceRange(t,r,a){this.codespaceRanges[t-1].push(r,a),this.numCodespaceRanges++}},{key:"mapCidRange",value:function mapCidRange(t,r,a){if(r-t>p)throw new Error("mapCidRange - ignoring data above MAX_MAP_RANGE.");for(;t<=r;)this._map[t++]=a++}},{key:"mapBfRange",value:function mapBfRange(t,r,a){if(r-t>p)throw new Error("mapBfRange - ignoring data above MAX_MAP_RANGE.");for(var i=a.length-1;t<=r;)this._map[t++]=a,a=a.substring(0,i)+String.fromCharCode(a.charCodeAt(i)+1)}},{key:"mapBfRangeToArray",value:function mapBfRangeToArray(t,r,a){if(r-t>p)throw new Error("mapBfRangeToArray - ignoring data above MAX_MAP_RANGE.");for(var i=a.length,o=0;t<=r&&o<i;)this._map[t]=a[o++],++t}},{key:"mapOne",value:function mapOne(t,r){this._map[t]=r}},{key:"lookup",value:function lookup(t){return this._map[t]}},{key:"contains",value:function contains(t){return void 0!==this._map[t]}},{key:"forEach",value:function forEach(t){var r=this._map,a=r.length;if(a<=65536)for(var i=0;i<a;i++)void 0!==r[i]&&t(i,r[i]);else for(var o in r)t(o,r[o])}},{key:"charCodeOf",value:function charCodeOf(t){var r=this._map;if(r.length<=65536)return r.indexOf(t);for(var a in r)if(r[a]===t)return 0|a;return-1}},{key:"getMap",value:function getMap(){return this._map}},{key:"readCharCode",value:function readCharCode(t,r,a){for(var i=0,o=this.codespaceRanges,l=0,c=o.length;l<c;l++){i=(i<<8|t.charCodeAt(r+l))>>>0;for(var u=o[l],h=0,d=u.length;h<d;){var p=u[h++],m=u[h++];if(i>=p&&i<=m)return a.charcode=i,void(a.length=l+1)}}a.charcode=0,a.length=1}},{key:"length",get:function get(){return this._map.length}},{key:"isIdentityCMap",get:function get(){if("Identity-H"!==this.name&&"Identity-V"!==this.name)return!1;if(65536!==this._map.length)return!1;for(var t=0;t<65536;t++)if(this._map[t]!==t)return!1;return!0}}]),CMap}();r.CMap=m;var g=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}(IdentityCMap,t);var r=_createSuper(IdentityCMap);function IdentityCMap(t,a){var i;return _classCallCheck(this,IdentityCMap),(i=r.call(this)).vertical=t,i.addCodespaceRange(a,0,65535),i}return _createClass(IdentityCMap,[{key:"mapCidRange",value:function mapCidRange(t,r,a){(0,o.unreachable)("should not call mapCidRange")}},{key:"mapBfRange",value:function mapBfRange(t,r,a){(0,o.unreachable)("should not call mapBfRange")}},{key:"mapBfRangeToArray",value:function mapBfRangeToArray(t,r,a){(0,o.unreachable)("should not call mapBfRangeToArray")}},{key:"mapOne",value:function mapOne(t,r){(0,o.unreachable)("should not call mapCidOne")}},{key:"lookup",value:function lookup(t){return Number.isInteger(t)&&t<=65535?t:void 0}},{key:"contains",value:function contains(t){return Number.isInteger(t)&&t<=65535}},{key:"forEach",value:function forEach(t){for(var r=0;r<=65535;r++)t(r,r)}},{key:"charCodeOf",value:function charCodeOf(t){return Number.isInteger(t)&&t<=65535?t:-1}},{key:"getMap",value:function getMap(){for(var t=new Array(65536),r=0;r<=65535;r++)t[r]=r;return t}},{key:"length",get:function get(){return 65536}},{key:"isIdentityCMap",get:function get(){(0,o.unreachable)("should not access .isIdentityCMap")}}]),IdentityCMap}(m);r.IdentityCMap=g;var b=function BinaryCMapReaderClosure(){function hexToInt(t,r){for(var a=0,i=0;i<=r;i++)a=a<<8|t[i];return a>>>0}function hexToStr(t,r){return 1===r?String.fromCharCode(t[0],t[1]):3===r?String.fromCharCode(t[0],t[1],t[2],t[3]):String.fromCharCode.apply(null,t.subarray(0,r+1))}function addHex(t,r,a){for(var i=0,o=a;o>=0;o--)i+=t[o]+r[o],t[o]=255&i,i>>=8}function incHex(t,r){for(var a=1,i=r;i>=0&&a>0;i--)a+=t[i],t[i]=255&a,a>>=8}var t=16;function BinaryCMapStream(t){this.buffer=t,this.pos=0,this.end=t.length,this.tmpBuf=new Uint8Array(19)}function BinaryCMapReader(){}return BinaryCMapStream.prototype={readByte:function readByte(){return this.pos>=this.end?-1:this.buffer[this.pos++]},readNumber:function readNumber(){var t,r=0;do{var a=this.readByte();if(a<0)throw new o.FormatError("unexpected EOF in bcmap");t=!(128&a),r=r<<7|127&a}while(!t);return r},readSigned:function readSigned(){var t=this.readNumber();return 1&t?~(t>>>1):t>>>1},readHex:function readHex(t,r){t.set(this.buffer.subarray(this.pos,this.pos+r+1)),this.pos+=r+1},readHexNumber:function readHexNumber(t,r){var a,i=this.tmpBuf,l=0;do{var c=this.readByte();if(c<0)throw new o.FormatError("unexpected EOF in bcmap");a=!(128&c),i[l++]=127&c}while(!a);for(var u=r,h=0,d=0;u>=0;){for(;d<8&&i.length>0;)h=i[--l]<<d|h,d+=7;t[u]=255&h,u--,h>>=8,d-=8}},readHexSigned:function readHexSigned(t,r){this.readHexNumber(t,r);for(var a=1&t[r]?255:0,i=0,o=0;o<=r;o++)i=(1&i)<<8|t[o],t[o]=i>>1^a},readString:function readString(){for(var t=this.readNumber(),r="",a=0;a<t;a++)r+=String.fromCharCode(this.readNumber());return r}},BinaryCMapReader.prototype={process:function processBinaryCMap(r,a,i){return new Promise((function(o,l){var c=new BinaryCMapStream(r),u=c.readByte();a.vertical=!!(1&u);for(var h,d,p=null,m=new Uint8Array(t),g=new Uint8Array(t),b=new Uint8Array(t),y=new Uint8Array(t),v=new Uint8Array(t);(d=c.readByte())>=0;){var S=d>>5;if(7!==S){var k=!!(16&d),w=15&d;if(w+1>t)throw new Error("processBinaryCMap: Invalid dataSize.");var C,x=c.readNumber();switch(S){case 0:for(c.readHex(m,w),c.readHexNumber(g,w),addHex(g,m,w),a.addCodespaceRange(w+1,hexToInt(m,w),hexToInt(g,w)),C=1;C<x;C++)incHex(g,w),c.readHexNumber(m,w),addHex(m,g,w),c.readHexNumber(g,w),addHex(g,m,w),a.addCodespaceRange(w+1,hexToInt(m,w),hexToInt(g,w));break;case 1:for(c.readHex(m,w),c.readHexNumber(g,w),addHex(g,m,w),c.readNumber(),C=1;C<x;C++)incHex(g,w),c.readHexNumber(m,w),addHex(m,g,w),c.readHexNumber(g,w),addHex(g,m,w),c.readNumber();break;case 2:for(c.readHex(b,w),h=c.readNumber(),a.mapOne(hexToInt(b,w),h),C=1;C<x;C++)incHex(b,w),k||(c.readHexNumber(v,w),addHex(b,v,w)),h=c.readSigned()+(h+1),a.mapOne(hexToInt(b,w),h);break;case 3:for(c.readHex(m,w),c.readHexNumber(g,w),addHex(g,m,w),h=c.readNumber(),a.mapCidRange(hexToInt(m,w),hexToInt(g,w),h),C=1;C<x;C++)incHex(g,w),k?m.set(g):(c.readHexNumber(m,w),addHex(m,g,w)),c.readHexNumber(g,w),addHex(g,m,w),h=c.readNumber(),a.mapCidRange(hexToInt(m,w),hexToInt(g,w),h);break;case 4:for(c.readHex(b,1),c.readHex(y,w),a.mapOne(hexToInt(b,1),hexToStr(y,w)),C=1;C<x;C++)incHex(b,1),k||(c.readHexNumber(v,1),addHex(b,v,1)),incHex(y,w),c.readHexSigned(v,w),addHex(y,v,w),a.mapOne(hexToInt(b,1),hexToStr(y,w));break;case 5:for(c.readHex(m,1),c.readHexNumber(g,1),addHex(g,m,1),c.readHex(y,w),a.mapBfRange(hexToInt(m,1),hexToInt(g,1),hexToStr(y,w)),C=1;C<x;C++)incHex(g,1),k?m.set(g):(c.readHexNumber(m,1),addHex(m,g,1)),c.readHexNumber(g,1),addHex(g,m,1),c.readHex(y,w),a.mapBfRange(hexToInt(m,1),hexToInt(g,1),hexToStr(y,w));break;default:return void l(new Error("processBinaryCMap: Unknown type: "+S))}}else switch(31&d){case 0:c.readString();break;case 1:p=c.readString()}}o(p?i(p):a)}))}},BinaryCMapReader}(),y=function CMapFactoryClosure(){function strToInt(t){for(var r=0,a=0;a<t.length;a++)r=r<<8|t.charCodeAt(a);return r>>>0}function expectString(t){if(!(0,o.isString)(t))throw new o.FormatError("Malformed CMap: expected string.")}function expectInt(t){if(!Number.isInteger(t))throw new o.FormatError("Malformed CMap: expected int.")}function parseBfChar(t,r){for(;;){var a=r.getObj();if((0,l.isEOF)(a))break;if((0,l.isCmd)(a,"endbfchar"))return;expectString(a);var i=strToInt(a);expectString(a=r.getObj());var o=a;t.mapOne(i,o)}}function parseBfRange(t,r){for(;;){var a=r.getObj();if((0,l.isEOF)(a))break;if((0,l.isCmd)(a,"endbfrange"))return;expectString(a);var i=strToInt(a);expectString(a=r.getObj());var c=strToInt(a);if(a=r.getObj(),Number.isInteger(a)||(0,o.isString)(a)){var u=Number.isInteger(a)?String.fromCharCode(a):a;t.mapBfRange(i,c,u)}else{if(!(0,l.isCmd)(a,"["))break;a=r.getObj();for(var h=[];!(0,l.isCmd)(a,"]")&&!(0,l.isEOF)(a);)h.push(a),a=r.getObj();t.mapBfRangeToArray(i,c,h)}}throw new o.FormatError("Invalid bf range.")}function parseCidChar(t,r){for(;;){var a=r.getObj();if((0,l.isEOF)(a))break;if((0,l.isCmd)(a,"endcidchar"))return;expectString(a);var i=strToInt(a);expectInt(a=r.getObj());var o=a;t.mapOne(i,o)}}function parseCidRange(t,r){for(;;){var a=r.getObj();if((0,l.isEOF)(a))break;if((0,l.isCmd)(a,"endcidrange"))return;expectString(a);var i=strToInt(a);expectString(a=r.getObj());var o=strToInt(a);expectInt(a=r.getObj());var c=a;t.mapCidRange(i,o,c)}}function parseCodespaceRange(t,r){for(;;){var a=r.getObj();if((0,l.isEOF)(a))break;if((0,l.isCmd)(a,"endcodespacerange"))return;if(!(0,o.isString)(a))break;var i=strToInt(a);if(a=r.getObj(),!(0,o.isString)(a))break;var c=strToInt(a);t.addCodespaceRange(a.length,i,c)}throw new o.FormatError("Invalid codespace range.")}function parseWMode(t,r){var a=r.getObj();Number.isInteger(a)&&(t.vertical=!!a)}function parseCMapName(t,r){var a=r.getObj();(0,l.isName)(a)&&(0,o.isString)(a.name)&&(t.name=a.name)}function parseCMap(t,r,a,i){var c,h;e:for(;;)try{var d=r.getObj();if((0,l.isEOF)(d))break;if((0,l.isName)(d))"WMode"===d.name?parseWMode(t,r):"CMapName"===d.name&&parseCMapName(t,r),c=d;else if((0,l.isCmd)(d))switch(d.cmd){case"endcmap":break e;case"usecmap":(0,l.isName)(c)&&(h=c.name);break;case"begincodespacerange":parseCodespaceRange(t,r);break;case"beginbfchar":parseBfChar(t,r);break;case"begincidchar":parseCidChar(t,r);break;case"beginbfrange":parseBfRange(t,r);break;case"begincidrange":parseCidRange(t,r)}}catch(t){if(t instanceof u.MissingDataException)throw t;(0,o.warn)("Invalid cMap data: "+t);continue}return!i&&h&&(i=h),i?extendCMap(t,a,i):Promise.resolve(t)}function extendCMap(t,r,a){return createBuiltInCMap(a,r).then((function(r){if(t.useCMap=r,0===t.numCodespaceRanges){for(var a=t.useCMap.codespaceRanges,i=0;i<a.length;i++)t.codespaceRanges[i]=a[i].slice();t.numCodespaceRanges=t.useCMap.numCodespaceRanges}return t.useCMap.forEach((function(r,a){t.contains(r)||t.mapOne(r,t.useCMap.lookup(r))})),t}))}function createBuiltInCMap(t,r){return"Identity-H"===t?Promise.resolve(new g(!1,2)):"Identity-V"===t?Promise.resolve(new g(!0,2)):d.includes(t)?r?r(t).then((function(t){var a=t.cMapData,i=t.compressionType,l=new m(!0);if(i===o.CMapCompressionType.BINARY)return(new b).process(a,l,(function(t){return extendCMap(l,r,t)}));if(i===o.CMapCompressionType.NONE){var u=new c.Lexer(new h.Stream(a));return parseCMap(l,u,r,null)}return Promise.reject(new Error("TODO: Only BINARY/NONE CMap compression is currently supported."))})):Promise.reject(new Error("Built-in CMap parameters are not provided.")):Promise.reject(new Error("Unknown CMap name: "+t))}return{create:function create(t){return function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}(i.default.mark((function _callee(){var r,a,o,u,h;return i.default.wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:if(r=t.encoding,a=t.fetchBuiltInCMap,o=t.useCMap,!(0,l.isName)(r)){i.next=7;break}return i.abrupt("return",createBuiltInCMap(r.name,a));case 7:if(!(0,l.isStream)(r)){i.next=11;break}return u=new m,h=new c.Lexer(r),i.abrupt("return",parseCMap(u,h,a,o).then((function(t){return t.isIdentityCMap?createBuiltInCMap(t.name,a):t})));case 11:throw new Error("Encoding required.");case 12:case"end":return i.stop()}}),_callee)})))()}}}();r.CMapFactory=y},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getFontType=getFontType,r.IdentityToUnicodeMap=r.ToUnicodeMap=r.FontFlags=r.Font=r.ErrorFont=r.SEAC_ANALYSIS_ENABLED=void 0;var i=a(5),o=a(223),l=a(226),c=a(225),u=a(227),h=a(228),d=a(201),p=a(229),m=a(221),g=a(205),b=a(230);function _createForOfIteratorHelper(t,r){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){a=t[Symbol.iterator]()},n:function n(){var t=a.next();return c=t.done,t},e:function e(t){u=!0,l=t},f:function f(){try{c||null==a.return||a.return()}finally{if(u)throw l}}}}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var a=[],i=!0,o=!1,l=void 0;try{for(var c,u=t[Symbol.iterator]();!(i=(c=u.next()).done)&&(a.push(c.value),!r||a.length!==r);i=!0);}catch(t){o=!0,l=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw l}}return a}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}var y=[[57344,63743],[1048576,1114109]],v=1e3,S=!0;r.SEAC_ANALYSIS_ENABLED=S;var k=["ascent","bbox","black","bold","charProcOperatorList","composite","data","defaultVMetrics","defaultWidth","descent","fallbackName","fontMatrix","fontType","isMonospace","isSerifFont","isType3Font","italic","loadedName","mimetype","missingFile","name","remeasure","subtype","type","vertical"],w=["cMap","defaultEncoding","differences","isSymbolicFont","seacMap","toFontChar","toUnicode","vmetrics","widths"],C={FixedPitch:1,Serif:2,Symbolic:4,Script:8,Nonsymbolic:32,Italic:64,AllCap:65536,SmallCap:131072,ForceBold:262144};r.FontFlags=C;var x=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function adjustWidths(t){if(t.fontMatrix&&t.fontMatrix[0]!==i.FONT_IDENTITY_MATRIX[0]){var r=.001/t.fontMatrix[0],a=t.widths;for(var o in a)a[o]*=r;t.defaultWidth*=r}}function getFontType(t,r){switch(t){case"Type1":return"Type1C"===r?i.FontType.TYPE1C:i.FontType.TYPE1;case"CIDFontType0":return"CIDFontType0C"===r?i.FontType.CIDFONTTYPE0C:i.FontType.CIDFONTTYPE0;case"OpenType":return i.FontType.OPENTYPE;case"TrueType":return i.FontType.TRUETYPE;case"CIDFontType2":return i.FontType.CIDFONTTYPE2;case"MMType1":return i.FontType.MMTYPE1;case"Type0":return i.FontType.TYPE0;default:return i.FontType.UNKNOWN}}function recoverGlyphName(t,r){if(void 0!==r[t])return t;var a=(0,h.getUnicodeForGlyph)(t,r);if(-1!==a)for(var o in r)if(r[o]===a)return o;return(0,i.info)("Unable to recover a standard glyph name for: "+t),t}var _=function GlyphClosure(){function Glyph(t,r,a,i,o,l,c,u){this.fontChar=t,this.unicode=r,this.accent=a,this.width=i,this.vmetric=o,this.operatorListId=l,this.isSpace=c,this.isInFont=u}return Glyph.prototype.matchesForCache=function(t,r,a,i,o,l,c,u){return this.fontChar===t&&this.unicode===r&&this.accent===a&&this.width===i&&this.vmetric===o&&this.operatorListId===l&&this.isSpace===c&&this.isInFont===u},Glyph}(),A=function ToUnicodeMapClosure(){function ToUnicodeMap(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this._map=t}return ToUnicodeMap.prototype={get length(){return this._map.length},forEach:function forEach(t){for(var r in this._map)t(r,this._map[r].charCodeAt(0))},has:function has(t){return void 0!==this._map[t]},get:function get(t){return this._map[t]},charCodeOf:function charCodeOf(t){var r=this._map;if(r.length<=65536)return r.indexOf(t);for(var a in r)if(r[a]===t)return 0|a;return-1},amend:function amend(t){for(var r in t)this._map[r]=t[r]}},ToUnicodeMap}();r.ToUnicodeMap=A;var R=function IdentityToUnicodeMapClosure(){function IdentityToUnicodeMap(t,r){this.firstChar=t,this.lastChar=r}return IdentityToUnicodeMap.prototype={get length(){return this.lastChar+1-this.firstChar},forEach:function forEach(t){for(var r=this.firstChar,a=this.lastChar;r<=a;r++)t(r,r)},has:function has(t){return this.firstChar<=t&&t<=this.lastChar},get:function get(t){if(this.firstChar<=t&&t<=this.lastChar)return String.fromCharCode(t)},charCodeOf:function charCodeOf(t){return Number.isInteger(t)&&t>=this.firstChar&&t<=this.lastChar?t:-1},amend:function amend(t){(0,i.unreachable)("Should not call amend()")}},IdentityToUnicodeMap}();r.IdentityToUnicodeMap=R;var T=function OpenTypeFileBuilderClosure(){function writeInt16(t,r,a){t[r]=a>>8&255,t[r+1]=255&a}function writeInt32(t,r,a){t[r]=a>>24&255,t[r+1]=a>>16&255,t[r+2]=a>>8&255,t[r+3]=255&a}function writeData(t,r,a){var i,o;if(a instanceof Uint8Array)t.set(a,r);else if("string"==typeof a)for(i=0,o=a.length;i<o;i++)t[r++]=255&a.charCodeAt(i);else for(i=0,o=a.length;i<o;i++)t[r++]=255&a[i]}function OpenTypeFileBuilder(t){this.sfnt=t,this.tables=Object.create(null)}OpenTypeFileBuilder.getSearchParams=function OpenTypeFileBuilder_getSearchParams(t,r){for(var a=1,i=0;(a^t)>a;)a<<=1,i++;var o=a*r;return{range:o,entry:i,rangeShift:r*t-o}};return OpenTypeFileBuilder.prototype={toArray:function OpenTypeFileBuilder_toArray(){var t=this.sfnt,r=this.tables,a=Object.keys(r);a.sort();var o,l,c,u,h,p=a.length,m=12+16*p,g=[m];for(o=0;o<p;o++){m+=((u=r[a[o]]).length+3&-4)>>>0,g.push(m)}var b=new Uint8Array(m);for(o=0;o<p;o++)u=r[a[o]],writeData(b,g[o],u);"true"===t&&(t=(0,i.string32)(65536)),b[0]=255&t.charCodeAt(0),b[1]=255&t.charCodeAt(1),b[2]=255&t.charCodeAt(2),b[3]=255&t.charCodeAt(3),writeInt16(b,4,p);var y=OpenTypeFileBuilder.getSearchParams(p,16);for(writeInt16(b,6,y.range),writeInt16(b,8,y.entry),writeInt16(b,10,y.rangeShift),m=12,o=0;o<p;o++){h=a[o],b[m]=255&h.charCodeAt(0),b[m+1]=255&h.charCodeAt(1),b[m+2]=255&h.charCodeAt(2),b[m+3]=255&h.charCodeAt(3);var v=0;for(l=g[o],c=g[o+1];l<c;l+=4){v=v+(0,d.readUint32)(b,l)>>>0}writeInt32(b,m+4,v),writeInt32(b,m+8,g[o]),writeInt32(b,m+12,r[h].length),m+=16}return b},addTable:function OpenTypeFileBuilder_addTable(t,r){if(t in this.tables)throw new Error("Table "+t+" already exists");this.tables[t]=r}},OpenTypeFileBuilder}(),I=function FontClosure(){function Font(t,r,a){var o;this.name=t,this.loadedName=a.loadedName,this.isType3Font=a.isType3Font,this.missingFile=!1,this.glyphCache=Object.create(null),this.isSerifFont=!!(a.flags&C.Serif),this.isSymbolicFont=!!(a.flags&C.Symbolic),this.isMonospace=!!(a.flags&C.FixedPitch);var l=a.type,c=a.subtype;this.type=l,this.subtype=c;var u="sans-serif";if(this.isMonospace?u="monospace":this.isSerifFont&&(u="serif"),this.fallbackName=u,this.differences=a.differences,this.widths=a.widths,this.defaultWidth=a.defaultWidth,this.composite=a.composite,this.cMap=a.cMap,this.ascent=a.ascent/v,this.descent=a.descent/v,this.fontMatrix=a.fontMatrix,this.bbox=a.bbox,this.defaultEncoding=a.defaultEncoding,this.toUnicode=a.toUnicode,this.fallbackToUnicode=a.fallbackToUnicode||new A,this.toFontChar=[],"Type3"!==a.type){if(this.cidEncoding=a.cidEncoding,this.vertical=!!a.vertical,this.vertical&&(this.vmetrics=a.vmetrics,this.defaultVMetrics=a.defaultVMetrics),!r||r.isEmpty)return r&&(0,i.warn)('Font file is empty in "'+t+'" ('+this.loadedName+")"),void this.fallbackToSystemFont();var h=_slicedToArray(function getFontFileType(t,r){var a,o,l=r.type,c=r.subtype,u=r.composite;(function isTrueTypeFile(t){var r=t.peekBytes(4);return 65536===(0,d.readUint32)(r,0)||"true"===(0,i.bytesToString)(r)})(t)||isTrueTypeCollectionFile(t)?a=u?"CIDFontType2":"TrueType":!function isOpenTypeFile(t){var r=t.peekBytes(4);return"OTTO"===(0,i.bytesToString)(r)}(t)?!function isType1File(t){var r=t.peekBytes(2);if(37===r[0]&&33===r[1])return!0;if(128===r[0]&&1===r[1])return!0;return!1}(t)?!function isCFFFile(t){var r=t.peekBytes(4);if(r[0]>=1&&r[3]>=1&&r[3]<=4)return!0;return!1}(t)?((0,i.warn)("getFontFileType: Unable to detect correct font file Type/Subtype."),a=l,o=c):u?(a="CIDFontType0",o="CIDFontType0C"):(a="MMType1"===l?"MMType1":"Type1",o="Type1C"):a=u?"CIDFontType0":"MMType1"===l?"MMType1":"Type1":a=u?"CIDFontType2":"OpenType";return[a,o]}(r,a),2);l=h[0],c=h[1],l===this.type&&c===this.subtype||(0,i.info)("Inconsistent font file Type/SubType, expected: "+"".concat(this.type,"/").concat(this.subtype," but found: ").concat(l,"/").concat(c,"."));try{var p;switch(l){case"MMType1":(0,i.info)("MMType1 font ("+t+"), falling back to Type1.");case"Type1":case"CIDFontType0":this.mimetype="font/opentype";var m="Type1C"===c||"CIDFontType0C"===c?new E(r,a):new O(t,r,a);adjustWidths(a),p=this.convert(t,m,a);break;case"OpenType":case"TrueType":case"CIDFontType2":this.mimetype="font/opentype",p=this.checkAndRepair(t,r,a),this.isOpenType&&(adjustWidths(a),l="OpenType");break;default:throw new i.FormatError("Font ".concat(l," is not supported"))}}catch(t){return(0,i.warn)(t),void this.fallbackToSystemFont()}this.data=p,this.fontType=getFontType(l,c),this.fontMatrix=a.fontMatrix,this.widths=a.widths,this.defaultWidth=a.defaultWidth,this.toUnicode=a.toUnicode,this.seacMap=a.seacMap}else{for(o=0;o<256;o++)this.toFontChar[o]=this.differences[o]||a.defaultEncoding[o];this.fontType=i.FontType.TYPE3}}var t;function int16(t,r){return(t<<8)+r}function signedInt16(t,r){var a=(t<<8)+r;return 32768&a?a-65536:a}function string16(t){return String.fromCharCode(t>>8&255,255&t)}function safeString16(t){return t>32767?t=32767:t<-32768&&(t=-32768),String.fromCharCode(t>>8&255,255&t)}function isTrueTypeCollectionFile(t){var r=t.peekBytes(4);return"ttcf"===(0,i.bytesToString)(r)}function buildToFontChar(t,r,a){for(var i,o=[],l=0,c=t.length;l<c;l++)-1!==(i=(0,h.getUnicodeForGlyph)(t[l],r))&&(o[l]=i);for(var u in a)-1!==(i=(0,h.getUnicodeForGlyph)(a[u],r))&&(o[+u]=i);return o}function adjustMapping(t,r,a){var o=Object.create(null),l=[],c=0,u=y[c][0],h=y[c][1];for(var d in t){var p=t[d|=0];if(r(p)){if(u>h){if(++c>=y.length){(0,i.warn)("Ran out of space in font private use area.");break}u=y[c][0],h=y[c][1]}var m=u++;0===p&&(p=a),o[m]=p,l[d]=m}}return{toFontChar:l,charCodeToGlyphId:o,nextAvailableFontCharCode:u}}function createCmapTable(t,r){var a,o,l,c,u=function getRanges(t,r){var a=[];for(var i in t)t[i]>=r||a.push({fontCharCode:0|i,glyphId:t[i]});0===a.length&&a.push({fontCharCode:0,glyphId:0}),a.sort((function fontGetRangesSort(t,r){return t.fontCharCode-r.fontCharCode}));for(var o=[],l=a.length,c=0;c<l;){var u=a[c].fontCharCode,h=[a[c].glyphId];++c;for(var d=u;c<l&&d+1===a[c].fontCharCode&&(h.push(a[c].glyphId),++c,65535!=++d););o.push([u,d,h])}return o}(t,r),h=u[u.length-1][1]>65535?2:1,d="\0\0"+string16(h)+"\0\0"+(0,i.string32)(4+8*h);for(a=u.length-1;a>=0&&!(u[a][0]<=65535);--a);var p=a+1;u[a][0]<65535&&65535===u[a][1]&&(u[a][1]=65534);var m,g,b,y,v=u[a][1]<65535?1:0,S=p+v,k=T.getSearchParams(S,2),w="",C="",x="",_="",A="",R=0;for(a=0,o=p;a<o;a++){g=(m=u[a])[0],b=m[1],w+=string16(g),C+=string16(b);var I=!0;for(l=1,c=(y=m[2]).length;l<c;++l)if(y[l]!==y[l-1]+1){I=!1;break}if(I){x+=string16(y[0]-g&65535),_+=string16(0)}else{var P=2*(S-a)+2*R;for(R+=b-g+1,x+=string16(0),_+=string16(P),l=0,c=y.length;l<c;++l)A+=string16(y[l])}}v>0&&(C+="",w+="",x+="\0",_+="\0\0");var O="\0\0"+string16(2*S)+string16(k.range)+string16(k.entry)+string16(k.rangeShift)+C+"\0\0"+w+x+_+A,E="",B="";if(h>1){for(d+="\0\0\n"+(0,i.string32)(4+8*h+4+O.length),E="",a=0,o=u.length;a<o;a++){g=(m=u[a])[0];var D=(y=m[2])[0];for(l=1,c=y.length;l<c;++l)y[l]!==y[l-1]+1&&(b=m[0]+l-1,E+=(0,i.string32)(g)+(0,i.string32)(b)+(0,i.string32)(D),g=b+1,D=y[l]);E+=(0,i.string32)(g)+(0,i.string32)(m[1])+(0,i.string32)(D)}B="\0\f\0\0"+(0,i.string32)(E.length+16)+"\0\0\0\0"+(0,i.string32)(E.length/12)}return d+"\0"+string16(O.length+4)+O+B+E}function createOS2Table(t,r,a){a=a||{unitsPerEm:0,yMax:0,yMin:0,ascent:0,descent:0};var o=0,l=0,c=0,u=0,d=null,p=0;if(r){for(var m in r){(d>(m|=0)||!d)&&(d=m),p<m&&(p=m);var g=(0,h.getUnicodeRangeFor)(m);if(g<32)o|=1<<g;else if(g<64)l|=1<<g-32;else if(g<96)c|=1<<g-64;else{if(!(g<123))throw new i.FormatError("Unicode ranges Bits > 123 are reserved for internal usage");u|=1<<g-96}}p>65535&&(p=65535)}else d=0,p=255;var b=t.bbox||[0,0,0,0],y=a.unitsPerEm||1/(t.fontMatrix||i.FONT_IDENTITY_MATRIX)[0],S=t.ascentScaled?1:y/v,k=a.ascent||Math.round(S*(t.ascent||b[3])),w=a.descent||Math.round(S*(t.descent||b[1]));w>0&&t.descent>0&&b[1]<0&&(w=-w);var C=a.yMax||k,x=-a.yMin||-w;return"\0$\0\0\0\0\0\0\0\0\x001\0\0\0\0"+String.fromCharCode(t.fixedPitch?9:0)+"\0\0\0\0\0\0"+(0,i.string32)(o)+(0,i.string32)(l)+(0,i.string32)(c)+(0,i.string32)(u)+"*21*"+string16(t.italicAngle?1:0)+string16(d||t.firstChar)+string16(p||t.lastChar)+string16(k)+string16(w)+"\0d"+string16(C)+string16(x)+"\0\0\0\0\0\0\0\0"+string16(t.xHeight)+string16(t.capHeight)+string16(0)+string16(d||t.firstChar)+"\0"}function createPostTable(t){var r=Math.floor(t.italicAngle*Math.pow(2,16));return"\0\0\0"+(0,i.string32)(r)+"\0\0\0\0"+(0,i.string32)(t.fixedPitch)+"\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"}function createNameTable(t,r){r||(r=[[],[]]);var a,i,o,l,c,u=[r[0][0]||"Original licence",r[0][1]||t,r[0][2]||"Unknown",r[0][3]||"uniqueID",r[0][4]||t,r[0][5]||"Version 0.11",r[0][6]||"",r[0][7]||"Unknown",r[0][8]||"Unknown",r[0][9]||"Unknown"],h=[];for(a=0,i=u.length;a<i;a++){var d=[];for(o=0,l=(c=r[1][a]||u[a]).length;o<l;o++)d.push(string16(c.charCodeAt(o)));h.push(d.join(""))}var p=[u,h],m=["\0","\0"],g=["\0\0","\0"],b=["\0\0","\t"],y=u.length*m.length,v="\0\0"+string16(y)+string16(12*y+6),S=0;for(a=0,i=m.length;a<i;a++){var k=p[a];for(o=0,l=k.length;o<l;o++){c=k[o],v+=m[a]+g[a]+b[a]+string16(o)+string16(c.length)+string16(S),S+=c.length}}return v+=u.join("")+h.join("")}return Font.getFontID=(t=1,function Font_getFontID(){return String(t++)}),Font.prototype={name:null,font:null,mimetype:null,disableFontFace:!1,get renderer(){var t=p.FontRendererFactory.create(this,S);return(0,i.shadow)(this,"renderer",t)},exportData:function exportData(){var t,r,a,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=i?[].concat(k,w):k,l=Object.create(null),c=_createForOfIteratorHelper(o);try{for(c.s();!(a=c.n()).done;)void 0!==(r=this[t=a.value])&&(l[t]=r)}catch(t){c.e(t)}finally{c.f()}return l},fallbackToSystemFont:function Font_fallbackToSystemFont(){var t=this;this.missingFile=!0;var r=this.name,a=this.type,o=this.subtype,d=r.replace(/[,_]/g,"-").replace(/\s/g,""),p=(0,u.getStdFontMap)(),m=(0,u.getNonStdFontMap)(),g=!!p[d]||!(!m[d]||!p[m[d]]);if(d=p[d]||m[d]||d,this.bold=-1!==d.search(/bold/gi),this.italic=-1!==d.search(/oblique/gi)||-1!==d.search(/italic/gi),this.black=-1!==r.search(/Black/g),this.remeasure=Object.keys(this.widths).length>0,g&&"CIDFontType2"===a&&this.cidEncoding.startsWith("Identity-")){var b=(0,u.getGlyphMapForStandardFonts)(),y=[];for(var v in b)y[+v]=b[v];if(/Arial-?Black/i.test(r)){var S=(0,u.getSupplementalGlyphMapForArialBlack)();for(var k in S)y[+k]=S[k]}else if(/Calibri/i.test(r)){var w=(0,u.getSupplementalGlyphMapForCalibri)();for(var C in w)y[+C]=w[C]}this.toUnicode instanceof R||this.toUnicode.forEach((function(t,r){y[+t]=r})),this.toFontChar=y,this.toUnicode=new A(y)}else if(/Symbol/i.test(d))this.toFontChar=buildToFontChar(c.SymbolSetEncoding,(0,l.getGlyphsUnicode)(),this.differences);else if(/Dingbats/i.test(d))/Wingdings/i.test(r)&&(0,i.warn)("Non-embedded Wingdings font, falling back to ZapfDingbats."),this.toFontChar=buildToFontChar(c.ZapfDingbatsEncoding,(0,l.getDingbatsGlyphsUnicode)(),this.differences);else if(g)this.toFontChar=buildToFontChar(this.defaultEncoding,(0,l.getGlyphsUnicode)(),this.differences);else{var x=(0,l.getGlyphsUnicode)(),_=[];if(this.toUnicode.forEach((function(r,a){if(!t.composite){var i=t.differences[r]||t.defaultEncoding[r],o=(0,h.getUnicodeForGlyph)(i,x);-1!==o&&(a=o)}_[+r]=a})),this.composite&&this.toUnicode instanceof R&&/Verdana/i.test(r)){var T=(0,u.getGlyphMapForStandardFonts)();for(var I in T)_[+I]=T[I]}this.toFontChar=_}this.loadedName=d.split("-")[0],this.fontType=getFontType(a,o)},checkAndRepair:function Font_checkAndRepair(t,r,a){var u=["OS/2","cmap","head","hhea","hmtx","maxp","name","post","loca","glyf","fpgm","prep","cvt ","CFF "];function readTables(t,r){var a=Object.create(null);a["OS/2"]=null,a.cmap=null,a.head=null,a.hhea=null,a.hmtx=null,a.maxp=null,a.name=null,a.post=null;for(var i=0;i<r;i++){var o=readTableEntry(t);u.includes(o.tag)&&(0!==o.length&&(a[o.tag]=o))}return a}function readTableEntry(t){var r=(0,i.bytesToString)(t.getBytes(4)),a=t.getInt32()>>>0,o=t.getInt32()>>>0,l=t.getInt32()>>>0,c=t.pos;t.pos=t.start?t.start:0,t.skip(o);var u=t.getBytes(l);return t.pos=c,"head"===r&&(u[8]=u[9]=u[10]=u[11]=0,u[17]|=32),{tag:r,checksum:a,length:l,offset:o,data:u}}function readOpenTypeHeader(t){return{version:(0,i.bytesToString)(t.getBytes(4)),numTables:t.getUint16(),searchRange:t.getUint16(),entrySelector:t.getUint16(),rangeShift:t.getUint16()}}function sanitizeGlyph(t,r,a,i,o,l){var c={length:0,sizeOfInstructions:0};if(a-r<=12)return c;var u=t.subarray(r,a),h=signedInt16(u[0],u[1]);if(h<0)return function writeSignedInt16(t,r,a){t[r+1]=a,t[r]=a>>>8}(u,0,h=-1),i.set(u,o),c.length=u.length,c;var d,p=10,m=0;for(d=0;d<h;d++){m=(u[p]<<8|u[p+1])+1,p+=2}var g=p,b=u[p]<<8|u[p+1];c.sizeOfInstructions=b;var y=p+=2+b,v=0;for(d=0;d<m;d++){var S=u[p++];192&S&&(u[p-1]=63&S);var k=2;2&S?k=1:16&S&&(k=0);var w=2;4&S?w=1:32&S&&(w=0);var C=k+w;if(v+=C,8&S){var x=u[p++];d+=x,v+=x*C}}if(0===v)return c;var _=p+v;return _>u.length?c:!l&&b>0?(i.set(u.subarray(0,g),o),i.set([0,0],o+g),i.set(u.subarray(y,_),o+g+2),_-=b,u.length-_>3&&(_=_+3&-4),c.length=_,c):u.length-_>3?(_=_+3&-4,i.set(u.subarray(0,_),o),c.length=_,c):(i.set(u,o),c.length=u.length,c)}function readNameTable(t){var a=(r.start?r.start:0)+t.offset;r.pos=a;var o=[[],[]],l=t.length,c=a+l;if(0!==r.getUint16()||l<6)return o;var u,h,d=r.getUint16(),p=r.getUint16(),m=[];for(u=0;u<d&&r.pos+12<=c;u++){var g={platform:r.getUint16(),encoding:r.getUint16(),language:r.getUint16(),name:r.getUint16(),length:r.getUint16(),offset:r.getUint16()};(1===g.platform&&0===g.encoding&&0===g.language||3===g.platform&&1===g.encoding&&1033===g.language)&&m.push(g)}for(u=0,h=m.length;u<h;u++){var b=m[u];if(!(b.length<=0)){var y=a+p+b.offset;if(!(y+b.length>c)){r.pos=y;var v=b.name;if(b.encoding){for(var S="",k=0,w=b.length;k<w;k+=2)S+=String.fromCharCode(r.getUint16());o[1][v]=S}else o[0][v]=(0,i.bytesToString)(r.getBytes(b.length))}}}return o}var h,d,p,b,y=[0,0,0,0,0,0,0,0,-2,-2,-2,-2,0,0,-2,-5,-1,-1,-1,-1,-1,-1,-1,-1,0,0,-1,0,-1,-1,-1,-1,1,-1,-999,0,1,0,-1,-2,0,-1,-2,-1,-1,0,-1,-1,0,0,-999,-999,-1,-1,-1,-1,-2,-999,-2,-2,-999,0,-2,-2,0,0,-2,0,-2,0,0,0,-2,-1,-1,1,1,0,0,-1,-1,-1,-1,-1,-1,-1,0,0,-1,0,-1,-1,0,-999,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,0,0,0,0,0,-2,-999,-999,-999,-999,-999,-1,-1,-2,-2,0,0,0,0,-1,-1,-999,-2,-2,0,0,-1,-2,-2,0,0,0,-1,-1,-1,-2];function sanitizeTTProgram(t,r){for(var a,o,l,c,u,h=t.data,d=0,p=0,m=0,g=[],b=[],v=[],S=r.tooComplexToFollowFunctions,k=!1,w=0,C=0,x=h.length;d<x;){var _=h[d++];if(64===_)if(o=h[d++],k||C)d+=o;else for(a=0;a<o;a++)g.push(h[d++]);else if(65===_)if(o=h[d++],k||C)d+=2*o;else for(a=0;a<o;a++)l=h[d++],g.push(l<<8|h[d++]);else if(176==(248&_))if(o=_-176+1,k||C)d+=o;else for(a=0;a<o;a++)g.push(h[d++]);else if(184==(248&_))if(o=_-184+1,k||C)d+=2*o;else for(a=0;a<o;a++)l=h[d++],g.push(l<<8|h[d++]);else if(43!==_||S)if(44!==_||S){if(45===_)if(k)k=!1,p=d;else{if(!(u=b.pop()))return(0,i.warn)("TT: ENDF bad stack"),void(r.hintsValid=!1);c=v.pop(),h=u.data,d=u.i,r.functionsStackDeltas[c]=g.length-u.stackTop}else if(137===_)(k||C)&&((0,i.warn)("TT: nested IDEFs not allowed"),S=!0),k=!0,m=d;else if(88===_)++w;else if(27===_)C=w;else if(89===_)C===w&&(C=0),--w;else if(28===_&&!k&&!C){var A=g[g.length-1];A>0&&(d+=A-1)}}else(k||C)&&((0,i.warn)("TT: nested FDEFs not allowed"),S=!0),k=!0,m=d,c=g.pop(),r.functionsDefined[c]={data:h,i:d};else if(!k&&!C)if(c=g[g.length-1],isNaN(c))(0,i.info)("TT: CALL empty stack (or invalid entry).");else if(r.functionsUsed[c]=!0,c in r.functionsStackDeltas){var R=g.length+r.functionsStackDeltas[c];if(R<0)return(0,i.warn)("TT: CALL invalid functions stack delta."),void(r.hintsValid=!1);g.length=R}else if(c in r.functionsDefined&&!v.includes(c)){if(b.push({data:h,i:d,stackTop:g.length-1}),v.push(c),!(u=r.functionsDefined[c]))return(0,i.warn)("TT: CALL non-existent function"),void(r.hintsValid=!1);h=u.data,d=u.i}if(!k&&!C){var T=0;for(_<=142?T=y[_]:_>=192&&_<=223?T=-1:_>=224&&(T=-2),_>=113&&_<=117&&(o=g.pop(),isNaN(o)||(T=2*-o));T<0&&g.length>0;)g.pop(),T++;for(;T>0;)g.push(NaN),T--}}r.tooComplexToFollowFunctions=S;var I=[h];d>h.length&&I.push(new Uint8Array(d-h.length)),m>p&&((0,i.warn)("TT: complementing a missing function tail"),I.push(new Uint8Array([34,45]))),function foldTTTable(t,r){if(r.length>1){var a,i,o=0;for(a=0,i=r.length;a<i;a++)o+=r[a].length;o=o+3&-4;var l=new Uint8Array(o),c=0;for(a=0,i=r.length;a<i;a++)l.set(r[a],c),c+=r[a].length;t.data=l,t.length=o}}(t,I)}if(isTrueTypeCollectionFile(r=new g.Stream(new Uint8Array(r.getBytes())))){var v=function readTrueTypeCollectionData(t,r){for(var a=function readTrueTypeCollectionHeader(t){var r=(0,i.bytesToString)(t.getBytes(4));(0,i.assert)("ttcf"===r,"Must be a TrueType Collection font.");for(var a=t.getUint16(),o=t.getUint16(),l=t.getInt32()>>>0,c=[],u=0;u<l;u++)c.push(t.getInt32()>>>0);var h={ttcTag:r,majorVersion:a,minorVersion:o,numFonts:l,offsetTable:c};switch(a){case 1:return h;case 2:return h.dsigTag=t.getInt32()>>>0,h.dsigLength=t.getInt32()>>>0,h.dsigOffset=t.getInt32()>>>0,h}throw new i.FormatError("Invalid TrueType Collection majorVersion: ".concat(a,"."))}(t),o=a.numFonts,l=a.offsetTable,c=0;c<o;c++){t.pos=(t.start||0)+l[c];var u=readOpenTypeHeader(t),h=readTables(t,u.numTables);if(!h.name)throw new i.FormatError('TrueType Collection font must contain a "name" table.');for(var d=readNameTable(h.name),p=0,m=d.length;p<m;p++)for(var g=0,b=d[p].length;g<b;g++){var y=d[p][g];if(y&&y.replace(/\s/g,"")===r)return{header:u,tables:h}}}throw new i.FormatError('TrueType Collection does not contain "'.concat(r,'" font.'))}(r,this.name);h=v.header,d=v.tables}else h=readOpenTypeHeader(r),d=readTables(r,h.numTables);var k=!d["CFF "];if(k){if(!d.loca)throw new i.FormatError('Required "loca" table is not found');d.glyf||((0,i.warn)('Required "glyf" table is not found -- trying to recover.'),d.glyf={tag:"glyf",data:new Uint8Array(0)}),this.isOpenType=!1}else{var w=a.composite&&((a.cidToGidMap||[]).length>0||!(a.cMap instanceof m.IdentityCMap));if("OTTO"===h.version&&!w||!d.head||!d.hhea||!d.maxp||!d.post)return b=new g.Stream(d["CFF "].data),p=new E(b,a),adjustWidths(a),this.convert(t,p,a);delete d.glyf,delete d.loca,delete d.fpgm,delete d.prep,delete d["cvt "],this.isOpenType=!0}if(!d.maxp)throw new i.FormatError('Required "maxp" table is not found');r.pos=(r.start||0)+d.maxp.offset;var C=r.getInt32(),_=r.getUint16(),A=_+1,R=!0;A>65535&&(R=!1,A=_,(0,i.warn)("Not enough space in glyfs to duplicate first glyph."));var I=0,P=0;C>=65536&&d.maxp.length>=22&&(r.pos+=8,r.getUint16()>2&&(d.maxp.data[14]=0,d.maxp.data[15]=2),r.pos+=4,I=r.getUint16(),r.pos+=4,P=r.getUint16());d.maxp.data[4]=A>>8,d.maxp.data[5]=255&A;var O=function sanitizeTTPrograms(t,r,a,o){var l={functionsDefined:[],functionsUsed:[],functionsStackDeltas:[],tooComplexToFollowFunctions:!1,hintsValid:!0};if(t&&sanitizeTTProgram(t,l),r&&sanitizeTTProgram(r,l),t&&function checkInvalidFunctions(t,r){if(!t.tooComplexToFollowFunctions){if(t.functionsDefined.length>r)return(0,i.warn)("TT: more functions defined than expected"),void(t.hintsValid=!1);for(var a=0,o=t.functionsUsed.length;a<o;a++){if(a>r)return(0,i.warn)("TT: invalid function id: "+a),void(t.hintsValid=!1);if(t.functionsUsed[a]&&!t.functionsDefined[a])return(0,i.warn)("TT: undefined function: "+a),void(t.hintsValid=!1)}}}(l,o),a&&1&a.length){var c=new Uint8Array(a.length+1);c.set(a.data),a.data=c}return l.hintsValid}(d.fpgm,d.prep,d["cvt "],I);if(O||(delete d.fpgm,delete d.prep,delete d["cvt "]),function sanitizeMetrics(t,r,a,o,l){if(r){t.pos=(t.start?t.start:0)+r.offset,t.pos+=4,t.pos+=2,t.pos+=2,t.pos+=2,t.pos+=2,t.pos+=2,t.pos+=2,t.pos+=2,t.pos+=2,t.pos+=2,t.pos+=2,t.pos+=8,t.pos+=2;var c=t.getUint16();c>o&&((0,i.info)("The numOfMetrics ("+c+") should not be greater than the numGlyphs ("+o+")"),c=o,r.data[34]=(65280&c)>>8,r.data[35]=255&c);var u=o-c-(a.length-4*c>>1);if(u>0){var h=new Uint8Array(a.length+2*u);h.set(a.data),l&&(h[a.length]=a.data[2],h[a.length+1]=a.data[3]),a.data=h}}else a&&(a.data=null)}(r,d.hhea,d.hmtx,A,R),!d.head)throw new i.FormatError('Required "head" table is not found');!function sanitizeHead(t,r,a){var o=t.data,l=function int32(t,r,a,i){return(t<<24)+(r<<16)+(a<<8)+i}(o[0],o[1],o[2],o[3]);l>>16!=1&&((0,i.info)("Attempting to fix invalid version in head table: "+l),o[0]=0,o[1]=1,o[2]=0,o[3]=0);var c=int16(o[50],o[51]);if(c<0||c>1){(0,i.info)("Attempting to fix invalid indexToLocFormat in head table: "+c);var u=r+1;if(a===u<<1)o[50]=0,o[51]=0;else{if(a!==u<<2)throw new i.FormatError("Could not fix indexToLocFormat: "+c);o[50]=0,o[51]=1}}}(d.head,_,k?d.loca.length:0);var B=Object.create(null);if(k){var D=int16(d.head.data[50],d.head.data[51]),M=function sanitizeGlyphLocations(t,r,a,i,o,l,c){var u,h,d;i?(u=4,h=function fontItemDecodeLong(t,r){return t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3]},d=function fontItemEncodeLong(t,r,a){t[r]=a>>>24&255,t[r+1]=a>>16&255,t[r+2]=a>>8&255,t[r+3]=255&a}):(u=2,h=function fontItemDecode(t,r){return t[r]<<9|t[r+1]<<1},d=function fontItemEncode(t,r,a){t[r]=a>>9&255,t[r+1]=a>>1&255});var p=l?a+1:a,m=u*(1+p),g=new Uint8Array(m);g.set(t.data.subarray(0,m)),t.data=g;var b,y,v=r.data,S=v.length,k=new Uint8Array(S),w=h(g,0),C=0,x=Object.create(null);for(d(g,0,C),b=0,y=u;b<a;b++,y+=u){var _=h(g,y);0===_&&(_=w),_>S&&(S+3&-4)===_&&(_=S),_>S&&(w=_);var A=sanitizeGlyph(v,w,_,k,C,o),R=A.length;0===R&&(x[b]=!0),A.sizeOfInstructions>c&&(c=A.sizeOfInstructions),d(g,y,C+=R),w=_}if(0===C){var T=new Uint8Array([0,1,0,0,0,0,0,0,0,0,0,0,0,0,49,0]);for(b=0,y=u;b<p;b++,y+=u)d(g,y,T.length);r.data=T}else if(l){var I=h(g,u);k.length>I+C?r.data=k.subarray(0,I+C):(r.data=new Uint8Array(I+C),r.data.set(k.subarray(0,C))),r.data.set(k.subarray(0,I),C),d(t.data,g.length-u,C+I)}else r.data=k.subarray(0,C);return{missingGlyphs:x,maxSizeOfInstructions:c}}(d.loca,d.glyf,_,D,O,R,P);B=M.missingGlyphs,C>=65536&&d.maxp.length>=22&&(d.maxp.data[26]=M.maxSizeOfInstructions>>8,d.maxp.data[27]=255&M.maxSizeOfInstructions)}if(!d.hhea)throw new i.FormatError('Required "hhea" table is not found');0===d.hhea.data[10]&&0===d.hhea.data[11]&&(d.hhea.data[10]=255,d.hhea.data[11]=255);var L={unitsPerEm:int16(d.head.data[18],d.head.data[19]),yMax:int16(d.head.data[42],d.head.data[43]),yMin:signedInt16(d.head.data[38],d.head.data[39]),ascent:int16(d.hhea.data[4],d.hhea.data[5]),descent:signedInt16(d.hhea.data[6],d.hhea.data[7])};this.ascent=L.ascent/L.unitsPerEm,this.descent=L.descent/L.unitsPerEm,d.post&&function readPostScriptTable(t,a,o){var l=(r.start?r.start:0)+t.offset;r.pos=l;var c,u=l+t.length,h=r.getInt32();r.skip(28);var d,p=!0;switch(h){case 65536:c=x;break;case 131072:var m=r.getUint16();if(m!==o){p=!1;break}var g=[];for(d=0;d<m;++d){var b=r.getUint16();if(b>=32768){p=!1;break}g.push(b)}if(!p)break;for(var y=[],v=[];r.pos<u;){var S=r.getByte();for(v.length=S,d=0;d<S;++d)v[d]=String.fromCharCode(r.getByte());y.push(v.join(""))}for(c=[],d=0;d<m;++d){var k=g[d];k<258?c.push(x[k]):c.push(y[k-258])}break;case 196608:break;default:(0,i.warn)("Unknown/unsupported post table version "+h),p=!1,a.defaultEncoding&&(c=a.defaultEncoding)}return a.glyphNames=c,p}(d.post,a,_),d.post={tag:"post",data:createPostTable(a)};var N=[];function hasGlyph(t){return!B[t]}if(a.composite){var U=a.cidToGidMap||[],j=0===U.length;a.cMap.forEach((function(t,r){if(r>65535)throw new i.FormatError("Max size of CID is 65,535");var a=-1;j?a=r:void 0!==U[r]&&(a=U[r]),a>=0&&a<_&&hasGlyph(a)&&(N[t]=a)}))}else{var q=function readCmapTable(t,r,a,o){if(!t)return(0,i.warn)("No cmap table available."),{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:!1};var l,c=(r.start?r.start:0)+t.offset;r.pos=c,r.skip(2);for(var u,h=r.getUint16(),d=!1,p=0;p<h;p++){var m=r.getUint16(),g=r.getUint16(),b=r.getInt32()>>>0,y=!1;if((!u||u.platformId!==m||u.encodingId!==g)&&(0===m&&0===g||1===m&&0===g?y=!0:3!==m||1!==g||!o&&u?a&&3===m&&0===g&&(y=!0,d=!0):(y=!0,a||(d=!0)),y&&(u={platformId:m,encodingId:g,offset:b}),d))break}if(u&&(r.pos=c+u.offset),!u||-1===r.peekByte())return(0,i.warn)("Could not find a preferred cmap table."),{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:!1};var v=r.getUint16();r.skip(4);var S,k,w=!1,C=[];if(0===v){for(S=0;S<256;S++){var x=r.getByte();x&&C.push({charCode:S,glyphId:x})}w=!0}else if(4===v){var _=r.getUint16()>>1;r.skip(6);var A,R=[];for(A=0;A<_;A++)R.push({end:r.getUint16()});for(r.skip(2),A=0;A<_;A++)R[A].start=r.getUint16();for(A=0;A<_;A++)R[A].delta=r.getUint16();var T=0;for(A=0;A<_;A++){l=R[A];var I=r.getUint16();if(I){var P=(I>>1)-(_-A);l.offsetIndex=P,T=Math.max(T,P+l.end-l.start+1)}else l.offsetIndex=-1}var O=[];for(S=0;S<T;S++)O.push(r.getUint16());for(A=0;A<_;A++){c=(l=R[A]).start;var E=l.end,B=l.delta;for(P=l.offsetIndex,S=c;S<=E;S++)65535!==S&&(k=(k=P<0?S:O[P+S-c])+B&65535,C.push({charCode:S,glyphId:k}))}}else{if(6!==v)return(0,i.warn)("cmap table has unsupported format: "+v),{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:!1};var D=r.getUint16(),M=r.getUint16();for(S=0;S<M;S++){k=r.getUint16();var L=D+S;C.push({charCode:L,glyphId:k})}}for(C.sort((function(t,r){return t.charCode-r.charCode})),p=1;p<C.length;p++)C[p-1].charCode===C[p].charCode&&(C.splice(p,1),p--);return{platformId:u.platformId,encodingId:u.encodingId,mappings:C,hasShortCmap:w}}(d.cmap,r,this.isSymbolicFont,a.hasEncoding),W=q.platformId,z=q.encodingId,G=q.mappings,H=G.length;if(a.hasEncoding&&(3===W&&1===z||1===W&&0===z)||-1===W&&-1===z&&(0,c.getEncoding)(a.baseEncodingName)){var X=[];"MacRomanEncoding"!==a.baseEncodingName&&"WinAnsiEncoding"!==a.baseEncodingName||(X=(0,c.getEncoding)(a.baseEncodingName));for(var V=(0,l.getGlyphsUnicode)(),Y=0;Y<256;Y++){var K,J;if(K=this.differences&&Y in this.differences?this.differences[Y]:Y in X&&""!==X[Y]?X[Y]:c.StandardEncoding[Y]){var Z;J=recoverGlyphName(K,V),3===W&&1===z?Z=V[J]:1===W&&0===z&&(Z=c.MacRomanEncoding.indexOf(J));for(var Q=!1,$=0;$<H;++$)if(G[$].charCode===Z){N[Y]=G[$].glyphId,Q=!0;break}if(!Q&&a.glyphNames){var ee=a.glyphNames.indexOf(K);-1===ee&&J!==K&&(ee=a.glyphNames.indexOf(J)),ee>0&&hasGlyph(ee)&&(N[Y]=ee)}}}}else if(0===W&&0===z)for(var te=0;te<H;++te)N[G[te].charCode]=G[te].glyphId;else for(var re=0;re<H;++re){var ae=G[re].charCode;3===W&&ae>=61440&&ae<=61695&&(ae&=255),N[ae]=G[re].glyphId}}0===N.length&&(N[0]=0);var ne=A-1;R||(ne=0);var ie=adjustMapping(N,hasGlyph,ne);if(this.toFontChar=ie.toFontChar,d.cmap={tag:"cmap",data:createCmapTable(ie.charCodeToGlyphId,A)},d["OS/2"]&&function validateOS2Table(t,r){r.pos=(r.start||0)+t.offset;var a=r.getUint16();r.skip(60);var i=r.getUint16();return!(a<4&&768&i||r.getUint16()>r.getUint16()||(r.skip(6),0===r.getUint16()||(t.data[8]=t.data[9]=0,0)))}(d["OS/2"],r)||(d["OS/2"]={tag:"OS/2",data:createOS2Table(a,ie.charCodeToGlyphId,L)}),!k)try{b=new g.Stream(d["CFF "].data),(p=new o.CFFParser(b,a,S).parse()).duplicateFirstGlyph();var oe=new o.CFFCompiler(p);d["CFF "].data=oe.compile()}catch(t){(0,i.warn)("Failed to compile font "+a.loadedName)}if(d.name){var se=readNameTable(d.name);d.name.data=createNameTable(t,se)}else d.name={tag:"name",data:createNameTable(this.name)};var le=new T(h.version);for(var ce in d)le.addTable(ce,d[ce].data);return le.toArray()},convert:function Font_convert(t,r,a){a.fixedPitch=!1,a.builtInEncoding&&function adjustToUnicode(t,r){if(!t.hasIncludedToUnicodeMap&&!(t.hasEncoding||r===t.defaultEncoding||t.toUnicode instanceof R)){var a=[],i=(0,l.getGlyphsUnicode)();for(var o in r){var c=r[o],u=(0,h.getUnicodeForGlyph)(c,i);-1!==u&&(a[o]=String.fromCharCode(u))}t.toUnicode.amend(a)}}(a,a.builtInEncoding);var o=1;r instanceof E&&(o=r.numGlyphs-1);var u=r.getGlyphMapping(a),d=adjustMapping(u,r.hasGlyphId.bind(r),o);this.toFontChar=d.toFontChar;var p=r.numGlyphs;function getCharCodes(t,r){var a=null;for(var i in t)r===t[i]&&(a||(a=[]),a.push(0|i));return a}function createCharCode(t,r){for(var a in t)if(r===t[a])return 0|a;return d.charCodeToGlyphId[d.nextAvailableFontCharCode]=r,d.nextAvailableFontCharCode++}var m=r.seacs;if(m&&m.length){var g=a.fontMatrix||i.FONT_IDENTITY_MATRIX,b=r.getCharset(),y=Object.create(null);for(var v in m){var S=m[v|=0],k=c.StandardEncoding[S[2]],w=c.StandardEncoding[S[3]],C=b.indexOf(k),x=b.indexOf(w);if(!(C<0||x<0)){var _={x:S[0]*g[0]+S[1]*g[2]+g[4],y:S[0]*g[1]+S[1]*g[3]+g[5]},A=getCharCodes(u,v);if(A)for(var I=0,P=A.length;I<P;I++){var O=A[I],B=d.charCodeToGlyphId,D=createCharCode(B,C),M=createCharCode(B,x);y[O]={baseFontCharCode:D,accentFontCharCode:M,accentOffset:_}}}}a.seacMap=y}var L=1/(a.fontMatrix||i.FONT_IDENTITY_MATRIX)[0],N=new T("OTTO");return N.addTable("CFF ",r.data),N.addTable("OS/2",createOS2Table(a,d.charCodeToGlyphId)),N.addTable("cmap",createCmapTable(d.charCodeToGlyphId,p)),N.addTable("head","\0\0\0\0\0\0\0\0\0\0_<\0\0"+safeString16(L)+"\0\0\0\0\v~'\0\0\0\0\v~'\0\0"+safeString16(a.descent)+""+safeString16(a.ascent)+string16(a.italicAngle?2:0)+"\0\0\0\0\0\0\0"),N.addTable("hhea","\0\0\0"+safeString16(a.ascent)+safeString16(a.descent)+"\0\0\0\0\0\0\0\0"+safeString16(a.capHeight)+safeString16(Math.tan(a.italicAngle)*a.xHeight)+"\0\0\0\0\0\0\0\0\0\0\0\0"+string16(p)),N.addTable("hmtx",function fontFieldsHmtx(){for(var t=r.charstrings,a=r.cff?r.cff.widths:null,i="\0\0\0\0",o=1,l=p;o<l;o++){var c=0;if(t){var u=t[o-1];c="width"in u?u.width:0}else a&&(c=Math.ceil(a[o]||0));i+=string16(c)+string16(0)}return i}()),N.addTable("maxp","\0\0P\0"+string16(p)),N.addTable("name",createNameTable(t)),N.addTable("post",createPostTable(a)),N.toArray()},get spaceWidth(){for(var t,r=["space","minus","one","i","I"],a=0,o=r.length;a<o;a++){var c=r[a];if(c in this.widths){t=this.widths[c];break}var u=(0,l.getGlyphsUnicode)()[c],h=0;if(this.composite&&this.cMap.contains(u)&&(h=this.cMap.lookup(u)),!h&&this.toUnicode&&(h=this.toUnicode.charCodeOf(u)),h<=0&&(h=u),t=this.widths[h])break}return t=t||this.defaultWidth,(0,i.shadow)(this,"spaceWidth",t)},charToGlyph:function Font_charToGlyph(t,r){var a,o,l,c=t;this.cMap&&this.cMap.contains(t)&&(c=this.cMap.lookup(t)),o=this.widths[c],o=(0,i.isNum)(o)?o:this.defaultWidth;var u=this.vmetrics&&this.vmetrics[c],d=this.toUnicode.get(t)||this.fallbackToUnicode.get(t)||t;"number"==typeof d&&(d=String.fromCharCode(d));var p=t in this.toFontChar;if(a=this.toFontChar[t]||t,this.missingFile){var m=this.differences[t]||this.defaultEncoding[t];".notdef"!==m&&""!==m||"Type1"!==this.type||(a=32),a=(0,h.mapSpecialUnicodeValues)(a)}this.isType3Font&&(l=a);var g=null;if(this.seacMap&&this.seacMap[t]){p=!0;var b=this.seacMap[t];a=b.baseFontCharCode,g={fontChar:String.fromCodePoint(b.accentFontCharCode),offset:b.accentOffset}}var y="";"number"==typeof a&&(a<=1114111?y=String.fromCodePoint(a):(0,i.warn)("charToGlyph - invalid fontCharCode: ".concat(a)));var v=this.glyphCache[t];return v&&v.matchesForCache(y,d,g,o,u,l,r,p)||(v=new _(y,d,g,o,u,l,r,p),this.glyphCache[t]=v),v},charsToGlyphs:function Font_charsToGlyphs(t){var r,a,i,o=this.charsCache;if(o&&(r=o[t]))return r;o||(o=this.charsCache=Object.create(null)),r=[];var l,c=t,u=0;if(this.cMap)for(var h=Object.create(null);u<t.length;){this.cMap.readCharCode(t,u,h),i=h.charcode;var d=h.length;u+=d;var p=1===d&&32===t.charCodeAt(u-1);a=this.charToGlyph(i,p),r.push(a)}else for(u=0,l=t.length;u<l;++u)i=t.charCodeAt(u),a=this.charToGlyph(i,32===i),r.push(a);return o[c]=r},get glyphCacheValues(){return Object.values(this.glyphCache)}},Font}();r.Font=I;var P=function ErrorFontClosure(){function ErrorFont(t){this.error=t,this.loadedName="g_font_error",this.missingFile=!0}return ErrorFont.prototype={charsToGlyphs:function ErrorFont_charsToGlyphs(){return[]},exportData:function exportData(){return{error:this.error}}},ErrorFont}();function type1FontGlyphMapping(t,r,a){var i,o,u,h=Object.create(null),d=!!(t.flags&C.Symbolic);if(t.baseEncodingName)for(u=(0,c.getEncoding)(t.baseEncodingName),o=0;o<u.length;o++)i=a.indexOf(u[o]),h[o]=i>=0?i:0;else if(d)for(o in r)h[o]=r[o];else for(u=c.StandardEncoding,o=0;o<u.length;o++)i=a.indexOf(u[o]),h[o]=i>=0?i:0;var p,m=t.differences;if(m)for(o in m){var g=m[o];if(-1===(i=a.indexOf(g))){p||(p=(0,l.getGlyphsUnicode)());var b=recoverGlyphName(g,p);b!==g&&(i=a.indexOf(b))}h[o]=i>=0?i:0}return h}r.ErrorFont=P;var O=function Type1FontClosure(){function findBlock(t,r,a){for(var i,o=t.length,l=r.length,c=o-l,u=a,h=!1;u<c;){for(i=0;i<l&&t[u+i]===r[i];)i++;if(i>=l){for(u+=i;u<o&&(0,d.isWhiteSpace)(t[u]);)u++;h=!0;break}u++}return{found:h,length:u}}function Type1Font(t,r,a){var o=a.length1,l=(a.length2,r.peekBytes(6)),c=128===l[0]&&1===l[1];c&&(r.skip(6),o=l[5]<<24|l[4]<<16|l[3]<<8|l[2]);var u=function getHeaderBlock(t,r){var a,o,l,c,u=[101,101,120,101,99],h=t.pos;try{o=(a=t.getBytes(r)).length}catch(t){if(t instanceof d.MissingDataException)throw t}if(o===r&&(l=findBlock(a,u,r-2*u.length)).found&&l.length===r)return{stream:new g.Stream(a),length:r};for((0,i.warn)('Invalid "Length1" property in Type1 font -- trying to recover.'),t.pos=h;0!==(l=findBlock(t.peekBytes(2048),u,0)).length;)if(t.pos+=l.length,l.found){c=t.pos-h;break}return t.pos=h,c?{stream:new g.Stream(t.getBytes(c)),length:c}:((0,i.warn)('Unable to recover "Length1" property in Type1 font -- using as is.'),{stream:new g.Stream(t.getBytes(r)),length:r})}(r,o);new b.Type1Parser(u.stream,!1,S).extractFontHeader(a),c&&((l=r.getBytes(6))[5],l[4],l[3],l[2]);var h=function getEexecBlock(t,r){var a=t.getBytes();return{stream:new g.Stream(a),length:a.length}}(r),p=new b.Type1Parser(h.stream,!0,S).extractFontProgram(a);for(var m in p.properties)a[m]=p.properties[m];var y=p.charstrings,v=this.getType2Charstrings(y),k=this.getType2Subrs(p.subrs);this.charstrings=y,this.data=this.wrap(t,v,this.charstrings,k,a),this.seacs=this.getSeacs(p.charstrings)}return Type1Font.prototype={get numGlyphs(){return this.charstrings.length+1},getCharset:function Type1Font_getCharset(){for(var t=[".notdef"],r=this.charstrings,a=0;a<r.length;a++)t.push(r[a].glyphName);return t},getGlyphMapping:function Type1Font_getGlyphMapping(t){var r=this.charstrings;if(t.composite){for(var a=Object.create(null),i=0,o=r.length;i<o;i++){a[t.cMap.charCodeOf(i)]=i+1}return a}var l,c=[".notdef"];for(l=0;l<r.length;l++)c.push(r[l].glyphName);var u=t.builtInEncoding;if(u){var h=Object.create(null);for(var d in u)(l=c.indexOf(u[d]))>=0&&(h[d]=l)}return type1FontGlyphMapping(t,h,c)},hasGlyphId:function Type1Font_hasGlyphID(t){return!(t<0||t>=this.numGlyphs)&&(0===t||this.charstrings[t-1].charstring.length>0)},getSeacs:function Type1Font_getSeacs(t){var r,a,i=[];for(r=0,a=t.length;r<a;r++){var o=t[r];o.seac&&(i[r+1]=o.seac)}return i},getType2Charstrings:function Type1Font_getType2Charstrings(t){for(var r=[],a=0,i=t.length;a<i;a++)r.push(t[a].charstring);return r},getType2Subrs:function Type1Font_getType2Subrs(t){var r=0,a=t.length;r=a<1133?107:a<33769?1131:32768;var i,o=[];for(i=0;i<r;i++)o.push([11]);for(i=0;i<a;i++)o.push(t[i]);return o},wrap:function Type1Font_wrap(t,r,a,i,l){var c=new o.CFF;c.header=new o.CFFHeader(1,0,4,4),c.names=[t];var u=new o.CFFTopDict;u.setByName("version",391),u.setByName("Notice",392),u.setByName("FullName",393),u.setByName("FamilyName",394),u.setByName("Weight",395),u.setByName("Encoding",null),u.setByName("FontMatrix",l.fontMatrix),u.setByName("FontBBox",l.bbox),u.setByName("charset",null),u.setByName("CharStrings",null),u.setByName("Private",null),c.topDict=u;var h=new o.CFFStrings;h.add("Version 0.11"),h.add("See original notice"),h.add(t),h.add(t),h.add("Medium"),c.strings=h,c.globalSubrIndex=new o.CFFIndex;var d,p,m=r.length,g=[".notdef"];for(d=0;d<m;d++){var b=a[d].glyphName;-1===o.CFFStandardStrings.indexOf(b)&&h.add(b),g.push(b)}c.charset=new o.CFFCharset(!1,0,g);var y=new o.CFFIndex;for(y.add([139,14]),d=0;d<m;d++)y.add(r[d]);c.charStrings=y;var v=new o.CFFPrivateDict;v.setByName("Subrs",null);var S=["BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StemSnapH","StemSnapV","BlueShift","BlueFuzz","BlueScale","LanguageGroup","ExpansionFactor","ForceBold","StdHW","StdVW"];for(d=0,p=S.length;d<p;d++){var k=S[d];if(k in l.privateData){var w=l.privateData[k];if(Array.isArray(w))for(var C=w.length-1;C>0;C--)w[C]-=w[C-1];v.setByName(k,w)}}c.topDict.privateDict=v;var x=new o.CFFIndex;for(d=0,p=i.length;d<p;d++)x.add(i[d]);return v.subrsIndex=x,new o.CFFCompiler(c).compile()}},Type1Font}(),E=function CFFFontClosure(){function CFFFont(t,r){this.properties=r;var a=new o.CFFParser(t,r,S);this.cff=a.parse(),this.cff.duplicateFirstGlyph();var l=new o.CFFCompiler(this.cff);this.seacs=this.cff.seacs;try{this.data=l.compile()}catch(a){(0,i.warn)("Failed to compile font "+r.loadedName),this.data=t}}return CFFFont.prototype={get numGlyphs(){return this.cff.charStrings.count},getCharset:function CFFFont_getCharset(){return this.cff.charset.charset},getGlyphMapping:function CFFFont_getGlyphMapping(){var t,r,a=this.cff,i=this.properties,o=a.charset.charset;if(i.composite){if(t=Object.create(null),a.isCIDFont)for(r=0;r<o.length;r++){var l=o[r];t[i.cMap.charCodeOf(l)]=r}else for(r=0;r<a.charStrings.count;r++)t[i.cMap.charCodeOf(r)]=r;return t}return t=type1FontGlyphMapping(i,a.encoding?a.encoding.encoding:null,o)},hasGlyphId:function CFFFont_hasGlyphID(t){return this.cff.hasGlyphId(t)}},CFFFont}()},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CFFFDSelect=r.CFFCompiler=r.CFFPrivateDict=r.CFFTopDict=r.CFFCharset=r.CFFIndex=r.CFFStrings=r.CFFHeader=r.CFF=r.CFFParser=r.CFFStandardStrings=void 0;var i=a(5),o=a(224),l=a(225),c=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"];r.CFFStandardStrings=c;var u=391,h=function CFFParserClosure(){var t=[null,{id:"hstem",min:2,stackClearing:!0,stem:!0},null,{id:"vstem",min:2,stackClearing:!0,stem:!0},{id:"vmoveto",min:1,stackClearing:!0},{id:"rlineto",min:2,resetStack:!0},{id:"hlineto",min:1,resetStack:!0},{id:"vlineto",min:1,resetStack:!0},{id:"rrcurveto",min:6,resetStack:!0},null,{id:"callsubr",min:1,undefStack:!0},{id:"return",min:0,undefStack:!0},null,null,{id:"endchar",min:0,stackClearing:!0},null,null,null,{id:"hstemhm",min:2,stackClearing:!0,stem:!0},{id:"hintmask",min:0,stackClearing:!0},{id:"cntrmask",min:0,stackClearing:!0},{id:"rmoveto",min:2,stackClearing:!0},{id:"hmoveto",min:1,stackClearing:!0},{id:"vstemhm",min:2,stackClearing:!0,stem:!0},{id:"rcurveline",min:8,resetStack:!0},{id:"rlinecurve",min:8,resetStack:!0},{id:"vvcurveto",min:4,resetStack:!0},{id:"hhcurveto",min:4,resetStack:!0},null,{id:"callgsubr",min:1,undefStack:!0},{id:"vhcurveto",min:4,resetStack:!0},{id:"hvcurveto",min:4,resetStack:!0}],r=[null,null,null,{id:"and",min:2,stackDelta:-1},{id:"or",min:2,stackDelta:-1},{id:"not",min:1,stackDelta:0},null,null,null,{id:"abs",min:1,stackDelta:0},{id:"add",min:2,stackDelta:-1,stackFn:function stack_div(t,r){t[r-2]=t[r-2]+t[r-1]}},{id:"sub",min:2,stackDelta:-1,stackFn:function stack_div(t,r){t[r-2]=t[r-2]-t[r-1]}},{id:"div",min:2,stackDelta:-1,stackFn:function stack_div(t,r){t[r-2]=t[r-2]/t[r-1]}},null,{id:"neg",min:1,stackDelta:0,stackFn:function stack_div(t,r){t[r-1]=-t[r-1]}},{id:"eq",min:2,stackDelta:-1},null,null,{id:"drop",min:1,stackDelta:-1},null,{id:"put",min:2,stackDelta:-2},{id:"get",min:1,stackDelta:0},{id:"ifelse",min:4,stackDelta:-3},{id:"random",min:0,stackDelta:1},{id:"mul",min:2,stackDelta:-1,stackFn:function stack_div(t,r){t[r-2]=t[r-2]*t[r-1]}},null,{id:"sqrt",min:1,stackDelta:0},{id:"dup",min:1,stackDelta:1},{id:"exch",min:2,stackDelta:0},{id:"index",min:2,stackDelta:0},{id:"roll",min:3,stackDelta:-2},null,null,null,{id:"hflex",min:7,resetStack:!0},{id:"flex",min:13,resetStack:!0},{id:"hflex1",min:9,resetStack:!0},{id:"flex1",min:11,resetStack:!0}];function CFFParser(t,r,a){this.bytes=t.getBytes(),this.properties=r,this.seacAnalysisEnabled=!!a}return CFFParser.prototype={parse:function CFFParser_parse(){var t=this.properties,r=new d;this.cff=r;var a=this.parseHeader(),i=this.parseIndex(a.endPos),o=this.parseIndex(i.endPos),l=this.parseIndex(o.endPos),c=this.parseIndex(l.endPos),u=this.parseDict(o.obj.get(0)),h=this.createDict(y,u,r.strings);r.header=a.obj,r.names=this.parseNameIndex(i.obj),r.strings=this.parseStringIndex(l.obj),r.topDict=h,r.globalSubrIndex=c.obj,this.parsePrivateDict(r.topDict),r.isCIDFont=h.hasName("ROS");var p=h.getByName("CharStrings"),m=this.parseIndex(p).obj,g=h.getByName("FontMatrix");g&&(t.fontMatrix=g);var b,v,S=h.getByName("FontBBox");if(S&&(t.ascent=Math.max(S[3],S[1]),t.descent=Math.min(S[1],S[3]),t.ascentScaled=!0),r.isCIDFont){for(var k=this.parseIndex(h.getByName("FDArray")).obj,w=0,C=k.count;w<C;++w){var x=k.get(w),_=this.createDict(y,this.parseDict(x),r.strings);this.parsePrivateDict(_),r.fdArray.push(_)}v=null,b=this.parseCharsets(h.getByName("charset"),m.count,r.strings,!0),r.fdSelect=this.parseFDSelect(h.getByName("FDSelect"),m.count)}else b=this.parseCharsets(h.getByName("charset"),m.count,r.strings,!1),v=this.parseEncoding(h.getByName("Encoding"),t,r.strings,b.charset);r.charset=b,r.encoding=v;var A=this.parseCharStrings({charStrings:m,localSubrIndex:h.privateDict.subrsIndex,globalSubrIndex:c.obj,fdSelect:r.fdSelect,fdArray:r.fdArray,privateDict:h.privateDict});return r.charStrings=A.charStrings,r.seacs=A.seacs,r.widths=A.widths,r},parseHeader:function CFFParser_parseHeader(){for(var t=this.bytes,r=t.length,a=0;a<r&&1!==t[a];)++a;if(a>=r)throw new i.FormatError("Invalid CFF header");0!==a&&((0,i.info)("cff data is shifted"),t=t.subarray(a),this.bytes=t);var o=t[0],l=t[1],c=t[2],u=t[3];return{obj:new p(o,l,c,u),endPos:c}},parseDict:function CFFParser_parseDict(t){var r=0;function parseOperand(){var a=t[r++];return 30===a?function parseFloatOperand(){var a="",i=15,o=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"],l=t.length;for(;r<l;){var c=t[r++],u=c>>4,h=15&c;if(u===i)break;if(a+=o[u],h===i)break;a+=o[h]}return parseFloat(a)}():28===a?a=((a=t[r++])<<24|t[r++]<<16)>>16:29===a?a=(a=(a=(a=t[r++])<<8|t[r++])<<8|t[r++])<<8|t[r++]:a>=32&&a<=246?a-139:a>=247&&a<=250?256*(a-247)+t[r++]+108:a>=251&&a<=254?-256*(a-251)-t[r++]-108:((0,i.warn)('CFFParser_parseDict: "'+a+'" is a reserved command.'),NaN)}var a=[],o=[];r=0;for(var l=t.length;r<l;){var c=t[r];c<=21?(12===c&&(c=c<<8|t[++r]),o.push([c,a]),a=[],++r):a.push(parseOperand())}return o},parseIndex:function CFFParser_parseIndex(t){var r,a,i=new g,o=this.bytes,l=o[t++]<<8|o[t++],c=[],u=t;if(0!==l){var h=o[t++],d=t+(l+1)*h-1;for(r=0,a=l+1;r<a;++r){for(var p=0,m=0;m<h;++m)p<<=8,p+=o[t++];c.push(d+p)}u=c[l]}for(r=0,a=c.length-1;r<a;++r){var b=c[r],y=c[r+1];i.add(o.subarray(b,y))}return{obj:i,endPos:u}},parseNameIndex:function CFFParser_parseNameIndex(t){for(var r=[],a=0,o=t.count;a<o;++a){var l=t.get(a);r.push((0,i.bytesToString)(l))}return r},parseStringIndex:function CFFParser_parseStringIndex(t){for(var r=new m,a=0,o=t.count;a<o;++a){var l=t.get(a);r.add((0,i.bytesToString)(l))}return r},createDict:function CFFParser_createDict(t,r,a){for(var i=new t(a),o=0,l=r.length;o<l;++o){var c=r[o],u=c[0],h=c[1];i.setByKey(u,h)}return i},parseCharString:function CFFParser_parseCharString(a,o,l,c){if(!o||a.callDepth>10)return!1;for(var u=a.stackSize,h=a.stack,d=o.length,p=0;p<d;){var m=o[p++],g=null;if(12===m){var b=o[p++];0===b?(o[p-2]=139,o[p-1]=22,u=0):g=r[b]}else if(28===m)h[u]=(o[p]<<24|o[p+1]<<16)>>16,p+=2,u++;else if(14===m){if(u>=4&&(u-=4,this.seacAnalysisEnabled))return a.seac=h.slice(u,u+4),!1;g=t[m]}else if(m>=32&&m<=246)h[u]=m-139,u++;else if(m>=247&&m<=254)h[u]=m<251?(m-247<<8)+o[p]+108:-(m-251<<8)-o[p]-108,p++,u++;else if(255===m)h[u]=(o[p]<<24|o[p+1]<<16|o[p+2]<<8|o[p+3])/65536,p+=4,u++;else if(19===m||20===m)a.hints+=u>>1,p+=a.hints+7>>3,u%=2,g=t[m];else{if(10===m||29===m){var y;if(!(y=10===m?l:c))return g=t[m],(0,i.warn)("Missing subrsIndex for "+g.id),!1;var v=32768;y.count<1240?v=107:y.count<33900&&(v=1131);var S=h[--u]+v;if(S<0||S>=y.count||isNaN(S))return g=t[m],(0,i.warn)("Out of bounds subrIndex for "+g.id),!1;if(a.stackSize=u,a.callDepth++,!this.parseCharString(a,y.get(S),l,c))return!1;a.callDepth--,u=a.stackSize;continue}if(11===m)return a.stackSize=u,!0;g=t[m]}if(g){if(g.stem&&(a.hints+=u>>1,3===m||23===m?a.hasVStems=!0:!a.hasVStems||1!==m&&18!==m||((0,i.warn)("CFF stem hints are in wrong order"),o[p-1]=1===m?3:23)),"min"in g&&!a.undefStack&&u<g.min)return(0,i.warn)("Not enough parameters for "+g.id+"; actual: "+u+", expected: "+g.min),!1;a.firstStackClearing&&g.stackClearing&&(a.firstStackClearing=!1,(u-=g.min)>=2&&g.stem?u%=2:u>1&&(0,i.warn)("Found too many parameters for stack-clearing command"),u>0&&h[u-1]>=0&&(a.width=h[u-1])),"stackDelta"in g?("stackFn"in g&&g.stackFn(h,u),u+=g.stackDelta):g.stackClearing?u=0:g.resetStack?(u=0,a.undefStack=!1):g.undefStack&&(u=0,a.undefStack=!0,a.firstStackClearing=!1)}}return a.stackSize=u,!0},parseCharStrings:function parseCharStrings(t){for(var r=t.charStrings,a=t.localSubrIndex,o=t.globalSubrIndex,l=t.fdSelect,c=t.fdArray,u=t.privateDict,h=[],d=[],p=r.count,m=0;m<p;m++){var g=r.get(m),b={callDepth:0,stackSize:0,stack:[],undefStack:!0,hints:0,firstStackClearing:!0,seac:null,width:null,hasVStems:!1},y=!0,v=null,S=u;if(l&&c.length){var k=l.getFDIndex(m);-1===k&&((0,i.warn)("Glyph index is not in fd select."),y=!1),k>=c.length&&((0,i.warn)("Invalid fd index for glyph index."),y=!1),y&&(v=(S=c[k].privateDict).subrsIndex)}else a&&(v=a);if(y&&(y=this.parseCharString(b,g,v,o)),null!==b.width){var w=S.getByName("nominalWidthX");d[m]=w+b.width}else{var C=S.getByName("defaultWidthX");d[m]=C}null!==b.seac&&(h[m]=b.seac),y||r.set(m,new Uint8Array([14]))}return{charStrings:r,seacs:h,widths:d}},emptyPrivateDictionary:function CFFParser_emptyPrivateDictionary(t){var r=this.createDict(v,[],t.strings);t.setByKey(18,[0,0]),t.privateDict=r},parsePrivateDict:function CFFParser_parsePrivateDict(t){if(t.hasName("Private")){var r=t.getByName("Private");if(Array.isArray(r)&&2===r.length){var a=r[0],i=r[1];if(0===a||i>=this.bytes.length)this.emptyPrivateDictionary(t);else{var o=i+a,l=this.bytes.subarray(i,o),c=this.parseDict(l),u=this.createDict(v,c,t.strings);if(t.privateDict=u,u.getByName("Subrs")){var h=u.getByName("Subrs"),d=i+h;if(0===h||d>=this.bytes.length)this.emptyPrivateDictionary(t);else{var p=this.parseIndex(d);u.subrsIndex=p.obj}}}}else t.removeByName("Private")}else this.emptyPrivateDictionary(t)},parseCharsets:function CFFParser_parseCharsets(t,r,a,l){if(0===t)return new k(!0,S.ISO_ADOBE,o.ISOAdobeCharset);if(1===t)return new k(!0,S.EXPERT,o.ExpertCharset);if(2===t)return new k(!0,S.EXPERT_SUBSET,o.ExpertSubsetCharset);var c,u,h,d=this.bytes,p=t,m=d[t++],g=[l?0:".notdef"];switch(r-=1,m){case 0:for(h=0;h<r;h++)c=d[t++]<<8|d[t++],g.push(l?c:a.get(c));break;case 1:for(;g.length<=r;)for(c=d[t++]<<8|d[t++],u=d[t++],h=0;h<=u;h++)g.push(l?c++:a.get(c++));break;case 2:for(;g.length<=r;)for(c=d[t++]<<8|d[t++],u=d[t++]<<8|d[t++],h=0;h<=u;h++)g.push(l?c++:a.get(c++));break;default:throw new i.FormatError("Unknown charset format")}var b=t,y=d.subarray(p,b);return new k(!1,m,g,y)},parseEncoding:function CFFParser_parseEncoding(t,r,a,o){var c,u,h,d=Object.create(null),p=this.bytes,m=!1,g=null;if(0===t||1===t){m=!0,c=t;var b=t?l.ExpertEncoding:l.StandardEncoding;for(u=0,h=o.length;u<h;u++){var y=b.indexOf(o[u]);-1!==y&&(d[y]=u)}}else{var v=t;switch(127&(c=p[t++])){case 0:var S=p[t++];for(u=1;u<=S;u++)d[p[t++]]=u;break;case 1:var k=p[t++],C=1;for(u=0;u<k;u++)for(var x=p[t++],_=p[t++],A=x;A<=x+_;A++)d[A]=C++;break;default:throw new i.FormatError("Unknown encoding format: ".concat(c," in CFF"))}var R=t;128&c&&(p[v]&=127,function readSupplement(){var r=p[t++];for(u=0;u<r;u++){var i=p[t++],l=(p[t++]<<8)+(255&p[t++]);d[i]=o.indexOf(a.get(l))}}()),g=p.subarray(v,R)}return new w(m,c&=127,d,g)},parseFDSelect:function CFFParser_parseFDSelect(t,r){var a,o=this.bytes,l=o[t++],c=[];switch(l){case 0:for(a=0;a<r;++a){var u=o[t++];c.push(u)}break;case 3:var h=o[t++]<<8|o[t++];for(a=0;a<h;++a){var d=o[t++]<<8|o[t++];0===a&&0!==d&&((0,i.warn)("parseFDSelect: The first range must have a first GID of 0 -- trying to recover."),d=0);for(var p=o[t++],m=o[t]<<8|o[t+1],g=d;g<m;++g)c.push(p)}t+=2;break;default:throw new i.FormatError('parseFDSelect: Unknown format "'.concat(l,'".'))}if(c.length!==r)throw new i.FormatError("parseFDSelect: Invalid font data.");return new C(l,c)}},CFFParser}();r.CFFParser=h;var d=function CFFClosure(){function CFF(){this.header=null,this.names=[],this.topDict=null,this.strings=new m,this.globalSubrIndex=null,this.encoding=null,this.charset=null,this.charStrings=null,this.fdArray=[],this.fdSelect=null,this.isCIDFont=!1}return CFF.prototype={duplicateFirstGlyph:function CFF_duplicateFirstGlyph(){if(this.charStrings.count>=65535)(0,i.warn)("Not enough space in charstrings to duplicate first glyph.");else{var t=this.charStrings.get(0);this.charStrings.add(t),this.isCIDFont&&this.fdSelect.fdSelect.push(this.fdSelect.fdSelect[0])}},hasGlyphId:function CFF_hasGlyphID(t){return!(t<0||t>=this.charStrings.count)&&this.charStrings.get(t).length>0}},CFF}();r.CFF=d;var p=function p(t,r,a,i){this.major=t,this.minor=r,this.hdrSize=a,this.offSize=i};r.CFFHeader=p;var m=function CFFStringsClosure(){function CFFStrings(){this.strings=[]}return CFFStrings.prototype={get:function CFFStrings_get(t){return t>=0&&t<=390?c[t]:t-u<=this.strings.length?this.strings[t-u]:c[0]},getSID:function CFFStrings_getSID(t){var r=c.indexOf(t);return-1!==r?r:-1!==(r=this.strings.indexOf(t))?r+u:-1},add:function CFFStrings_add(t){this.strings.push(t)},get count(){return this.strings.length}},CFFStrings}();r.CFFStrings=m;var g=function CFFIndexClosure(){function CFFIndex(){this.objects=[],this.length=0}return CFFIndex.prototype={add:function CFFIndex_add(t){this.length+=t.length,this.objects.push(t)},set:function CFFIndex_set(t,r){this.length+=r.length-this.objects[t].length,this.objects[t]=r},get:function CFFIndex_get(t){return this.objects[t]},get count(){return this.objects.length}},CFFIndex}();r.CFFIndex=g;var b=function CFFDictClosure(){function CFFDict(t,r){this.keyToNameMap=t.keyToNameMap,this.nameToKeyMap=t.nameToKeyMap,this.defaults=t.defaults,this.types=t.types,this.opcodes=t.opcodes,this.order=t.order,this.strings=r,this.values=Object.create(null)}return CFFDict.prototype={setByKey:function CFFDict_setByKey(t,r){if(!(t in this.keyToNameMap))return!1;var a=r.length;if(0===a)return!0;for(var o=0;o<a;o++)if(isNaN(r[o]))return(0,i.warn)('Invalid CFFDict value: "'+r+'" for key "'+t+'".'),!0;var l=this.types[t];return"num"!==l&&"sid"!==l&&"offset"!==l||(r=r[0]),this.values[t]=r,!0},setByName:function CFFDict_setByName(t,r){if(!(t in this.nameToKeyMap))throw new i.FormatError('Invalid dictionary name "'.concat(t,'"'));this.values[this.nameToKeyMap[t]]=r},hasName:function CFFDict_hasName(t){return this.nameToKeyMap[t]in this.values},getByName:function CFFDict_getByName(t){if(!(t in this.nameToKeyMap))throw new i.FormatError("Invalid dictionary name ".concat(t,'"'));var r=this.nameToKeyMap[t];return r in this.values?this.values[r]:this.defaults[r]},removeByName:function CFFDict_removeByName(t){delete this.values[this.nameToKeyMap[t]]}},CFFDict.createTables=function CFFDict_createTables(t){for(var r={keyToNameMap:{},nameToKeyMap:{},defaults:{},types:{},opcodes:{},order:[]},a=0,i=t.length;a<i;++a){var o=t[a],l=Array.isArray(o[0])?(o[0][0]<<8)+o[0][1]:o[0];r.keyToNameMap[l]=o[1],r.nameToKeyMap[o[1]]=l,r.types[l]=o[2],r.defaults[l]=o[3],r.opcodes[l]=Array.isArray(o[0])?o[0]:[o[0]],r.order.push(l)}return r},CFFDict}(),y=function CFFTopDictClosure(){var t=[[[12,30],"ROS",["sid","sid","num"],null],[[12,20],"SyntheticBase","num",null],[0,"version","sid",null],[1,"Notice","sid",null],[[12,0],"Copyright","sid",null],[2,"FullName","sid",null],[3,"FamilyName","sid",null],[4,"Weight","sid",null],[[12,1],"isFixedPitch","num",0],[[12,2],"ItalicAngle","num",0],[[12,3],"UnderlinePosition","num",-100],[[12,4],"UnderlineThickness","num",50],[[12,5],"PaintType","num",0],[[12,6],"CharstringType","num",2],[[12,7],"FontMatrix",["num","num","num","num","num","num"],[.001,0,0,.001,0,0]],[13,"UniqueID","num",null],[5,"FontBBox",["num","num","num","num"],[0,0,0,0]],[[12,8],"StrokeWidth","num",0],[14,"XUID","array",null],[15,"charset","offset",0],[16,"Encoding","offset",0],[17,"CharStrings","offset",0],[18,"Private",["offset","offset"],null],[[12,21],"PostScript","sid",null],[[12,22],"BaseFontName","sid",null],[[12,23],"BaseFontBlend","delta",null],[[12,31],"CIDFontVersion","num",0],[[12,32],"CIDFontRevision","num",0],[[12,33],"CIDFontType","num",0],[[12,34],"CIDCount","num",8720],[[12,35],"UIDBase","num",null],[[12,37],"FDSelect","offset",null],[[12,36],"FDArray","offset",null],[[12,38],"FontName","sid",null]],r=null;function CFFTopDict(a){null===r&&(r=b.createTables(t)),b.call(this,r,a),this.privateDict=null}return CFFTopDict.prototype=Object.create(b.prototype),CFFTopDict}();r.CFFTopDict=y;var v=function CFFPrivateDictClosure(){var t=[[6,"BlueValues","delta",null],[7,"OtherBlues","delta",null],[8,"FamilyBlues","delta",null],[9,"FamilyOtherBlues","delta",null],[[12,9],"BlueScale","num",.039625],[[12,10],"BlueShift","num",7],[[12,11],"BlueFuzz","num",1],[10,"StdHW","num",null],[11,"StdVW","num",null],[[12,12],"StemSnapH","delta",null],[[12,13],"StemSnapV","delta",null],[[12,14],"ForceBold","num",0],[[12,17],"LanguageGroup","num",0],[[12,18],"ExpansionFactor","num",.06],[[12,19],"initialRandomSeed","num",0],[20,"defaultWidthX","num",0],[21,"nominalWidthX","num",0],[19,"Subrs","offset",null]],r=null;function CFFPrivateDict(a){null===r&&(r=b.createTables(t)),b.call(this,r,a),this.subrsIndex=null}return CFFPrivateDict.prototype=Object.create(b.prototype),CFFPrivateDict}();r.CFFPrivateDict=v;var S={ISO_ADOBE:0,EXPERT:1,EXPERT_SUBSET:2},k=function k(t,r,a,i){this.predefined=t,this.format=r,this.charset=a,this.raw=i};r.CFFCharset=k;var w=function w(t,r,a,i){this.predefined=t,this.format=r,this.encoding=a,this.raw=i},C=function CFFFDSelectClosure(){function CFFFDSelect(t,r){this.format=t,this.fdSelect=r}return CFFFDSelect.prototype={getFDIndex:function CFFFDSelect_get(t){return t<0||t>=this.fdSelect.length?-1:this.fdSelect[t]}},CFFFDSelect}();r.CFFFDSelect=C;var x=function CFFOffsetTrackerClosure(){function CFFOffsetTracker(){this.offsets=Object.create(null)}return CFFOffsetTracker.prototype={isTracking:function CFFOffsetTracker_isTracking(t){return t in this.offsets},track:function CFFOffsetTracker_track(t,r){if(t in this.offsets)throw new i.FormatError("Already tracking location of ".concat(t));this.offsets[t]=r},offset:function CFFOffsetTracker_offset(t){for(var r in this.offsets)this.offsets[r]+=t},setEntryLocation:function CFFOffsetTracker_setEntryLocation(t,r,a){if(!(t in this.offsets))throw new i.FormatError("Not tracking location of ".concat(t));for(var o=a.data,l=this.offsets[t],c=0,u=r.length;c<u;++c){var h=5*c+l,d=h+1,p=h+2,m=h+3,g=h+4;if(29!==o[h]||0!==o[d]||0!==o[p]||0!==o[m]||0!==o[g])throw new i.FormatError("writing to an offset that is not empty");var b=r[c];o[h]=29,o[d]=b>>24&255,o[p]=b>>16&255,o[m]=b>>8&255,o[g]=255&b}}},CFFOffsetTracker}(),_=function CFFCompilerClosure(){function CFFCompiler(t){this.cff=t}return CFFCompiler.prototype={compile:function CFFCompiler_compile(){var t=this.cff,r={data:[],length:0,add:function CFFCompiler_add(t){this.data=this.data.concat(t),this.length=this.data.length}},a=this.compileHeader(t.header);r.add(a);var o=this.compileNameIndex(t.names);if(r.add(o),t.isCIDFont&&t.topDict.hasName("FontMatrix")){var l=t.topDict.getByName("FontMatrix");t.topDict.removeByName("FontMatrix");for(var c=0,u=t.fdArray.length;c<u;c++){var h=t.fdArray[c],d=l.slice(0);h.hasName("FontMatrix")&&(d=i.Util.transform(d,h.getByName("FontMatrix"))),h.setByName("FontMatrix",d)}}t.topDict.setByName("charset",0);var p=this.compileTopDicts([t.topDict],r.length,t.isCIDFont);r.add(p.output);var m=p.trackers[0],g=this.compileStringIndex(t.strings.strings);r.add(g);var b=this.compileIndex(t.globalSubrIndex);if(r.add(b),t.encoding&&t.topDict.hasName("Encoding"))if(t.encoding.predefined)m.setEntryLocation("Encoding",[t.encoding.format],r);else{var y=this.compileEncoding(t.encoding);m.setEntryLocation("Encoding",[r.length],r),r.add(y)}var v=this.compileCharset(t.charset,t.charStrings.count,t.strings,t.isCIDFont);m.setEntryLocation("charset",[r.length],r),r.add(v);var S=this.compileCharStrings(t.charStrings);if(m.setEntryLocation("CharStrings",[r.length],r),r.add(S),t.isCIDFont){m.setEntryLocation("FDSelect",[r.length],r);var k=this.compileFDSelect(t.fdSelect);r.add(k),p=this.compileTopDicts(t.fdArray,r.length,!0),m.setEntryLocation("FDArray",[r.length],r),r.add(p.output);var w=p.trackers;this.compilePrivateDicts(t.fdArray,w,r)}return this.compilePrivateDicts([t.topDict],[m],r),r.add([0]),r.data},encodeNumber:function CFFCompiler_encodeNumber(t){return parseFloat(t)!==parseInt(t,10)||isNaN(t)?this.encodeFloat(t):this.encodeInteger(t)},encodeFloat:function CFFCompiler_encodeFloat(t){var r=t.toString(),a=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(r);if(a){var i=parseFloat("1e"+((a[2]?+a[2]:0)+a[1].length));r=(Math.round(t*i)/i).toString()}var o,l,c="";for(o=0,l=r.length;o<l;++o){var u=r[o];c+="e"===u?"-"===r[++o]?"c":"b":"."===u?"a":"-"===u?"e":u}var h=[30];for(o=0,l=(c+=1&c.length?"f":"ff").length;o<l;o+=2)h.push(parseInt(c.substring(o,o+2),16));return h},encodeInteger:function CFFCompiler_encodeInteger(t){return t>=-107&&t<=107?[t+139]:t>=108&&t<=1131?[247+((t-=108)>>8),255&t]:t>=-1131&&t<=-108?[251+((t=-t-108)>>8),255&t]:t>=-32768&&t<=32767?[28,t>>8&255,255&t]:[29,t>>24&255,t>>16&255,t>>8&255,255&t]},compileHeader:function CFFCompiler_compileHeader(t){return[t.major,t.minor,t.hdrSize,t.offSize]},compileNameIndex:function CFFCompiler_compileNameIndex(t){for(var r=new g,a=0,o=t.length;a<o;++a){for(var l=t[a],c=Math.min(l.length,127),u=new Array(c),h=0;h<c;h++){var d=l[h];(d<"!"||d>"~"||"["===d||"]"===d||"("===d||")"===d||"{"===d||"}"===d||"<"===d||">"===d||"/"===d||"%"===d)&&(d="_"),u[h]=d}""===(u=u.join(""))&&(u="Bad_Font_Name"),r.add((0,i.stringToBytes)(u))}return this.compileIndex(r)},compileTopDicts:function CFFCompiler_compileTopDicts(t,r,a){for(var i=[],o=new g,l=0,c=t.length;l<c;++l){var u=t[l];a&&(u.removeByName("CIDFontVersion"),u.removeByName("CIDFontRevision"),u.removeByName("CIDFontType"),u.removeByName("CIDCount"),u.removeByName("UIDBase"));var h=new x,d=this.compileDict(u,h);i.push(h),o.add(d),h.offset(r)}return{trackers:i,output:o=this.compileIndex(o,i)}},compilePrivateDicts:function CFFCompiler_compilePrivateDicts(t,r,a){for(var o=0,l=t.length;o<l;++o){var c=t[o],u=c.privateDict;if(!u||!c.hasName("Private"))throw new i.FormatError("There must be a private dictionary.");var h=new x,d=this.compileDict(u,h),p=a.length;if(h.offset(p),d.length||(p=0),r[o].setEntryLocation("Private",[d.length,p],a),a.add(d),u.subrsIndex&&u.hasName("Subrs")){var m=this.compileIndex(u.subrsIndex);h.setEntryLocation("Subrs",[d.length],a),a.add(m)}}},compileDict:function CFFCompiler_compileDict(t,r){for(var a=[],o=t.order,l=0;l<o.length;++l){var c=o[l];if(c in t.values){var u=t.values[c],h=t.types[c];if(Array.isArray(h)||(h=[h]),Array.isArray(u)||(u=[u]),0!==u.length){for(var d=0,p=h.length;d<p;++d){var m=h[d],g=u[d];switch(m){case"num":case"sid":a=a.concat(this.encodeNumber(g));break;case"offset":var b=t.keyToNameMap[c];r.isTracking(b)||r.track(b,a.length),a=a.concat([29,0,0,0,0]);break;case"array":case"delta":a=a.concat(this.encodeNumber(g));for(var y=1,v=u.length;y<v;++y)a=a.concat(this.encodeNumber(u[y]));break;default:throw new i.FormatError("Unknown data type of ".concat(m))}}a=a.concat(t.opcodes[c])}}}return a},compileStringIndex:function CFFCompiler_compileStringIndex(t){for(var r=new g,a=0,o=t.length;a<o;++a)r.add((0,i.stringToBytes)(t[a]));return this.compileIndex(r)},compileGlobalSubrIndex:function CFFCompiler_compileGlobalSubrIndex(){var t=this.cff.globalSubrIndex;this.out.writeByteArray(this.compileIndex(t))},compileCharStrings:function CFFCompiler_compileCharStrings(t){for(var r=new g,a=0;a<t.count;a++){var i=t.get(a);0!==i.length?r.add(i):r.add(new Uint8Array([139,14]))}return this.compileIndex(r)},compileCharset:function CFFCompiler_compileCharset(t,r,a,o){var l,c=r-1;if(o)l=new Uint8Array([2,0,0,c>>8&255,255&c]);else{(l=new Uint8Array(1+2*c))[0]=0;for(var u=0,h=t.charset.length,d=!1,p=1;p<l.length;p+=2){var m=0;if(u<h){var g=t.charset[u++];-1===(m=a.getSID(g))&&(m=0,d||(d=!0,(0,i.warn)("Couldn't find ".concat(g," in CFF strings"))))}l[p]=m>>8&255,l[p+1]=255&m}}return this.compileTypedArray(l)},compileEncoding:function CFFCompiler_compileEncoding(t){return this.compileTypedArray(t.raw)},compileFDSelect:function CFFCompiler_compileFDSelect(t){var r,a,i=t.format;switch(i){case 0:for((r=new Uint8Array(1+t.fdSelect.length))[0]=i,a=0;a<t.fdSelect.length;a++)r[a+1]=t.fdSelect[a];break;case 3:var o=t.fdSelect[0],l=[i,0,0,0,0,o];for(a=1;a<t.fdSelect.length;a++){var c=t.fdSelect[a];c!==o&&(l.push(a>>8&255,255&a,c),o=c)}var u=(l.length-3)/3;l[1]=u>>8&255,l[2]=255&u,l.push(a>>8&255,255&a),r=new Uint8Array(l)}return this.compileTypedArray(r)},compileTypedArray:function CFFCompiler_compileTypedArray(t){for(var r=[],a=0,i=t.length;a<i;++a)r[a]=t[a];return r},compileIndex:function CFFCompiler_compileIndex(t,r){r=r||[];var a=t.objects,i=a.length;if(0===i)return[0,0,0];var o,l,c=[i>>8&255,255&i],u=1;for(o=0;o<i;++o)u+=a[o].length;l=u<256?1:u<65536?2:u<16777216?3:4,c.push(l);var h=1;for(o=0;o<i+1;o++)1===l?c.push(255&h):2===l?c.push(h>>8&255,255&h):3===l?c.push(h>>16&255,h>>8&255,255&h):c.push(h>>>24&255,h>>16&255,h>>8&255,255&h),a[o]&&(h+=a[o].length);for(o=0;o<i;o++){r[o]&&r[o].offset(c.length);for(var d=0,p=a[o].length;d<p;d++)c.push(a[o][d])}return c}},CFFCompiler}();r.CFFCompiler=_},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ExpertSubsetCharset=r.ExpertCharset=r.ISOAdobeCharset=void 0;r.ISOAdobeCharset=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron"];r.ExpertCharset=[".notdef","space","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","fi","fl","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"];r.ExpertSubsetCharset=[".notdef","space","dollaroldstyle","dollarsuperior","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","fi","fl","ffi","ffl","parenleftinferior","parenrightinferior","hyphensuperior","colonmonetary","onefitted","rupiah","centoldstyle","figuredash","hypheninferior","onequarter","onehalf","threequarters","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior"]},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getEncoding=function getEncoding(t){switch(t){case"WinAnsiEncoding":return u;case"StandardEncoding":return c;case"MacRomanEncoding":return l;case"SymbolSetEncoding":return h;case"ZapfDingbatsEncoding":return d;case"ExpertEncoding":return i;case"MacExpertEncoding":return o;default:return null}},r.ExpertEncoding=r.ZapfDingbatsEncoding=r.SymbolSetEncoding=r.MacRomanEncoding=r.StandardEncoding=r.WinAnsiEncoding=void 0;var i=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"];r.ExpertEncoding=i;var o=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","centoldstyle","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","","threequartersemdash","","questionsmall","","","","","Ethsmall","","","onequarter","onehalf","threequarters","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","","","","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hypheninferior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","asuperior","centsuperior","","","","","Aacutesmall","Agravesmall","Acircumflexsmall","Adieresissmall","Atildesmall","Aringsmall","Ccedillasmall","Eacutesmall","Egravesmall","Ecircumflexsmall","Edieresissmall","Iacutesmall","Igravesmall","Icircumflexsmall","Idieresissmall","Ntildesmall","Oacutesmall","Ogravesmall","Ocircumflexsmall","Odieresissmall","Otildesmall","Uacutesmall","Ugravesmall","Ucircumflexsmall","Udieresissmall","","eightsuperior","fourinferior","threeinferior","sixinferior","eightinferior","seveninferior","Scaronsmall","","centinferior","twoinferior","","Dieresissmall","","Caronsmall","osuperior","fiveinferior","","commainferior","periodinferior","Yacutesmall","","dollarinferior","","","Thornsmall","","nineinferior","zeroinferior","Zcaronsmall","AEsmall","Oslashsmall","questiondownsmall","oneinferior","Lslashsmall","","","","","","","Cedillasmall","","","","","","OEsmall","figuredash","hyphensuperior","","","","","exclamdownsmall","","Ydieresissmall","","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","ninesuperior","zerosuperior","","esuperior","rsuperior","tsuperior","","","isuperior","ssuperior","dsuperior","","","","","","lsuperior","Ogoneksmall","Brevesmall","Macronsmall","bsuperior","nsuperior","msuperior","commasuperior","periodsuperior","Dotaccentsmall","Ringsmall","","","",""],l=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","space","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron"];r.MacRomanEncoding=l;var c=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls","","","",""];r.StandardEncoding=c;var u=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","bullet","Euro","bullet","quotesinglbase","florin","quotedblbase","ellipsis","dagger","daggerdbl","circumflex","perthousand","Scaron","guilsinglleft","OE","bullet","Zcaron","bullet","bullet","quoteleft","quoteright","quotedblleft","quotedblright","bullet","endash","emdash","tilde","trademark","scaron","guilsinglright","oe","bullet","zcaron","Ydieresis","space","exclamdown","cent","sterling","currency","yen","brokenbar","section","dieresis","copyright","ordfeminine","guillemotleft","logicalnot","hyphen","registered","macron","degree","plusminus","twosuperior","threesuperior","acute","mu","paragraph","periodcentered","cedilla","onesuperior","ordmasculine","guillemotright","onequarter","onehalf","threequarters","questiondown","Agrave","Aacute","Acircumflex","Atilde","Adieresis","Aring","AE","Ccedilla","Egrave","Eacute","Ecircumflex","Edieresis","Igrave","Iacute","Icircumflex","Idieresis","Eth","Ntilde","Ograve","Oacute","Ocircumflex","Otilde","Odieresis","multiply","Oslash","Ugrave","Uacute","Ucircumflex","Udieresis","Yacute","Thorn","germandbls","agrave","aacute","acircumflex","atilde","adieresis","aring","ae","ccedilla","egrave","eacute","ecircumflex","edieresis","igrave","iacute","icircumflex","idieresis","eth","ntilde","ograve","oacute","ocircumflex","otilde","odieresis","divide","oslash","ugrave","uacute","ucircumflex","udieresis","yacute","thorn","ydieresis"];r.WinAnsiEncoding=u;var h=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","universal","numbersign","existential","percent","ampersand","suchthat","parenleft","parenright","asteriskmath","plus","comma","minus","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","congruent","Alpha","Beta","Chi","Delta","Epsilon","Phi","Gamma","Eta","Iota","theta1","Kappa","Lambda","Mu","Nu","Omicron","Pi","Theta","Rho","Sigma","Tau","Upsilon","sigma1","Omega","Xi","Psi","Zeta","bracketleft","therefore","bracketright","perpendicular","underscore","radicalex","alpha","beta","chi","delta","epsilon","phi","gamma","eta","iota","phi1","kappa","lambda","mu","nu","omicron","pi","theta","rho","sigma","tau","upsilon","omega1","omega","xi","psi","zeta","braceleft","bar","braceright","similar","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Euro","Upsilon1","minute","lessequal","fraction","infinity","florin","club","diamond","heart","spade","arrowboth","arrowleft","arrowup","arrowright","arrowdown","degree","plusminus","second","greaterequal","multiply","proportional","partialdiff","bullet","divide","notequal","equivalence","approxequal","ellipsis","arrowvertex","arrowhorizex","carriagereturn","aleph","Ifraktur","Rfraktur","weierstrass","circlemultiply","circleplus","emptyset","intersection","union","propersuperset","reflexsuperset","notsubset","propersubset","reflexsubset","element","notelement","angle","gradient","registerserif","copyrightserif","trademarkserif","product","radical","dotmath","logicalnot","logicaland","logicalor","arrowdblboth","arrowdblleft","arrowdblup","arrowdblright","arrowdbldown","lozenge","angleleft","registersans","copyrightsans","trademarksans","summation","parenlefttp","parenleftex","parenleftbt","bracketlefttp","bracketleftex","bracketleftbt","bracelefttp","braceleftmid","braceleftbt","braceex","","angleright","integral","integraltp","integralex","integralbt","parenrighttp","parenrightex","parenrightbt","bracketrighttp","bracketrightex","bracketrightbt","bracerighttp","bracerightmid","bracerightbt",""];r.SymbolSetEncoding=h;var d=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","a1","a2","a202","a3","a4","a5","a119","a118","a117","a11","a12","a13","a14","a15","a16","a105","a17","a18","a19","a20","a21","a22","a23","a24","a25","a26","a27","a28","a6","a7","a8","a9","a10","a29","a30","a31","a32","a33","a34","a35","a36","a37","a38","a39","a40","a41","a42","a43","a44","a45","a46","a47","a48","a49","a50","a51","a52","a53","a54","a55","a56","a57","a58","a59","a60","a61","a62","a63","a64","a65","a66","a67","a68","a69","a70","a71","a72","a73","a74","a203","a75","a204","a76","a77","a78","a79","a81","a82","a83","a84","a97","a98","a99","a100","","a89","a90","a93","a94","a91","a92","a205","a85","a206","a86","a87","a88","a95","a96","","","","","","","","","","","","","","","","","","","","a101","a102","a103","a104","a106","a107","a108","a112","a111","a110","a109","a120","a121","a122","a123","a124","a125","a126","a127","a128","a129","a130","a131","a132","a133","a134","a135","a136","a137","a138","a139","a140","a141","a142","a143","a144","a145","a146","a147","a148","a149","a150","a151","a152","a153","a154","a155","a156","a157","a158","a159","a160","a161","a163","a164","a196","a165","a192","a166","a167","a168","a169","a170","a171","a172","a173","a162","a174","a175","a176","a177","a178","a179","a193","a180","a199","a181","a200","a182","","a201","a183","a184","a197","a185","a194","a198","a186","a195","a187","a188","a189","a190","a191",""];r.ZapfDingbatsEncoding=d},function(t,r,a){var i=a(201).getLookupTableFactory,o=i((function(t){t.A=65,t.AE=198,t.AEacute=508,t.AEmacron=482,t.AEsmall=63462,t.Aacute=193,t.Aacutesmall=63457,t.Abreve=258,t.Abreveacute=7854,t.Abrevecyrillic=1232,t.Abrevedotbelow=7862,t.Abrevegrave=7856,t.Abrevehookabove=7858,t.Abrevetilde=7860,t.Acaron=461,t.Acircle=9398,t.Acircumflex=194,t.Acircumflexacute=7844,t.Acircumflexdotbelow=7852,t.Acircumflexgrave=7846,t.Acircumflexhookabove=7848,t.Acircumflexsmall=63458,t.Acircumflextilde=7850,t.Acute=63177,t.Acutesmall=63412,t.Acyrillic=1040,t.Adblgrave=512,t.Adieresis=196,t.Adieresiscyrillic=1234,t.Adieresismacron=478,t.Adieresissmall=63460,t.Adotbelow=7840,t.Adotmacron=480,t.Agrave=192,t.Agravesmall=63456,t.Ahookabove=7842,t.Aiecyrillic=1236,t.Ainvertedbreve=514,t.Alpha=913,t.Alphatonos=902,t.Amacron=256,t.Amonospace=65313,t.Aogonek=260,t.Aring=197,t.Aringacute=506,t.Aringbelow=7680,t.Aringsmall=63461,t.Asmall=63329,t.Atilde=195,t.Atildesmall=63459,t.Aybarmenian=1329,t.B=66,t.Bcircle=9399,t.Bdotaccent=7682,t.Bdotbelow=7684,t.Becyrillic=1041,t.Benarmenian=1330,t.Beta=914,t.Bhook=385,t.Blinebelow=7686,t.Bmonospace=65314,t.Brevesmall=63220,t.Bsmall=63330,t.Btopbar=386,t.C=67,t.Caarmenian=1342,t.Cacute=262,t.Caron=63178,t.Caronsmall=63221,t.Ccaron=268,t.Ccedilla=199,t.Ccedillaacute=7688,t.Ccedillasmall=63463,t.Ccircle=9400,t.Ccircumflex=264,t.Cdot=266,t.Cdotaccent=266,t.Cedillasmall=63416,t.Chaarmenian=1353,t.Cheabkhasiancyrillic=1212,t.Checyrillic=1063,t.Chedescenderabkhasiancyrillic=1214,t.Chedescendercyrillic=1206,t.Chedieresiscyrillic=1268,t.Cheharmenian=1347,t.Chekhakassiancyrillic=1227,t.Cheverticalstrokecyrillic=1208,t.Chi=935,t.Chook=391,t.Circumflexsmall=63222,t.Cmonospace=65315,t.Coarmenian=1361,t.Csmall=63331,t.D=68,t.DZ=497,t.DZcaron=452,t.Daarmenian=1332,t.Dafrican=393,t.Dcaron=270,t.Dcedilla=7696,t.Dcircle=9401,t.Dcircumflexbelow=7698,t.Dcroat=272,t.Ddotaccent=7690,t.Ddotbelow=7692,t.Decyrillic=1044,t.Deicoptic=1006,t.Delta=8710,t.Deltagreek=916,t.Dhook=394,t.Dieresis=63179,t.DieresisAcute=63180,t.DieresisGrave=63181,t.Dieresissmall=63400,t.Digammagreek=988,t.Djecyrillic=1026,t.Dlinebelow=7694,t.Dmonospace=65316,t.Dotaccentsmall=63223,t.Dslash=272,t.Dsmall=63332,t.Dtopbar=395,t.Dz=498,t.Dzcaron=453,t.Dzeabkhasiancyrillic=1248,t.Dzecyrillic=1029,t.Dzhecyrillic=1039,t.E=69,t.Eacute=201,t.Eacutesmall=63465,t.Ebreve=276,t.Ecaron=282,t.Ecedillabreve=7708,t.Echarmenian=1333,t.Ecircle=9402,t.Ecircumflex=202,t.Ecircumflexacute=7870,t.Ecircumflexbelow=7704,t.Ecircumflexdotbelow=7878,t.Ecircumflexgrave=7872,t.Ecircumflexhookabove=7874,t.Ecircumflexsmall=63466,t.Ecircumflextilde=7876,t.Ecyrillic=1028,t.Edblgrave=516,t.Edieresis=203,t.Edieresissmall=63467,t.Edot=278,t.Edotaccent=278,t.Edotbelow=7864,t.Efcyrillic=1060,t.Egrave=200,t.Egravesmall=63464,t.Eharmenian=1335,t.Ehookabove=7866,t.Eightroman=8551,t.Einvertedbreve=518,t.Eiotifiedcyrillic=1124,t.Elcyrillic=1051,t.Elevenroman=8554,t.Emacron=274,t.Emacronacute=7702,t.Emacrongrave=7700,t.Emcyrillic=1052,t.Emonospace=65317,t.Encyrillic=1053,t.Endescendercyrillic=1186,t.Eng=330,t.Enghecyrillic=1188,t.Enhookcyrillic=1223,t.Eogonek=280,t.Eopen=400,t.Epsilon=917,t.Epsilontonos=904,t.Ercyrillic=1056,t.Ereversed=398,t.Ereversedcyrillic=1069,t.Escyrillic=1057,t.Esdescendercyrillic=1194,t.Esh=425,t.Esmall=63333,t.Eta=919,t.Etarmenian=1336,t.Etatonos=905,t.Eth=208,t.Ethsmall=63472,t.Etilde=7868,t.Etildebelow=7706,t.Euro=8364,t.Ezh=439,t.Ezhcaron=494,t.Ezhreversed=440,t.F=70,t.Fcircle=9403,t.Fdotaccent=7710,t.Feharmenian=1366,t.Feicoptic=996,t.Fhook=401,t.Fitacyrillic=1138,t.Fiveroman=8548,t.Fmonospace=65318,t.Fourroman=8547,t.Fsmall=63334,t.G=71,t.GBsquare=13191,t.Gacute=500,t.Gamma=915,t.Gammaafrican=404,t.Gangiacoptic=1002,t.Gbreve=286,t.Gcaron=486,t.Gcedilla=290,t.Gcircle=9404,t.Gcircumflex=284,t.Gcommaaccent=290,t.Gdot=288,t.Gdotaccent=288,t.Gecyrillic=1043,t.Ghadarmenian=1346,t.Ghemiddlehookcyrillic=1172,t.Ghestrokecyrillic=1170,t.Gheupturncyrillic=1168,t.Ghook=403,t.Gimarmenian=1331,t.Gjecyrillic=1027,t.Gmacron=7712,t.Gmonospace=65319,t.Grave=63182,t.Gravesmall=63328,t.Gsmall=63335,t.Gsmallhook=667,t.Gstroke=484,t.H=72,t.H18533=9679,t.H18543=9642,t.H18551=9643,t.H22073=9633,t.HPsquare=13259,t.Haabkhasiancyrillic=1192,t.Hadescendercyrillic=1202,t.Hardsigncyrillic=1066,t.Hbar=294,t.Hbrevebelow=7722,t.Hcedilla=7720,t.Hcircle=9405,t.Hcircumflex=292,t.Hdieresis=7718,t.Hdotaccent=7714,t.Hdotbelow=7716,t.Hmonospace=65320,t.Hoarmenian=1344,t.Horicoptic=1e3,t.Hsmall=63336,t.Hungarumlaut=63183,t.Hungarumlautsmall=63224,t.Hzsquare=13200,t.I=73,t.IAcyrillic=1071,t.IJ=306,t.IUcyrillic=1070,t.Iacute=205,t.Iacutesmall=63469,t.Ibreve=300,t.Icaron=463,t.Icircle=9406,t.Icircumflex=206,t.Icircumflexsmall=63470,t.Icyrillic=1030,t.Idblgrave=520,t.Idieresis=207,t.Idieresisacute=7726,t.Idieresiscyrillic=1252,t.Idieresissmall=63471,t.Idot=304,t.Idotaccent=304,t.Idotbelow=7882,t.Iebrevecyrillic=1238,t.Iecyrillic=1045,t.Ifraktur=8465,t.Igrave=204,t.Igravesmall=63468,t.Ihookabove=7880,t.Iicyrillic=1048,t.Iinvertedbreve=522,t.Iishortcyrillic=1049,t.Imacron=298,t.Imacroncyrillic=1250,t.Imonospace=65321,t.Iniarmenian=1339,t.Iocyrillic=1025,t.Iogonek=302,t.Iota=921,t.Iotaafrican=406,t.Iotadieresis=938,t.Iotatonos=906,t.Ismall=63337,t.Istroke=407,t.Itilde=296,t.Itildebelow=7724,t.Izhitsacyrillic=1140,t.Izhitsadblgravecyrillic=1142,t.J=74,t.Jaarmenian=1345,t.Jcircle=9407,t.Jcircumflex=308,t.Jecyrillic=1032,t.Jheharmenian=1355,t.Jmonospace=65322,t.Jsmall=63338,t.K=75,t.KBsquare=13189,t.KKsquare=13261,t.Kabashkircyrillic=1184,t.Kacute=7728,t.Kacyrillic=1050,t.Kadescendercyrillic=1178,t.Kahookcyrillic=1219,t.Kappa=922,t.Kastrokecyrillic=1182,t.Kaverticalstrokecyrillic=1180,t.Kcaron=488,t.Kcedilla=310,t.Kcircle=9408,t.Kcommaaccent=310,t.Kdotbelow=7730,t.Keharmenian=1364,t.Kenarmenian=1343,t.Khacyrillic=1061,t.Kheicoptic=998,t.Khook=408,t.Kjecyrillic=1036,t.Klinebelow=7732,t.Kmonospace=65323,t.Koppacyrillic=1152,t.Koppagreek=990,t.Ksicyrillic=1134,t.Ksmall=63339,t.L=76,t.LJ=455,t.LL=63167,t.Lacute=313,t.Lambda=923,t.Lcaron=317,t.Lcedilla=315,t.Lcircle=9409,t.Lcircumflexbelow=7740,t.Lcommaaccent=315,t.Ldot=319,t.Ldotaccent=319,t.Ldotbelow=7734,t.Ldotbelowmacron=7736,t.Liwnarmenian=1340,t.Lj=456,t.Ljecyrillic=1033,t.Llinebelow=7738,t.Lmonospace=65324,t.Lslash=321,t.Lslashsmall=63225,t.Lsmall=63340,t.M=77,t.MBsquare=13190,t.Macron=63184,t.Macronsmall=63407,t.Macute=7742,t.Mcircle=9410,t.Mdotaccent=7744,t.Mdotbelow=7746,t.Menarmenian=1348,t.Mmonospace=65325,t.Msmall=63341,t.Mturned=412,t.Mu=924,t.N=78,t.NJ=458,t.Nacute=323,t.Ncaron=327,t.Ncedilla=325,t.Ncircle=9411,t.Ncircumflexbelow=7754,t.Ncommaaccent=325,t.Ndotaccent=7748,t.Ndotbelow=7750,t.Nhookleft=413,t.Nineroman=8552,t.Nj=459,t.Njecyrillic=1034,t.Nlinebelow=7752,t.Nmonospace=65326,t.Nowarmenian=1350,t.Nsmall=63342,t.Ntilde=209,t.Ntildesmall=63473,t.Nu=925,t.O=79,t.OE=338,t.OEsmall=63226,t.Oacute=211,t.Oacutesmall=63475,t.Obarredcyrillic=1256,t.Obarreddieresiscyrillic=1258,t.Obreve=334,t.Ocaron=465,t.Ocenteredtilde=415,t.Ocircle=9412,t.Ocircumflex=212,t.Ocircumflexacute=7888,t.Ocircumflexdotbelow=7896,t.Ocircumflexgrave=7890,t.Ocircumflexhookabove=7892,t.Ocircumflexsmall=63476,t.Ocircumflextilde=7894,t.Ocyrillic=1054,t.Odblacute=336,t.Odblgrave=524,t.Odieresis=214,t.Odieresiscyrillic=1254,t.Odieresissmall=63478,t.Odotbelow=7884,t.Ogoneksmall=63227,t.Ograve=210,t.Ogravesmall=63474,t.Oharmenian=1365,t.Ohm=8486,t.Ohookabove=7886,t.Ohorn=416,t.Ohornacute=7898,t.Ohorndotbelow=7906,t.Ohorngrave=7900,t.Ohornhookabove=7902,t.Ohorntilde=7904,t.Ohungarumlaut=336,t.Oi=418,t.Oinvertedbreve=526,t.Omacron=332,t.Omacronacute=7762,t.Omacrongrave=7760,t.Omega=8486,t.Omegacyrillic=1120,t.Omegagreek=937,t.Omegaroundcyrillic=1146,t.Omegatitlocyrillic=1148,t.Omegatonos=911,t.Omicron=927,t.Omicrontonos=908,t.Omonospace=65327,t.Oneroman=8544,t.Oogonek=490,t.Oogonekmacron=492,t.Oopen=390,t.Oslash=216,t.Oslashacute=510,t.Oslashsmall=63480,t.Osmall=63343,t.Ostrokeacute=510,t.Otcyrillic=1150,t.Otilde=213,t.Otildeacute=7756,t.Otildedieresis=7758,t.Otildesmall=63477,t.P=80,t.Pacute=7764,t.Pcircle=9413,t.Pdotaccent=7766,t.Pecyrillic=1055,t.Peharmenian=1354,t.Pemiddlehookcyrillic=1190,t.Phi=934,t.Phook=420,t.Pi=928,t.Piwrarmenian=1363,t.Pmonospace=65328,t.Psi=936,t.Psicyrillic=1136,t.Psmall=63344,t.Q=81,t.Qcircle=9414,t.Qmonospace=65329,t.Qsmall=63345,t.R=82,t.Raarmenian=1356,t.Racute=340,t.Rcaron=344,t.Rcedilla=342,t.Rcircle=9415,t.Rcommaaccent=342,t.Rdblgrave=528,t.Rdotaccent=7768,t.Rdotbelow=7770,t.Rdotbelowmacron=7772,t.Reharmenian=1360,t.Rfraktur=8476,t.Rho=929,t.Ringsmall=63228,t.Rinvertedbreve=530,t.Rlinebelow=7774,t.Rmonospace=65330,t.Rsmall=63346,t.Rsmallinverted=641,t.Rsmallinvertedsuperior=694,t.S=83,t.SF010000=9484,t.SF020000=9492,t.SF030000=9488,t.SF040000=9496,t.SF050000=9532,t.SF060000=9516,t.SF070000=9524,t.SF080000=9500,t.SF090000=9508,t.SF100000=9472,t.SF110000=9474,t.SF190000=9569,t.SF200000=9570,t.SF210000=9558,t.SF220000=9557,t.SF230000=9571,t.SF240000=9553,t.SF250000=9559,t.SF260000=9565,t.SF270000=9564,t.SF280000=9563,t.SF360000=9566,t.SF370000=9567,t.SF380000=9562,t.SF390000=9556,t.SF400000=9577,t.SF410000=9574,t.SF420000=9568,t.SF430000=9552,t.SF440000=9580,t.SF450000=9575,t.SF460000=9576,t.SF470000=9572,t.SF480000=9573,t.SF490000=9561,t.SF500000=9560,t.SF510000=9554,t.SF520000=9555,t.SF530000=9579,t.SF540000=9578,t.Sacute=346,t.Sacutedotaccent=7780,t.Sampigreek=992,t.Scaron=352,t.Scarondotaccent=7782,t.Scaronsmall=63229,t.Scedilla=350,t.Schwa=399,t.Schwacyrillic=1240,t.Schwadieresiscyrillic=1242,t.Scircle=9416,t.Scircumflex=348,t.Scommaaccent=536,t.Sdotaccent=7776,t.Sdotbelow=7778,t.Sdotbelowdotaccent=7784,t.Seharmenian=1357,t.Sevenroman=8550,t.Shaarmenian=1351,t.Shacyrillic=1064,t.Shchacyrillic=1065,t.Sheicoptic=994,t.Shhacyrillic=1210,t.Shimacoptic=1004,t.Sigma=931,t.Sixroman=8549,t.Smonospace=65331,t.Softsigncyrillic=1068,t.Ssmall=63347,t.Stigmagreek=986,t.T=84,t.Tau=932,t.Tbar=358,t.Tcaron=356,t.Tcedilla=354,t.Tcircle=9417,t.Tcircumflexbelow=7792,t.Tcommaaccent=354,t.Tdotaccent=7786,t.Tdotbelow=7788,t.Tecyrillic=1058,t.Tedescendercyrillic=1196,t.Tenroman=8553,t.Tetsecyrillic=1204,t.Theta=920,t.Thook=428,t.Thorn=222,t.Thornsmall=63486,t.Threeroman=8546,t.Tildesmall=63230,t.Tiwnarmenian=1359,t.Tlinebelow=7790,t.Tmonospace=65332,t.Toarmenian=1337,t.Tonefive=444,t.Tonesix=388,t.Tonetwo=423,t.Tretroflexhook=430,t.Tsecyrillic=1062,t.Tshecyrillic=1035,t.Tsmall=63348,t.Twelveroman=8555,t.Tworoman=8545,t.U=85,t.Uacute=218,t.Uacutesmall=63482,t.Ubreve=364,t.Ucaron=467,t.Ucircle=9418,t.Ucircumflex=219,t.Ucircumflexbelow=7798,t.Ucircumflexsmall=63483,t.Ucyrillic=1059,t.Udblacute=368,t.Udblgrave=532,t.Udieresis=220,t.Udieresisacute=471,t.Udieresisbelow=7794,t.Udieresiscaron=473,t.Udieresiscyrillic=1264,t.Udieresisgrave=475,t.Udieresismacron=469,t.Udieresissmall=63484,t.Udotbelow=7908,t.Ugrave=217,t.Ugravesmall=63481,t.Uhookabove=7910,t.Uhorn=431,t.Uhornacute=7912,t.Uhorndotbelow=7920,t.Uhorngrave=7914,t.Uhornhookabove=7916,t.Uhorntilde=7918,t.Uhungarumlaut=368,t.Uhungarumlautcyrillic=1266,t.Uinvertedbreve=534,t.Ukcyrillic=1144,t.Umacron=362,t.Umacroncyrillic=1262,t.Umacrondieresis=7802,t.Umonospace=65333,t.Uogonek=370,t.Upsilon=933,t.Upsilon1=978,t.Upsilonacutehooksymbolgreek=979,t.Upsilonafrican=433,t.Upsilondieresis=939,t.Upsilondieresishooksymbolgreek=980,t.Upsilonhooksymbol=978,t.Upsilontonos=910,t.Uring=366,t.Ushortcyrillic=1038,t.Usmall=63349,t.Ustraightcyrillic=1198,t.Ustraightstrokecyrillic=1200,t.Utilde=360,t.Utildeacute=7800,t.Utildebelow=7796,t.V=86,t.Vcircle=9419,t.Vdotbelow=7806,t.Vecyrillic=1042,t.Vewarmenian=1358,t.Vhook=434,t.Vmonospace=65334,t.Voarmenian=1352,t.Vsmall=63350,t.Vtilde=7804,t.W=87,t.Wacute=7810,t.Wcircle=9420,t.Wcircumflex=372,t.Wdieresis=7812,t.Wdotaccent=7814,t.Wdotbelow=7816,t.Wgrave=7808,t.Wmonospace=65335,t.Wsmall=63351,t.X=88,t.Xcircle=9421,t.Xdieresis=7820,t.Xdotaccent=7818,t.Xeharmenian=1341,t.Xi=926,t.Xmonospace=65336,t.Xsmall=63352,t.Y=89,t.Yacute=221,t.Yacutesmall=63485,t.Yatcyrillic=1122,t.Ycircle=9422,t.Ycircumflex=374,t.Ydieresis=376,t.Ydieresissmall=63487,t.Ydotaccent=7822,t.Ydotbelow=7924,t.Yericyrillic=1067,t.Yerudieresiscyrillic=1272,t.Ygrave=7922,t.Yhook=435,t.Yhookabove=7926,t.Yiarmenian=1349,t.Yicyrillic=1031,t.Yiwnarmenian=1362,t.Ymonospace=65337,t.Ysmall=63353,t.Ytilde=7928,t.Yusbigcyrillic=1130,t.Yusbigiotifiedcyrillic=1132,t.Yuslittlecyrillic=1126,t.Yuslittleiotifiedcyrillic=1128,t.Z=90,t.Zaarmenian=1334,t.Zacute=377,t.Zcaron=381,t.Zcaronsmall=63231,t.Zcircle=9423,t.Zcircumflex=7824,t.Zdot=379,t.Zdotaccent=379,t.Zdotbelow=7826,t.Zecyrillic=1047,t.Zedescendercyrillic=1176,t.Zedieresiscyrillic=1246,t.Zeta=918,t.Zhearmenian=1338,t.Zhebrevecyrillic=1217,t.Zhecyrillic=1046,t.Zhedescendercyrillic=1174,t.Zhedieresiscyrillic=1244,t.Zlinebelow=7828,t.Zmonospace=65338,t.Zsmall=63354,t.Zstroke=437,t.a=97,t.aabengali=2438,t.aacute=225,t.aadeva=2310,t.aagujarati=2694,t.aagurmukhi=2566,t.aamatragurmukhi=2622,t.aarusquare=13059,t.aavowelsignbengali=2494,t.aavowelsigndeva=2366,t.aavowelsigngujarati=2750,t.abbreviationmarkarmenian=1375,t.abbreviationsigndeva=2416,t.abengali=2437,t.abopomofo=12570,t.abreve=259,t.abreveacute=7855,t.abrevecyrillic=1233,t.abrevedotbelow=7863,t.abrevegrave=7857,t.abrevehookabove=7859,t.abrevetilde=7861,t.acaron=462,t.acircle=9424,t.acircumflex=226,t.acircumflexacute=7845,t.acircumflexdotbelow=7853,t.acircumflexgrave=7847,t.acircumflexhookabove=7849,t.acircumflextilde=7851,t.acute=180,t.acutebelowcmb=791,t.acutecmb=769,t.acutecomb=769,t.acutedeva=2388,t.acutelowmod=719,t.acutetonecmb=833,t.acyrillic=1072,t.adblgrave=513,t.addakgurmukhi=2673,t.adeva=2309,t.adieresis=228,t.adieresiscyrillic=1235,t.adieresismacron=479,t.adotbelow=7841,t.adotmacron=481,t.ae=230,t.aeacute=509,t.aekorean=12624,t.aemacron=483,t.afii00208=8213,t.afii08941=8356,t.afii10017=1040,t.afii10018=1041,t.afii10019=1042,t.afii10020=1043,t.afii10021=1044,t.afii10022=1045,t.afii10023=1025,t.afii10024=1046,t.afii10025=1047,t.afii10026=1048,t.afii10027=1049,t.afii10028=1050,t.afii10029=1051,t.afii10030=1052;t.afii10031=1053,t.afii10032=1054,t.afii10033=1055,t.afii10034=1056,t.afii10035=1057,t.afii10036=1058,t.afii10037=1059,t.afii10038=1060,t.afii10039=1061,t.afii10040=1062,t.afii10041=1063,t.afii10042=1064,t.afii10043=1065,t.afii10044=1066,t.afii10045=1067,t.afii10046=1068,t.afii10047=1069,t.afii10048=1070,t.afii10049=1071,t.afii10050=1168,t.afii10051=1026,t.afii10052=1027,t.afii10053=1028,t.afii10054=1029,t.afii10055=1030,t.afii10056=1031,t.afii10057=1032,t.afii10058=1033,t.afii10059=1034,t.afii10060=1035,t.afii10061=1036,t.afii10062=1038,t.afii10063=63172,t.afii10064=63173,t.afii10065=1072,t.afii10066=1073,t.afii10067=1074,t.afii10068=1075,t.afii10069=1076,t.afii10070=1077,t.afii10071=1105,t.afii10072=1078,t.afii10073=1079,t.afii10074=1080,t.afii10075=1081,t.afii10076=1082,t.afii10077=1083,t.afii10078=1084,t.afii10079=1085,t.afii10080=1086,t.afii10081=1087,t.afii10082=1088,t.afii10083=1089,t.afii10084=1090,t.afii10085=1091,t.afii10086=1092,t.afii10087=1093,t.afii10088=1094,t.afii10089=1095,t.afii10090=1096,t.afii10091=1097,t.afii10092=1098,t.afii10093=1099,t.afii10094=1100,t.afii10095=1101,t.afii10096=1102,t.afii10097=1103,t.afii10098=1169,t.afii10099=1106,t.afii10100=1107,t.afii10101=1108,t.afii10102=1109,t.afii10103=1110,t.afii10104=1111,t.afii10105=1112,t.afii10106=1113,t.afii10107=1114,t.afii10108=1115,t.afii10109=1116,t.afii10110=1118,t.afii10145=1039,t.afii10146=1122,t.afii10147=1138,t.afii10148=1140,t.afii10192=63174,t.afii10193=1119,t.afii10194=1123,t.afii10195=1139,t.afii10196=1141,t.afii10831=63175,t.afii10832=63176,t.afii10846=1241,t.afii299=8206,t.afii300=8207,t.afii301=8205,t.afii57381=1642,t.afii57388=1548,t.afii57392=1632,t.afii57393=1633,t.afii57394=1634,t.afii57395=1635,t.afii57396=1636,t.afii57397=1637,t.afii57398=1638,t.afii57399=1639,t.afii57400=1640,t.afii57401=1641,t.afii57403=1563,t.afii57407=1567,t.afii57409=1569,t.afii57410=1570,t.afii57411=1571,t.afii57412=1572,t.afii57413=1573,t.afii57414=1574,t.afii57415=1575,t.afii57416=1576,t.afii57417=1577,t.afii57418=1578,t.afii57419=1579,t.afii57420=1580,t.afii57421=1581,t.afii57422=1582,t.afii57423=1583,t.afii57424=1584,t.afii57425=1585,t.afii57426=1586,t.afii57427=1587,t.afii57428=1588,t.afii57429=1589,t.afii57430=1590,t.afii57431=1591,t.afii57432=1592,t.afii57433=1593,t.afii57434=1594,t.afii57440=1600,t.afii57441=1601,t.afii57442=1602,t.afii57443=1603,t.afii57444=1604,t.afii57445=1605,t.afii57446=1606,t.afii57448=1608,t.afii57449=1609,t.afii57450=1610,t.afii57451=1611,t.afii57452=1612,t.afii57453=1613,t.afii57454=1614,t.afii57455=1615,t.afii57456=1616,t.afii57457=1617,t.afii57458=1618,t.afii57470=1607,t.afii57505=1700,t.afii57506=1662,t.afii57507=1670,t.afii57508=1688,t.afii57509=1711,t.afii57511=1657,t.afii57512=1672,t.afii57513=1681,t.afii57514=1722,t.afii57519=1746,t.afii57534=1749,t.afii57636=8362,t.afii57645=1470,t.afii57658=1475,t.afii57664=1488,t.afii57665=1489,t.afii57666=1490,t.afii57667=1491,t.afii57668=1492,t.afii57669=1493,t.afii57670=1494,t.afii57671=1495,t.afii57672=1496,t.afii57673=1497,t.afii57674=1498,t.afii57675=1499,t.afii57676=1500,t.afii57677=1501,t.afii57678=1502,t.afii57679=1503,t.afii57680=1504,t.afii57681=1505,t.afii57682=1506,t.afii57683=1507,t.afii57684=1508,t.afii57685=1509,t.afii57686=1510,t.afii57687=1511,t.afii57688=1512,t.afii57689=1513,t.afii57690=1514,t.afii57694=64298,t.afii57695=64299,t.afii57700=64331,t.afii57705=64287,t.afii57716=1520,t.afii57717=1521,t.afii57718=1522,t.afii57723=64309,t.afii57793=1460,t.afii57794=1461,t.afii57795=1462,t.afii57796=1467,t.afii57797=1464,t.afii57798=1463,t.afii57799=1456,t.afii57800=1458,t.afii57801=1457,t.afii57802=1459,t.afii57803=1474,t.afii57804=1473,t.afii57806=1465,t.afii57807=1468,t.afii57839=1469,t.afii57841=1471,t.afii57842=1472,t.afii57929=700,t.afii61248=8453,t.afii61289=8467,t.afii61352=8470,t.afii61573=8236,t.afii61574=8237,t.afii61575=8238,t.afii61664=8204,t.afii63167=1645,t.afii64937=701,t.agrave=224,t.agujarati=2693,t.agurmukhi=2565,t.ahiragana=12354,t.ahookabove=7843,t.aibengali=2448,t.aibopomofo=12574,t.aideva=2320,t.aiecyrillic=1237,t.aigujarati=2704,t.aigurmukhi=2576,t.aimatragurmukhi=2632,t.ainarabic=1593,t.ainfinalarabic=65226,t.aininitialarabic=65227,t.ainmedialarabic=65228,t.ainvertedbreve=515,t.aivowelsignbengali=2504,t.aivowelsigndeva=2376,t.aivowelsigngujarati=2760,t.akatakana=12450,t.akatakanahalfwidth=65393,t.akorean=12623,t.alef=1488,t.alefarabic=1575,t.alefdageshhebrew=64304,t.aleffinalarabic=65166,t.alefhamzaabovearabic=1571,t.alefhamzaabovefinalarabic=65156,t.alefhamzabelowarabic=1573,t.alefhamzabelowfinalarabic=65160,t.alefhebrew=1488,t.aleflamedhebrew=64335,t.alefmaddaabovearabic=1570,t.alefmaddaabovefinalarabic=65154,t.alefmaksuraarabic=1609,t.alefmaksurafinalarabic=65264,t.alefmaksurainitialarabic=65267,t.alefmaksuramedialarabic=65268,t.alefpatahhebrew=64302,t.alefqamatshebrew=64303,t.aleph=8501,t.allequal=8780,t.alpha=945,t.alphatonos=940,t.amacron=257,t.amonospace=65345,t.ampersand=38,t.ampersandmonospace=65286,t.ampersandsmall=63270,t.amsquare=13250,t.anbopomofo=12578,t.angbopomofo=12580,t.angbracketleft=12296,t.angbracketright=12297,t.angkhankhuthai=3674,t.angle=8736,t.anglebracketleft=12296,t.anglebracketleftvertical=65087,t.anglebracketright=12297,t.anglebracketrightvertical=65088,t.angleleft=9001,t.angleright=9002,t.angstrom=8491,t.anoteleia=903,t.anudattadeva=2386,t.anusvarabengali=2434,t.anusvaradeva=2306,t.anusvaragujarati=2690,t.aogonek=261,t.apaatosquare=13056,t.aparen=9372,t.apostrophearmenian=1370,t.apostrophemod=700,t.apple=63743,t.approaches=8784,t.approxequal=8776,t.approxequalorimage=8786,t.approximatelyequal=8773,t.araeaekorean=12686,t.araeakorean=12685,t.arc=8978,t.arighthalfring=7834,t.aring=229,t.aringacute=507,t.aringbelow=7681,t.arrowboth=8596,t.arrowdashdown=8675,t.arrowdashleft=8672,t.arrowdashright=8674,t.arrowdashup=8673,t.arrowdblboth=8660,t.arrowdbldown=8659,t.arrowdblleft=8656,t.arrowdblright=8658,t.arrowdblup=8657,t.arrowdown=8595,t.arrowdownleft=8601,t.arrowdownright=8600,t.arrowdownwhite=8681,t.arrowheaddownmod=709,t.arrowheadleftmod=706,t.arrowheadrightmod=707,t.arrowheadupmod=708,t.arrowhorizex=63719,t.arrowleft=8592,t.arrowleftdbl=8656,t.arrowleftdblstroke=8653,t.arrowleftoverright=8646,t.arrowleftwhite=8678,t.arrowright=8594,t.arrowrightdblstroke=8655,t.arrowrightheavy=10142,t.arrowrightoverleft=8644,t.arrowrightwhite=8680,t.arrowtableft=8676,t.arrowtabright=8677,t.arrowup=8593,t.arrowupdn=8597,t.arrowupdnbse=8616,t.arrowupdownbase=8616,t.arrowupleft=8598,t.arrowupleftofdown=8645,t.arrowupright=8599,t.arrowupwhite=8679,t.arrowvertex=63718,t.asciicircum=94,t.asciicircummonospace=65342,t.asciitilde=126,t.asciitildemonospace=65374,t.ascript=593,t.ascriptturned=594,t.asmallhiragana=12353,t.asmallkatakana=12449,t.asmallkatakanahalfwidth=65383,t.asterisk=42,t.asteriskaltonearabic=1645,t.asteriskarabic=1645,t.asteriskmath=8727,t.asteriskmonospace=65290,t.asterisksmall=65121,t.asterism=8258,t.asuperior=63209,t.asymptoticallyequal=8771,t.at=64,t.atilde=227,t.atmonospace=65312,t.atsmall=65131,t.aturned=592,t.aubengali=2452,t.aubopomofo=12576,t.audeva=2324,t.augujarati=2708,t.augurmukhi=2580,t.aulengthmarkbengali=2519,t.aumatragurmukhi=2636,t.auvowelsignbengali=2508,t.auvowelsigndeva=2380,t.auvowelsigngujarati=2764,t.avagrahadeva=2365,t.aybarmenian=1377,t.ayin=1506,t.ayinaltonehebrew=64288,t.ayinhebrew=1506,t.b=98,t.babengali=2476,t.backslash=92,t.backslashmonospace=65340,t.badeva=2348,t.bagujarati=2732,t.bagurmukhi=2604,t.bahiragana=12400,t.bahtthai=3647,t.bakatakana=12496,t.bar=124,t.barmonospace=65372,t.bbopomofo=12549,t.bcircle=9425,t.bdotaccent=7683,t.bdotbelow=7685,t.beamedsixteenthnotes=9836,t.because=8757,t.becyrillic=1073,t.beharabic=1576,t.behfinalarabic=65168,t.behinitialarabic=65169,t.behiragana=12409,t.behmedialarabic=65170,t.behmeeminitialarabic=64671,t.behmeemisolatedarabic=64520,t.behnoonfinalarabic=64621,t.bekatakana=12505,t.benarmenian=1378,t.bet=1489,t.beta=946,t.betasymbolgreek=976,t.betdagesh=64305,t.betdageshhebrew=64305,t.bethebrew=1489,t.betrafehebrew=64332,t.bhabengali=2477,t.bhadeva=2349,t.bhagujarati=2733,t.bhagurmukhi=2605,t.bhook=595,t.bihiragana=12403,t.bikatakana=12499,t.bilabialclick=664,t.bindigurmukhi=2562,t.birusquare=13105,t.blackcircle=9679,t.blackdiamond=9670,t.blackdownpointingtriangle=9660,t.blackleftpointingpointer=9668,t.blackleftpointingtriangle=9664,t.blacklenticularbracketleft=12304,t.blacklenticularbracketleftvertical=65083,t.blacklenticularbracketright=12305,t.blacklenticularbracketrightvertical=65084,t.blacklowerlefttriangle=9699,t.blacklowerrighttriangle=9698,t.blackrectangle=9644,t.blackrightpointingpointer=9658,t.blackrightpointingtriangle=9654,t.blacksmallsquare=9642,t.blacksmilingface=9787,t.blacksquare=9632,t.blackstar=9733,t.blackupperlefttriangle=9700,t.blackupperrighttriangle=9701,t.blackuppointingsmalltriangle=9652,t.blackuppointingtriangle=9650,t.blank=9251,t.blinebelow=7687,t.block=9608,t.bmonospace=65346,t.bobaimaithai=3610,t.bohiragana=12412,t.bokatakana=12508,t.bparen=9373,t.bqsquare=13251,t.braceex=63732,t.braceleft=123,t.braceleftbt=63731,t.braceleftmid=63730,t.braceleftmonospace=65371,t.braceleftsmall=65115,t.bracelefttp=63729,t.braceleftvertical=65079,t.braceright=125,t.bracerightbt=63742,t.bracerightmid=63741,t.bracerightmonospace=65373,t.bracerightsmall=65116,t.bracerighttp=63740,t.bracerightvertical=65080,t.bracketleft=91,t.bracketleftbt=63728,t.bracketleftex=63727,t.bracketleftmonospace=65339,t.bracketlefttp=63726,t.bracketright=93,t.bracketrightbt=63739,t.bracketrightex=63738,t.bracketrightmonospace=65341,t.bracketrighttp=63737,t.breve=728,t.brevebelowcmb=814,t.brevecmb=774,t.breveinvertedbelowcmb=815,t.breveinvertedcmb=785,t.breveinverteddoublecmb=865,t.bridgebelowcmb=810,t.bridgeinvertedbelowcmb=826,t.brokenbar=166,t.bstroke=384,t.bsuperior=63210,t.btopbar=387,t.buhiragana=12406,t.bukatakana=12502,t.bullet=8226,t.bulletinverse=9688,t.bulletoperator=8729,t.bullseye=9678,t.c=99,t.caarmenian=1390,t.cabengali=2458,t.cacute=263,t.cadeva=2330,t.cagujarati=2714,t.cagurmukhi=2586,t.calsquare=13192,t.candrabindubengali=2433,t.candrabinducmb=784,t.candrabindudeva=2305,t.candrabindugujarati=2689,t.capslock=8682,t.careof=8453,t.caron=711,t.caronbelowcmb=812,t.caroncmb=780,t.carriagereturn=8629,t.cbopomofo=12568,t.ccaron=269,t.ccedilla=231,t.ccedillaacute=7689,t.ccircle=9426,t.ccircumflex=265,t.ccurl=597,t.cdot=267,t.cdotaccent=267,t.cdsquare=13253,t.cedilla=184,t.cedillacmb=807,t.cent=162,t.centigrade=8451,t.centinferior=63199,t.centmonospace=65504,t.centoldstyle=63394,t.centsuperior=63200,t.chaarmenian=1401,t.chabengali=2459,t.chadeva=2331,t.chagujarati=2715,t.chagurmukhi=2587,t.chbopomofo=12564,t.cheabkhasiancyrillic=1213,t.checkmark=10003,t.checyrillic=1095,t.chedescenderabkhasiancyrillic=1215,t.chedescendercyrillic=1207,t.chedieresiscyrillic=1269,t.cheharmenian=1395,t.chekhakassiancyrillic=1228,t.cheverticalstrokecyrillic=1209,t.chi=967,t.chieuchacirclekorean=12919,t.chieuchaparenkorean=12823,t.chieuchcirclekorean=12905,t.chieuchkorean=12618,t.chieuchparenkorean=12809,t.chochangthai=3594,t.chochanthai=3592,t.chochingthai=3593,t.chochoethai=3596,t.chook=392,t.cieucacirclekorean=12918,t.cieucaparenkorean=12822,t.cieuccirclekorean=12904,t.cieuckorean=12616,t.cieucparenkorean=12808,t.cieucuparenkorean=12828,t.circle=9675,t.circlecopyrt=169,t.circlemultiply=8855,t.circleot=8857,t.circleplus=8853,t.circlepostalmark=12342,t.circlewithlefthalfblack=9680,t.circlewithrighthalfblack=9681,t.circumflex=710,t.circumflexbelowcmb=813,t.circumflexcmb=770,t.clear=8999,t.clickalveolar=450,t.clickdental=448,t.clicklateral=449,t.clickretroflex=451,t.club=9827,t.clubsuitblack=9827,t.clubsuitwhite=9831,t.cmcubedsquare=13220,t.cmonospace=65347,t.cmsquaredsquare=13216,t.coarmenian=1409,t.colon=58,t.colonmonetary=8353,t.colonmonospace=65306,t.colonsign=8353,t.colonsmall=65109,t.colontriangularhalfmod=721,t.colontriangularmod=720,t.comma=44,t.commaabovecmb=787,t.commaaboverightcmb=789,t.commaaccent=63171,t.commaarabic=1548,t.commaarmenian=1373,t.commainferior=63201,t.commamonospace=65292,t.commareversedabovecmb=788,t.commareversedmod=701,t.commasmall=65104,t.commasuperior=63202,t.commaturnedabovecmb=786,t.commaturnedmod=699,t.compass=9788,t.congruent=8773,t.contourintegral=8750,t.control=8963,t.controlACK=6,t.controlBEL=7,t.controlBS=8,t.controlCAN=24,t.controlCR=13,t.controlDC1=17,t.controlDC2=18,t.controlDC3=19,t.controlDC4=20,t.controlDEL=127,t.controlDLE=16,t.controlEM=25,t.controlENQ=5,t.controlEOT=4,t.controlESC=27,t.controlETB=23,t.controlETX=3,t.controlFF=12,t.controlFS=28,t.controlGS=29,t.controlHT=9,t.controlLF=10,t.controlNAK=21,t.controlNULL=0,t.controlRS=30,t.controlSI=15,t.controlSO=14,t.controlSOT=2,t.controlSTX=1,t.controlSUB=26,t.controlSYN=22,t.controlUS=31,t.controlVT=11,t.copyright=169,t.copyrightsans=63721,t.copyrightserif=63193,t.cornerbracketleft=12300,t.cornerbracketlefthalfwidth=65378,t.cornerbracketleftvertical=65089,t.cornerbracketright=12301,t.cornerbracketrighthalfwidth=65379,t.cornerbracketrightvertical=65090,t.corporationsquare=13183,t.cosquare=13255,t.coverkgsquare=13254,t.cparen=9374,t.cruzeiro=8354,t.cstretched=663,t.curlyand=8911,t.curlyor=8910,t.currency=164,t.cyrBreve=63185,t.cyrFlex=63186,t.cyrbreve=63188,t.cyrflex=63189,t.d=100,t.daarmenian=1380,t.dabengali=2470,t.dadarabic=1590,t.dadeva=2342,t.dadfinalarabic=65214,t.dadinitialarabic=65215,t.dadmedialarabic=65216,t.dagesh=1468,t.dageshhebrew=1468,t.dagger=8224,t.daggerdbl=8225,t.dagujarati=2726,t.dagurmukhi=2598,t.dahiragana=12384,t.dakatakana=12480,t.dalarabic=1583,t.dalet=1491,t.daletdagesh=64307,t.daletdageshhebrew=64307,t.dalethebrew=1491,t.dalfinalarabic=65194,t.dammaarabic=1615,t.dammalowarabic=1615,t.dammatanaltonearabic=1612,t.dammatanarabic=1612,t.danda=2404,t.dargahebrew=1447,t.dargalefthebrew=1447,t.dasiapneumatacyrilliccmb=1157,t.dblGrave=63187,t.dblanglebracketleft=12298,t.dblanglebracketleftvertical=65085,t.dblanglebracketright=12299,t.dblanglebracketrightvertical=65086,t.dblarchinvertedbelowcmb=811,t.dblarrowleft=8660,t.dblarrowright=8658,t.dbldanda=2405,t.dblgrave=63190,t.dblgravecmb=783,t.dblintegral=8748,t.dbllowline=8215,t.dbllowlinecmb=819,t.dbloverlinecmb=831,t.dblprimemod=698,t.dblverticalbar=8214,t.dblverticallineabovecmb=782,t.dbopomofo=12553,t.dbsquare=13256,t.dcaron=271,t.dcedilla=7697,t.dcircle=9427,t.dcircumflexbelow=7699,t.dcroat=273,t.ddabengali=2465,t.ddadeva=2337,t.ddagujarati=2721,t.ddagurmukhi=2593,t.ddalarabic=1672,t.ddalfinalarabic=64393,t.dddhadeva=2396,t.ddhabengali=2466,t.ddhadeva=2338,t.ddhagujarati=2722,t.ddhagurmukhi=2594,t.ddotaccent=7691,t.ddotbelow=7693,t.decimalseparatorarabic=1643,t.decimalseparatorpersian=1643,t.decyrillic=1076,t.degree=176,t.dehihebrew=1453,t.dehiragana=12391,t.deicoptic=1007,t.dekatakana=12487,t.deleteleft=9003,t.deleteright=8998,t.delta=948,t.deltaturned=397,t.denominatorminusonenumeratorbengali=2552,t.dezh=676,t.dhabengali=2471,t.dhadeva=2343,t.dhagujarati=2727,t.dhagurmukhi=2599,t.dhook=599,t.dialytikatonos=901,t.dialytikatonoscmb=836,t.diamond=9830,t.diamondsuitwhite=9826,t.dieresis=168,t.dieresisacute=63191,t.dieresisbelowcmb=804,t.dieresiscmb=776,t.dieresisgrave=63192,t.dieresistonos=901,t.dihiragana=12386,t.dikatakana=12482,t.dittomark=12291,t.divide=247,t.divides=8739,t.divisionslash=8725,t.djecyrillic=1106,t.dkshade=9619,t.dlinebelow=7695,t.dlsquare=13207,t.dmacron=273,t.dmonospace=65348,t.dnblock=9604,t.dochadathai=3598,t.dodekthai=3604,t.dohiragana=12393,t.dokatakana=12489,t.dollar=36;t.dollarinferior=63203,t.dollarmonospace=65284,t.dollaroldstyle=63268,t.dollarsmall=65129,t.dollarsuperior=63204,t.dong=8363,t.dorusquare=13094,t.dotaccent=729,t.dotaccentcmb=775,t.dotbelowcmb=803,t.dotbelowcomb=803,t.dotkatakana=12539,t.dotlessi=305,t.dotlessj=63166,t.dotlessjstrokehook=644,t.dotmath=8901,t.dottedcircle=9676,t.doubleyodpatah=64287,t.doubleyodpatahhebrew=64287,t.downtackbelowcmb=798,t.downtackmod=725,t.dparen=9375,t.dsuperior=63211,t.dtail=598,t.dtopbar=396,t.duhiragana=12389,t.dukatakana=12485,t.dz=499,t.dzaltone=675,t.dzcaron=454,t.dzcurl=677,t.dzeabkhasiancyrillic=1249,t.dzecyrillic=1109,t.dzhecyrillic=1119,t.e=101,t.eacute=233,t.earth=9793,t.ebengali=2447,t.ebopomofo=12572,t.ebreve=277,t.ecandradeva=2317,t.ecandragujarati=2701,t.ecandravowelsigndeva=2373,t.ecandravowelsigngujarati=2757,t.ecaron=283,t.ecedillabreve=7709,t.echarmenian=1381,t.echyiwnarmenian=1415,t.ecircle=9428,t.ecircumflex=234,t.ecircumflexacute=7871,t.ecircumflexbelow=7705,t.ecircumflexdotbelow=7879,t.ecircumflexgrave=7873,t.ecircumflexhookabove=7875,t.ecircumflextilde=7877,t.ecyrillic=1108,t.edblgrave=517,t.edeva=2319,t.edieresis=235,t.edot=279,t.edotaccent=279,t.edotbelow=7865,t.eegurmukhi=2575,t.eematragurmukhi=2631,t.efcyrillic=1092,t.egrave=232,t.egujarati=2703,t.eharmenian=1383,t.ehbopomofo=12573,t.ehiragana=12360,t.ehookabove=7867,t.eibopomofo=12575,t.eight=56,t.eightarabic=1640,t.eightbengali=2542,t.eightcircle=9319,t.eightcircleinversesansserif=10129,t.eightdeva=2414,t.eighteencircle=9329,t.eighteenparen=9349,t.eighteenperiod=9369,t.eightgujarati=2798,t.eightgurmukhi=2670,t.eighthackarabic=1640,t.eighthangzhou=12328,t.eighthnotebeamed=9835,t.eightideographicparen=12839,t.eightinferior=8328,t.eightmonospace=65304,t.eightoldstyle=63288,t.eightparen=9339,t.eightperiod=9359,t.eightpersian=1784,t.eightroman=8567,t.eightsuperior=8312,t.eightthai=3672,t.einvertedbreve=519,t.eiotifiedcyrillic=1125,t.ekatakana=12456,t.ekatakanahalfwidth=65396,t.ekonkargurmukhi=2676,t.ekorean=12628,t.elcyrillic=1083,t.element=8712,t.elevencircle=9322,t.elevenparen=9342,t.elevenperiod=9362,t.elevenroman=8570,t.ellipsis=8230,t.ellipsisvertical=8942,t.emacron=275,t.emacronacute=7703,t.emacrongrave=7701,t.emcyrillic=1084,t.emdash=8212,t.emdashvertical=65073,t.emonospace=65349,t.emphasismarkarmenian=1371,t.emptyset=8709,t.enbopomofo=12579,t.encyrillic=1085,t.endash=8211,t.endashvertical=65074,t.endescendercyrillic=1187,t.eng=331,t.engbopomofo=12581,t.enghecyrillic=1189,t.enhookcyrillic=1224,t.enspace=8194,t.eogonek=281,t.eokorean=12627,t.eopen=603,t.eopenclosed=666,t.eopenreversed=604,t.eopenreversedclosed=606,t.eopenreversedhook=605,t.eparen=9376,t.epsilon=949,t.epsilontonos=941,t.equal=61,t.equalmonospace=65309,t.equalsmall=65126,t.equalsuperior=8316,t.equivalence=8801,t.erbopomofo=12582,t.ercyrillic=1088,t.ereversed=600,t.ereversedcyrillic=1101,t.escyrillic=1089,t.esdescendercyrillic=1195,t.esh=643,t.eshcurl=646,t.eshortdeva=2318,t.eshortvowelsigndeva=2374,t.eshreversedloop=426,t.eshsquatreversed=645,t.esmallhiragana=12359,t.esmallkatakana=12455,t.esmallkatakanahalfwidth=65386,t.estimated=8494,t.esuperior=63212,t.eta=951,t.etarmenian=1384,t.etatonos=942,t.eth=240,t.etilde=7869,t.etildebelow=7707,t.etnahtafoukhhebrew=1425,t.etnahtafoukhlefthebrew=1425,t.etnahtahebrew=1425,t.etnahtalefthebrew=1425,t.eturned=477,t.eukorean=12641,t.euro=8364,t.evowelsignbengali=2503,t.evowelsigndeva=2375,t.evowelsigngujarati=2759,t.exclam=33,t.exclamarmenian=1372,t.exclamdbl=8252,t.exclamdown=161,t.exclamdownsmall=63393,t.exclammonospace=65281,t.exclamsmall=63265,t.existential=8707,t.ezh=658,t.ezhcaron=495,t.ezhcurl=659,t.ezhreversed=441,t.ezhtail=442,t.f=102,t.fadeva=2398,t.fagurmukhi=2654,t.fahrenheit=8457,t.fathaarabic=1614,t.fathalowarabic=1614,t.fathatanarabic=1611,t.fbopomofo=12552,t.fcircle=9429,t.fdotaccent=7711,t.feharabic=1601,t.feharmenian=1414,t.fehfinalarabic=65234,t.fehinitialarabic=65235,t.fehmedialarabic=65236,t.feicoptic=997,t.female=9792,t.ff=64256,t.f_f=64256,t.ffi=64259,t.ffl=64260,t.fi=64257,t.fifteencircle=9326,t.fifteenparen=9346,t.fifteenperiod=9366,t.figuredash=8210,t.filledbox=9632,t.filledrect=9644,t.finalkaf=1498,t.finalkafdagesh=64314,t.finalkafdageshhebrew=64314,t.finalkafhebrew=1498,t.finalmem=1501,t.finalmemhebrew=1501,t.finalnun=1503,t.finalnunhebrew=1503,t.finalpe=1507,t.finalpehebrew=1507,t.finaltsadi=1509,t.finaltsadihebrew=1509,t.firsttonechinese=713,t.fisheye=9673,t.fitacyrillic=1139,t.five=53,t.fivearabic=1637,t.fivebengali=2539,t.fivecircle=9316,t.fivecircleinversesansserif=10126,t.fivedeva=2411,t.fiveeighths=8541,t.fivegujarati=2795,t.fivegurmukhi=2667,t.fivehackarabic=1637,t.fivehangzhou=12325,t.fiveideographicparen=12836,t.fiveinferior=8325,t.fivemonospace=65301,t.fiveoldstyle=63285,t.fiveparen=9336,t.fiveperiod=9356,t.fivepersian=1781,t.fiveroman=8564,t.fivesuperior=8309,t.fivethai=3669,t.fl=64258,t.florin=402,t.fmonospace=65350,t.fmsquare=13209,t.fofanthai=3615,t.fofathai=3613,t.fongmanthai=3663,t.forall=8704,t.four=52,t.fourarabic=1636,t.fourbengali=2538,t.fourcircle=9315,t.fourcircleinversesansserif=10125,t.fourdeva=2410,t.fourgujarati=2794,t.fourgurmukhi=2666,t.fourhackarabic=1636,t.fourhangzhou=12324,t.fourideographicparen=12835,t.fourinferior=8324,t.fourmonospace=65300,t.fournumeratorbengali=2551,t.fouroldstyle=63284,t.fourparen=9335,t.fourperiod=9355,t.fourpersian=1780,t.fourroman=8563,t.foursuperior=8308,t.fourteencircle=9325,t.fourteenparen=9345,t.fourteenperiod=9365,t.fourthai=3668,t.fourthtonechinese=715,t.fparen=9377,t.fraction=8260,t.franc=8355,t.g=103,t.gabengali=2455,t.gacute=501,t.gadeva=2327,t.gafarabic=1711,t.gaffinalarabic=64403,t.gafinitialarabic=64404,t.gafmedialarabic=64405,t.gagujarati=2711,t.gagurmukhi=2583,t.gahiragana=12364,t.gakatakana=12460,t.gamma=947,t.gammalatinsmall=611,t.gammasuperior=736,t.gangiacoptic=1003,t.gbopomofo=12557,t.gbreve=287,t.gcaron=487,t.gcedilla=291,t.gcircle=9430,t.gcircumflex=285,t.gcommaaccent=291,t.gdot=289,t.gdotaccent=289,t.gecyrillic=1075,t.gehiragana=12370,t.gekatakana=12466,t.geometricallyequal=8785,t.gereshaccenthebrew=1436,t.gereshhebrew=1523,t.gereshmuqdamhebrew=1437,t.germandbls=223,t.gershayimaccenthebrew=1438,t.gershayimhebrew=1524,t.getamark=12307,t.ghabengali=2456,t.ghadarmenian=1394,t.ghadeva=2328,t.ghagujarati=2712,t.ghagurmukhi=2584,t.ghainarabic=1594,t.ghainfinalarabic=65230,t.ghaininitialarabic=65231,t.ghainmedialarabic=65232,t.ghemiddlehookcyrillic=1173,t.ghestrokecyrillic=1171,t.gheupturncyrillic=1169,t.ghhadeva=2394,t.ghhagurmukhi=2650,t.ghook=608,t.ghzsquare=13203,t.gihiragana=12366,t.gikatakana=12462,t.gimarmenian=1379,t.gimel=1490,t.gimeldagesh=64306,t.gimeldageshhebrew=64306,t.gimelhebrew=1490,t.gjecyrillic=1107,t.glottalinvertedstroke=446,t.glottalstop=660,t.glottalstopinverted=662,t.glottalstopmod=704,t.glottalstopreversed=661,t.glottalstopreversedmod=705,t.glottalstopreversedsuperior=740,t.glottalstopstroke=673,t.glottalstopstrokereversed=674,t.gmacron=7713,t.gmonospace=65351,t.gohiragana=12372,t.gokatakana=12468,t.gparen=9378,t.gpasquare=13228,t.gradient=8711,t.grave=96,t.gravebelowcmb=790,t.gravecmb=768,t.gravecomb=768,t.gravedeva=2387,t.gravelowmod=718,t.gravemonospace=65344,t.gravetonecmb=832,t.greater=62,t.greaterequal=8805,t.greaterequalorless=8923,t.greatermonospace=65310,t.greaterorequivalent=8819,t.greaterorless=8823,t.greateroverequal=8807,t.greatersmall=65125,t.gscript=609,t.gstroke=485,t.guhiragana=12368,t.guillemotleft=171,t.guillemotright=187,t.guilsinglleft=8249,t.guilsinglright=8250,t.gukatakana=12464,t.guramusquare=13080,t.gysquare=13257,t.h=104,t.haabkhasiancyrillic=1193,t.haaltonearabic=1729,t.habengali=2489,t.hadescendercyrillic=1203,t.hadeva=2361,t.hagujarati=2745,t.hagurmukhi=2617,t.haharabic=1581,t.hahfinalarabic=65186,t.hahinitialarabic=65187,t.hahiragana=12399,t.hahmedialarabic=65188,t.haitusquare=13098,t.hakatakana=12495,t.hakatakanahalfwidth=65418,t.halantgurmukhi=2637,t.hamzaarabic=1569,t.hamzalowarabic=1569,t.hangulfiller=12644,t.hardsigncyrillic=1098,t.harpoonleftbarbup=8636,t.harpoonrightbarbup=8640,t.hasquare=13258,t.hatafpatah=1458,t.hatafpatah16=1458,t.hatafpatah23=1458,t.hatafpatah2f=1458,t.hatafpatahhebrew=1458,t.hatafpatahnarrowhebrew=1458,t.hatafpatahquarterhebrew=1458,t.hatafpatahwidehebrew=1458,t.hatafqamats=1459,t.hatafqamats1b=1459,t.hatafqamats28=1459,t.hatafqamats34=1459,t.hatafqamatshebrew=1459,t.hatafqamatsnarrowhebrew=1459,t.hatafqamatsquarterhebrew=1459,t.hatafqamatswidehebrew=1459,t.hatafsegol=1457,t.hatafsegol17=1457,t.hatafsegol24=1457,t.hatafsegol30=1457,t.hatafsegolhebrew=1457,t.hatafsegolnarrowhebrew=1457,t.hatafsegolquarterhebrew=1457,t.hatafsegolwidehebrew=1457,t.hbar=295,t.hbopomofo=12559,t.hbrevebelow=7723,t.hcedilla=7721,t.hcircle=9431,t.hcircumflex=293,t.hdieresis=7719,t.hdotaccent=7715,t.hdotbelow=7717,t.he=1492,t.heart=9829,t.heartsuitblack=9829,t.heartsuitwhite=9825,t.hedagesh=64308,t.hedageshhebrew=64308,t.hehaltonearabic=1729,t.heharabic=1607,t.hehebrew=1492,t.hehfinalaltonearabic=64423,t.hehfinalalttwoarabic=65258,t.hehfinalarabic=65258,t.hehhamzaabovefinalarabic=64421,t.hehhamzaaboveisolatedarabic=64420,t.hehinitialaltonearabic=64424,t.hehinitialarabic=65259,t.hehiragana=12408,t.hehmedialaltonearabic=64425,t.hehmedialarabic=65260,t.heiseierasquare=13179,t.hekatakana=12504,t.hekatakanahalfwidth=65421,t.hekutaarusquare=13110,t.henghook=615,t.herutusquare=13113,t.het=1495,t.hethebrew=1495,t.hhook=614,t.hhooksuperior=689,t.hieuhacirclekorean=12923,t.hieuhaparenkorean=12827,t.hieuhcirclekorean=12909,t.hieuhkorean=12622,t.hieuhparenkorean=12813,t.hihiragana=12402,t.hikatakana=12498,t.hikatakanahalfwidth=65419,t.hiriq=1460,t.hiriq14=1460,t.hiriq21=1460,t.hiriq2d=1460,t.hiriqhebrew=1460,t.hiriqnarrowhebrew=1460,t.hiriqquarterhebrew=1460,t.hiriqwidehebrew=1460,t.hlinebelow=7830,t.hmonospace=65352,t.hoarmenian=1392,t.hohipthai=3627,t.hohiragana=12411,t.hokatakana=12507,t.hokatakanahalfwidth=65422,t.holam=1465,t.holam19=1465,t.holam26=1465,t.holam32=1465,t.holamhebrew=1465,t.holamnarrowhebrew=1465,t.holamquarterhebrew=1465,t.holamwidehebrew=1465,t.honokhukthai=3630,t.hookabovecomb=777,t.hookcmb=777,t.hookpalatalizedbelowcmb=801,t.hookretroflexbelowcmb=802,t.hoonsquare=13122,t.horicoptic=1001,t.horizontalbar=8213,t.horncmb=795,t.hotsprings=9832,t.house=8962,t.hparen=9379,t.hsuperior=688,t.hturned=613,t.huhiragana=12405,t.huiitosquare=13107,t.hukatakana=12501,t.hukatakanahalfwidth=65420,t.hungarumlaut=733,t.hungarumlautcmb=779,t.hv=405,t.hyphen=45,t.hypheninferior=63205,t.hyphenmonospace=65293,t.hyphensmall=65123,t.hyphensuperior=63206,t.hyphentwo=8208,t.i=105,t.iacute=237,t.iacyrillic=1103,t.ibengali=2439,t.ibopomofo=12583,t.ibreve=301,t.icaron=464,t.icircle=9432,t.icircumflex=238,t.icyrillic=1110,t.idblgrave=521,t.ideographearthcircle=12943,t.ideographfirecircle=12939,t.ideographicallianceparen=12863,t.ideographiccallparen=12858,t.ideographiccentrecircle=12965,t.ideographicclose=12294,t.ideographiccomma=12289,t.ideographiccommaleft=65380,t.ideographiccongratulationparen=12855,t.ideographiccorrectcircle=12963,t.ideographicearthparen=12847,t.ideographicenterpriseparen=12861,t.ideographicexcellentcircle=12957,t.ideographicfestivalparen=12864,t.ideographicfinancialcircle=12950,t.ideographicfinancialparen=12854,t.ideographicfireparen=12843,t.ideographichaveparen=12850,t.ideographichighcircle=12964,t.ideographiciterationmark=12293,t.ideographiclaborcircle=12952,t.ideographiclaborparen=12856,t.ideographicleftcircle=12967,t.ideographiclowcircle=12966,t.ideographicmedicinecircle=12969,t.ideographicmetalparen=12846,t.ideographicmoonparen=12842,t.ideographicnameparen=12852,t.ideographicperiod=12290,t.ideographicprintcircle=12958,t.ideographicreachparen=12867,t.ideographicrepresentparen=12857,t.ideographicresourceparen=12862,t.ideographicrightcircle=12968,t.ideographicsecretcircle=12953,t.ideographicselfparen=12866,t.ideographicsocietyparen=12851,t.ideographicspace=12288,t.ideographicspecialparen=12853,t.ideographicstockparen=12849,t.ideographicstudyparen=12859,t.ideographicsunparen=12848,t.ideographicsuperviseparen=12860,t.ideographicwaterparen=12844,t.ideographicwoodparen=12845,t.ideographiczero=12295,t.ideographmetalcircle=12942,t.ideographmooncircle=12938,t.ideographnamecircle=12948,t.ideographsuncircle=12944,t.ideographwatercircle=12940,t.ideographwoodcircle=12941,t.ideva=2311,t.idieresis=239,t.idieresisacute=7727,t.idieresiscyrillic=1253,t.idotbelow=7883,t.iebrevecyrillic=1239,t.iecyrillic=1077,t.ieungacirclekorean=12917,t.ieungaparenkorean=12821,t.ieungcirclekorean=12903,t.ieungkorean=12615,t.ieungparenkorean=12807,t.igrave=236,t.igujarati=2695,t.igurmukhi=2567,t.ihiragana=12356,t.ihookabove=7881,t.iibengali=2440,t.iicyrillic=1080,t.iideva=2312,t.iigujarati=2696,t.iigurmukhi=2568,t.iimatragurmukhi=2624,t.iinvertedbreve=523,t.iishortcyrillic=1081,t.iivowelsignbengali=2496,t.iivowelsigndeva=2368,t.iivowelsigngujarati=2752,t.ij=307,t.ikatakana=12452,t.ikatakanahalfwidth=65394,t.ikorean=12643,t.ilde=732,t.iluyhebrew=1452,t.imacron=299,t.imacroncyrillic=1251,t.imageorapproximatelyequal=8787,t.imatragurmukhi=2623,t.imonospace=65353,t.increment=8710,t.infinity=8734,t.iniarmenian=1387,t.integral=8747,t.integralbottom=8993,t.integralbt=8993,t.integralex=63733,t.integraltop=8992,t.integraltp=8992,t.intersection=8745,t.intisquare=13061,t.invbullet=9688,t.invcircle=9689,t.invsmileface=9787,t.iocyrillic=1105,t.iogonek=303,t.iota=953,t.iotadieresis=970,t.iotadieresistonos=912,t.iotalatin=617,t.iotatonos=943,t.iparen=9380,t.irigurmukhi=2674,t.ismallhiragana=12355,t.ismallkatakana=12451,t.ismallkatakanahalfwidth=65384,t.issharbengali=2554,t.istroke=616,t.isuperior=63213,t.iterationhiragana=12445,t.iterationkatakana=12541,t.itilde=297,t.itildebelow=7725,t.iubopomofo=12585,t.iucyrillic=1102,t.ivowelsignbengali=2495,t.ivowelsigndeva=2367,t.ivowelsigngujarati=2751,t.izhitsacyrillic=1141,t.izhitsadblgravecyrillic=1143,t.j=106,t.jaarmenian=1393,t.jabengali=2460,t.jadeva=2332,t.jagujarati=2716,t.jagurmukhi=2588,t.jbopomofo=12560,t.jcaron=496,t.jcircle=9433,t.jcircumflex=309,t.jcrossedtail=669,t.jdotlessstroke=607,t.jecyrillic=1112,t.jeemarabic=1580,t.jeemfinalarabic=65182,t.jeeminitialarabic=65183,t.jeemmedialarabic=65184,t.jeharabic=1688,t.jehfinalarabic=64395,t.jhabengali=2461,t.jhadeva=2333,t.jhagujarati=2717,t.jhagurmukhi=2589,t.jheharmenian=1403,t.jis=12292,t.jmonospace=65354,t.jparen=9381,t.jsuperior=690,t.k=107,t.kabashkircyrillic=1185,t.kabengali=2453,t.kacute=7729,t.kacyrillic=1082,t.kadescendercyrillic=1179,t.kadeva=2325,t.kaf=1499,t.kafarabic=1603,t.kafdagesh=64315,t.kafdageshhebrew=64315,t.kaffinalarabic=65242,t.kafhebrew=1499,t.kafinitialarabic=65243,t.kafmedialarabic=65244,t.kafrafehebrew=64333,t.kagujarati=2709,t.kagurmukhi=2581,t.kahiragana=12363,t.kahookcyrillic=1220,t.kakatakana=12459,t.kakatakanahalfwidth=65398,t.kappa=954,t.kappasymbolgreek=1008,t.kapyeounmieumkorean=12657,t.kapyeounphieuphkorean=12676,t.kapyeounpieupkorean=12664,t.kapyeounssangpieupkorean=12665,t.karoriisquare=13069,t.kashidaautoarabic=1600,t.kashidaautonosidebearingarabic=1600,t.kasmallkatakana=12533,t.kasquare=13188,t.kasraarabic=1616,t.kasratanarabic=1613,t.kastrokecyrillic=1183,t.katahiraprolongmarkhalfwidth=65392,t.kaverticalstrokecyrillic=1181,t.kbopomofo=12558,t.kcalsquare=13193,t.kcaron=489,t.kcedilla=311,t.kcircle=9434,t.kcommaaccent=311,t.kdotbelow=7731,t.keharmenian=1412,t.kehiragana=12369,t.kekatakana=12465,t.kekatakanahalfwidth=65401,t.kenarmenian=1391,t.kesmallkatakana=12534,t.kgreenlandic=312,t.khabengali=2454,t.khacyrillic=1093,t.khadeva=2326,t.khagujarati=2710,t.khagurmukhi=2582,t.khaharabic=1582,t.khahfinalarabic=65190,t.khahinitialarabic=65191,t.khahmedialarabic=65192,t.kheicoptic=999,t.khhadeva=2393,t.khhagurmukhi=2649,t.khieukhacirclekorean=12920,t.khieukhaparenkorean=12824,t.khieukhcirclekorean=12906,t.khieukhkorean=12619,t.khieukhparenkorean=12810,t.khokhaithai=3586,t.khokhonthai=3589,t.khokhuatthai=3587,t.khokhwaithai=3588,t.khomutthai=3675,t.khook=409,t.khorakhangthai=3590,t.khzsquare=13201,t.kihiragana=12365,t.kikatakana=12461,t.kikatakanahalfwidth=65399,t.kiroguramusquare=13077,t.kiromeetorusquare=13078,t.kirosquare=13076,t.kiyeokacirclekorean=12910,t.kiyeokaparenkorean=12814,t.kiyeokcirclekorean=12896,t.kiyeokkorean=12593,t.kiyeokparenkorean=12800,t.kiyeoksioskorean=12595,t.kjecyrillic=1116,t.klinebelow=7733,t.klsquare=13208,t.kmcubedsquare=13222;t.kmonospace=65355,t.kmsquaredsquare=13218,t.kohiragana=12371,t.kohmsquare=13248,t.kokaithai=3585,t.kokatakana=12467,t.kokatakanahalfwidth=65402,t.kooposquare=13086,t.koppacyrillic=1153,t.koreanstandardsymbol=12927,t.koroniscmb=835,t.kparen=9382,t.kpasquare=13226,t.ksicyrillic=1135,t.ktsquare=13263,t.kturned=670,t.kuhiragana=12367,t.kukatakana=12463,t.kukatakanahalfwidth=65400,t.kvsquare=13240,t.kwsquare=13246,t.l=108,t.labengali=2482,t.lacute=314,t.ladeva=2354,t.lagujarati=2738,t.lagurmukhi=2610,t.lakkhangyaothai=3653,t.lamaleffinalarabic=65276,t.lamalefhamzaabovefinalarabic=65272,t.lamalefhamzaaboveisolatedarabic=65271,t.lamalefhamzabelowfinalarabic=65274,t.lamalefhamzabelowisolatedarabic=65273,t.lamalefisolatedarabic=65275,t.lamalefmaddaabovefinalarabic=65270,t.lamalefmaddaaboveisolatedarabic=65269,t.lamarabic=1604,t.lambda=955,t.lambdastroke=411,t.lamed=1500,t.lameddagesh=64316,t.lameddageshhebrew=64316,t.lamedhebrew=1500,t.lamfinalarabic=65246,t.lamhahinitialarabic=64714,t.laminitialarabic=65247,t.lamjeeminitialarabic=64713,t.lamkhahinitialarabic=64715,t.lamlamhehisolatedarabic=65010,t.lammedialarabic=65248,t.lammeemhahinitialarabic=64904,t.lammeeminitialarabic=64716,t.largecircle=9711,t.lbar=410,t.lbelt=620,t.lbopomofo=12556,t.lcaron=318,t.lcedilla=316,t.lcircle=9435,t.lcircumflexbelow=7741,t.lcommaaccent=316,t.ldot=320,t.ldotaccent=320,t.ldotbelow=7735,t.ldotbelowmacron=7737,t.leftangleabovecmb=794,t.lefttackbelowcmb=792,t.less=60,t.lessequal=8804,t.lessequalorgreater=8922,t.lessmonospace=65308,t.lessorequivalent=8818,t.lessorgreater=8822,t.lessoverequal=8806,t.lesssmall=65124,t.lezh=622,t.lfblock=9612,t.lhookretroflex=621,t.lira=8356,t.liwnarmenian=1388,t.lj=457,t.ljecyrillic=1113,t.ll=63168,t.lladeva=2355,t.llagujarati=2739,t.llinebelow=7739,t.llladeva=2356,t.llvocalicbengali=2529,t.llvocalicdeva=2401,t.llvocalicvowelsignbengali=2531,t.llvocalicvowelsigndeva=2403,t.lmiddletilde=619,t.lmonospace=65356,t.lmsquare=13264,t.lochulathai=3628,t.logicaland=8743,t.logicalnot=172,t.logicalnotreversed=8976,t.logicalor=8744,t.lolingthai=3621,t.longs=383,t.lowlinecenterline=65102,t.lowlinecmb=818,t.lowlinedashed=65101,t.lozenge=9674,t.lparen=9383,t.lslash=322,t.lsquare=8467,t.lsuperior=63214,t.ltshade=9617,t.luthai=3622,t.lvocalicbengali=2444,t.lvocalicdeva=2316,t.lvocalicvowelsignbengali=2530,t.lvocalicvowelsigndeva=2402,t.lxsquare=13267,t.m=109,t.mabengali=2478,t.macron=175,t.macronbelowcmb=817,t.macroncmb=772,t.macronlowmod=717,t.macronmonospace=65507,t.macute=7743,t.madeva=2350,t.magujarati=2734,t.magurmukhi=2606,t.mahapakhhebrew=1444,t.mahapakhlefthebrew=1444,t.mahiragana=12414,t.maichattawalowleftthai=63637,t.maichattawalowrightthai=63636,t.maichattawathai=3659,t.maichattawaupperleftthai=63635,t.maieklowleftthai=63628,t.maieklowrightthai=63627,t.maiekthai=3656,t.maiekupperleftthai=63626,t.maihanakatleftthai=63620,t.maihanakatthai=3633,t.maitaikhuleftthai=63625,t.maitaikhuthai=3655,t.maitholowleftthai=63631,t.maitholowrightthai=63630,t.maithothai=3657,t.maithoupperleftthai=63629,t.maitrilowleftthai=63634,t.maitrilowrightthai=63633,t.maitrithai=3658,t.maitriupperleftthai=63632,t.maiyamokthai=3654,t.makatakana=12510,t.makatakanahalfwidth=65423,t.male=9794,t.mansyonsquare=13127,t.maqafhebrew=1470,t.mars=9794,t.masoracirclehebrew=1455,t.masquare=13187,t.mbopomofo=12551,t.mbsquare=13268,t.mcircle=9436,t.mcubedsquare=13221,t.mdotaccent=7745,t.mdotbelow=7747,t.meemarabic=1605,t.meemfinalarabic=65250,t.meeminitialarabic=65251,t.meemmedialarabic=65252,t.meemmeeminitialarabic=64721,t.meemmeemisolatedarabic=64584,t.meetorusquare=13133,t.mehiragana=12417,t.meizierasquare=13182,t.mekatakana=12513,t.mekatakanahalfwidth=65426,t.mem=1502,t.memdagesh=64318,t.memdageshhebrew=64318,t.memhebrew=1502,t.menarmenian=1396,t.merkhahebrew=1445,t.merkhakefulahebrew=1446,t.merkhakefulalefthebrew=1446,t.merkhalefthebrew=1445,t.mhook=625,t.mhzsquare=13202,t.middledotkatakanahalfwidth=65381,t.middot=183,t.mieumacirclekorean=12914,t.mieumaparenkorean=12818,t.mieumcirclekorean=12900,t.mieumkorean=12609,t.mieumpansioskorean=12656,t.mieumparenkorean=12804,t.mieumpieupkorean=12654,t.mieumsioskorean=12655,t.mihiragana=12415,t.mikatakana=12511,t.mikatakanahalfwidth=65424,t.minus=8722,t.minusbelowcmb=800,t.minuscircle=8854,t.minusmod=727,t.minusplus=8723,t.minute=8242,t.miribaarusquare=13130,t.mirisquare=13129,t.mlonglegturned=624,t.mlsquare=13206,t.mmcubedsquare=13219,t.mmonospace=65357,t.mmsquaredsquare=13215,t.mohiragana=12418,t.mohmsquare=13249,t.mokatakana=12514,t.mokatakanahalfwidth=65427,t.molsquare=13270,t.momathai=3617,t.moverssquare=13223,t.moverssquaredsquare=13224,t.mparen=9384,t.mpasquare=13227,t.mssquare=13235,t.msuperior=63215,t.mturned=623,t.mu=181,t.mu1=181,t.muasquare=13186,t.muchgreater=8811,t.muchless=8810,t.mufsquare=13196,t.mugreek=956,t.mugsquare=13197,t.muhiragana=12416,t.mukatakana=12512,t.mukatakanahalfwidth=65425,t.mulsquare=13205,t.multiply=215,t.mumsquare=13211,t.munahhebrew=1443,t.munahlefthebrew=1443,t.musicalnote=9834,t.musicalnotedbl=9835,t.musicflatsign=9837,t.musicsharpsign=9839,t.mussquare=13234,t.muvsquare=13238,t.muwsquare=13244,t.mvmegasquare=13241,t.mvsquare=13239,t.mwmegasquare=13247,t.mwsquare=13245,t.n=110,t.nabengali=2472,t.nabla=8711,t.nacute=324,t.nadeva=2344,t.nagujarati=2728,t.nagurmukhi=2600,t.nahiragana=12394,t.nakatakana=12490,t.nakatakanahalfwidth=65413,t.napostrophe=329,t.nasquare=13185,t.nbopomofo=12555,t.nbspace=160,t.ncaron=328,t.ncedilla=326,t.ncircle=9437,t.ncircumflexbelow=7755,t.ncommaaccent=326,t.ndotaccent=7749,t.ndotbelow=7751,t.nehiragana=12397,t.nekatakana=12493,t.nekatakanahalfwidth=65416,t.newsheqelsign=8362,t.nfsquare=13195,t.ngabengali=2457,t.ngadeva=2329,t.ngagujarati=2713,t.ngagurmukhi=2585,t.ngonguthai=3591,t.nhiragana=12435,t.nhookleft=626,t.nhookretroflex=627,t.nieunacirclekorean=12911,t.nieunaparenkorean=12815,t.nieuncieuckorean=12597,t.nieuncirclekorean=12897,t.nieunhieuhkorean=12598,t.nieunkorean=12596,t.nieunpansioskorean=12648,t.nieunparenkorean=12801,t.nieunsioskorean=12647,t.nieuntikeutkorean=12646,t.nihiragana=12395,t.nikatakana=12491,t.nikatakanahalfwidth=65414,t.nikhahitleftthai=63641,t.nikhahitthai=3661,t.nine=57,t.ninearabic=1641,t.ninebengali=2543,t.ninecircle=9320,t.ninecircleinversesansserif=10130,t.ninedeva=2415,t.ninegujarati=2799,t.ninegurmukhi=2671,t.ninehackarabic=1641,t.ninehangzhou=12329,t.nineideographicparen=12840,t.nineinferior=8329,t.ninemonospace=65305,t.nineoldstyle=63289,t.nineparen=9340,t.nineperiod=9360,t.ninepersian=1785,t.nineroman=8568,t.ninesuperior=8313,t.nineteencircle=9330,t.nineteenparen=9350,t.nineteenperiod=9370,t.ninethai=3673,t.nj=460,t.njecyrillic=1114,t.nkatakana=12531,t.nkatakanahalfwidth=65437,t.nlegrightlong=414,t.nlinebelow=7753,t.nmonospace=65358,t.nmsquare=13210,t.nnabengali=2467,t.nnadeva=2339,t.nnagujarati=2723,t.nnagurmukhi=2595,t.nnnadeva=2345,t.nohiragana=12398,t.nokatakana=12494,t.nokatakanahalfwidth=65417,t.nonbreakingspace=160,t.nonenthai=3603,t.nonuthai=3609,t.noonarabic=1606,t.noonfinalarabic=65254,t.noonghunnaarabic=1722,t.noonghunnafinalarabic=64415,t.nooninitialarabic=65255,t.noonjeeminitialarabic=64722,t.noonjeemisolatedarabic=64587,t.noonmedialarabic=65256,t.noonmeeminitialarabic=64725,t.noonmeemisolatedarabic=64590,t.noonnoonfinalarabic=64653,t.notcontains=8716,t.notelement=8713,t.notelementof=8713,t.notequal=8800,t.notgreater=8815,t.notgreaternorequal=8817,t.notgreaternorless=8825,t.notidentical=8802,t.notless=8814,t.notlessnorequal=8816,t.notparallel=8742,t.notprecedes=8832,t.notsubset=8836,t.notsucceeds=8833,t.notsuperset=8837,t.nowarmenian=1398,t.nparen=9385,t.nssquare=13233,t.nsuperior=8319,t.ntilde=241,t.nu=957,t.nuhiragana=12396,t.nukatakana=12492,t.nukatakanahalfwidth=65415,t.nuktabengali=2492,t.nuktadeva=2364,t.nuktagujarati=2748,t.nuktagurmukhi=2620,t.numbersign=35,t.numbersignmonospace=65283,t.numbersignsmall=65119,t.numeralsigngreek=884,t.numeralsignlowergreek=885,t.numero=8470,t.nun=1504,t.nundagesh=64320,t.nundageshhebrew=64320,t.nunhebrew=1504,t.nvsquare=13237,t.nwsquare=13243,t.nyabengali=2462,t.nyadeva=2334,t.nyagujarati=2718,t.nyagurmukhi=2590,t.o=111,t.oacute=243,t.oangthai=3629,t.obarred=629,t.obarredcyrillic=1257,t.obarreddieresiscyrillic=1259,t.obengali=2451,t.obopomofo=12571,t.obreve=335,t.ocandradeva=2321,t.ocandragujarati=2705,t.ocandravowelsigndeva=2377,t.ocandravowelsigngujarati=2761,t.ocaron=466,t.ocircle=9438,t.ocircumflex=244,t.ocircumflexacute=7889,t.ocircumflexdotbelow=7897,t.ocircumflexgrave=7891,t.ocircumflexhookabove=7893,t.ocircumflextilde=7895,t.ocyrillic=1086,t.odblacute=337,t.odblgrave=525,t.odeva=2323,t.odieresis=246,t.odieresiscyrillic=1255,t.odotbelow=7885,t.oe=339,t.oekorean=12634,t.ogonek=731,t.ogonekcmb=808,t.ograve=242,t.ogujarati=2707,t.oharmenian=1413,t.ohiragana=12362,t.ohookabove=7887,t.ohorn=417,t.ohornacute=7899,t.ohorndotbelow=7907,t.ohorngrave=7901,t.ohornhookabove=7903,t.ohorntilde=7905,t.ohungarumlaut=337,t.oi=419,t.oinvertedbreve=527,t.okatakana=12458,t.okatakanahalfwidth=65397,t.okorean=12631,t.olehebrew=1451,t.omacron=333,t.omacronacute=7763,t.omacrongrave=7761,t.omdeva=2384,t.omega=969,t.omega1=982,t.omegacyrillic=1121,t.omegalatinclosed=631,t.omegaroundcyrillic=1147,t.omegatitlocyrillic=1149,t.omegatonos=974,t.omgujarati=2768,t.omicron=959,t.omicrontonos=972,t.omonospace=65359,t.one=49,t.onearabic=1633,t.onebengali=2535,t.onecircle=9312,t.onecircleinversesansserif=10122,t.onedeva=2407,t.onedotenleader=8228,t.oneeighth=8539,t.onefitted=63196,t.onegujarati=2791,t.onegurmukhi=2663,t.onehackarabic=1633,t.onehalf=189,t.onehangzhou=12321,t.oneideographicparen=12832,t.oneinferior=8321,t.onemonospace=65297,t.onenumeratorbengali=2548,t.oneoldstyle=63281,t.oneparen=9332,t.oneperiod=9352,t.onepersian=1777,t.onequarter=188,t.oneroman=8560,t.onesuperior=185,t.onethai=3665,t.onethird=8531,t.oogonek=491,t.oogonekmacron=493,t.oogurmukhi=2579,t.oomatragurmukhi=2635,t.oopen=596,t.oparen=9386,t.openbullet=9702,t.option=8997,t.ordfeminine=170,t.ordmasculine=186,t.orthogonal=8735,t.oshortdeva=2322,t.oshortvowelsigndeva=2378,t.oslash=248,t.oslashacute=511,t.osmallhiragana=12361,t.osmallkatakana=12457,t.osmallkatakanahalfwidth=65387,t.ostrokeacute=511,t.osuperior=63216,t.otcyrillic=1151,t.otilde=245,t.otildeacute=7757,t.otildedieresis=7759,t.oubopomofo=12577,t.overline=8254,t.overlinecenterline=65098,t.overlinecmb=773,t.overlinedashed=65097,t.overlinedblwavy=65100,t.overlinewavy=65099,t.overscore=175,t.ovowelsignbengali=2507,t.ovowelsigndeva=2379,t.ovowelsigngujarati=2763,t.p=112,t.paampssquare=13184,t.paasentosquare=13099,t.pabengali=2474,t.pacute=7765,t.padeva=2346,t.pagedown=8671,t.pageup=8670,t.pagujarati=2730,t.pagurmukhi=2602,t.pahiragana=12401,t.paiyannoithai=3631,t.pakatakana=12497,t.palatalizationcyrilliccmb=1156,t.palochkacyrillic=1216,t.pansioskorean=12671,t.paragraph=182,t.parallel=8741,t.parenleft=40,t.parenleftaltonearabic=64830,t.parenleftbt=63725,t.parenleftex=63724,t.parenleftinferior=8333,t.parenleftmonospace=65288,t.parenleftsmall=65113,t.parenleftsuperior=8317,t.parenlefttp=63723,t.parenleftvertical=65077,t.parenright=41,t.parenrightaltonearabic=64831,t.parenrightbt=63736,t.parenrightex=63735,t.parenrightinferior=8334,t.parenrightmonospace=65289,t.parenrightsmall=65114,t.parenrightsuperior=8318,t.parenrighttp=63734,t.parenrightvertical=65078,t.partialdiff=8706,t.paseqhebrew=1472,t.pashtahebrew=1433,t.pasquare=13225,t.patah=1463,t.patah11=1463,t.patah1d=1463,t.patah2a=1463,t.patahhebrew=1463,t.patahnarrowhebrew=1463,t.patahquarterhebrew=1463,t.patahwidehebrew=1463,t.pazerhebrew=1441,t.pbopomofo=12550,t.pcircle=9439,t.pdotaccent=7767,t.pe=1508,t.pecyrillic=1087,t.pedagesh=64324,t.pedageshhebrew=64324,t.peezisquare=13115,t.pefinaldageshhebrew=64323,t.peharabic=1662,t.peharmenian=1402,t.pehebrew=1508,t.pehfinalarabic=64343,t.pehinitialarabic=64344,t.pehiragana=12410,t.pehmedialarabic=64345,t.pekatakana=12506,t.pemiddlehookcyrillic=1191,t.perafehebrew=64334,t.percent=37,t.percentarabic=1642,t.percentmonospace=65285,t.percentsmall=65130,t.period=46,t.periodarmenian=1417,t.periodcentered=183,t.periodhalfwidth=65377,t.periodinferior=63207,t.periodmonospace=65294,t.periodsmall=65106,t.periodsuperior=63208,t.perispomenigreekcmb=834,t.perpendicular=8869,t.perthousand=8240,t.peseta=8359,t.pfsquare=13194,t.phabengali=2475,t.phadeva=2347,t.phagujarati=2731,t.phagurmukhi=2603,t.phi=966,t.phi1=981,t.phieuphacirclekorean=12922,t.phieuphaparenkorean=12826,t.phieuphcirclekorean=12908,t.phieuphkorean=12621,t.phieuphparenkorean=12812,t.philatin=632,t.phinthuthai=3642,t.phisymbolgreek=981,t.phook=421,t.phophanthai=3614,t.phophungthai=3612,t.phosamphaothai=3616,t.pi=960,t.pieupacirclekorean=12915,t.pieupaparenkorean=12819,t.pieupcieuckorean=12662,t.pieupcirclekorean=12901,t.pieupkiyeokkorean=12658,t.pieupkorean=12610,t.pieupparenkorean=12805,t.pieupsioskiyeokkorean=12660,t.pieupsioskorean=12612,t.pieupsiostikeutkorean=12661,t.pieupthieuthkorean=12663,t.pieuptikeutkorean=12659,t.pihiragana=12404,t.pikatakana=12500,t.pisymbolgreek=982,t.piwrarmenian=1411,t.plus=43,t.plusbelowcmb=799,t.pluscircle=8853,t.plusminus=177,t.plusmod=726,t.plusmonospace=65291,t.plussmall=65122,t.plussuperior=8314,t.pmonospace=65360,t.pmsquare=13272,t.pohiragana=12413,t.pointingindexdownwhite=9759,t.pointingindexleftwhite=9756,t.pointingindexrightwhite=9758,t.pointingindexupwhite=9757,t.pokatakana=12509,t.poplathai=3611,t.postalmark=12306,t.postalmarkface=12320,t.pparen=9387,t.precedes=8826,t.prescription=8478,t.primemod=697,t.primereversed=8245,t.product=8719,t.projective=8965,t.prolongedkana=12540,t.propellor=8984,t.propersubset=8834,t.propersuperset=8835,t.proportion=8759,t.proportional=8733,t.psi=968,t.psicyrillic=1137,t.psilipneumatacyrilliccmb=1158,t.pssquare=13232,t.puhiragana=12407,t.pukatakana=12503,t.pvsquare=13236,t.pwsquare=13242,t.q=113,t.qadeva=2392,t.qadmahebrew=1448,t.qafarabic=1602,t.qaffinalarabic=65238,t.qafinitialarabic=65239,t.qafmedialarabic=65240,t.qamats=1464,t.qamats10=1464,t.qamats1a=1464,t.qamats1c=1464,t.qamats27=1464,t.qamats29=1464,t.qamats33=1464,t.qamatsde=1464,t.qamatshebrew=1464,t.qamatsnarrowhebrew=1464,t.qamatsqatanhebrew=1464,t.qamatsqatannarrowhebrew=1464,t.qamatsqatanquarterhebrew=1464,t.qamatsqatanwidehebrew=1464,t.qamatsquarterhebrew=1464,t.qamatswidehebrew=1464,t.qarneyparahebrew=1439,t.qbopomofo=12561,t.qcircle=9440,t.qhook=672,t.qmonospace=65361,t.qof=1511,t.qofdagesh=64327,t.qofdageshhebrew=64327,t.qofhebrew=1511,t.qparen=9388,t.quarternote=9833,t.qubuts=1467,t.qubuts18=1467,t.qubuts25=1467,t.qubuts31=1467,t.qubutshebrew=1467,t.qubutsnarrowhebrew=1467,t.qubutsquarterhebrew=1467,t.qubutswidehebrew=1467,t.question=63,t.questionarabic=1567,t.questionarmenian=1374,t.questiondown=191,t.questiondownsmall=63423,t.questiongreek=894,t.questionmonospace=65311,t.questionsmall=63295,t.quotedbl=34,t.quotedblbase=8222,t.quotedblleft=8220,t.quotedblmonospace=65282,t.quotedblprime=12318,t.quotedblprimereversed=12317,t.quotedblright=8221,t.quoteleft=8216,t.quoteleftreversed=8219,t.quotereversed=8219,t.quoteright=8217,t.quoterightn=329,t.quotesinglbase=8218,t.quotesingle=39,t.quotesinglemonospace=65287,t.r=114,t.raarmenian=1404,t.rabengali=2480,t.racute=341,t.radeva=2352,t.radical=8730,t.radicalex=63717,t.radoverssquare=13230,t.radoverssquaredsquare=13231,t.radsquare=13229,t.rafe=1471,t.rafehebrew=1471,t.ragujarati=2736,t.ragurmukhi=2608,t.rahiragana=12425,t.rakatakana=12521,t.rakatakanahalfwidth=65431,t.ralowerdiagonalbengali=2545,t.ramiddlediagonalbengali=2544,t.ramshorn=612,t.ratio=8758,t.rbopomofo=12566,t.rcaron=345,t.rcedilla=343,t.rcircle=9441,t.rcommaaccent=343,t.rdblgrave=529,t.rdotaccent=7769,t.rdotbelow=7771,t.rdotbelowmacron=7773,t.referencemark=8251,t.reflexsubset=8838,t.reflexsuperset=8839,t.registered=174,t.registersans=63720,t.registerserif=63194,t.reharabic=1585,t.reharmenian=1408,t.rehfinalarabic=65198,t.rehiragana=12428,t.rekatakana=12524,t.rekatakanahalfwidth=65434,t.resh=1512,t.reshdageshhebrew=64328,t.reshhebrew=1512,t.reversedtilde=8765,t.reviahebrew=1431;t.reviamugrashhebrew=1431,t.revlogicalnot=8976,t.rfishhook=638,t.rfishhookreversed=639,t.rhabengali=2525,t.rhadeva=2397,t.rho=961,t.rhook=637,t.rhookturned=635,t.rhookturnedsuperior=693,t.rhosymbolgreek=1009,t.rhotichookmod=734,t.rieulacirclekorean=12913,t.rieulaparenkorean=12817,t.rieulcirclekorean=12899,t.rieulhieuhkorean=12608,t.rieulkiyeokkorean=12602,t.rieulkiyeoksioskorean=12649,t.rieulkorean=12601,t.rieulmieumkorean=12603,t.rieulpansioskorean=12652,t.rieulparenkorean=12803,t.rieulphieuphkorean=12607,t.rieulpieupkorean=12604,t.rieulpieupsioskorean=12651,t.rieulsioskorean=12605,t.rieulthieuthkorean=12606,t.rieultikeutkorean=12650,t.rieulyeorinhieuhkorean=12653,t.rightangle=8735,t.righttackbelowcmb=793,t.righttriangle=8895,t.rihiragana=12426,t.rikatakana=12522,t.rikatakanahalfwidth=65432,t.ring=730,t.ringbelowcmb=805,t.ringcmb=778,t.ringhalfleft=703,t.ringhalfleftarmenian=1369,t.ringhalfleftbelowcmb=796,t.ringhalfleftcentered=723,t.ringhalfright=702,t.ringhalfrightbelowcmb=825,t.ringhalfrightcentered=722,t.rinvertedbreve=531,t.rittorusquare=13137,t.rlinebelow=7775,t.rlongleg=636,t.rlonglegturned=634,t.rmonospace=65362,t.rohiragana=12429,t.rokatakana=12525,t.rokatakanahalfwidth=65435,t.roruathai=3619,t.rparen=9389,t.rrabengali=2524,t.rradeva=2353,t.rragurmukhi=2652,t.rreharabic=1681,t.rrehfinalarabic=64397,t.rrvocalicbengali=2528,t.rrvocalicdeva=2400,t.rrvocalicgujarati=2784,t.rrvocalicvowelsignbengali=2500,t.rrvocalicvowelsigndeva=2372,t.rrvocalicvowelsigngujarati=2756,t.rsuperior=63217,t.rtblock=9616,t.rturned=633,t.rturnedsuperior=692,t.ruhiragana=12427,t.rukatakana=12523,t.rukatakanahalfwidth=65433,t.rupeemarkbengali=2546,t.rupeesignbengali=2547,t.rupiah=63197,t.ruthai=3620,t.rvocalicbengali=2443,t.rvocalicdeva=2315,t.rvocalicgujarati=2699,t.rvocalicvowelsignbengali=2499,t.rvocalicvowelsigndeva=2371,t.rvocalicvowelsigngujarati=2755,t.s=115,t.sabengali=2488,t.sacute=347,t.sacutedotaccent=7781,t.sadarabic=1589,t.sadeva=2360,t.sadfinalarabic=65210,t.sadinitialarabic=65211,t.sadmedialarabic=65212,t.sagujarati=2744,t.sagurmukhi=2616,t.sahiragana=12373,t.sakatakana=12469,t.sakatakanahalfwidth=65403,t.sallallahoualayhewasallamarabic=65018,t.samekh=1505,t.samekhdagesh=64321,t.samekhdageshhebrew=64321,t.samekhhebrew=1505,t.saraaathai=3634,t.saraaethai=3649,t.saraaimaimalaithai=3652,t.saraaimaimuanthai=3651,t.saraamthai=3635,t.saraathai=3632,t.saraethai=3648,t.saraiileftthai=63622,t.saraiithai=3637,t.saraileftthai=63621,t.saraithai=3636,t.saraothai=3650,t.saraueeleftthai=63624,t.saraueethai=3639,t.saraueleftthai=63623,t.sarauethai=3638,t.sarauthai=3640,t.sarauuthai=3641,t.sbopomofo=12569,t.scaron=353,t.scarondotaccent=7783,t.scedilla=351,t.schwa=601,t.schwacyrillic=1241,t.schwadieresiscyrillic=1243,t.schwahook=602,t.scircle=9442,t.scircumflex=349,t.scommaaccent=537,t.sdotaccent=7777,t.sdotbelow=7779,t.sdotbelowdotaccent=7785,t.seagullbelowcmb=828,t.second=8243,t.secondtonechinese=714,t.section=167,t.seenarabic=1587,t.seenfinalarabic=65202,t.seeninitialarabic=65203,t.seenmedialarabic=65204,t.segol=1462,t.segol13=1462,t.segol1f=1462,t.segol2c=1462,t.segolhebrew=1462,t.segolnarrowhebrew=1462,t.segolquarterhebrew=1462,t.segoltahebrew=1426,t.segolwidehebrew=1462,t.seharmenian=1405,t.sehiragana=12379,t.sekatakana=12475,t.sekatakanahalfwidth=65406,t.semicolon=59,t.semicolonarabic=1563,t.semicolonmonospace=65307,t.semicolonsmall=65108,t.semivoicedmarkkana=12444,t.semivoicedmarkkanahalfwidth=65439,t.sentisquare=13090,t.sentosquare=13091,t.seven=55,t.sevenarabic=1639,t.sevenbengali=2541,t.sevencircle=9318,t.sevencircleinversesansserif=10128,t.sevendeva=2413,t.seveneighths=8542,t.sevengujarati=2797,t.sevengurmukhi=2669,t.sevenhackarabic=1639,t.sevenhangzhou=12327,t.sevenideographicparen=12838,t.seveninferior=8327,t.sevenmonospace=65303,t.sevenoldstyle=63287,t.sevenparen=9338,t.sevenperiod=9358,t.sevenpersian=1783,t.sevenroman=8566,t.sevensuperior=8311,t.seventeencircle=9328,t.seventeenparen=9348,t.seventeenperiod=9368,t.seventhai=3671,t.sfthyphen=173,t.shaarmenian=1399,t.shabengali=2486,t.shacyrillic=1096,t.shaddaarabic=1617,t.shaddadammaarabic=64609,t.shaddadammatanarabic=64606,t.shaddafathaarabic=64608,t.shaddakasraarabic=64610,t.shaddakasratanarabic=64607,t.shade=9618,t.shadedark=9619,t.shadelight=9617,t.shademedium=9618,t.shadeva=2358,t.shagujarati=2742,t.shagurmukhi=2614,t.shalshelethebrew=1427,t.shbopomofo=12565,t.shchacyrillic=1097,t.sheenarabic=1588,t.sheenfinalarabic=65206,t.sheeninitialarabic=65207,t.sheenmedialarabic=65208,t.sheicoptic=995,t.sheqel=8362,t.sheqelhebrew=8362,t.sheva=1456,t.sheva115=1456,t.sheva15=1456,t.sheva22=1456,t.sheva2e=1456,t.shevahebrew=1456,t.shevanarrowhebrew=1456,t.shevaquarterhebrew=1456,t.shevawidehebrew=1456,t.shhacyrillic=1211,t.shimacoptic=1005,t.shin=1513,t.shindagesh=64329,t.shindageshhebrew=64329,t.shindageshshindot=64300,t.shindageshshindothebrew=64300,t.shindageshsindot=64301,t.shindageshsindothebrew=64301,t.shindothebrew=1473,t.shinhebrew=1513,t.shinshindot=64298,t.shinshindothebrew=64298,t.shinsindot=64299,t.shinsindothebrew=64299,t.shook=642,t.sigma=963,t.sigma1=962,t.sigmafinal=962,t.sigmalunatesymbolgreek=1010,t.sihiragana=12375,t.sikatakana=12471,t.sikatakanahalfwidth=65404,t.siluqhebrew=1469,t.siluqlefthebrew=1469,t.similar=8764,t.sindothebrew=1474,t.siosacirclekorean=12916,t.siosaparenkorean=12820,t.sioscieuckorean=12670,t.sioscirclekorean=12902,t.sioskiyeokkorean=12666,t.sioskorean=12613,t.siosnieunkorean=12667,t.siosparenkorean=12806,t.siospieupkorean=12669,t.siostikeutkorean=12668,t.six=54,t.sixarabic=1638,t.sixbengali=2540,t.sixcircle=9317,t.sixcircleinversesansserif=10127,t.sixdeva=2412,t.sixgujarati=2796,t.sixgurmukhi=2668,t.sixhackarabic=1638,t.sixhangzhou=12326,t.sixideographicparen=12837,t.sixinferior=8326,t.sixmonospace=65302,t.sixoldstyle=63286,t.sixparen=9337,t.sixperiod=9357,t.sixpersian=1782,t.sixroman=8565,t.sixsuperior=8310,t.sixteencircle=9327,t.sixteencurrencydenominatorbengali=2553,t.sixteenparen=9347,t.sixteenperiod=9367,t.sixthai=3670,t.slash=47,t.slashmonospace=65295,t.slong=383,t.slongdotaccent=7835,t.smileface=9786,t.smonospace=65363,t.sofpasuqhebrew=1475,t.softhyphen=173,t.softsigncyrillic=1100,t.sohiragana=12381,t.sokatakana=12477,t.sokatakanahalfwidth=65407,t.soliduslongoverlaycmb=824,t.solidusshortoverlaycmb=823,t.sorusithai=3625,t.sosalathai=3624,t.sosothai=3595,t.sosuathai=3626,t.space=32,t.spacehackarabic=32,t.spade=9824,t.spadesuitblack=9824,t.spadesuitwhite=9828,t.sparen=9390,t.squarebelowcmb=827,t.squarecc=13252,t.squarecm=13213,t.squarediagonalcrosshatchfill=9641,t.squarehorizontalfill=9636,t.squarekg=13199,t.squarekm=13214,t.squarekmcapital=13262,t.squareln=13265,t.squarelog=13266,t.squaremg=13198,t.squaremil=13269,t.squaremm=13212,t.squaremsquared=13217,t.squareorthogonalcrosshatchfill=9638,t.squareupperlefttolowerrightfill=9639,t.squareupperrighttolowerleftfill=9640,t.squareverticalfill=9637,t.squarewhitewithsmallblack=9635,t.srsquare=13275,t.ssabengali=2487,t.ssadeva=2359,t.ssagujarati=2743,t.ssangcieuckorean=12617,t.ssanghieuhkorean=12677,t.ssangieungkorean=12672,t.ssangkiyeokkorean=12594,t.ssangnieunkorean=12645,t.ssangpieupkorean=12611,t.ssangsioskorean=12614,t.ssangtikeutkorean=12600,t.ssuperior=63218,t.sterling=163,t.sterlingmonospace=65505,t.strokelongoverlaycmb=822,t.strokeshortoverlaycmb=821,t.subset=8834,t.subsetnotequal=8842,t.subsetorequal=8838,t.succeeds=8827,t.suchthat=8715,t.suhiragana=12377,t.sukatakana=12473,t.sukatakanahalfwidth=65405,t.sukunarabic=1618,t.summation=8721,t.sun=9788,t.superset=8835,t.supersetnotequal=8843,t.supersetorequal=8839,t.svsquare=13276,t.syouwaerasquare=13180,t.t=116,t.tabengali=2468,t.tackdown=8868,t.tackleft=8867,t.tadeva=2340,t.tagujarati=2724,t.tagurmukhi=2596,t.taharabic=1591,t.tahfinalarabic=65218,t.tahinitialarabic=65219,t.tahiragana=12383,t.tahmedialarabic=65220,t.taisyouerasquare=13181,t.takatakana=12479,t.takatakanahalfwidth=65408,t.tatweelarabic=1600,t.tau=964,t.tav=1514,t.tavdages=64330,t.tavdagesh=64330,t.tavdageshhebrew=64330,t.tavhebrew=1514,t.tbar=359,t.tbopomofo=12554,t.tcaron=357,t.tccurl=680,t.tcedilla=355,t.tcheharabic=1670,t.tchehfinalarabic=64379,t.tchehinitialarabic=64380,t.tchehmedialarabic=64381,t.tcircle=9443,t.tcircumflexbelow=7793,t.tcommaaccent=355,t.tdieresis=7831,t.tdotaccent=7787,t.tdotbelow=7789,t.tecyrillic=1090,t.tedescendercyrillic=1197,t.teharabic=1578,t.tehfinalarabic=65174,t.tehhahinitialarabic=64674,t.tehhahisolatedarabic=64524,t.tehinitialarabic=65175,t.tehiragana=12390,t.tehjeeminitialarabic=64673,t.tehjeemisolatedarabic=64523,t.tehmarbutaarabic=1577,t.tehmarbutafinalarabic=65172,t.tehmedialarabic=65176,t.tehmeeminitialarabic=64676,t.tehmeemisolatedarabic=64526,t.tehnoonfinalarabic=64627,t.tekatakana=12486,t.tekatakanahalfwidth=65411,t.telephone=8481,t.telephoneblack=9742,t.telishagedolahebrew=1440,t.telishaqetanahebrew=1449,t.tencircle=9321,t.tenideographicparen=12841,t.tenparen=9341,t.tenperiod=9361,t.tenroman=8569,t.tesh=679,t.tet=1496,t.tetdagesh=64312,t.tetdageshhebrew=64312,t.tethebrew=1496,t.tetsecyrillic=1205,t.tevirhebrew=1435,t.tevirlefthebrew=1435,t.thabengali=2469,t.thadeva=2341,t.thagujarati=2725,t.thagurmukhi=2597,t.thalarabic=1584,t.thalfinalarabic=65196,t.thanthakhatlowleftthai=63640,t.thanthakhatlowrightthai=63639,t.thanthakhatthai=3660,t.thanthakhatupperleftthai=63638,t.theharabic=1579,t.thehfinalarabic=65178,t.thehinitialarabic=65179,t.thehmedialarabic=65180,t.thereexists=8707,t.therefore=8756,t.theta=952,t.theta1=977,t.thetasymbolgreek=977,t.thieuthacirclekorean=12921,t.thieuthaparenkorean=12825,t.thieuthcirclekorean=12907,t.thieuthkorean=12620,t.thieuthparenkorean=12811,t.thirteencircle=9324,t.thirteenparen=9344,t.thirteenperiod=9364,t.thonangmonthothai=3601,t.thook=429,t.thophuthaothai=3602,t.thorn=254,t.thothahanthai=3607,t.thothanthai=3600,t.thothongthai=3608,t.thothungthai=3606,t.thousandcyrillic=1154,t.thousandsseparatorarabic=1644,t.thousandsseparatorpersian=1644,t.three=51,t.threearabic=1635,t.threebengali=2537,t.threecircle=9314,t.threecircleinversesansserif=10124,t.threedeva=2409,t.threeeighths=8540,t.threegujarati=2793,t.threegurmukhi=2665,t.threehackarabic=1635,t.threehangzhou=12323,t.threeideographicparen=12834,t.threeinferior=8323,t.threemonospace=65299,t.threenumeratorbengali=2550,t.threeoldstyle=63283,t.threeparen=9334,t.threeperiod=9354,t.threepersian=1779,t.threequarters=190,t.threequartersemdash=63198,t.threeroman=8562,t.threesuperior=179,t.threethai=3667,t.thzsquare=13204,t.tihiragana=12385,t.tikatakana=12481,t.tikatakanahalfwidth=65409,t.tikeutacirclekorean=12912,t.tikeutaparenkorean=12816,t.tikeutcirclekorean=12898,t.tikeutkorean=12599,t.tikeutparenkorean=12802,t.tilde=732,t.tildebelowcmb=816,t.tildecmb=771,t.tildecomb=771,t.tildedoublecmb=864,t.tildeoperator=8764,t.tildeoverlaycmb=820,t.tildeverticalcmb=830,t.timescircle=8855,t.tipehahebrew=1430,t.tipehalefthebrew=1430,t.tippigurmukhi=2672,t.titlocyrilliccmb=1155,t.tiwnarmenian=1407,t.tlinebelow=7791,t.tmonospace=65364,t.toarmenian=1385,t.tohiragana=12392,t.tokatakana=12488,t.tokatakanahalfwidth=65412,t.tonebarextrahighmod=741,t.tonebarextralowmod=745,t.tonebarhighmod=742,t.tonebarlowmod=744,t.tonebarmidmod=743,t.tonefive=445,t.tonesix=389,t.tonetwo=424,t.tonos=900,t.tonsquare=13095,t.topatakthai=3599,t.tortoiseshellbracketleft=12308,t.tortoiseshellbracketleftsmall=65117,t.tortoiseshellbracketleftvertical=65081,t.tortoiseshellbracketright=12309,t.tortoiseshellbracketrightsmall=65118,t.tortoiseshellbracketrightvertical=65082,t.totaothai=3605,t.tpalatalhook=427,t.tparen=9391,t.trademark=8482,t.trademarksans=63722,t.trademarkserif=63195,t.tretroflexhook=648,t.triagdn=9660,t.triaglf=9668,t.triagrt=9658,t.triagup=9650,t.ts=678,t.tsadi=1510,t.tsadidagesh=64326,t.tsadidageshhebrew=64326,t.tsadihebrew=1510,t.tsecyrillic=1094,t.tsere=1461,t.tsere12=1461,t.tsere1e=1461,t.tsere2b=1461,t.tserehebrew=1461,t.tserenarrowhebrew=1461,t.tserequarterhebrew=1461,t.tserewidehebrew=1461,t.tshecyrillic=1115,t.tsuperior=63219,t.ttabengali=2463,t.ttadeva=2335,t.ttagujarati=2719,t.ttagurmukhi=2591,t.tteharabic=1657,t.ttehfinalarabic=64359,t.ttehinitialarabic=64360,t.ttehmedialarabic=64361,t.tthabengali=2464,t.tthadeva=2336,t.tthagujarati=2720,t.tthagurmukhi=2592,t.tturned=647,t.tuhiragana=12388,t.tukatakana=12484,t.tukatakanahalfwidth=65410,t.tusmallhiragana=12387,t.tusmallkatakana=12483,t.tusmallkatakanahalfwidth=65391,t.twelvecircle=9323,t.twelveparen=9343,t.twelveperiod=9363,t.twelveroman=8571,t.twentycircle=9331,t.twentyhangzhou=21316,t.twentyparen=9351,t.twentyperiod=9371,t.two=50,t.twoarabic=1634,t.twobengali=2536,t.twocircle=9313,t.twocircleinversesansserif=10123,t.twodeva=2408,t.twodotenleader=8229,t.twodotleader=8229,t.twodotleadervertical=65072,t.twogujarati=2792,t.twogurmukhi=2664,t.twohackarabic=1634,t.twohangzhou=12322,t.twoideographicparen=12833,t.twoinferior=8322,t.twomonospace=65298,t.twonumeratorbengali=2549,t.twooldstyle=63282,t.twoparen=9333,t.twoperiod=9353,t.twopersian=1778,t.tworoman=8561,t.twostroke=443,t.twosuperior=178,t.twothai=3666,t.twothirds=8532,t.u=117,t.uacute=250,t.ubar=649,t.ubengali=2441,t.ubopomofo=12584,t.ubreve=365,t.ucaron=468,t.ucircle=9444,t.ucircumflex=251,t.ucircumflexbelow=7799,t.ucyrillic=1091,t.udattadeva=2385,t.udblacute=369,t.udblgrave=533,t.udeva=2313,t.udieresis=252,t.udieresisacute=472,t.udieresisbelow=7795,t.udieresiscaron=474,t.udieresiscyrillic=1265,t.udieresisgrave=476,t.udieresismacron=470,t.udotbelow=7909,t.ugrave=249,t.ugujarati=2697,t.ugurmukhi=2569,t.uhiragana=12358,t.uhookabove=7911,t.uhorn=432,t.uhornacute=7913,t.uhorndotbelow=7921,t.uhorngrave=7915,t.uhornhookabove=7917,t.uhorntilde=7919,t.uhungarumlaut=369,t.uhungarumlautcyrillic=1267,t.uinvertedbreve=535,t.ukatakana=12454,t.ukatakanahalfwidth=65395,t.ukcyrillic=1145,t.ukorean=12636,t.umacron=363,t.umacroncyrillic=1263,t.umacrondieresis=7803,t.umatragurmukhi=2625,t.umonospace=65365,t.underscore=95,t.underscoredbl=8215,t.underscoremonospace=65343,t.underscorevertical=65075,t.underscorewavy=65103,t.union=8746,t.universal=8704,t.uogonek=371,t.uparen=9392,t.upblock=9600,t.upperdothebrew=1476,t.upsilon=965,t.upsilondieresis=971,t.upsilondieresistonos=944,t.upsilonlatin=650,t.upsilontonos=973,t.uptackbelowcmb=797,t.uptackmod=724,t.uragurmukhi=2675,t.uring=367,t.ushortcyrillic=1118,t.usmallhiragana=12357,t.usmallkatakana=12453,t.usmallkatakanahalfwidth=65385,t.ustraightcyrillic=1199,t.ustraightstrokecyrillic=1201,t.utilde=361,t.utildeacute=7801,t.utildebelow=7797,t.uubengali=2442,t.uudeva=2314,t.uugujarati=2698,t.uugurmukhi=2570,t.uumatragurmukhi=2626,t.uuvowelsignbengali=2498,t.uuvowelsigndeva=2370,t.uuvowelsigngujarati=2754,t.uvowelsignbengali=2497,t.uvowelsigndeva=2369,t.uvowelsigngujarati=2753,t.v=118,t.vadeva=2357,t.vagujarati=2741,t.vagurmukhi=2613,t.vakatakana=12535,t.vav=1493,t.vavdagesh=64309,t.vavdagesh65=64309,t.vavdageshhebrew=64309,t.vavhebrew=1493,t.vavholam=64331,t.vavholamhebrew=64331,t.vavvavhebrew=1520,t.vavyodhebrew=1521,t.vcircle=9445,t.vdotbelow=7807,t.vecyrillic=1074,t.veharabic=1700,t.vehfinalarabic=64363,t.vehinitialarabic=64364,t.vehmedialarabic=64365,t.vekatakana=12537,t.venus=9792,t.verticalbar=124,t.verticallineabovecmb=781,t.verticallinebelowcmb=809,t.verticallinelowmod=716,t.verticallinemod=712,t.vewarmenian=1406,t.vhook=651,t.vikatakana=12536,t.viramabengali=2509,t.viramadeva=2381,t.viramagujarati=2765,t.visargabengali=2435,t.visargadeva=2307,t.visargagujarati=2691,t.vmonospace=65366,t.voarmenian=1400,t.voicediterationhiragana=12446,t.voicediterationkatakana=12542,t.voicedmarkkana=12443,t.voicedmarkkanahalfwidth=65438,t.vokatakana=12538,t.vparen=9393,t.vtilde=7805,t.vturned=652,t.vuhiragana=12436,t.vukatakana=12532,t.w=119,t.wacute=7811,t.waekorean=12633,t.wahiragana=12431,t.wakatakana=12527,t.wakatakanahalfwidth=65436,t.wakorean=12632,t.wasmallhiragana=12430,t.wasmallkatakana=12526,t.wattosquare=13143,t.wavedash=12316,t.wavyunderscorevertical=65076,t.wawarabic=1608,t.wawfinalarabic=65262,t.wawhamzaabovearabic=1572,t.wawhamzaabovefinalarabic=65158,t.wbsquare=13277,t.wcircle=9446,t.wcircumflex=373,t.wdieresis=7813,t.wdotaccent=7815,t.wdotbelow=7817,t.wehiragana=12433,t.weierstrass=8472,t.wekatakana=12529,t.wekorean=12638,t.weokorean=12637,t.wgrave=7809,t.whitebullet=9702,t.whitecircle=9675,t.whitecircleinverse=9689,t.whitecornerbracketleft=12302,t.whitecornerbracketleftvertical=65091,t.whitecornerbracketright=12303,t.whitecornerbracketrightvertical=65092,t.whitediamond=9671,t.whitediamondcontainingblacksmalldiamond=9672,t.whitedownpointingsmalltriangle=9663,t.whitedownpointingtriangle=9661,t.whiteleftpointingsmalltriangle=9667,t.whiteleftpointingtriangle=9665,t.whitelenticularbracketleft=12310,t.whitelenticularbracketright=12311,t.whiterightpointingsmalltriangle=9657;t.whiterightpointingtriangle=9655,t.whitesmallsquare=9643,t.whitesmilingface=9786,t.whitesquare=9633,t.whitestar=9734,t.whitetelephone=9743,t.whitetortoiseshellbracketleft=12312,t.whitetortoiseshellbracketright=12313,t.whiteuppointingsmalltriangle=9653,t.whiteuppointingtriangle=9651,t.wihiragana=12432,t.wikatakana=12528,t.wikorean=12639,t.wmonospace=65367,t.wohiragana=12434,t.wokatakana=12530,t.wokatakanahalfwidth=65382,t.won=8361,t.wonmonospace=65510,t.wowaenthai=3623,t.wparen=9394,t.wring=7832,t.wsuperior=695,t.wturned=653,t.wynn=447,t.x=120,t.xabovecmb=829,t.xbopomofo=12562,t.xcircle=9447,t.xdieresis=7821,t.xdotaccent=7819,t.xeharmenian=1389,t.xi=958,t.xmonospace=65368,t.xparen=9395,t.xsuperior=739,t.y=121,t.yaadosquare=13134,t.yabengali=2479,t.yacute=253,t.yadeva=2351,t.yaekorean=12626,t.yagujarati=2735,t.yagurmukhi=2607,t.yahiragana=12420,t.yakatakana=12516,t.yakatakanahalfwidth=65428,t.yakorean=12625,t.yamakkanthai=3662,t.yasmallhiragana=12419,t.yasmallkatakana=12515,t.yasmallkatakanahalfwidth=65388,t.yatcyrillic=1123,t.ycircle=9448,t.ycircumflex=375,t.ydieresis=255,t.ydotaccent=7823,t.ydotbelow=7925,t.yeharabic=1610,t.yehbarreearabic=1746,t.yehbarreefinalarabic=64431,t.yehfinalarabic=65266,t.yehhamzaabovearabic=1574,t.yehhamzaabovefinalarabic=65162,t.yehhamzaaboveinitialarabic=65163,t.yehhamzaabovemedialarabic=65164,t.yehinitialarabic=65267,t.yehmedialarabic=65268,t.yehmeeminitialarabic=64733,t.yehmeemisolatedarabic=64600,t.yehnoonfinalarabic=64660,t.yehthreedotsbelowarabic=1745,t.yekorean=12630,t.yen=165,t.yenmonospace=65509,t.yeokorean=12629,t.yeorinhieuhkorean=12678,t.yerahbenyomohebrew=1450,t.yerahbenyomolefthebrew=1450,t.yericyrillic=1099,t.yerudieresiscyrillic=1273,t.yesieungkorean=12673,t.yesieungpansioskorean=12675,t.yesieungsioskorean=12674,t.yetivhebrew=1434,t.ygrave=7923,t.yhook=436,t.yhookabove=7927,t.yiarmenian=1397,t.yicyrillic=1111,t.yikorean=12642,t.yinyang=9775,t.yiwnarmenian=1410,t.ymonospace=65369,t.yod=1497,t.yoddagesh=64313,t.yoddageshhebrew=64313,t.yodhebrew=1497,t.yodyodhebrew=1522,t.yodyodpatahhebrew=64287,t.yohiragana=12424,t.yoikorean=12681,t.yokatakana=12520,t.yokatakanahalfwidth=65430,t.yokorean=12635,t.yosmallhiragana=12423,t.yosmallkatakana=12519,t.yosmallkatakanahalfwidth=65390,t.yotgreek=1011,t.yoyaekorean=12680,t.yoyakorean=12679,t.yoyakthai=3618,t.yoyingthai=3597,t.yparen=9396,t.ypogegrammeni=890,t.ypogegrammenigreekcmb=837,t.yr=422,t.yring=7833,t.ysuperior=696,t.ytilde=7929,t.yturned=654,t.yuhiragana=12422,t.yuikorean=12684,t.yukatakana=12518,t.yukatakanahalfwidth=65429,t.yukorean=12640,t.yusbigcyrillic=1131,t.yusbigiotifiedcyrillic=1133,t.yuslittlecyrillic=1127,t.yuslittleiotifiedcyrillic=1129,t.yusmallhiragana=12421,t.yusmallkatakana=12517,t.yusmallkatakanahalfwidth=65389,t.yuyekorean=12683,t.yuyeokorean=12682,t.yyabengali=2527,t.yyadeva=2399,t.z=122,t.zaarmenian=1382,t.zacute=378,t.zadeva=2395,t.zagurmukhi=2651,t.zaharabic=1592,t.zahfinalarabic=65222,t.zahinitialarabic=65223,t.zahiragana=12374,t.zahmedialarabic=65224,t.zainarabic=1586,t.zainfinalarabic=65200,t.zakatakana=12470,t.zaqefgadolhebrew=1429,t.zaqefqatanhebrew=1428,t.zarqahebrew=1432,t.zayin=1494,t.zayindagesh=64310,t.zayindageshhebrew=64310,t.zayinhebrew=1494,t.zbopomofo=12567,t.zcaron=382,t.zcircle=9449,t.zcircumflex=7825,t.zcurl=657,t.zdot=380,t.zdotaccent=380,t.zdotbelow=7827,t.zecyrillic=1079,t.zedescendercyrillic=1177,t.zedieresiscyrillic=1247,t.zehiragana=12380,t.zekatakana=12476,t.zero=48,t.zeroarabic=1632,t.zerobengali=2534,t.zerodeva=2406,t.zerogujarati=2790,t.zerogurmukhi=2662,t.zerohackarabic=1632,t.zeroinferior=8320,t.zeromonospace=65296,t.zerooldstyle=63280,t.zeropersian=1776,t.zerosuperior=8304,t.zerothai=3664,t.zerowidthjoiner=65279,t.zerowidthnonjoiner=8204,t.zerowidthspace=8203,t.zeta=950,t.zhbopomofo=12563,t.zhearmenian=1386,t.zhebrevecyrillic=1218,t.zhecyrillic=1078,t.zhedescendercyrillic=1175,t.zhedieresiscyrillic=1245,t.zihiragana=12376,t.zikatakana=12472,t.zinorhebrew=1454,t.zlinebelow=7829,t.zmonospace=65370,t.zohiragana=12382,t.zokatakana=12478,t.zparen=9397,t.zretroflexhook=656,t.zstroke=438,t.zuhiragana=12378,t.zukatakana=12474,t[".notdef"]=0,t.angbracketleftbig=9001,t.angbracketleftBig=9001,t.angbracketleftbigg=9001,t.angbracketleftBigg=9001,t.angbracketrightBig=9002,t.angbracketrightbig=9002,t.angbracketrightBigg=9002,t.angbracketrightbigg=9002,t.arrowhookleft=8618,t.arrowhookright=8617,t.arrowlefttophalf=8636,t.arrowleftbothalf=8637,t.arrownortheast=8599,t.arrownorthwest=8598,t.arrowrighttophalf=8640,t.arrowrightbothalf=8641,t.arrowsoutheast=8600,t.arrowsouthwest=8601,t.backslashbig=8726,t.backslashBig=8726,t.backslashBigg=8726,t.backslashbigg=8726,t.bardbl=8214,t.bracehtipdownleft=65079,t.bracehtipdownright=65079,t.bracehtipupleft=65080,t.bracehtipupright=65080,t.braceleftBig=123,t.braceleftbig=123,t.braceleftbigg=123,t.braceleftBigg=123,t.bracerightBig=125,t.bracerightbig=125,t.bracerightbigg=125,t.bracerightBigg=125,t.bracketleftbig=91,t.bracketleftBig=91,t.bracketleftbigg=91,t.bracketleftBigg=91,t.bracketrightBig=93,t.bracketrightbig=93,t.bracketrightbigg=93,t.bracketrightBigg=93,t.ceilingleftbig=8968,t.ceilingleftBig=8968,t.ceilingleftBigg=8968,t.ceilingleftbigg=8968,t.ceilingrightbig=8969,t.ceilingrightBig=8969,t.ceilingrightbigg=8969,t.ceilingrightBigg=8969,t.circledotdisplay=8857,t.circledottext=8857,t.circlemultiplydisplay=8855,t.circlemultiplytext=8855,t.circleplusdisplay=8853,t.circleplustext=8853,t.contintegraldisplay=8750,t.contintegraltext=8750,t.coproductdisplay=8720,t.coproducttext=8720,t.floorleftBig=8970,t.floorleftbig=8970,t.floorleftbigg=8970,t.floorleftBigg=8970,t.floorrightbig=8971,t.floorrightBig=8971,t.floorrightBigg=8971,t.floorrightbigg=8971,t.hatwide=770,t.hatwider=770,t.hatwidest=770,t.intercal=7488,t.integraldisplay=8747,t.integraltext=8747,t.intersectiondisplay=8898,t.intersectiontext=8898,t.logicalanddisplay=8743,t.logicalandtext=8743,t.logicalordisplay=8744,t.logicalortext=8744,t.parenleftBig=40,t.parenleftbig=40,t.parenleftBigg=40,t.parenleftbigg=40,t.parenrightBig=41,t.parenrightbig=41,t.parenrightBigg=41,t.parenrightbigg=41,t.prime=8242,t.productdisplay=8719,t.producttext=8719,t.radicalbig=8730,t.radicalBig=8730,t.radicalBigg=8730,t.radicalbigg=8730,t.radicalbt=8730,t.radicaltp=8730,t.radicalvertex=8730,t.slashbig=47,t.slashBig=47,t.slashBigg=47,t.slashbigg=47,t.summationdisplay=8721,t.summationtext=8721,t.tildewide=732,t.tildewider=732,t.tildewidest=732,t.uniondisplay=8899,t.unionmultidisplay=8846,t.unionmultitext=8846,t.unionsqdisplay=8852,t.unionsqtext=8852,t.uniontext=8899,t.vextenddouble=8741,t.vextendsingle=8739})),l=i((function(t){t.space=32,t.a1=9985,t.a2=9986,t.a202=9987,t.a3=9988,t.a4=9742,t.a5=9990,t.a119=9991,t.a118=9992,t.a117=9993,t.a11=9755,t.a12=9758,t.a13=9996,t.a14=9997,t.a15=9998,t.a16=9999,t.a105=1e4,t.a17=10001,t.a18=10002,t.a19=10003,t.a20=10004,t.a21=10005,t.a22=10006,t.a23=10007,t.a24=10008,t.a25=10009,t.a26=10010,t.a27=10011,t.a28=10012,t.a6=10013,t.a7=10014,t.a8=10015,t.a9=10016,t.a10=10017,t.a29=10018,t.a30=10019,t.a31=10020,t.a32=10021,t.a33=10022,t.a34=10023,t.a35=9733,t.a36=10025,t.a37=10026,t.a38=10027,t.a39=10028,t.a40=10029,t.a41=10030,t.a42=10031,t.a43=10032,t.a44=10033,t.a45=10034,t.a46=10035,t.a47=10036,t.a48=10037,t.a49=10038,t.a50=10039,t.a51=10040,t.a52=10041,t.a53=10042,t.a54=10043,t.a55=10044,t.a56=10045,t.a57=10046,t.a58=10047,t.a59=10048,t.a60=10049,t.a61=10050,t.a62=10051,t.a63=10052,t.a64=10053,t.a65=10054,t.a66=10055,t.a67=10056,t.a68=10057,t.a69=10058,t.a70=10059,t.a71=9679,t.a72=10061,t.a73=9632,t.a74=10063,t.a203=10064,t.a75=10065,t.a204=10066,t.a76=9650,t.a77=9660,t.a78=9670,t.a79=10070,t.a81=9687,t.a82=10072,t.a83=10073,t.a84=10074,t.a97=10075,t.a98=10076,t.a99=10077,t.a100=10078,t.a101=10081,t.a102=10082,t.a103=10083,t.a104=10084,t.a106=10085,t.a107=10086,t.a108=10087,t.a112=9827,t.a111=9830,t.a110=9829,t.a109=9824,t.a120=9312,t.a121=9313,t.a122=9314,t.a123=9315,t.a124=9316,t.a125=9317,t.a126=9318,t.a127=9319,t.a128=9320,t.a129=9321,t.a130=10102,t.a131=10103,t.a132=10104,t.a133=10105,t.a134=10106,t.a135=10107,t.a136=10108,t.a137=10109,t.a138=10110,t.a139=10111,t.a140=10112,t.a141=10113,t.a142=10114,t.a143=10115,t.a144=10116,t.a145=10117,t.a146=10118,t.a147=10119,t.a148=10120,t.a149=10121,t.a150=10122,t.a151=10123,t.a152=10124,t.a153=10125,t.a154=10126,t.a155=10127,t.a156=10128,t.a157=10129,t.a158=10130,t.a159=10131,t.a160=10132,t.a161=8594,t.a163=8596,t.a164=8597,t.a196=10136,t.a165=10137,t.a192=10138,t.a166=10139,t.a167=10140,t.a168=10141,t.a169=10142,t.a170=10143,t.a171=10144,t.a172=10145,t.a173=10146,t.a162=10147,t.a174=10148,t.a175=10149,t.a176=10150,t.a177=10151,t.a178=10152,t.a179=10153,t.a193=10154,t.a180=10155,t.a199=10156,t.a181=10157,t.a200=10158,t.a182=10159,t.a201=10161,t.a183=10162,t.a184=10163,t.a197=10164,t.a185=10165,t.a194=10166,t.a198=10167,t.a186=10168,t.a195=10169,t.a187=10170,t.a188=10171,t.a189=10172,t.a190=10173,t.a191=10174,t.a89=10088,t.a90=10089,t.a93=10090,t.a94=10091,t.a91=10092,t.a92=10093,t.a205=10094,t.a85=10095,t.a206=10096,t.a86=10097,t.a87=10098,t.a88=10099,t.a95=10100,t.a96=10101,t[".notdef"]=0}));r.getGlyphsUnicode=o,r.getDingbatsGlyphsUnicode=l},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getSupplementalGlyphMapForCalibri=r.getSupplementalGlyphMapForArialBlack=r.getGlyphMapForStandardFonts=r.getSymbolsFonts=r.getSerifFonts=r.getNonStdFontMap=r.getStdFontMap=void 0;var i=a(201),o=(0,i.getLookupTableFactory)((function(t){t.ArialNarrow="Helvetica",t["ArialNarrow-Bold"]="Helvetica-Bold",t["ArialNarrow-BoldItalic"]="Helvetica-BoldOblique",t["ArialNarrow-Italic"]="Helvetica-Oblique",t.ArialBlack="Helvetica",t["ArialBlack-Bold"]="Helvetica-Bold",t["ArialBlack-BoldItalic"]="Helvetica-BoldOblique",t["ArialBlack-Italic"]="Helvetica-Oblique",t["Arial-Black"]="Helvetica",t["Arial-Black-Bold"]="Helvetica-Bold",t["Arial-Black-BoldItalic"]="Helvetica-BoldOblique",t["Arial-Black-Italic"]="Helvetica-Oblique",t.Arial="Helvetica",t["Arial-Bold"]="Helvetica-Bold",t["Arial-BoldItalic"]="Helvetica-BoldOblique",t["Arial-Italic"]="Helvetica-Oblique",t["Arial-BoldItalicMT"]="Helvetica-BoldOblique",t["Arial-BoldMT"]="Helvetica-Bold",t["Arial-ItalicMT"]="Helvetica-Oblique",t.ArialMT="Helvetica",t["Courier-Bold"]="Courier-Bold",t["Courier-BoldItalic"]="Courier-BoldOblique",t["Courier-Italic"]="Courier-Oblique",t.CourierNew="Courier",t["CourierNew-Bold"]="Courier-Bold",t["CourierNew-BoldItalic"]="Courier-BoldOblique",t["CourierNew-Italic"]="Courier-Oblique",t["CourierNewPS-BoldItalicMT"]="Courier-BoldOblique",t["CourierNewPS-BoldMT"]="Courier-Bold",t["CourierNewPS-ItalicMT"]="Courier-Oblique",t.CourierNewPSMT="Courier",t.Helvetica="Helvetica",t["Helvetica-Bold"]="Helvetica-Bold",t["Helvetica-BoldItalic"]="Helvetica-BoldOblique",t["Helvetica-BoldOblique"]="Helvetica-BoldOblique",t["Helvetica-Italic"]="Helvetica-Oblique",t["Helvetica-Oblique"]="Helvetica-Oblique",t["Symbol-Bold"]="Symbol",t["Symbol-BoldItalic"]="Symbol",t["Symbol-Italic"]="Symbol",t.TimesNewRoman="Times-Roman",t["TimesNewRoman-Bold"]="Times-Bold",t["TimesNewRoman-BoldItalic"]="Times-BoldItalic",t["TimesNewRoman-Italic"]="Times-Italic",t.TimesNewRomanPS="Times-Roman",t["TimesNewRomanPS-Bold"]="Times-Bold",t["TimesNewRomanPS-BoldItalic"]="Times-BoldItalic",t["TimesNewRomanPS-BoldItalicMT"]="Times-BoldItalic",t["TimesNewRomanPS-BoldMT"]="Times-Bold",t["TimesNewRomanPS-Italic"]="Times-Italic",t["TimesNewRomanPS-ItalicMT"]="Times-Italic",t.TimesNewRomanPSMT="Times-Roman",t["TimesNewRomanPSMT-Bold"]="Times-Bold",t["TimesNewRomanPSMT-BoldItalic"]="Times-BoldItalic",t["TimesNewRomanPSMT-Italic"]="Times-Italic"}));r.getStdFontMap=o;var l=(0,i.getLookupTableFactory)((function(t){t.Calibri="Helvetica",t["Calibri-Bold"]="Helvetica-Bold",t["Calibri-BoldItalic"]="Helvetica-BoldOblique",t["Calibri-Italic"]="Helvetica-Oblique",t.CenturyGothic="Helvetica",t["CenturyGothic-Bold"]="Helvetica-Bold",t["CenturyGothic-BoldItalic"]="Helvetica-BoldOblique",t["CenturyGothic-Italic"]="Helvetica-Oblique",t.ComicSansMS="Comic Sans MS",t["ComicSansMS-Bold"]="Comic Sans MS-Bold",t["ComicSansMS-BoldItalic"]="Comic Sans MS-BoldItalic",t["ComicSansMS-Italic"]="Comic Sans MS-Italic",t.LucidaConsole="Courier",t["LucidaConsole-Bold"]="Courier-Bold",t["LucidaConsole-BoldItalic"]="Courier-BoldOblique",t["LucidaConsole-Italic"]="Courier-Oblique",t["LucidaSans-Demi"]="Helvetica-Bold",t["MS-Gothic"]="MS Gothic",t["MS-Gothic-Bold"]="MS Gothic-Bold",t["MS-Gothic-BoldItalic"]="MS Gothic-BoldItalic",t["MS-Gothic-Italic"]="MS Gothic-Italic",t["MS-Mincho"]="MS Mincho",t["MS-Mincho-Bold"]="MS Mincho-Bold",t["MS-Mincho-BoldItalic"]="MS Mincho-BoldItalic",t["MS-Mincho-Italic"]="MS Mincho-Italic",t["MS-PGothic"]="MS PGothic",t["MS-PGothic-Bold"]="MS PGothic-Bold",t["MS-PGothic-BoldItalic"]="MS PGothic-BoldItalic",t["MS-PGothic-Italic"]="MS PGothic-Italic",t["MS-PMincho"]="MS PMincho",t["MS-PMincho-Bold"]="MS PMincho-Bold",t["MS-PMincho-BoldItalic"]="MS PMincho-BoldItalic",t["MS-PMincho-Italic"]="MS PMincho-Italic",t.NuptialScript="Times-Italic",t.SegoeUISymbol="Helvetica",t.Wingdings="ZapfDingbats",t["Wingdings-Regular"]="ZapfDingbats"}));r.getNonStdFontMap=l;var c=(0,i.getLookupTableFactory)((function(t){t["Adobe Jenson"]=!0,t["Adobe Text"]=!0,t.Albertus=!0,t.Aldus=!0,t.Alexandria=!0,t.Algerian=!0,t["American Typewriter"]=!0,t.Antiqua=!0,t.Apex=!0,t.Arno=!0,t.Aster=!0,t.Aurora=!0,t.Baskerville=!0,t.Bell=!0,t.Bembo=!0,t["Bembo Schoolbook"]=!0,t.Benguiat=!0,t["Berkeley Old Style"]=!0,t["Bernhard Modern"]=!0,t["Berthold City"]=!0,t.Bodoni=!0,t["Bauer Bodoni"]=!0,t["Book Antiqua"]=!0,t.Bookman=!0,t["Bordeaux Roman"]=!0,t["Californian FB"]=!0,t.Calisto=!0,t.Calvert=!0,t.Capitals=!0,t.Cambria=!0,t.Cartier=!0,t.Caslon=!0,t.Catull=!0,t.Centaur=!0,t["Century Old Style"]=!0,t["Century Schoolbook"]=!0,t.Chaparral=!0,t["Charis SIL"]=!0,t.Cheltenham=!0,t["Cholla Slab"]=!0,t.Clarendon=!0,t.Clearface=!0,t.Cochin=!0,t.Colonna=!0,t["Computer Modern"]=!0,t["Concrete Roman"]=!0,t.Constantia=!0,t["Cooper Black"]=!0,t.Corona=!0,t.Ecotype=!0,t.Egyptienne=!0,t.Elephant=!0,t.Excelsior=!0,t.Fairfield=!0,t["FF Scala"]=!0,t.Folkard=!0,t.Footlight=!0,t.FreeSerif=!0,t["Friz Quadrata"]=!0,t.Garamond=!0,t.Gentium=!0,t.Georgia=!0,t.Gloucester=!0,t["Goudy Old Style"]=!0,t["Goudy Schoolbook"]=!0,t["Goudy Pro Font"]=!0,t.Granjon=!0,t["Guardian Egyptian"]=!0,t.Heather=!0,t.Hercules=!0,t["High Tower Text"]=!0,t.Hiroshige=!0,t["Hoefler Text"]=!0,t["Humana Serif"]=!0,t.Imprint=!0,t["Ionic No. 5"]=!0,t.Janson=!0,t.Joanna=!0,t.Korinna=!0,t.Lexicon=!0,t["Liberation Serif"]=!0,t["Linux Libertine"]=!0,t.Literaturnaya=!0,t.Lucida=!0,t["Lucida Bright"]=!0,t.Melior=!0,t.Memphis=!0,t.Miller=!0,t.Minion=!0,t.Modern=!0,t["Mona Lisa"]=!0,t["Mrs Eaves"]=!0,t["MS Serif"]=!0,t["Museo Slab"]=!0,t["New York"]=!0,t["Nimbus Roman"]=!0,t["NPS Rawlinson Roadway"]=!0,t.NuptialScript=!0,t.Palatino=!0,t.Perpetua=!0,t.Plantin=!0,t["Plantin Schoolbook"]=!0,t.Playbill=!0,t["Poor Richard"]=!0,t["Rawlinson Roadway"]=!0,t.Renault=!0,t.Requiem=!0,t.Rockwell=!0,t.Roman=!0,t["Rotis Serif"]=!0,t.Sabon=!0,t.Scala=!0,t.Seagull=!0,t.Sistina=!0,t.Souvenir=!0,t.STIX=!0,t["Stone Informal"]=!0,t["Stone Serif"]=!0,t.Sylfaen=!0,t.Times=!0,t.Trajan=!0,t["Trinit"]=!0,t["Trump Mediaeval"]=!0,t.Utopia=!0,t["Vale Type"]=!0,t["Bitstream Vera"]=!0,t["Vera Serif"]=!0,t.Versailles=!0,t.Wanted=!0,t.Weiss=!0,t["Wide Latin"]=!0,t.Windsor=!0,t.XITS=!0}));r.getSerifFonts=c;var u=(0,i.getLookupTableFactory)((function(t){t.Dingbats=!0,t.Symbol=!0,t.ZapfDingbats=!0}));r.getSymbolsFonts=u;var h=(0,i.getLookupTableFactory)((function(t){t[2]=10,t[3]=32,t[4]=33,t[5]=34,t[6]=35,t[7]=36,t[8]=37,t[9]=38,t[10]=39,t[11]=40,t[12]=41,t[13]=42,t[14]=43,t[15]=44,t[16]=45,t[17]=46,t[18]=47,t[19]=48,t[20]=49,t[21]=50,t[22]=51,t[23]=52,t[24]=53,t[25]=54,t[26]=55,t[27]=56,t[28]=57,t[29]=58,t[30]=894,t[31]=60,t[32]=61,t[33]=62,t[34]=63,t[35]=64,t[36]=65,t[37]=66,t[38]=67,t[39]=68,t[40]=69,t[41]=70,t[42]=71,t[43]=72,t[44]=73,t[45]=74,t[46]=75,t[47]=76,t[48]=77,t[49]=78,t[50]=79,t[51]=80,t[52]=81,t[53]=82,t[54]=83,t[55]=84,t[56]=85,t[57]=86,t[58]=87,t[59]=88,t[60]=89,t[61]=90,t[62]=91,t[63]=92,t[64]=93,t[65]=94,t[66]=95,t[67]=96,t[68]=97,t[69]=98,t[70]=99,t[71]=100,t[72]=101,t[73]=102,t[74]=103,t[75]=104,t[76]=105,t[77]=106,t[78]=107,t[79]=108,t[80]=109,t[81]=110,t[82]=111,t[83]=112,t[84]=113,t[85]=114,t[86]=115,t[87]=116,t[88]=117,t[89]=118,t[90]=119,t[91]=120,t[92]=121,t[93]=122,t[94]=123,t[95]=124,t[96]=125,t[97]=126,t[98]=196,t[99]=197,t[100]=199,t[101]=201,t[102]=209,t[103]=214,t[104]=220,t[105]=225,t[106]=224,t[107]=226,t[108]=228,t[109]=227,t[110]=229,t[111]=231,t[112]=233,t[113]=232,t[114]=234,t[115]=235,t[116]=237,t[117]=236,t[118]=238,t[119]=239,t[120]=241,t[121]=243,t[122]=242,t[123]=244,t[124]=246,t[125]=245,t[126]=250,t[127]=249,t[128]=251,t[129]=252,t[130]=8224,t[131]=176,t[132]=162,t[133]=163,t[134]=167,t[135]=8226,t[136]=182,t[137]=223,t[138]=174,t[139]=169,t[140]=8482,t[141]=180,t[142]=168,t[143]=8800,t[144]=198,t[145]=216,t[146]=8734,t[147]=177,t[148]=8804,t[149]=8805,t[150]=165,t[151]=181,t[152]=8706,t[153]=8721,t[154]=8719,t[156]=8747,t[157]=170,t[158]=186,t[159]=8486,t[160]=230,t[161]=248,t[162]=191,t[163]=161,t[164]=172,t[165]=8730,t[166]=402,t[167]=8776,t[168]=8710,t[169]=171,t[170]=187,t[171]=8230,t[210]=218,t[223]=711,t[224]=321,t[225]=322,t[227]=353,t[229]=382,t[234]=253,t[252]=263,t[253]=268,t[254]=269,t[258]=258,t[260]=260,t[261]=261,t[265]=280,t[266]=281,t[268]=283,t[269]=313,t[275]=323,t[276]=324,t[278]=328,t[284]=345,t[285]=346,t[286]=347,t[292]=367,t[295]=377,t[296]=378,t[298]=380,t[305]=963,t[306]=964,t[307]=966,t[308]=8215,t[309]=8252,t[310]=8319,t[311]=8359,t[312]=8592,t[313]=8593,t[337]=9552,t[493]=1039,t[494]=1040,t[705]=1524,t[706]=8362,t[710]=64288,t[711]=64298,t[759]=1617,t[761]=1776,t[763]=1778,t[775]=1652,t[777]=1764,t[778]=1780,t[779]=1781,t[780]=1782,t[782]=771,t[783]=64726,t[786]=8363,t[788]=8532,t[790]=768,t[791]=769,t[792]=768,t[795]=803,t[797]=64336,t[798]=64337,t[799]=64342,t[800]=64343,t[801]=64344,t[802]=64345,t[803]=64362,t[804]=64363,t[805]=64364,t[2424]=7821,t[2425]=7822,t[2426]=7823,t[2427]=7824,t[2428]=7825,t[2429]=7826,t[2430]=7827,t[2433]=7682,t[2678]=8045,t[2679]=8046,t[2830]=1552,t[2838]=686,t[2840]=751,t[2842]=753,t[2843]=754,t[2844]=755,t[2846]=757,t[2856]=767,t[2857]=848,t[2858]=849,t[2862]=853,t[2863]=854,t[2864]=855,t[2865]=861,t[2866]=862,t[2906]=7460,t[2908]=7462,t[2909]=7463,t[2910]=7464,t[2912]=7466,t[2913]=7467,t[2914]=7468,t[2916]=7470,t[2917]=7471,t[2918]=7472,t[2920]=7474,t[2921]=7475,t[2922]=7476,t[2924]=7478,t[2925]=7479,t[2926]=7480,t[2928]=7482,t[2929]=7483,t[2930]=7484,t[2932]=7486,t[2933]=7487,t[2934]=7488,t[2936]=7490,t[2937]=7491,t[2938]=7492,t[2940]=7494,t[2941]=7495,t[2942]=7496,t[2944]=7498,t[2946]=7500,t[2948]=7502,t[2950]=7504,t[2951]=7505,t[2952]=7506,t[2954]=7508,t[2955]=7509,t[2956]=7510,t[2958]=7512,t[2959]=7513,t[2960]=7514,t[2962]=7516,t[2963]=7517,t[2964]=7518,t[2966]=7520,t[2967]=7521,t[2968]=7522,t[2970]=7524,t[2971]=7525,t[2972]=7526,t[2974]=7528,t[2975]=7529,t[2976]=7530,t[2978]=1537,t[2979]=1538,t[2980]=1539,t[2982]=1549,t[2983]=1551,t[2984]=1552,t[2986]=1554,t[2987]=1555,t[2988]=1556,t[2990]=1623,t[2991]=1624,t[2995]=1775,t[2999]=1791,t[3002]=64290,t[3003]=64291,t[3004]=64292,t[3006]=64294,t[3007]=64295,t[3008]=64296,t[3011]=1900,t[3014]=8223,t[3015]=8244,t[3017]=7532,t[3018]=7533,t[3019]=7534,t[3075]=7590,t[3076]=7591,t[3079]=7594,t[3080]=7595,t[3083]=7598,t[3084]=7599,t[3087]=7602,t[3088]=7603,t[3091]=7606,t[3092]=7607,t[3095]=7610,t[3096]=7611,t[3099]=7614,t[3100]=7615,t[3103]=7618,t[3104]=7619,t[3107]=8337,t[3108]=8338,t[3116]=1884,t[3119]=1885,t[3120]=1885,t[3123]=1886,t[3124]=1886,t[3127]=1887,t[3128]=1887,t[3131]=1888,t[3132]=1888,t[3135]=1889,t[3136]=1889,t[3139]=1890,t[3140]=1890,t[3143]=1891,t[3144]=1891,t[3147]=1892,t[3148]=1892,t[3153]=580,t[3154]=581,t[3157]=584,t[3158]=585,t[3161]=588,t[3162]=589,t[3165]=891,t[3166]=892,t[3169]=1274,t[3170]=1275,t[3173]=1278,t[3174]=1279,t[3181]=7622,t[3182]=7623,t[3282]=11799,t[3316]=578,t[3379]=42785,t[3393]=1159,t[3416]=8377}));r.getGlyphMapForStandardFonts=h;var d=(0,i.getLookupTableFactory)((function(t){t[227]=322,t[264]=261,t[291]=346}));r.getSupplementalGlyphMapForArialBlack=d;var p=(0,i.getLookupTableFactory)((function(t){t[1]=32,t[4]=65,t[17]=66,t[18]=67,t[24]=68,t[28]=69,t[38]=70,t[39]=71,t[44]=72,t[47]=73,t[58]=74,t[60]=75,t[62]=76,t[68]=77,t[69]=78,t[75]=79,t[87]=80,t[89]=81,t[90]=82,t[94]=83,t[100]=84,t[104]=85,t[115]=86,t[116]=87,t[121]=88,t[122]=89,t[127]=90,t[258]=97,t[268]=261,t[271]=98,t[272]=99,t[273]=263,t[282]=100,t[286]=101,t[295]=281,t[296]=102,t[336]=103,t[346]=104,t[349]=105,t[361]=106,t[364]=107,t[367]=108,t[371]=322,t[373]=109,t[374]=110,t[381]=111,t[383]=243,t[393]=112,t[395]=113,t[396]=114,t[400]=115,t[401]=347,t[410]=116,t[437]=117,t[448]=118,t[449]=119,t[454]=120,t[455]=121,t[460]=122,t[463]=380,t[853]=44,t[855]=58,t[856]=46,t[876]=47,t[878]=45,t[882]=45,t[894]=40,t[895]=41,t[896]=91,t[897]=93,t[923]=64,t[1004]=48,t[1005]=49,t[1006]=50,t[1007]=51,t[1008]=52,t[1009]=53,t[1010]=54,t[1011]=55,t[1012]=56,t[1013]=57,t[1081]=37,t[1085]=43,t[1086]=45}));r.getSupplementalGlyphMapForCalibri=p},function(t,r,a){var i=a(201).getLookupTableFactory,o=i((function(t){t[63721]=169,t[63193]=169,t[63720]=174,t[63194]=174,t[63722]=8482,t[63195]=8482,t[63729]=9127,t[63730]=9128,t[63731]=9129,t[63740]=9131,t[63741]=9132,t[63742]=9133,t[63726]=9121,t[63727]=9122,t[63728]=9123,t[63737]=9124,t[63738]=9125,t[63739]=9126,t[63723]=9115,t[63724]=9116,t[63725]=9117,t[63734]=9118,t[63735]=9119,t[63736]=9120}));var l=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];var c=i((function(t){t[""]=" ",t[""]=" ",t[""]=" ",t[""]="",t[""]=" ",t[""]="IJ",t[""]="ij",t[""]="L",t[""]="l",t[""]="n",t[""]="s",t[""]="D",t[""]="D",t[""]="d",t[""]="LJ",t[""]="Lj",t[""]="lj",t[""]="NJ",t[""]="Nj",t[""]="nj",t[""]="DZ",t[""]="Dz",t[""]="dz",t[""]=" ",t[""]=" ",t[""]=" ",t[""]=" ",t[""]=" ",t[""]=" ",t[""]=" ",t[""]=" ",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="a",t[""]=" ",t[""]=" ",t[""]=" ",t[""]=" ",t[""]=" ",t[""]=" ",t[""]=" ",t[""]=" ",t[""]=" ",t[""]=" ",t[""]=" ",t[""]=" ",t[""]=" ",t[""]=".",t[""]="..",t[""]="...",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="!!",t[""]=" ",t[""]="??",t[""]="?!",t[""]="!?",t[""]="",t[""]=" ",t[""]="Rs",t[""]="a/c",t[""]="a/s",t[""]="C",t[""]="c/o",t[""]="c/u",t[""]="",t[""]="F",t[""]="No",t[""]="TEL",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="FAX",t[""]="I",t[""]="II",t[""]="III",t[""]="IV",t[""]="V",t[""]="VI",t[""]="VII",t[""]="VIII",t[""]="IX",t[""]="X",t[""]="XI",t[""]="XII",t[""]="L",t[""]="C",t[""]="D",t[""]="M",t[""]="i",t[""]="ii",t[""]="iii",t[""]="iv",t[""]="v",t[""]="vi",t[""]="vii",t[""]="viii",t[""]="ix",t[""]="x",t[""]="xi",t[""]="xii",t[""]="l",t[""]="c",t[""]="d",t[""]="m",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="(1)",t[""]="(2)",t[""]="(3)",t[""]="(4)",t[""]="(5)",t[""]="(6)",t[""]="(7)",t[""]="(8)",t[""]="(9)",t[""]="(10)",t[""]="(11)",t[""]="(12)",t[""]="(13)",t[""]="(14)",t[""]="(15)",t[""]="(16)",t[""]="(17)",t[""]="(18)",t[""]="(19)",t[""]="(20)",t[""]="1.",t[""]="2.",t[""]="3.",t[""]="4.",t[""]="5.",t[""]="6.",t[""]="7.",t[""]="8.",t[""]="9.",t[""]="10.",t[""]="11.",t[""]="12.",t[""]="13.",t[""]="14.",t[""]="15.",t[""]="16.",t[""]="17.",t[""]="18.",t[""]="19.",t[""]="20.",t[""]="(a)",t[""]="(b)",t[""]="(c)",t[""]="(d)",t[""]="(e)",t[""]="(f)",t[""]="(g)",t[""]="(h)",t[""]="(i)",t[""]="(j)",t[""]="(k)",t[""]="(l)",t[""]="(m)",t[""]="(n)",t[""]="(o)",t[""]="(p)",t[""]="(q)",t[""]="(r)",t[""]="(s)",t[""]="(t)",t[""]="(u)",t[""]="(v)",t[""]="(w)",t[""]="(x)",t[""]="(y)",t[""]="(z)",t[""]="",t[""]="::=",t[""]="==",t[""]="===",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]=" ",t[""]=" ",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="()",t[""]="1",t[""]="2",t[""]="3",t[""]="4",t[""]="5",t[""]="6",t[""]="7",t[""]="8",t[""]="9",t[""]="10",t[""]="11",t[""]="12",t[""]="0",t[""]="1",t[""]="2",t[""]="3",t[""]="4",t[""]="5",t[""]="6",t[""]="7",t[""]="8",t[""]="9",t[""]="10",t[""]="11",t[""]="12",t[""]="13",t[""]="14",t[""]="15",t[""]="16",t[""]="17",t[""]="18",t[""]="19",t[""]="20",t[""]="21",t[""]="22",t[""]="23",t[""]="24",t[""]="1",t[""]="2",t[""]="3",t[""]="4",t[""]="5",t[""]="6",t[""]="7",t[""]="8",t[""]="9",t[""]="10",t[""]="11",t[""]="12",t[""]="13",t[""]="14",t[""]="15",t[""]="16",t[""]="17",t[""]="18",t[""]="19",t[""]="20",t[""]="21",t[""]="22",t[""]="23",t[""]="24",t[""]="25",t[""]="26",t[""]="27",t[""]="28",t[""]="29",t[""]="30",t[""]="31",t[""]="ff",t[""]="fi",t[""]="fl",t[""]="ffi",t[""]="ffl",t[""]="t",t[""]="st",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="";t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]=" ",t[""]=" ",t[""]=" ",t[""]=" ",t[""]=" ",t[""]=" ",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="_",t[""]="_",t[""]="_",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]="",t[""]=""}));r.mapSpecialUnicodeValues=function mapSpecialUnicodeValues(t){return t>=65520&&t<=65535?0:t>=62976&&t<=63743?o()[t]||t:173===t?45:t},r.reverseIfRtl=function reverseIfRtl(t){var r=t.length;if(r<=1||!function isRTLRangeFor(t){var r=l[13];return t>=r.begin&&t<r.end||t>=(r=l[11]).begin&&t<r.end}(t.charCodeAt(0)))return t;for(var a="",i=r-1;i>=0;i--)a+=t[i];return a},r.getUnicodeRangeFor=function getUnicodeRangeFor(t){for(var r=0,a=l.length;r<a;r++){var i=l[r];if(t>=i.begin&&t<i.end)return r}return-1},r.getNormalizedUnicodes=c,r.getUnicodeForGlyph=function getUnicodeForGlyph(t,r){var a=r[t];if(void 0!==a)return a;if(!t)return-1;if("u"===t[0]){var i,o=t.length;if(7===o&&"n"===t[1]&&"i"===t[2])i=t.substring(3);else{if(!(o>=5&&o<=7))return-1;i=t.substring(1)}if(i===i.toUpperCase()&&(a=parseInt(i,16))>=0)return a}return-1}},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FontRendererFactory=void 0;var i=a(5),o=a(223),l=a(226),c=a(225),u=a(205);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t})(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var a,i=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}var h=function FontRendererFactoryClosure(){function getLong(t,r){return t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3]}function getUshort(t,r){return t[r]<<8|t[r+1]}function getSubroutineBias(t){var r=t.length,a=32768;return r<1240?a=107:r<33900&&(a=1131),a}function parseCmap(t,r,a){var o,l,c,u=1===getUshort(t,r+2)?getLong(t,r+8):getLong(t,r+16),h=getUshort(t,r+u);if(4===h){getUshort(t,r+u+2);var d=getUshort(t,r+u+6)>>1;for(l=r+u+14,o=[],c=0;c<d;c++,l+=2)o[c]={end:getUshort(t,l)};for(l+=2,c=0;c<d;c++,l+=2)o[c].start=getUshort(t,l);for(c=0;c<d;c++,l+=2)o[c].idDelta=getUshort(t,l);for(c=0;c<d;c++,l+=2){var p=getUshort(t,l);if(0!==p){o[c].ids=[];for(var m=0,g=o[c].end-o[c].start+1;m<g;m++)o[c].ids[m]=getUshort(t,l+p),p+=2}}return o}if(12===h){getLong(t,r+u+4);var b=getLong(t,r+u+12);for(l=r+u+16,o=[],c=0;c<b;c++)o.push({start:getLong(t,l),end:getLong(t,l+4),idDelta:getLong(t,l+8)-getLong(t,l)}),l+=12;return o}throw new i.FormatError("unsupported cmap: ".concat(h))}function parseCff(t,r,a,i){var l=new o.CFFParser(new u.Stream(t,r,a-r),{},i).parse();return{glyphs:l.charStrings.objects,subrs:l.topDict.privateDict&&l.topDict.privateDict.subrsIndex&&l.topDict.privateDict.subrsIndex.objects,gsubrs:l.globalSubrIndex&&l.globalSubrIndex.objects,isCFFCIDFont:l.isCIDFont,fdSelect:l.fdSelect,fdArray:l.fdArray}}function lookupCmap(t,r){for(var a=r.codePointAt(0),i=0,o=0,l=t.length-1;o<l;){var c=o+l+1>>1;a<t[c].start?l=c-1:o=c}return t[o].start<=a&&a<=t[o].end&&(i=t[o].idDelta+(t[o].ids?t[o].ids[a-t[o].start]:a)&65535),{charCode:a,glyphId:i}}function compileGlyf(t,r,a){function moveTo(t,a){r.push({cmd:"moveTo",args:[t,a]})}function lineTo(t,a){r.push({cmd:"lineTo",args:[t,a]})}function quadraticCurveTo(t,a,i,o){r.push({cmd:"quadraticCurveTo",args:[t,a,i,o]})}var i,o=0,l=(t[o]<<24|t[o+1]<<16)>>16,c=0,u=0;if(o+=10,l<0)do{i=t[o]<<8|t[o+1];var h,d,p=t[o+2]<<8|t[o+3];o+=4,1&i?(h=(t[o]<<24|t[o+1]<<16)>>16,d=(t[o+2]<<24|t[o+3]<<16)>>16,o+=4):(h=t[o++],d=t[o++]),2&i?(c=h,u=d):(c=0,u=0);var m=1,g=1,b=0,y=0;8&i?(m=g=(t[o]<<24|t[o+1]<<16)/1073741824,o+=2):64&i?(m=(t[o]<<24|t[o+1]<<16)/1073741824,g=(t[o+2]<<24|t[o+3]<<16)/1073741824,o+=4):128&i&&(m=(t[o]<<24|t[o+1]<<16)/1073741824,b=(t[o+2]<<24|t[o+3]<<16)/1073741824,y=(t[o+4]<<24|t[o+5]<<16)/1073741824,g=(t[o+6]<<24|t[o+7]<<16)/1073741824,o+=8);var v=a.glyphs[p];v&&(r.push({cmd:"save"}),r.push({cmd:"transform",args:[m,b,y,g,c,u]}),compileGlyf(v,r,a),r.push({cmd:"restore"}))}while(32&i);else{var S,k,w=[];for(S=0;S<l;S++)w.push(t[o]<<8|t[o+1]),o+=2;o+=2+(t[o]<<8|t[o+1]);for(var C=w[w.length-1]+1,x=[];x.length<C;){var _=1;for(8&(i=t[o++])&&(_+=t[o++]);_-- >0;)x.push({flags:i})}for(S=0;S<C;S++){switch(18&x[S].flags){case 0:c+=(t[o]<<24|t[o+1]<<16)>>16,o+=2;break;case 2:c-=t[o++];break;case 18:c+=t[o++]}x[S].x=c}for(S=0;S<C;S++){switch(36&x[S].flags){case 0:u+=(t[o]<<24|t[o+1]<<16)>>16,o+=2;break;case 4:u-=t[o++];break;case 36:u+=t[o++]}x[S].y=u}var A=0;for(o=0;o<l;o++){var R=w[o],T=x.slice(A,R+1);if(1&T[0].flags)T.push(T[0]);else if(1&T[T.length-1].flags)T.unshift(T[T.length-1]);else{var I={flags:1,x:(T[0].x+T[T.length-1].x)/2,y:(T[0].y+T[T.length-1].y)/2};T.unshift(I),T.push(I)}for(moveTo(T[0].x,T[0].y),S=1,k=T.length;S<k;S++)1&T[S].flags?lineTo(T[S].x,T[S].y):1&T[S+1].flags?(quadraticCurveTo(T[S].x,T[S].y,T[S+1].x,T[S+1].y),S++):quadraticCurveTo(T[S].x,T[S].y,(T[S].x+T[S+1].x)/2,(T[S].y+T[S+1].y)/2);A=R+1}}}function compileCharString(t,r,a,o){function moveTo(t,a){r.push({cmd:"moveTo",args:[t,a]})}function lineTo(t,a){r.push({cmd:"lineTo",args:[t,a]})}function bezierCurveTo(t,a,i,o,l,c){r.push({cmd:"bezierCurveTo",args:[t,a,i,o,l,c]})}var l=[],u=0,h=0,d=0;!function parse(t){for(var p=0;p<t.length;){var m,g,b,y,v,S,k,w,C=!1,x=t[p++];switch(x){case 1:case 3:d+=l.length>>1,C=!0;break;case 4:h+=l.pop(),moveTo(u,h),C=!0;break;case 5:for(;l.length>0;)u+=l.shift(),h+=l.shift(),lineTo(u,h);break;case 6:for(;l.length>0&&(lineTo(u+=l.shift(),h),0!==l.length);)h+=l.shift(),lineTo(u,h);break;case 7:for(;l.length>0&&(h+=l.shift(),lineTo(u,h),0!==l.length);)lineTo(u+=l.shift(),h);break;case 8:for(;l.length>0;)m=u+l.shift(),b=h+l.shift(),g=m+l.shift(),y=b+l.shift(),u=g+l.shift(),h=y+l.shift(),bezierCurveTo(m,b,g,y,u,h);break;case 10:if(k=l.pop(),w=null,a.isCFFCIDFont){var _=a.fdSelect.getFDIndex(o);if(_>=0&&_<a.fdArray.length){var A=a.fdArray[_],R=void 0;A.privateDict&&A.privateDict.subrsIndex&&(R=A.privateDict.subrsIndex.objects),R&&(w=R[k+=getSubroutineBias(R)])}else(0,i.warn)("Invalid fd index for glyph index.")}else w=a.subrs[k+a.subrsBias];w&&parse(w);break;case 11:return;case 12:switch(x=t[p++]){case 34:g=(m=u+l.shift())+l.shift(),v=h+l.shift(),u=g+l.shift(),bezierCurveTo(m,h,g,v,u,v),g=(m=u+l.shift())+l.shift(),u=g+l.shift(),bezierCurveTo(m,v,g,h,u,h);break;case 35:m=u+l.shift(),b=h+l.shift(),g=m+l.shift(),y=b+l.shift(),u=g+l.shift(),h=y+l.shift(),bezierCurveTo(m,b,g,y,u,h),m=u+l.shift(),b=h+l.shift(),g=m+l.shift(),y=b+l.shift(),u=g+l.shift(),h=y+l.shift(),bezierCurveTo(m,b,g,y,u,h),l.pop();break;case 36:bezierCurveTo(m=u+l.shift(),v=h+l.shift(),g=m+l.shift(),S=v+l.shift(),u=g+l.shift(),S),bezierCurveTo(m=u+l.shift(),S,g=m+l.shift(),S+l.shift(),u=g+l.shift(),h);break;case 37:var T=u,I=h;m=u+l.shift(),b=h+l.shift(),g=m+l.shift(),y=b+l.shift(),u=g+l.shift(),h=y+l.shift(),bezierCurveTo(m,b,g,y,u,h),m=u+l.shift(),b=h+l.shift(),g=m+l.shift(),y=b+l.shift(),u=g,h=y,Math.abs(u-T)>Math.abs(h-I)?u+=l.shift():h+=l.shift(),bezierCurveTo(m,b,g,y,u,h);break;default:throw new i.FormatError("unknown operator: 12 ".concat(x))}break;case 14:if(l.length>=4){var P=l.pop(),O=l.pop();h=l.pop(),u=l.pop(),r.push({cmd:"save"}),r.push({cmd:"translate",args:[u,h]});var E=lookupCmap(a.cmap,String.fromCharCode(a.glyphNameMap[c.StandardEncoding[P]]));compileCharString(a.glyphs[E.glyphId],r,a,E.glyphId),r.push({cmd:"restore"}),E=lookupCmap(a.cmap,String.fromCharCode(a.glyphNameMap[c.StandardEncoding[O]])),compileCharString(a.glyphs[E.glyphId],r,a,E.glyphId)}return;case 18:d+=l.length>>1,C=!0;break;case 19:case 20:p+=(d+=l.length>>1)+7>>3,C=!0;break;case 21:h+=l.pop(),moveTo(u+=l.pop(),h),C=!0;break;case 22:moveTo(u+=l.pop(),h),C=!0;break;case 23:d+=l.length>>1,C=!0;break;case 24:for(;l.length>2;)m=u+l.shift(),b=h+l.shift(),g=m+l.shift(),y=b+l.shift(),u=g+l.shift(),h=y+l.shift(),bezierCurveTo(m,b,g,y,u,h);u+=l.shift(),h+=l.shift(),lineTo(u,h);break;case 25:for(;l.length>6;)u+=l.shift(),h+=l.shift(),lineTo(u,h);m=u+l.shift(),b=h+l.shift(),g=m+l.shift(),y=b+l.shift(),u=g+l.shift(),h=y+l.shift(),bezierCurveTo(m,b,g,y,u,h);break;case 26:for(l.length%2&&(u+=l.shift());l.length>0;)m=u,b=h+l.shift(),g=m+l.shift(),y=b+l.shift(),u=g,h=y+l.shift(),bezierCurveTo(m,b,g,y,u,h);break;case 27:for(l.length%2&&(h+=l.shift());l.length>0;)bezierCurveTo(m=u+l.shift(),b=h,g=m+l.shift(),y=b+l.shift(),u=g+l.shift(),h=y);break;case 28:l.push((t[p]<<24|t[p+1]<<16)>>16),p+=2;break;case 29:k=l.pop()+a.gsubrsBias,(w=a.gsubrs[k])&&parse(w);break;case 30:for(;l.length>0&&(m=u,b=h+l.shift(),g=m+l.shift(),y=b+l.shift(),u=g+l.shift(),h=y+(1===l.length?l.shift():0),bezierCurveTo(m,b,g,y,u,h),0!==l.length);)m=u+l.shift(),b=h,g=m+l.shift(),y=b+l.shift(),h=y+l.shift(),bezierCurveTo(m,b,g,y,u=g+(1===l.length?l.shift():0),h);break;case 31:for(;l.length>0&&(m=u+l.shift(),b=h,g=m+l.shift(),y=b+l.shift(),h=y+l.shift(),bezierCurveTo(m,b,g,y,u=g+(1===l.length?l.shift():0),h),0!==l.length);)m=u,b=h+l.shift(),g=m+l.shift(),y=b+l.shift(),u=g+l.shift(),h=y+(1===l.length?l.shift():0),bezierCurveTo(m,b,g,y,u,h);break;default:if(x<32)throw new i.FormatError("unknown operator: ".concat(x));x<247?l.push(x-139):x<251?l.push(256*(x-247)+t[p++]+108):x<255?l.push(256*-(x-251)-t[p++]-108):(l.push((t[p]<<24|t[p+1]<<16|t[p+2]<<8|t[p+3])/65536),p+=4)}C&&(l.length=0)}}(t)}var t=[],r=function(){function CompiledFont(t){_classCallCheck(this,CompiledFont),this.constructor===CompiledFont&&(0,i.unreachable)("Cannot initialize CompiledFont."),this.fontMatrix=t,this.compiledGlyphs=Object.create(null),this.compiledCharCodeToGlyphId=Object.create(null)}return _createClass(CompiledFont,[{key:"getPathJs",value:function getPathJs(t){var r=lookupCmap(this.cmap,t),a=this.compiledGlyphs[r.glyphId];return a||(a=this.compileGlyph(this.glyphs[r.glyphId],r.glyphId),this.compiledGlyphs[r.glyphId]=a),void 0===this.compiledCharCodeToGlyphId[r.charCode]&&(this.compiledCharCodeToGlyphId[r.charCode]=r.glyphId),a}},{key:"compileGlyph",value:function compileGlyph(r,a){if(!r||0===r.length||14===r[0])return t;var o=this.fontMatrix;if(this.isCFFCIDFont){var l=this.fdSelect.getFDIndex(a);if(l>=0&&l<this.fdArray.length)o=this.fdArray[l].getByName("FontMatrix")||i.FONT_IDENTITY_MATRIX;else(0,i.warn)("Invalid fd index for glyph index.")}var c=[];return c.push({cmd:"save"}),c.push({cmd:"transform",args:o.slice()}),c.push({cmd:"scale",args:["size","-size"]}),this.compileGlyphImpl(r,c,a),c.push({cmd:"restore"}),c}},{key:"compileGlyphImpl",value:function compileGlyphImpl(){(0,i.unreachable)("Children classes should implement this.")}},{key:"hasBuiltPath",value:function hasBuiltPath(t){var r=lookupCmap(this.cmap,t);return void 0!==this.compiledGlyphs[r.glyphId]&&void 0!==this.compiledCharCodeToGlyphId[r.charCode]}}]),CompiledFont}(),a=function(t){_inherits(TrueTypeCompiled,t);var r=_createSuper(TrueTypeCompiled);function TrueTypeCompiled(t,a,i){var o;return _classCallCheck(this,TrueTypeCompiled),(o=r.call(this,i||[488e-6,0,0,488e-6,0,0])).glyphs=t,o.cmap=a,o}return _createClass(TrueTypeCompiled,[{key:"compileGlyphImpl",value:function compileGlyphImpl(t,r){compileGlyf(t,r,this)}}]),TrueTypeCompiled}(r),h=function(t){_inherits(Type2Compiled,t);var r=_createSuper(Type2Compiled);function Type2Compiled(t,a,i,o){var c;return _classCallCheck(this,Type2Compiled),(c=r.call(this,i||[.001,0,0,.001,0,0])).glyphs=t.glyphs,c.gsubrs=t.gsubrs||[],c.subrs=t.subrs||[],c.cmap=a,c.glyphNameMap=o||(0,l.getGlyphsUnicode)(),c.gsubrsBias=getSubroutineBias(c.gsubrs),c.subrsBias=getSubroutineBias(c.subrs),c.isCFFCIDFont=t.isCFFCIDFont,c.fdSelect=t.fdSelect,c.fdArray=t.fdArray,c}return _createClass(Type2Compiled,[{key:"compileGlyphImpl",value:function compileGlyphImpl(t,r,a){compileCharString(t,r,this,a)}}]),Type2Compiled}(r);return{create:function FontRendererFactory_create(t,r){for(var o,l,c,u,d,p,m=new Uint8Array(t.data),g=getUshort(m,4),b=0,y=12;b<g;b++,y+=16){var v=(0,i.bytesToString)(m.subarray(y,y+4)),S=getLong(m,y+8),k=getLong(m,y+12);switch(v){case"cmap":o=parseCmap(m,S);break;case"glyf":l=m.subarray(S,S+k);break;case"loca":c=m.subarray(S,S+k);break;case"head":p=getUshort(m,S+18),d=getUshort(m,S+50);break;case"CFF ":u=parseCff(m,S,S+k,r)}}if(l){var w=p?[1/p,0,0,1/p,0,0]:t.fontMatrix;return new a(function parseGlyfTable(t,r,a){var i,o;a?(i=4,o=function fontItemDecodeLong(t,r){return t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3]}):(i=2,o=function fontItemDecode(t,r){return t[r]<<9|t[r+1]<<1});for(var l=[],c=o(r,0),u=i;u<r.length;u+=i){var h=o(r,u);l.push(t.subarray(c,h)),c=h}return l}(l,c,d),o,w)}return new h(u,o,t.fontMatrix,t.glyphNameMap)}}}();r.FontRendererFactory=h},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Type1Parser=void 0;var i=a(225),o=a(201),l=a(205),c=a(5),u=function Type1CharStringClosure(){var t=[4],r=[5],a=[6],i=[7],o=[8],l=[12,35],u=[14],h=[21],d=[22],p=[30],m=[31];function Type1CharString(){this.width=0,this.lsb=0,this.flexing=!1,this.output=[],this.stack=[]}return Type1CharString.prototype={convert:function Type1CharString_convert(g,b,y){for(var v,S,k,w=g.length,C=!1,x=0;x<w;x++){var _=g[x];if(_<32){switch(12===_&&(_=(_<<8)+g[++x]),_){case 1:case 3:this.stack=[];break;case 4:if(this.flexing){if(this.stack.length<1){C=!0;break}var A=this.stack.pop();this.stack.push(0,A);break}C=this.executeCommand(1,t);break;case 5:C=this.executeCommand(2,r);break;case 6:C=this.executeCommand(1,a);break;case 7:C=this.executeCommand(1,i);break;case 8:C=this.executeCommand(6,o);break;case 9:this.stack=[];break;case 10:if(this.stack.length<1){C=!0;break}if(!b[k=this.stack.pop()]){C=!0;break}C=this.convert(b[k],b,y);break;case 11:return C;case 13:if(this.stack.length<2){C=!0;break}v=this.stack.pop(),S=this.stack.pop(),this.lsb=S,this.width=v,this.stack.push(v,S),C=this.executeCommand(2,d);break;case 14:this.output.push(u[0]);break;case 21:if(this.flexing)break;C=this.executeCommand(2,h);break;case 22:if(this.flexing){this.stack.push(0);break}C=this.executeCommand(1,d);break;case 30:C=this.executeCommand(4,p);break;case 31:C=this.executeCommand(4,m);break;case 3072:case 3073:case 3074:this.stack=[];break;case 3078:y?(this.seac=this.stack.splice(-4,4),C=this.executeCommand(0,u)):C=this.executeCommand(4,u);break;case 3079:if(this.stack.length<4){C=!0;break}this.stack.pop(),v=this.stack.pop();var R=this.stack.pop();S=this.stack.pop(),this.lsb=S,this.width=v,this.stack.push(v,S,R),C=this.executeCommand(3,h);break;case 3084:if(this.stack.length<2){C=!0;break}var T=this.stack.pop(),I=this.stack.pop();this.stack.push(I/T);break;case 3088:if(this.stack.length<2){C=!0;break}k=this.stack.pop();var P=this.stack.pop();if(0===k&&3===P){var O=this.stack.splice(this.stack.length-17,17);this.stack.push(O[2]+O[0],O[3]+O[1],O[4],O[5],O[6],O[7],O[8],O[9],O[10],O[11],O[12],O[13],O[14]),C=this.executeCommand(13,l,!0),this.flexing=!1,this.stack.push(O[15],O[16])}else 1===k&&0===P&&(this.flexing=!0);break;case 3089:break;case 3105:this.stack=[];break;default:(0,c.warn)('Unknown type 1 charstring command of "'+_+'"')}if(C)break}else _<=246?_-=139:_=_<=250?256*(_-247)+g[++x]+108:_<=254?-256*(_-251)-g[++x]-108:(255&g[++x])<<24|(255&g[++x])<<16|(255&g[++x])<<8|(255&g[++x])<<0,this.stack.push(_)}return C},executeCommand:function executeCommand(t,r,a){var i=this.stack.length;if(t>i)return!0;for(var o=i-t,l=o;l<i;l++){var c=this.stack[l];Number.isInteger(c)?this.output.push(28,c>>8&255,255&c):(c=65536*c|0,this.output.push(255,c>>24&255,c>>16&255,c>>8&255,255&c))}return this.output.push.apply(this.output,r),a?this.stack.splice(o,t):this.stack.length=0,!1}},Type1CharString}(),h=function Type1ParserClosure(){function isHexDigit(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function decrypt(t,r,a){if(a>=t.length)return new Uint8Array(0);var i,o,l=0|r;for(i=0;i<a;i++)l=52845*(t[i]+l)+22719&65535;var c=t.length-a,u=new Uint8Array(c);for(i=a,o=0;o<c;i++,o++){var h=t[i];u[o]=h^l>>8,l=52845*(h+l)+22719&65535}return u}function isSpecial(t){return 47===t||91===t||93===t||123===t||125===t||40===t||41===t}function Type1Parser(t,r,a){if(r){var i=t.getBytes(),c=!((isHexDigit(i[0])||(0,o.isWhiteSpace)(i[0]))&&isHexDigit(i[1])&&isHexDigit(i[2])&&isHexDigit(i[3])&&isHexDigit(i[4])&&isHexDigit(i[5])&&isHexDigit(i[6])&&isHexDigit(i[7]));t=new l.Stream(c?decrypt(i,55665,4):function decryptAscii(t,r,a){var i,o,l=0|r,c=t.length,u=new Uint8Array(c>>>1);for(i=0,o=0;i<c;i++){var h=t[i];if(isHexDigit(h)){var d;for(i++;i<c&&!isHexDigit(d=t[i]);)i++;if(i<c){var p=parseInt(String.fromCharCode(h,d),16);u[o++]=p^l>>8,l=52845*(p+l)+22719&65535}}}return u.slice(a,o)}(i,55665,4))}this.seacAnalysisEnabled=!!a,this.stream=t,this.nextChar()}return Type1Parser.prototype={readNumberArray:function Type1Parser_readNumberArray(){this.getToken();for(var t=[];;){var r=this.getToken();if(null===r||"]"===r||"}"===r)break;t.push(parseFloat(r||0))}return t},readNumber:function Type1Parser_readNumber(){var t=this.getToken();return parseFloat(t||0)},readInt:function Type1Parser_readInt(){var t=this.getToken();return 0|parseInt(t||0,10)},readBoolean:function Type1Parser_readBoolean(){return"true"===this.getToken()?1:0},nextChar:function Type1_nextChar(){return this.currentChar=this.stream.getByte()},getToken:function Type1Parser_getToken(){for(var t=!1,r=this.currentChar;;){if(-1===r)return null;if(t)10!==r&&13!==r||(t=!1);else if(37===r)t=!0;else if(!(0,o.isWhiteSpace)(r))break;r=this.nextChar()}if(isSpecial(r))return this.nextChar(),String.fromCharCode(r);var a="";do{a+=String.fromCharCode(r),r=this.nextChar()}while(r>=0&&!(0,o.isWhiteSpace)(r)&&!isSpecial(r));return a},readCharStrings:function Type1Parser_readCharStrings(t,r){return-1===r?t:decrypt(t,4330,r)},extractFontProgram:function Type1Parser_extractFontProgram(t){var r=this.stream,a=[],i=[],o=Object.create(null);o.lenIV=4;for(var l,c,h,d,p,m={subrs:[],charstrings:[],properties:{privateData:o}};null!==(l=this.getToken());)if("/"===l)switch(l=this.getToken()){case"CharStrings":for(this.getToken(),this.getToken(),this.getToken(),this.getToken();null!==(l=this.getToken())&&"end"!==l;)if("/"===l){var g=this.getToken();c=this.readInt(),this.getToken(),h=c>0?r.getBytes(c):new Uint8Array(0),d=m.properties.privateData.lenIV,p=this.readCharStrings(h,d),this.nextChar(),"noaccess"===(l=this.getToken())&&this.getToken(),i.push({glyph:g,encoded:p})}break;case"Subrs":for(this.readInt(),this.getToken();"dup"===this.getToken();){var b=this.readInt();c=this.readInt(),this.getToken(),h=c>0?r.getBytes(c):new Uint8Array(0),d=m.properties.privateData.lenIV,p=this.readCharStrings(h,d),this.nextChar(),"noaccess"===(l=this.getToken())&&this.getToken(),a[b]=p}break;case"BlueValues":case"OtherBlues":case"FamilyBlues":case"FamilyOtherBlues":var y=this.readNumberArray();y.length>0&&y.length,0;break;case"StemSnapH":case"StemSnapV":m.properties.privateData[l]=this.readNumberArray();break;case"StdHW":case"StdVW":m.properties.privateData[l]=this.readNumberArray()[0];break;case"BlueShift":case"lenIV":case"BlueFuzz":case"BlueScale":case"LanguageGroup":case"ExpansionFactor":m.properties.privateData[l]=this.readNumber();break;case"ForceBold":m.properties.privateData[l]=this.readBoolean()}for(var v=0;v<i.length;v++){g=i[v].glyph,p=i[v].encoded;var S=new u,k=S.convert(p,a,this.seacAnalysisEnabled),w=S.output;k&&(w=[14]);var C={glyphName:g,charstring:w,width:S.width,lsb:S.lsb,seac:S.seac};if(".notdef"===g?m.charstrings.unshift(C):m.charstrings.push(C),t.builtInEncoding){var x=t.builtInEncoding.indexOf(g);x>-1&&void 0===t.widths[x]&&x>=t.firstChar&&x<=t.lastChar&&(t.widths[x]=S.width)}}return m},extractFontHeader:function Type1Parser_extractFontHeader(t){for(var r;null!==(r=this.getToken());)if("/"===r)switch(r=this.getToken()){case"FontMatrix":var a=this.readNumberArray();t.fontMatrix=a;break;case"Encoding":var o,l=this.getToken();if(/^\d+$/.test(l)){o=[];var c=0|parseInt(l,10);this.getToken();for(var u=0;u<c;u++){for(r=this.getToken();"dup"!==r&&"def"!==r;)if(null===(r=this.getToken()))return;if("def"===r)break;var h=this.readInt();this.getToken();var d=this.getToken();o[h]=d,this.getToken()}}else o=(0,i.getEncoding)(l);t.builtInEncoding=o;break;case"FontBBox":var p=this.readNumberArray();t.ascent=Math.max(p[3],p[1]),t.descent=Math.min(p[1],p[3]),t.ascentScaled=!0}}},Type1Parser}();r.Type1Parser=h},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getTilingPatternIR=function getTilingPatternIR(t,r,a){var o=r.getArray("Matrix"),l=i.Util.normalizeRect(r.getArray("BBox")),c=r.get("XStep"),u=r.get("YStep"),h=r.get("PaintType"),d=r.get("TilingType");if(l[2]-l[0]==0||l[3]-l[1]==0)throw new i.FormatError("Invalid getTilingPatternIR /BBox array: [".concat(l,"]."));return["TilingPattern",a,t,o,l,c,u,h,d]},r.Pattern=void 0;var i=a(5),o=a(216),l=a(198),c=a(201),u=2,h=3,d=4,p=5,m=6,g=7,b=function PatternClosure(){function Pattern(){(0,i.unreachable)("should not call Pattern constructor")}return Pattern.prototype={getPattern:function Pattern_getPattern(t){(0,i.unreachable)("Should not call Pattern.getStyle: ".concat(t))}},Pattern.parseShading=function(t,r,a,o,b,v){var S=(0,l.isStream)(t)?t.dict:t,k=S.get("ShadingType");try{switch(k){case u:case h:return new y.RadialAxial(S,r,a,o,v);case d:case p:case m:case g:return new y.Mesh(t,r,a,o,v);default:throw new i.FormatError("Unsupported ShadingType: "+k)}}catch(t){if(t instanceof c.MissingDataException)throw t;return b.send("UnsupportedFeature",{featureId:i.UNSUPPORTED_FEATURES.shadingPattern}),(0,i.warn)(t),new y.Dummy}},Pattern}();r.Pattern=b;var y={};y.SMALL_NUMBER=1e-6,y.RadialAxial=function RadialAxialClosure(){function RadialAxial(t,r,a,l,c){this.matrix=r,this.coordsArr=t.getArray("Coords"),this.shadingType=t.get("ShadingType"),this.type="Pattern";var u=t.get("ColorSpace","CS");u=o.ColorSpace.parse(u,a,l,c),this.cs=u;var d=t.getArray("BBox");Array.isArray(d)&&4===d.length?this.bbox=i.Util.normalizeRect(d):this.bbox=null;var p=0,m=1;if(t.has("Domain")){var g=t.getArray("Domain");p=g[0],m=g[1]}var b=!1,v=!1;if(t.has("Extend")){var S=t.getArray("Extend");b=S[0],v=S[1]}if(!(this.shadingType!==h||b&&v)){var k=this.coordsArr[0],w=this.coordsArr[1],C=this.coordsArr[2],x=this.coordsArr[3],_=this.coordsArr[4],A=this.coordsArr[5],R=Math.sqrt((k-x)*(k-x)+(w-_)*(w-_));C<=A+R&&A<=C+R&&(0,i.warn)("Unsupported radial gradient.")}this.extendStart=b,this.extendEnd=v;var T=t.get("Function"),I=c.createFromArray(T),P=(m-p)/10,O=this.colorStops=[];if(p>=m||P<=0)(0,i.info)("Bad shading domain.");else{for(var E,B=new Float32Array(u.numComps),D=new Float32Array(1),M=0;M<=10;M++){D[0]=p+M*P,I(D,0,B,0),E=u.getRgb(B,0);var L=i.Util.makeCssRgb(E[0],E[1],E[2]);O.push([M/10,L])}var N="transparent";t.has("Background")&&(E=u.getRgb(t.get("Background"),0),N=i.Util.makeCssRgb(E[0],E[1],E[2])),b||(O.unshift([0,N]),O[1][0]+=y.SMALL_NUMBER),v||(O[O.length-1][0]-=y.SMALL_NUMBER,O.push([1,N])),this.colorStops=O}}return RadialAxial.prototype={getIR:function RadialAxial_getIR(){var t,r,a,o,l,c=this.coordsArr,d=this.shadingType;d===u?(r=[c[0],c[1]],a=[c[2],c[3]],o=null,l=null,t="axial"):d===h?(r=[c[0],c[1]],a=[c[3],c[4]],o=c[2],l=c[5],t="radial"):(0,i.unreachable)("getPattern type unknown: ".concat(d));var p=this.matrix;if(p&&(r=i.Util.applyTransform(r,p),a=i.Util.applyTransform(a,p),d===h)){var m=i.Util.singularValueDecompose2dScale(p);o*=m[0],l*=m[1]}return["RadialAxial",t,this.bbox,this.colorStops,r,a,o,l]}},RadialAxial}(),y.Mesh=function MeshClosure(){function MeshStreamReader(t,r){this.stream=t,this.context=r,this.buffer=0,this.bufferLength=0;var a=r.numComps;this.tmpCompsBuf=new Float32Array(a);var i=r.colorSpace.numComps;this.tmpCsCompsBuf=r.colorFn?new Float32Array(i):this.tmpCompsBuf}MeshStreamReader.prototype={get hasData(){if(this.stream.end)return this.stream.pos<this.stream.end;if(this.bufferLength>0)return!0;var t=this.stream.getByte();return!(t<0)&&(this.buffer=t,this.bufferLength=8,!0)},readBits:function MeshStreamReader_readBits(t){var r=this.buffer,a=this.bufferLength;if(32===t){if(0===a)return(this.stream.getByte()<<24|this.stream.getByte()<<16|this.stream.getByte()<<8|this.stream.getByte())>>>0;r=r<<24|this.stream.getByte()<<16|this.stream.getByte()<<8|this.stream.getByte();var i=this.stream.getByte();return this.buffer=i&(1<<a)-1,(r<<8-a|(255&i)>>a)>>>0}if(8===t&&0===a)return this.stream.getByte();for(;a<t;)r=r<<8|this.stream.getByte(),a+=8;return a-=t,this.bufferLength=a,this.buffer=r&(1<<a)-1,r>>a},align:function MeshStreamReader_align(){this.buffer=0,this.bufferLength=0},readFlag:function MeshStreamReader_readFlag(){return this.readBits(this.context.bitsPerFlag)},readCoordinate:function MeshStreamReader_readCoordinate(){var t=this.context.bitsPerCoordinate,r=this.readBits(t),a=this.readBits(t),i=this.context.decode,o=t<32?1/((1<<t)-1):2.3283064365386963e-10;return[r*o*(i[1]-i[0])+i[0],a*o*(i[3]-i[2])+i[2]]},readComponents:function MeshStreamReader_readComponents(){for(var t=this.context.numComps,r=this.context.bitsPerComponent,a=r<32?1/((1<<r)-1):2.3283064365386963e-10,i=this.context.decode,o=this.tmpCompsBuf,l=0,c=4;l<t;l++,c+=2){var u=this.readBits(r);o[l]=u*a*(i[c+1]-i[c])+i[c]}var h=this.tmpCsCompsBuf;return this.context.colorFn&&this.context.colorFn(o,0,h,0),this.context.colorSpace.getRgb(h,0)}};var t=function getBClosure(){var t=[];return function getB(r){return t[r]||(t[r]=function buildB(t){for(var r=[],a=0;a<=t;a++){var i=a/t,o=1-i;r.push(new Float32Array([o*o*o,3*i*o*o,3*i*i*o,i*i*i]))}return r}(r)),t[r]}}();function buildFigureFromPatch(r,a){var o=r.figures[a];(0,i.assert)("patch"===o.type,"Unexpected patch mesh figure");var l=r.coords,c=r.colors,u=o.coords,h=o.colors,d=Math.min(l[u[0]][0],l[u[3]][0],l[u[12]][0],l[u[15]][0]),p=Math.min(l[u[0]][1],l[u[3]][1],l[u[12]][1],l[u[15]][1]),m=Math.max(l[u[0]][0],l[u[3]][0],l[u[12]][0],l[u[15]][0]),g=Math.max(l[u[0]][1],l[u[3]][1],l[u[12]][1],l[u[15]][1]),b=Math.ceil(20*(m-d)/(r.bounds[2]-r.bounds[0]));b=Math.max(3,Math.min(20,b));var y=Math.ceil(20*(g-p)/(r.bounds[3]-r.bounds[1]));y=Math.max(3,Math.min(20,y));for(var v=b+1,S=new Int32Array((y+1)*v),k=new Int32Array((y+1)*v),w=0,C=new Uint8Array(3),x=new Uint8Array(3),_=c[h[0]],A=c[h[1]],R=c[h[2]],T=c[h[3]],I=t(y),P=t(b),O=0;O<=y;O++){C[0]=(_[0]*(y-O)+R[0]*O)/y|0,C[1]=(_[1]*(y-O)+R[1]*O)/y|0,C[2]=(_[2]*(y-O)+R[2]*O)/y|0,x[0]=(A[0]*(y-O)+T[0]*O)/y|0,x[1]=(A[1]*(y-O)+T[1]*O)/y|0,x[2]=(A[2]*(y-O)+T[2]*O)/y|0;for(var E=0;E<=b;E++,w++)if(0!==O&&O!==y||0!==E&&E!==b){for(var B=0,D=0,M=0,L=0;L<=3;L++)for(var N=0;N<=3;N++,M++){var U=I[O][L]*P[E][N];B+=l[u[M]][0]*U,D+=l[u[M]][1]*U}S[w]=l.length,l.push([B,D]),k[w]=c.length;var j=new Uint8Array(3);j[0]=(C[0]*(b-E)+x[0]*E)/b|0,j[1]=(C[1]*(b-E)+x[1]*E)/b|0,j[2]=(C[2]*(b-E)+x[2]*E)/b|0,c.push(j)}}S[0]=u[0],k[0]=h[0],S[b]=u[3],k[b]=h[1],S[v*y]=u[12],k[v*y]=h[2],S[v*y+b]=u[15],k[v*y+b]=h[3],r.figures[a]={type:"lattice",coords:S,colors:k,verticesPerRow:v}}function updateBounds(t){for(var r=t.coords[0][0],a=t.coords[0][1],i=r,o=a,l=1,c=t.coords.length;l<c;l++){var u=t.coords[l][0],h=t.coords[l][1];r=r>u?u:r,a=a>h?h:a,i=i<u?u:i,o=o<h?h:o}t.bounds=[r,a,i,o]}function Mesh(t,r,a,c,u){if(!(0,l.isStream)(t))throw new i.FormatError("Mesh data is not a stream");var h=t.dict;this.matrix=r,this.shadingType=h.get("ShadingType"),this.type="Pattern";var b=h.getArray("BBox");Array.isArray(b)&&4===b.length?this.bbox=i.Util.normalizeRect(b):this.bbox=null;var y=h.get("ColorSpace","CS");y=o.ColorSpace.parse(y,a,c,u),this.cs=y,this.background=h.has("Background")?y.getRgb(h.get("Background"),0):null;var v=h.get("Function"),S=v?u.createFromArray(v):null;this.coords=[],this.colors=[],this.figures=[];var k=new MeshStreamReader(t,{bitsPerCoordinate:h.get("BitsPerCoordinate"),bitsPerComponent:h.get("BitsPerComponent"),bitsPerFlag:h.get("BitsPerFlag"),decode:h.getArray("Decode"),colorFn:S,colorSpace:y,numComps:S?1:y.numComps}),w=!1;switch(this.shadingType){case d:!function decodeType4Shading(t,r){for(var a=t.coords,o=t.colors,l=[],c=[],u=0;r.hasData;){var h=r.readFlag(),d=r.readCoordinate(),p=r.readComponents();if(0===u){if(!(0<=h&&h<=2))throw new i.FormatError("Unknown type4 flag");switch(h){case 0:u=3;break;case 1:c.push(c[c.length-2],c[c.length-1]),u=1;break;case 2:c.push(c[c.length-3],c[c.length-1]),u=1}l.push(h)}c.push(a.length),a.push(d),o.push(p),u--,r.align()}t.figures.push({type:"triangles",coords:new Int32Array(c),colors:new Int32Array(c)})}(this,k);break;case p:var C=0|h.get("VerticesPerRow");if(C<2)throw new i.FormatError("Invalid VerticesPerRow");!function decodeType5Shading(t,r,a){for(var i=t.coords,o=t.colors,l=[];r.hasData;){var c=r.readCoordinate(),u=r.readComponents();l.push(i.length),i.push(c),o.push(u)}t.figures.push({type:"lattice",coords:new Int32Array(l),colors:new Int32Array(l),verticesPerRow:a})}(this,k,C);break;case m:!function decodeType6Shading(t,r){for(var a=t.coords,o=t.colors,l=new Int32Array(16),c=new Int32Array(4);r.hasData;){var u,h,d=r.readFlag();if(!(0<=d&&d<=3))throw new i.FormatError("Unknown type6 flag");var p=a.length;for(u=0,h=0!==d?8:12;u<h;u++)a.push(r.readCoordinate());var m,g,b,y,v=o.length;for(u=0,h=0!==d?2:4;u<h;u++)o.push(r.readComponents());switch(d){case 0:l[12]=p+3,l[13]=p+4,l[14]=p+5,l[15]=p+6,l[8]=p+2,l[11]=p+7,l[4]=p+1,l[7]=p+8,l[0]=p,l[1]=p+11,l[2]=p+10,l[3]=p+9,c[2]=v+1,c[3]=v+2,c[0]=v,c[1]=v+3;break;case 1:m=l[12],g=l[13],b=l[14],y=l[15],l[12]=y,l[13]=p+0,l[14]=p+1,l[15]=p+2,l[8]=b,l[11]=p+3,l[4]=g,l[7]=p+4,l[0]=m,l[1]=p+7,l[2]=p+6,l[3]=p+5,m=c[2],g=c[3],c[2]=g,c[3]=v,c[0]=m,c[1]=v+1;break;case 2:m=l[15],g=l[11],l[12]=l[3],l[13]=p+0,l[14]=p+1,l[15]=p+2,l[8]=l[7],l[11]=p+3,l[4]=g,l[7]=p+4,l[0]=m,l[1]=p+7,l[2]=p+6,l[3]=p+5,m=c[3],c[2]=c[1],c[3]=v,c[0]=m,c[1]=v+1;break;case 3:l[12]=l[0],l[13]=p+0,l[14]=p+1,l[15]=p+2,l[8]=l[1],l[11]=p+3,l[4]=l[2],l[7]=p+4,l[0]=l[3],l[1]=p+7,l[2]=p+6,l[3]=p+5,c[2]=c[0],c[3]=v,c[0]=c[1],c[1]=v+1}l[5]=a.length,a.push([(-4*a[l[0]][0]-a[l[15]][0]+6*(a[l[4]][0]+a[l[1]][0])-2*(a[l[12]][0]+a[l[3]][0])+3*(a[l[13]][0]+a[l[7]][0]))/9,(-4*a[l[0]][1]-a[l[15]][1]+6*(a[l[4]][1]+a[l[1]][1])-2*(a[l[12]][1]+a[l[3]][1])+3*(a[l[13]][1]+a[l[7]][1]))/9]),l[6]=a.length,a.push([(-4*a[l[3]][0]-a[l[12]][0]+6*(a[l[2]][0]+a[l[7]][0])-2*(a[l[0]][0]+a[l[15]][0])+3*(a[l[4]][0]+a[l[14]][0]))/9,(-4*a[l[3]][1]-a[l[12]][1]+6*(a[l[2]][1]+a[l[7]][1])-2*(a[l[0]][1]+a[l[15]][1])+3*(a[l[4]][1]+a[l[14]][1]))/9]),l[9]=a.length,a.push([(-4*a[l[12]][0]-a[l[3]][0]+6*(a[l[8]][0]+a[l[13]][0])-2*(a[l[0]][0]+a[l[15]][0])+3*(a[l[11]][0]+a[l[1]][0]))/9,(-4*a[l[12]][1]-a[l[3]][1]+6*(a[l[8]][1]+a[l[13]][1])-2*(a[l[0]][1]+a[l[15]][1])+3*(a[l[11]][1]+a[l[1]][1]))/9]),l[10]=a.length,a.push([(-4*a[l[15]][0]-a[l[0]][0]+6*(a[l[11]][0]+a[l[14]][0])-2*(a[l[12]][0]+a[l[3]][0])+3*(a[l[2]][0]+a[l[8]][0]))/9,(-4*a[l[15]][1]-a[l[0]][1]+6*(a[l[11]][1]+a[l[14]][1])-2*(a[l[12]][1]+a[l[3]][1])+3*(a[l[2]][1]+a[l[8]][1]))/9]),t.figures.push({type:"patch",coords:new Int32Array(l),colors:new Int32Array(c)})}}(this,k),w=!0;break;case g:!function decodeType7Shading(t,r){for(var a=t.coords,o=t.colors,l=new Int32Array(16),c=new Int32Array(4);r.hasData;){var u,h,d=r.readFlag();if(!(0<=d&&d<=3))throw new i.FormatError("Unknown type7 flag");var p=a.length;for(u=0,h=0!==d?12:16;u<h;u++)a.push(r.readCoordinate());var m,g,b,y,v=o.length;for(u=0,h=0!==d?2:4;u<h;u++)o.push(r.readComponents());switch(d){case 0:l[12]=p+3,l[13]=p+4,l[14]=p+5,l[15]=p+6,l[8]=p+2,l[9]=p+13,l[10]=p+14,l[11]=p+7,l[4]=p+1,l[5]=p+12,l[6]=p+15,l[7]=p+8,l[0]=p,l[1]=p+11,l[2]=p+10,l[3]=p+9,c[2]=v+1,c[3]=v+2,c[0]=v,c[1]=v+3;break;case 1:m=l[12],g=l[13],b=l[14],y=l[15],l[12]=y,l[13]=p+0,l[14]=p+1,l[15]=p+2,l[8]=b,l[9]=p+9,l[10]=p+10,l[11]=p+3,l[4]=g,l[5]=p+8,l[6]=p+11,l[7]=p+4,l[0]=m,l[1]=p+7,l[2]=p+6,l[3]=p+5,m=c[2],g=c[3],c[2]=g,c[3]=v,c[0]=m,c[1]=v+1;break;case 2:m=l[15],g=l[11],l[12]=l[3],l[13]=p+0,l[14]=p+1,l[15]=p+2,l[8]=l[7],l[9]=p+9,l[10]=p+10,l[11]=p+3,l[4]=g,l[5]=p+8,l[6]=p+11,l[7]=p+4,l[0]=m,l[1]=p+7,l[2]=p+6,l[3]=p+5,m=c[3],c[2]=c[1],c[3]=v,c[0]=m,c[1]=v+1;break;case 3:l[12]=l[0],l[13]=p+0,l[14]=p+1,l[15]=p+2,l[8]=l[1],l[9]=p+9,l[10]=p+10,l[11]=p+3,l[4]=l[2],l[5]=p+8,l[6]=p+11,l[7]=p+4,l[0]=l[3],l[1]=p+7,l[2]=p+6,l[3]=p+5,c[2]=c[0],c[3]=v,c[0]=c[1],c[1]=v+1}t.figures.push({type:"patch",coords:new Int32Array(l),colors:new Int32Array(c)})}}(this,k),w=!0;break;default:(0,i.unreachable)("Unsupported mesh type.")}if(w){updateBounds(this);for(var x=0,_=this.figures.length;x<_;x++)buildFigureFromPatch(this,x)}updateBounds(this),function packData(t){var r,a,i,o,l=t.coords,c=new Float32Array(2*l.length);for(r=0,i=0,a=l.length;r<a;r++){var u=l[r];c[i++]=u[0],c[i++]=u[1]}t.coords=c;var h=t.colors,d=new Uint8Array(3*h.length);for(r=0,i=0,a=h.length;r<a;r++){var p=h[r];d[i++]=p[0],d[i++]=p[1],d[i++]=p[2]}t.colors=d;var m=t.figures;for(r=0,a=m.length;r<a;r++){var g=m[r],b=g.coords,y=g.colors;for(i=0,o=b.length;i<o;i++)b[i]*=2,y[i]*=3}}(this)}return Mesh.prototype={getIR:function Mesh_getIR(){return["Mesh",this.shadingType,this.coords,this.colors,this.figures,this.bounds,this.matrix,this.bbox,this.background]}},Mesh}(),y.Dummy=function DummyClosure(){function Dummy(){this.type="Pattern"}return Dummy.prototype={getIR:function Dummy_getIR(){return["Dummy"]}},Dummy}()},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.bidi=function bidi(t,r,a){var h=!0,d=t.length;if(0===d||a)return createBidiText(t,h,a);c.length=d,u.length=d;var p,m,g=0;for(p=0;p<d;++p){c[p]=t.charAt(p);var b=t.charCodeAt(p),y="L";b<=255?y=o[b]:1424<=b&&b<=1524?y="R":1536<=b&&b<=1791?(y=l[255&b])||(0,i.warn)("Bidi: invalid Unicode character "+b.toString(16)):1792<=b&&b<=2220&&(y="AL"),"R"!==y&&"AL"!==y&&"AN"!==y||g++,u[p]=y}if(0===g)return createBidiText(t,h=!0);-1===r&&(g/d<.3?(h=!0,r=0):(h=!1,r=1));var v=[];for(p=0;p<d;++p)v[p]=r;var S,k=isOdd(r)?"R":"L",w=k,C=w,x=w;for(p=0;p<d;++p)"NSM"===u[p]?u[p]=x:x=u[p];for(x=w,p=0;p<d;++p)"EN"===(S=u[p])?u[p]="AL"===x?"AN":"EN":"R"!==S&&"L"!==S&&"AL"!==S||(x=S);for(p=0;p<d;++p)"AL"===(S=u[p])&&(u[p]="R");for(p=1;p<d-1;++p)"ES"===u[p]&&"EN"===u[p-1]&&"EN"===u[p+1]&&(u[p]="EN"),"CS"!==u[p]||"EN"!==u[p-1]&&"AN"!==u[p-1]||u[p+1]!==u[p-1]||(u[p]=u[p-1]);for(p=0;p<d;++p)if("EN"===u[p]){var _;for(_=p-1;_>=0&&"ET"===u[_];--_)u[_]="EN";for(_=p+1;_<d&&"ET"===u[_];++_)u[_]="EN"}for(p=0;p<d;++p)"WS"!==(S=u[p])&&"ES"!==S&&"ET"!==S&&"CS"!==S||(u[p]="ON");for(x=w,p=0;p<d;++p)"EN"===(S=u[p])?u[p]="L"===x?"L":"EN":"R"!==S&&"L"!==S||(x=S);for(p=0;p<d;++p)if("ON"===u[p]){var A=findUnequal(u,p+1,"ON"),R=w;p>0&&(R=u[p-1]);var T=C;A+1<d&&(T=u[A+1]),"L"!==R&&(R="R"),"L"!==T&&(T="R"),R===T&&setValues(u,p,A,R),p=A-1}for(p=0;p<d;++p)"ON"===u[p]&&(u[p]=k);for(p=0;p<d;++p)S=u[p],isEven(v[p])?"R"===S?v[p]+=1:"AN"!==S&&"EN"!==S||(v[p]+=2):"L"!==S&&"AN"!==S&&"EN"!==S||(v[p]+=1);var I,P=-1,O=99;for(p=0,m=v.length;p<m;++p)I=v[p],P<I&&(P=I),O>I&&isOdd(I)&&(O=I);for(I=P;I>=O;--I){var E=-1;for(p=0,m=v.length;p<m;++p)v[p]<I?E>=0&&(reverseValues(c,E,p),E=-1):E<0&&(E=p);E>=0&&reverseValues(c,E,v.length)}for(p=0,m=c.length;p<m;++p){var B=c[p];"<"!==B&&">"!==B||(c[p]="")}return createBidiText(c.join(""),h)};var i=a(5),o=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","ON","ON","ET","ET","ET","ON","ON","ON","ON","ON","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","ON","ET","ET","ET","ET","ON","ON","ON","ON","L","ON","ON","BN","ON","ON","ET","ET","EN","EN","ON","L","ON","ON","ON","EN","L","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L"],l=["AN","AN","AN","AN","AN","AN","ON","ON","AL","ET","ET","AL","CS","AL","ON","ON","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","ON","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","ON","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL"];function isOdd(t){return 0!=(1&t)}function isEven(t){return 0==(1&t)}function findUnequal(t,r,a){for(var i=r,o=t.length;i<o;++i)if(t[i]!==a)return i;return i}function setValues(t,r,a,i){for(var o=r;o<a;++o)t[o]=i}function reverseValues(t,r,a){for(var i=r,o=a-1;i<o;++i,--o){var l=t[i];t[i]=t[o],t[o]=l}}function createBidiText(t,r){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i="ltr";return a?i="ttb":r||(i="rtl"),{str:t,dir:i}}var c=[],u=[]},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getMetrics=void 0;var i=a(201),o=(0,i.getLookupTableFactory)((function(t){t.Courier=600,t["Courier-Bold"]=600,t["Courier-BoldOblique"]=600,t["Courier-Oblique"]=600,t.Helvetica=(0,i.getLookupTableFactory)((function(t){t.space=278,t.exclam=278,t.quotedbl=355,t.numbersign=556,t.dollar=556,t.percent=889,t.ampersand=667,t.quoteright=222,t.parenleft=333,t.parenright=333,t.asterisk=389,t.plus=584,t.comma=278,t.hyphen=333,t.period=278,t.slash=278,t.zero=556,t.one=556,t.two=556,t.three=556,t.four=556,t.five=556,t.six=556,t.seven=556,t.eight=556,t.nine=556,t.colon=278,t.semicolon=278,t.less=584,t.equal=584,t.greater=584,t.question=556,t.at=1015,t.A=667,t.B=667,t.C=722,t.D=722,t.E=667,t.F=611,t.G=778,t.H=722,t.I=278,t.J=500,t.K=667,t.L=556,t.M=833,t.N=722,t.O=778,t.P=667,t.Q=778,t.R=722,t.S=667,t.T=611,t.U=722,t.V=667,t.W=944,t.X=667,t.Y=667,t.Z=611,t.bracketleft=278,t.backslash=278,t.bracketright=278,t.asciicircum=469,t.underscore=556,t.quoteleft=222,t.a=556,t.b=556,t.c=500,t.d=556,t.e=556,t.f=278,t.g=556,t.h=556,t.i=222,t.j=222,t.k=500,t.l=222,t.m=833,t.n=556,t.o=556,t.p=556,t.q=556,t.r=333,t.s=500,t.t=278,t.u=556,t.v=500,t.w=722,t.x=500,t.y=500,t.z=500,t.braceleft=334,t.bar=260,t.braceright=334,t.asciitilde=584,t.exclamdown=333,t.cent=556,t.sterling=556,t.fraction=167,t.yen=556,t.florin=556,t.section=556,t.currency=556,t.quotesingle=191,t.quotedblleft=333,t.guillemotleft=556,t.guilsinglleft=333,t.guilsinglright=333,t.fi=500,t.fl=500,t.endash=556,t.dagger=556,t.daggerdbl=556,t.periodcentered=278,t.paragraph=537,t.bullet=350,t.quotesinglbase=222,t.quotedblbase=333,t.quotedblright=333,t.guillemotright=556,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=611,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=1e3,t.ordfeminine=370,t.Lslash=556,t.Oslash=778,t.OE=1e3,t.ordmasculine=365,t.ae=889,t.dotlessi=278,t.lslash=222,t.oslash=611,t.oe=944,t.germandbls=611,t.Idieresis=278,t.eacute=556,t.abreve=556,t.uhungarumlaut=556,t.ecaron=556,t.Ydieresis=667,t.divide=584,t.Yacute=667,t.Acircumflex=667,t.aacute=556,t.Ucircumflex=722,t.yacute=500,t.scommaaccent=500,t.ecircumflex=556,t.Uring=722,t.Udieresis=722,t.aogonek=556,t.Uacute=722,t.uogonek=556,t.Edieresis=667,t.Dcroat=722,t.commaaccent=250,t.copyright=737,t.Emacron=667,t.ccaron=500,t.aring=556,t.Ncommaaccent=722,t.lacute=222,t.agrave=556,t.Tcommaaccent=611,t.Cacute=722,t.atilde=556,t.Edotaccent=667,t.scaron=500,t.scedilla=500,t.iacute=278,t.lozenge=471,t.Rcaron=722,t.Gcommaaccent=778,t.ucircumflex=556,t.acircumflex=556,t.Amacron=667,t.rcaron=333,t.ccedilla=500,t.Zdotaccent=611,t.Thorn=667,t.Omacron=778,t.Racute=722,t.Sacute=667,t.dcaron=643,t.Umacron=722,t.uring=556,t.threesuperior=333,t.Ograve=778,t.Agrave=667,t.Abreve=667,t.multiply=584,t.uacute=556,t.Tcaron=611,t.partialdiff=476,t.ydieresis=500,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=667,t.adieresis=556,t.edieresis=556,t.cacute=500,t.nacute=556,t.umacron=556,t.Ncaron=722,t.Iacute=278,t.plusminus=584,t.brokenbar=260,t.registered=737,t.Gbreve=778,t.Idotaccent=278,t.summation=600,t.Egrave=667,t.racute=333,t.omacron=556,t.Zacute=611,t.Zcaron=611,t.greaterequal=549,t.Eth=722,t.Ccedilla=722,t.lcommaaccent=222,t.tcaron=317,t.eogonek=556,t.Uogonek=722,t.Aacute=667,t.Adieresis=667,t.egrave=556,t.zacute=500,t.iogonek=222,t.Oacute=778,t.oacute=556,t.amacron=556,t.sacute=500,t.idieresis=278,t.Ocircumflex=778,t.Ugrave=722,t.Delta=612,t.thorn=556,t.twosuperior=333,t.Odieresis=778,t.mu=556,t.igrave=278,t.ohungarumlaut=556,t.Eogonek=667,t.dcroat=556,t.threequarters=834,t.Scedilla=667,t.lcaron=299,t.Kcommaaccent=667,t.Lacute=556,t.trademark=1e3,t.edotaccent=556,t.Igrave=278,t.Imacron=278,t.Lcaron=556,t.onehalf=834,t.lessequal=549,t.ocircumflex=556,t.ntilde=556,t.Uhungarumlaut=722,t.Eacute=667,t.emacron=556,t.gbreve=556,t.onequarter=834,t.Scaron=667,t.Scommaaccent=667,t.Ohungarumlaut=778,t.degree=400,t.ograve=556,t.Ccaron=722,t.ugrave=556,t.radical=453,t.Dcaron=722,t.rcommaaccent=333,t.Ntilde=722,t.otilde=556,t.Rcommaaccent=722,t.Lcommaaccent=556,t.Atilde=667,t.Aogonek=667,t.Aring=667,t.Otilde=778,t.zdotaccent=500,t.Ecaron=667,t.Iogonek=278,t.kcommaaccent=500,t.minus=584,t.Icircumflex=278,t.ncaron=556,t.tcommaaccent=278,t.logicalnot=584,t.odieresis=556,t.udieresis=556,t.notequal=549,t.gcommaaccent=556,t.eth=556,t.zcaron=500,t.ncommaaccent=556,t.onesuperior=333,t.imacron=278,t.Euro=556})),t["Helvetica-Bold"]=(0,i.getLookupTableFactory)((function(t){t.space=278,t.exclam=333,t.quotedbl=474,t.numbersign=556,t.dollar=556,t.percent=889,t.ampersand=722,t.quoteright=278,t.parenleft=333,t.parenright=333,t.asterisk=389,t.plus=584,t.comma=278,t.hyphen=333,t.period=278,t.slash=278,t.zero=556,t.one=556,t.two=556,t.three=556,t.four=556,t.five=556,t.six=556,t.seven=556,t.eight=556,t.nine=556,t.colon=333,t.semicolon=333,t.less=584,t.equal=584,t.greater=584,t.question=611,t.at=975,t.A=722,t.B=722,t.C=722,t.D=722,t.E=667,t.F=611,t.G=778,t.H=722,t.I=278,t.J=556,t.K=722,t.L=611,t.M=833,t.N=722,t.O=778,t.P=667,t.Q=778,t.R=722,t.S=667,t.T=611,t.U=722,t.V=667,t.W=944,t.X=667,t.Y=667,t.Z=611,t.bracketleft=333,t.backslash=278,t.bracketright=333,t.asciicircum=584,t.underscore=556,t.quoteleft=278,t.a=556,t.b=611,t.c=556,t.d=611,t.e=556,t.f=333,t.g=611,t.h=611,t.i=278,t.j=278,t.k=556,t.l=278,t.m=889,t.n=611,t.o=611,t.p=611,t.q=611,t.r=389,t.s=556,t.t=333,t.u=611,t.v=556,t.w=778,t.x=556,t.y=556,t.z=500,t.braceleft=389,t.bar=280,t.braceright=389,t.asciitilde=584,t.exclamdown=333,t.cent=556,t.sterling=556,t.fraction=167,t.yen=556,t.florin=556,t.section=556,t.currency=556,t.quotesingle=238,t.quotedblleft=500,t.guillemotleft=556,t.guilsinglleft=333,t.guilsinglright=333,t.fi=611,t.fl=611,t.endash=556,t.dagger=556,t.daggerdbl=556,t.periodcentered=278,t.paragraph=556,t.bullet=350,t.quotesinglbase=278,t.quotedblbase=500,t.quotedblright=500,t.guillemotright=556,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=611,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=1e3,t.ordfeminine=370,t.Lslash=611,t.Oslash=778,t.OE=1e3,t.ordmasculine=365,t.ae=889,t.dotlessi=278,t.lslash=278,t.oslash=611,t.oe=944,t.germandbls=611,t.Idieresis=278,t.eacute=556,t.abreve=556,t.uhungarumlaut=611,t.ecaron=556,t.Ydieresis=667,t.divide=584,t.Yacute=667,t.Acircumflex=722,t.aacute=556,t.Ucircumflex=722,t.yacute=556,t.scommaaccent=556,t.ecircumflex=556,t.Uring=722,t.Udieresis=722,t.aogonek=556,t.Uacute=722,t.uogonek=611,t.Edieresis=667,t.Dcroat=722,t.commaaccent=250,t.copyright=737,t.Emacron=667,t.ccaron=556,t.aring=556,t.Ncommaaccent=722,t.lacute=278,t.agrave=556,t.Tcommaaccent=611,t.Cacute=722,t.atilde=556,t.Edotaccent=667,t.scaron=556,t.scedilla=556,t.iacute=278,t.lozenge=494,t.Rcaron=722,t.Gcommaaccent=778,t.ucircumflex=611,t.acircumflex=556,t.Amacron=722,t.rcaron=389,t.ccedilla=556,t.Zdotaccent=611,t.Thorn=667,t.Omacron=778,t.Racute=722,t.Sacute=667,t.dcaron=743,t.Umacron=722,t.uring=611,t.threesuperior=333,t.Ograve=778,t.Agrave=722,t.Abreve=722,t.multiply=584,t.uacute=611,t.Tcaron=611,t.partialdiff=494,t.ydieresis=556,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=667,t.adieresis=556,t.edieresis=556,t.cacute=556,t.nacute=611,t.umacron=611,t.Ncaron=722,t.Iacute=278,t.plusminus=584,t.brokenbar=280,t.registered=737,t.Gbreve=778,t.Idotaccent=278,t.summation=600,t.Egrave=667,t.racute=389,t.omacron=611,t.Zacute=611,t.Zcaron=611,t.greaterequal=549,t.Eth=722,t.Ccedilla=722,t.lcommaaccent=278,t.tcaron=389,t.eogonek=556,t.Uogonek=722,t.Aacute=722,t.Adieresis=722,t.egrave=556,t.zacute=500,t.iogonek=278,t.Oacute=778,t.oacute=611,t.amacron=556,t.sacute=556,t.idieresis=278,t.Ocircumflex=778,t.Ugrave=722,t.Delta=612,t.thorn=611,t.twosuperior=333,t.Odieresis=778,t.mu=611,t.igrave=278,t.ohungarumlaut=611,t.Eogonek=667,t.dcroat=611,t.threequarters=834,t.Scedilla=667,t.lcaron=400,t.Kcommaaccent=722,t.Lacute=611,t.trademark=1e3,t.edotaccent=556,t.Igrave=278,t.Imacron=278,t.Lcaron=611,t.onehalf=834,t.lessequal=549,t.ocircumflex=611,t.ntilde=611,t.Uhungarumlaut=722,t.Eacute=667,t.emacron=556,t.gbreve=611,t.onequarter=834,t.Scaron=667,t.Scommaaccent=667,t.Ohungarumlaut=778,t.degree=400,t.ograve=611,t.Ccaron=722,t.ugrave=611,t.radical=549,t.Dcaron=722,t.rcommaaccent=389,t.Ntilde=722,t.otilde=611,t.Rcommaaccent=722,t.Lcommaaccent=611,t.Atilde=722,t.Aogonek=722,t.Aring=722,t.Otilde=778,t.zdotaccent=500,t.Ecaron=667,t.Iogonek=278,t.kcommaaccent=556,t.minus=584,t.Icircumflex=278,t.ncaron=611,t.tcommaaccent=333,t.logicalnot=584,t.odieresis=611,t.udieresis=611,t.notequal=549,t.gcommaaccent=611,t.eth=611,t.zcaron=500,t.ncommaaccent=611,t.onesuperior=333,t.imacron=278,t.Euro=556})),t["Helvetica-BoldOblique"]=(0,i.getLookupTableFactory)((function(t){t.space=278,t.exclam=333,t.quotedbl=474,t.numbersign=556,t.dollar=556,t.percent=889,t.ampersand=722,t.quoteright=278,t.parenleft=333,t.parenright=333,t.asterisk=389,t.plus=584,t.comma=278,t.hyphen=333,t.period=278,t.slash=278,t.zero=556,t.one=556,t.two=556,t.three=556,t.four=556,t.five=556,t.six=556,t.seven=556,t.eight=556,t.nine=556,t.colon=333,t.semicolon=333,t.less=584,t.equal=584,t.greater=584,t.question=611,t.at=975,t.A=722,t.B=722,t.C=722,t.D=722,t.E=667,t.F=611,t.G=778,t.H=722,t.I=278,t.J=556,t.K=722,t.L=611,t.M=833,t.N=722,t.O=778,t.P=667,t.Q=778,t.R=722,t.S=667,t.T=611,t.U=722,t.V=667,t.W=944,t.X=667,t.Y=667,t.Z=611,t.bracketleft=333,t.backslash=278,t.bracketright=333,t.asciicircum=584,t.underscore=556,t.quoteleft=278,t.a=556,t.b=611,t.c=556,t.d=611,t.e=556,t.f=333,t.g=611,t.h=611,t.i=278,t.j=278,t.k=556,t.l=278,t.m=889,t.n=611,t.o=611,t.p=611,t.q=611,t.r=389,t.s=556,t.t=333,t.u=611,t.v=556,t.w=778,t.x=556,t.y=556,t.z=500,t.braceleft=389,t.bar=280,t.braceright=389,t.asciitilde=584,t.exclamdown=333,t.cent=556,t.sterling=556,t.fraction=167,t.yen=556,t.florin=556,t.section=556,t.currency=556,t.quotesingle=238,t.quotedblleft=500,t.guillemotleft=556,t.guilsinglleft=333,t.guilsinglright=333,t.fi=611,t.fl=611,t.endash=556,t.dagger=556,t.daggerdbl=556,t.periodcentered=278,t.paragraph=556,t.bullet=350,t.quotesinglbase=278,t.quotedblbase=500,t.quotedblright=500,t.guillemotright=556,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=611,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=1e3,t.ordfeminine=370,t.Lslash=611,t.Oslash=778,t.OE=1e3,t.ordmasculine=365,t.ae=889,t.dotlessi=278,t.lslash=278,t.oslash=611,t.oe=944,t.germandbls=611,t.Idieresis=278,t.eacute=556,t.abreve=556,t.uhungarumlaut=611,t.ecaron=556,t.Ydieresis=667,t.divide=584,t.Yacute=667,t.Acircumflex=722,t.aacute=556,t.Ucircumflex=722,t.yacute=556,t.scommaaccent=556,t.ecircumflex=556,t.Uring=722,t.Udieresis=722,t.aogonek=556,t.Uacute=722,t.uogonek=611,t.Edieresis=667,t.Dcroat=722,t.commaaccent=250,t.copyright=737,t.Emacron=667,t.ccaron=556,t.aring=556,t.Ncommaaccent=722,t.lacute=278,t.agrave=556,t.Tcommaaccent=611,t.Cacute=722,t.atilde=556,t.Edotaccent=667,t.scaron=556,t.scedilla=556,t.iacute=278,t.lozenge=494,t.Rcaron=722,t.Gcommaaccent=778,t.ucircumflex=611,t.acircumflex=556,t.Amacron=722,t.rcaron=389,t.ccedilla=556,t.Zdotaccent=611,t.Thorn=667,t.Omacron=778,t.Racute=722,t.Sacute=667,t.dcaron=743,t.Umacron=722,t.uring=611,t.threesuperior=333,t.Ograve=778,t.Agrave=722,t.Abreve=722,t.multiply=584,t.uacute=611,t.Tcaron=611,t.partialdiff=494,t.ydieresis=556,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=667,t.adieresis=556,t.edieresis=556,t.cacute=556,t.nacute=611,t.umacron=611,t.Ncaron=722,t.Iacute=278,t.plusminus=584,t.brokenbar=280,t.registered=737,t.Gbreve=778,t.Idotaccent=278,t.summation=600,t.Egrave=667,t.racute=389,t.omacron=611,t.Zacute=611,t.Zcaron=611,t.greaterequal=549,t.Eth=722,t.Ccedilla=722,t.lcommaaccent=278,t.tcaron=389,t.eogonek=556,t.Uogonek=722,t.Aacute=722,t.Adieresis=722,t.egrave=556,t.zacute=500,t.iogonek=278,t.Oacute=778,t.oacute=611,t.amacron=556,t.sacute=556,t.idieresis=278,t.Ocircumflex=778,t.Ugrave=722,t.Delta=612,t.thorn=611,t.twosuperior=333,t.Odieresis=778,t.mu=611,t.igrave=278,t.ohungarumlaut=611,t.Eogonek=667,t.dcroat=611,t.threequarters=834,t.Scedilla=667,t.lcaron=400,t.Kcommaaccent=722,t.Lacute=611,t.trademark=1e3,t.edotaccent=556,t.Igrave=278,t.Imacron=278,t.Lcaron=611,t.onehalf=834,t.lessequal=549,t.ocircumflex=611,t.ntilde=611,t.Uhungarumlaut=722,t.Eacute=667,t.emacron=556,t.gbreve=611,t.onequarter=834,t.Scaron=667,t.Scommaaccent=667,t.Ohungarumlaut=778,t.degree=400,t.ograve=611,t.Ccaron=722,t.ugrave=611,t.radical=549,t.Dcaron=722,t.rcommaaccent=389,t.Ntilde=722,t.otilde=611,t.Rcommaaccent=722,t.Lcommaaccent=611,t.Atilde=722,t.Aogonek=722,t.Aring=722,t.Otilde=778,t.zdotaccent=500,t.Ecaron=667,t.Iogonek=278,t.kcommaaccent=556,t.minus=584,t.Icircumflex=278,t.ncaron=611,t.tcommaaccent=333,t.logicalnot=584,t.odieresis=611,t.udieresis=611,t.notequal=549,t.gcommaaccent=611,t.eth=611,t.zcaron=500,t.ncommaaccent=611,t.onesuperior=333,t.imacron=278,t.Euro=556})),t["Helvetica-Oblique"]=(0,i.getLookupTableFactory)((function(t){t.space=278,t.exclam=278,t.quotedbl=355,t.numbersign=556,t.dollar=556,t.percent=889,t.ampersand=667,t.quoteright=222,t.parenleft=333,t.parenright=333,t.asterisk=389,t.plus=584,t.comma=278,t.hyphen=333,t.period=278,t.slash=278,t.zero=556,t.one=556,t.two=556,t.three=556,t.four=556,t.five=556,t.six=556,t.seven=556,t.eight=556,t.nine=556,t.colon=278,t.semicolon=278,t.less=584,t.equal=584,t.greater=584,t.question=556,t.at=1015,t.A=667,t.B=667,t.C=722,t.D=722,t.E=667,t.F=611,t.G=778,t.H=722,t.I=278,t.J=500,t.K=667,t.L=556,t.M=833,t.N=722,t.O=778,t.P=667,t.Q=778,t.R=722,t.S=667,t.T=611,t.U=722,t.V=667,t.W=944,t.X=667,t.Y=667,t.Z=611,t.bracketleft=278,t.backslash=278,t.bracketright=278,t.asciicircum=469,t.underscore=556,t.quoteleft=222,t.a=556,t.b=556,t.c=500,t.d=556,t.e=556,t.f=278,t.g=556,t.h=556,t.i=222,t.j=222,t.k=500,t.l=222,t.m=833,t.n=556,t.o=556,t.p=556,t.q=556,t.r=333,t.s=500,t.t=278,t.u=556,t.v=500,t.w=722,t.x=500,t.y=500,t.z=500,t.braceleft=334,t.bar=260,t.braceright=334,t.asciitilde=584,t.exclamdown=333,t.cent=556,t.sterling=556,t.fraction=167,t.yen=556,t.florin=556,t.section=556,t.currency=556,t.quotesingle=191,t.quotedblleft=333,t.guillemotleft=556,t.guilsinglleft=333,t.guilsinglright=333,t.fi=500,t.fl=500,t.endash=556,t.dagger=556,t.daggerdbl=556,t.periodcentered=278,t.paragraph=537,t.bullet=350,t.quotesinglbase=222,t.quotedblbase=333,t.quotedblright=333,t.guillemotright=556,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=611,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=1e3,t.ordfeminine=370,t.Lslash=556,t.Oslash=778,t.OE=1e3,t.ordmasculine=365,t.ae=889,t.dotlessi=278,t.lslash=222,t.oslash=611,t.oe=944,t.germandbls=611,t.Idieresis=278,t.eacute=556,t.abreve=556,t.uhungarumlaut=556,t.ecaron=556,t.Ydieresis=667,t.divide=584,t.Yacute=667,t.Acircumflex=667,t.aacute=556,t.Ucircumflex=722,t.yacute=500,t.scommaaccent=500,t.ecircumflex=556,t.Uring=722,t.Udieresis=722,t.aogonek=556,t.Uacute=722,t.uogonek=556,t.Edieresis=667,t.Dcroat=722,t.commaaccent=250,t.copyright=737,t.Emacron=667,t.ccaron=500,t.aring=556,t.Ncommaaccent=722,t.lacute=222,t.agrave=556,t.Tcommaaccent=611,t.Cacute=722,t.atilde=556,t.Edotaccent=667,t.scaron=500,t.scedilla=500,t.iacute=278,t.lozenge=471,t.Rcaron=722,t.Gcommaaccent=778,t.ucircumflex=556,t.acircumflex=556,t.Amacron=667,t.rcaron=333,t.ccedilla=500,t.Zdotaccent=611,t.Thorn=667,t.Omacron=778,t.Racute=722,t.Sacute=667,t.dcaron=643,t.Umacron=722,t.uring=556,t.threesuperior=333,t.Ograve=778,t.Agrave=667,t.Abreve=667,t.multiply=584,t.uacute=556,t.Tcaron=611,t.partialdiff=476,t.ydieresis=500,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=667,t.adieresis=556,t.edieresis=556,t.cacute=500,t.nacute=556,t.umacron=556,t.Ncaron=722,t.Iacute=278,t.plusminus=584,t.brokenbar=260,t.registered=737,t.Gbreve=778,t.Idotaccent=278,t.summation=600,t.Egrave=667,t.racute=333,t.omacron=556,t.Zacute=611,t.Zcaron=611,t.greaterequal=549,t.Eth=722,t.Ccedilla=722,t.lcommaaccent=222,t.tcaron=317,t.eogonek=556,t.Uogonek=722,t.Aacute=667,t.Adieresis=667,t.egrave=556,t.zacute=500,t.iogonek=222,t.Oacute=778,t.oacute=556,t.amacron=556,t.sacute=500,t.idieresis=278,t.Ocircumflex=778,t.Ugrave=722,t.Delta=612,t.thorn=556,t.twosuperior=333,t.Odieresis=778,t.mu=556,t.igrave=278,t.ohungarumlaut=556,t.Eogonek=667,t.dcroat=556,t.threequarters=834,t.Scedilla=667,t.lcaron=299,t.Kcommaaccent=667,t.Lacute=556,t.trademark=1e3,t.edotaccent=556,t.Igrave=278,t.Imacron=278,t.Lcaron=556,t.onehalf=834,t.lessequal=549,t.ocircumflex=556,t.ntilde=556,t.Uhungarumlaut=722,t.Eacute=667,t.emacron=556,t.gbreve=556,t.onequarter=834,t.Scaron=667,t.Scommaaccent=667,t.Ohungarumlaut=778,t.degree=400,t.ograve=556,t.Ccaron=722,t.ugrave=556,t.radical=453,t.Dcaron=722,t.rcommaaccent=333,t.Ntilde=722,t.otilde=556,t.Rcommaaccent=722,t.Lcommaaccent=556,t.Atilde=667,t.Aogonek=667,t.Aring=667,t.Otilde=778,t.zdotaccent=500,t.Ecaron=667,t.Iogonek=278,t.kcommaaccent=500,t.minus=584,t.Icircumflex=278,t.ncaron=556,t.tcommaaccent=278,t.logicalnot=584,t.odieresis=556,t.udieresis=556,t.notequal=549,t.gcommaaccent=556,t.eth=556,t.zcaron=500,t.ncommaaccent=556,t.onesuperior=333,t.imacron=278,t.Euro=556})),t.Symbol=(0,i.getLookupTableFactory)((function(t){t.space=250,t.exclam=333,t.universal=713,t.numbersign=500,t.existential=549,t.percent=833,t.ampersand=778,t.suchthat=439,t.parenleft=333,t.parenright=333,t.asteriskmath=500,t.plus=549,t.comma=250,t.minus=549,t.period=250,t.slash=278,t.zero=500,t.one=500,t.two=500,t.three=500,t.four=500,t.five=500,t.six=500,t.seven=500,t.eight=500,t.nine=500,t.colon=278,t.semicolon=278,t.less=549,t.equal=549,t.greater=549,t.question=444,t.congruent=549,t.Alpha=722,t.Beta=667,t.Chi=722,t.Delta=612,t.Epsilon=611,t.Phi=763,t.Gamma=603,t.Eta=722,t.Iota=333,t.theta1=631,t.Kappa=722,t.Lambda=686,t.Mu=889,t.Nu=722,t.Omicron=722,t.Pi=768,t.Theta=741,t.Rho=556,t.Sigma=592,t.Tau=611,t.Upsilon=690,t.sigma1=439,t.Omega=768,t.Xi=645,t.Psi=795,t.Zeta=611,t.bracketleft=333,t.therefore=863,t.bracketright=333,t.perpendicular=658,t.underscore=500,t.radicalex=500,t.alpha=631,t.beta=549,t.chi=549,t.delta=494,t.epsilon=439,t.phi=521,t.gamma=411,t.eta=603,t.iota=329,t.phi1=603,t.kappa=549,t.lambda=549,t.mu=576,t.nu=521,t.omicron=549,t.pi=549,t.theta=521,t.rho=549,t.sigma=603,t.tau=439,t.upsilon=576,t.omega1=713,t.omega=686,t.xi=493,t.psi=686,t.zeta=494,t.braceleft=480,t.bar=200,t.braceright=480,t.similar=549,t.Euro=750,t.Upsilon1=620,t.minute=247,t.lessequal=549,t.fraction=167,t.infinity=713,t.florin=500,t.club=753,t.diamond=753,t.heart=753,t.spade=753,t.arrowboth=1042,t.arrowleft=987,t.arrowup=603,t.arrowright=987,t.arrowdown=603,t.degree=400,t.plusminus=549,t.second=411,t.greaterequal=549,t.multiply=549,t.proportional=713,t.partialdiff=494,t.bullet=460,t.divide=549,t.notequal=549,t.equivalence=549,t.approxequal=549,t.ellipsis=1e3,t.arrowvertex=603,t.arrowhorizex=1e3,t.carriagereturn=658,t.aleph=823,t.Ifraktur=686,t.Rfraktur=795,t.weierstrass=987,t.circlemultiply=768,t.circleplus=768,t.emptyset=823,t.intersection=768,t.union=768,t.propersuperset=713,t.reflexsuperset=713,t.notsubset=713,t.propersubset=713,t.reflexsubset=713,t.element=713,t.notelement=713,t.angle=768,t.gradient=713,t.registerserif=790,t.copyrightserif=790,t.trademarkserif=890,t.product=823,t.radical=549,t.dotmath=250,t.logicalnot=713,t.logicaland=603,t.logicalor=603,t.arrowdblboth=1042,t.arrowdblleft=987,t.arrowdblup=603,t.arrowdblright=987,t.arrowdbldown=603,t.lozenge=494,t.angleleft=329,t.registersans=790,t.copyrightsans=790,t.trademarksans=786,t.summation=713,t.parenlefttp=384,t.parenleftex=384,t.parenleftbt=384,t.bracketlefttp=384,t.bracketleftex=384,t.bracketleftbt=384,t.bracelefttp=494,t.braceleftmid=494,t.braceleftbt=494,t.braceex=494,t.angleright=329,t.integral=274,t.integraltp=686,t.integralex=686,t.integralbt=686,t.parenrighttp=384,t.parenrightex=384,t.parenrightbt=384,t.bracketrighttp=384,t.bracketrightex=384,t.bracketrightbt=384,t.bracerighttp=494,t.bracerightmid=494,t.bracerightbt=494,t.apple=790})),t["Times-Roman"]=(0,i.getLookupTableFactory)((function(t){t.space=250,t.exclam=333,t.quotedbl=408,t.numbersign=500,t.dollar=500,t.percent=833,t.ampersand=778,t.quoteright=333,t.parenleft=333,t.parenright=333,t.asterisk=500,t.plus=564,t.comma=250,t.hyphen=333,t.period=250,t.slash=278,t.zero=500,t.one=500,t.two=500,t.three=500,t.four=500,t.five=500,t.six=500,t.seven=500,t.eight=500,t.nine=500,t.colon=278,t.semicolon=278,t.less=564,t.equal=564,t.greater=564,t.question=444,t.at=921,t.A=722,t.B=667,t.C=667,t.D=722,t.E=611,t.F=556,t.G=722,t.H=722,t.I=333,t.J=389,t.K=722,t.L=611,t.M=889,t.N=722,t.O=722,t.P=556,t.Q=722,t.R=667,t.S=556,t.T=611,t.U=722,t.V=722,t.W=944,t.X=722,t.Y=722,t.Z=611,t.bracketleft=333,t.backslash=278,t.bracketright=333,t.asciicircum=469,t.underscore=500,t.quoteleft=333,t.a=444,t.b=500,t.c=444,t.d=500,t.e=444,t.f=333,t.g=500,t.h=500,t.i=278,t.j=278,t.k=500,t.l=278,t.m=778,t.n=500,t.o=500,t.p=500,t.q=500,t.r=333,t.s=389,t.t=278,t.u=500,t.v=500,t.w=722,t.x=500,t.y=500,t.z=444,t.braceleft=480,t.bar=200,t.braceright=480,t.asciitilde=541,t.exclamdown=333,t.cent=500,t.sterling=500,t.fraction=167,t.yen=500,t.florin=500,t.section=500,t.currency=500,t.quotesingle=180,t.quotedblleft=444,t.guillemotleft=500,t.guilsinglleft=333,t.guilsinglright=333,t.fi=556,t.fl=556,t.endash=500,t.dagger=500,t.daggerdbl=500,t.periodcentered=250,t.paragraph=453,t.bullet=350,t.quotesinglbase=333,t.quotedblbase=444,t.quotedblright=444,t.guillemotright=500,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=444,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=889,t.ordfeminine=276,t.Lslash=611,t.Oslash=722,t.OE=889,t.ordmasculine=310,t.ae=667,t.dotlessi=278,t.lslash=278,t.oslash=500,t.oe=722,t.germandbls=500,t.Idieresis=333,t.eacute=444,t.abreve=444,t.uhungarumlaut=500,t.ecaron=444,t.Ydieresis=722,t.divide=564,t.Yacute=722,t.Acircumflex=722,t.aacute=444,t.Ucircumflex=722,t.yacute=500,t.scommaaccent=389,t.ecircumflex=444,t.Uring=722,t.Udieresis=722,t.aogonek=444,t.Uacute=722,t.uogonek=500,t.Edieresis=611,t.Dcroat=722,t.commaaccent=250,t.copyright=760,t.Emacron=611,t.ccaron=444,t.aring=444,t.Ncommaaccent=722,t.lacute=278,t.agrave=444,t.Tcommaaccent=611,t.Cacute=667,t.atilde=444,t.Edotaccent=611,t.scaron=389,t.scedilla=389,t.iacute=278,t.lozenge=471,t.Rcaron=667,t.Gcommaaccent=722,t.ucircumflex=500,t.acircumflex=444,t.Amacron=722,t.rcaron=333,t.ccedilla=444,t.Zdotaccent=611,t.Thorn=556,t.Omacron=722,t.Racute=667,t.Sacute=556,t.dcaron=588,t.Umacron=722,t.uring=500,t.threesuperior=300,t.Ograve=722,t.Agrave=722,t.Abreve=722,t.multiply=564,t.uacute=500,t.Tcaron=611,t.partialdiff=476,t.ydieresis=500,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=611,t.adieresis=444,t.edieresis=444,t.cacute=444,t.nacute=500,t.umacron=500,t.Ncaron=722,t.Iacute=333,t.plusminus=564,t.brokenbar=200,t.registered=760,t.Gbreve=722,t.Idotaccent=333,t.summation=600,t.Egrave=611,t.racute=333,t.omacron=500,t.Zacute=611,t.Zcaron=611,t.greaterequal=549,t.Eth=722,t.Ccedilla=667,t.lcommaaccent=278,t.tcaron=326,t.eogonek=444,t.Uogonek=722,t.Aacute=722,t.Adieresis=722,t.egrave=444,t.zacute=444,t.iogonek=278,t.Oacute=722,t.oacute=500,t.amacron=444,t.sacute=389,t.idieresis=278,t.Ocircumflex=722,t.Ugrave=722,t.Delta=612,t.thorn=500,t.twosuperior=300,t.Odieresis=722,t.mu=500,t.igrave=278,t.ohungarumlaut=500,t.Eogonek=611,t.dcroat=500,t.threequarters=750,t.Scedilla=556,t.lcaron=344,t.Kcommaaccent=722,t.Lacute=611,t.trademark=980,t.edotaccent=444,t.Igrave=333,t.Imacron=333,t.Lcaron=611,t.onehalf=750,t.lessequal=549,t.ocircumflex=500,t.ntilde=500,t.Uhungarumlaut=722,t.Eacute=611,t.emacron=444,t.gbreve=500,t.onequarter=750,t.Scaron=556,t.Scommaaccent=556,t.Ohungarumlaut=722,t.degree=400,t.ograve=500,t.Ccaron=667,t.ugrave=500,t.radical=453,t.Dcaron=722,t.rcommaaccent=333,t.Ntilde=722,t.otilde=500,t.Rcommaaccent=667,t.Lcommaaccent=611,t.Atilde=722,t.Aogonek=722,t.Aring=722,t.Otilde=722,t.zdotaccent=444,t.Ecaron=611,t.Iogonek=333,t.kcommaaccent=500,t.minus=564,t.Icircumflex=333,t.ncaron=500,t.tcommaaccent=278,t.logicalnot=564,t.odieresis=500,t.udieresis=500,t.notequal=549,t.gcommaaccent=500,t.eth=500,t.zcaron=444,t.ncommaaccent=500,t.onesuperior=300,t.imacron=278,t.Euro=500})),t["Times-Bold"]=(0,i.getLookupTableFactory)((function(t){t.space=250,t.exclam=333,t.quotedbl=555,t.numbersign=500,t.dollar=500,t.percent=1e3,t.ampersand=833,t.quoteright=333,t.parenleft=333,t.parenright=333,t.asterisk=500,t.plus=570,t.comma=250,t.hyphen=333,t.period=250,t.slash=278,t.zero=500,t.one=500,t.two=500,t.three=500,t.four=500,t.five=500,t.six=500,t.seven=500,t.eight=500,t.nine=500,t.colon=333,t.semicolon=333,t.less=570,t.equal=570,t.greater=570,t.question=500,t.at=930,t.A=722,t.B=667,t.C=722,t.D=722,t.E=667,t.F=611,t.G=778,t.H=778,t.I=389,t.J=500,t.K=778,t.L=667,t.M=944,t.N=722,t.O=778,t.P=611,t.Q=778,t.R=722,t.S=556,t.T=667,t.U=722,t.V=722,t.W=1e3,t.X=722,t.Y=722,t.Z=667,t.bracketleft=333,t.backslash=278,t.bracketright=333,t.asciicircum=581,t.underscore=500,t.quoteleft=333,t.a=500,t.b=556,t.c=444,t.d=556,t.e=444,t.f=333,t.g=500,t.h=556,t.i=278,t.j=333,t.k=556,t.l=278,t.m=833,t.n=556,t.o=500,t.p=556,t.q=556,t.r=444,t.s=389,t.t=333,t.u=556,t.v=500,t.w=722,t.x=500,t.y=500,t.z=444,t.braceleft=394,t.bar=220,t.braceright=394,t.asciitilde=520,t.exclamdown=333,t.cent=500,t.sterling=500,t.fraction=167,t.yen=500,t.florin=500,t.section=500,t.currency=500,t.quotesingle=278,t.quotedblleft=500,t.guillemotleft=500,t.guilsinglleft=333,t.guilsinglright=333,t.fi=556,t.fl=556,t.endash=500,t.dagger=500,t.daggerdbl=500,t.periodcentered=250,t.paragraph=540,t.bullet=350,t.quotesinglbase=333,t.quotedblbase=500,t.quotedblright=500,t.guillemotright=500,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=500,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=1e3,t.ordfeminine=300,t.Lslash=667,t.Oslash=778,t.OE=1e3,t.ordmasculine=330,t.ae=722,t.dotlessi=278,t.lslash=278,t.oslash=500,t.oe=722,t.germandbls=556,t.Idieresis=389,t.eacute=444,t.abreve=500,t.uhungarumlaut=556,t.ecaron=444,t.Ydieresis=722,t.divide=570,t.Yacute=722,t.Acircumflex=722,t.aacute=500,t.Ucircumflex=722,t.yacute=500,t.scommaaccent=389,t.ecircumflex=444,t.Uring=722,t.Udieresis=722,t.aogonek=500,t.Uacute=722,t.uogonek=556,t.Edieresis=667,t.Dcroat=722,t.commaaccent=250,t.copyright=747,t.Emacron=667,t.ccaron=444,t.aring=500,t.Ncommaaccent=722,t.lacute=278,t.agrave=500,t.Tcommaaccent=667,t.Cacute=722,t.atilde=500,t.Edotaccent=667,t.scaron=389,t.scedilla=389,t.iacute=278,t.lozenge=494,t.Rcaron=722,t.Gcommaaccent=778,t.ucircumflex=556,t.acircumflex=500,t.Amacron=722,t.rcaron=444,t.ccedilla=444,t.Zdotaccent=667,t.Thorn=611,t.Omacron=778,t.Racute=722,t.Sacute=556,t.dcaron=672,t.Umacron=722,t.uring=556,t.threesuperior=300,t.Ograve=778,t.Agrave=722,t.Abreve=722,t.multiply=570,t.uacute=556,t.Tcaron=667,t.partialdiff=494,t.ydieresis=500,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=667,t.adieresis=500,t.edieresis=444,t.cacute=444,t.nacute=556,t.umacron=556,t.Ncaron=722,t.Iacute=389,t.plusminus=570,t.brokenbar=220,t.registered=747,t.Gbreve=778,t.Idotaccent=389,t.summation=600,t.Egrave=667,t.racute=444,t.omacron=500,t.Zacute=667,t.Zcaron=667,t.greaterequal=549,t.Eth=722,t.Ccedilla=722,t.lcommaaccent=278,t.tcaron=416,t.eogonek=444,t.Uogonek=722,t.Aacute=722,t.Adieresis=722,t.egrave=444,t.zacute=444,t.iogonek=278,t.Oacute=778,t.oacute=500,t.amacron=500,t.sacute=389,t.idieresis=278,t.Ocircumflex=778,t.Ugrave=722,t.Delta=612,t.thorn=556,t.twosuperior=300,t.Odieresis=778,t.mu=556,t.igrave=278,t.ohungarumlaut=500,t.Eogonek=667,t.dcroat=556,t.threequarters=750,t.Scedilla=556,t.lcaron=394,t.Kcommaaccent=778,t.Lacute=667,t.trademark=1e3,t.edotaccent=444,t.Igrave=389,t.Imacron=389,t.Lcaron=667,t.onehalf=750,t.lessequal=549,t.ocircumflex=500,t.ntilde=556,t.Uhungarumlaut=722,t.Eacute=667,t.emacron=444,t.gbreve=500,t.onequarter=750,t.Scaron=556,t.Scommaaccent=556,t.Ohungarumlaut=778,t.degree=400,t.ograve=500,t.Ccaron=722,t.ugrave=556,t.radical=549,t.Dcaron=722,t.rcommaaccent=444,t.Ntilde=722,t.otilde=500,t.Rcommaaccent=722,t.Lcommaaccent=667,t.Atilde=722,t.Aogonek=722,t.Aring=722,t.Otilde=778,t.zdotaccent=444,t.Ecaron=667,t.Iogonek=389,t.kcommaaccent=556,t.minus=570,t.Icircumflex=389,t.ncaron=556,t.tcommaaccent=333,t.logicalnot=570,t.odieresis=500,t.udieresis=556,t.notequal=549,t.gcommaaccent=500,t.eth=500,t.zcaron=444,t.ncommaaccent=556,t.onesuperior=300,t.imacron=278,t.Euro=500})),t["Times-BoldItalic"]=(0,i.getLookupTableFactory)((function(t){t.space=250,t.exclam=389,t.quotedbl=555,t.numbersign=500,t.dollar=500,t.percent=833,t.ampersand=778,t.quoteright=333,t.parenleft=333,t.parenright=333,t.asterisk=500,t.plus=570,t.comma=250,t.hyphen=333,t.period=250,t.slash=278,t.zero=500,t.one=500,t.two=500,t.three=500,t.four=500,t.five=500,t.six=500,t.seven=500,t.eight=500,t.nine=500,t.colon=333,t.semicolon=333,t.less=570,t.equal=570,t.greater=570,t.question=500,t.at=832,t.A=667,t.B=667,t.C=667,t.D=722,t.E=667,t.F=667,t.G=722,t.H=778,t.I=389,t.J=500,t.K=667,t.L=611,t.M=889,t.N=722,t.O=722,t.P=611,t.Q=722,t.R=667,t.S=556,t.T=611,t.U=722,t.V=667,t.W=889,t.X=667,t.Y=611,t.Z=611,t.bracketleft=333,t.backslash=278,t.bracketright=333,t.asciicircum=570,t.underscore=500,t.quoteleft=333,t.a=500,t.b=500,t.c=444,t.d=500,t.e=444,t.f=333,t.g=500,t.h=556,t.i=278,t.j=278,t.k=500,t.l=278,t.m=778,t.n=556,t.o=500,t.p=500,t.q=500,t.r=389,t.s=389,t.t=278,t.u=556,t.v=444,t.w=667,t.x=500,t.y=444,t.z=389,t.braceleft=348,t.bar=220,t.braceright=348,t.asciitilde=570,t.exclamdown=389,t.cent=500,t.sterling=500,t.fraction=167,t.yen=500,t.florin=500,t.section=500,t.currency=500,t.quotesingle=278,t.quotedblleft=500,t.guillemotleft=500,t.guilsinglleft=333,t.guilsinglright=333,t.fi=556,t.fl=556,t.endash=500,t.dagger=500,t.daggerdbl=500,t.periodcentered=250,t.paragraph=500,t.bullet=350,t.quotesinglbase=333,t.quotedblbase=500,t.quotedblright=500,t.guillemotright=500,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=500,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=944,t.ordfeminine=266,t.Lslash=611,t.Oslash=722,t.OE=944,t.ordmasculine=300,t.ae=722,t.dotlessi=278,t.lslash=278,t.oslash=500,t.oe=722,t.germandbls=500,t.Idieresis=389,t.eacute=444,t.abreve=500,t.uhungarumlaut=556,t.ecaron=444,t.Ydieresis=611,t.divide=570,t.Yacute=611,t.Acircumflex=667,t.aacute=500,t.Ucircumflex=722,t.yacute=444,t.scommaaccent=389,t.ecircumflex=444,t.Uring=722,t.Udieresis=722,t.aogonek=500,t.Uacute=722,t.uogonek=556,t.Edieresis=667,t.Dcroat=722,t.commaaccent=250,t.copyright=747,t.Emacron=667,t.ccaron=444,t.aring=500,t.Ncommaaccent=722,t.lacute=278,t.agrave=500,t.Tcommaaccent=611,t.Cacute=667,t.atilde=500,t.Edotaccent=667,t.scaron=389,t.scedilla=389,t.iacute=278,t.lozenge=494,t.Rcaron=667,t.Gcommaaccent=722,t.ucircumflex=556,t.acircumflex=500,t.Amacron=667,t.rcaron=389,t.ccedilla=444,t.Zdotaccent=611,t.Thorn=611,t.Omacron=722,t.Racute=667,t.Sacute=556,t.dcaron=608,t.Umacron=722,t.uring=556,t.threesuperior=300,t.Ograve=722,t.Agrave=667,t.Abreve=667,t.multiply=570,t.uacute=556,t.Tcaron=611,t.partialdiff=494,t.ydieresis=444,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=667,t.adieresis=500,t.edieresis=444,t.cacute=444,t.nacute=556,t.umacron=556,t.Ncaron=722,t.Iacute=389,t.plusminus=570,t.brokenbar=220,t.registered=747,t.Gbreve=722,t.Idotaccent=389,t.summation=600,t.Egrave=667,t.racute=389,t.omacron=500,t.Zacute=611,t.Zcaron=611,t.greaterequal=549,t.Eth=722,t.Ccedilla=667,t.lcommaaccent=278,t.tcaron=366,t.eogonek=444,t.Uogonek=722,t.Aacute=667,t.Adieresis=667,t.egrave=444,t.zacute=389,t.iogonek=278,t.Oacute=722,t.oacute=500,t.amacron=500,t.sacute=389,t.idieresis=278,t.Ocircumflex=722,t.Ugrave=722,t.Delta=612,t.thorn=500,t.twosuperior=300,t.Odieresis=722,t.mu=576,t.igrave=278,t.ohungarumlaut=500,t.Eogonek=667,t.dcroat=500,t.threequarters=750,t.Scedilla=556,t.lcaron=382,t.Kcommaaccent=667,t.Lacute=611,t.trademark=1e3,t.edotaccent=444,t.Igrave=389,t.Imacron=389,t.Lcaron=611,t.onehalf=750,t.lessequal=549,t.ocircumflex=500,t.ntilde=556,t.Uhungarumlaut=722,t.Eacute=667,t.emacron=444,t.gbreve=500,t.onequarter=750,t.Scaron=556,t.Scommaaccent=556,t.Ohungarumlaut=722,t.degree=400,t.ograve=500,t.Ccaron=667,t.ugrave=556,t.radical=549,t.Dcaron=722,t.rcommaaccent=389,t.Ntilde=722,t.otilde=500,t.Rcommaaccent=667,t.Lcommaaccent=611,t.Atilde=667,t.Aogonek=667,t.Aring=667,t.Otilde=722,t.zdotaccent=389,t.Ecaron=667,t.Iogonek=389,t.kcommaaccent=500,t.minus=606,t.Icircumflex=389,t.ncaron=556,t.tcommaaccent=278,t.logicalnot=606,t.odieresis=500,t.udieresis=556,t.notequal=549,t.gcommaaccent=500,t.eth=500,t.zcaron=389,t.ncommaaccent=556,t.onesuperior=300,t.imacron=278,t.Euro=500})),t["Times-Italic"]=(0,i.getLookupTableFactory)((function(t){t.space=250,t.exclam=333,t.quotedbl=420,t.numbersign=500,t.dollar=500,t.percent=833,t.ampersand=778,t.quoteright=333,t.parenleft=333,t.parenright=333,t.asterisk=500,t.plus=675,t.comma=250,t.hyphen=333,t.period=250,t.slash=278,t.zero=500,t.one=500,t.two=500,t.three=500,t.four=500,t.five=500,t.six=500,t.seven=500,t.eight=500,t.nine=500,t.colon=333,t.semicolon=333,t.less=675,t.equal=675,t.greater=675,t.question=500,t.at=920,t.A=611,t.B=611,t.C=667,t.D=722,t.E=611,t.F=611,t.G=722,t.H=722,t.I=333,t.J=444,t.K=667,t.L=556,t.M=833,t.N=667,t.O=722,t.P=611,t.Q=722,t.R=611,t.S=500,t.T=556,t.U=722,t.V=611,t.W=833,t.X=611,t.Y=556,t.Z=556,t.bracketleft=389,t.backslash=278,t.bracketright=389,t.asciicircum=422,t.underscore=500,t.quoteleft=333,t.a=500,t.b=500,t.c=444,t.d=500,t.e=444,t.f=278,t.g=500,t.h=500,t.i=278,t.j=278,t.k=444,t.l=278,t.m=722,t.n=500,t.o=500,t.p=500,t.q=500,t.r=389,t.s=389,t.t=278,t.u=500,t.v=444,t.w=667,t.x=444,t.y=444,t.z=389,t.braceleft=400,t.bar=275,t.braceright=400,t.asciitilde=541,t.exclamdown=389,t.cent=500,t.sterling=500,t.fraction=167,t.yen=500,t.florin=500,t.section=500,t.currency=500,t.quotesingle=214,t.quotedblleft=556,t.guillemotleft=500,t.guilsinglleft=333,t.guilsinglright=333,t.fi=500,t.fl=500,t.endash=500,t.dagger=500,t.daggerdbl=500,t.periodcentered=250,t.paragraph=523,t.bullet=350,t.quotesinglbase=333,t.quotedblbase=556,t.quotedblright=556,t.guillemotright=500,t.ellipsis=889,t.perthousand=1e3,t.questiondown=500,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=889,t.AE=889,t.ordfeminine=276,t.Lslash=556,t.Oslash=722,t.OE=944,t.ordmasculine=310,t.ae=667,t.dotlessi=278,t.lslash=278,t.oslash=500,t.oe=667,t.germandbls=500,t.Idieresis=333,t.eacute=444,t.abreve=500,t.uhungarumlaut=500,t.ecaron=444,t.Ydieresis=556,t.divide=675,t.Yacute=556,t.Acircumflex=611,t.aacute=500,t.Ucircumflex=722,t.yacute=444,t.scommaaccent=389,t.ecircumflex=444,t.Uring=722,t.Udieresis=722,t.aogonek=500,t.Uacute=722,t.uogonek=500,t.Edieresis=611,t.Dcroat=722,t.commaaccent=250,t.copyright=760,t.Emacron=611,t.ccaron=444,t.aring=500,t.Ncommaaccent=667,t.lacute=278,t.agrave=500,t.Tcommaaccent=556,t.Cacute=667,t.atilde=500,t.Edotaccent=611,t.scaron=389,t.scedilla=389,t.iacute=278,t.lozenge=471,t.Rcaron=611,t.Gcommaaccent=722,t.ucircumflex=500,t.acircumflex=500,t.Amacron=611,t.rcaron=389,t.ccedilla=444,t.Zdotaccent=556,t.Thorn=611,t.Omacron=722,t.Racute=611,t.Sacute=500,t.dcaron=544,t.Umacron=722,t.uring=500,t.threesuperior=300,t.Ograve=722,t.Agrave=611,t.Abreve=611,t.multiply=675,t.uacute=500,t.Tcaron=556,t.partialdiff=476,t.ydieresis=444,t.Nacute=667,t.icircumflex=278,t.Ecircumflex=611,t.adieresis=500,t.edieresis=444,t.cacute=444,t.nacute=500,t.umacron=500,t.Ncaron=667,t.Iacute=333,t.plusminus=675,t.brokenbar=275,t.registered=760,t.Gbreve=722,t.Idotaccent=333,t.summation=600,t.Egrave=611,t.racute=389,t.omacron=500,t.Zacute=556,t.Zcaron=556,t.greaterequal=549,t.Eth=722,t.Ccedilla=667,t.lcommaaccent=278,t.tcaron=300,t.eogonek=444,t.Uogonek=722,t.Aacute=611,t.Adieresis=611,t.egrave=444,t.zacute=389,t.iogonek=278,t.Oacute=722,t.oacute=500,t.amacron=500,t.sacute=389,t.idieresis=278,t.Ocircumflex=722,t.Ugrave=722,t.Delta=612,t.thorn=500,t.twosuperior=300,t.Odieresis=722,t.mu=500,t.igrave=278,t.ohungarumlaut=500,t.Eogonek=611,t.dcroat=500,t.threequarters=750,t.Scedilla=500,t.lcaron=300,t.Kcommaaccent=667,t.Lacute=556,t.trademark=980,t.edotaccent=444,t.Igrave=333,t.Imacron=333,t.Lcaron=611,t.onehalf=750,t.lessequal=549,t.ocircumflex=500,t.ntilde=500,t.Uhungarumlaut=722,t.Eacute=611,t.emacron=444,t.gbreve=500,t.onequarter=750,t.Scaron=500,t.Scommaaccent=500,t.Ohungarumlaut=722,t.degree=400,t.ograve=500,t.Ccaron=667,t.ugrave=500,t.radical=453,t.Dcaron=722,t.rcommaaccent=389,t.Ntilde=667,t.otilde=500,t.Rcommaaccent=611,t.Lcommaaccent=556,t.Atilde=611,t.Aogonek=611,t.Aring=611,t.Otilde=722,t.zdotaccent=389,t.Ecaron=611,t.Iogonek=333,t.kcommaaccent=444,t.minus=675,t.Icircumflex=333,t.ncaron=500,t.tcommaaccent=278,t.logicalnot=675,t.odieresis=500,t.udieresis=500,t.notequal=549,t.gcommaaccent=500,t.eth=500,t.zcaron=389,t.ncommaaccent=500,t.onesuperior=300,t.imacron=278,t.Euro=500})),t.ZapfDingbats=(0,i.getLookupTableFactory)((function(t){t.space=278,t.a1=974,t.a2=961,t.a202=974,t.a3=980,t.a4=719,t.a5=789,t.a119=790,t.a118=791,t.a117=690,t.a11=960,t.a12=939,t.a13=549,t.a14=855,t.a15=911,t.a16=933,t.a105=911,t.a17=945,t.a18=974,t.a19=755,t.a20=846,t.a21=762,t.a22=761,t.a23=571,t.a24=677,t.a25=763,t.a26=760,t.a27=759,t.a28=754,t.a6=494,t.a7=552,t.a8=537,t.a9=577,t.a10=692,t.a29=786,t.a30=788,t.a31=788,t.a32=790,t.a33=793,t.a34=794,t.a35=816,t.a36=823,t.a37=789,t.a38=841,t.a39=823,t.a40=833,t.a41=816,t.a42=831,t.a43=923,t.a44=744,t.a45=723,t.a46=749,t.a47=790,t.a48=792,t.a49=695,t.a50=776,t.a51=768,t.a52=792,t.a53=759,t.a54=707,t.a55=708,t.a56=682,t.a57=701,t.a58=826,t.a59=815,t.a60=789,t.a61=789,t.a62=707,t.a63=687,t.a64=696,t.a65=689,t.a66=786,t.a67=787,t.a68=713,t.a69=791,t.a70=785,t.a71=791,t.a72=873,t.a73=761,t.a74=762,t.a203=762,t.a75=759,t.a204=759,t.a76=892,t.a77=892,t.a78=788,t.a79=784,t.a81=438,t.a82=138,t.a83=277,t.a84=415,t.a97=392,t.a98=392,t.a99=668,t.a100=668,t.a89=390,t.a90=390,t.a93=317,t.a94=317,t.a91=276,t.a92=276,t.a205=509,t.a85=509,t.a206=410,t.a86=410,t.a87=234,t.a88=234,t.a95=334,t.a96=334,t.a101=732,t.a102=544,t.a103=544,t.a104=910,t.a106=667,t.a107=760,t.a108=760,t.a112=776,t.a111=595,t.a110=694,t.a109=626,t.a120=788,t.a121=788,t.a122=788,t.a123=788,t.a124=788,t.a125=788,t.a126=788,t.a127=788,t.a128=788,t.a129=788,t.a130=788,t.a131=788,t.a132=788,t.a133=788,t.a134=788,t.a135=788,t.a136=788,t.a137=788,t.a138=788,t.a139=788,t.a140=788,t.a141=788,t.a142=788,t.a143=788,t.a144=788,t.a145=788,t.a146=788,t.a147=788,t.a148=788,t.a149=788,t.a150=788,t.a151=788,t.a152=788,t.a153=788,t.a154=788,t.a155=788,t.a156=788,t.a157=788,t.a158=788,t.a159=788,t.a160=894,t.a161=838,t.a163=1016,t.a164=458,t.a196=748,t.a165=924,t.a192=748,t.a166=918,t.a167=927,t.a168=928,t.a169=928,t.a170=834,t.a171=873,t.a172=828,t.a173=924,t.a162=924,t.a174=917,t.a175=930,t.a176=931,t.a177=463,t.a178=883,t.a179=836,t.a193=836,t.a180=867,t.a199=867,t.a181=696,t.a200=696,t.a182=874,t.a201=874,t.a183=760,t.a184=946,t.a197=771,t.a185=865,t.a194=771,t.a198=888,t.a186=967,t.a195=888,t.a187=831,t.a188=873,t.a189=927,t.a190=970,t.a191=918}))}));r.getMetrics=o},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isPDFFunction=function isPDFFunction(t){var r;if("object"!==_typeof(t))return!1;if((0,o.isDict)(t))r=t;else{if(!(0,o.isStream)(t))return!1;r=t.dict}return r.has("FunctionType")},r.PostScriptCompiler=r.PostScriptEvaluator=r.PDFFunctionFactory=void 0;var i=a(5),o=a(198),l=a(235);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var c=function(){function PDFFunctionFactory(t){var r=t.xref,a=t.isEvalSupported,i=void 0===a||a;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFFunctionFactory),this.xref=r,this.isEvalSupported=!1!==i}return function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}(PDFFunctionFactory,[{key:"create",value:function create(t){return u.parse({xref:this.xref,isEvalSupported:this.isEvalSupported,fn:t})}},{key:"createFromArray",value:function createFromArray(t){return u.parseArray({xref:this.xref,isEvalSupported:this.isEvalSupported,fnObj:t})}}]),PDFFunctionFactory}();function toNumberArray(t){if(!Array.isArray(t))return null;for(var r=t.length,a=0;a<r;a++)if("number"!=typeof t[a]){for(var i=new Array(r),o=0;o<r;o++)i[o]=+t[o];return i}return t}r.PDFFunctionFactory=c;var u=function PDFFunctionClosure(){return{getSampleArray:function getSampleArray(t,r,a,i){var o,l,c=1;for(o=0,l=t.length;o<l;o++)c*=t[o];c*=r;var u=new Array(c),h=0,d=0,p=1/(Math.pow(2,a)-1),m=i.getBytes((c*a+7)/8),g=0;for(o=0;o<c;o++){for(;h<a;)d<<=8,d|=m[g++],h+=8;h-=a,u[o]=(d>>h)*p,d&=(1<<h)-1}return u},getIR:function getIR(t){var r=t.xref,a=t.isEvalSupported,o=t.fn,l=o.dict;l||(l=o);var c=[this.constructSampled,null,this.constructInterpolated,this.constructStiched,this.constructPostScript][l.get("FunctionType")];if(!c)throw new i.FormatError("Unknown type of function");return c.call(this,{xref:r,isEvalSupported:a,fn:o,dict:l})},fromIR:function fromIR(t){var r=t.xref,a=t.isEvalSupported,i=t.IR;switch(i[0]){case 0:return this.constructSampledFromIR({xref:r,isEvalSupported:a,IR:i});case 2:return this.constructInterpolatedFromIR({xref:r,isEvalSupported:a,IR:i});case 3:return this.constructStichedFromIR({xref:r,isEvalSupported:a,IR:i});default:return this.constructPostScriptFromIR({xref:r,isEvalSupported:a,IR:i})}},parse:function parse(t){var r=t.xref,a=t.isEvalSupported,i=t.fn,o=this.getIR({xref:r,isEvalSupported:a,fn:i});return this.fromIR({xref:r,isEvalSupported:a,IR:o})},parseArray:function parseArray(t){var r=t.xref,a=t.isEvalSupported,i=t.fnObj;if(!Array.isArray(i))return this.parse({xref:r,isEvalSupported:a,fn:i});for(var o=[],l=0,c=i.length;l<c;l++)o.push(this.parse({xref:r,isEvalSupported:a,fn:r.fetchIfRef(i[l])}));return function(t,r,a,i){for(var l=0,c=o.length;l<c;l++)o[l](t,r,a,i+l)}},constructSampled:function constructSampled(t){t.xref,t.isEvalSupported;var r=t.fn,a=t.dict;function toMultiArray(t){for(var r=t.length,a=[],i=0,o=0;o<r;o+=2)a[i]=[t[o],t[o+1]],++i;return a}var o=toNumberArray(a.getArray("Domain")),l=toNumberArray(a.getArray("Range"));if(!o||!l)throw new i.FormatError("No domain or range");var c=o.length/2,u=l.length/2;o=toMultiArray(o),l=toMultiArray(l);var h=toNumberArray(a.getArray("Size")),d=a.get("BitsPerSample"),p=a.get("Order")||1;1!==p&&(0,i.info)("No support for cubic spline interpolation: "+p);var m=toNumberArray(a.getArray("Encode"));if(m)m=toMultiArray(m);else{m=[];for(var g=0;g<c;++g)m.push([0,h[g]-1])}var b=toNumberArray(a.getArray("Decode"));return[0,c,o,m,b=b?toMultiArray(b):l,this.getSampleArray(h,u,d,r),h,u,Math.pow(2,d)-1,l]},constructSampledFromIR:function constructSampledFromIR(t){t.xref,t.isEvalSupported;var r=t.IR;function interpolate(t,r,a,i,o){return i+(o-i)/(a-r)*(t-r)}return function constructSampledFromIRResult(t,a,i,o){var l,c,u=r[1],h=r[2],d=r[3],p=r[4],m=r[5],g=r[6],b=r[7],y=r[9],v=1<<u,S=new Float64Array(v),k=new Uint32Array(v);for(c=0;c<v;c++)S[c]=1;var w=b,C=1;for(l=0;l<u;++l){var x=h[l][0],_=h[l][1],A=interpolate(Math.min(Math.max(t[a+l],x),_),x,_,d[l][0],d[l][1]),R=g[l],T=(A=Math.min(Math.max(A,0),R-1))<R-1?Math.floor(A):A-1,I=T+1-A,P=A-T,O=T*w,E=O+w;for(c=0;c<v;c++)c&C?(S[c]*=P,k[c]+=E):(S[c]*=I,k[c]+=O);w*=R,C<<=1}for(c=0;c<b;++c){var B=0;for(l=0;l<v;l++)B+=m[k[l]+c]*S[l];B=interpolate(B,0,1,p[c][0],p[c][1]),i[o+c]=Math.min(Math.max(B,y[c][0]),y[c][1])}}},constructInterpolated:function constructInterpolated(t){t.xref,t.isEvalSupported,t.fn;for(var r=t.dict,a=toNumberArray(r.getArray("C0"))||[0],i=toNumberArray(r.getArray("C1"))||[1],o=r.get("N"),l=a.length,c=[],u=0;u<l;++u)c.push(i[u]-a[u]);return[2,a,c,o]},constructInterpolatedFromIR:function constructInterpolatedFromIR(t){t.xref,t.isEvalSupported;var r=t.IR,a=r[1],i=r[2],o=r[3],l=i.length;return function constructInterpolatedFromIRResult(t,r,c,u){for(var h=1===o?t[r]:Math.pow(t[r],o),d=0;d<l;++d)c[u+d]=a[d]+h*i[d]}},constructStiched:function constructStiched(t){var r=t.xref,a=t.isEvalSupported,o=(t.fn,t.dict),l=toNumberArray(o.getArray("Domain"));if(!l)throw new i.FormatError("No domain");if(1!==l.length/2)throw new i.FormatError("Bad domain for stiched function");for(var c=o.get("Functions"),u=[],h=0,d=c.length;h<d;++h)u.push(this.parse({xref:r,isEvalSupported:a,fn:r.fetchIfRef(c[h])}));return[3,l,toNumberArray(o.getArray("Bounds")),toNumberArray(o.getArray("Encode")),u]},constructStichedFromIR:function constructStichedFromIR(t){t.xref,t.isEvalSupported;var r=t.IR,a=r[1],i=r[2],o=r[3],l=r[4],c=new Float32Array(1);return function constructStichedFromIRResult(t,r,u,h){for(var d=function constructStichedFromIRClip(t,r,a){return t>a?t=a:t<r&&(t=r),t}(t[r],a[0],a[1]),p=0,m=i.length;p<m&&!(d<i[p]);++p);var g=a[0];p>0&&(g=i[p-1]);var b=a[1];p<i.length&&(b=i[p]);var y=o[2*p],v=o[2*p+1];c[0]=g===b?y:y+(d-g)*(v-y)/(b-g),l[p](c,0,u,h)}},constructPostScript:function constructPostScript(t){t.xref,t.isEvalSupported;var r=t.fn,a=t.dict,o=toNumberArray(a.getArray("Domain")),c=toNumberArray(a.getArray("Range"));if(!o)throw new i.FormatError("No domain.");if(!c)throw new i.FormatError("No range.");var u=new l.PostScriptLexer(r);return[4,o,c,new l.PostScriptParser(u).parse()]},constructPostScriptFromIR:function constructPostScriptFromIR(t){t.xref;var r=t.isEvalSupported,a=t.IR,o=a[1],l=a[2],c=a[3];if(r&&i.IsEvalSupportedCached.value){var u=(new p).compile(c,o,l);if(u)return new Function("src","srcOffset","dest","destOffset",u)}(0,i.info)("Unable to compile PS function");var h=l.length>>1,m=o.length>>1,g=new d(c),b=Object.create(null),y=8192,v=new Float32Array(m);return function constructPostScriptFromIRResult(t,r,a,i){var o,c,u="",d=v;for(o=0;o<m;o++)c=t[r+o],d[o]=c,u+=c+"_";var p=b[u];if(void 0===p){var S=new Float32Array(h),k=g.execute(d),w=k.length-h;for(o=0;o<h;o++){c=k[w+o];var C=l[2*o];(c<C||c>(C=l[2*o+1]))&&(c=C),S[o]=c}y>0&&(y--,b[u]=S),a.set(S,i)}else a.set(p,i)}}}}();var h=function PostScriptStackClosure(){function PostScriptStack(t){this.stack=t?Array.prototype.slice.call(t,0):[]}return PostScriptStack.prototype={push:function PostScriptStack_push(t){if(this.stack.length>=100)throw new Error("PostScript function stack overflow.");this.stack.push(t)},pop:function PostScriptStack_pop(){if(this.stack.length<=0)throw new Error("PostScript function stack underflow.");return this.stack.pop()},copy:function PostScriptStack_copy(t){if(this.stack.length+t>=100)throw new Error("PostScript function stack overflow.");for(var r=this.stack,a=r.length-t,i=t-1;i>=0;i--,a++)r.push(r[a])},index:function PostScriptStack_index(t){this.push(this.stack[this.stack.length-t-1])},roll:function PostScriptStack_roll(t,r){var a,i,o,l=this.stack,c=l.length-t,u=l.length-1,h=c+(r-Math.floor(r/t)*t);for(a=c,i=u;a<i;a++,i--)o=l[a],l[a]=l[i],l[i]=o;for(a=c,i=h-1;a<i;a++,i--)o=l[a],l[a]=l[i],l[i]=o;for(a=h,i=u;a<i;a++,i--)o=l[a],l[a]=l[i],l[i]=o}},PostScriptStack}(),d=function PostScriptEvaluatorClosure(){function PostScriptEvaluator(t){this.operators=t}return PostScriptEvaluator.prototype={execute:function PostScriptEvaluator_execute(t){for(var r,a,o,l=new h(t),c=0,u=this.operators,d=u.length;c<d;)if("number"!=typeof(r=u[c++]))switch(r){case"jz":o=l.pop(),(a=l.pop())||(c=o);break;case"j":c=a=l.pop();break;case"abs":a=l.pop(),l.push(Math.abs(a));break;case"add":o=l.pop(),a=l.pop(),l.push(a+o);break;case"and":o=l.pop(),a=l.pop(),(0,i.isBool)(a)&&(0,i.isBool)(o)?l.push(a&&o):l.push(a&o);break;case"atan":a=l.pop(),l.push(Math.atan(a));break;case"bitshift":o=l.pop(),(a=l.pop())>0?l.push(a<<o):l.push(a>>o);break;case"ceiling":a=l.pop(),l.push(Math.ceil(a));break;case"copy":a=l.pop(),l.copy(a);break;case"cos":a=l.pop(),l.push(Math.cos(a));break;case"cvi":a=0|l.pop(),l.push(a);break;case"cvr":break;case"div":o=l.pop(),a=l.pop(),l.push(a/o);break;case"dup":l.copy(1);break;case"eq":o=l.pop(),a=l.pop(),l.push(a===o);break;case"exch":l.roll(2,1);break;case"exp":o=l.pop(),a=l.pop(),l.push(Math.pow(a,o));break;case"false":l.push(!1);break;case"floor":a=l.pop(),l.push(Math.floor(a));break;case"ge":o=l.pop(),a=l.pop(),l.push(a>=o);break;case"gt":o=l.pop(),a=l.pop(),l.push(a>o);break;case"idiv":o=l.pop(),a=l.pop(),l.push(a/o|0);break;case"index":a=l.pop(),l.index(a);break;case"le":o=l.pop(),a=l.pop(),l.push(a<=o);break;case"ln":a=l.pop(),l.push(Math.log(a));break;case"log":a=l.pop(),l.push(Math.log(a)/Math.LN10);break;case"lt":o=l.pop(),a=l.pop(),l.push(a<o);break;case"mod":o=l.pop(),a=l.pop(),l.push(a%o);break;case"mul":o=l.pop(),a=l.pop(),l.push(a*o);break;case"ne":o=l.pop(),a=l.pop(),l.push(a!==o);break;case"neg":a=l.pop(),l.push(-a);break;case"not":a=l.pop(),(0,i.isBool)(a)?l.push(!a):l.push(~a);break;case"or":o=l.pop(),a=l.pop(),(0,i.isBool)(a)&&(0,i.isBool)(o)?l.push(a||o):l.push(a|o);break;case"pop":l.pop();break;case"roll":o=l.pop(),a=l.pop(),l.roll(a,o);break;case"round":a=l.pop(),l.push(Math.round(a));break;case"sin":a=l.pop(),l.push(Math.sin(a));break;case"sqrt":a=l.pop(),l.push(Math.sqrt(a));break;case"sub":o=l.pop(),a=l.pop(),l.push(a-o);break;case"true":l.push(!0);break;case"truncate":a=(a=l.pop())<0?Math.ceil(a):Math.floor(a),l.push(a);break;case"xor":o=l.pop(),a=l.pop(),(0,i.isBool)(a)&&(0,i.isBool)(o)?l.push(a!==o):l.push(a^o);break;default:throw new i.FormatError("Unknown operator ".concat(r))}else l.push(r);return l.stack}},PostScriptEvaluator}();r.PostScriptEvaluator=d;var p=function PostScriptCompilerClosure(){function AstNode(t){this.type=t}function AstArgument(t,r,a){AstNode.call(this,"args"),this.index=t,this.min=r,this.max=a}function AstLiteral(t){AstNode.call(this,"literal"),this.number=t,this.min=t,this.max=t}function AstBinaryOperation(t,r,a,i,o){AstNode.call(this,"binary"),this.op=t,this.arg1=r,this.arg2=a,this.min=i,this.max=o}function AstMin(t,r){AstNode.call(this,"max"),this.arg=t,this.min=t.min,this.max=r}function AstVariable(t,r,a){AstNode.call(this,"var"),this.index=t,this.min=r,this.max=a}function AstVariableDefinition(t,r){AstNode.call(this,"definition"),this.variable=t,this.arg=r}function ExpressionBuilderVisitor(){this.parts=[]}function buildAddOperation(t,r){return"literal"===r.type&&0===r.number?t:"literal"===t.type&&0===t.number?r:"literal"===r.type&&"literal"===t.type?new AstLiteral(t.number+r.number):new AstBinaryOperation("+",t,r,t.min+r.min,t.max+r.max)}function buildMulOperation(t,r){if("literal"===r.type){if(0===r.number)return new AstLiteral(0);if(1===r.number)return t;if("literal"===t.type)return new AstLiteral(t.number*r.number)}if("literal"===t.type){if(0===t.number)return new AstLiteral(0);if(1===t.number)return r}return new AstBinaryOperation("*",t,r,Math.min(t.min*r.min,t.min*r.max,t.max*r.min,t.max*r.max),Math.max(t.min*r.min,t.min*r.max,t.max*r.min,t.max*r.max))}function buildSubOperation(t,r){if("literal"===r.type){if(0===r.number)return t;if("literal"===t.type)return new AstLiteral(t.number-r.number)}return"binary"===r.type&&"-"===r.op&&"literal"===t.type&&1===t.number&&"literal"===r.arg1.type&&1===r.arg1.number?r.arg2:new AstBinaryOperation("-",t,r,t.min-r.max,t.max-r.min)}function buildMinOperation(t,r){return t.min>=r?new AstLiteral(r):t.max<=r?t:new AstMin(t,r)}function PostScriptCompiler(){}return AstNode.prototype.visit=function(t){(0,i.unreachable)("abstract method")},AstArgument.prototype=Object.create(AstNode.prototype),AstArgument.prototype.visit=function(t){t.visitArgument(this)},AstLiteral.prototype=Object.create(AstNode.prototype),AstLiteral.prototype.visit=function(t){t.visitLiteral(this)},AstBinaryOperation.prototype=Object.create(AstNode.prototype),AstBinaryOperation.prototype.visit=function(t){t.visitBinaryOperation(this)},AstMin.prototype=Object.create(AstNode.prototype),AstMin.prototype.visit=function(t){t.visitMin(this)},AstVariable.prototype=Object.create(AstNode.prototype),AstVariable.prototype.visit=function(t){t.visitVariable(this)},AstVariableDefinition.prototype=Object.create(AstNode.prototype),AstVariableDefinition.prototype.visit=function(t){t.visitVariableDefinition(this)},ExpressionBuilderVisitor.prototype={visitArgument:function visitArgument(t){this.parts.push("Math.max(",t.min,", Math.min(",t.max,", src[srcOffset + ",t.index,"]))")},visitVariable:function visitVariable(t){this.parts.push("v",t.index)},visitLiteral:function visitLiteral(t){this.parts.push(t.number)},visitBinaryOperation:function visitBinaryOperation(t){this.parts.push("("),t.arg1.visit(this),this.parts.push(" ",t.op," "),t.arg2.visit(this),this.parts.push(")")},visitVariableDefinition:function visitVariableDefinition(t){this.parts.push("var "),t.variable.visit(this),this.parts.push(" = "),t.arg.visit(this),this.parts.push(";")},visitMin:function visitMin(t){this.parts.push("Math.min("),t.arg.visit(this),this.parts.push(", ",t.max,")")},toString:function toString(){return this.parts.join("")}},PostScriptCompiler.prototype={compile:function PostScriptCompiler_compile(t,r,a){for(var i,o,l,c,u,h,d,p,m=[],g=[],b=r.length>>1,y=a.length>>1,v=0,S=0;S<b;S++)m.push(new AstArgument(S,r[2*S],r[2*S+1]));for(var k=0,w=t.length;k<w;k++)if("number"!=typeof(p=t[k]))switch(p){case"add":if(m.length<2)return null;c=m.pop(),l=m.pop(),m.push(buildAddOperation(l,c));break;case"cvr":if(m.length<1)return null;break;case"mul":if(m.length<2)return null;c=m.pop(),l=m.pop(),m.push(buildMulOperation(l,c));break;case"sub":if(m.length<2)return null;c=m.pop(),l=m.pop(),m.push(buildSubOperation(l,c));break;case"exch":if(m.length<2)return null;u=m.pop(),h=m.pop(),m.push(u,h);break;case"pop":if(m.length<1)return null;m.pop();break;case"index":if(m.length<1)return null;if("literal"!==(l=m.pop()).type)return null;if((i=l.number)<0||!Number.isInteger(i)||m.length<i)return null;if("literal"===(u=m[m.length-i-1]).type||"var"===u.type){m.push(u);break}d=new AstVariable(v++,u.min,u.max),m[m.length-i-1]=d,m.push(d),g.push(new AstVariableDefinition(d,u));break;case"dup":if(m.length<1)return null;if("number"==typeof t[k+1]&&"gt"===t[k+2]&&t[k+3]===k+7&&"jz"===t[k+4]&&"pop"===t[k+5]&&t[k+6]===t[k+1]){l=m.pop(),m.push(buildMinOperation(l,t[k+1])),k+=6;break}if("literal"===(u=m[m.length-1]).type||"var"===u.type){m.push(u);break}d=new AstVariable(v++,u.min,u.max),m[m.length-1]=d,m.push(d),g.push(new AstVariableDefinition(d,u));break;case"roll":if(m.length<2)return null;if(c=m.pop(),l=m.pop(),"literal"!==c.type||"literal"!==l.type)return null;if(o=c.number,(i=l.number)<=0||!Number.isInteger(i)||!Number.isInteger(o)||m.length<i)return null;if(0===(o=(o%i+i)%i))break;Array.prototype.push.apply(m,m.splice(m.length-i,i-o));break;default:return null}else m.push(new AstLiteral(p));if(m.length!==y)return null;var C=[];return g.forEach((function(t){var r=new ExpressionBuilderVisitor;t.visit(r),C.push(r.toString())})),m.forEach((function(t,r){var i=new ExpressionBuilderVisitor;t.visit(i);var o=a[2*r],l=a[2*r+1],c=[i.toString()];o>t.min&&(c.unshift("Math.max(",o,", "),c.push(")")),l<t.max&&(c.unshift("Math.min(",l,", "),c.push(")")),c.unshift("dest[destOffset + ",r,"] = "),c.push(";"),C.push(c.join(""))})),C.join("\n")}},PostScriptCompiler}();r.PostScriptCompiler=p},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PostScriptParser=r.PostScriptLexer=void 0;var i=a(5),o=a(198),l=a(201);function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}var c=function(){function PostScriptParser(t){_classCallCheck(this,PostScriptParser),this.lexer=t,this.operators=[],this.token=null,this.prev=null}return _createClass(PostScriptParser,[{key:"nextToken",value:function nextToken(){this.prev=this.token,this.token=this.lexer.getToken()}},{key:"accept",value:function accept(t){return this.token.type===t&&(this.nextToken(),!0)}},{key:"expect",value:function expect(t){if(this.accept(t))return!0;throw new i.FormatError("Unexpected symbol: found ".concat(this.token.type," expected ").concat(t,"."))}},{key:"parse",value:function parse(){return this.nextToken(),this.expect(u.LBRACE),this.parseBlock(),this.expect(u.RBRACE),this.operators}},{key:"parseBlock",value:function parseBlock(){for(;;)if(this.accept(u.NUMBER))this.operators.push(this.prev.value);else if(this.accept(u.OPERATOR))this.operators.push(this.prev.value);else{if(!this.accept(u.LBRACE))return;this.parseCondition()}}},{key:"parseCondition",value:function parseCondition(){var t=this.operators.length;if(this.operators.push(null,null),this.parseBlock(),this.expect(u.RBRACE),this.accept(u.IF))this.operators[t]=this.operators.length,this.operators[t+1]="jz";else{if(!this.accept(u.LBRACE))throw new i.FormatError("PS Function: error parsing conditional.");var r=this.operators.length;this.operators.push(null,null);var a=this.operators.length;this.parseBlock(),this.expect(u.RBRACE),this.expect(u.IFELSE),this.operators[r]=this.operators.length,this.operators[r+1]="j",this.operators[t]=a,this.operators[t+1]="jz"}}}]),PostScriptParser}();r.PostScriptParser=c;var u={LBRACE:0,RBRACE:1,NUMBER:2,OPERATOR:3,IF:4,IFELSE:5},h=function PostScriptTokenClosure(){var t=Object.create(null);return function(){function PostScriptToken(t,r){_classCallCheck(this,PostScriptToken),this.type=t,this.value=r}return _createClass(PostScriptToken,null,[{key:"getOperator",value:function getOperator(r){var a=t[r];return a||(t[r]=new PostScriptToken(u.OPERATOR,r))}},{key:"LBRACE",get:function get(){return(0,i.shadow)(this,"LBRACE",new PostScriptToken(u.LBRACE,"{"))}},{key:"RBRACE",get:function get(){return(0,i.shadow)(this,"RBRACE",new PostScriptToken(u.RBRACE,"}"))}},{key:"IF",get:function get(){return(0,i.shadow)(this,"IF",new PostScriptToken(u.IF,"IF"))}},{key:"IFELSE",get:function get(){return(0,i.shadow)(this,"IFELSE",new PostScriptToken(u.IFELSE,"IFELSE"))}}]),PostScriptToken}()}(),d=function(){function PostScriptLexer(t){_classCallCheck(this,PostScriptLexer),this.stream=t,this.nextChar(),this.strBuf=[]}return _createClass(PostScriptLexer,[{key:"nextChar",value:function nextChar(){return this.currentChar=this.stream.getByte()}},{key:"getToken",value:function getToken(){for(var t=!1,r=this.currentChar;;){if(r<0)return o.EOF;if(t)10!==r&&13!==r||(t=!1);else if(37===r)t=!0;else if(!(0,l.isWhiteSpace)(r))break;r=this.nextChar()}switch(0|r){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 43:case 45:case 46:return new h(u.NUMBER,this.getNumber());case 123:return this.nextChar(),h.LBRACE;case 125:return this.nextChar(),h.RBRACE}var a=this.strBuf;for(a.length=0,a[0]=String.fromCharCode(r);(r=this.nextChar())>=0&&(r>=65&&r<=90||r>=97&&r<=122);)a.push(String.fromCharCode(r));var i=a.join("");switch(i.toLowerCase()){case"if":return h.IF;case"ifelse":return h.IFELSE;default:return h.getOperator(i)}}},{key:"getNumber",value:function getNumber(){var t=this.currentChar,r=this.strBuf;for(r.length=0,r[0]=String.fromCharCode(t);(t=this.nextChar())>=0&&(t>=48&&t<=57||45===t||46===t);)r.push(String.fromCharCode(t));var a=parseFloat(r.join(""));if(isNaN(a))throw new i.FormatError("Invalid floating point number: ".concat(a));return a}}]),PostScriptLexer}();r.PostScriptLexer=d},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MurmurHash3_64=void 0;var i=a(5);function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o=3285377520,l=4294901760,c=65535,u=function(){function MurmurHash3_64(t){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,MurmurHash3_64),this.h1=t?4294967295&t:o,this.h2=t?4294967295&t:o}return function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}(MurmurHash3_64,[{key:"update",value:function update(t){var r,a;if((0,i.isString)(t)){r=new Uint8Array(2*t.length),a=0;for(var o=0,u=t.length;o<u;o++){var h=t.charCodeAt(o);h<=255?r[a++]=h:(r[a++]=h>>>8,r[a++]=255&h)}}else{if(!(0,i.isArrayBuffer)(t))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");a=(r=t).byteLength}for(var d=a>>2,p=a-4*d,m=new Uint32Array(r.buffer,0,d),g=0,b=0,y=this.h1,v=this.h2,S=3432918353,k=461845907,w=11601,C=13715,x=0;x<d;x++)1&x?y=5*(y=(y^=g=(g=(g=(g=m[x])*S&l|g*w&c)<<15|g>>>17)*k&l|g*C&c)<<13|y>>>19)+3864292196:v=5*(v=(v^=b=(b=(b=(b=m[x])*S&l|b*w&c)<<15|b>>>17)*k&l|b*C&c)<<13|v>>>19)+3864292196;switch(g=0,p){case 3:g^=r[4*d+2]<<16;case 2:g^=r[4*d+1]<<8;case 1:g=(g=(g=(g^=r[4*d])*S&l|g*w&c)<<15|g>>>17)*k&l|g*C&c,1&d?y^=g:v^=g}this.h1=y,this.h2=v}},{key:"hexdigest",value:function hexdigest(){var t=this.h1,r=this.h2;t=3981806797*(t^=r>>>1)&l|36045*t&c,t=444984403*(t^=(r=4283543511*r&l|(2950163797*(r<<16|t>>>16)&l)>>>16)>>>1)&l|60499*t&c;var a=((t^=(r=3301882366*r&l|(3120437893*(r<<16|t>>>16)&l)>>>16)>>>1)>>>0).toString(16),i=(r>>>0).toString(16);return a.padStart(8,"0")+i.padStart(8,"0")}}]),MurmurHash3_64}();r.MurmurHash3_64=u},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PDFImage=void 0;var i=a(5),o=a(198),l=a(216),c=a(205),u=a(211),h=a(214),d=function PDFImageClosure(){function decodeAndClamp(t,r,a,i){return(t=r+t*a)<0?t=0:t>i&&(t=i),t}function resizeImageMask(t,r,a,i,o,l){var c,u=o*l;c=r<=8?new Uint8Array(u):r<=16?new Uint16Array(u):new Uint32Array(u);var h,d,p,m,g=a/o,b=i/l,y=0,v=new Uint16Array(o),S=a;for(h=0;h<o;h++)v[h]=Math.floor(h*g);for(h=0;h<l;h++)for(p=Math.floor(h*b)*S,d=0;d<o;d++)m=p+v[d],c[y++]=t[m];return c}function PDFImage(t){var r=t.xref,a=t.res,c=t.image,u=t.isInline,d=void 0!==u&&u,p=t.smask,m=void 0===p?null:p,g=t.mask,b=void 0===g?null:g,y=t.isMask,v=void 0!==y&&y,S=t.pdfFunctionFactory;this.image=c;var k=c.dict,w=k.get("Filter");if((0,o.isName)(w))switch(w.name){case"JPXDecode":var C=new h.JpxImage;C.parseImageProperties(c.stream),c.stream.reset(),c.width=C.width,c.height=C.height,c.bitsPerComponent=C.bitsPerComponent,c.numComps=C.componentsCount;break;case"JBIG2Decode":c.bitsPerComponent=1,c.numComps=1}var x=k.get("Width","W"),_=k.get("Height","H");if(Number.isInteger(c.width)&&c.width>0&&Number.isInteger(c.height)&&c.height>0&&(c.width!==x||c.height!==_)&&((0,i.warn)("PDFImage - using the Width/Height of the image data, rather than the image dictionary."),x=c.width,_=c.height),x<1||_<1)throw new i.FormatError("Invalid image width: ".concat(x," or height: ").concat(_));this.width=x,this.height=_,this.interpolate=k.get("Interpolate","I")||!1,this.imageMask=k.get("ImageMask","IM")||!1,this.matte=k.get("Matte")||!1;var A=c.bitsPerComponent;if(!A&&!(A=k.get("BitsPerComponent","BPC"))){if(!this.imageMask)throw new i.FormatError("Bits per component missing in image: ".concat(this.imageMask));A=1}if(this.bpc=A,!this.imageMask){var R=k.get("ColorSpace","CS");if(!R)switch((0,i.info)("JPX images (which do not require color spaces)"),c.numComps){case 1:R=o.Name.get("DeviceGray");break;case 3:R=o.Name.get("DeviceRGB");break;case 4:R=o.Name.get("DeviceCMYK");break;default:throw new Error("JPX images with ".concat(c.numComps," ")+"color components not supported.")}var T=d?a:null;this.colorSpace=l.ColorSpace.parse(R,r,T,S),this.numComps=this.colorSpace.numComps}if(this.decode=k.getArray("Decode","D"),this.needsDecode=!1,this.decode&&(this.colorSpace&&!this.colorSpace.isDefaultDecode(this.decode,A)||v&&!l.ColorSpace.isDefaultDecode(this.decode,1))){this.needsDecode=!0;var I=(1<<A)-1;this.decodeCoefficients=[],this.decodeAddends=[];for(var P=this.colorSpace&&"Indexed"===this.colorSpace.name,O=0,E=0;O<this.decode.length;O+=2,++E){var B=this.decode[O],D=this.decode[O+1];this.decodeCoefficients[E]=P?(D-B)/I:D-B,this.decodeAddends[E]=P?B:I*B}}if(m)this.smask=new PDFImage({xref:r,res:a,image:m,isInline:d,pdfFunctionFactory:S});else if(b){if((0,o.isStream)(b))b.dict.get("ImageMask","IM")?this.mask=new PDFImage({xref:r,res:a,image:b,isInline:d,isMask:!0,pdfFunctionFactory:S}):(0,i.warn)("Ignoring /Mask in image without /ImageMask.");else this.mask=b}}return PDFImage.buildImage=function(t){var r=t.xref,a=t.res,l=t.image,c=t.isInline,u=void 0!==c&&c,h=t.pdfFunctionFactory,d=l,p=null,m=null,g=l.dict.get("SMask"),b=l.dict.get("Mask");return g?p=g:b&&((0,o.isStream)(b)||Array.isArray(b)?m=b:(0,i.warn)("Unsupported mask format.")),Promise.resolve(new PDFImage({xref:r,res:a,image:d,isInline:u,smask:p,mask:m,pdfFunctionFactory:h}))},PDFImage.createMask=function(t){var r,a,i=t.imgArray,o=t.width,l=t.height,c=t.imageIsFromDecodeStream,u=t.inverseDecode,h=(o+7>>3)*l,d=i.byteLength;if(!c||u&&!(h===d))if(u)for((r=new Uint8ClampedArray(h)).set(i),a=d;a<h;a++)r[a]=255;else(r=new Uint8ClampedArray(d)).set(i);else r=i;if(u)for(a=0;a<d;a++)r[a]^=255;return{data:r,width:o,height:l}},PDFImage.prototype={get drawWidth(){return Math.max(this.width,this.smask&&this.smask.width||0,this.mask&&this.mask.width||0)},get drawHeight(){return Math.max(this.height,this.smask&&this.smask.height||0,this.mask&&this.mask.height||0)},decodeBuffer:function decodeBuffer(t){var r,a,i=this.bpc,o=this.numComps,l=this.decodeAddends,c=this.decodeCoefficients,u=(1<<i)-1;if(1!==i){var h=0;for(r=0,a=this.width*this.height;r<a;r++)for(var d=0;d<o;d++)t[h]=decodeAndClamp(t[h],l[d],c[d],u),h++}else for(r=0,a=t.length;r<a;r++)t[r]=+!t[r]},getComponents:function getComponents(t){var r=this.bpc;if(8===r)return t;var a,i=this.width,o=this.height,l=this.numComps,c=i*o*l,u=0;a=r<=8?new Uint8Array(c):r<=16?new Uint16Array(c):new Uint32Array(c);var h,d,p=i*l,m=(1<<r)-1,g=0;if(1===r)for(var b,y,v,S=0;S<o;S++){for(y=g+(-8&p),v=g+p;g<y;)d=t[u++],a[g]=d>>7&1,a[g+1]=d>>6&1,a[g+2]=d>>5&1,a[g+3]=d>>4&1,a[g+4]=d>>3&1,a[g+5]=d>>2&1,a[g+6]=d>>1&1,a[g+7]=1&d,g+=8;if(g<v)for(d=t[u++],b=128;g<v;)a[g++]=+!!(d&b),b>>=1}else{var k=0;for(d=0,g=0,h=c;g<h;++g){for(g%p==0&&(d=0,k=0);k<r;)d=d<<8|t[u++],k+=8;var w=k-r,C=d>>w;C<0?C=0:C>m&&(C=m),a[g]=C,d&=(1<<w)-1,k=w}}return a},fillOpacity:function fillOpacity(t,r,a,o,l){var c,u,h,d,p,m,g=this.smask,b=this.mask;if(g)u=g.width,h=g.height,c=new Uint8ClampedArray(u*h),g.fillGrayBuffer(c),u===r&&h===a||(c=resizeImageMask(c,g.bpc,u,h,r,a));else if(b)if(b instanceof PDFImage){for(u=b.width,h=b.height,c=new Uint8ClampedArray(u*h),b.numComps=1,b.fillGrayBuffer(c),d=0,p=u*h;d<p;++d)c[d]=255-c[d];u===r&&h===a||(c=resizeImageMask(c,b.bpc,u,h,r,a))}else{if(!Array.isArray(b))throw new i.FormatError("Unknown mask format.");c=new Uint8ClampedArray(r*a);var y=this.numComps;for(d=0,p=r*a;d<p;++d){var v=0,S=d*y;for(m=0;m<y;++m){var k=l[S+m],w=2*m;if(k<b[w]||k>b[w+1]){v=255;break}}c[d]=v}}if(c)for(d=0,m=3,p=r*o;d<p;++d,m+=4)t[m]=c[d];else for(d=0,m=3,p=r*o;d<p;++d,m+=4)t[m]=255},undoPreblend:function undoPreblend(t,r,a){var i=this.smask&&this.smask.matte;if(i)for(var o=this.colorSpace.getRgb(i,0),l=o[0],c=o[1],u=o[2],h=r*a*4,d=0;d<h;d+=4){var p=t[d+3];if(0!==p){var m=255/p;t[d]=(t[d]-l)*m+l,t[d+1]=(t[d+1]-c)*m+c,t[d+2]=(t[d+2]-u)*m+u}else t[d]=255,t[d+1]=255,t[d+2]=255}},createImageData:function createImageData(){var t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=this.drawWidth,o=this.drawHeight,l={width:a,height:o,kind:0,data:null},h=this.numComps,d=this.width,p=this.height,m=this.bpc,g=d*h*m+7>>3;if(!r){var b;if("DeviceGray"===this.colorSpace.name&&1===m?b=i.ImageKind.GRAYSCALE_1BPP:"DeviceRGB"!==this.colorSpace.name||8!==m||this.needsDecode||(b=i.ImageKind.RGB_24BPP),b&&!this.smask&&!this.mask&&a===d&&o===p){if(l.kind=b,t=this.getImageBytes(p*g),this.image instanceof c.DecodeStream)l.data=t;else{var y=new Uint8ClampedArray(t.length);y.set(t),l.data=y}if(this.needsDecode){(0,i.assert)(b===i.ImageKind.GRAYSCALE_1BPP,"PDFImage.createImageData: The image must be grayscale.");for(var v=l.data,S=0,k=v.length;S<k;S++)v[S]^=255}return l}if(this.image instanceof u.JpegStream&&!this.smask&&!this.mask){var w=p*g;switch(this.colorSpace.name){case"DeviceGray":w*=3;case"DeviceRGB":case"DeviceCMYK":return l.kind=i.ImageKind.RGB_24BPP,l.data=this.getImageBytes(w,a,o,!0),l}}}var C,x,_=0|(t=this.getImageBytes(p*g)).length/g*o/p,A=this.getComponents(t);return r||this.smask||this.mask?(l.kind=i.ImageKind.RGBA_32BPP,l.data=new Uint8ClampedArray(a*o*4),C=1,x=!0,this.fillOpacity(l.data,a,o,_,A)):(l.kind=i.ImageKind.RGB_24BPP,l.data=new Uint8ClampedArray(a*o*3),C=0,x=!1),this.needsDecode&&this.decodeBuffer(A),this.colorSpace.fillRgb(l.data,d,p,a,o,_,m,A,C),x&&this.undoPreblend(l.data,a,_),l},fillGrayBuffer:function fillGrayBuffer(t){var r=this.numComps;if(1!==r)throw new i.FormatError("Reading gray scale from a color image: ".concat(r));var a,o,l=this.width,c=this.height,u=this.bpc,h=l*r*u+7>>3,d=this.getImageBytes(c*h),p=this.getComponents(d);if(1!==u){this.needsDecode&&this.decodeBuffer(p),o=l*c;var m=255/((1<<u)-1);for(a=0;a<o;++a)t[a]=m*p[a]}else if(o=l*c,this.needsDecode)for(a=0;a<o;++a)t[a]=p[a]-1&255;else for(a=0;a<o;++a)t[a]=255&-p[a]},getImageBytes:function getImageBytes(t,r,a){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.image.reset(),this.image.drawWidth=r||this.width,this.image.drawHeight=a||this.height,this.image.forceRGB=!!i,this.image.getBytes(t,!0)}},PDFImage}();r.PDFImage=d},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MessageHandler=void 0;var i=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(2)),o=a(5);function asyncGeneratorStep(t,r,a,i,o,l,c){try{var u=t[l](c),h=u.value}catch(t){return void a(t)}u.done?r(h):Promise.resolve(h).then(i,o)}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var l=1,c=2,u=1,h=2,d=3,p=4,m=5,g=6,b=7,y=8;function wrapReason(t){if("object"!==_typeof(t)||null===t)return t;switch(t.name){case"AbortException":return new o.AbortException(t.message);case"MissingPDFException":return new o.MissingPDFException(t.message);case"UnexpectedResponseException":return new o.UnexpectedResponseException(t.message,t.status);case"UnknownErrorException":return new o.UnknownErrorException(t.message,t.details);default:return new o.UnknownErrorException(t.message,t.toString())}}var v=function(){function MessageHandler(t,r,a){var i=this;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,MessageHandler),this.sourceName=t,this.targetName=r,this.comObj=a,this.callbackId=1,this.streamId=1,this.postMessageTransfers=!0,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=function(t){var r=t.data;if(r.targetName===i.sourceName)if(r.stream)i._processStreamMessage(r);else if(r.callback){var o=r.callbackId,u=i.callbackCapabilities[o];if(!u)throw new Error("Cannot resolve callback ".concat(o));if(delete i.callbackCapabilities[o],r.callback===l)u.resolve(r.data);else{if(r.callback!==c)throw new Error("Unexpected callback case");u.reject(wrapReason(r.reason))}}else{var h=i.actionHandler[r.action];if(!h)throw new Error("Unknown action from worker: ".concat(r.action));if(r.callbackId){var d=i.sourceName,p=r.sourceName;new Promise((function(t){t(h(r.data))})).then((function(t){a.postMessage({sourceName:d,targetName:p,callback:l,callbackId:r.callbackId,data:t})}),(function(t){a.postMessage({sourceName:d,targetName:p,callback:c,callbackId:r.callbackId,reason:wrapReason(t)})}))}else r.streamId?i._createStreamSink(r):h(r.data)}},a.addEventListener("message",this._onComObjOnMessage)}var t;return function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}(MessageHandler,[{key:"on",value:function on(t,r){var a=this.actionHandler;if(a[t])throw new Error('There is already an actionName called "'.concat(t,'"'));a[t]=r}},{key:"send",value:function send(t,r,a){this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:r},a)}},{key:"sendWithPromise",value:function sendWithPromise(t,r,a){var i=this.callbackId++,l=(0,o.createPromiseCapability)();this.callbackCapabilities[i]=l;try{this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:r},a)}catch(t){l.reject(t)}return l.promise}},{key:"sendWithStream",value:function sendWithStream(t,r,a,i){var l=this,c=this.streamId++,h=this.sourceName,d=this.targetName,p=this.comObj;return new ReadableStream({start:function start(a){var u=(0,o.createPromiseCapability)();return l.streamControllers[c]={controller:a,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},l._postMessage({sourceName:h,targetName:d,action:t,streamId:c,data:r,desiredSize:a.desiredSize},i),u.promise},pull:function pull(t){var r=(0,o.createPromiseCapability)();return l.streamControllers[c].pullCall=r,p.postMessage({sourceName:h,targetName:d,stream:g,streamId:c,desiredSize:t.desiredSize}),r.promise},cancel:function cancel(t){(0,o.assert)(t instanceof Error,"cancel must have a valid reason");var r=(0,o.createPromiseCapability)();return l.streamControllers[c].cancelCall=r,l.streamControllers[c].isClosed=!0,p.postMessage({sourceName:h,targetName:d,stream:u,streamId:c,reason:wrapReason(t)}),r.promise}},a)}},{key:"_createStreamSink",value:function _createStreamSink(t){var r=this,a=this.actionHandler[t.action],i=t.streamId,l=this.sourceName,c=t.sourceName,u=this.comObj,h={enqueue:function enqueue(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,u=arguments.length>2?arguments[2]:void 0;if(!this.isCancelled){var h=this.desiredSize;this.desiredSize-=a,h>0&&this.desiredSize<=0&&(this.sinkCapability=(0,o.createPromiseCapability)(),this.ready=this.sinkCapability.promise),r._postMessage({sourceName:l,targetName:c,stream:p,streamId:i,chunk:t},u)}},close:function close(){this.isCancelled||(this.isCancelled=!0,u.postMessage({sourceName:l,targetName:c,stream:d,streamId:i}),delete r.streamSinks[i])},error:function error(t){(0,o.assert)(t instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,u.postMessage({sourceName:l,targetName:c,stream:m,streamId:i,reason:wrapReason(t)}))},sinkCapability:(0,o.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[i]=h,new Promise((function(r){r(a(t.data,h))})).then((function(){u.postMessage({sourceName:l,targetName:c,stream:y,streamId:i,success:!0})}),(function(t){u.postMessage({sourceName:l,targetName:c,stream:y,streamId:i,reason:wrapReason(t)})}))}},{key:"_processStreamMessage",value:function _processStreamMessage(t){var r=t.streamId,a=this.sourceName,i=t.sourceName,l=this.comObj;switch(t.stream){case y:t.success?this.streamControllers[r].startCall.resolve():this.streamControllers[r].startCall.reject(wrapReason(t.reason));break;case b:t.success?this.streamControllers[r].pullCall.resolve():this.streamControllers[r].pullCall.reject(wrapReason(t.reason));break;case g:if(!this.streamSinks[r]){l.postMessage({sourceName:a,targetName:i,stream:b,streamId:r,success:!0});break}this.streamSinks[r].desiredSize<=0&&t.desiredSize>0&&this.streamSinks[r].sinkCapability.resolve(),this.streamSinks[r].desiredSize=t.desiredSize;var c=this.streamSinks[t.streamId].onPull;new Promise((function(t){t(c&&c())})).then((function(){l.postMessage({sourceName:a,targetName:i,stream:b,streamId:r,success:!0})}),(function(t){l.postMessage({sourceName:a,targetName:i,stream:b,streamId:r,reason:wrapReason(t)})}));break;case p:if((0,o.assert)(this.streamControllers[r],"enqueue should have stream controller"),this.streamControllers[r].isClosed)break;this.streamControllers[r].controller.enqueue(t.chunk);break;case d:if((0,o.assert)(this.streamControllers[r],"close should have stream controller"),this.streamControllers[r].isClosed)break;this.streamControllers[r].isClosed=!0,this.streamControllers[r].controller.close(),this._deleteStreamController(r);break;case m:(0,o.assert)(this.streamControllers[r],"error should have stream controller"),this.streamControllers[r].controller.error(wrapReason(t.reason)),this._deleteStreamController(r);break;case h:t.success?this.streamControllers[r].cancelCall.resolve():this.streamControllers[r].cancelCall.reject(wrapReason(t.reason)),this._deleteStreamController(r);break;case u:if(!this.streamSinks[r])break;var v=this.streamSinks[t.streamId].onCancel;new Promise((function(r){r(v&&v(wrapReason(t.reason)))})).then((function(){l.postMessage({sourceName:a,targetName:i,stream:h,streamId:r,success:!0})}),(function(t){l.postMessage({sourceName:a,targetName:i,stream:h,streamId:r,reason:wrapReason(t)})})),this.streamSinks[r].sinkCapability.reject(wrapReason(t.reason)),this.streamSinks[r].isCancelled=!0,delete this.streamSinks[r];break;default:throw new Error("Unexpected stream case")}}},{key:"_deleteStreamController",value:(t=function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}(i.default.mark((function _callee(t){return i.default.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Promise.allSettled([this.streamControllers[t].startCall,this.streamControllers[t].pullCall,this.streamControllers[t].cancelCall].map((function(t){return t&&t.promise})));case 2:delete this.streamControllers[t];case 3:case"end":return r.stop()}}),_callee,this)}))),function _deleteStreamController(r){return t.apply(this,arguments)})},{key:"_postMessage",value:function _postMessage(t,r){r&&this.postMessageTransfers?this.comObj.postMessage(t,r):this.comObj.postMessage(t)}},{key:"destroy",value:function destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}]),MessageHandler}();r.MessageHandler=v},function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PDFWorkerStream=void 0;var i=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(2)),o=a(5);function asyncGeneratorStep(t,r,a,i,o,l,c){try{var u=t[l](c),h=u.value}catch(t){return void a(t)}u.done?r(h):Promise.resolve(h).then(i,o)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),t}var l=function(){function PDFWorkerStream(t){_classCallCheck(this,PDFWorkerStream),this._msgHandler=t,this._contentLength=null,this._fullRequestReader=null,this._rangeRequestReaders=[]}return _createClass(PDFWorkerStream,[{key:"getFullReader",value:function getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFWorkerStream.getFullReader can only be called once."),this._fullRequestReader=new c(this._msgHandler),this._fullRequestReader}},{key:"getRangeReader",value:function getRangeReader(t,r){var a=new u(t,r,this._msgHandler);return this._rangeRequestReaders.push(a),a}},{key:"cancelAllRequests",value:function cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t),this._rangeRequestReaders.slice(0).forEach((function(r){r.cancel(t)}))}}]),PDFWorkerStream}();r.PDFWorkerStream=l;var c=function(){function PDFWorkerStreamReader(t){var r=this;_classCallCheck(this,PDFWorkerStreamReader),this._msgHandler=t,this.onProgress=null,this._contentLength=null,this._isRangeSupported=!1,this._isStreamingSupported=!1;var a=this._msgHandler.sendWithStream("GetReader");this._reader=a.getReader(),this._headersReady=this._msgHandler.sendWithPromise("ReaderHeadersReady").then((function(t){r._isStreamingSupported=t.isStreamingSupported,r._isRangeSupported=t.isRangeSupported,r._contentLength=t.contentLength}))}var t;return _createClass(PDFWorkerStreamReader,[{key:"read",value:(t=_asyncToGenerator(i.default.mark((function _callee(){var t,r;return i.default.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this._reader.read();case 2:if(t=a.sent,r=t.value,!t.done){a.next=7;break}return a.abrupt("return",{value:void 0,done:!0});case 7:return a.abrupt("return",{value:r.buffer,done:!1});case 8:case"end":return a.stop()}}),_callee,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._reader.cancel(t)}},{key:"headersReady",get:function get(){return this._headersReady}},{key:"contentLength",get:function get(){return this._contentLength}},{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported}},{key:"isRangeSupported",get:function get(){return this._isRangeSupported}}]),PDFWorkerStreamReader}(),u=function(){function PDFWorkerStreamRangeReader(t,r,a){_classCallCheck(this,PDFWorkerStreamRangeReader),this._msgHandler=a,this.onProgress=null;var i=this._msgHandler.sendWithStream("GetRangeReader",{begin:t,end:r});this._reader=i.getReader()}var t;return _createClass(PDFWorkerStreamRangeReader,[{key:"read",value:(t=_asyncToGenerator(i.default.mark((function _callee2(){var t,r;return i.default.wrap((function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this._reader.read();case 2:if(t=a.sent,r=t.value,!t.done){a.next=7;break}return a.abrupt("return",{value:void 0,done:!0});case 7:return a.abrupt("return",{value:r.buffer,done:!1});case 8:case"end":return a.stop()}}),_callee2,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._reader.cancel(t)}},{key:"isStreamingSupported",get:function get(){return!1}}]),PDFWorkerStreamRangeReader}()}])}));

//3dFlipBook
!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}var installedModules={};__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.i=function(value){return value},__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=76)}([function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _$=window.jQuery,_html2canvas=window.html2canvas,_THREE=window.THREE,_React=window.React,_ReactDOM=window.ReactDOM,_PDFJS=window.pdfjsLib,_tr=function(s){return(window.iberezansky||{}).tr&&window.iberezansky.tr(s)||s};exports.$=_$,exports.html2canvas=_html2canvas,exports.THREE=_THREE,exports.React=_React,exports.ReactDOM=_ReactDOM,exports.PDFJS=_PDFJS,exports.tr=_tr},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_$=window.jQuery,_html2canvas=window.html2canvas,_THREE=window.THREE,_PDFJS=window.PDFJS,_tr=function(s){return(window.iberezansky||{}).tr&&window.iberezansky.tr(s)||s};window.FB3D_LOCALE&&(window.iberezansky=_extends({},window.iberezansky,{tr:function(s){return(FB3D_LOCALE.dictionary||{})[s]||s}})),exports.$=_$,exports.html2canvas=_html2canvas,exports.THREE=_THREE,exports.PDFJS=_PDFJS,exports.tr=_tr},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var BaseMathUtils=function(){function BaseMathUtils(){_classCallCheck(this,BaseMathUtils)}return BaseMathUtils.sum1=function(ka,a,kb,b){return[ka*a[0]+kb*b[0]]},BaseMathUtils.sum2=function(ka,a,kb,b){return[ka*a[0]+kb*b[0],ka*a[1]+kb*b[1]]},BaseMathUtils.sum3=function(ka,a,kb,b){return[ka*a[0]+kb*b[0],ka*a[1]+kb*b[1],ka*a[2]+kb*b[2]]},BaseMathUtils.sum4=function(ka,a,kb,b){return[ka*a[0]+kb*b[0],ka*a[1]+kb*b[1],ka*a[2]+kb*b[2],ka*a[3]+kb*b[3]]},BaseMathUtils.rk4=function(dy,t,dt,y){var sum=arguments.length>4&&void 0!==arguments[4]?arguments[4]:BaseMathUtils.sum[y.length-1],k1=dy(t,y),k2=dy(t+dt/2,sum(1,y,dt/2,k1)),k3=dy(t+dt/2,sum(1,y,dt/2,k2)),k4=dy(t+dt,sum(1,y,dt,k3));return sum(1,y,dt/6,sum(1,sum(1,k1,2,k2),1,sum(2,k3,1,k4)))},BaseMathUtils.extrapolateLinear=function(x,y,xi){return y[0]+(y[1]-y[0])/(x[1]-x[0])*(xi-x[0])},BaseMathUtils.interpolateLinear=function(x,y,xi){return x[0]>x[1]&&(x=x.reverse(),y=y.reverse()),xi<x[0]?y[0]:xi>x[1]?y[1]:BaseMathUtils.extrapolateLinear(x,y,xi)},BaseMathUtils.calcScale=function(srcW,srcH,dstW,dstH){return dstW/srcW},BaseMathUtils.mulM=function(a,b){for(var r=[],i=0;i<a.length;++i){r.push([]);for(var j=0;j<b[0].length;++j){r[i][j]=0;for(var k=0;k<b.length;++k)r[i][j]+=a[i][k]*b[k][j]}}return r},BaseMathUtils.transM=function(m){for(var r=[],i=0;i<m.length;++i)for(var j=0;j<m[0].length;++j)r[j]||(r[j]=[]),r[j][i]=m[i][j];return r},BaseMathUtils.mat=function(data){for(var s=0,_iterator=data,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}s+=_ref}return s/data.length},BaseMathUtils.disp=function(data){for(var M=BaseMathUtils.mat(data),s=0,_iterator2=data,_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[Symbol.iterator]();;){var _ref2;if(_isArray2){if(_i2>=_iterator2.length)break;_ref2=_iterator2[_i2++]}else{if(_i2=_iterator2.next(),_i2.done)break;_ref2=_i2.value}var x=_ref2;s+=(x-M)*(x-M)}return s/data.length},BaseMathUtils.predict1=function(data,num){var r=[],l=data.length;if(BaseMathUtils.disp(data)<l&&l>1){for(var am=[],bm=[],i=0;i<l;++i)am.push([i,1]),bm.push([data[i]]);for(var ta=BaseMathUtils.transM(am),a=BaseMathUtils.mulM(ta,am),b=BaseMathUtils.mulM(ta,bm),d=a[0][0]*a[1][1]-a[1][0]*a[0][1],p=[-(a[0][1]*b[1][0]-b[0][0]*a[1][1])/d,(a[0][0]*b[1][0]-a[1][0]*b[0][0])/d],_i3=0;_i3<num;++_i3){var v=Math.round(p[0]*(_i3+l)+p[1]);-1===r.indexOf(v)&&r.push(v)}}return r},BaseMathUtils.predict=function(data,num){for(var r=[],l=data.length,sgns=0,i=0;i<l-1;++i)sgns+=Math.sign(data[i+1]-data[i]);sgns=Math.abs(sgns)<=(l-1)%2?-1:Math.sign(sgns);for(var _i4=0,cur=data[l-1];_i4<num&&cur>0;++_i4)cur+=sgns,r.push(cur);return r},BaseMathUtils.getUnique=function(){return Math.ceil(1e9*Math.random())},BaseMathUtils.setSplinePoints=function(spline,ps){spline.points.length!==ps.x.length&&console.warn("setSplinePoints: bad points");for(var i=0;i<spline.points.length;++i)spline.points[i].set(ps.x[i],ps.y[i],ps.z?ps.z[i]:0)},BaseMathUtils.mapl2L=function(ls,len,n,f){for(var dL=len/(n-1),L=0,i=0,d=ls[0];i<ls.length-1&&L<len+.1*dL;++i,d+=ls[i])Math.abs(L-d)<Math.abs(L-d-ls[i+1])&&(f(i,L),L+=dL);L<len+.1*dL&&console.warn("mapl2L: ls is not enought")},BaseMathUtils.det2=function(a,b,c,d){return a*d-b*c},BaseMathUtils.solve2Lin=function(a1,b1,a2,b2){var res=void 0,d=BaseMathUtils.det2(a1[0],a1[1],a2[0],a2[1]);if(Math.abs(d)>BaseMathUtils.eps){res={x:BaseMathUtils.det2(b1,a1[1],b2,a2[1])/d,y:BaseMathUtils.det2(a1[0],b1,a2[0],b2)/d}}return res},BaseMathUtils.isInsidePoly=function(ps,p){for(var done=!1,ct=void 0,i=0;i<ps.length;++i)if(BaseMathUtils.v2dist(p,ps[i])<BaseMathUtils.eps){ct=1,done=!0;break}for(;!done;){done=!0,ct=0;for(var np={x:p.x+Math.random()-.5,y:p.y+Math.random()-.5},rn={x:np.x-p.x,y:np.y-p.y},a1=[rn.y,-rn.x],b1=p.x*rn.y-p.y*rn.x,_i5=0;_i5<ps.length;++_i5){var p0=ps[_i5],p1=ps[(_i5+1)%ps.length],n={x:p1.x-p0.x,y:p1.y-p0.y},a2=[n.y,-n.x],b2=p0.x*n.y-p0.y*n.x,ip=BaseMathUtils.solve2Lin(a1,b1,a2,b2);if(ip){if(BaseMathUtils.v2dist(ip,p0)<BaseMathUtils.eps||BaseMathUtils.v2dist(ip,p1)<BaseMathUtils.eps){done=!1;break}if(ip.x>Math.min(p0.x,p1.x)-BaseMathUtils.eps&&ip.x<Math.max(p0.x,p1.x)+BaseMathUtils.eps&&ip.y>Math.min(p0.y,p1.y)-BaseMathUtils.eps&&ip.y<Math.max(p0.y,p1.y)+BaseMathUtils.eps){if(BaseMathUtils.v2dist(ip,p)<BaseMathUtils.eps){ct=1;break}var tn={x:ip.x-p.x,y:ip.y-p.y};ct+=tn.x*rn.x+tn.y*rn.y>0}}}}return ct%2},BaseMathUtils.isInsideConvPoly=function(ps,p){for(var sg=[0,0],i=0;i<ps.length;++i){var p0=ps[i],p1=ps[(i+1)%ps.length],a={x:p0.x-p.x,y:p0.y-p.y},b={x:p1.x-p.x,y:p1.y-p.y};++sg[(a.x*b.y-a.y*b.x<0)+0]}return~sg.indexOf(ps.length)},BaseMathUtils.v2len=function(v2){return Math.sqrt(v2.x*v2.x+v2.y*v2.y)},BaseMathUtils.v2dist=function(v21,v22){return BaseMathUtils.v2len({x:v22.x-v21.x,y:v22.y-v21.y})},BaseMathUtils.computeSquare=function(ps){for(var a=[],p=0,i=0;i<ps.length;++i)a.push(BaseMathUtils.v2dist(ps[i],ps[(i+1)%ps.length])),p+=.5*a[i];return Math.sqrt(p*(p-a[0])*(p-a[1])*(p-a[2]))},BaseMathUtils.computeInterpCoefs=function(tri,p){for(var s=BaseMathUtils.computeSquare(tri),coefs=[],l=tri.length,i=0;i<l;++i)coefs[i]=BaseMathUtils.computeSquare([p,tri[(i+1)%l],tri[(i+2)%l]])/s;return coefs},BaseMathUtils}();BaseMathUtils.sum=[BaseMathUtils.sum1,BaseMathUtils.sum2,BaseMathUtils.sum3,BaseMathUtils.sum4],BaseMathUtils.eps=1e-4,exports.default=BaseMathUtils},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var Utils=function(){function Utils(){_classCallCheck(this,Utils)}return Utils.normalizeUrl=function(url){function split(s){return s.replace(/\\/g,"/").split("/")}var base=split(window.location.href);return url=split(url),base[2]===url[2]&&(url[0]=base[0]),url.join("/")},Utils._escapeHTMLclb=function(c){return Utils._escapeHTMLchars[c]||c},Utils.escapeHTML=function(s){return s.replace(/[&<>]/g,Utils._escapeHTMLclb)},Utils.extends=function(der,base){for(var name in base)der.hasOwnProperty(name)||(der[name]=base[name])},Utils.defaultCmp=function(a,b){return a-b},Utils.lowerBound=function(a,x,cmp){cmp=cmp||Utils.defaultCmp;for(var l=0,h=a.length-1;h-l>1;){var mid=Math.floor((l+h)/2);cmp(x,a[mid])<0?h=mid:l=mid}return cmp(x,a[h])>=0?h:l},Utils}();Utils.MOBILE_DIAG=11,Utils._escapeHTMLchars={"&":"&amp;","<":"&lt;",">":"&gt;"},exports.default=Utils},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var GraphUtils=function(){function GraphUtils(){_classCallCheck(this,GraphUtils)}return GraphUtils.createCanvas=function(width,height){var c=document.createElement("canvas");return width&&(c.width=width),height&&(c.height=height),c},GraphUtils.extrapolateLinear=function(x,y,xi){return y[0]+(y[1]-y[0])/(x[1]-x[0])*(xi-x[0])},GraphUtils.interpolate01=function(y1,y2,t){return GraphUtils.extrapolateLinear([0,1],[y1,y2],t)},GraphUtils.getColorBytes=function(color){return[color>>16&255,color>>8&255,255&color]},GraphUtils.inverseColor=function(color){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,bs=GraphUtils.getColorBytes(color),ibs=[255-bs[0],255-bs[1],255-bs[2]],nbs=[Math.round(GraphUtils.interpolate01(bs[0],ibs[0],t)),Math.round(GraphUtils.interpolate01(bs[1],ibs[1],t)),Math.round(GraphUtils.interpolate01(bs[2],ibs[2],t))];return GraphUtils.bytes2Color(nbs)},GraphUtils.color2Rgba=function(color,a){return GraphUtils.bytes2Rgba(GraphUtils.getColorBytes(color),a)},GraphUtils.bytes2Rgba=function(bs,a){return"rgba("+bs.join(",")+","+a+")"},GraphUtils.bytes2Color=function(bs){return bs[2]|bs[1]<<8|bs[0]<<16},GraphUtils}();exports.default=GraphUtils},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _libs=__webpack_require__(0),_BaseMathUtils2=__webpack_require__(2),_BaseMathUtils3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_BaseMathUtils2),MathUtils=function(_BaseMathUtils){function MathUtils(){return _classCallCheck(this,MathUtils),_possibleConstructorReturn(this,_BaseMathUtils.apply(this,arguments))}return _inherits(MathUtils,_BaseMathUtils),MathUtils.splitSpline=function(spline,N){for(var o={len:0,ls:[0]},dl=1/N,i=0;i<=N;++i){var p=spline.getPoint(i*dl);if(i){var d=MathUtils.v1.distanceTo(p);o.len+=d,o.ls.push(d)}MathUtils.v1.copy(p)}return o},MathUtils.getLinearIndeces=function(spline,n){for(var ls=[0],l=0,i=0;i<=5e3;++i){var p=spline.getPoint(2e-4*i);if(i){var d=MathUtils.v1.distanceTo(p);l+=d,ls.push(d)}MathUtils.v1.copy(p)}ls.push(1e7);for(var res=[],dl=l/(n-1),_i=0,L=0,_d=ls[0];_i<ls.length-1;++_i,_d+=ls[_i])Math.abs(L-_d)<Math.abs(L-_d-ls[_i+1])&&(res.push(2e-4*_i),L+=dl);return res},MathUtils.refinePoly=function(poly,maxDl){for(var res=[],i=0;i<poly.length;++i){var p0=poly[i],p1=poly[(i+1)%poly.length],l=_BaseMathUtils3.default.v2dist(p0,p1),n=Math.ceil(l/maxDl),dl=l/n;res.push(p0);for(var j=1;j<n;++j)res.push(new _libs.THREE.Vector2(p0.x+j*dl*(p1.x-p0.x)/l,p0.y+j*dl*(p1.y-p0.y)/l))}return res},MathUtils}(_BaseMathUtils3.default);MathUtils.v1=new _libs.THREE.Vector3,exports.default=MathUtils},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _GraphUtils=__webpack_require__(4),_GraphUtils2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_GraphUtils),ImageBase=function(){function ImageBase(context,width,height,color){_classCallCheck(this,ImageBase),this.renderPause=!1,this.context=context,this.wnd=context.wnd,this.doc=context.doc,this.element=context.element||context.doc.body,this.c=context.renderCanvas||ImageBase.renderCanvas,this.ctx=context.renderCanvasCtx||ImageBase.renderCanvasCtx,this.resW=this.width=width,this.resH=this.height=height,this.color=color}return ImageBase.prototype.setRenderCanvas=function(c,ctx){this.c=c,this.ctx=ctx},ImageBase.prototype.setResolution=function(res){var k=res.width/this.resW;this.resW=res.width,this.resH=k*this.resH},ImageBase.prototype.dispose=function(){},ImageBase.prototype.renderBlankPage=function(){this.ctx.beginPath(),this.ctx.fillStyle=_GraphUtils2.default.color2Rgba(this.color,1),this.ctx.rect(0,0,this.c.width,this.c.height),this.ctx.fill()},ImageBase.prototype.setRenderPause=function(renderPause){this.renderPause=renderPause,!renderPause&&this.continueRender&&(this.continueRender(),delete this.continueRender)},ImageBase.prototype.cancelRender=function(){this.renderTask&&this.renderTask.cancel&&(this.renderTask.cancel(),delete this.renderTask)},ImageBase.prototype.renderImage=function(image){this.pushCtx(),this.ctx.clearRect(0,0,this.c.width,this.c.height),this.ctx.drawImage(image,0,0),this.popCtx()},ImageBase.prototype.normToConv=function(p){return{x:p.x*this.c.width,y:(1-p.y)*this.c.height}},ImageBase.prototype.renderHit=function(poly){var ctx=this.ctx;ctx.fillStyle="rgba(255,255,0,0.4)",ctx.beginPath();var p=this.normToConv(poly[0]);ctx.moveTo(p.x,p.y);for(var i=1;i<poly.length;++i)p=this.normToConv(poly[i]),ctx.lineTo(p.x,p.y);ctx.closePath(),ctx.fill()},ImageBase.prototype.pushCtx=function(){return Math.abs(this.resW-this.c.width)>=1&&(this.c.width=Math.ceil(this.resW)),Math.abs(this.resH-this.c.height)>=1&&(this.c.height=Math.ceil(this.resH)),this.ctx.save(),this.ctx.scale(this.c.width/this.width,this.c.height/this.height),this.ctx},ImageBase.prototype.popCtx=function(){this.ctx.restore()},ImageBase.prototype.renderNotFoundPage=function(){this.renderBlankPage()},ImageBase.prototype.finishRender=function(){var canceled=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.onChange&&this.onChange(this.c,canceled)},ImageBase.prototype.finishLoad=function(){this.onLoad?this.onLoad():this.startRender()},ImageBase.prototype.getSimulatedDoc=function(){},ImageBase}();ImageBase.renderCanvas=_GraphUtils2.default.createCanvas(),ImageBase.renderCanvasCtx=ImageBase.renderCanvas.getContext("2d"),exports.default=ImageBase},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_libs=__webpack_require__(0),EventConverter=function(){function EventConverter(wnd,doc){_classCallCheck(this,EventConverter),this.wnd=wnd,this.doc=doc,this.enabled=!0}return EventConverter.prototype.setEnable=function(vl){vl||(this.mCapObject&&(this.notify(this.mCapObject,_libs.$.Event("mouseup"),"mouseup"),this.mCapObject=void 0),this.mHovObject&&(this.notify(this.mHovObject,_libs.$.Event("mouseout"),"mouseout"),this.mHovObject=void 0)),this.enabled=vl},EventConverter.prototype.getCallback=function(object){},EventConverter.prototype.notify=function(object,e,type){var callback=this.getCallback(object);if(callback){var props=_extends({},e,{type:type,view:this.wnd});callback(_libs.$.Event(type,props),object)}},EventConverter.prototype.convert=function(e,data){if(this.enabled){this.filter&&(e=this.filter(this.element,e));var object=this.getObject(e,data);(~e.type.indexOf("touch")?this.convertTouch(e,data,object):this.convertMouse(e,data,object))&&object&&this.notify(object,e,e.type)}},EventConverter.prototype.convertTouch=function(e,data,object){var notify=!0;switch(e.type){case"touchstart":this.tCapObject&&this.notify(this.tCapObject,e,"touchend"),this.tCapObject=object;break;case"touchend":this.tCapObject&&!this.test(this.tCapObject,object)?(this.notify(this.tCapObject,e,"touchend"),notify=!1):object&&this.test(this.tCapObject,object)&&this.notify(object,e,"touchtap"),this.tCapObject=void 0;break;case"touchtap":notify=!1}return notify},EventConverter.prototype.convertMouse=function(e,data,object){if(e.originalEvent&&e.originalEvent.sourceCapabilities&&e.originalEvent.sourceCapabilities.firesTouchEvents)return!1;var notify=!0;switch(e.type){case"mousedown":this.mCapObject&&this.notify(this.mCapObject,e,"mouseup"),this.mCapObject=object;break;case"mouseup":this.mCapObject&&!this.test(this.mCapObject,object)&&(this.notify(this.mCapObject,e,"mouseup"),notify=!1);break;case"click":notify=this.test(this.mCapObject,object),this.mCapObject=void 0;break;case"mouseenter":case"mouseover":case"mousemove":!this.test(this.mHovObject,object)&&this.mHovObject&&(this.notify(this.mHovObject,e,"mouseout"),this.mHovObject=void 0),!this.mHovObject&&object&&(this.notify(object,e,"mouseover"),this.mHovObject=object),notify="mousemove"===e.type;break;case"mouseleave":case"mouseout":this.mHovObject&&(this.notify(this.mHovObject,e,"mouseout"),this.mHovObject=void 0),notify=!1}return notify},EventConverter}();exports.default=EventConverter},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _Cache=__webpack_require__(14),_Cache2=_interopRequireDefault(_Cache),_BlankImage=__webpack_require__(46),_BlankImage2=_interopRequireDefault(_BlankImage),_StaticImage=__webpack_require__(62),_StaticImage2=_interopRequireDefault(_StaticImage),_PdfImage=__webpack_require__(60),_PdfImage2=_interopRequireDefault(_PdfImage),_InteractiveImage=__webpack_require__(54),_InteractiveImage2=_interopRequireDefault(_InteractiveImage),ImageFactory=function(){function ImageFactory(context,cache){_classCallCheck(this,ImageFactory),this.context=context,this.cache=cache||new _Cache2.default}return ImageFactory.prototype.build=function(info){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,widthTexels=arguments.length>2&&void 0!==arguments[2]?arguments[2]:210,heightTexels=arguments.length>3&&void 0!==arguments[3]?arguments[3]:297,color=arguments.length>4&&void 0!==arguments[4]?arguments[4]:16777215,injector=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,image=void 0;switch(info.type){case"html":image=new _InteractiveImage2.default(this.context,widthTexels,heightTexels,color,info.src,this.cache,injector);break;case"image":image=new _StaticImage2.default(this.context,widthTexels,heightTexels,color,info.src);break;case"pdf":image=new _PdfImage2.default(this.context,widthTexels,heightTexels,color,info.src,n);break;case"blank":default:image=new _BlankImage2.default(this.context,widthTexels,heightTexels,color)}return image},ImageFactory}();exports.default=ImageFactory},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_book=__webpack_require__(11),_BaseMathUtils=__webpack_require__(2),_BaseMathUtils2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_BaseMathUtils),BookPropsBuilder=function(){function BookPropsBuilder(onReady,style){_classCallCheck(this,BookPropsBuilder),this.onReady=onReady,this.defaults=(0,_book.props)(style)}return BookPropsBuilder.prototype.dispose=function(){},BookPropsBuilder.prototype.calcSize=function(width,height){var scale=_BaseMathUtils2.default.calcScale(width,height,this.defaults.width,this.defaults.height);return{width:scale*width,height:scale*height}},BookPropsBuilder.prototype.calcTexels=function(width,height){var sheet=this.defaults.sheet,scale=_BaseMathUtils2.default.calcScale(width,height,sheet.widthTexels,sheet.heightTexels);return{widthTexels:scale*width,heightTexels:scale*height}},BookPropsBuilder.prototype.calcProps=function(width,height){this.props=_extends({},this.defaults,{pages:this.pages},this.calcSize(width,height),{sheet:_extends({},this.defaults.sheet,this.calcTexels(width,height)),cover:_extends({},this.defaults.cover),page:_extends({},this.defaults.page)})},BookPropsBuilder.prototype.calcSheets=function(pages){return this.sheets=Math.ceil(Math.max(0,pages-4)/2)},BookPropsBuilder.prototype.getSheets=function(){return this.sheets},BookPropsBuilder.prototype.getProps=function(){return this.props},BookPropsBuilder.prototype.getPageCallback=function(){return this.binds.pageCallback},BookPropsBuilder.prototype.ready=function(){this.onReady&&this.onReady(this.getProps(),this.getSheets(),this.getPageCallback())},BookPropsBuilder}();exports.default=BookPropsBuilder},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_libs=__webpack_require__(1),_sheetBlock=__webpack_require__(44),_sheetBlock2=_interopRequireDefault(_sheetBlock),_MathUtils=__webpack_require__(5),_MathUtils2=_interopRequireDefault(_MathUtils),_ThreeUtils=__webpack_require__(21),_ThreeUtils2=_interopRequireDefault(_ThreeUtils),SheetBlock=function(){function SheetBlock(visual,p,first,last){var angle=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,_this=this,state=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"closed",height=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;_classCallCheck(this,SheetBlock),this.visual=visual,this.p=_extends({},p,{first:first,last:last});var props=this.getProps(),loadedPoints=this.loadPoints();Object.keys(loadedPoints).map(function(k){_this[k]=loadedPoints[k][props.shape]||loadedPoints[k][0]}),this.pSpline=new _libs.THREE.CatmullRomCurve3([]);for(var i=0;i<this.interpolationPoints.x[0].length;++i)this.pSpline.points.push(new _libs.THREE.Vector3);this.iSpline=new _libs.THREE.CatmullRomCurve3([]);for(var _i=0;_i<_sheetBlock2.default.resX;++_i)this.iSpline.points.push(new _libs.THREE.Vector3);if(this.aSplines=[],this.geometry=_sheetBlock2.default.geometry.clone(),this.p.sideFaces=[{first:0,last:_sheetBlock2.default.faces[0]},{first:_sheetBlock2.default.faces[0],last:_sheetBlock2.default.faces[1]}],this.sideTexture=new _libs.THREE.Texture,this.sideTexture.wrapT=_libs.THREE.RepeatWrapping,this.sideTexture.repeat.set(0,last-first),this.sideTexture.image=props.sideTexture,this.sideTexture.needsUpdate=!0,this.materials=[new _libs.THREE.MeshPhongMaterial,new _libs.THREE.MeshPhongMaterial,new _libs.THREE.MeshPhongMaterial({map:this.sideTexture}),new _libs.THREE.MeshPhongMaterial({map:this.sideTexture}),new _libs.THREE.MeshPhongMaterial,new _libs.THREE.MeshPhongMaterial({map:this.sideTexture})],this.p.setTexture(this.materials[0],2*first),this.p.setTexture(this.materials[1],2*last-1),this.mesh=new _libs.THREE.Mesh(this.geometry,this.materials),this.mesh.castShadow=!0,this.mesh.receiveShadow=!0,this.three=this.mesh,this.three.userData.self=this,this.markers=[],this.p.marker.use){var l=this.geometry.vertices.length,is=void 0;is=Array.apply(0,Array(l)).map(function(_,i){return i});for(var _iterator=is,_isArray=Array.isArray(_iterator),_i2=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i2>=_iterator.length)break;_ref=_iterator[_i2++]}else{if(_i2=_iterator.next(),_i2.done)break;_ref=_i2.value}var _i3=_ref,marker=_ThreeUtils2.default.createMarker(this.geometry.vertices[_i3],_i3<l/2?16711680:65280,this.p.marker.size);this.markers.push({marker:marker,vertex:_i3}),this.three.add(marker)}}this.corner={use:!0,height:0,maxDistance:0,points:[],OZ:new _libs.THREE.Vector3(0,0,1),axis:new _libs.THREE.Vector3},this.set(0,"closed",height,first,last),this.set(angle,state,height,first,last)}return SheetBlock.prototype.dispose=function(){for(var _iterator2=this.materials,_isArray2=Array.isArray(_iterator2),_i4=0,_iterator2=_isArray2?_iterator2:_iterator2[Symbol.iterator]();;){var _ref2;if(_isArray2){if(_i4>=_iterator2.length)break;_ref2=_iterator2[_i4++]}else{if(_i4=_iterator2.next(),_i4.done)break;_ref2=_i4.value}var m=_ref2;m.map&&(m.map=null,m.needsUpdate=!0),m.dispose()}delete this.materials,this.geometry.dispose()},SheetBlock.prototype.getSize=function(){return this.p.last-this.p.first},SheetBlock.prototype.getProps=function(){return _extends({},this.p.page,{width:this.p.page.width-(this.reducedWidth?.001*this.p.page.width:0),sheets:this.p.sheets})},SheetBlock.prototype.reduceWidth=function(reducedWidth){this.reducedWidth=reducedWidth,this.set(this.angle)},SheetBlock.prototype.getTopCerners=function(){var off=this.angle>Math.PI/2?0:this.geometry.vertices.length/2;return[this.geometry.vertices[off],this.geometry.vertices[_sheetBlock2.default.resX-1+off],this.geometry.vertices[(_sheetBlock2.default.resZ-1)*_sheetBlock2.default.resX+off],this.geometry.vertices[_sheetBlock2.default.resZ*_sheetBlock2.default.resX-1+off]]},SheetBlock.prototype.getTopSize=function(){var vs=this.getTopCerners(),w0=new _libs.THREE.Vector3,w1=new _libs.THREE.Vector3;return w0.copy(vs[0]),this.three.localToWorld(w0),w1.copy(vs[1]),this.three.localToWorld(w1),{width:Math.abs(w1.x-w0.x),height:vs[0].distanceTo(vs[2])}},SheetBlock.prototype.getTopWorldRotation=function(q){return q.x=-Math.PI/2,q},SheetBlock.prototype.getTopWorldPosition=function(v){var vs=this.getTopCerners();v.set(0,-100,0);for(var w=new _libs.THREE.Vector3,_iterator3=vs,_isArray3=Array.isArray(_iterator3),_i5=0,_iterator3=_isArray3?_iterator3:_iterator3[Symbol.iterator]();;){var _ref3;if(_isArray3){if(_i5>=_iterator3.length)break;_ref3=_iterator3[_i5++]}else{if(_i5=_iterator3.next(),_i5.done)break;_ref3=_i5.value}var vi=_ref3;w.copy(vi),this.three.localToWorld(w),v.x+=.25*w.x,v.y=Math.max(w.y,w.y),v.z+=.25*w.z}return v},SheetBlock.prototype.getInterpolationPoints=function(inds,mod){for(var ps={x:[],y:[]},K=this.getProps().wave,_iterator4=inds,_isArray4=Array.isArray(_iterator4),_i6=0,_iterator4=_isArray4?_iterator4:_iterator4[Symbol.iterator]();;){var _ref4;if(_isArray4){if(_i6>=_iterator4.length)break;_ref4=_iterator4[_i6++]}else{if(_i6=_iterator4.next(),_i6.done)break;_ref4=_i6.value}var i=_ref4;ps.x.push([].concat(this.interpolationPoints.x[i])),ps.y.push(~mod.indexOf(i)?this.interpolationPoints.y[i].map(function(n){return K*n}):[].concat(this.interpolationPoints.y[i]))}return ps},SheetBlock.prototype.set=function(angle){var state=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,height=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.corner.height,first=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.p.first,last=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.p.last,flipDirection=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"right",PI=Math.PI;this.state=state;var closedAngle=void 0,binderTurn=void 0;"object"===(void 0===angle?"undefined":_typeof(angle))?(this.angle=angle.openedAngle,closedAngle=angle.closedAngle,binderTurn=angle.binderTurn>PI/2?PI-angle.binderTurn:angle.binderTurn):this.angle=angle,this.corner.height=height,this.p.first===first&&this.p.last===last||(this.sideTexture.repeat.set(0,last-first),this.sideTexture.needsUpdate=!0,this.p.first!==first&&this.p.setTexture(this.materials[0],2*first),this.p.last!==last&&this.p.setTexture(this.materials[1],2*last-1)),this.p.first=first,this.p.last=last;var points=void 0,props=this.getProps();if("closed"===this.state)points=this.getInterpolationPoints(this.closedInterpolationIndeces,this.closedInterpolationIndeces);else if("opened"===this.state)if(void 0!==closedAngle&&Math.abs(closedAngle-PI/2)>.01){points=this.getInterpolationPoints(this.flatInterpolationIndeces,[]);var ps=this.getPointsAtAngle(this.getInterpolationPoints(this.closedInterpolationIndeces,this.closedInterpolationIndeces),closedAngle>PI/2?PI-closedAngle:closedAngle);points.x=[ps.x].concat(points.x),points.y=[ps.y].concat(points.y)}else points=this.getInterpolationPoints(this.openedInterpolationIndeces["right"===flipDirection?this.angle>PI/2?"left":"right":this.angle<PI/2?"left":"right"],this.closedInterpolationIndeces);var hl=void 0,hr=void 0,offset=.5*props.sheets*props.depth;"closed"===this.state&&(offset-=7e-6*this.p.scale),this.angle<=PI/2?(hl=(props.sheets-first)*props.depth,hr=(props.sheets-last)*props.depth):(hl=first*props.depth,hr=last*props.depth);var dDepth=.1*props.depth;hl>hr?(hr-=dDepth,hl+=dDepth):(hr+=dDepth,hl-=dDepth);var inAngle=this.angle>PI/2?PI-this.angle:this.angle,hAngle="closed"===this.state?inAngle:void 0===binderTurn?PI/2:binderTurn,_getPointsAtAngleAndH=this.getPointsAtAngleAndHs(points,inAngle,hAngle,[hl/props.width,hr/props.width]),left=_getPointsAtAngleAndH[0],right=_getPointsAtAngleAndH[1];this.angle>PI/2&&(this.inverse(left),this.inverse(right),offset=-offset),this.setPoints(left,right,offset)},SheetBlock.prototype.setPoints=function(left,right,offset){for(var _this2=this,p=this.getProps(),i=0,ys=[right,left],y=0;y<_sheetBlock2.default.resY;++y)for(var z=0;z<_sheetBlock2.default.resZ;++z)for(var x=0;x<_sheetBlock2.default.resX;++x)this.geometry.vertices[i++].set(ys[y].x[x]*p.width+offset,ys[y].y[x]*p.width,z*p.height/(_sheetBlock2.default.resZ-1)-.5*p.height);if(i!==this.geometry.vertices.length&&console.warn("setPoints: bad mapping!"),this.corner.use&&!this.corner.points.length){var plane=new _libs.THREE.Plane,normal=plane.normal,planeOffset=(1-this.getProps().flexibleCorner)*Math.min(p.width,p.height),proj=new _libs.THREE.Vector3;plane.setFromNormalAndCoplanarPoint(new _libs.THREE.Vector3(-1,0,-1).normalize(),new _libs.THREE.Vector3(planeOffset+offset,0,.5*p.height));for(var _i7=0,l=this.geometry.vertices.length;_i7<l;++_i7)if(plane.projectPoint(this.geometry.vertices[_i7],proj),proj.sub(this.geometry.vertices[_i7]),proj.x*normal.x+proj.y*normal.y+proj.z*normal.z>0){var d=proj.length()/planeOffset;this.corner.maxDistance=Math.max(this.corner.maxDistance,d),this.corner.points.push({vertex:_i7,distance:d})}}if(this.corner.use&&Math.abs(this.corner.height)>.001){this.corner.axis.set(-1,0,1).normalize(),this.corner.axis.applyAxisAngle(this.corner.OZ,this.angle);for(var _iterator5=this.corner.points,_isArray5=Array.isArray(_iterator5),_i8=0,_iterator5=_isArray5?_iterator5:_iterator5[Symbol.iterator]();;){var _ref5;if(_isArray5){if(_i8>=_iterator5.length)break;_ref5=_iterator5[_i8++]}else{if(_i8=_iterator5.next(),_i8.done)break;_ref5=_i8.value}var point=_ref5;this.geometry.vertices[point.vertex].applyAxisAngle(this.corner.axis,function(d){return p.cornerDeviation*_this2.corner.height/(1+Math.exp(-p.bending*(d-.5*_this2.corner.maxDistance)))}(point.distance))}}for(var _iterator6=this.markers,_isArray6=Array.isArray(_iterator6),_i9=0,_iterator6=_isArray6?_iterator6:_iterator6[Symbol.iterator]();;){var _ref6;if(_isArray6){if(_i9>=_iterator6.length)break;_ref6=_iterator6[_i9++]}else{if(_i9=_iterator6.next(),_i9.done)break;_ref6=_i9.value}var m=_ref6;m.marker.position.copy(this.geometry.vertices[m.vertex])}this.geometry.computeVertexNormals(),this.geometry.computeBoundingSphere(),this.geometry.verticesNeedUpdate=!0,this.markup&&this.markup.computeVertices()},SheetBlock.prototype.inverse=function(ps){for(var i=0;i<ps.x.length;++i)ps.x[i]=-ps.x[i];return ps},SheetBlock.prototype.getPointsAtHs=function(ps,angle,hs){var _this3=this,N=1e3;_MathUtils2.default.setSplinePoints(this.pSpline,ps);var bl=void 0,r=[],p1=_extends({},this.pSpline.getPoint(.999)),p2=_extends({},this.pSpline.getPoint(1)),dp={x:p2.x-p1.x,y:p2.y-p1.y},ln=Math.sqrt(dp.x*dp.x+dp.y*dp.y),sp=this.pSpline.points[this.pSpline.points.length-1];sp.set(sp.x+.2*dp.x/ln,sp.y+.2*dp.y/ln,0),bl=_MathUtils2.default.splitSpline(this.pSpline,N),bl.ls.push(1e7),_MathUtils2.default.mapl2L(bl.ls,bl.len,_sheetBlock2.default.resX,function(i){for(var j=0;j<hs.length;++j)if(i){var p0=_extends({},_this3.pSpline.getPoint((i-1)/N)),_p=_this3.pSpline.getPoint(i/N),x=-(_p.y-p0.y),y=_p.x-p0.x,l=Math.sqrt(x*x+y*y);r[j].x.push(_p.x+x/l*hs[j]),r[j].y.push(_p.y+y/l*hs[j])}else r[j]={x:[-hs[j]*Math.sin(angle)],y:[hs[j]*Math.cos(angle)]}});for(var nps=[],j=0;j<hs.length;++j)!function(j){nps[j]={x:[],y:[]},_MathUtils2.default.setSplinePoints(_this3.iSpline,r[j]);var l=_MathUtils2.default.splitSpline(_this3.iSpline,N);l.ls.push(1e7),_MathUtils2.default.mapl2L(l.ls,1,_sheetBlock2.default.resX,function(i){var p=_this3.iSpline.getPoint(i/N);nps[j].x.push(p.x),nps[j].y.push(p.y)})}(j);return nps},SheetBlock.prototype.getPointsAtAngleAndHs=function(points,angle,hAngle,hs){var ps=this.getPointsAtAngle(points,angle);return this.getPointsAtHs(ps,hAngle,hs)},SheetBlock.prototype.getPointsAtAngle=function(points,angle){var ps={x:[],y:[]},angles=[];angle/=Math.PI/2;for(var j=0;j<points.x.length;++j)angles.push(j/(points.x.length-1));for(var i=0;i<points.x[0].length;++i){for(var xps=[],yps=[],_j=0;_j<points.x.length;++_j)xps.push(points.x[_j][i]),yps.push(points.y[_j][i]);ps.x.push(this.interpolate(angles,xps,angle)),ps.y.push(this.interpolate(angles,yps,angle))}return ps},SheetBlock.prototype.interpolate=function(x,y,xi){if(!this.aSplines[x.length]){this.aSplines[x.length]=new _libs.THREE.CatmullRomCurve3([]);for(var ps=this.aSplines[x.length].points,i=0;i<x.length;++i)ps.push(new _libs.THREE.Vector3)}for(var spline=this.aSplines[x.length],_i10=0;_i10<x.length;++_i10)spline.points[_i10].set(x[_i10],y[_i10],0);return spline.getPoint(Math.min(1,Math.max(xi,0))).y},SheetBlock.prototype.loadPoints=function(){for(var x=[],y=[],_arr=[0,.2877,.6347,.8174,1],_i11=0;_i11<_arr.length;_i11++){var r=_arr[_i11];x.push(r*Math.cos(.9*Math.PI/4)),y.push(r*Math.sin(.9*Math.PI/4))}return{interpolationPoints:[{x:[[0,.25,.5,.75,1],[0,.2482,.4997,.75,1],[0,.2428,.4989,.75,1],[0,.125,.3214,.566,.8192],[0,0,0,0,0],x],y:[[0,0,0,0,0],[0,.03,.0166,.0033,1e-4],[0,.0596,.0331,.0065,2e-4],[0,.2165,.383,.492,.5736],[0,.25,.5,.75,1],y]},{x:[[0,.25,.5,.75,1],[0,.2482,.4997,.75,1],[0,.2428,.4989,.75,1],[0,.125,.3214,.5574,.8192],[0,-.0434,0,.1302,.342],[0,.0434,-0,-.1302,-.342],[0,.1705,.341,.4821,.5736],[0,0,0,0,0],x],y:[[0,0,0,0,0],[0,.03,.0166,.0033,1e-4],[0,.0596,.0331,.0065,2e-4],[0,.2165,.383,.5018,.5736],[0,.2462,.5,.7386,.9397],[0,.2462,.5,.7386,.9397],[0,.1828,.3657,.5745,.8192],[0,.25,.5,.75,1],y]},{x:[[0,.2877,.6347,.8174,1],[0,.286,.632,.815,.997],[0,.279,.623,.806,.988],[0,.126,.411,.593,.774],[0,0,0,0,0],x],y:[[0,0,0,0,0],[0,.03,.01,.002,0],[0,.06,.017,.004,0],[0,.259,.44,.446,.429],[0,.2877,.6347,.8174,1],y]}],openedInterpolationIndeces:[{left:[2,3,4],right:[2,3,4]},{left:[2,6,5],right:[2,3,4]},{left:[2,3,4],right:[2,3,4]}],closedInterpolationIndeces:[[0,1,2],[0,1,2],[0,1,2]],flatInterpolationIndeces:[[5,4],[8,7],[5,4]]}},SheetBlock}();exports.default=SheetBlock},function(module,exports,__webpack_require__){"use strict";function props(){var style=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"volume",def={height:.297,width:.21,backgroundColor:"",backgroundImage:"",backgroundStyle:"",highlightLinks:!0,lighting:"mixed",gravity:1,cachedPages:50,renderInactivePages:!0,renderInactivePagesOnMobile:!0,renderWhileFlipping:!1,pagesForPredicting:5,preloadPages:5,autoPlayDuration:5e3,rtl:!1,interactiveCorners:!0,maxDepth:.008,sheet:{startVelocity:1.2,cornerDeviation:.15,flexibility:10,flexibleCorner:.5,bending:11,wave:.3,shape:0,widthTexels:1920,heightTexels:1080,color:16777215,side:"color"},cover:{side:"transparent",binderTexture:"",depth:3e-4,padding:0,mass:.001},page:{depth:1e-4,mass:.001},cssLayerProps:{width:1024}},styles={volume:def,flat:_extends({},def,{lighting:"ambient",sheet:_extends({},def.sheet,{wave:.05,side:"transparent",shape:1}),cover:_extends({},def.cover,{depth:2e-5}),page:_extends({},def.page,{depth:1e-5})}),"volume-paddings":_extends({},def,{cover:_extends({},def.cover,{padding:.0025})})};return styles["volume-unrolling"]=_extends({},styles.volume,{sheet:_extends({},styles.volume.sheet,{shape:1})}),styles["volume-paddings-unrolling"]=_extends({},styles["volume-paddings"],{sheet:_extends({},styles["volume-paddings"].sheet,{shape:1})}),styles[style]||def}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.props=props},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.CSS3DSprite=exports.CSS3DObject=void 0;var _libs=__webpack_require__(0);_libs.THREE.CSS3DObject=function(_THREE$Object3D){function CSS3DObject(){var element=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;_classCallCheck(this,CSS3DObject);var _this=_possibleConstructorReturn(this,_THREE$Object3D.call(this));return element&&_this.set(element),_this}return _inherits(CSS3DObject,_THREE$Object3D),CSS3DObject.prototype.set=function(element){this.element=element,this.element.style.position="absolute",this.addEventListener("removed",function(){null!==this.element.parentNode&&this.element.parentNode.removeChild(this.element)})},CSS3DObject}(_libs.THREE.Object3D),_libs.THREE.CSS3DSprite=function(_THREE$CSS3DObject){function CSS3DSprite(element){return _classCallCheck(this,CSS3DSprite),_possibleConstructorReturn(this,_THREE$CSS3DObject.call(this,element))}return _inherits(CSS3DSprite,_THREE$CSS3DObject),CSS3DSprite}(_libs.THREE.CSS3DObject),_libs.THREE.CSS3DRenderer=function CSS3DRenderer(){function epsilon(value){return Math.round(1e5*(value+Number.EPSILON))/1e5}function getCameraCSSMatrix(matrix){var elements=matrix.elements;return"matrix3d("+[epsilon(elements[0]),epsilon(-elements[1]),epsilon(elements[2]),epsilon(elements[3]),epsilon(elements[4]),epsilon(-elements[5]),epsilon(elements[6]),epsilon(elements[7]),epsilon(elements[8]),epsilon(-elements[9]),epsilon(elements[10]),epsilon(elements[11]),epsilon(elements[12]),epsilon(-elements[13]),epsilon(elements[14]),epsilon(elements[15])].join(",")+")"}function getObjectCSSMatrix(matrix,cameraCSSMatrix){var elements=matrix.elements,matrix3d="matrix3d("+[epsilon(elements[0]),epsilon(elements[1]),epsilon(elements[2]),epsilon(elements[3]),epsilon(-elements[4]),epsilon(-elements[5]),epsilon(-elements[6]),epsilon(-elements[7]),epsilon(elements[8]),epsilon(elements[9]),epsilon(elements[10]),epsilon(elements[11]),epsilon(elements[12]),epsilon(elements[13]),epsilon(elements[14]),epsilon(elements[15])].join(",")+")";return isIE?"translate(-50%,-50%)translate("+_widthHalf+"px,"+_heightHalf+"px)"+cameraCSSMatrix+matrix3d:"translate(-50%,-50%)"+matrix3d}function renderObject(object,camera,cameraCSSMatrix){if(object instanceof _libs.THREE.CSS3DObject){var style;object instanceof _libs.THREE.CSS3DSprite?(matrix.copy(camera.matrixWorldInverse),matrix.transpose(),matrix.copyPosition(object.matrixWorld),matrix.scale(object.scale),matrix.elements[3]=0,matrix.elements[7]=0,matrix.elements[11]=0,matrix.elements[15]=1,style=getObjectCSSMatrix(matrix,cameraCSSMatrix)):style=getObjectCSSMatrix(object.matrixWorld,cameraCSSMatrix);var element=object.element,cachedStyle=cache.objects[object.id]&&cache.objects[object.id].style;void 0!==cachedStyle&&cachedStyle===style||(element.style.WebkitTransform=style,element.style.MozTransform=style,element.style.transform=style,cache.objects[object.id]={style:style},isIE&&(cache.objects[object.id].distanceToCameraSquared=getDistanceToSquared(camera,object))),element.parentNode!==cameraElement&&cameraElement.appendChild(element)}for(var i=0,l=object.children.length;i<l;i++)renderObject(object.children[i],camera,cameraCSSMatrix)}function zOrder(scene){var order=Object.keys(cache.objects).sort(function(a,b){return cache.objects[a].distanceToCameraSquared-cache.objects[b].distanceToCameraSquared}),zMax=order.length;scene.traverse(function(object){var index=order.indexOf(object.id+"");-1!==index&&(object.element.style.zIndex=zMax-index)})}_classCallCheck(this,CSS3DRenderer);var _width,_height,_widthHalf,_heightHalf,matrix=new _libs.THREE.Matrix4,cache={camera:{fov:0,style:""},objects:{}},domElement=document.createElement("div");domElement.style.overflow="hidden",this.domElement=domElement;var cameraElement=document.createElement("div");cameraElement.style.WebkitTransformStyle="preserve-3d",cameraElement.style.MozTransformStyle="preserve-3d",cameraElement.style.transformStyle="preserve-3d",domElement.appendChild(cameraElement);var isIE=1;this.setClearColor=function(){},this.getSize=function(){return{width:_width,height:_height}},this.setSize=function(width,height){_width=width,_height=height,_widthHalf=_width/2,_heightHalf=_height/2,domElement.style.width=width+"px",domElement.style.height=height+"px",cameraElement.style.width=width+"px",cameraElement.style.height=height+"px"};var getDistanceToSquared=function(){var a=new _libs.THREE.Vector3,b=new _libs.THREE.Vector3;return function(object1,object2){return a.setFromMatrixPosition(object1.matrixWorld),b.setFromMatrixPosition(object2.matrixWorld),a.distanceToSquared(b)}}();this.render=function(scene,camera){var fov=camera.projectionMatrix.elements[5]*_heightHalf;cache.camera.fov!==fov&&(domElement.style.WebkitPerspective=fov+"px",domElement.style.MozPerspective=fov+"px",domElement.style.perspective=fov+"px",cache.camera.fov=fov),scene.updateMatrixWorld(),null===camera.parent&&camera.updateMatrixWorld();var cameraCSSMatrix="translateZ("+fov+"px)"+getCameraCSSMatrix(camera.matrixWorldInverse),style=cameraCSSMatrix+"translate("+_widthHalf+"px,"+_heightHalf+"px)";cache.camera.style===style||isIE||(cameraElement.style.WebkitTransform=style,cameraElement.style.MozTransform=style,cameraElement.style.transform=style,cache.camera.style=style),renderObject(scene,camera,cameraCSSMatrix),isIE&&zOrder(scene)}},exports.default=_libs.THREE.CSS3DRenderer;var _CSS3DObject=_libs.THREE.CSS3DObject,_CSS3DSprite=_libs.THREE.CSS3DSprite;exports.CSS3DObject=_CSS3DObject,exports.CSS3DSprite=_CSS3DSprite},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _libs=__webpack_require__(0),_CSS3DRenderer=__webpack_require__(12),CSSLayer=function(_CSS3DObject){function CSSLayer(width,height,props){_classCallCheck(this,CSSLayer);var _this=_possibleConstructorReturn(this,_CSS3DObject.call(this));return _this.props=props,_this.jContainer=(0,_libs.$)('<div class="hidden css-layer"></div>'),_this.setSize(width,height),_this.setData(),_this.set(_this.jContainer[0]),_this}return _inherits(CSSLayer,_CSS3DObject),CSSLayer.init=function(doc){var delay=arguments.length>1&&void 0!==arguments[1]?arguments[1]:150;CSSLayer.delay=delay,CSSLayer.style=(0,_libs.$)(("<style type=text/css>\n      .css-layer {\n    \t\topacity: 1;\n    \t\ttransition: opacity "+delay+"ms ease-out;\n        visibility: visible;\n        overflow: hidden;\n    \t}\n    \t.css-layer.hidden {\n    \t\ttransition: opacity "+delay+"ms ease-in, visibility "+delay+"ms step-end;\n    \t\topacity: 0;\n        visibility: hidden;\n        display: block;\n        pointer-events: none;\n      }\n      .fb3d-block {\n        position: absolute;\n      }\n      .fb3d-audio audio, .fb3d-link a, .fb3d-iframe iframe, .fb3d-video video, .fb3d-youtube .youtube {\n        display: block;\n        position: absolute;\n        left: 0;\n        top: 0;\n        width: 100%;\n        height: 100%;\n      }\n      .fb3d-image {\n        text-align: center;\n      }\n      .fb3d-link a {\n        cursor: pointer;\n        background-color: rgba(255,255,0,.1);\n        transition: background-color .15s ease-in;\n      }\n      .fb3d-link a:hover {\n        background-color: rgba(255,255,0,.2);\n        transition: background-color .15s ease-out;\n      }\n      .fb3d-iframe iframe {\n        border: 0;\n      }\n      .fb3d-image img {\n        max-width: 100%;\n        max-height: 100%;\n      }\n    </style>").fb3dQFilter()).appendTo(doc.head)},CSSLayer.dispose=function(){CSSLayer.style.remove()},CSSLayer.prototype.setSize=function(width,height){var widthPxs=this.props.width,heightPxs=height/width*widthPxs;this.jContainer.width(widthPxs).height(heightPxs),this.scale.x=1/(widthPxs/width),this.scale.y=1/(widthPxs/width)},CSSLayer.prototype.callInternal=function(name){if(this.object&&this.object[name])try{this.object[name]()}catch(e){console.error(e)}},CSSLayer.prototype.dispose=function(){this.clearInternals()},CSSLayer.prototype.clearInternals=function(){this.callInternal("dispose"),!this.css||this.css.remove(),!this.html||this.html.remove()},CSSLayer.prototype.setData=function setData(){var css=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",html=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",js=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.clearInternals(),this.css=(0,_libs.$)('<style type="text/css">'+css+"</style>").appendTo(this.jContainer),this.html=(0,_libs.$)(html).appendTo(this.jContainer);var init=eval(js);init&&(this.object=init(this.jContainer,this.props)||{})},CSSLayer.prototype.pendedCall=function(clb){var _this2=this,timestamp=this.timestamp=Date.now();setTimeout(function(){timestamp===_this2.timestamp&&clb()},.5*CSSLayer.delay)},CSSLayer.prototype.isHidden=function(){return this.jContainer.hasClass("hidden")},CSSLayer.prototype.hide=function(){var _this3=this,res=void 0;return this.isHidden()?res=Promise.resolve():(this.jContainer.addClass("hidden"),this.callInternal("hide"),res=new Promise(function(resolve){_this3.pendedCall(function(){_this3.callInternal("hidden"),resolve()})})),res},CSSLayer.prototype.show=function(){var _this4=this,res=void 0;return this.isHidden()?(this.jContainer.removeClass("hidden"),this.callInternal("show"),res=new Promise(function(resolve){_this4.pendedCall(function(){_this4.callInternal("shown"),resolve()})})):res=Promise.resolve(),res},CSSLayer}(_CSS3DRenderer.CSS3DObject);exports.default=CSSLayer},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var Cache=function(){function Cache(){var maxSize=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0,sizeof=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Cache.countSizeof;_classCallCheck(this,Cache),this.os=new Map,this.sizeof=sizeof,this.maxSize=maxSize,this.size=0}return Cache.prototype.forEach=function(clb){this.os.forEach(function(v,k){return clb([k,v])})},Cache.countSizeof=function(value){return 1},Cache.prototype.remove=function(k){var res=!1,v=this.os.get(k);return v.locked&&v.locked(k)||(this.size-=this.sizeof(v),v.dispose&&v.dispose(),this.os.delete(k),res=!0),res},Cache.prototype.freeSpace=function(){for(var arr=[],_iterator=this.os,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}var p=_ref;arr.push({timestamp:p[1].timestamp,key:p[0]})}arr.sort(function(a,b){return a.timestamp-b.timestamp});for(var i=0;i<arr.length&&this.size>3*this.maxSize/4;++i)this.remove(arr[i].key)},Cache.prototype.dispose=function(){for(var arr=[],_iterator2=this.os,_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[Symbol.iterator]();;){var _ref2;if(_isArray2){if(_i2>=_iterator2.length)break;_ref2=_iterator2[_i2++]}else{if(_i2=_iterator2.next(),_i2.done)break;_ref2=_i2.value}var p=_ref2;arr.push({v:p[1],k:p[0]})}for(var _iterator3=arr,_isArray3=Array.isArray(_iterator3),_i3=0,_iterator3=_isArray3?_iterator3:_iterator3[Symbol.iterator]();;){var _ref3;if(_isArray3){if(_i3>=_iterator3.length)break;_ref3=_iterator3[_i3++]}else{if(_i3=_iterator3.next(),_i3.done)break;_ref3=_i3.value}var o=_ref3;o.v.dispose&&o.v.dispose(),this.os.delete(o.k)}},Cache.recursionSizeof=function(value){var size=0;if(value){++size;var len=value.length;if(void 0===len)for(var p in value)value.hasOwnProperty(p)&&(size+=Cache.recursionSizeof(value[p]));else size+=len}return size},Cache.prototype.getTimestamp=function(){return Date.now()},Cache.prototype.get=function(key){var value=this.os.get(key);return value&&(value.timestamp=this.getTimestamp()),value},Cache.prototype.put=function(key,value){return value.timestamp=this.getTimestamp(),this.os.set(key,value),this.size+=this.sizeof(value),this.size>this.maxSize&&this.freeSpace(),value},Cache}();exports.default=Cache},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _libs=__webpack_require__(0),Controller=function(_THREE$EventDispatche){function Controller(){return _classCallCheck(this,Controller),_possibleConstructorReturn(this,_THREE$EventDispatche.apply(this,arguments))}return _inherits(Controller,_THREE$EventDispatche),Controller.prototype.handleDefault=function(id,e,data){},Controller.prototype.dispatchAsync=function(e){var _this2=this;Promise.resolve().then(function(){return _this2.dispatchEvent(e)})},Controller.prototype.dispose=function(){},Controller}(_libs.THREE.EventDispatcher);exports.default=Controller},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _EventConverter2=__webpack_require__(7),_EventConverter3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_EventConverter2),CustomEventConverter=function(_EventConverter){function CustomEventConverter(wnd,doc){var customTest=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!1},eDoc=arguments[3];_classCallCheck(this,CustomEventConverter);var _this=_possibleConstructorReturn(this,_EventConverter.call(this,wnd,doc));return _this.eDoc=eDoc,_this.customTest=customTest,_this.customs=[],_this}return _inherits(CustomEventConverter,_EventConverter),CustomEventConverter.prototype.test=function(object1,object2){return!(!object1||!object2)&&this.customTest(object1,object2)},CustomEventConverter.prototype.getCallback=function(object){return object.target.callback},CustomEventConverter.prototype.addCustom=function(custom){this.customs.push(custom)},CustomEventConverter.prototype.getObject=function(e,data){var object=void 0;if(data.doc===this.eDoc)for(var _iterator=this.customs,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}var custom=_ref;if(object=custom.testIntersection(e,data))break}return object},CustomEventConverter}(_EventConverter3.default);exports.default=CustomEventConverter},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_Utils=__webpack_require__(3),_Utils2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_Utils),Finder=function(){function Finder(strs,pattern,props){_classCallCheck(this,Finder),this.props=_extends({},Finder.defaults,props),this.strs=strs;this.merge(strs);this.hits=[],this.contexts=[],this.pattern=pattern.toLowerCase(),this.lstr=this.str.toLowerCase();for(var p=0;;){if(-1===(p=this.lstr.indexOf(this.pattern,p)))break;this.addHits(p),this.addContext(p),p+=this.pattern.length}}return Finder.isDelimetr=function(s){return s===Finder.DELIMITER},Finder.prototype.merge=function(){for(var as=[],map=[],strs=this.strs,p=0,i=0;i<strs.length;++i)strs[i].length&&(map.push({base:i,offset:p}),as.push(strs[i]),p+=strs[i].length,i<strs.length-1&&!Finder.isDelimetr(strs[i].charAt(strs[i].length-1))&&!Finder.isDelimetr(strs[i+1].charAt(0))&&(as.push(Finder.DELIMITER),++p));this.map=map,this.str=as.join("")},Finder.prototype.addHits=function(p){var info=this.map[_Utils2.default.lowerBound(this.map,{offset:p},function(a,b){return a.offset-b.offset})],chars=this.pattern.length,i=info.base;for(p-=info.offset;chars;)if(this.strs[i].length){var delimeter=i<this.strs.length-1&&!Finder.isDelimetr(this.strs[i].charAt(this.strs[i].length-1))&&!Finder.isDelimetr(this.strs[i+1].charAt(0)),length=Math.min(this.strs[i].length+(delimeter?1:0)-p,chars);p<this.strs[i].length&&this.hits.push({index:i,offset:p,length:Math.min(length,this.strs[i].length-p)}),chars-=length,++i,p=0}},Finder.prototype.addContext=function(p){for(var f=p,l=p+this.pattern.length-1,dels=this.props.contextLength,prevDels=dels+1;dels&&prevDels-dels;)if(prevDels=dels,dels%2){for(var i=f-2;i>=0;--i)if(Finder.isDelimetr(this.str[i])||0===i){f=0===i?0:i+1,--dels;break}}else for(var _i=l+2;_i<this.str.length;++_i)if(Finder.isDelimetr(this.str[_i])||_i===this.str.length-1){l=_i===this.str.length-1?_i===this.str.length-1:_i-1,--dels;break}this.contexts.push(this.str.substr(f,l-f+1))},Finder.prototype.getHits=function(){return this.hits},Finder.prototype.getContexts=function(){return this.contexts},Finder}();Finder.DELIMITER=" ",Finder.defaults={contextLength:7,hits:!0,contexts:!0},exports.default=Finder},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _libs=__webpack_require__(0),_FullScreen2=__webpack_require__(53),_FullScreen3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_FullScreen2),FullScreenX=function(_FullScreen){function FullScreenX(){return _classCallCheck(this,FullScreenX),_possibleConstructorReturn(this,_FullScreen.apply(this,arguments))}return _inherits(FullScreenX,_FullScreen),FullScreenX.available=function(){return!0},FullScreenX.activated=function(){return _FullScreen.available.call(this)?_FullScreen.activated.call(this):FullScreenX.node.hasClass(FullScreenX.classX)},FullScreenX.addEventListener=function(element,handler){_FullScreen.available.call(this)?_FullScreen.addEventListener.call(this,element,handler):FullScreenX.handler=handler},FullScreenX.removeEventListener=function(element,handler){_FullScreen.available.call(this)?_FullScreen.removeEventListener.call(this,element,handler):FullScreenX.handler=FullScreenX.defHandler},FullScreenX.request=function(element){_FullScreen.available.call(this)?_FullScreen.request.call(this,element):FullScreenX.node.hasClass(FullScreenX.classX)||(FullScreenX.node=(0,_libs.$)(element||document.body),FullScreenX.node.addClass(FullScreenX.classX),Promise.resolve().then(FullScreenX.handler))},FullScreenX.cancel=function(){_FullScreen.available.call(this)?_FullScreen.cancel.call(this):FullScreenX.node.hasClass(FullScreenX.classX)&&(FullScreenX.node.removeClass(FullScreenX.classX),FullScreenX.node=FullScreenX.defNode,Promise.resolve().then(FullScreenX.handler))},FullScreenX}(_FullScreen3.default);FullScreenX.defNode=(0,_libs.$)(),FullScreenX.node=FullScreenX.defNode,FullScreenX.defHandler=function(){},FullScreenX.handler=FullScreenX.defHandler,FullScreenX.classX="fb3d-fullscreenx",FullScreenX.style=(0,_libs.$)(('\n\t\t<style type="text/css">\n      .'+FullScreenX.classX+" {\n        position: fixed !important;\n\t\t\t\tleft: 0 !important;\n        top: 0 !important;\n        width: 100% !important;\n        height: 100% !important;\n\t\t\t\tz-index: 2147483647 !important;\n\t\t\t\tmargin: 0 !important;\n\t\t\t\tbox-sizing: border-box !important;\n        background-color: #333;\n      }\n    </style>\n\t").fb3dQFilter()).appendTo("head"),exports.default=FullScreenX},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_libs=__webpack_require__(0),_Utils=__webpack_require__(3),_Utils2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_Utils);_libs.PDFJS.GlobalWorkerOptions.workerSrc=(window.PDFJS_LOCALE?PDFJS_LOCALE:__webpack_require__.i({pdfJsWorker:"js/pdf.worker.js",pdfJsCMapUrl:"cmaps/"})).pdfJsWorker,_libs.PDFJS.cMapUrl=(window.PDFJS_LOCALE?PDFJS_LOCALE:__webpack_require__.i({pdfJsWorker:"js/pdf.worker.js",pdfJsCMapUrl:"cmaps/"})).pdfJsCMapUrl,_libs.PDFJS.cMapPacked=!0,_libs.PDFJS.disableAutoFetch=!0,_libs.PDFJS.disableStream=!0,_libs.PDFJS.disableRange=!1,_libs.PDFJS.imageResourcesPath="images/pdfjs/",_libs.PDFJS.externalLinkTarget=_libs.PDFJS.LinkTarget.BLANK,_libs.PDFJS.disableFontFace=void 0;var Pdf=function(){function Pdf(src,loadingProgress,openOptions){var _this=this;_classCallCheck(this,Pdf),this.src=_Utils2.default.normalizeUrl(src),this.handlerQueue=[],this.progresData={loaded:-1,total:1},this.loadingProgress=loadingProgress,this.task=_libs.PDFJS.getDocument(_extends({url:this.src,rangeChunkSize:524288,cMapUrl:_libs.PDFJS.cMapUrl,cMapPacked:_libs.PDFJS.cMapPacked,disableAutoFetch:_libs.PDFJS.disableAutoFetch,disableStream:_libs.PDFJS.disableStream,disableRange:_libs.PDFJS.disableRange,imageResourcesPath:_libs.PDFJS.imageResourcesPath,externalLinkTarget:_libs.PDFJS.externalLinkTarget,disableFontFace:_libs.PDFJS.disableFontFace},openOptions)),this.task.onProgress=function(data){if(_this.loadingProgress){var cur=Math.floor(100*data.loaded/data.total),old=Math.floor(100*_this.progresData.loaded/_this.progresData.total);cur!==old&&(cur=isNaN(cur)?0:cur,cur=cur>100?100:cur,Promise.resolve().then(function(){_this.loadingProgress(cur)}))}_this.progresData=data},this.task.promise.then(function(handler){handler.numPages>1?Promise.all([handler.getPage(1),handler.getPage(2)]).then(function(pages){_this.init(handler,pages)}):_this.init(handler)}).catch(function(e){console.error(e),_this.errorHandler&&_this.errorHandler(e)})}return Pdf.prototype.init=function(handler,pages){if(this.handler=handler,pages){var p0s=Pdf.getPageSize(pages[0]),p1s=Pdf.getPageSize(pages[1]);this.doubledPages=p0s.width/p0s.height/(p1s.width/p1s.height)<.75}else this.doubledPages=!1;for(var done=Promise.resolve(handler),_iterator=this.handlerQueue.reverse(),_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if("break"===function(){if(_isArray){if(_i>=_iterator.length)return"break";_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)return"break";_ref=_i.value}var clb=_ref;done=done.then(function(handler){return clb(handler),handler})}())break}},Pdf.prototype.getPageType=function(n){return this.doubledPages&&0!==n&&n!==this.getPagesNum()-1?1&n?"left":"right":"full"},Pdf.prototype.getPage=function(n){return this.handler.getPage(this.doubledPages?Math.ceil(n/2)+1:n+1)},Pdf.prototype.getDestination=function(dest){var _this2=this,destPromise=void 0;return destPromise="string"==typeof dest?this.handler.getDestination(dest):Promise.resolve(dest),destPromise=destPromise.then(function(dest){return _this2.handler.getPageIndex(dest[0])}).then(function(number){return _this2.doubledPages?number<1?number:1+2*(number-1):number}).catch(function(){return console.error("Bad bookmark")})},Pdf.prototype.dispose=function(){this.handlerQueue.splice(0,this.handlerQueue.length),delete this.handler},Pdf.prototype.setLoadingProgressClb=function(clb){this.loadingProgress=clb},Pdf.prototype.setErrorHandler=function(eh){this.errorHandler=eh},Pdf.prototype.getPagesNum=function(){return this.handler?this.doubledPages?2*(this.handler.numPages-1):this.handler.numPages:void 0},Pdf.getPageSize=function(page){var x=page.view[2]-page.view[0],y=page.view[3]-page.view[1],a=page.rotate*Math.PI/180;return{width:Math.abs(x*Math.cos(a)-y*Math.sin(a)),height:Math.abs(x*Math.sin(a)+y*Math.cos(a))}},Pdf.prototype.getHandler=function(clb){this.handler?clb(this.handler):this.handlerQueue.push(clb)},Pdf}();exports.default=Pdf},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _libs=__webpack_require__(0),ThreeEventConverterFs=function(){function ThreeEventConverterFs(visualWorld){var test=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ThreeEventConverterFs.objectsAndFacesTest;_classCallCheck(this,ThreeEventConverterFs),this.visual=visualWorld,this.coords=new _libs.THREE.Vector2,this.raycaster=this.visual.raycaster,this.camera=this.visual.camera,this.threes=[],this.test=test}return ThreeEventConverterFs.objectsTest=function(object1,object2){return!(!object1||!object2)&&object1.object===object2.object},ThreeEventConverterFs.objectsAndFacesTest=function(object1,object2){return!(!object1||!object2)&&(object1.object===object2.object&&object1.face.materialIndex===object2.face.materialIndex)},ThreeEventConverterFs.prototype.addThree=function(three){this.threes.push(three)},ThreeEventConverterFs.prototype.removeThree=function(three){var i=this.threes.indexOf(three);~i&&this.threes.splice(i,1)},ThreeEventConverterFs.prototype.getObject=function(e){return this.setCoordsFromEvent(e),this.raycaster.setFromCamera(this.coords,this.camera),this.raycaster.intersectObjects(this.threes)[0]},ThreeEventConverterFs}();exports.default=ThreeEventConverterFs},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _BaseMathUtils=__webpack_require__(2),_BaseMathUtils2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_BaseMathUtils),ThreeUtils=function(){function ThreeUtils(){_classCallCheck(this,ThreeUtils)}return ThreeUtils.vertices2UVs=function(vertices,indeces,first,last,converClb){for(var r=[],i=first;i<last;++i)for(var vis=[indeces[i].a,indeces[i].b,indeces[i].c],j=0;j<vis.length;++j)r[vis[j]]||(r[vis[j]]=converClb(vertices[vis[j]]));return r},ThreeUtils.computeFaceVertexUvs=function(geometry,faces){for(var uvs=[ThreeUtils.vertices2UVs(geometry.vertices,geometry.faces,0,faces[0],function(p){return new THREE.Vector2(p.x,1-p.z)}),ThreeUtils.vertices2UVs(geometry.vertices,geometry.faces,faces[0],faces[1],function(p){return new THREE.Vector2(1-p.x,1-p.z)}),ThreeUtils.vertices2UVs(geometry.vertices,geometry.faces,faces[1],faces[2],function(p){return new THREE.Vector2(p.x,p.y)}),ThreeUtils.vertices2UVs(geometry.vertices,geometry.faces,faces[2],faces[3],function(p){return new THREE.Vector2(1-p.x,p.y)}),ThreeUtils.vertices2UVs(geometry.vertices,geometry.faces,faces[3],faces[4],function(p){return new THREE.Vector2(p.z,p.y)}),ThreeUtils.vertices2UVs(geometry.vertices,geometry.faces,faces[4],geometry.faces.length,function(p){return new THREE.Vector2(1-p.z,p.y)})],uvsi=0,i=0;i<geometry.faces.length;++i){uvsi+=faces[uvsi]===i;var f=geometry.faces[i];f.materialIndex=uvsi,geometry.faceVertexUvs[0][i]=[uvs[uvsi][f.a],uvs[uvsi][f.b],uvs[uvsi][f.c]]}},ThreeUtils.createMarker=function(p,c,size){var marker=new THREE.Mesh(new THREE.SphereGeometry(size),new THREE.MeshPhongMaterial({color:c}));return marker.position.set(p.x,p.y,p.z),marker},ThreeUtils.findUvTris=function(geometry,ps,first,last){for(var res=[],_iterator=ps,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}for(var p=_ref,found=!1,i=first;i<last&&!found;++i){var tri=geometry.faceVertexUvs[0][i];_BaseMathUtils2.default.isInsideConvPoly(tri,p)&&(res.push({coefs:_BaseMathUtils2.default.computeInterpCoefs(tri,p),i:i}),found=!0)}found||(console.error("Bad point"),res.push(void 0))}return res},ThreeUtils.findInternalVertices=function(geometry,ps,first,last){for(var res={},i=first;i<last;++i)for(var tri=geometry.faceVertexUvs[0][i],f=geometry.faces[i],vs=[f.a,f.b,f.c],j=0;j<tri.length;++j)void 0===res[vs[j]]&&_BaseMathUtils2.default.isInsidePoly(ps,tri[j])&&(res[vs[j]]={p:tri[j],i:vs[j],n:f.vertexNormals[j]});return Object.values(res)},ThreeUtils}();exports.default=ThreeUtils},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _Controller2=__webpack_require__(15),_Controller3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_Controller2),WidgetController=function(_Controller){function WidgetController(view,name){_classCallCheck(this,WidgetController);var _this=_possibleConstructorReturn(this,_Controller.call(this));return _this.name=name,_this.view=view,_this.visible=!1,_this}return _inherits(WidgetController,_Controller),WidgetController.prototype.togle=function(){this.visible=!this.visible,this.fireChange()},WidgetController.prototype.hide=function(){this.visible=!1,this.fireChange()},WidgetController.prototype.fireChange=function(){this.onChange&&this.onChange(),this.updateView()},WidgetController.prototype.updateView=function(){this.view&&this.view.setState(this.name,{enable:!0,visible:this.visible,active:!1})},WidgetController}(_Controller3.default);exports.default=WidgetController},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var Target=function(){function Target(){_classCallCheck(this,Target)}return Target.test=function(object1,object2){return object1.target===object2.target},Target}();exports.default=Target},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_libs=__webpack_require__(1),_Detector=__webpack_require__(48),_Detector2=_interopRequireDefault(_Detector),_VisualWorld=__webpack_require__(70),_VisualWorld2=_interopRequireDefault(_VisualWorld),_PdfLinksHandler=__webpack_require__(37),_PdfLinksHandler2=_interopRequireDefault(_PdfLinksHandler),_Book=__webpack_require__(28),_Book2=_interopRequireDefault(_Book),_BookView=__webpack_require__(31),_BookView2=_interopRequireDefault(_BookView),_BookController=__webpack_require__(29),_BookController2=_interopRequireDefault(_BookController),_PdfBookPropsBuilder=__webpack_require__(36),_PdfBookPropsBuilder2=_interopRequireDefault(_PdfBookPropsBuilder),_ClbBookPropsBuilder=__webpack_require__(32),_ClbBookPropsBuilder2=_interopRequireDefault(_ClbBookPropsBuilder),_LoadingController=__webpack_require__(56),_LoadingController2=_interopRequireDefault(_LoadingController),_UserMessageController=__webpack_require__(68),_UserMessageController2=_interopRequireDefault(_UserMessageController),_Search=__webpack_require__(61),_Search2=_interopRequireDefault(_Search),_Bookmarks=__webpack_require__(47),_Bookmarks2=_interopRequireDefault(_Bookmarks),_Thumbnails=__webpack_require__(66),_Thumbnails2=_interopRequireDefault(_Thumbnails),_TocController=__webpack_require__(43),_TocController2=_interopRequireDefault(_TocController),_ShareController=__webpack_require__(39),_ShareController2=_interopRequireDefault(_ShareController),_BookPrinter=__webpack_require__(30),_BookPrinter2=_interopRequireDefault(_BookPrinter),_AutoNavigator=__webpack_require__(26),_AutoNavigator2=_interopRequireDefault(_AutoNavigator),_SoundsEnviroment=__webpack_require__(42),_SoundsEnviroment2=_interopRequireDefault(_SoundsEnviroment),_FullScreenX=__webpack_require__(18),_FullScreenX2=_interopRequireDefault(_FullScreenX);_libs.$.fn.FlipBook=function(options){var scene={dispose:function(){this.ready?(!scene.pdfLinksHandler||scene.pdfLinksHandler.dispose(),delete scene.pdfLinksHandler,scene.sounds.dispose(),delete scene.sounds,scene.userMessageCtrl.dispose(),delete scene.userMessageCtrl,scene.tocCtrl.dispose(),delete scene.tocCtrl,scene.thumbnails.dispose(),delete scene.thumbnails,!scene.bookmarks||scene.bookmarks.dispose(),delete scene.bookmarks,scene.shareCtrl.dispose(),delete scene.shareCtrl,scene.ctrl.dispose(),delete scene.ctrl,scene.bookPrinter.dispose(),delete scene.bookPrinter,scene.book.dispose(),delete scene.book,scene.propsBuilder.dispose(),delete scene.propsBuilder,delete scene.bookBuilder,scene.visual.dispose(),delete scene.visual,scene.view.dispose(),delete scene.view,delete scene.dispose):this.pendingDispose=!0}};options=_extends({},options);var parentContainer=this.length?this[0]:(0,_libs.$)("<div>").appendTo("body");return options.activateFullScreen&&_FullScreenX2.default.request(parentContainer),scene.view=new _BookView2.default(parentContainer,function(){if(_Detector2.default.webgl){scene.loadingCtrl=new _LoadingController2.default(scene.view,!0,function(progress){return 0===progress?(0,_libs.tr)("Please wait... the Application is Loading"):(0,_libs.tr)("PDF is Loading:")+" "+progress+"%"}),scene.userMessageCtrl=new _UserMessageController2.default(scene.view),scene.visual=new _VisualWorld2.default(scene.view.getContainer().ownerDocument.defaultView,scene.view.getContainer().ownerDocument,scene.view.getView()),options.propertiesCallback&&new _ClbBookPropsBuilder2.default(scene.visual,function(){return{type:"blank"}},1,function(props){props=options.propertiesCallback(props);var style=[];""!==props.backgroundColor&&style.push("background-color:#"+new THREE.Color(props.backgroundColor).getHexString()),""!==props.backgroundImage&&style.push("background-image:url('"+props.backgroundImage+"')"),""!==props.backgroundStyle&&style.push(props.backgroundStyle),style.length&&scene.view.getView().attr("style",style.join(";"))}),scene.bookBuilder=function(props,sheets,pageCallback){props.cssLayerProps=_extends({},props.cssLayerProps,{scene:scene}),options.propertiesCallback&&(props=options.propertiesCallback(props)),scene.book=new _Book2.default(scene.visual,sheets,pageCallback,props),scene.bookPrinter=new _BookPrinter2.default(scene.visual,scene.book,(options.template||{}).printStyle),scene.loadingCtrl.dispose(),delete scene.loadingCtrl,scene.ctrl=new _BookController2.default(scene.book,scene.view,options.controlsProps),scene.book.setInjector(function(w){w.jQuery=w.$=_libs.$,w.book=scene.book,w.bookCtrl=scene.ctrl,props.injector&&props.injector(w)}),scene.view.addHandler(scene.ctrl),scene.ctrl.setPrinter(scene.bookPrinter);var test=pageCallback(0);scene.thumbnails=new _Thumbnails2.default(scene.visual,scene.view.getThumbnailsView(),pageCallback,scene.book.getPages(),{kWtoH:props.width/props.height}),scene.tocCtrl=new _TocController2.default(scene.view,scene.ctrl),scene.tocCtrl.setThumbnails(scene.thumbnails),options.outline&&(scene.bookmarks=new _Bookmarks2.default(scene.view.getBookmarksView(),options.outline),scene.tocCtrl.setBookmarks(scene.bookmarks)),scene.ctrl.setTocCtrl(scene.tocCtrl),scene.view.addHandler(scene.tocCtrl),"pdf"===test.type&&(scene.search=new _Search2.default(scene.view.getSearchView(),scene.book.getPages()),scene.search.onQuery=scene.book.setQuery.bind(scene.book),scene.book.addEventListener("searchResults",function(e){scene.search.setResults(e.results,e.lastPage)}),scene.tocCtrl.setSearch(scene.search),scene.ctrl.setTocCtrl(scene.tocCtrl),scene.pdfLinksHandler=new _PdfLinksHandler2.default(test.src,scene.ctrl,scene.visual.element),scene.book.addEventListener("pdfAnnotation",scene.pdfLinksHandler.handleEvent.bind(scene.pdfLinksHandler)),scene.bookmarks||test.src.getHandler(function(handler){handler.getOutline().then(function(outline){outline&&outline.length&&(scene.bookmarks=new _Bookmarks2.default(scene.view.getBookmarksView(),outline),scene.tocCtrl.setBookmarks(scene.bookmarks,test.src),scene.ctrl.setTocCtrl(scene.tocCtrl))})}),options.pdfLinks&&options.pdfLinks.handler&&scene.pdfLinksHandler.setHandler(options.pdfLinks.handler)),scene.sounds=new _SoundsEnviroment2.default(options.template),scene.ctrl.setSounds(scene.sounds),scene.sounds.subscribeFlips(scene.ctrl),scene.ready=!0;var autoNavigator=new _AutoNavigator2.default(scene.visual,scene.ctrl,options.autoNavigation);scene.shareCtrl=new _ShareController2.default(scene.view,scene.ctrl,options.shareLinkBuilder?options.shareLinkBuilder:function(page){return new RegExp("([?&])"+autoNavigator.urlParam+"=[0-9]+").test(location.href)?location.href.replace(new RegExp("([?&])"+autoNavigator.urlParam+"=[0-9]+"),"$1"+autoNavigator.urlParam+"="+page):location.href.split("#")[0]+(~location.href.indexOf("?")?"&":"?")+autoNavigator.urlParam+"="+page+location.hash}),scene.ctrl.setShareCtrl(scene.shareCtrl),scene.view.addHandler(scene.shareCtrl),autoNavigator.dispose(),options.ready&&options.ready(scene),scene.ctrl.ready(scene),scene.pendingDispose&&scene.dispose()};var onError=function(e){!scene.loadingCtrl||scene.loadingCtrl.dispose(),delete scene.loadingCtrl,scene.userMessageCtrl.setError(e.message)};options.pdf?(scene.propsBuilder=new _PdfBookPropsBuilder2.default(options.pdf,scene.bookBuilder,options.bookStyle,options.pdfOpenOptions),scene.propsBuilder.pdf.setLoadingProgressClb(scene.loadingCtrl.setProgress.bind(scene.loadingCtrl)),scene.propsBuilder.pdf.setErrorHandler(options.error||onError)):options.pageCallback?(options.onPageCallbackError&&options.onPageCallbackError.push(options.error||onError),scene.propsBuilder=new _ClbBookPropsBuilder2.default(scene.visual,options.pageCallback,options.pages,scene.bookBuilder,options.bookStyle)):scene.propsBuilder=new _ClbBookPropsBuilder2.default(scene.visual,_Book2.default.pageCallback,6,scene.bookBuilder,options.bookStyle)}else _Detector2.default.addGetWebGLMessage({parent:scene.view.getView()})},options.template),scene},(0,_libs.$)(function(){for(var containers=(0,_libs.$)(".flip-book-container"),i=0;i<containers.length;++i){var jContainer=(0,_libs.$)(containers[i]),src=jContainer.attr("src");src&&jContainer.FlipBook({pdf:src})}}),window.jQuery=window.$=_libs.$},function(module,exports,__webpack_require__){"use strict";Array.prototype.fill||(Array.prototype.fill=function(value){if(null==this)throw new TypeError("this is null or not defined");for(var O=Object(this),len=O.length>>>0,start=arguments[1],relativeStart=start>>0,k=relativeStart<0?Math.max(len+relativeStart,0):Math.min(relativeStart,len),end=arguments[2],relativeEnd=void 0===end?len:end>>0,final=relativeEnd<0?Math.max(len+relativeEnd,0):Math.min(relativeEnd,len);k<final;)O[k]=value,k++;return O}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(predicate){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof predicate)throw new TypeError("predicate must be a function");for(var value,list=Object(this),length=list.length>>>0,thisArg=arguments[1],i=0;i<length;i++)if(value=list[i],predicate.call(thisArg,value,i,list))return value}}),Array.prototype.findIndex||(Array.prototype.findIndex=function(predicate){if(null==this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof predicate)throw new TypeError("predicate must be a function");for(var value,list=Object(this),length=list.length>>>0,thisArg=arguments[1],i=0;i<length;i++)if(value=list[i],predicate.call(thisArg,value,i,list))return i;return-1}),Object.values||(Object.values=function(O){return Object.keys(O).map(function(name){return O[name]})||[]}),RegExp.escape||(RegExp.escape=function(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}),String.prototype.replaceAll||(String.prototype.replaceAll=function(search,replace){return this.replace(new RegExp(RegExp.escape(search),"g"),replace)}),String.prototype.fb3dQFilter||(String.prototype.fb3dQFilter=function(){return this.replace(/(\n|\t|  )/g,"")})},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},AutoNavigator=function(){function AutoNavigator(context,bookCtrl){var props=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,AutoNavigator),props=_extends({},props,{urlParam:props.urlParam||"fb3d-page",navigates:void 0===props.navigates?1:props.navigates,pageN:props.pageN||0}),this.props=props,this.context=context,this.bookCtrl=bookCtrl,this.urlParam=props.urlParam,this.pageN=props.pageN,this.wnd=context.wnd,this.wnd.fb3d=_extends({},this.wnd.fb3d),this.wnd.fb3d.navigator=_extends({},this.wnd.fb3d.navigator),this.navigator=this.wnd.fb3d.navigator[this.urlParam]=_extends({},this.wnd.fb3d.navigator[this.urlParam]),this.navigator.instances=(this.navigator.instances||0)+1,this.navigator.instances<=this.props.navigates&&this.bookCtrl.goToPage(this.getPageNumber())}return AutoNavigator.prototype.dispose=function(){},AutoNavigator.prototype.getParameterByName=function(name,url){url||(url=window.location.href),name=name.replace(/[\[\]]/g,"\\$&");var regex=new RegExp("[?&]"+name+"(=([^]*)|&|#|$)"),results=regex.exec(url);return results?results[2]?decodeURIComponent(results[2].replace(/\+/g," ")):"":null},AutoNavigator.prototype.getPageNumber=function(){var number=parseInt(this.pageN);return(isNaN(number)||0===number)&&(number=this.getParameterByName(this.urlParam),number=parseInt(number),isNaN(number)&&(number=1)),number-1},AutoNavigator}();exports.default=AutoNavigator},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_libs=__webpack_require__(1),_MathUtils=__webpack_require__(5),_MathUtils2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_MathUtils),Binder=function(){function Binder(visual,p){var _this=this,hidden=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_classCallCheck(this,Binder),this.visual=visual,this.p=_extends({},p,{backSize:2*p.cover.depth+p.sheets*p.page.depth}),this.OZ=new _libs.THREE.Vector3(0,0,1),this.backG=new _libs.THREE.BoxGeometry(.001,this.p.backSize,p.cover.height);var color={color:p.cover.color},transparent={opacity:0,transparent:!0};this.materials=[new _libs.THREE.MeshPhongMaterial(color),new _libs.THREE.MeshPhongMaterial(color),new _libs.THREE.MeshPhongMaterial(transparent),new _libs.THREE.MeshPhongMaterial(transparent),new _libs.THREE.MeshPhongMaterial(transparent),new _libs.THREE.MeshPhongMaterial(transparent)];var backM=new _libs.THREE.Mesh(this.backG,this.materials);""!==p.cover.binderTexture&&this.visual.textureLoader.load(p.cover.binderTexture,function(texture){_this.materials[1].color.setHex(16777215),_this.materials[1].map=texture,texture.minFilter=_libs.THREE.LinearFilter,texture.needsUpdate=!0,_this.materials[1].needsUpdate=!0}),this.three=new _libs.THREE.Object3D,this.back=new _libs.THREE.Object3D,this.backRT=new _libs.THREE.Object3D,this.backRR=new _libs.THREE.Object3D,this.backLT=new _libs.THREE.Object3D,this.backLR=new _libs.THREE.Object3D,this.leftPivot=new _libs.THREE.Object3D,this.rightPivot=new _libs.THREE.Object3D,hidden||(backM.position.set(.5*(p.cover.depth-.001),0,0),this.back.add(backM)),this.back.add(this.leftPivot),this.back.add(this.rightPivot),this.backRT.add(this.back),this.backRR.add(this.backRT),this.backLT.add(this.backRR),this.backLR.add(this.backLT),this.three.add(this.backLR)}return Binder.prototype.dispose=function(){for(var _iterator=this.materials,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}var m=_ref;m.map&&(m.map=null,m.needsUpdate=!0),m.dispose()}delete this.materials,this.backG.dispose()},Binder.prototype.set=function(angle){var right=void 0,left=void 0;angle>Math.PI/2?(right=Math.PI/2,left=angle-Math.PI/2):(right=angle,left=0);var p=this.p,tr1={x:-.5*p.cover.depth,y:.5*p.backSize-p.cover.depth};this.backRT.position.set(tr1.x,tr1.y,0),this.backRR.position.set(-tr1.x,-tr1.y,0),this.backRR.quaternion.setFromAxisAngle(this.OZ,right);var tr2={x:p.backSize-2*p.cover.depth-.5*p.cover.depth,y:.5*p.backSize-p.cover.depth};this.backLT.position.set(tr2.x,tr2.y,0),this.backLR.position.set(-tr2.x,-tr2.y,0),this.backLR.quaternion.setFromAxisAngle(this.OZ,left)},Binder.prototype.setLeft=function(angle){var PI=Math.PI;this.leftPivot.position.set(_MathUtils2.default.interpolateLinear([-PI,-PI/2],[0,this.p.cover.depth],angle),.5*this.p.backSize-.5*this.p.cover.depth,0),this.leftPivot.quaternion.setFromAxisAngle(this.OZ,angle)},Binder.prototype.setRight=function(angle){var PI=Math.PI;this.rightPivot.position.set(_MathUtils2.default.interpolateLinear([-PI/2,0],[this.p.cover.depth,0],angle),-.5*this.p.backSize+.5*this.p.cover.depth,0),this.rightPivot.quaternion.setFromAxisAngle(this.OZ,angle)},Binder.prototype.joinLeftCover=function(cover){cover.three.position.set(0,-.5*this.p.cover.depth,0),this.leftPivot.add(cover.three)},Binder.prototype.disconnectLeftCover=function(cover){this.leftPivot.remove(cover.three)},Binder.prototype.joinRightCover=function(cover){cover.three.position.set(0,-.5*this.p.cover.depth,0),this.rightPivot.add(cover.three)},Binder.prototype.disconnectRightCover=function(cover){this.rightPivot.remove(cover.three)},Binder}();exports.default=Binder},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_libs=__webpack_require__(1),_book=__webpack_require__(11),_GraphUtils=__webpack_require__(4),_GraphUtils2=_interopRequireDefault(_GraphUtils),_Binder=__webpack_require__(27),_Binder2=_interopRequireDefault(_Binder),_Cover=__webpack_require__(33),_Cover2=_interopRequireDefault(_Cover),_SheetBlock=__webpack_require__(10),_SheetBlock2=_interopRequireDefault(_SheetBlock),_SheetPhysics=__webpack_require__(41),_SheetPhysics2=_interopRequireDefault(_SheetPhysics),_PageManager=__webpack_require__(35),_PageManager2=_interopRequireDefault(_PageManager),_CSSLayer=__webpack_require__(13),_CSSLayer2=_interopRequireDefault(_CSSLayer),_CssLayersManager=__webpack_require__(34),_CssLayersManager2=_interopRequireDefault(_CssLayersManager),_SearchEngine=__webpack_require__(38),_SearchEngine2=_interopRequireDefault(_SearchEngine),_CustomEventConverter=__webpack_require__(16),_CustomEventConverter2=_interopRequireDefault(_CustomEventConverter),_CircleTarget=__webpack_require__(72),_CircleTarget2=_interopRequireDefault(_CircleTarget),_YouTubeApi=__webpack_require__(71),_YouTubeApi2=_interopRequireDefault(_YouTubeApi),Book=function(_THREE$EventDispatche){function Book(visual,sheets,pageCallback,props){_classCallCheck(this,Book);var _this=_possibleConstructorReturn(this,_THREE$EventDispatche.call(this));_this.cssFs={play:function(player){if(player.play)player.fb3dNoPlay=!1,(player.play()||{catch:function(){}}).catch(function(e){player.fb3dNoPlay||"NotAllowedError"!==e.name||(_this.pendingPlayers.push(player),_this.dispatchEvent({type:"pendingPlayers"}))});else if((0,_libs.$)(player).hasClass("youtube")){var p=player.player;player.fb3dNoPlay=!1,p&&p.playVideo?p.playVideo():setTimeout(function(){player.fb3dNoPlay||_this.cssFs.play(player)},200)}},pause:function(player){if(player.pause)player.fb3dNoPlay=!0,player.pause();else if((0,_libs.$)(player).hasClass("youtube")){var p=player.player;player.fb3dNoPlay=!0,p&&p.pauseVideo&&p.pauseVideo()}}},_this.visual=visual,_this.mouseController=!0,_this.p=_extends({},_this.prepareProps(_extends({},props,{sheets:sheets})),{pageCallback:pageCallback,zoom:1,singlePage:!1,autoResolution:{enabled:!1}}),_this.userDirection={lastTopPage:0,direction:1},_this.pageManager=new _PageManager2.default(visual,_this,_this.p),_CSSLayer2.default.init(visual.doc),_this.layerManager=new _CssLayersManager2.default(_this),_this.searchEngine=new _SearchEngine2.default(pageCallback,2*(sheets+2)),_this.searchEngine.onPageHitsChanged=function(page,query){_this.pageManager.refreshPageQuery(page,query),_this.dispatchEvent({type:"searchResults",results:_this.searchEngine.results,lastPage:page,query:query})},_this.three=new _libs.THREE.Object3D,_this.binder=new _Binder2.default(visual,_this.p,_this.getPages()<3),_this.three.add(_this.binder.three);var coverP={left:_this.p.cover,right:_this.p.cover};return _this.enableMouse(_this.p.interactiveCorners),2===_this.getPages()&&(_this.enableMouse(!1),coverP[_this.p.rtl?"left":"right"]=_extends({},_this.p.cover,{width:1e-6,height:1e-6})),_this.leftCover=new _Cover2.default(visual,_extends({},_this.p,{cover:coverP.left,setTexture:_this.setLeftCoverTexture.bind(_this)}),Math.PI/2,"opened"),_this.binder.joinLeftCover(_this.leftCover),_this.subscribeSheetBlock(_this.leftCover,0),_this.rightCover=new _Cover2.default(visual,_extends({},_this.p,{cover:coverP.right,setTexture:_this.setRightCoverTexture.bind(_this)}),0,"closed"),_this.binder.joinRightCover(_this.rightCover),_this.subscribeSheetBlock(_this.rightCover,2*(_this.p.sheets+1)),_this.threeSheetBlocks=new _libs.THREE.Object3D,_this.three.add(_this.threeSheetBlocks),_this.threeSheetBlocks.position.set(.5*_this.p.cover.depth-.5*sheets*_this.p.page.depth,-.5*sheets*_this.p.page.depth,0),_this.sheetBlocks=[],sheets>0&&_this.addSheetBlock(0,new _SheetBlock2.default(visual,_extends({},_this.p,{setTexture:_this.setPageTexture.bind(_this)}),0,sheets,0,"closed")),_this.reducePagesWidth(!0),_this.set(Math.PI/2),_this.openedBox=(new _libs.THREE.Box3).setFromObject(_this.leftCover.three),_this.openedBox.union((new _libs.THREE.Box3).setFromObject(_this.rightCover.three)),_this.angle=_this.p.rtl?Math.PI:0,_this.closedAngle=0,_this.set(_this.angle,0),_this.lastMousePos={t:0},_this.pendingPlayers=[],_this.three.position.set(-.5*_this.p.cover.depth+.5*sheets*_this.p.page.depth,0,0),_this.sheetPhysics=new _SheetPhysics2.default(_this.p.page.width/_this.p.scale,_this.p.gravity,_this.p.page.cornerDeviation),_this.binds={update:_this.update.bind(_this),lastMousePos:function(e){_this.lastMousePos=_extends({},_this.lastMousePos,{pageX:e.pageX,pageY:e.pageY})}},_this.visual.addRenderCallback(_this.binds.update),(0,_libs.$)(_this.visual.element).on("mousemove",_this.binds.lastMousePos),_this.binds.onPickCallback=_this.onPickCallback.bind(_this),_this.visual.drag.onPickCallback=_this.binds.onPickCallback,_this.binds.onDragCallback=_this.onDragCallback.bind(_this),_this.visual.drag.onDragCallback=_this.binds.onDragCallback,_this.binds.onReleaseCallback=_this.onReleaseCallback.bind(_this),_this.visual.drag.onReleaseCallback=_this.binds.onReleaseCallback,_this.dragAngle=.05,_this.tmp={boxs:[new _libs.THREE.Box3,new _libs.THREE.Box3]},_this.visual.addObject(_this.three),_this.tmpBox=new _libs.THREE.Box3,_this.bookShadowMaterial=new _libs.THREE.MeshPhongMaterial({color:0,side:_libs.THREE.DoubleSide,transparent:!0}),_this.bookShadow=new _libs.THREE.Mesh(new _libs.THREE.PlaneGeometry(1,1).rotateX(-Math.PI/2),_this.bookShadowMaterial),_this.visual.addObject(_this.bookShadow),_this.calculateShadow(),_this.visual.addEventListener("resize",_this.pageManager.refreshZoom.bind(_this.pageManager)),setTimeout(function(){_this.isProcessing()||(_this.notifyBeforeAnimation(),_this.notifyAfterAnimation())},100),_this.updateThree(),_this}return _inherits(Book,_THREE$EventDispatche),Book.prototype.calculateShadow=function(){var box=this.tmpBox;box.setFromObject(this.three),this.bookShadow.scale.set(box.max.x-box.min.x,1,box.max.z-box.min.z);this.bookShadow.position.set(.5*(box.max.x+box.min.x)-.015,box.min.y-.0015,.5*(box.max.z+box.min.z)-.015),this.bookShadowMaterial.opacity=.03,this.visual.shadowPlace.position.set(0,box.min.y-.015,0)},Book.prototype.dispose=function(){this.visual.removeObject(this.three),this.sheetPhysics.dispose(),delete this.visual.drag.onPickCallback,delete this.visual.drag.onDragCallback,delete this.visual.drag.onReleaseCallback,(0,_libs.$)(this.visual.element).off("mousemove",this.binds.lastMousePos),this.visual.removeRenderCallback(this.binds.update),this.removeSheetBlocks(0,this.sheetBlocks.length),this.binder.disconnectLeftCover(this.leftCover),this.removeSheetBlock(this.leftCover),this.binder.disconnectRightCover(this.rightCover),this.removeSheetBlock(this.rightCover),this.binder.dispose(),this.layerManager.dispose(),_CSSLayer2.default.dispose(),this.pageManager.dispose()},Book.prototype.hasPendingPlayers=function(){return this.pendingPlayers.length>0},Book.prototype.resolvePendingPlayers=function(){for(var _iterator=this.pendingPlayers,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}_ref.play()}this.pendingPlayers=[],this.dispatchEvent({type:"pendingPlayers"})},Book.prototype.updateThree=function(){this.three.userData.needsUpdate=!0},Book.prototype.setAutoResolution=function(autoResolution){this.p.autoResolution=_extends({},this.p.autoResolution,autoResolution)},Book.prototype.setZoom=function(zoom,singlePage){(Math.abs(this.p.zoom-zoom)>.001||singlePage!==this.p.singlePage)&&(this.p.zoom=zoom,this.p.singlePage=singlePage,this.pageManager.refreshZoom())},Book.prototype.getPageCallback=function(){return this.p.pageCallback},Book.prototype.setQuery=function(query){this.searchEngine.setQuery(query)},Book.prototype.isProcessing=function(){return 0!==this.sheetPhysics.getSize()},Book.prototype.getPages=function(){return this.p.pages},Book.prototype.getBookPages=function(){return 4+2*this.p.sheets},Book.prototype.setFlipProgressClb=function(clb){this.p.flipProgressClb=clb},Book.prototype.setInjector=function(injector){this.p.injector=injector},Book.prototype.isActivePage=function(n){var res=!0;if(n>1&&n<this.getBookPages()-2)for(var _iterator2=this.sheetBlocks,_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[Symbol.iterator]();;){var _ref2;if(_isArray2){if(_i2>=_iterator2.length)break;_ref2=_iterator2[_i2++]}else{if(_i2=_iterator2.next(),_i2.done)break;_ref2=_i2.value}var b=_ref2;if(n-2>2*b.p.first&&n-2<2*b.p.last-1){res=!1;break}}return res},Book.prototype.getBlockByPage=function(n){var block=void 0;if(n<2)block=this.leftCover;else if(n<2*(this.p.sheets+1))for(var _iterator3=this.sheetBlocks,_isArray3=Array.isArray(_iterator3),_i3=0,_iterator3=_isArray3?_iterator3:_iterator3[Symbol.iterator]();;){var _ref3;if(_isArray3){if(_i3>=_iterator3.length)break;_ref3=_iterator3[_i3++]}else{if(_i3=_iterator3.next(),_i3.done)break;_ref3=_i3.value}var b=_ref3;if(n-2>=2*b.p.first&&n-2<2*b.p.last){block=b;break}}else block=this.rightCover;return block},Book.prototype.getBlockPages=function(block){var range=void 0;switch(block){case this.leftCover:range=[0,1];break;case this.rightCover:range=[2*(this.p.sheets+1),2*(this.p.sheets+1)+1];break;default:range=block?[2*(block.p.first+1),2*(block.p.last+1)-1]:void 0}return range},Book.prototype.getPage=function(){var PI=Math.PI,p=void 0;if(this.angle===PI/2||this.angle===3*PI/2){for(var _iterator4=this.sheetBlocks,_isArray4=Array.isArray(_iterator4),_i4=0,_iterator4=_isArray4?_iterator4:_iterator4[Symbol.iterator]();;){var _ref4;if(_isArray4){if(_i4>=_iterator4.length)break;_ref4=_iterator4[_i4++]}else{if(_i4=_iterator4.next(),_i4.done)break;_ref4=_i4.value}var block=_ref4;if(block.angle<=PI/2){p=this.getBlockPages(block)[0]-1;break}}p||(p=this.getBookPages()-3)}else this.angle<PI/2?p=0:this.angle>3*PI/2?p=1:this.angle<PI?p=this.getBookPages()-3:this.angle>=PI&&(p=this.getBookPages()-1);return p},Book.prototype.getTopPages=function(){var p=this.getPage();return 0===p||p===this.getBookPages()-1?[p]:[p,p+1]},Book.prototype.getPageState=function(n){return this.pageManager.getPageState(n)},Book.prototype.enableLoadingAnimation=function(enable){this.pageManager.enableLoadingAnimation(enable)},Book.prototype.getLeftFlipping=function(){var block=void 0,left=this.sheetBlocks[0],PI=Math.PI;return this.angle===PI?this.getPages()>1&&(block=this.rightCover):left&&"closed"===left.state&&left.angle>PI/2?block=left:this.angle!==PI/2&&this.angle!==3*PI/2||this.p.rtl&&this.getPages()!==this.getBookPages()||(block=this.leftCover),block},Book.prototype.getRightFlipping=function(){var block=void 0,right=this.sheetBlocks[this.sheetBlocks.length-1],PI=Math.PI;return 0===this.angle?this.getPages()>1&&(block=this.leftCover):right&&"closed"===right.state&&right.angle<=PI/2?block=right:this.angle!==PI/2&&this.angle!==3*PI/2||(this.p.rtl||this.getPages()===this.getBookPages())&&(block=this.rightCover),block},Book.prototype.getClosedBlockAngle=function(angle){var closedAngle=void 0,PI=Math.PI;if(this.leftCover.physicId){var test=void 0;try{test=Math.abs(this.sheetPhysics.getParametr(this.leftCover.physicId,"angle")-angle)}catch(e){test=0}closedAngle=angle>PI/2||test>PI/6?PI/2:this.closedAngle}else if(this.rightCover.physicId){var _test=void 0;try{_test=Math.abs(this.sheetPhysics.getParametr(this.rightCover.physicId,"angle")-angle)}catch(e){_test=0}closedAngle=angle<PI/2||_test>PI/6?PI/2+1e-7:this.closedAngle}else closedAngle=PI/2+1e-7*(0!==angle);return{openedAngle:angle,closedAngle:closedAngle,binderTurn:this.closedAngle}},Book.prototype.flipLeft=function(){var _this2=this,size=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,progressClb=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.p.flipProgressClb;if(!this.flipDisabled){this.sheetPhysics.getSize()||(this.flipDirection="left");var block=void 0,res=void 0;if(this.sheetPhysics.getSize()<25){var left=this.sheetBlocks[0],PI=Math.PI;this.angle===PI?res=this.connectPhysics(block=this.rightCover,this.p.cover.mass,PI,-this.p.cover.startVelocity,this.p.cover.flexibility,0,function(angle,height){return _this2.set(3*PI/2-angle/2,height)},function(angle,height){_this2.set(3*PI/2-angle/2,0),_this2.setSheetBlocks(angle?PI:PI/2+1e-7,"closed")},progressClb):left&&"closed"===left.state&&left.angle>PI/2?(block=size<left.getSize()?this.splitSheetBlock(0,left.getSize()-size)[1]:left,res=this.connectPhysics(block,this.p.page.mass*block.getSize(),PI,-this.p.page.startVelocity,this.p.page.flexibility,0,function(angle,height){return block.set(_this2.getClosedBlockAngle(angle),"opened",height,block.p.first,block.p.last,_this2.flipDirection)},Book.finishAnimationClb.bind({book:this,block:block}),progressClb)):this.angle!==PI/2&&this.angle!==3*PI/2||(res=this.connectPhysics(block=this.leftCover,this.p.cover.mass,PI,-this.p.cover.startVelocity,this.p.cover.flexibility,0,function(angle,height){_this2.set(2*PI-angle/2,height),angle>PI/2&&_this2.setSheetBlocks(angle?PI/2:0,"closed")},function(angle,height){return _this2.set(0===angle?0:2*PI-angle/2,0)},progressClb))}return res}},Book.prototype.flipRight=function(){var _this3=this,size=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,progressClb=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.p.flipProgressClb;if(!this.flipDisabled){this.sheetPhysics.getSize()||(this.flipDirection="right");var block=void 0,res=void 0;if(this.sheetPhysics.getSize()<25){var right=this.sheetBlocks[this.sheetBlocks.length-1],PI=Math.PI;0===this.angle?res=this.connectPhysics(block=this.leftCover,this.p.cover.mass,0,this.p.cover.startVelocity,this.p.cover.flexibility,0,function(angle,height){return _this3.set(angle/2,height)},function(angle,height){_this3.set(angle/2,0),_this3.setSheetBlocks(angle?PI/2:0,"closed")},progressClb):right&&"closed"===right.state&&right.angle<=PI/2?(block=size<right.getSize()?this.splitSheetBlock(this.sheetBlocks.length-1,size)[0]:right,res=this.connectPhysics(block,this.p.page.mass*block.getSize(),0,this.p.page.startVelocity,this.p.page.flexibility,0,function(angle,height){return block.set(_this3.getClosedBlockAngle(angle),"opened",height,block.p.first,block.p.last,_this3.flipDirection)},Book.finishAnimationClb.bind({book:this,block:block}),progressClb)):this.angle!==PI/2&&this.angle!==3*PI/2||(res=this.connectPhysics(block=this.rightCover,this.p.cover.mass,0,this.p.cover.startVelocity,this.p.cover.flexibility,0,function(angle,height){_this3.set(PI/2+angle/2,height),angle<PI/2&&_this3.setSheetBlocks(PI/2+1e-7,"closed")},function(angle,height){return _this3.set(PI/2+angle/2,0)},progressClb))}return res}},Book.prototype.clearHoverInfo=function(){this.pageManager.turnOnEvents(),delete this.hoverInfo.block.force,delete this.hoverInfo.block.cornerForce,delete this.hoverInfo},Book.prototype.xSegment=function(){var boxs=this.tmp.boxs,res={};return this.leftCover.physicId?(boxs[0].setFromObject(this.rightCover.three),res.min=-(res.max=boxs[0].max.x)):this.rightCover.physicId?(boxs[0].setFromObject(this.leftCover.three),res.max=-(res.min=boxs[0].min.x)):(boxs[0].setFromObject(this.leftCover.three),boxs[1].setFromObject(this.rightCover.three),boxs[0].union(boxs[1]),res.min=boxs[0].min.x,res.max=boxs[0].max.x),res},Book.prototype.computeTarget=function(point){var x=point.x,seg=(point.y,this.xSegment()),angle=void 0;return angle=(seg.max-x)/(seg.max-seg.min)*Math.PI,Math.max(this.dragAngle,Math.min(Math.PI-this.dragAngle,angle))},Book.prototype.onPickCallback=function(object){var res=!1,block=object.object.userData.self,p=_extends({},object.uv),i=object.face.materialIndex;return i<2&&(p.x=0===i?p.x:1-p.x,block.cornerTarget.testIntersection(null,p)&&block.physicId&&(this.hoverInfo&&this.clearHoverInfo(),block.force=_SheetPhysics2.default.dragForceClb,block.cornerForce=_SheetPhysics2.default.getDragCornerForceClb(this.computeTarget(object.point)),this.dragInfo={object:object,block:block},res=!0,this.pageManager.turnOffEvents())),res},Book.prototype.onDragCallback=function(point){var block=this.dragInfo.block;block.getProps();return block.force=_SheetPhysics2.default.dragForceClb,block.cornerForce=_SheetPhysics2.default.getDragCornerForceClb(this.computeTarget(point)),!0},Book.prototype.onReleaseCallback=function(){delete this.dragInfo.block.force,delete this.dragInfo.block.cornerForce,delete this.dragInfo,this.pageManager.turnOnEvents()},Book.prototype.getFlipping=function(i){return i?this.getLeftFlipping():this.getRightFlipping()},Book.prototype.flip=function(i){var size=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return i?this.flipLeft(size):this.flipRight(size)},Book.prototype.enableMouse=function(enable){this.mouseController=enable},Book.prototype.cornerCallback=function(e,data){var _this4=this;if(this.mouseController){var _data$data=data.data,i=_data$data.i,n=_data$data.n;if("mouseover"===e.type){if(this.hoverInfo&&void 0!==this.hoverInfo.pendings)++this.hoverInfo.pendings;else if(this.hoverInfo&&(console.warn("Wrong state: element is already hover"),this.hoverInfo.n!==n&&this.clearHoverInfo()),!this.hoverInfo&&!this.dragInfo){var res=Promise.resolve(void 0),hover=this.getBlockByPage(n),possible=this.getFlipping(i);if(n>1&&n<2*(this.p.sheets+1)&&hover.physicId&&(hover.angle<.02||hover.angle>Math.PI-.02))res=Promise.resolve(hover);else if(hover===possible){var sheetBlocks=[this.leftCover].concat(this.sheetBlocks,[this.rightCover]),j=sheetBlocks.indexOf(hover),nextBlock=~j?sheetBlocks[j+2*i-1]:void 0;(!nextBlock||!nextBlock.physicId||nextBlock.angle>.02&&nextBlock.angle<Math.PI-.02)&&(res=this.flip(i,1).then(function(block){return block?_this4.sheetPhysics.setParametr(block.physicId,"velocity",0):delete _this4.hoverInfo,block}),this.hoverInfo={pendings:1})}res.then(function(block){if(_this4.hoverInfo&&_this4.hoverInfo.pendings<1&&(block=void 0,delete _this4.hoverInfo),block){_this4.pageManager.turnOffEvents();var p=block.getProps();block.force=_this4.sheetPhysics.getTargetForceClb(p.mass*block.getSize(),i?Math.PI-.02:.02),block.cornerForce=function(){return(i?-1:1)*_SheetPhysics2.default.hoverCornerForceClb()},_this4.sheetPhysics.setParametr(block.physicId,"angle",i?Math.PI-.01:.01),_this4.hoverInfo={n:n,block:block},_this4.update(1/30)}})}}else if(this.hoverInfo&&"mouseout"===e.type)void 0!==this.hoverInfo.pendings?--this.hoverInfo.pendings:n===this.hoverInfo.n&&this.clearHoverInfo();else if("mousedown"===e.type)this.cornerClickData={x:e.pageX,y:e.pageY};else if("click"===e.type){if(Math.sqrt(Math.pow(this.cornerClickData.x-e.pageX,2)+Math.pow(this.cornerClickData.y-e.pageY,2))<5){var _hover=this.getBlockByPage(n);if(_hover.physicId){var id=_hover.physicId,props=_hover.getProps();this.sheetPhysics.setParametr(id,"velocity",(i?-1:1)*props.startVelocity)}}delete this.cornerClickData}}},Book.prototype.addSheetBlock=function(p,block){this.sheetBlocks.splice(p,0,block),this.subscribeSheetBlock(block,2),this.threeSheetBlocks.add(block.three)},Book.prototype.subscribeSheetBlock=function(block,offset){var _this5=this,eventConverter=new _CustomEventConverter2.default(this.visual.wnd,this.visual.doc,_CircleTarget2.default.test),target=new _CircleTarget2.default(.925,.075,.15);target.block=block,target.callback=this.cornerCallback.bind(this),eventConverter.addCustom(target),block.cornerTarget=target,block.three.userData.mouseCallback=function(e,data){var i=data.face.materialIndex;if(i<2){var n=0===i?offset+2*block.p.first:offset+2*block.p.last-1;eventConverter.convert(e,{x:0===i?data.uv.x:1-data.uv.x,y:data.uv.y,i:i,n:n}),_this5.pageManager.transferEventToTexture(n,e,data)}},block.three.userData.touchCallback=function(e,data){var i=data.face.materialIndex;if(i<2){var n=0===i?offset+2*block.p.first:offset+2*block.p.last-1;_this5.pageManager.transferEventToTexture(n,e,data)}},this.visual.drag.addThree(block.three),this.visual.mouseEvents.addThree(block.three),this.visual.touchEvents.addThree(block.three)},Book.prototype.removeSheetBlock=function(block){this.visual.mouseEvents.removeThree(block.three),this.visual.touchEvents.removeThree(block.three),this.visual.drag.removeThree(block.three),this.threeSheetBlocks.remove(block.three),block.dispose()},Book.prototype.removeSheetBlocks=function(first,size){for(var blocks=this.sheetBlocks.splice(first,size),_iterator5=blocks,_isArray5=Array.isArray(_iterator5),_i5=0,_iterator5=_isArray5?_iterator5:_iterator5[Symbol.iterator]();;){var _ref5;if(_isArray5){if(_i5>=_iterator5.length)break;_ref5=_iterator5[_i5++]}else{if(_i5=_iterator5.next(),_i5.done)break;_ref5=_i5.value}var block=_ref5;this.removeSheetBlock(block)}},Book.prototype.setTexture=function(material,n){this.pageManager.setTexture(material,n)},Book.prototype.setPageTexture=function(material,n){this.setTexture(material,n+2)},Book.prototype.setLeftCoverTexture=function(material,n){this.setTexture(material,n)},Book.prototype.setRightCoverTexture=function(material,n){this.setTexture(material,n+2*(this.p.sheets+1))},Book.finishAnimationClb=function(angle){this.block.set(this.book.getClosedBlockAngle(angle).closedAngle,"closed",0);var i=this.book.sheetBlocks.indexOf(this.block);~i&&(0===angle?this.book.mergeSheetBlocks(i,this.book.sheetBlocks.length-i):this.book.mergeSheetBlocks(0,i+1))},Book.prototype.calcBlockForce=function(block,object,angle,velocity,cornerHeight){return block.force?block.force(object,angle,velocity,cornerHeight):0},Book.prototype.calcBlockCornerForce=function(block,object,angle,velocity,cornerHeight){return block.cornerForce?block.cornerForce(object,angle,velocity,cornerHeight):0},Book.prototype.setVisualMode=function(mode){for(var l=Book.lightModes[this.p.lighting][mode],bs=[this.leftCover].concat(this.sheetBlocks,[this.rightCover]),_iterator6=bs,_isArray6=Array.isArray(_iterator6),_i6=0,_iterator6=_isArray6?_iterator6:_iterator6[Symbol.iterator]();;){var _ref6;if(_isArray6){if(_i6>=_iterator6.length)break;_ref6=_iterator6[_i6++]}else{if(_i6=_iterator6.next(),_i6.done)break;_ref6=_i6.value}var b=_ref6;b.mesh.receiveShadow="live"===mode;for(var _iterator7=b.materials,_isArray7=Array.isArray(_iterator7),_i7=0,_iterator7=_isArray7?_iterator7:_iterator7[Symbol.iterator]();;){var _ref7;if(_isArray7){if(_i7>=_iterator7.length)break;_ref7=_iterator7[_i7++]}else{if(_i7=_iterator7.next(),_i7.done)break;_ref7=_i7.value}_ref7.needsUpdate=!0}}this.visual.setLight(l.ambient,l.directional)},Book.prototype.notifyBeforeAnimation=function(){var _this6=this,res=void 0;return this.animationNotification?res=Promise.reject():(this.animationNotification=!0,this.dispatchEvent({type:"beforeAnimation"}),this.setVisualMode("live"),this.flipDisabled=!0,res=this.layerManager.hide().then(function(){return delete _this6.flipDisabled})),res},Book.prototype.notifyAfterAnimation=function(){if(this.animationNotification){var p=this.getPage();this.userDirection.lastTopPage!==p&&(this.userDirection.direction=Math.sign(p-this.userDirection.lastTopPage),this.userDirection.lastTopPage=p),delete this.animationNotification,this.setVisualMode("static"),this.layerManager.show(),this.dispatchEvent({type:"afterAnimation"})}},Book.prototype.getUserDirection=function(){return this.userDirection},Book.prototype.reducePagesWidth=function(reduceWidth){for(var _iterator8=this.sheetBlocks,_isArray8=Array.isArray(_iterator8),_i8=0,_iterator8=_isArray8?_iterator8:_iterator8[Symbol.iterator]();;){var _ref8;if(_isArray8){if(_i8>=_iterator8.length)break;_ref8=_iterator8[_i8++]}else{if(_i8=_iterator8.next(),_i8.done)break;_ref8=_i8.value}_ref8.reduceWidth(reduceWidth)}},Book.prototype.connectPhysics=function(block,mass,angle,velocity,flexibility,coverHeight,simulateClb,removeClb,progressClb){var _this7=this,type=function(){return _this7.hoverInfo?"hover":_this7.dragInfo?"drag":"free"},res=this.sheetPhysics.getSize()?Promise.resolve():this.notifyBeforeAnimation();return block!==this.leftCover&&block!==this.rightCover||(this.bookShadowMaterial.opacity=0),res.then(function(){return block.physicId=_this7.sheetPhysics.addObject(mass,angle,velocity,flexibility,coverHeight,function(angl,ch){simulateClb(angl,ch),progressClb(block,Math.abs(angle-angl)/Math.PI,"process",type()),_this7.calculateShadow(),_this7.updateThree()},function(angl,ch){if(removeClb(angl,ch),delete block.physicId,progressClb(block,Math.abs(angle-angl)/Math.PI,"finish",type()),!_this7.sheetPhysics.getSize()){var p=_this7.getPage();0!==p&&p!==_this7.getPages()-1||_this7.reducePagesWidth(!0)}Promise.resolve().then(function(){_this7.sheetPhysics.getSize()||(_this7.notifyAfterAnimation(),_this7.calculateShadow())}),_this7.updateThree()},function(object,angle,velocity,cornerHeight){return _this7.calcBlockForce(block,object,angle,velocity,cornerHeight)},function(object,angle,velocity,cornerHeight){return _this7.calcBlockCornerForce(block,object,angle,velocity,cornerHeight)}),progressClb(block,0,"init",type()),1===_this7.sheetPhysics.getSize()&&_this7.reducePagesWidth(!1),block}).catch(function(){})},Book.prototype.update=function(dt){var _this8=this;this.lastMousePos.t+=dt,this.isProcessing()&&void 0!==this.lastMousePos.pageX&&this.lastMousePos.t-(this.lastMousePos.lastT||0)>.25&&!this.hoverInfo&&!this.dragInfo&&(this.lastMousePos.lastT=this.lastMousePos.t,Promise.resolve().then(function(){(0,_libs.$)(_this8.visual.element).trigger(_libs.$.Event("mousemove",_this8.lastMousePos))})),this.sheetPhysics.simulate(dt)},Book.prototype.splitSheetBlock=function(i,leftSize){var block=this.sheetBlocks[i];if(block&&leftSize<block.getSize()){var newBlock=new _SheetBlock2.default(this.visual,_extends({},this.p,{setTexture:this.setPageTexture.bind(this)}),block.p.first,block.p.first+leftSize,block.angle,block.state);return block.set(block.angle,block.state,block.corner.height,block.p.first+leftSize,block.p.last),this.addSheetBlock(i,newBlock),[newBlock,block]}},Book.prototype.mergeSheetBlocks=function(first,size){if(first<this.sheetBlocks.length){size=Math.min(this.sheetBlocks.length-first,size);var firstBlock=this.sheetBlocks[first],lastBlock=this.sheetBlocks[first+size-1];firstBlock.set(firstBlock.angle,firstBlock.state,firstBlock.corner.height,firstBlock.p.first,lastBlock.p.last),this.removeSheetBlocks(first+1,size-1)}},Book.prototype.setSheetBlocks=function(angle,state){"closed"===state&&(this.closedAngle=angle),this.sheetBlocks.forEach(function(s){s.physicId||s.set(angle,state)})},Book.prototype.set=function(angle){var height=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.angle=angle;var PI=Math.PI;if(angle<PI/4)this.binder.set(0),this.binder.setLeft(-PI/2+2*angle),this.leftCover.set(PI/2,"opened",height),this.setSheetBlocks(0,"closed"),this.binder.setRight(0),this.rightCover.set(0,"closed",0);else if(angle<2*PI/4){var a=2*(angle-PI/4);this.binder.set(a),this.binder.setLeft(-a),this.leftCover.set(PI/2+a,"opened",height),this.setSheetBlocks(a,"closed"),this.binder.setRight(-a),this.rightCover.set(a,"closed",0)}else if(angle<3*PI/4){var _a=2*(angle-PI/2);this.binder.set(PI/2),this.binder.setLeft(-PI/2),this.leftCover.set(PI,"opened",0),this.binder.setRight(-PI/2),this.rightCover.set(_a,"opened",height)}else if(angle<4*PI/4){var _a2=2*(angle-3*PI/4)+PI/2;this.binder.set(_a2),this.binder.setLeft(-_a2),this.leftCover.set(_a2,"closed",0),this.setSheetBlocks(_a2,"closed"),this.binder.setRight(-PI/2),this.rightCover.set(PI/2,"opened",height)}else if(angle<5*PI/4)this.binder.set(PI),this.binder.setLeft(-PI),this.leftCover.set(PI,"closed",0),this.setSheetBlocks(PI,"closed"),this.binder.setRight(-PI/2-2*(angle-PI)),this.rightCover.set(PI/2,"opened",height);else if(angle<6*PI/4){var _a3=2*(angle-5*PI/4);this.binder.set(PI-_a3),this.binder.setLeft(-PI+_a3),this.leftCover.set(PI-_a3,"closed",0),this.setSheetBlocks(PI-_a3,"closed"),this.binder.setRight(-PI+_a3),this.rightCover.set(PI/2-_a3,"opened",height)}else if(angle<7*PI/4){var _a4=2*(angle-6*PI/4);this.binder.set(PI/2),this.binder.setLeft(-PI/2),this.leftCover.set(PI-_a4,"opened",height),this.binder.setRight(-PI/2),this.rightCover.set(0,"opened",0)}else if(angle<8*PI/4){var _a5=2*(angle-7*PI/4);this.binder.set(PI/2-_a5),this.binder.setLeft(-PI/2),this.leftCover.set(PI/2,"opened",height),this.setSheetBlocks(PI/2-_a5,"closed"),this.binder.setRight(-PI/2+_a5),this.rightCover.set(PI/2-_a5,"closed",0)}},Book.createSideTexture=function(color,type){var c=_GraphUtils2.default.createCanvas(8,8);if("color"===type){var ctx=c.getContext("2d");ctx.beginPath(),ctx.fillStyle=_GraphUtils2.default.color2Rgba(color,1),ctx.rect(0,0,8,7),ctx.fill(),ctx.beginPath(),ctx.fillStyle=_GraphUtils2.default.color2Rgba(_GraphUtils2.default.inverseColor(color,.5),1),ctx.rect(0,7,8,1),ctx.fill()}return c},Book.prototype.prepareProps=function(props){return this.calcProps(Book.mergeProps((0,_book.props)(),props))},Book.mergeProps=function(first,second){return second=second||{},_extends({},first,second,{sheet:_extends({},first.sheet,second.sheet),cover:_extends({},first.cover,second.cover),page:_extends({},first.page,second.page),cssLayerProps:_extends({},first.cssLayerProps,second.cssLayerProps)})},Book.prototype.calcProps=function(props){var depth=props.maxDepth/(props.sheets+6),p=_extends({},props,{sheet:_extends({},props.sheet),cover:_extends({},props.sheet,props.cover),page:_extends({},props.sheet,props.page),cssLayerProps:_extends({},props.cssLayerProps,{$:_libs.$})});p.cover.depth=Math.min(p.cover.depth,3*depth),p.page.depth=Math.min(p.page.depth,depth);var height=10*p.height,width=10*p.width,flexibleCornerK=Math.min(height,width)/width,flipProgressClb=function(){},sheet={sideTexture:p.sheet.sideTexture||Book.createSideTexture(p.sheet.color,p.sheet.side)},cover=_extends({},sheet,p.cover,{flexibleCorner:flexibleCornerK*p.cover.flexibleCorner,depth:10*p.cover.depth,width:width,height:height,padding:10*p.cover.padding}),page=_extends({},sheet,p.page,{flexibleCorner:flexibleCornerK*p.page.flexibleCorner,depth:10*p.page.depth,width:cover.width-cover.padding,height:cover.height-2*cover.padding}),marker={use:!1,color:16711680,size:.01};return cover.color===sheet.color||p.cover.sideTexture||(cover.sideTexture=Book.createSideTexture(cover.color,cover.side)),page.color===sheet.color||p.page.sideTexture||(page.sideTexture=Book.createSideTexture(page.color,page.side)),p.cssLayersLoader&&(p.cssLayersLoader=this.cssLayersLoader(p.cssLayersLoader)),_extends({},p,{scale:10,height:height,width:width,flipProgressClb:flipProgressClb,cover:cover,page:page,marker:marker})},Book.prototype.cssLayersLoader=function(loader){var _this9=this;return function(n,clb){return loader(n,function(ls){for(var nls=[],_iterator9=ls,_isArray9=Array.isArray(_iterator9),_i9=0,_iterator9=_isArray9?_iterator9:_iterator9[Symbol.iterator]();;){var _ref9;if(_isArray9){if(_i9>=_iterator9.length)break;_ref9=_iterator9[_i9++]}else{if(_i9=_iterator9.next(),_i9.done)break;_ref9=_i9.value}var l=_ref9;nls.push(_extends({},l,{js:_this9.cssLayerJsObject(l)}))}return clb(nls)})}},Book.prototype.cssLayerJsObject=function cssLayerJsObject(l){var _this10=this,clIfEx=function(f){var r=void 0;if(f)try{r=f()}catch(e){console.error(e)}return r};return function(c,p){var o={};try{var init=eval(l.js);o=init?init(c,p)||{}:{}}catch(e){console.error(e)}for(var no=_this10.cssLayerJsObjectInit(c,p),ro={},_arr=["hide","hidden","show","shown","dispose"],_loop=function(){var n=_arr[_i10];ro[n]=function(){clIfEx(no[n]),clIfEx(o[n])}},_i10=0;_i10<_arr.length;_i10++)_loop();return ro}},Book.prototype.cssLayerJsObjectInit=function(c,p){var _this11=this;c.find(".go-to-page").on("click",function(e){for(var n=(0,_libs.$)(e.target);n.length&&!n.hasClass("go-to-page");)n=(0,_libs.$)(n[0].parentNode);n=parseInt(n.attr("data-number")),isNaN(n)||(e.preventDefault(),p.scene.ctrl.goToPage(n-1))});var ys=c.find(".youtube");if(ys.length){ys.html('<div style="width:100%;height:100%;"></div>');var p01=function(n,nm,d){return void 0===n.attr(nm)?d:"true"===n.attr(nm)?1:0};_YouTubeApi2.default.init().then(function(){for(var i=0;i<ys.length;++i){var _n=(0,_libs.$)(ys[i]),playerVars={loop:p01(_n,"data-loop",0),controls:p01(_n,"data-controls",1),mute:p01(_n,"data-muted",0)};playerVars.loop&&(playerVars.playlist=_n.attr("data-id"));var player=new YT.Player(_n.find("div")[0],{videoId:_n.attr("data-id"),playerVars:playerVars});_n[0].player=player}})}var ads=c.find(".adsbygoogle");if(ads.length&&!this.visual.wnd.adsbygoogle){this.visual.wnd.adsbygoogle=[];var script=this.visual.doc.createElement("script");script.async=!0,script.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client="+ads.attr("data-ad-client"),this.visual.doc.body.appendChild(script)}return{hide:function(){_this11.pendingPlayers.length&&(_this11.pendingPlayers=[],_this11.dispatchEvent({type:"pendingPlayers"})),c.find(".pause-on-hide").each(function(_,p){return _this11.cssFs.pause(p)})},shown:function(){c.find(".play-on-shown").each(function(_,p){return _this11.cssFs.play(p)}),setTimeout(function(){var update=!1;if(c.find(".adsbygoogle").each(function(_,ad){return update=update||""===(0,_libs.$)(ad).html().trim()}),update)try{_this11.visual.wnd.adsbygoogle.push({})}catch(e){console.error(e)}},100)},dispose:function(){return c.find(".pause-on-hide").each(function(_,p){return _this11.cssFs.pause(p)})}}},Book}(_libs.THREE.EventDispatcher);Book.lightModes={ambient:{static:{ambient:16777215,directional:0},live:{ambient:16316664,directional:986895}},mixed:{static:{ambient:15790320,directional:1052688},live:{ambient:15790320,directional:1052688}}},exports.default=Book},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_libs=__webpack_require__(1),_Controller2=__webpack_require__(15),_Controller3=_interopRequireDefault(_Controller2),_bookController=__webpack_require__(45),_EventsToActions=__webpack_require__(52),_EventsToActions2=_interopRequireDefault(_EventsToActions),_stats=__webpack_require__(75),_stats2=_interopRequireDefault(_stats),_Object3DWatcher=__webpack_require__(58),_Object3DWatcher2=_interopRequireDefault(_Object3DWatcher),_FullScreenX=__webpack_require__(18),_FullScreenX2=_interopRequireDefault(_FullScreenX),BookController=function(_Controller){function BookController(book,view,props){_classCallCheck(this,BookController);var _this=_possibleConstructorReturn(this,_Controller.call(this));_this.navigationControls=!0,_this.book=book,_this.visual=book.visual,_this.p=BookController.prepareProps(props),_this.p.rtl=book.p.rtl,_this.orbit=book.visual.getOrbit(),book.setFlipProgressClb(_this.updateViewIfState.bind(_this)),_this.view=view,_this.bindActions(),_this.state={smartPan:!_this.actions.cmdSmartPan.active,singlePage:!!_this.isSinglePageAvailable()&&(_this.actions.cmdSinglePage.active||_this.actions.cmdSinglePage.activeForMobile&&_this.visual.isMobile()),stats:_this.actions.cmdStats.active,activeSide:1,autoPlay:_this.actions.cmdAutoPlay.active};var box0=new _libs.THREE.Box3,box1=new _libs.THREE.Box3,bookWidth=book.openedBox.max.x-book.openedBox.min.x;return _this.bookWatcher=new _Object3DWatcher2.default(_this.visual,function(){if(_this.state.singlePage)_this.state.activeSide?box0.setFromObject(book.rightCover.three):box0.setFromObject(book.leftCover.three);else{box0.setFromObject(book.leftCover.three),box1.setFromObject(book.rightCover.three),box0.union(box1);var width=Math.max(box0.min.x-box0.min.x,bookWidth),x0=(box0.min.x+box0.max.x)/2;box0.min.x=x0-.5*width,box0.max.x=x0+.5*width}return box0}),_this.bookWatcher.scale=_this.p.scale.default,_this.book.setZoom(_this.bookWatcher.scale,_this.state.singlePage),_this.Stats=new _stats2.default,_this.Stats.domElement.style.position="absolute",_this.Stats.domElement.style.top="0px",_this.binds={onScreenModeChanged:_this.onScreenModeChanged.bind(_this),stats:_this.Stats.update.bind(_this.Stats),onUpdateView:_this.updateView.bind(_this)},_FullScreenX2.default.addEventListener(_this.view.getParentContainer().ownerDocument,_this.binds.onScreenModeChanged),_this.cmdSmartPan(),_this.book.enableLoadingAnimation(_this.p.loadingAnimation.book),_this.p.loadingAnimation.skin&&_this.initLoadingAnimation(),_this.book.enableLoadingAnimation(_this.p.loadingAnimation.book),_this.book.setAutoResolution(_this.p.autoResolution),_this.visual.addEventListener("resize",_this.updateView.bind(_this)),_this.book.addEventListener("pendingPlayers",_this.updateView.bind(_this)),_this.state.autoPlay&&_this.autoPlay(),_this}return _inherits(BookController,_Controller),BookController.prototype.dispose=function(){_FullScreenX2.default.removeEventListener(this.view.getParentContainer().ownerDocument,this.binds.onScreenModeChanged),delete this.book,delete this.view,delete this.visual},BookController.prototype.ready=function(scene){var _this2=this;this.view.templateObject.appLoaded&&Promise.resolve().then(function(){return _this2.view.templateObject.appLoaded(scene)})},BookController.prototype.loadingAnimationHandler=function(){for(var _this3=this,pages=this.book.getTopPages(),visible=!1,_iterator=pages,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}var n=_ref,state=this.book.getPageState(n);if(visible="active"!==state)break}visible=visible||this.printer&&this.printer.loading,visible?this.pendingLoadingAnimation||(this.pendingLoadingAnimation=!0,setTimeout(function(){_this3.pendingLoadingAnimation&&_this3.view&&_this3.view.setState("widLoading",{visible:visible})},2e3)):(delete this.pendingLoadingAnimation,this.view.setState("widLoading",{visible:visible}))},BookController.prototype.initLoadingAnimation=function(){var handler=this.loadingAnimationHandler.bind(this);this.book.addEventListener("beforeAnimation",handler),this.book.addEventListener("afterAnimation",handler),this.book.addEventListener("startRendering",handler),this.book.addEventListener("endRendering",handler)},BookController.prototype.enableNavigation=function(enable){this.navigationControls=enable},BookController.prototype.setTocCtrl=function(tocCtrl){this.tocCtrl=tocCtrl,this.tocCtrl.onChange=this.updateView.bind(this),this.tocCtrl.setActiveTab(this.actions.cmdToc.defaultTab),this.actions.cmdToc.active&&!tocCtrl.visible&&tocCtrl.togle()},BookController.prototype.setShareCtrl=function(shareCtrl){this.shareCtrl=shareCtrl,this.shareCtrl.onChange=this.updateView.bind(this),this.updateView()},BookController.prototype.setPrinter=function(printer){this.printer=printer;var handler=this.loadingAnimationHandler.bind(this);this.printer.addEventListener("loading",handler),this.printer.addEventListener("loaded",handler),this.updateView()},BookController.prototype.setSounds=function(sounds){this.sounds=sounds,sounds.setEnabled(this.actions.cmdSounds.active),this.updateView()},BookController.prototype.onScreenModeChanged=function(e){this.updateView()},BookController.prototype.canZoomIn=function(){return!this.state.smartPan||Math.abs(this.bookWatcher.scale-this.p.scale.max)>this.p.eps},BookController.prototype.canZoomOut=function(){return!this.state.smartPan||Math.abs(this.bookWatcher.scale-this.p.scale.min)>this.p.eps},BookController.prototype.canDefaultZoom=function(){return this.state.smartPan},BookController.prototype.setBookZoom=function(scale){this.book.setZoom(scale,this.state.singlePage)},BookController.prototype.cmdAutoPlay=function(){this.state.autoPlay=!this.state.autoPlay,this.state.autoPlay&&this.autoPlay(),this.updateView()},BookController.prototype.autoPlay=function(){var _this4=this,pendingAutoPlay=Date.now();this.pendingAutoPlay=pendingAutoPlay,setTimeout(function(){if(_this4.pendingAutoPlay===pendingAutoPlay&&_this4.state.autoPlay){if(!_this4.book.isProcessing()){var flipped=void 0;_this4.p.rtl?(flipped=_this4.canFlipLeft())&&_this4.cmdBackward():(flipped=_this4.canFlipRight())&&_this4.cmdForward(),flipped||_this4.goToPage(0)}_this4.autoPlay()}},this.book.p.autoPlayDuration)},BookController.prototype.cmdZoomIn=function(){this.state.smartPan?(this.bookWatcher.scale=Math.min(this.p.scale.max,this.bookWatcher.scale+this.p.scale.delta),this.setBookZoom(this.bookWatcher.scale)):this.orbit.zoomIn(6.6*this.p.scale.delta/.32),this.updateView()},BookController.prototype.cmdZoomOut=function(){this.state.smartPan?(this.bookWatcher.scale=Math.max(this.p.scale.min,this.bookWatcher.scale-this.p.scale.delta),this.setBookZoom(this.bookWatcher.scale)):this.orbit.zoomOut(6.6*this.p.scale.delta/.32),this.updateView()},BookController.prototype.setScale=function(scale){this.bookWatcher.scale=Math.min(this.p.scale.max,Math.max(this.p.scale.min,scale)),this.setBookZoom(this.bookWatcher.scale),this.updateView()},BookController.prototype.cmdDefaultZoom=function(){this.state.smartPan&&(this.bookWatcher.scale=this.p.scale.default,this.setBookZoom(this.bookWatcher.scale),this.updateView())},BookController.prototype.cmdToc=function(){this.tocCtrl&&this.tocCtrl.togle()},BookController.prototype.cmdShare=function(){this.shareCtrl&&this.shareCtrl.togle()},BookController.prototype.cmdBackward=function(){var _this5=this;this.canFlipLeft()&&(this.state.singlePage?(this.state.activeSide=(this.getPage()+1)%2,this.state.activeSide?(this.state.activeSide=0,this.updateView()):this.startFlip(this.book.flipLeft(1)).then(function(block){block&&(_this5.state.activeSide=1)})):this.startFlip(this.book.flipLeft(1)))},BookController.prototype.cmdBigBackward=function(){this.cmdBackward()},BookController.prototype.cmdForward=function(){var _this6=this;this.canFlipRight()&&(this.state.singlePage?(this.state.activeSide=(this.getPage()+1)%2,this.state.activeSide?this.startFlip(this.book.flipRight(1)).then(function(block){block&&(_this6.state.activeSide=0)}):(this.state.activeSide=1,this.updateView())):this.startFlip(this.book.flipRight(1)))},BookController.prototype.cmdBigForward=function(){this.cmdForward()},BookController.prototype.cmdSave=function(){var a=(0,_libs.$)('<a href="'+this.p.downloadURL+'" download target="_blank"></a>').appendTo(this.view.getContainer());a[0].click(),a.remove()},BookController.prototype.cmdPrint=function(){this.printer.print()},BookController.prototype.cmdFullScreen=function(){_FullScreenX2.default.activated()?_FullScreenX2.default.cancel():_FullScreenX2.default.request(this.view.getParentContainer())},BookController.prototype.cmdSmartPan=function(){this.state.smartPan=!this.state.smartPan,this.state.smartPan?(this.orbit.minAzimuthAngle=0,this.orbit.maxAzimuthAngle=0,this.orbit.minPolarAngle=0,this.orbit.maxPolarAngle=Math.PI/4,this.bookWatcher.enabled=!0):(this.orbit.minAzimuthAngle=-1/0,this.orbit.maxAzimuthAngle=1/0,this.orbit.minPolarAngle=0,this.orbit.maxPolarAngle=Math.PI,this.bookWatcher.enabled=!1),this.updateView()},BookController.prototype.isSinglePageAvailable=function(){return 2!==this.book.getPages()},BookController.prototype.cmdSinglePage=function(){this.isSinglePageAvailable()&&(this.state.singlePage=!this.state.singlePage,this.setBookZoom(this.bookWatcher.scale),this.updateView(),this.dispatchAsync({type:"pageMode",value:this.state.singlePage?"single":"double"}))},BookController.prototype.cmdSounds=function(){this.sounds&&this.sounds.togle(),this.updateView()},BookController.prototype.cmdStats=function(){this.state.stats=!this.state.stats,this.state.stats?((0,_libs.$)(this.view.getContainer()).append(this.Stats.domElement),this.visual.addRenderCallback(this.binds.stats)):((0,_libs.$)(this.view.getContainer()).find(this.Stats.domElement).remove(),this.visual.removeRenderCallback(this.binds.stats)),this.updateView()},BookController.prototype.cmdPendingPlay=function(){this.book.resolvePendingPlayers()},BookController.prototype.cmdGotoFirstPage=function(){this.goToPage(0)},BookController.prototype.cmdGotoLastPage=function(){this.goToPage(this.book.getBookPages()-1)},BookController.prototype.goToPage=function(page){var _this7=this;page=Math.max(Math.min(page,this.book.getPages()-1),0),this.p.rtl&&(page=this.book.getBookPages()-1-page);var pageNum=Math.max(Math.min(page,this.book.getBookPages()-1),0);this.state.activeSide=(pageNum+1)%2;var target=Math.max(Math.min(page-1+page%2,this.book.getBookPages()-1),0),current=this.book.getPage(),flips=[],covs=0;if(target!=current){0===current?(flips.push(1),current+=1,++covs):current===this.book.getBookPages()-1&&(flips.push(-1),current-=2,++covs);var cv=0;0===target?(cv=-1,target+=1,++covs):target===this.book.getBookPages()-1&&(cv=1,target-=2,++covs),target-current&&flips.push(Math.ceil((target-current)/2)),cv&&flips.push(cv)}var setClb=function(fl,time,clb){return new Promise(function(resolve){setTimeout(function(){fl<0?_this7.startFlip(_this7.book.flipLeft(-fl,clb)):_this7.startFlip(_this7.book.flipRight(fl,clb)),resolve()},time)})};if(2===covs)setClb(flips[0],0,function(block,progress,state){"finish"==state&&1==progress&&setClb(flips[flips.length-1],0)}).then(function(){return setClb(flips[1],400)});else for(var next=Promise.resolve(),time=0,_iterator2=flips,_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[Symbol.iterator]();;){var _ref2,_ret=function(){if(_isArray2){if(_i2>=_iterator2.length)return"break";_ref2=_iterator2[_i2++]}else{if(_i2=_iterator2.next(),_i2.done)return"break";_ref2=_i2.value}var fl=_ref2,t=time;next=next.then(function(){return setClb(fl,t)}),time=400}();if("break"===_ret)break}},BookController.prototype.startFlip=function(flipRes){var _this8=this;return flipRes?flipRes.then(function(block){return block&&_this8.dispatchAsync({type:"startFlip"}),block}):Promise.resolve(void 0)},BookController.prototype.endFlip=function(block){return this.dispatchAsync({type:"endFlip"}),block},BookController.prototype.getPage=function(){return this.book.getPage()?Math.min(this.book.getPage()+this.state.activeSide,this.book.getBookPages()-1):0},BookController.prototype.getPageForGUI=function(){var n=(this.state.singlePage?this.getPage():this.book.getPage())+1;return this.p.rtl&&(n=this.book.getBookPages()-n+1),n>this.book.getPages()&&(n=this.book.getPages()),n},BookController.prototype.inpPage=function(e,data){this.goToPage(data-1)},BookController.prototype.updateViewIfState=function(block,progress,state,type){"init"!==state&&"finish"!==state||setTimeout(this.updateView.bind(this),100),"finish"===state&&this.endFlip(block)},BookController.prototype.isCmdVisible=function(name){return(0,_libs.$)(this.visual.element).width()<this.p.narrowView.width?void 0===this.actions[name].enabledInNarrow?this.actions[name].enabled:this.actions[name].enabledInNarrow:this.actions[name].enabled},BookController.prototype.updateViewState=function(){this.viewState={cmdZoomIn:{enable:this.canZoomIn(),visible:this.isCmdVisible("cmdZoomIn"),active:!1},cmdZoomOut:{enable:this.canZoomOut(),visible:this.isCmdVisible("cmdZoomOut"),active:!1},cmdDefaultZoom:{enable:this.canDefaultZoom(),visible:this.isCmdVisible("cmdDefaultZoom"),active:this.canDefaultZoom()&&Math.abs(this.bookWatcher.scale-this.p.scale.default)<this.p.eps},cmdToc:{enable:!!this.tocCtrl,visible:this.isCmdVisible("cmdToc")&&this.tocCtrl,active:this.tocCtrl&&this.tocCtrl.visible},cmdShare:{enable:!!this.shareCtrl,visible:this.isCmdVisible("cmdShare")&&this.shareCtrl,active:this.shareCtrl&&this.shareCtrl.visible},inpPages:{visible:!0,value:this.book.getPages()},inpPage:{visible:!0,enable:!this.book.isProcessing()&&this.navigationControls,value:this.getPageForGUI()},cmdSave:{enable:!0,visible:this.isCmdVisible("cmdSave")&&!!this.p.downloadURL,active:!1},cmdPrint:{enable:!0,visible:this.isCmdVisible("cmdPrint")&&!!this.printer,active:!1},cmdFullScreen:{enable:_FullScreenX2.default.available(),visible:this.isCmdVisible("cmdFullScreen"),active:_FullScreenX2.default.available()&&_FullScreenX2.default.activated()},widControls:{enable:!0,visible:!0,active:!1},widSettings:{enable:!0,visible:this.isCmdVisible("widSettings"),active:!1},widToolbar:{enable:!0,visible:this.isCmdVisible("widToolbar"),active:!1},cmdSmartPan:{enable:!0,visible:this.isCmdVisible("cmdSmartPan"),active:this.state.smartPan},cmdSinglePage:{enable:this.isSinglePageAvailable(),visible:this.isCmdVisible("cmdSinglePage"),active:this.state.singlePage},cmdSounds:{enable:!0,visible:this.isCmdVisible("cmdSounds")&&!!this.sounds,active:!!this.sounds&&this.sounds.enabled},cmdStats:{enable:!0,visible:this.isCmdVisible("cmdStats"),active:this.state.stats},cmdAutoPlay:{enable:!0,visible:this.isCmdVisible("cmdAutoPlay"),active:this.state.autoPlay},cmdPendingPlay:{enable:!0,visible:!0,active:!1},widPendingPlay:{enable:!0,visible:this.book.hasPendingPlayers(),active:!1}};for(var left=this.canFlipLeft(),right=this.canFlipRight(),flippersEnable={cmdBackward:left,cmdBigBackward:left,cmdForward:right,cmdBigForward:right,cmdGotoFirstPage:left,cmdGotoLastPage:right},_iterator3=Object.keys(flippersEnable),_isArray3=Array.isArray(_iterator3),_i3=0,_iterator3=_isArray3?_iterator3:_iterator3[Symbol.iterator]();;){var _ref3;if(_isArray3){if(_i3>=_iterator3.length)break;_ref3=_iterator3[_i3++]}else{if(_i3=_iterator3.next(),_i3.done)break;_ref3=_i3.value}var name=_ref3;this.viewState[name]={enable:flippersEnable[name],visible:this.isCmdVisible(name),active:!1}}},BookController.prototype.canFlipLeft=function(){return this.navigationControls&&(!!this.book.getLeftFlipping()||this.state.singlePage&&this.p.rtl&&2===this.getPage())},BookController.prototype.canFlipRight=function(){return this.navigationControls&&(!!this.book.getRightFlipping()||this.state.singlePage&&!this.p.rtl&&this.getPage()===this.book.getPages()-2)},BookController.prototype.updateView=function(){if(this.view){this.updateViewState();for(var _iterator4=Object.keys(this.viewState),_isArray4=Array.isArray(_iterator4),_i4=0,_iterator4=_isArray4?_iterator4:_iterator4[Symbol.iterator]();;){var _ref4;if(_isArray4){if(_i4>=_iterator4.length)break;_ref4=_iterator4[_i4++]}else{if(_i4=_iterator4.next(),_i4.done)break;_ref4=_i4.value}var name=_ref4;this.view.setState(name,this.viewState[name])}}},BookController.prototype.getActions=function(){var _this9=this,isSwipping=function(name){return _this9.actions.touchCmdSwipe.enabled&&_this9.actions.touchCmdSwipe.code===_this9.actions[name].code&&_this9.state.smartPan&&_this9.bookWatcher.scale<=1},cmds={};for(var name in this)!function(name){0===name.indexOf("cmd")&&(cmds[name]={activate:function(){_this9.viewState&&_this9.viewState[name].enable&&_this9[name].apply(_this9,arguments)}})}(name);return _extends({},cmds,{cmdPanLeft:{activate:function(e){return _this9.orbit.actions.pan(e,{state:"move",dx:-_this9.p.pan.speed,dy:0})}},cmdPanRight:{activate:function(e){return _this9.orbit.actions.pan(e,{state:"move",dx:_this9.p.pan.speed,dy:0})}},cmdPanUp:{activate:function(e){return _this9.orbit.actions.pan(e,{state:"move",dx:0,dy:-_this9.p.pan.speed})}},cmdPanDown:{activate:function(e){return _this9.orbit.actions.pan(e,{state:"move",dx:0,dy:_this9.p.pan.speed})}},mouseCmdRotate:{activate:this.orbit.actions.rotate},mouseCmdDragZoom:{activate:function(e,data){data.dy>0?_this9.cmdZoomOut():data.dy<0&&_this9.cmdZoomIn()}},mouseCmdPan:{activate:this.orbit.actions.pan},mouseCmdWheelZoom:{activate:function(e){var scale=_this9.bookWatcher.scale;e.deltaY<0?_this9.cmdZoomOut():e.deltaY>0&&_this9.cmdZoomIn(),(!_this9.state.smartPan||Math.abs(_this9.bookWatcher.scale-scale)>1e-4)&&e.preventDefault()}},touchCmdRotate:{activate:function(e,data){isSwipping("touchCmdRotate")||("move"===data.state&&e.preventDefault(),_this9.orbit.actions.rotate(e,data))}},touchCmdZoom:{activate:function(e,data){if(!isSwipping("touchCmdZoom")){var l=function(v){return Math.sqrt(v.x*v.x+v.y*v.y)};"start"===data.state?_this9.touchZoomData={l:l(data),scale:_this9.bookWatcher.scale}:"move"===data.state&&(e.preventDefault(),_this9.setScale(l(data)/_this9.touchZoomData.l*_this9.touchZoomData.scale))}}},touchCmdPan:{activate:function(e,data){isSwipping("touchCmdPan")||"move"===data.state&&(!_this9.state.smartPan||_this9.bookWatcher.scale>1)&&(e.preventDefault(),_this9.orbit.actions.pan(e,data))}},touchCmdSwipe:{activate:function(e,data){if(isSwipping("touchCmdSwipe"))if("start"===data.state){var touch=(e.touches||e.originalEvent.touches)[_this9.actions.touchCmdSwipe.code-1];_this9.swipeData={handled:!1,x0:touch.pageX,y0:touch.pageY,x:touch.pageX,y:touch.pageY}}else"move"===data.state?_this9.swipeData.handled||(_this9.swipeData=_extends({},_this9.swipeData,{x:_this9.swipeData.x+data.dx,y:_this9.swipeData.y+data.dy}),Math.abs(_this9.swipeData.x0-_this9.swipeData.x)>100&&(_this9.swipeData.x0>_this9.swipeData.x?_this9.cmdForward():_this9.cmdBackward(),_this9.swipeData.handled=!0)):delete _this9.swipeData}},widSettings:{activate:function(){}},widToolbar:{activate:function(){}}})},BookController.prototype.bindActions=function(){var _this10=this;this.eToA=new _EventsToActions2.default((0,_libs.$)(this.visual.element)),this.eToA.addAction(function(e){return e.preventDefault()},"contextmenu",_EventsToActions2.default.mouseButtons.Right,0),this.eToA.addAction(function(e){return(0,_libs.$)(_this10.view.getParentContainer()).trigger(e)},"keydown",27,0),this.actions=this.getActions();for(var _iterator5=Object.keys(this.actions),_isArray5=Array.isArray(_iterator5),_i5=0,_iterator5=_isArray5?_iterator5:_iterator5[Symbol.iterator]();;){var _ref5;if(_isArray5){if(_i5>=_iterator5.length)break;_ref5=_iterator5[_i5++]}else{if(_i5=_iterator5.next(),_i5.done)break;_ref5=_i5.value}var name=_ref5,action=_extends({},this.actions[name],this.p.actions[name]);if(this.actions[name]=action,0!==name.indexOf("mouseCmd")&&0!==name.indexOf("touchCmd")||action.enabled){var flags=action.flags||0;action.type?this.eToA.addAction(action.activate,action.type,action.code,flags):void 0!==action.code&&this.eToA.addAction(action.activate,"keydown",action.code,flags)}}},BookController.prepareProps=function(props){return BookController.calcProps(BookController.mergeProps((0,_bookController.props)(),props))},BookController.setActions=function(props,actions){for(var _iterator6=Object.keys(actions||{}),_isArray6=Array.isArray(_iterator6),_i6=0,_iterator6=_isArray6?_iterator6:_iterator6[Symbol.iterator]();;){var _ref6;if(_isArray6){if(_i6>=_iterator6.length)break;_ref6=_iterator6[_i6++]}else{if(_i6=_iterator6.next(),_i6.done)break;_ref6=_i6.value}var name=_ref6;props.actions[name]=_extends({},props.actions[name],actions[name])}},BookController.mergeProps=function(first,second){function merge(first,second){second=second||{};for(var props=_extends({},first,second),_iterator7=Object.keys(first),_isArray7=Array.isArray(_iterator7),_i7=0,_iterator7=_isArray7?_iterator7:_iterator7[Symbol.iterator]();;){var _ref7;if(_isArray7){if(_i7>=_iterator7.length)break;_ref7=_iterator7[_i7++]}else{if(_i7=_iterator7.next(),_i7.done)break;_ref7=_i7.value}var name=_ref7;"object"===_typeof(first[name])&&(props[name]=merge(first[name],second[name]))}return props}second=second||{};var props=merge(first,second);return BookController.setActions(props,first.actions),BookController.setActions(props,second.actions),props},BookController.calcProps=function(props){return props.scale.delta=(props.scale.max-props.scale.min)/props.scale.levels,props},BookController}(_Controller3.default);exports.default=BookController},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _libs=__webpack_require__(1),BookPrinter=function(_THREE$EventDispatche){function BookPrinter(context,book,styleSheet){_classCallCheck(this,BookPrinter);var _this=_possibleConstructorReturn(this,_THREE$EventDispatche.call(this));_this.book=book,_this.styleSheet=styleSheet,_this.wnd=context.wnd,_this.doc=context.doc,_this.pageCallback=book.getPageCallback();var test=_this.pageCallback(0);return _this.type=test.type,"pdf"===_this.type&&(_this.pdfSrc=test.src.src),_this}return _inherits(BookPrinter,_THREE$EventDispatche),BookPrinter.prototype.cancel=function(){this.canceled=!0},BookPrinter.prototype.dispose=function(){this.frame&&(this.frame.remove(),delete this.frame)},BookPrinter.prototype.print=function(){var _this2=this;if(!this.loading)if(delete this.canceled,"pdf"===this.type){var printWnd=void 0,callManually=!1;this.useIFrame()?(callManually=!!this.frame,this.frame||(this.frame=(0,_libs.$)('<iframe src="'+this.pdfSrc+'" style="display: none;"></iframe>').appendTo(document.body)),printWnd=this.frame[0].contentWindow):printWnd=this.wnd.open(this.pdfSrc),callManually?printWnd.print():(this.loading=!0,this.dispatchEvent({type:"loading"}),(0,_libs.$)(this.frame).on("load",function(){setTimeout(function(){delete _this2.loading,_this2.dispatchEvent({type:"loaded"});try{printWnd.print()}catch(e){console.error(e)}},1e3)}))}else this.renderContent().then(function(content){var printWnd=_this2.wnd.open(),printDoc=printWnd.document,html=('\n            <!DOCTYPE html>\n            <html>\n              <head>\n                <meta charset="utf-8">\n                <title>3D FlipBook - Printing</title>\n                '+content.head+'\n                <script type="text/javascript">\n                  function printDocument() {\n                    window.print();\n                    window.close();\n                  }\n                  function init() {\n                    setTimeout(printDocument, 100);\n                  }\n                <\/script>\n              </head>\n              <body onload="init()">\n                '+content.body+"\n              </body>\n            </html>\n          ").fb3dQFilter();printDoc.open(),printDoc.write(html),printDoc.close()}).catch(function(e){return console.warn("3D FlipBook - Printing was canceled")})},BookPrinter.prototype.progress=function(v){if(this.canceled)throw"Cancel Printing";this.onProgress&&this.onProgress(Math.floor(100*v))},BookPrinter.prototype.renderContent=function(){for(var _this3=this,pages=this.book.getPages(),head=new Set,body=[],done=Promise.resolve(),page=0;page<pages;++page)!function(page){var info=_this3.pageCallback(page);"image"===info.type?done=done.then(function(){return _this3.progress(page/pages),_this3.renderImage(head,body,info.src)}):"html"===info.type&&(done=done.then(function(){return _this3.progress(page/pages),_this3.renderHtml(head,body,info.src)}))}(page);return done.then(function(){return _this3.progress(1),{head:_this3.renderHead(head),body:body.join("\n")}})},BookPrinter.wrap=function(content){return'<div class="fb3d-printer-page">'+content+"</div>"},BookPrinter.prototype.renderImage=function(head,body,src){body.push(BookPrinter.wrap('<img src="'+src+'" />'))},BookPrinter.prototype.renderHtml=function(head,body,src){return new Promise(function(resolve,reject){_libs.$.get(src,function(html){for(var links=html.match(/<link.*?>/gi)||[],_iterator=links,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}var link=_ref;if(link.match(/stylesheet/i)){var href=link.match(/href\s*=\s*['"](.*)['"]/i);href&&head.add(href[1])}}var content=html.match(/<body.*?>([\S\s]*)<\/body>/i);content&&body.push(BookPrinter.wrap(content[1])),resolve()}).fail(function(e){console.error(e.responseText),reject()})})},BookPrinter.prototype.renderHead=function(head){var content=[];return head.forEach(function(k){return content.push('<link rel="stylesheet" href="'+k+'">')}),content.push(this.styleSheet?'<link rel="stylesheet" href="'+this.styleSheet+'">':BookPrinter.defaultStyleSheet()),content.join("\n")},BookPrinter.prototype.useIFrame=function(){var isChromium=this.wnd.chrome,winNav=this.wnd.navigator,vendorName=winNav.vendor,isIEedge=winNav.userAgent.indexOf("Edge")>-1,isIOSChrome=winNav.userAgent.match("CriOS");return!!isIOSChrome||!(!isChromium||"Google Inc."!==vendorName||isIEedge),!0},BookPrinter.defaultStyleSheet=function(){return'\n      <style type="text/css">\n        body {\n          margin: 0;\n          padding: 0;\n        }\n        .fb3d-printer-page {\n          page-break-after: always;\n        }\n      </style>\n    '.fb3dQFilter()},BookPrinter}(_libs.THREE.EventDispatcher);exports.default=BookPrinter},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _View2=(__webpack_require__(1),__webpack_require__(69)),_View3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_View2),BookView=function(_View){function BookView(container,onLoad,template,handler){return _classCallCheck(this,BookView),_possibleConstructorReturn(this,_View.call(this,container,onLoad,template,handler))}return _inherits(BookView,_View),BookView.prototype.initView=function(){this.view=this.container.find(".view"),this.bookmarksView=this.container.find(".widBookmarks"),this.thumbnailsView=this.container.find(".widThumbnails"),this.searchView=this.container.find(".widSearch")},BookView.prototype.getHandlers=function(id){var _this2=this;return"inpPage"===id?[{inpPage:function(e,data){return _this2.callLater(_View.prototype.getHandlers.call(_this2,id),id,e,data,BookView.PAGE_HANDLER_DELAY)}}]:_View.prototype.getHandlers.call(this,id)},BookView.prototype.onItemStateChanged=function(id,state){"cmdFullScreen"===id&&(state.active?this.parentContainer.addClass("fullscreen"):this.parentContainer.removeClass("fullscreen"))},BookView.prototype.getView=function(){return this.view},BookView.prototype.getBookmarksView=function(){return this.bookmarksView},BookView.prototype.getThumbnailsView=function(){return this.thumbnailsView},BookView.prototype.getSearchView=function(){return this.searchView},BookView.prototype.getForms=function(){return[]},BookView.prototype.getLinks=function(){return["cmdZoomIn","cmdZoomOut","cmdDefaultZoom","cmdToc","cmdBackward","cmdBigBackward","cmdForward","cmdBigForward","cmdSave","cmdPrint","cmdFullScreen","cmdSmartPan","cmdSinglePage","cmdSounds","cmdStats","cmdShare","cmdCloseToc","cmdCloseShare","cmdBookmarks","cmdSearch","cmdThumbnails","cmdPendingPlay","cmdFacebook","cmdTwitter","cmdEmail","cmdAutoPlay","cmdGotoFirstPage","cmdGotoLastPage"]},BookView.prototype.getWidgets=function(){return["widLoadingProgress","widUserMessage","widFloatWnd","widShare","widTocMenu","widBookmarks","widThumbnails","widSearch","widControls","widSettings","widLoading","widPendingPlay","widToolbar"]},BookView.prototype.getInputs=function(){return["inpPage","inpPages"]},BookView.prototype.getTexts=function(){return["txtLoadingProgress","txtUserMessage","txtShareLink"]},BookView.prototype.getTemplate=function(){return{html:"templates/default-book-view.html",styles:["css/black-book-view.css"],links:[],script:"js/default-book-view.js"}},BookView}(_View3.default);BookView.PAGE_HANDLER_DELAY=1e3,exports.default=BookView},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _BookPropsBuilder2=__webpack_require__(9),_BookPropsBuilder3=_interopRequireDefault(_BookPropsBuilder2),_ImageFactory=__webpack_require__(8),_ImageFactory2=_interopRequireDefault(_ImageFactory),ClbBookPropsBuilder=function(_BookPropsBuilder){function ClbBookPropsBuilder(context,pageCallback,pages,onReady,style){_classCallCheck(this,ClbBookPropsBuilder);var _this=_possibleConstructorReturn(this,_BookPropsBuilder.call(this,onReady,style));if(_this.calcSheets(pages),_this.pages=pages,_this.pageCallback=pageCallback,_this.binds={pageCallback:pageCallback.bind(_this)},_this.imageFactory=new _ImageFactory2.default(context),pages>0){var test=_this.imageFactory.build(pageCallback(0),0,_this.defaults.sheet.widthTexels,_this.defaults.sheet.heightTexels,_this.defaults.sheet.color);test.onLoad=function(){_this.calcProps(test.width,test.height),test.dispose(),_this.ready()}}else _this.props=_this.defaults,_this.ready();return _this}return _inherits(ClbBookPropsBuilder,_BookPropsBuilder),ClbBookPropsBuilder}(_BookPropsBuilder3.default);exports.default=ClbBookPropsBuilder},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_SheetBlock2=__webpack_require__(10),_SheetBlock3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_SheetBlock2),Cover=function(_SheetBlock){function Cover(visual,p,angle,state){return _classCallCheck(this,Cover),_possibleConstructorReturn(this,_SheetBlock.call(this,visual,p,0,1,angle,state))}return _inherits(Cover,_SheetBlock),Cover.prototype.getProps=function(){return _extends({},this.p.cover,{sheets:1})},Cover.prototype.loadPoints=function(){return{interpolationPoints:[{x:[[0,.2877,.6347,.8174,1],[0,.2831,.6256,.8082,.9909],[0,.2603,.5936,.7763,.9589],[0,.137,.3881,.5342,.6758],[0,0,0,0,0]],y:[[0,0,0,0,0],[0,.02,.005,-.001,-.0025],[0,.04,.01,-.002,-.005],[0,.2466,.4795,.5708,.6758],[0,.2877,.6347,.8174,1]]}],openedInterpolationIndeces:[{left:[2,3,4],right:[2,3,4]}],closedInterpolationIndeces:[[0,1,2]]}},Cover}(_SheetBlock3.default);exports.default=Cover},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_SheetCssLayer=__webpack_require__(40),_SheetCssLayer2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_SheetCssLayer),CssLayersManager=function(){function CssLayersManager(book){_classCallCheck(this,CssLayersManager),this.book=book,this.props=book.p.cssLayerProps,this.visual=book.visual,this.pageManager=book.pageManager,this.wrappers={},this.pendings=[]}return CssLayersManager.prototype.getActives=function(){var page=this.book.getPage(),pages=this.book.getBookPages(),acs=0===page||page===pages-1?[page]:[page,page+1];return this.wrappers[0]||0===page||(acs=[0].concat(acs)),acs},CssLayersManager.prototype.dispose=function(){for(var _iterator=Object.values(this.wrappers),_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}_ref.layers.forEach(function(l){return l.dispose()})}delete this.wrappers},CssLayersManager.prototype.show=function(){var _this=this;this.hidden=!1;for(var _iterator2=this.getActives(),_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[Symbol.iterator]();;){var _ref2;if("break"===function(){if(_isArray2){if(_i2>=_iterator2.length)return"break";_ref2=_iterator2[_i2++]}else{if(_i2=_iterator2.next(),_i2.done)return"break";_ref2=_i2.value}var n=_ref2,w=_this.wrappers[n];if(w){if("ready"===w.state&&w.layers.length){var block=_this.book.getBlockByPage(n);w.layers.forEach(function(l){l.isHidden()&&(l.update(block),l.show())})}}else{var _w=_this.wrappers[n]={state:"loading",layers:[]};Promise.resolve().then(function(){_this.pageManager.getLayers(n,function(layers){var finish=function(){if(layers.length&&_this.wrappers){for(var _block=_this.book.getBlockByPage(n),_iterator3=layers,_isArray3=Array.isArray(_iterator3),_i3=0,_iterator3=_isArray3?_iterator3:_iterator3[Symbol.iterator]();;){var _ref3;if(_isArray3){if(_i3>=_iterator3.length)break;_ref3=_iterator3[_i3++]}else{if(_i3=_iterator3.next(),_i3.done)break;_ref3=_i3.value}var l=_ref3,sl=new _SheetCssLayer2.default(_this.visual,_block,_extends({},_this.props,{pageNumber:n}));_w.layers.push(sl),sl.set(l.css,l.html,l.js)}setTimeout(function(){!_this.hidden&&~_this.getActives().indexOf(n)&&_w.layers.forEach(function(l){return l.show()})},10)}_w.state="ready"};if(!_this.wrappers||0!==n&&"loading"===_this.wrappers[0].state)_this.pendings.push(finish);else if(finish(),0===n){for(var _iterator4=_this.pendings,_isArray4=Array.isArray(_iterator4),_i4=0,_iterator4=_isArray4?_iterator4:_iterator4[Symbol.iterator]();;){var _ref4;if(_isArray4){if(_i4>=_iterator4.length)break;_ref4=_iterator4[_i4++]}else{if(_i4=_iterator4.next(),_i4.done)break;_ref4=_i4.value}var f=_ref4;f()}_this.pendings=[]}})})}}())break}},CssLayersManager.prototype.hide=function(){this.hidden=!0;for(var wait=[],_iterator5=Object.values(this.wrappers),_isArray5=Array.isArray(_iterator5),_i5=0,_iterator5=_isArray5?_iterator5:_iterator5[Symbol.iterator]();;){var _ref5;if(_isArray5){if(_i5>=_iterator5.length)break;_ref5=_iterator5[_i5++]}else{if(_i5=_iterator5.next(),_i5.done)break;_ref5=_i5.value}_ref5.layers.forEach(function(l){return wait.push(l.hide())})}return Promise.all(wait)},CssLayersManager}();exports.default=CssLayersManager},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_libs=__webpack_require__(1),_Cache=__webpack_require__(14),_Cache2=_interopRequireDefault(_Cache),_LoadingAnimation=__webpack_require__(55),_LoadingAnimation2=_interopRequireDefault(_LoadingAnimation),_ImageFactory=__webpack_require__(8),_ImageFactory2=_interopRequireDefault(_ImageFactory),_TextureAnimator=__webpack_require__(63),_TextureAnimator2=_interopRequireDefault(_TextureAnimator),_GraphUtils=__webpack_require__(4),_GraphUtils2=_interopRequireDefault(_GraphUtils),PageManager=function(){function PageManager(visual,book,p){_classCallCheck(this,PageManager),this.visual=visual,this.book=book,this.pageQuery="",this.p=p,this.pageCache=new _Cache2.default(p.cachedPages),this.resourcesCache=new _Cache2.default,this.canvases=[];for(var i=0;i<5;++i){var c=_GraphUtils2.default.createCanvas();this.canvases.push({c:c,ctx:c.getContext("2d",{willReadFrequently:!0,desynchronized:!1})})}this.nextCanvas=0,this.imageFactory=new _ImageFactory2.default(_extends({},visual,{dispatchEvent:book.dispatchEvent.bind(book),renderCanvas:this.canvases[0].c,renderCanvasCtx:this.canvases[0].ctx}),this.resourcesCache),this.loadings=[],this.renderQueue=[],this.predictedRequests=[],this.tmpMaterial=new _libs.THREE.MeshBasicMaterial,visual.addObject(new _libs.THREE.Mesh(new _libs.THREE.PlaneGeometry(.001,.001),this.tmpMaterial)),this.loadingAnimation=!0,this.loading={},this.loading[p.cover.color]=this.createLoadingTexture(p.cover),p.page.color!==p.cover.color&&(this.loading[p.page.color]=this.createLoadingTexture(p.page)),this.book.addEventListener("afterAnimation",this.loadPredictedPages.bind(this)),this.turnOnEvents(),visual.addRenderCallback(this.update.bind(this)),Promise.resolve().then(this.updateRenderQueue.bind(this))}return PageManager.prototype.createLoadingTexture=function(p){var heightTexels=p.height/p.width*p.widthTexels,scale=Math.sqrt(1262992.5/(p.widthTexels*heightTexels)),animation=new _LoadingAnimation2.default(scale*p.widthTexels,scale*heightTexels,p.color),animator=new _TextureAnimator2.default(animation.createSprite(6),6,1,6,.2);return animation.dispose(),animator},PageManager.prototype.dispose=function(){this.turnOffEvents();for(var _iterator=Object.keys(this.loading),_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}var color=_ref;this.loading[color].dispose()}delete this.loading,this.resourcesCache.dispose(),this.pageCache.dispose();for(var _iterator2=this.canvases,_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[Symbol.iterator]();;){var _ref2;if(_isArray2){if(_i2>=_iterator2.length)break;_ref2=_iterator2[_i2++]}else{if(_i2=_iterator2.next(),_i2.done)break;_ref2=_i2.value}var o=_ref2;o.c.height=o.c.width=0}delete this.canvases},PageManager.prototype.isCover=function(n){return n<2||n>=2*(this.p.sheets+1)},PageManager.prototype.isMobile=function(){return this.visual.isMobile()},PageManager.prototype.getPageState=function(n){var object=this.pageCache.get(n);return object?object.state:void 0},PageManager.prototype.enableLoadingAnimation=function(enable){this.loadingAnimation=enable;for(var _iterator3=this.loadings,_isArray3=Array.isArray(_iterator3),_i3=0,_iterator3=_isArray3?_iterator3:_iterator3[Symbol.iterator]();;){var _ref3;if(_isArray3){if(_i3>=_iterator3.length)break;_ref3=_iterator3[_i3++]}else{if(_i3=_iterator3.next(),_i3.done)break;_ref3=_i3.value}var o=_ref3;this.setupMaterial(o)}},PageManager.prototype.update=function(dt){if(this.loadingAnimation){for(var loading={},_iterator4=this.loadings,_isArray4=Array.isArray(_iterator4),_i4=0,_iterator4=_isArray4?_iterator4:_iterator4[Symbol.iterator]();;){var _ref4;if(_isArray4){if(_i4>=_iterator4.length)break;_ref4=_iterator4[_i4++]}else{if(_i4=_iterator4.next(),_i4.done)break;_ref4=_i4.value}var o=_ref4;o.isActive()&&(loading[o.color]=!0)}for(var _iterator5=Object.keys(loading),_isArray5=Array.isArray(_iterator5),_i5=0,_iterator5=_isArray5?_iterator5:_iterator5[Symbol.iterator]();;){var _ref5;if(_isArray5){if(_i5>=_iterator5.length)break;_ref5=_iterator5[_i5++]}else{if(_i5=_iterator5.next(),_i5.done)break;_ref5=_i5.value}var color=_ref5;this.loading[color].update(dt),this.book.updateThree()}}},PageManager.prototype.removeFromLoadings=function(o){var i=this.loadings.indexOf(o);~i&&this.loadings.splice(i,1)},PageManager.prototype.removeFromRenderQueue=function(o){var i=this.renderQueue.indexOf(o);~i&&this.renderQueue.splice(i,1)},PageManager.prototype.refreshPageQuery=function(n){var query=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.pageQuery=query;var object=this.pageCache.get(n);object&&object.wrapper&&object.wrapper.setQuery&&(this.pageCache.remove(n)||(object.wrapper.setQuery(query),this.pushInRenderQueue(object)))},PageManager.prototype.refreshZoom=function(){var _this=this;if(this.p.autoResolution.enabled){this.rendering&&this.rendering.wrapper&&this.rendering.wrapper.cancelRender();var es=[];this.pageCache.forEach(function(e){es.push(e)}),es.forEach(function(e){var object=e[1];object&&object.wrapper&&(_this.pageCache.remove(e[0])||_this.pushInRenderQueue(object))})}},PageManager.prototype.getLayers=function(n,clb){var _this2=this;(this.p.cssLayersLoader?this.p.cssLayersLoader:function(n,f){return f([])})(n,function(layers){var object=_this2.pageCache.get(n);object&&(object.wrapper.getCSSLayer&&_this2.p.highlightLinks?object.wrapper.getCSSLayer():Promise.resolve()).then(function(l){(l||layers[0])&&(l=l||{},layers[0]=layers[0]||{},layers[0]={html:(l.html||"")+(layers[0].html||""),css:(l.css||"")+(layers[0].css||""),js:layers[0].js}),"active"!==object.state?object.pendings.push({clb:clb,args:[layers]}):clb(layers)})})},PageManager.prototype.resolvePendings=function(pendings){for(var _iterator6=pendings,_isArray6=Array.isArray(_iterator6),_i6=0,_iterator6=_isArray6?_iterator6:_iterator6[Symbol.iterator]();;){var _ref6;if(_isArray6){if(_i6>=_iterator6.length)break;_ref6=_iterator6[_i6++]}else{if(_i6=_iterator6.next(),_i6.done)break;_ref6=_i6.value}var p=_ref6;try{p.clb.apply(p,p.args)}catch(e){console.error(e)}}pendings.splice(0,pendings.length)},PageManager.prototype.rtlPageN=function(n){return this.p.rtl?this.book.getBookPages()-1-n:n},PageManager.prototype.load=function(material,n){var _this3=this,pi=this.rtlPageN(n)<this.book.getPages()?this.p.pageCallback(this.rtlPageN(n)):{type:"blank"},p=this.isCover(n)?this.p.cover:this.p.page,o={n:n,texture:new _libs.THREE.Texture,wrapper:null,state:"loading",locked:function(n){return"loading"===o.state||"rendering"===o.state||_this3.book.isActivePage(n)},color:p.color,isActive:function(){return _this3.book.isActivePage(n)},isTop:function(){return~_this3.book.getTopPages().indexOf(n)},dispose:function(){_this3.removeFromLoadings(o),_this3.removeFromRenderQueue(o),o.wrapper&&o.wrapper.dispose&&o.wrapper.dispose(),o.texture.dispose(),delete o.texture,delete o.wrapper},pendings:[]};return o.texture.minFilter=_libs.THREE.LinearFilter,this.loadings.push(o),this.setMaterial(o,material),Promise.resolve().then(function(){if(o.texture){o.widthTexels=pi.widthTexels||p.widthTexels,o.heightTexels=p.height/p.width*p.widthTexels;var res=_this3.calcResolution(o);o.wrapper=_this3.imageFactory.build(pi,void 0===pi.number?_this3.rtlPageN(n):pi.number,res.width,res.height,p.color,_this3.p.injector),o.wrapper.setQuery&&o.wrapper.setQuery(_this3.pageQuery),o.simulate=pi.interactive?(o.wrapper.simulate||function(){}).bind(o.wrapper):void 0,o.wrapper.onLoad=function(){o.state="loaded",_this3.pushInRenderQueue(o)},o.wrapper.onChange=function(image,canceled){canceled?("queuedForRender"!==o.state&&(o.state="loaded",o.wrapper&&_this3.pushInRenderQueue(_this3.rendering)),delete _this3.rendering):o.texture&&(_this3.removeFromLoadings(o),o.material&&(o.material.map=o.texture,o.material.color=new _libs.THREE.Color(16777215),o.material.needsUpdate=!0),o.texture.image=image,o.texture.needsUpdate=!0,o.texture.onUpdate=function(){o.texture&&(o.texture.onUpdate=null),_this3.tmpMaterial.map=null,_this3.tmpMaterial.needsUpdate=!0,"queuedForRender"!==o.state&&(o.state="active",_this3.resolvePendings(o.pendings)),delete _this3.rendering,_this3.book.dispatchEvent({type:"endRendering",page:o.n})},_this3.tmpMaterial.map=o.texture,_this3.tmpMaterial.needsUpdate=!0)}}}),this.pageCache.put(n,o)},PageManager.prototype.isSinglePage=function(o){return this.p.singlePage},PageManager.prototype.calcResolution=function(o){var res=void 0;if(this.p.autoResolution.enabled){var k=this.p.autoResolution.coefficient*this.p.zoom*Math.sqrt(this.visual.wnd.devicePixelRatio||1)*Math.min((this.isSinglePage(o)?1:.5)*this.visual.width()/o.widthTexels,this.visual.height()/o.heightTexels);res={width:k*o.widthTexels,height:k*o.heightTexels};var minRes=this.p.autoResolution.min,maxRes=this.p.autoResolution.max;res.width<minRes&&(res={width:minRes,height:minRes*o.heightTexels/o.widthTexels}),res.height<minRes&&(res={width:minRes*o.widthTexels/o.heightTexels,height:minRes}),res.width>maxRes&&(res={width:maxRes,height:maxRes*o.heightTexels/o.widthTexels}),res.height>maxRes&&(res={width:maxRes*o.widthTexels/o.heightTexels,height:maxRes})}else res={width:o.widthTexels,height:o.heightTexels};return res},PageManager.prototype.pushInRenderQueue=function(o){"queuedForRender"!==o.state&&"loading"!==o.state&&(o.state="queuedForRender",this.renderQueue.push(o))},PageManager.prototype.updateRenderQueue=function(){if(this.canvases){var p=this.p;if(this.rendering)this.rendering.wrapper&&this.rendering.wrapper.setRenderPause(!p.renderWhileFlipping&&(this.book.isProcessing()||this.visual.getOrbit().isMoving())),this.book.updateThree();else if(p.renderWhileFlipping||!this.book.isProcessing()&&!this.visual.getOrbit().isMoving()){for(var active=void 0,top=void 0,_iterator7=this.renderQueue,_isArray7=Array.isArray(_iterator7),_i7=0,_iterator7=_isArray7?_iterator7:_iterator7[Symbol.iterator]();;){var _ref7;if(_isArray7){if(_i7>=_iterator7.length)break;_ref7=_iterator7[_i7++]}else{if(_i7=_iterator7.next(),_i7.done)break;_ref7=_i7.value}var _o2=_ref7;if(!active&&_o2.isActive()&&(active=_o2),_o2.isTop()){top=_o2;break}}if(this.rendering=top||active,(this.isMobile()&&p.renderInactivePagesOnMobile||!this.isMobile()&&p.renderInactivePages)&&!this.rendering)for(var ud=this.book.getUserDirection(),near={},_iterator8=this.renderQueue,_isArray8=Array.isArray(_iterator8),_i8=0,_iterator8=_isArray8?_iterator8:_iterator8[Symbol.iterator]();;){var _ref8;if(_isArray8){if(_i8>=_iterator8.length)break;_ref8=_iterator8[_i8++]}else{if(_i8=_iterator8.next(),_i8.done)break;_ref8=_i8.value}var o=_ref8,id=ud.lastTopPage<o.n;(!near[id]||Math.abs(near[id].n-ud.lastTopPage)>Math.abs(o.n-ud.lastTopPage))&&(near[id]=o),this.rendering=near[1===ud.direction]||near[1!==ud.direction]}if(this.rendering)if(this.rendering.wrapper&&this.rendering.wrapper.startRender){this.removeFromRenderQueue(this.rendering),this.rendering.state="rendering";var _o=this.canvases[this.nextCanvas];this.nextCanvas=(this.nextCanvas+1)%this.canvases.length,this.rendering.wrapper.setRenderCanvas(_o.c,_o.ctx),this.rendering.wrapper.setResolution(this.calcResolution(this.rendering)),this.rendering.wrapper.startRender(),this.book.dispatchEvent({type:"startRendering",page:_o.n})}else delete this.rendering}setTimeout(this.updateRenderQueue.bind(this),100)}},PageManager.prototype.turnOnEvents=function(){this.transferEvents=!0},PageManager.prototype.turnOffEvents=function(){var mouseup=_libs.$.Event("mouseup"),mouseout=_libs.$.Event("mouseout");this.pageCache.forEach(function(ent){var object=ent[1];object.simulate&&(object.simulate(mouseup,void 0,0,0),object.simulate(mouseout,void 0,0,0))}),this.transferEvents=!1},PageManager.prototype.transferEventToTexture=function(n,e,data){if(this.transferEvents){var toObject=this.getOrLoadTextureObject(void 0,n);if(toObject.wrapper){var uv=data.uv,toDoc=toObject.wrapper.getSimulatedDoc();this.pageCache.forEach(function(ent){var object=ent[1];object.simulate&&object.simulate(e,toDoc,uv.x,uv.y)})}}},PageManager.prototype.loadPredictedPages=function(){var _this4=this;Promise.resolve().then(function(){var ud=_this4.book.getUserDirection();_this4.predictedRequests=[];for(var i=0,p=ud.lastTopPage+ud.direction;i<_this4.p.preloadPages;++i,p+=ud.direction)_this4.predictedRequests.push(p);for(var _iterator9=_this4.predictedRequests,_isArray9=Array.isArray(_iterator9),_i9=0,_iterator9=_isArray9?_iterator9:_iterator9[Symbol.iterator]();;){var _ref9;if(_isArray9){if(_i9>=_iterator9.length)break;_ref9=_iterator9[_i9++]}else{if(_i9=_iterator9.next(),_i9.done)break;_ref9=_i9.value}var _p=_ref9;_p>=0&&_p<_this4.book.getBookPages()&&!_this4.pageCache.get(_p)&&_this4.load(void 0,_p)}})},PageManager.prototype.setMaterial=function(o,material){this.pageCache.forEach(function(e){var ob=e[1];o!==ob&&ob.material===material&&delete ob.material}),material&&material!==o.material&&(o.material=material,this.setupMaterial(o))},PageManager.prototype.setupMaterial=function(o){o.material.map=o.texture.image?o.texture:this.loadingAnimation?this.loading[o.color].texture:null,o.material.map||(o.material.color=new _libs.THREE.Color(o.color)),o.material.needsUpdate=!0},PageManager.prototype.getOrLoadTextureObject=function(material,n){var object=this.pageCache.get(n);return object?this.setMaterial(object,material):object=this.load(material,n),object},PageManager.prototype.setTexture=function(material,n){this.getOrLoadTextureObject(material,n)},PageManager}();exports.default=PageManager},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _BookPropsBuilder2=__webpack_require__(9),_BookPropsBuilder3=_interopRequireDefault(_BookPropsBuilder2),_Pdf=__webpack_require__(19),_Pdf2=_interopRequireDefault(_Pdf),PdfBookPropsBuilder=function(_BookPropsBuilder){function PdfBookPropsBuilder(src,onReady,style,pdfOpenOptions){_classCallCheck(this,PdfBookPropsBuilder);var _this=_possibleConstructorReturn(this,_BookPropsBuilder.call(this,onReady,style));return _this.pdf=new _Pdf2.default(src,void 0,pdfOpenOptions),_this.pageDescription={type:"pdf",src:_this.pdf,interactive:!0},_this.binds={pageCallback:_this.pageCallback.bind(_this)},_this.pdf.getHandler(_this.init.bind(_this)),_this}return _inherits(PdfBookPropsBuilder,_BookPropsBuilder),PdfBookPropsBuilder.prototype.dispose=function(){this.pdf.dispose(),_BookPropsBuilder.prototype.dispose.call(this)},PdfBookPropsBuilder.prototype.init=function(handler){var _this2=this,pages=this.pdf.getPagesNum();this.pages=pages,this.calcSheets(pages),pages>0?handler.getPage(1).then(function(page){var viewport=page.getViewport({scale:1}),size={width:viewport.width,height:viewport.height};_this2.calcProps(size.width,size.height),_this2.ready()}).catch(function(e){console.error(e)}):(this.props=this.defaults,this.ready())},PdfBookPropsBuilder.prototype.pageCallback=function(n){return this.pageDescription},PdfBookPropsBuilder}(_BookPropsBuilder3.default);exports.default=PdfBookPropsBuilder},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _libs=__webpack_require__(1),PdfLinksHandler=function(){function PdfLinksHandler(pdf,ctrl,element){_classCallCheck(this,PdfLinksHandler),this.pdf=pdf,this.ctrl=ctrl,this.element=(0,_libs.$)(element),this.cursors=[]}return PdfLinksHandler.prototype.dispose=function(){},PdfLinksHandler.prototype.setHandler=function(handler){this.handler=handler},PdfLinksHandler.prototype.defaultHandler=function(type,destination){"internal"===type?this.ctrl.goToPage(destination):"external"===type&&window.open(destination,"_blank")},PdfLinksHandler.prototype.callHandlers=function(type,destination){this.handler&&this.handler(type,destination)||this.defaultHandler(type,destination)},PdfLinksHandler.prototype.handleEvent=function(data){var _this=this,e=data.event,anno=data.annotation;switch(e.type){case"mouseover":this.cursors.push(this.element.css("cursor")),this.element.css("cursor","pointer");break;case"mouseout":this.element.css("cursor",this.cursors.pop()||"");break;case"touchtap":case"click":anno.url?this.callHandlers("external",anno.url):anno.dest&&this.pdf.getDestination(anno.dest).then(function(number){return _this.callHandlers("internal",number)})}},PdfLinksHandler}();exports.default=PdfLinksHandler},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _Finder=__webpack_require__(17),_Finder2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_Finder),SearchEngine=function(){function SearchEngine(pageCallback,pages){_classCallCheck(this,SearchEngine),this.pageCallback=pageCallback,this.pages=pages,this.results=[]}return SearchEngine.prototype.setQuery=function(query){this.query=query,this.update=!0,this.process()},SearchEngine.prototype.process=function(){var _this=this;if(this.update){var results=this.results;if(this.results=[],this.onPageHitsChanged)for(var _iterator=results,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){if(_isArray){if(_i>=_iterator.length)break;_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_i.value}this.onPageHitsChanged(void 0,"")}this.update=!1,this.page=0,this.stamp=Date.now(),this.query.length>1&&this.process()}else if(this.page<this.pages){var stamp=this.stamp;this.find(this.pageCallback(this.page)).then(function(contexts){stamp===_this.stamp&&(contexts.length&&_this.results.push({page:_this.page,contexts:contexts}),_this.onPageHitsChanged&&_this.onPageHitsChanged(_this.page,_this.query),++_this.page,_this.process())})}},SearchEngine.prototype.find=function(pi){var _this2=this;return"pdf"===pi.type?new Promise(function(resolve){pi.src.getHandler(function(){var n=void 0===pi.number?_this2.page:pi.number;"right"===pi.src.getPageType(n)?resolve([]):pi.src.getPage(n).then(function(page){page.getTextContent().then(function(textContent){resolve(new _Finder2.default(textContent.items.map(function(item){return item.str}),_this2.query,{hits:!1}).getContexts())})}).catch(function(){return resolve([])})})}):Promise.resolve([])},SearchEngine}();exports.default=SearchEngine},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _libs=__webpack_require__(1),_WidgetController2=__webpack_require__(22),_WidgetController3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_WidgetController2),ShareController=function(_WidgetController){function ShareController(view,bookCtrl){var linkBuilder=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(page){return page};_classCallCheck(this,ShareController);var _this=_possibleConstructorReturn(this,_WidgetController.call(this,view,"widShare"));return _this.bookCtrl=bookCtrl,_this.linkBuilder=linkBuilder,bookCtrl.addEventListener("endFlip",_this.updateView.bind(_this)),_this}return _inherits(ShareController,_WidgetController),ShareController.prototype.cmdCloseShare=function(){this.hide()},ShareController.prototype.clickLink=function(u){var blank=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=(0,_libs.$)('<a href="'+u+'"'+(blank?' target="_blank"':"")+"></a>").appendTo(this.view.getContainer());a[0].click(),a.remove()},ShareController.prototype.cmdFacebook=function(){this.clickLink("https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(this.getLink()))},ShareController.prototype.cmdTwitter=function(){this.clickLink("http://twitter.com/share?url="+encodeURIComponent(this.getLink()))},ShareController.prototype.cmdEmail=function(){this.clickLink("mailto:?subject="+(0,_libs.tr)("We wanted you to see this book")+"&body="+(0,_libs.tr)("Check out this site")+" "+encodeURIComponent(this.getLink()),!1)},ShareController.prototype.getLink=function(){return this.linkBuilder(this.bookCtrl.getPageForGUI())},ShareController.prototype.updateView=function(){if(this.view){for(var _arr=["cmdCloseShare","cmdFacebook","cmdTwitter","cmdEmail"],_i=0;_i<_arr.length;_i++){var cmd=_arr[_i];this.view.setState(cmd,{enable:!0,visible:!0,active:!1})}this.view.setState("txtShareLink",{value:this.getLink(),visible:!0}),_WidgetController.prototype.updateView.call(this)}},ShareController}(_WidgetController3.default);exports.default=ShareController},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _CSSLayer=__webpack_require__(13),_CSSLayer2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_CSSLayer),SheetCssLayer=function(){function SheetCssLayer(visual,block,props){_classCallCheck(this,SheetCssLayer),this.visual=visual;var size=block.getTopSize();this.layer=new _CSSLayer2.default(size.width,size.height,props),this.update(block),this.visual.addCssObject(this.layer)}return SheetCssLayer.prototype.dispose=function(){this.layer.dispose(),this.visual.removeCssObject(this.layer)},SheetCssLayer.prototype.isHidden=function(){return this.layer.isHidden()},SheetCssLayer.prototype.hide=function(){return this.layer.hide()},SheetCssLayer.prototype.show=function(){return this.layer.show()},SheetCssLayer.prototype.set=function(css,html,js){this.layer.setData(css,html,js)},SheetCssLayer.prototype.update=function(block){this.block=block;var size=block.getTopSize();this.layer.setSize(size.width,size.height),this.block.getTopWorldRotation(this.layer.rotation),this.block.getTopWorldPosition(this.layer.position)},SheetCssLayer}();exports.default=SheetCssLayer},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_MathUtils=__webpack_require__(5),_MathUtils2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_MathUtils),SheetPhysics=function(){function SheetPhysics(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,gravity=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,cornerDeviation=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.15,fps=arguments.length>3&&void 0!==arguments[3]?arguments[3]:240;_classCallCheck(this,SheetPhysics),this.p={r:r,cornerDeviation:cornerDeviation,l:Math.PI*r,startDt:1/fps,gravity:gravity,margin:.002*r,infM:1e4,attempts:16,maxIterations:100},this.os=[]}return SheetPhysics.targetForceClb=function(o,a,v,ch){var l=a*this.r;return 100*this.m*this.g*(2/(1+Math.exp(10*(l-this.tl)))-1)-40*this.m*v},SheetPhysics.hoverCornerForceClb=function(o,v,l,ch){return 5},SheetPhysics.prototype.getTargetForceClb=function(mass,targetAngle){return SheetPhysics.targetForceClb.bind({g:this.p.gravity,m:mass,tl:targetAngle*this.p.r,r:this.p.r})},SheetPhysics.dragForceClb=function(o,a,v,ch){return o.flbt*o.m*(10*o.g*ch-50*v/(1+Math.exp(3.5*Math.abs(ch))))},SheetPhysics.dragCornerForceClb=function(o,a,v,ch){return 15*(2/(1+Math.exp(10*(a-this.ta)*o.r))-1)},SheetPhysics.getDragCornerForceClb=function(targetAngle){return SheetPhysics.dragCornerForceClb.bind({ta:targetAngle})},SheetPhysics.prototype.dispose=function(){this.os=[]},SheetPhysics.prototype.getSize=function(){return this.os.length},SheetPhysics.prototype.addObject=function(mass,angle,velocity,flexibility,cornerHeight,simulateClb,removeClb){var forceClb=arguments.length>7&&void 0!==arguments[7]?arguments[7]:function(){return 0},cornerForceClb=arguments.length>8&&void 0!==arguments[8]?arguments[8]:function(){return 0},no={id:_MathUtils2.default.getUnique(),m:mass,v:velocity,l:angle*this.p.r,f:forceClb,cf:cornerForceClb,ch:cornerHeight,flbt:flexibility,simulateClb:simulateClb,removeClb:removeClb},i=this.os.findIndex(function(o){return no.l<=o.l});return i=~i?i:this.os.length,this.os.splice(i,0,no),no.id},SheetPhysics.prototype.getParametrMap=function(name){return{mass:"m",velocity:"v",flexibility:"flbt",cornerHeight:"ch",simulateClb:"simulateClb",removeClb:"removeClb",forceClb:"f",cornerForceClb:"cf"}[name]},SheetPhysics.prototype.setParametr=function(id,name,value){var o=this.os.find(function(o){return o.id===id});"angle"===name?o.l=value*this.p.r:o[this.getParametrMap(name)]=value},SheetPhysics.prototype.getParametr=function(id,name){var o=this.os.find(function(o){return o.id===id});return"angle"===name?o.l/this.p.r:o[this.getParametrMap(name)]},SheetPhysics.prototype.simulate=function(T){for(var t=0,dt=this.p.startDt,attempt=0,it=0;t<T&&it<this.p.maxIterations;){dt>T-t&&(dt=T-t);var nos=this.integrate(this.os,dt),ci=this.findCollisions(nos);if(ci.num>1&&attempt<this.p.attempts)dt/=2,++attempt;else{if(1===ci.num){var scos=this.solveCollision(nos[ci.last-1],nos[ci.last]);nos[ci.last-1]=scos[0],nos[ci.last]=scos[1]}else if(ci.num>1){for(var gs=[],last=-2,_iterator=ci.all,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}var i=_ref;i-last>1&&gs.push([]),gs[gs.length-1].push(i),last=i}for(var _iterator2=gs,_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[Symbol.iterator]();;){var _ref2;if(_isArray2){if(_i2>=_iterator2.length)break;_ref2=_iterator2[_i2++]}else{if(_i2=_iterator2.next(),_i2.done)break;_ref2=_i2.value}var g=_ref2,sg=void 0,i0=void 0;nos[g[0]].l>Math.PI/2*this.p.r?(sg=-1,i0=g[g.length-1]):(sg=1,i0=g[0]);for(var _i3=i0;_i3<nos.length&&_i3>-1;_i3+=sg){var o=nos[_i3+sg];if(!(o&&sg*(o.l-nos[_i3].l)<=this.p.margin))break;o.l=nos[_i3].l+2*sg*this.p.margin,(o.l>this.p.l||o.l<0)&&(o.l=o.l>this.p.l?this.p.l:0,o.ch=0,o.v=0,console.error("Bad collision"))}}}this.os=nos,this.findAndSolveCornerCollisions(),t+=dt,dt=this.p.startDt,attempt=0}++it}this.removeStatics()},SheetPhysics.prototype.removeStatics=function(){for(var nos=[],notify=[[],[]],_iterator3=this.os,_isArray3=Array.isArray(_iterator3),_i4=0,_iterator3=_isArray3?_iterator3:_iterator3[Symbol.iterator]();;){var _ref3;if(_isArray3){if(_i4>=_iterator3.length)break;_ref3=_iterator3[_i4++]}else{if(_i4=_iterator3.next(),_i4.done)break;_ref3=_i4.value}var o=_ref3;o.simulateClb&&o.simulateClb(o.l/this.p.r,o.ch),o.l!==this.p.l&&0!==o.l||0!==o.v?nos.push(o):void 0!==o.removeClb&&notify[(o.l!==this.p.l)+0].push(o)}this.os=nos;for(var _iterator4=notify[0].reverse(),_isArray4=Array.isArray(_iterator4),_i5=0,_iterator4=_isArray4?_iterator4:_iterator4[Symbol.iterator]();;){var _ref4;if(_isArray4){if(_i5>=_iterator4.length)break;_ref4=_iterator4[_i5++]}else{if(_i5=_iterator4.next(),_i5.done)break;_ref4=_i5.value}var _o=_ref4;_o.removeClb(Math.PI,_o.ch)}for(var _iterator5=notify[1],_isArray5=Array.isArray(_iterator5),_i6=0,_iterator5=_isArray5?_iterator5:_iterator5[Symbol.iterator]();;){var _ref5;if(_isArray5){if(_i6>=_iterator5.length)break;_ref5=_iterator5[_i6++]}else{if(_i6=_iterator5.next(),_i6.done)break;_ref5=_i6.value}var _o2=_ref5;_o2.removeClb(0,_o2.ch)}},SheetPhysics.prototype.findAndSolveCornerCollisions=function(){if(this.os.length)for(var os=[_extends({},this.os[0],{l:0,m:this.p.infM,ch:0})].concat(this.os,[_extends({},this.os[0],{l:1.05*this.p.l,m:this.p.infM,ch:0})]),i=1;i<os.length;++i){var a=os[i-1],b=os[i],al=a.l+this.p.cornerDeviation*a.ch*this.p.r,bl=b.l+this.p.cornerDeviation*b.ch*this.p.r;if(1.05*al>bl&&a.ch>b.ch){var dCh=a.ch-b.ch,dv=a.m/a.flbt+b.m/b.flbt,ka=a.m/a.flbt/dv,kb=b.m/b.flbt/dv;a.ch=a.ch-kb*dCh,b.ch=b.ch+ka*dCh}}},SheetPhysics.prototype.solveCollision=function(a,b){var mm=b.m+a.m,av=(-a.v*b.m+a.m*a.v+2*b.m*b.v)/mm,bv=(b.m*b.v-b.v*a.m+2*a.m*a.v)/mm;return[_extends({},a,{v:av}),_extends({},b,{v:bv})]},SheetPhysics.prototype.findCollisions=function(os){for(var ci={num:0,last:0,all:[]},i=1;i<os.length&&ci.num<2;++i)(os[i-1].l>os[i].l||this.isCollision(os[i-1],os[i]))&&(os[i-1].l>os[i].l&&++ci.num,++ci.num,ci.last=i,-1===ci.all.indexOf(i-1)&&ci.all.push(i-1),-1===ci.all.indexOf(i)&&ci.all.push(i));return ci},SheetPhysics.prototype.isCollision=function(a,b){return Math.abs(a.l-b.l)<this.p.margin&&a.v>b.v},SheetPhysics.prototype.integrate=function(os,dt){for(var nos=[],_iterator6=os,_isArray6=Array.isArray(_iterator6),_i7=0,_iterator6=_isArray6?_iterator6:_iterator6[Symbol.iterator]();;){var _ref6;if(_isArray6){if(_i7>=_iterator6.length)break;_ref6=_iterator6[_i7++]}else{if(_i7=_iterator6.next(),_i7.done)break;_ref6=_i7.value}var o=_ref6,vl=_MathUtils2.default.rk4(this.dy.bind({g:this.p.gravity,r:this.p.r,m:o.m,f:o.f,cf:o.cf,ch:o.ch,flbt:o.flbt}),0,dt,[o.v,o.l,o.ch]),no=_extends({},o,{v:vl[0],l:vl[1],ch:vl[2]});(no.l<=0||no.l>=this.p.l)&&(no.l=no.l<=0?0:this.p.l,no.v=0,no.ch=0),nos.push(no)}return nos},SheetPhysics.prototype.dy=function(t,y){var v=y[0],l=y[1],ch=y[2],alf=l/this.r,f=this.f(this,alf,v,ch),cf=this.cf(this,alf,v,ch),cosAlf=Math.cos(alf),brf=6.65*Math.abs((Math.sign(cosAlf)-Math.sign(v))*v)*Math.pow(cosAlf,5);return[-this.g*cosAlf+brf+f/this.m,v+.01*(Math.random()-.5),this.flbt*((2/(1+Math.exp(-.2*cf))-1)*(1-2/(1+Math.exp(-5*(Math.abs(ch)-2))))-ch)]},SheetPhysics}();exports.default=SheetPhysics},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var SoundsEnviroment=function(){function SoundsEnviroment(){var template=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,SoundsEnviroment),template="function"==typeof template?template():template,this.sounds=template.sounds||{},this.audio={},this.sounds.startFlip&&(this.audio.startFlip=new Audio(this.sounds.startFlip),this.audio.startFlip.volume=.5),this.sounds.endFlip&&(this.audio.endFlip=new Audio(this.sounds.endFlip),this.audio.endFlip.volume=.5)}return SoundsEnviroment.prototype.setEnabled=function(enabled){this.enabled=enabled},SoundsEnviroment.prototype.togle=function(){this.enabled=!this.enabled},SoundsEnviroment.prototype.dispose=function(){delete this.audio.startFlip,delete this.audio.endFlip},SoundsEnviroment.prototype.play=function(player){player.play().catch(function(){})},SoundsEnviroment.prototype.startFlip=function(){this.enabled&&this.audio.startFlip&&this.play(this.audio.startFlip)},SoundsEnviroment.prototype.endFlip=function(){this.enabled&&this.audio.startFlip&&(this.audio.startFlip.pause(),this.audio.startFlip.currentTime=0),this.enabled&&this.audio.endFlip&&this.play(this.audio.endFlip)},SoundsEnviroment.prototype.subscribeFlips=function(emitter){emitter.addEventListener("startFlip",this.startFlip.bind(this)),emitter.addEventListener("endFlip",this.endFlip.bind(this))},SoundsEnviroment}();exports.default=SoundsEnviroment},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _WidgetController2=__webpack_require__(22),_WidgetController3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_WidgetController2),TocController=function(_WidgetController){function TocController(view,bookCtrl){_classCallCheck(this,TocController);var _this=_possibleConstructorReturn(this,_WidgetController.call(this,view,"widFloatWnd"));return _this.bookCtrl=bookCtrl,_this.tab="none",_this}return _inherits(TocController,_WidgetController),TocController.prototype.setThumbnails=function(thumbnails){this.thumbnails=thumbnails,thumbnails.onNavigate=this.navigateThumbnails.bind(this),"none"===this.tab&&(this.tab="thumbnails"),this.fireChange()},TocController.prototype.setSearch=function(search){this.search=search,search.onNavigate=this.navigateSearch.bind(this),this.fireChange()},TocController.prototype.setBookmarks=function(bookmarks,pdf){bookmarks.getSize()&&(this.bookmarks=bookmarks,this.pdf=pdf,bookmarks.onNavigate=this.navigateBookmarks.bind(this),this.isBookmarks=!0,this.fireChange())},TocController.prototype.cmdBookmarks=function(){this.setActiveTab("bookmarks")},TocController.prototype.cmdThumbnails=function(){this.setActiveTab("thumbnails")},TocController.prototype.cmdSearch=function(){this.setActiveTab("search")},TocController.prototype.setActiveTab=function(tab){this[tab]&&(this.tab=tab,this.fireChange())},TocController.prototype.cmdCloseToc=function(){this.hide()},TocController.prototype.navigateThumbnails=function(number){this.goToPage(number)},TocController.prototype.navigateSearch=function(number){this.goToPage(number)},TocController.prototype.openUrl=function(url){window.open(url,"_blank")},TocController.prototype.goToPage=function(number){this.bookCtrl.goToPage(number)},TocController.prototype.dstDataHandler=function(data){data=(data+"").trim();var number=void 0;(number=parseInt(data))==data?this.goToPage(number):this.openUrl(data)},TocController.prototype.navigateBookmarks=function(item){var _this2=this;item.url?this.openUrl(item.url):item.dest?this.pdf.getDestination(item.dest).then(function(number){return _this2.goToPage(number)}):void 0!==item.dstData&&this.dstDataHandler(item.dstData)},TocController.prototype.updateView=function(){var _this3=this;this.view&&(this.view.setState("widTocMenu",{enable:!0,visible:!0,active:!1}),this.view.setState("widThumbnails",{enable:!0,visible:"thumbnails"===this.tab,active:!1}),this.view.setState("widSearch",{enable:!0,visible:"search"===this.tab,active:!1}),this.view.setState("widBookmarks",{enable:!0,visible:"bookmarks"===this.tab,active:!1}),this.view.setState("cmdBookmarks",{enable:!0,visible:!!this.bookmarks,active:"bookmarks"===this.tab}),this.view.setState("cmdCloseToc",{enable:!0,visible:!0,active:!1}),this.view.setState("cmdThumbnails",{enable:!0,visible:!(!this.thumbnails||!this.search&&!this.bookmarks),active:"thumbnails"===this.tab}),this.view.setState("cmdSearch",{enable:!0,visible:!!this.search,active:"search"===this.tab}),Promise.resolve().then(function(){return _this3.thumbnails.setEnable(_this3.visible&&"thumbnails"===_this3.tab)}),_WidgetController.prototype.updateView.call(this))},TocController}(_WidgetController3.default);exports.default=TocController},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _libs=__webpack_require__(1),_ThreeUtils=__webpack_require__(21),_ThreeUtils2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_ThreeUtils),faces=[],frontGeometry=new _libs.THREE.PlaneGeometry(1,1,10,1);frontGeometry.translate(.5,.5,1);var backGeometry=new _libs.THREE.PlaneGeometry(1,1,10,1);backGeometry.rotateY(Math.PI),backGeometry.translate(.5,.5,0);var leftGeometry=new _libs.THREE.PlaneGeometry(1,1,14,1);leftGeometry.rotateY(-Math.PI/2),leftGeometry.translate(0,.5,.5);var rightGeometry=new _libs.THREE.PlaneGeometry(1,1,14,1);rightGeometry.rotateY(Math.PI/2),rightGeometry.translate(1,.5,.5);var topGeometry=new _libs.THREE.PlaneGeometry(1,1,10,14);topGeometry.rotateX(-Math.PI/2),topGeometry.translate(.5,1,.5);var bottomGeometry=topGeometry.clone();bottomGeometry.translate(0,-1,0);for(var _iterator=bottomGeometry.faces,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}var f=_ref,_ref3=[f.b,f.a];f.a=_ref3[0],f.b=_ref3[1]}var geometry=new _libs.THREE.Geometry;geometry.vertices=[].concat(bottomGeometry.vertices,topGeometry.vertices);var addFaces=function(fs,map){for(var _iterator2=fs,_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[Symbol.iterator]();;){var _ref2;if(_isArray2){if(_i2>=_iterator2.length)break;_ref2=_iterator2[_i2++]}else{if(_i2=_iterator2.next(),_i2.done)break;_ref2=_i2.value}var f=_ref2;geometry.faces.push(new _libs.THREE.Face3(map(f.a),map(f.b),map(f.c)))}faces.push(geometry.faces.length)},mapVertices=function(src,dst){for(var map=[],i=0;i<src.length;++i)for(var j=0;j<dst.length;++j)if(function(a,b){return Math.abs(a.x-b.x)+Math.abs(a.y-b.y)+Math.abs(a.z-b.z)<1e-4}(src[i],dst[j])){map[i]=j;break}return map},frontMap=mapVertices(frontGeometry.vertices,geometry.vertices),backMap=mapVertices(backGeometry.vertices,geometry.vertices),leftMap=mapVertices(leftGeometry.vertices,geometry.vertices),rightMap=mapVertices(rightGeometry.vertices,geometry.vertices);addFaces(topGeometry.faces,function(i){return i+bottomGeometry.vertices.length}),addFaces(bottomGeometry.faces,function(i){return i}),addFaces(frontGeometry.faces,function(i){return frontMap[i]}),addFaces(backGeometry.faces,function(i){return backMap[i]}),addFaces(leftGeometry.faces,function(i){return leftMap[i]}),addFaces(rightGeometry.faces,function(i){return rightMap[i]}),faces.pop(),_ThreeUtils2.default.computeFaceVertexUvs(geometry,faces),geometry.computeVertexNormals(),geometry.computeBoundingSphere(),geometry.verticesNeedUpdate=!0,exports.default={resX:11,resY:2,resZ:15,faces:faces,geometry:geometry}},function(module,exports,__webpack_require__){"use strict";function props(){return{eps:1e-4,scale:{default:.9,min:.9,max:2,levels:5},pan:{speed:50},loadingAnimation:{skin:!0,book:!1},autoResolution:{enabled:!0,coefficient:1.5,min:800,max:1920},narrowView:{width:500},actions:{cmdZoomIn:{enabled:!0,enabledInNarrow:!0},cmdZoomOut:{enabled:!0,enabledInNarrow:!0},cmdDefaultZoom:{enabled:!1,enabledInNarrow:!1,type:"dblclick",code:0},cmdToc:{enabled:!0,enabledInNarrow:!0,active:!1,defaultTab:"bookmarks"},cmdAutoPlay:{enabled:!1,enabledInNarrow:!1,active:!1},cmdBackward:{enabled:!0,enabledInNarrow:!1,code:37},cmdBigBackward:{enabled:!0,enabledInNarrow:!0},cmdForward:{enabled:!0,enabledInNarrow:!1,code:39},cmdBigForward:{enabled:!0,enabledInNarrow:!0},cmdSave:{enabled:!0,enabledInNarrow:!0},cmdPrint:{enabled:!0,enabledInNarrow:!0},cmdFullScreen:{enabled:!0,enabledInNarrow:!0},widSettings:{enabled:!0,enabledInNarrow:!0},widToolbar:{enabled:!0,enabledInNarrow:!0},cmdSmartPan:{enabled:!1,enabledInNarrow:!1,active:!0},cmdSinglePage:{enabled:!0,enabledInNarrow:!0,active:!1,activeForMobile:!0},cmdSounds:{enabled:!0,enabledInNarrow:!0,active:!0},cmdStats:{enabled:!1,enabledInNarrow:!1,active:!1},cmdGotoFirstPage:{enabled:!0,enabledInNarrow:!0},cmdGotoLastPage:{enabled:!0,enabledInNarrow:!0},cmdShare:{enabled:!0,enabledInNarrow:!0},cmdPanLeft:{enabled:!1},cmdPanRight:{enabled:!1},cmdPanUp:{enabled:!1},cmdPanDown:{enabled:!1},mouseCmdRotate:{enabled:!0,type:"mousedrag",code:mouseButtons.Right},mouseCmdDragZoom:{enabled:!0,type:"mousedrag",code:mouseButtons.Middle},mouseCmdPan:{enabled:!0,type:"mousedrag",code:mouseButtons.Left},mouseCmdWheelZoom:{enabled:!0,type:"mousewheel",code:0},touchCmdRotate:{enabled:!0,type:"touchdrag",code:3},touchCmdZoom:{enabled:!0,type:"touchdrag",code:2},touchCmdPan:{enabled:!0,type:"touchdrag",code:1},touchCmdSwipe:{enabled:!0,type:"touchdrag",code:1}}}}exports.__esModule=!0,exports.props=props;var mouseButtons={Left:0,Middle:1,Right:2}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _ImageBase2=(__webpack_require__(0),__webpack_require__(6)),_ImageBase3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_ImageBase2),BlankImage=function(_ImageBase){function BlankImage(context,width,height,color){_classCallCheck(this,BlankImage);var _this=_possibleConstructorReturn(this,_ImageBase.call(this,context,width,height,color));return Promise.resolve().then(function(){_this.startRender=function(){_this.renderBlankPage(),_this.finishRender()},_this.finishLoad()}),_this}return _inherits(BlankImage,_ImageBase),BlankImage}(_ImageBase3.default);exports.default=BlankImage},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _libs=__webpack_require__(0),Bookmarks=function(){function Bookmarks(container,items){var _this=this,getTitle=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(i){return i.title},getItems=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(i){return i.items};_classCallCheck(this,Bookmarks),this.container=container,this.map=[],this.getTitle=getTitle,this.getItems=getItems,this.nodes=this.mapNodes(items,this.map),this.binds={togle:function(e){e.preventDefault();for(var li=(0,_libs.$)(e.target);li[0]&&li[0]!==container[0]&&!li.hasClass("item");)li=(0,_libs.$)(li[0].parentNode);if(li.hasClass("item")){for(var cmd=(0,_libs.$)(e.target);cmd[0]&&cmd[0]!==li[0]&&!cmd.hasClass("cmd");)cmd=(0,_libs.$)(cmd[0].parentNode);if(cmd.hasClass("cmd")){var node=_this.map[li.attr("data-id")];cmd.hasClass("togle")?(node.minimized=!node.minimized,node.minimized?(li.find("ul").remove(),li.find(".togle").addClass("minimized")):(li.find(".togle").removeClass("minimized"),li.append((_this.renderNode(node).match(/<ul(.|\n)*<\/ul>/g)||[""])[0]))):_this.onNavigate&&_this.onNavigate(node.item)}}}},container.on("click",this.binds.togle),this.update()}return Bookmarks.prototype.getSize=function(){return this.map.length},Bookmarks.prototype.dispose=function(){this.container.off("click",this.binds.togle),this.container.html("")},Bookmarks.prototype.update=function(){this.container.html(this.renderNodes(this.nodes))},Bookmarks.prototype.forEach=function(f){for(var nodes=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nodes,_iterator=nodes||[],_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}var node=_ref;f(node),this.forEach(f,node.children)}},Bookmarks.prototype.expand=function(){this.forEach(function(n){return n.minimized=!1}),this.update()},Bookmarks.prototype.minimize=function(){this.forEach(function(n){return n.minimized=!0}),this.update()},Bookmarks.prototype.renderNode=function(node){return['<div class="area">',node.children?'<a class="cmd togle'+(node.minimized?" minimized":"")+'"><i class="fa fa-angle-right"></i></a> ':'<i class="white-space"></i> ','<a class="cmd" title="',node.title,'">',node.title,"</a></div>",node.minimized?"":this.renderNodes(node.children)].join("")},Bookmarks.prototype.renderNodes=function(nodes){var res=['<div class="bookmarks">'];if(nodes&&nodes.length){res.push('<ul class="level-',nodes[0].level,'">');for(var _iterator2=nodes,_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[Symbol.iterator]();;){var _ref2;if(_isArray2){if(_i2>=_iterator2.length)break;_ref2=_iterator2[_i2++]}else{if(_i2=_iterator2.next(),_i2.done)break;_ref2=_i2.value}var node=_ref2;res.push(['<li class="item" data-id="',node.id,'">',this.renderNode(node),"</li>"].join(""))}res.push("</ul>")}return res.push("</div>"),res.join("")},Bookmarks.prototype.mapNodes=function(items){var map=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],level=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,nodes=null;if(items&&items.length){nodes=[];for(var _iterator3=items,_isArray3=Array.isArray(_iterator3),_i3=0,_iterator3=_isArray3?_iterator3:_iterator3[Symbol.iterator]();;){var _ref3;if(_isArray3){if(_i3>=_iterator3.length)break;_ref3=_iterator3[_i3++]}else{if(_i3=_iterator3.next(),_i3.done)break;_ref3=_i3.value}var item=_ref3,id=map.length;map.push(void 0);var node={id:id,title:this.getTitle(item),level:level,item:item,minimized:!0,children:this.mapNodes(this.getItems(item),map,level+1)};nodes.push(node),map[id]=node}}return nodes},Bookmarks}();exports.default=Bookmarks},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _libs=__webpack_require__(0),Detector=function(){function Detector(){_classCallCheck(this,Detector)}return Detector.getWebGLErrorMessage=function(){var element=document.createElement("div");return element.id="webgl-error-message",element.style.fontFamily="monospace",element.style.fontSize="13px",element.style.fontWeight="normal",element.style.textAlign="center",element.style.background="#fff",element.style.color="#000",element.style.padding="1.5em",element.style.width="400px",element.style.margin="5em auto 0",Detector.webgl||(element.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n")),element},Detector.addGetWebGLMessage=function(parameters){var parent=void 0,element=void 0;parameters=parameters||{},parent=parameters.parent||(0,_libs.$)(document.body),parameters.id,element=Detector.getWebGLErrorMessage(),parent.append(element)},Detector}();Detector.canvas=!!window.CanvasRenderingContext2D,Detector.webgl=function(){try{var canvas=document.createElement("canvas");return!(!window.WebGLRenderingContext||!canvas.getContext("webgl")&&!canvas.getContext("experimental-webgl"))}catch(e){return!1}}(),Detector.workers=!!window.Worker,Detector.fileapi=window.File&&window.FileReader&&window.FileList&&window.Blob,exports.default=Detector},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _libs=__webpack_require__(0),DocMouseSimulator=function(){function DocMouseSimulator(jFrame,element){var bElement=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document.body;_classCallCheck(this,DocMouseSimulator),this.jFrame=jFrame,this.wnd=jFrame[0].contentWindow,this.doc=jFrame[0].contentDocument,this.element=element||doc.body,this.bElement=bElement,this.resendProperties=this.getDefaultResendProperties(),this.undefinedProperties=this.getDefaultUndefinedProperties(),this.cursors=[],this.onDocChangeClbs=[];for(var terms=[{find:":hover",replace:"."+DocMouseSimulator.HOVER},{find:":active",replace:"."+DocMouseSimulator.ACTIVE}],style=['<style type="text/css">'],i=0;i<this.doc.styleSheets.length;++i)for(var ss=this.doc.styleSheets[i],j=0;j<ss.cssRules.length;++j){for(var r=ss.cssRules[j],cssText=void 0,_iterator=terms,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}var term=_ref;~r.selectorText.indexOf(term.find)&&(cssText=(cssText||r.cssText).replace(new RegExp(term.find,"g"),term.replace))}cssText&&style.push(cssText)}style.push("</style>"),(0,_libs.$)(this.doc.head).append((0,_libs.$)(style.join("")))}return DocMouseSimulator.prototype.convertCoords=function(x,y){var jElement=(0,_libs.$)(this.element),offset=jElement.offset();return{x:offset.left+jElement.width()*x,y:offset.top+jElement.height()*(1-y)}},DocMouseSimulator.prototype.triggerEvent=function(element,e,p,type,advancedProps){for(var props={},_iterator2=this.resendProperties,_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[Symbol.iterator]();;){var _ref2;if(_isArray2){if(_i2>=_iterator2.length)break;_ref2=_iterator2[_i2++]}else{if(_i2=_iterator2.next(),_i2.done)break;_ref2=_i2.value}var _n=_ref2;props[_n]=e[_n]}for(var _iterator3=this.undefinedProperties,_isArray3=Array.isArray(_iterator3),_i3=0,_iterator3=_isArray3?_iterator3:_iterator3[Symbol.iterator]();;){var _ref3;if(_isArray3){if(_i3>=_iterator3.length)break;_ref3=_iterator3[_i3++]}else{if(_i3=_iterator3.next(),_i3.done)break;_ref3=_i3.value}props[_ref3]=void 0}for(var n in advancedProps)advancedProps.hasOwnProperty(n)&&(props[n]=advancedProps[n]);props.view=this.wnd,props.pageX=p.x,props.pageY=p.y;var jE=_libs.$.Event(type,props);jE.timeStamp=e.timeStamp,(0,_libs.$)(element).trigger(jE)},DocMouseSimulator.prototype.addClass=function(element,name){(0,_libs.$)(element).addClass(name);var style=this.wnd.getComputedStyle(element);this.cursors.push((0,_libs.$)(this.bElement).css("cursor")),(0,_libs.$)(this.bElement).css("cursor",style.getPropertyValue("cursor"))},DocMouseSimulator.prototype.removeClass=function(element,name){(0,_libs.$)(element).removeClass(name),(0,_libs.$)(this.bElement).css("cursor",this.cursors.pop())},DocMouseSimulator.prototype.enterElement=function(element){this.addClass(element,DocMouseSimulator.HOVER)},DocMouseSimulator.prototype.leaveElement=function(element){this.removeClass(element,DocMouseSimulator.HOVER)},DocMouseSimulator.prototype.activateElement=function(element){this.addClass(element,DocMouseSimulator.ACTIVE)},DocMouseSimulator.prototype.deactivateElement=function(element){this.removeClass(element,DocMouseSimulator.ACTIVE)},DocMouseSimulator.prototype.addDocChangeClb=function(clb){this.onDocChangeClbs.push(clb)},DocMouseSimulator.prototype.notify=function(){for(var _iterator4=this.onDocChangeClbs,_isArray4=Array.isArray(_iterator4),_i4=0,_iterator4=_isArray4?_iterator4:_iterator4[Symbol.iterator]();;){var _ref4;if(_isArray4){if(_i4>=_iterator4.length)break;_ref4=_iterator4[_i4++]}else{if(_i4=_iterator4.next(),_i4.done)break;_ref4=_i4.value}_ref4(this.wnd,this.doc)}},DocMouseSimulator.prototype.elementFromPoint=function(p){for(var node=this.doc.body,next=!0;next;){next=!1;for(var i=0;i<node.childNodes.length;++i){var child=node.childNodes[i];if(child instanceof this.wnd.Element){var jC=(0,_libs.$)(child),offset=jC.offset(),height=jC.height(),width=jC.width();if(p.x>offset.left&&p.x<offset.left+width&&p.y>offset.top&&p.y<offset.top+height){node=child,next=!0;break}}}}return node},DocMouseSimulator.prototype.getElement=function(p){var off0=this.jFrame.offset();this.jFrame.offset({left:.5*window.innerWidth-p.x,top:.5*window.innerHeight-p.y});var element=this.doc.elementFromPoint(p.x,p.y);return element||(element=this.doc.elementFromPoint(p.x,p.y)),this.jFrame.offset(off0),element||this.elementFromPoint(p)},DocMouseSimulator.prototype.simulate=function(e,doc,x,y){var p=this.convertCoords(x,y),element=doc===this.doc?this.getElement(p):void 0,trigger=void 0!==element,notify=!1;switch(e.type){case"mousedown":this.capElement&&(this.deactivateElement(this.capElement),notify=!0),this.capElement=element,this.capElement&&(this.activateElement(this.capElement),notify=!0);break;case"mouseup":this.capElement&&(this.deactivateElement(this.capElement),notify=!0),this.timeStamp=e.timeStamp;break;case"click":trigger=element&&this.capElement===element,this.capElement=void 0;break;case"mouseenter":case"mouseover":case"mousemove":var leaved=null;this.hovElement!==element&&this.hovElement&&(this.triggerEvent(this.hovElement,e,p,"mouseout",{relatedTarget:element||null}),this.leaveElement(this.hovElement),leaved=this.hovElement,this.hovElement=void 0,notify=!0),!this.hovElement&&element&&(this.triggerEvent(element,e,p,"mouseover",{relatedTarget:leaved}),this.enterElement(element),this.hovElement=element,notify=!0),trigger=element&&"mousemove"===e.type;break;case"mouseleave":case"mouseout":this.hovElement&&(this.triggerEvent(this.hovElement,e,p,"mouseout",{relatedTarget:e.relatedTarget}),this.leaveElement(this.hovElement),this.hovElement=void 0,notify=!0),trigger=!1}trigger&&this.triggerEvent(element,e,p,e.type),notify&&this.notify()},DocMouseSimulator.prototype.getDefaultUndefinedProperties=function(){return["clientX","clientY","offsetX","offsetY","screenX","screenY"]},DocMouseSimulator.prototype.getDefaultResendProperties=function(){return["altKey","bubbles","button","buttons","cancelable","changedTouches","char","charCode","ctrlKey","data","detail","eventPhase","isDefaultPrevented","key","keyCode","metaKey","pointerId","pointerType","shiftKey","targetTouches","touches","which"]},DocMouseSimulator}();DocMouseSimulator.HOVER="SIMULATED-HOVER",DocMouseSimulator.ACTIVE="SIMULATED-ACTIVE",exports.default=DocMouseSimulator},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var Dom2Image=function Dom2Image(wnd,doc,cache){function toSvg(node,options){function applyOptions(clone){return options.bgcolor&&(clone.style.backgroundColor=options.bgcolor),options.width&&(clone.style.width=options.width+"px"),options.height&&(clone.style.height=options.height+"px"),options.style&&self.window.Object.keys(options.style).forEach(function(property){clone.style[property]=options.style[property]}),clone}return options=options||{},Promise.resolve(node).then(function(node){return cloneNode(node,options.filter,!0)}).then(embedFonts).then(inlineImages).then(applyOptions).then(function(clone){return makeSvgDataUri(clone,options.width||util.width(node),options.height||util.height(node))})}function toPixelData(node,options){return draw(node,options||{}).then(function(canvas){return canvas.getContext("2d").getImageData(0,0,util.width(node),util.height(node)).data})}function toPng(node,options){return draw(node,options||{}).then(function(canvas){return canvas.toDataURL()})}function toJpeg(node,options){return options=options||{},draw(node,options).then(function(canvas){return canvas.toDataURL("image/jpeg",options.quality||1)})}function toBlob(node,options){return draw(node,options||{}).then(util.canvasToBlob)}function draw(domNode,options){function newCanvas(domNode){var canvas=self.document.createElement("canvas");if(canvas.width=options.width||util.width(domNode),canvas.height=options.height||util.height(domNode),options.bgcolor){var ctx=canvas.getContext("2d");ctx.fillStyle=options.bgcolor,ctx.fillRect(0,0,canvas.width,canvas.height)}return canvas}return toSvg(domNode,options).then(util.makeImage).then(util.delay(100)).then(function(image){var canvas=newCanvas(domNode);return canvas.getContext("2d").drawImage(image,0,0),canvas})}function cloneNode(node,filter,root){function makeNodeCopy(node){return util.isCanvas(node)?util.makeImage(node.toDataURL()):node.cloneNode(!1)}function cloneChildren(original,clone,filter){var children=original.childNodes;return 0===children.length?Promise.resolve(clone):function(parent,children,filter){var done=Promise.resolve();return children.forEach(function(child){done=done.then(function(){return cloneNode(child,filter)}).then(function(childClone){childClone&&parent.appendChild(childClone)})}),done}(clone,util.asArray(children),filter).then(function(){return clone})}function processClone(original,clone){function cloneStyle(){!function(source,target){source.cssText?target.cssText=source.cssText:function(source,target){util.asArray(source).forEach(function(name){target.setProperty(name,source.getPropertyValue(name),source.getPropertyPriority(name))})}(source,target)}(self.window.getComputedStyle(original),clone.style)}function clonePseudoElements(){function clonePseudoElement(element){var style=self.window.getComputedStyle(original,element),content=style.getPropertyValue("content");if(""!==content&&"none"!==content){var className=util.uid();clone.className=clone.className+" "+className;var styleElement=self.document.createElement("style");styleElement.appendChild(function(className,element,style){var selector="."+className+":"+element,cssText=style.cssText?function(style){var content=style.getPropertyValue("content");return style.cssText+" content: "+content+";"}(style):function(style){function formatProperty(name){return name+": "+style.getPropertyValue(name)+(style.getPropertyPriority(name)?" !important":"")}return util.asArray(style).map(formatProperty).join("; ")+";"}(style);return self.document.createTextNode(selector+"{"+cssText+"}")}(className,element,style)),clone.appendChild(styleElement)}}[":before",":after"].forEach(function(element){clonePseudoElement(element)})}function copyUserInput(){util.isTextArea(original)&&(clone.innerHTML=original.value),util.isInput(original)&&clone.setAttribute("value",original.value)}function fixSvg(){util.isSVG(clone)&&(clone.setAttribute("xmlns","http://www.w3.org/2000/svg"),util.isSVGRect(clone)&&["width","height"].forEach(function(attribute){var value=clone.getAttribute(attribute);value&&clone.style.setProperty(attribute,value)}))}return util.isElement(clone)?Promise.resolve().then(cloneStyle).then(clonePseudoElements).then(copyUserInput).then(fixSvg).then(function(){return clone}):clone}return root||!filter||filter(node)?Promise.resolve(node).then(makeNodeCopy).then(function(clone){return cloneChildren(node,clone,filter)}).then(function(clone){return processClone(node,clone)}):Promise.resolve()}function embedFonts(node){return fontFaces.resolveAll().then(function(cssText){var styleNode=self.document.createElement("style");return node.appendChild(styleNode),styleNode.appendChild(self.document.createTextNode(cssText)),node})}function inlineImages(node){return images.inlineAll(node).then(function(){return node})}function makeSvgDataUri(node,width,height){return Promise.resolve(node).then(function(node){return node.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new self.window.XMLSerializer).serializeToString(node)}).then(util.escapeXhtml).then(function(xhtml){return["data:image/svg+xml;charset=utf-8,",'<svg xmlns="http://www.w3.org/2000/svg" width="',width,'" height="',height,'">','<foreignObject x="0" y="0" width="100%" height="100%">',xhtml,"</foreignObject>","</svg>"].join("")})}_classCallCheck(this,Dom2Image);var self=this;this.window=wnd,this.document=doc,this.cache=cache;var util=function(){function mimes(){var WOFF="application/font-woff";return{woff:WOFF,woff2:WOFF,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}function parseExtension(url){var match=/\.([^\.\/]*?)$/g.exec(url);return match?match[1]:""}function mimeType(url){var extension=parseExtension(url).toLowerCase();return mimes()[extension]||""}function isDataUrl(url){return-1!==url.search(/^(data:)/)}function toBlob(canvas){return new Promise(function(resolve){for(var binaryString=self.window.atob(canvas.toDataURL().split(",")[1]),length=binaryString.length,binaryArray=new self.window.Uint8Array(length),i=0;i<length;i++)binaryArray[i]=binaryString.charCodeAt(i);resolve(new self.window.Blob([binaryArray],{type:"image/png"}))})}function canvasToBlob(canvas){return canvas.toBlob?new Promise(function(resolve){canvas.toBlob(resolve)}):toBlob(canvas)}function resolveUrl(url,baseUrl){var doc=self.document.implementation.createHTMLDocument(),base=doc.createElement("base");doc.head.appendChild(base);var a=doc.createElement("a");return doc.body.appendChild(a),base.href=baseUrl,a.href=url,a.href}function makeImage(uri){return new Promise(function(resolve,reject){var image=new self.window.Image;image.onload=function(){resolve(image)},image.onerror=reject,image.src=uri})}function getAndEncode(url){var data=self.cache.get(url);if(data)return data.content?data.content:new Promise(function(resolve){data.content?resolve(data.content):data.pendings.push(resolve)});data=self.cache.put(url,{pendings:[]});var TIMEOUT=3e4;return new Promise(function(resolve){function done(){if(4===request.readyState){if(200!==request.status)return void fail("cannot fetch resource: "+url+", status: "+request.status);var encoder=new self.window.FileReader;encoder.onloadend=function(){data.content=encoder.result.split(/,/)[1];for(var _iterator=data.pendings,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}_ref(data.content)}data.pendings=[],resolve(data.content)},encoder.readAsDataURL(request.response)}}function timeout(){fail("timeout of "+TIMEOUT+"ms occured while fetching resource: "+url)}function fail(message){console.error(message),resolve("")}var request=new self.window.XMLHttpRequest;request.onreadystatechange=done,request.ontimeout=timeout,request.responseType="blob",request.timeout=TIMEOUT,request.open("GET",url,!0),request.send()})}function dataAsUrl(content,type){return["data:",type,";base64,",content].join("")}function escape(string){return string.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}function delay(ms){return function(arg){return new Promise(function(resolve){setTimeout(function(){resolve(arg)},ms)})}}function asArray(arrayLike){for(var array=[],length=arrayLike.length,i=0;i<length;i++)array.push(arrayLike[i]);return array}function escapeXhtml(string){return string.replace(/(#|\n)/g,function(c){return"#"===c?"%23":"%0A"})}function width(node){var leftBorder=px(node,"border-left-width"),rightBorder=px(node,"border-right-width");return node.scrollWidth+leftBorder+rightBorder}function height(node){var topBorder=px(node,"border-top-width"),bottomBorder=px(node,"border-bottom-width");return node.scrollHeight+topBorder+bottomBorder}function px(node,styleProperty){var value=self.window.getComputedStyle(node).getPropertyValue(styleProperty);return parseFloat(value.replace("px",""))}function isElement(node){return node instanceof self.window.Element}function isCanvas(node){return node instanceof self.window.HTMLCanvasElement}function isTextArea(node){return node instanceof self.window.HTMLTextAreaElement}function isInput(node){return node instanceof self.window.HTMLInputElement}function isSVG(node){return node instanceof self.window.SVGElement}function isSVGRect(node){return node instanceof self.window.SVGRectElement}function isImage(node){return node instanceof self.window.HTMLImageElement}return{escape:escape,parseExtension:parseExtension,mimeType:mimeType,dataAsUrl:dataAsUrl,isDataUrl:isDataUrl,canvasToBlob:canvasToBlob,resolveUrl:resolveUrl,getAndEncode:getAndEncode,uid:function(){var index=0;return function(){return"u"+function(){return("0000"+(self.window.Math.random()*self.window.Math.pow(36,4)<<0).toString(36)).slice(-4)}()+index++}}(),delay:delay,asArray:asArray,escapeXhtml:escapeXhtml,makeImage:makeImage,width:width,height:height,isElement:isElement,isCanvas:isCanvas,isTextArea:isTextArea,isInput:isInput,isSVG:isSVG,isSVGRect:isSVGRect,isImage:isImage}}(),inliner=function(){function shouldProcess(string){return-1!==string.search(URL_REGEX)}function readUrls(string){for(var result=[],match=void 0;null!==(match=URL_REGEX.exec(string));)result.push(match[1]);return result.filter(function(url){return!util.isDataUrl(url)})}function inline(string,url,baseUrl,get){function urlAsRegex(url){return new self.window.RegExp(["(url\\(['\"]?)(",util.escape(url),")(['\"]?\\))"].join(""),"g")}return Promise.resolve(url).then(function(url){return baseUrl?util.resolveUrl(url,baseUrl):url}).then(get||util.getAndEncode).then(function(data){return util.dataAsUrl(data,util.mimeType(url))}).then(function(dataUrl){return string.replace(urlAsRegex(url),["$1",dataUrl,"$3"].join(""))})}function inlineAll(string,baseUrl,get){return function(){return!shouldProcess(string)}()?Promise.resolve(string):Promise.resolve(string).then(readUrls).then(function(urls){var done=Promise.resolve(string);return urls.forEach(function(url){done=done.then(function(string){return inline(string,url,baseUrl,get)})}),done})}var URL_REGEX=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:inlineAll,shouldProcess:shouldProcess,impl:{readUrls:readUrls,inline:inline}}}(),fontFaces=function(){function resolveAll(){return readAll(self.document).then(function(webFonts){return Promise.all(webFonts.map(function(webFont){return webFont.resolve()}))}).then(function(cssStrings){return cssStrings.join("\n")})}function readAll(){function selectWebFontRules(cssRules){return cssRules.filter(function(rule){return rule.type===CSSRule.FONT_FACE_RULE}).filter(function(rule){return inliner.shouldProcess(rule.style.getPropertyValue("src"))})}function getCssRules(styleSheets){var cssRules=[];return styleSheets.forEach(function(sheet){try{util.asArray(sheet.cssRules||[]).forEach(cssRules.push.bind(cssRules))}catch(e){console.log("Error while reading CSS rules from "+sheet.href,e.toString())}}),cssRules}function newWebFont(webFontRule){return{resolve:function(){var baseUrl=(webFontRule.parentStyleSheet||{}).href;return inliner.inlineAll(webFontRule.cssText,baseUrl)},src:function(){return webFontRule.style.getPropertyValue("src")}}}return Promise.resolve(util.asArray(self.document.styleSheets)).then(getCssRules).then(selectWebFontRules).then(function(rules){return rules.map(newWebFont)})}return{resolveAll:resolveAll,impl:{readAll:readAll}}}(),images=function(){function newImage(element){function inline(get){return util.isDataUrl(element.src)?Promise.resolve():Promise.resolve(element.src).then(get||util.getAndEncode).then(function(data){return util.dataAsUrl(data,util.mimeType(element.src))}).then(function(dataUrl){return new Promise(function(resolve,reject){element.onload=resolve,element.onerror=reject,element.src=dataUrl})})}return{inline:inline}}function inlineAll(node){return util.isElement(node)?function(node){var background=node.style.getPropertyValue("background");return background?inliner.inlineAll(background).then(function(inlined){node.style.setProperty("background",inlined,node.style.getPropertyPriority("background"))}).then(function(){return node}):Promise.resolve(node)}(node).then(function(){return util.isImage(node)?newImage(node).inline():Promise.all(util.asArray(node.childNodes).map(function(child){return inlineAll(child)}))}):Promise.resolve(node)}return{inlineAll:inlineAll,impl:{newImage:newImage}}}();this.toSvg=toSvg,this.toPng=toPng,this.toJpeg=toJpeg,this.toBlob=toBlob,this.toPixelData=toPixelData,this.impl={fontFaces:fontFaces,images:images,util:util,inliner:inliner}};exports.default=Dom2Image},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _libs=__webpack_require__(0),Drag=function(){function Drag(wnd,doc,visualWorld){_classCallCheck(this,Drag),this.wnd=wnd,this.doc=doc,this.visual=visualWorld,this.coords=new _libs.THREE.Vector2,this.intersection=new _libs.THREE.Vector3,this.raycaster=this.visual.raycaster,this.camera=this.visual.camera,this.plane=new _libs.THREE.Plane,this.threes=[],this.selected=null,this.enabled=!0,this.controlsState=this.visual.getControlsState(),this.element=this.visual.element,this.binds={onMouseMove:this.onMouseMove.bind(this),onMouseDown:this.onMouseDown.bind(this),onMouseUp:this.onMouseUp.bind(this)},(0,_libs.$)(this.element).on("mousemove",this.binds.onMouseMove),(0,_libs.$)(this.element).on("mousedown",this.binds.onMouseDown),(0,_libs.$)(this.doc).on("mouseup",this.binds.onMouseUp)}return Drag.prototype.addThree=function(three){this.threes.push(three)},Drag.prototype.removeThree=function(three){var i=this.threes.indexOf(three);~i&&this.threes.splice(i,1)},Drag.prototype.onPickCallback=function(){return!0},Drag.prototype.onDragCallback=function(){return!0},Drag.prototype.onReleaseCallback=function(){},Drag.prototype.dispose=function(){(0,_libs.$)(this.element).off("mousemove",this.binds.onMouseMove),(0,_libs.$)(this.element).off("mousedown",this.binds.onMouseDown),(0,_libs.$)(this.doc).off("mouseup",this.binds.onMouseUp)},Drag.prototype.setCoordsFromEvent=function(e){var jElement=(0,_libs.$)(this.element),offset=jElement.offset();return this.coords.x=(e.pageX-offset.left)/jElement.width()*2-1,this.coords.y=-(e.pageY-offset.top)/jElement.height()*2+1,this.coords},Drag.prototype.onMouseDown=function(e){if(this.enabled){this.selected&&this.onMouseUp(e),this.setCoordsFromEvent(e),this.raycaster.setFromCamera(this.coords,this.camera);var intersects=this.raycaster.intersectObjects(this.threes);if(intersects.length>0){var selected=intersects[0].object;if(!this.onPickCallback(intersects[0]))return;var v=intersects[0].point.clone();this.distance=v.sub(this.raycaster.ray.origin).length(),this.controlsState=this.visual.getControlsState(),this.visual.setControlsState(!1),this.plane.setFromNormalAndCoplanarPoint(this.visual.camera.getWorldDirection(this.plane.normal),intersects[0].point),this.selected=selected}}},Drag.prototype.onMouseMove=function(e){this.enabled&&(e.preventDefault(),this.selected&&(this.setCoordsFromEvent(e),this.raycaster.setFromCamera(this.coords,this.camera),this.raycaster.ray.intersectPlane(this.plane,this.intersection)&&(this.onDragCallback(this.intersection)||this.onMouseUp(e))))},Drag.prototype.onMouseUp=function(e){this.selected&&(this.onReleaseCallback(),this.selected=null,this.visual.setControlsState(this.controlsState)),this.enabled&&e.preventDefault()},Drag}();exports.default=Drag},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_libs=__webpack_require__(0);__webpack_require__(74)(_libs.$);var EventsToActions=function(){function EventsToActions(element,actions){_classCallCheck(this,EventsToActions),this.actions=actions||{},this.element=element,this.doc=element[0].ownerDocument,this.wnd=this.doc.defaultView,this.enabled=!0,this.binds={contextMenu:this.contextMenu.bind(this),mouseDown:this.mouseDown.bind(this),mouseMove:this.mouseMove.bind(this),mouseUp:this.mouseUp.bind(this),mouseWheel:this.mouseWheel.bind(this),mouseMoveDoc:this.mouseMoveDoc.bind(this),mouseUpDoc:this.mouseUpDoc.bind(this),click:this.click.bind(this),dblclick:this.dblclick.bind(this),touchStart:this.touchStart.bind(this),touchMove:this.touchMove.bind(this),touchEnd:this.touchEnd.bind(this),keyDown:this.keyDown.bind(this),keyPress:this.keyPress.bind(this),keyUp:this.keyUp.bind(this)},this.element.on("contextmenu",this.binds.contextMenu),this.element.on("mousedown",this.binds.mouseDown),this.element.on("mousemove",this.binds.mouseMove),this.element.on("mouseup",this.binds.mouseUp),this.element.on("mousewheel",this.binds.mouseWheel),(0,_libs.$)(this.doc).on("mousemove",this.binds.mouseMoveDoc),(0,_libs.$)(this.doc).on("mouseup",this.binds.mouseUpDoc),this.element.on("click",this.binds.click),this.element.on("dblclick",this.binds.dblclick),this.element.on("touchstart",this.binds.touchStart),this.element.on("touchmove",this.binds.touchMove),this.element.on("touchend",this.binds.touchEnd),(0,_libs.$)(this.wnd).on("keydown",this.binds.keyDown),(0,_libs.$)(this.wnd).on("keypress",this.binds.keyPress),(0,_libs.$)(this.wnd).on("keyup",this.binds.keyUp)}return EventsToActions.getEventFlags=function(e){return e.ctrlKey<<0|e.shiftKey<<1|e.altKey<<2},EventsToActions.getPosition=function(touches){var x=void 0,y=void 0;return 2===touches.length?(x=touches[1].pageX-touches[0].pageX,y=touches[1].pageY-touches[0].pageY):(x=touches[0].pageX,y=touches[0].pageY),{x:x,y:y}},EventsToActions.prototype.addAction=function(action,type,code,flags){type=type.toLowerCase(),this.actions[type]||(this.actions[type]={}),this.actions[type][code]||(this.actions[type][code]={}),this.actions[type][code][flags]||(this.actions[type][code][flags]=[]),this.actions[type][code][flags].push(action)},EventsToActions.prototype.getActions=function(type,code,flags){return((this.actions[type]||{})[code]||{})[flags]||[]},EventsToActions.prototype.fireActions=function(actions,e,data){for(var _iterator=actions,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}_ref(e,data)}},EventsToActions.prototype.contextMenu=function(e){if(this.enabled){var flags=EventsToActions.getEventFlags(e);this.fireActions(this.getActions("contextmenu",e.button,flags),e)}},EventsToActions.prototype.mouseDown=function(e){if(this.picked&&this.mouseUpDoc(),this.enabled){var flags=EventsToActions.getEventFlags(e);this.fireActions(this.getActions("mousedown",e.button,flags),e),this.picked={x:e.pageX,y:e.pageY,actions:this.getActions("mousedrag",e.button,flags)},this.fireActions(this.picked.actions,e,{state:"start"})}},EventsToActions.prototype.mouseMove=function(e){if(this.enabled){var flags=EventsToActions.getEventFlags(e);this.fireActions(this.getActions("mousemove",e.button,flags),e)}},EventsToActions.prototype.mouseMoveDoc=function(e){this.enabled&&this.picked&&(this.fireActions(this.picked.actions,e,{state:"move",dx:e.pageX-this.picked.x,dy:e.pageY-this.picked.y}),this.picked={x:e.pageX,y:e.pageY,actions:this.picked.actions})},EventsToActions.prototype.mouseUp=function(e){if(this.enabled){var flags=EventsToActions.getEventFlags(e);this.fireActions(this.getActions("mouseup",e.button,flags),e)}},EventsToActions.prototype.mouseUpDoc=function(e){this.picked&&(this.fireActions(this.picked.actions,e,{state:"end"}),delete this.picked)},EventsToActions.prototype.mouseWheel=function(e){if(this.enabled){var flags=EventsToActions.getEventFlags(e);this.fireActions(this.getActions("mousewheel",0,flags),e)}},EventsToActions.prototype.clicks=function(e,type){if(this.enabled){var flags=EventsToActions.getEventFlags(e);this.fireActions(this.getActions(type,e.button,flags),e)}},EventsToActions.prototype.click=function(e){this.clicks(e,"click")},EventsToActions.prototype.dblclick=function(e){this.clicks(e,"dblclick")},EventsToActions.prototype.touchPick=function(e,flags,touches){var pos=EventsToActions.getPosition(touches);this.touchPicked=_extends({},pos,{actions:this.getActions("touchdrag",touches.length,flags),code:touches.length,flags:flags}),this.fireActions(this.touchPicked.actions,e,_extends({state:"start"},pos))},EventsToActions.prototype.touchStart=function(e){if(this.touchPicked&&this.touchEnd(e),this.enabled){var flags=EventsToActions.getEventFlags(e),touches=e.touches||e.originalEvent.touches;this.fireActions(this.getActions("touchstart",touches.length,flags),e),this.touchPick(e,flags,touches)}},EventsToActions.prototype.touchMove=function(e){if(this.enabled){var flags=EventsToActions.getEventFlags(e),touches=e.touches||e.originalEvent.touches;if(this.fireActions(this.getActions("touchmove",touches.length,flags),e),this.touchPicked)if(this.touchPicked.code===touches.length&&this.touchPicked.flags===flags){var pos=EventsToActions.getPosition(touches);this.fireActions(this.touchPicked.actions,e,_extends({state:"move",dx:pos.x-this.touchPicked.x,dy:pos.y-this.touchPicked.y},pos)),this.touchPicked=_extends({},this.touchPicked,pos)}else this.touchEnd(e),this.touchPick(e,flags,touches)}},EventsToActions.prototype.touchEnd=function(e){this.touchPicked&&(this.fireActions(this.touchPicked.actions,e,{state:"end"}),delete this.touchPicked)},EventsToActions.prototype.key=function(e,type){if(this.enabled){var flags=EventsToActions.getEventFlags(e);this.fireActions(this.getActions(type,e.keyCode,flags),e)}},EventsToActions.prototype.keyDown=function(e){this.key(e,"keydown")},EventsToActions.prototype.keyPress=function(e){this.key(e,"keypress")},EventsToActions.prototype.keyUp=function(e){this.key(e,"keyup")},EventsToActions.prototype.dispose=function(){this.element.off("contextmenu",this.binds.contextMenu),this.element.off("mousedown",this.binds.mouseDown),this.element.off("mousemove",this.binds.mouseMove),this.element.off("mouseup",this.binds.mouseUp),this.element.off("mousewheel",this.binds.mouseWheel),(0,_libs.$)(this.doc).off("mousemove",this.binds.mouseMoveDoc),(0,_libs.$)(this.doc).off("mouseup",this.binds.mouseUpDoc),this.element.off("click",this.binds.click),this.element.off("dblclick",this.binds.dblclick),this.element.off("touchstart",this.binds.touchStart),this.element.off("touchmove",this.binds.touchMove),this.element.off("touchend",this.binds.touchEnd),(0,_libs.$)(this.wnd).off("keydown",this.binds.keyDown),(0,_libs.$)(this.wnd).off("keypress",this.binds.keyPress),(0,_libs.$)(this.wnd).off("keyup",this.binds.keyUp)},EventsToActions}();EventsToActions.modKeys={Ctrl:1,Shift:2,Alt:4},EventsToActions.mouseButtons={Left:0,Middle:1,Right:2},exports.default=EventsToActions},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var FullScreen=function(){function FullScreen(){_classCallCheck(this,FullScreen)}return FullScreen.available=function(){return FullScreen._hasWebkitFullScreen||FullScreen._hasMozFullScreen||FullScreen._hasMsFullscreen},FullScreen.activated=function(){return FullScreen._hasWebkitFullScreen?document.webkitIsFullScreen:FullScreen._hasMozFullScreen?document.mozFullScreen:FullScreen._hasMsFullscreen?!!document.msFullscreenElement:void console.assert(!1)},FullScreen.addEventListener=function(element,handler){element.addEventListener&&(element.addEventListener("webkitfullscreenchange",handler,!1),element.addEventListener("mozfullscreenchange",handler,!1),element.addEventListener("fullscreenchange",handler,!1),element.addEventListener("MSFullscreenChange",handler,!1))},FullScreen.removeEventListener=function(element,handler){element.removeEventListener&&(element.removeEventListener("webkitfullscreenchange",handler,!1),element.removeEventListener("mozfullscreenchange",handler,!1),element.removeEventListener("fullscreenchange",handler,!1),element.removeEventListener("MSFullscreenChange",handler,!1))},FullScreen.request=function(element){element=element||document.body,FullScreen._hasWebkitFullScreen?element.webkitRequestFullScreen():FullScreen._hasMozFullScreen?element.mozRequestFullScreen():FullScreen._hasMsFullscreen?element.msRequestFullscreen():console.assert(!1)},FullScreen.cancel=function(){FullScreen._hasWebkitFullScreen?document.webkitCancelFullScreen():FullScreen._hasMozFullScreen?document.mozCancelFullScreen():FullScreen._hasMsFullscreen?document.msExitFullscreen():console.assert(!1)},FullScreen}();FullScreen._hasWebkitFullScreen=!!document.webkitCancelFullScreen,FullScreen._hasMozFullScreen=!!document.mozCancelFullScreen,FullScreen._hasMsFullscreen=!!document.documentElement.msRequestFullscreen,exports.default=FullScreen},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _libs=__webpack_require__(0),_ImageBase2=__webpack_require__(6),_ImageBase3=_interopRequireDefault(_ImageBase2),_BaseMathUtils=__webpack_require__(2),_BaseMathUtils2=_interopRequireDefault(_BaseMathUtils),_Dom2Image=__webpack_require__(50),_Dom2Image2=_interopRequireDefault(_Dom2Image),_DocMouseSimulator=__webpack_require__(49),_DocMouseSimulator2=_interopRequireDefault(_DocMouseSimulator),InteractiveImage=function(_ImageBase){function InteractiveImage(context,width,height,color,src,cache,injector){_classCallCheck(this,InteractiveImage);var _this=_possibleConstructorReturn(this,_ImageBase.call(this,context,width,height,color));_this.iId="i"+_BaseMathUtils2.default.getUnique();var jFrame=(0,_libs.$)('<iframe id="'+_this.iId+'" src="'+src+'" style="position: fixed; left: -1000px;"></iframe>');return(0,_libs.$)(_this.doc.body).append(jFrame),_this.frame=jFrame[0],_this.binds={},injector&&injector(_this.frame.contentWindow),_this.doc.implementation.hasFeature("www.http://w3.org/TR/SVG11/feature#Extensibility","1.1")&&(_this.image=new Image,_this.binds.imageLoad=function(){_this.renderImage(_this.image),_this.finishRender()},(0,_libs.$)(_this.image).on("load",_this.binds.imageLoad),_this.svgRender=new _Dom2Image2.default(_this.frame.contentWindow,_this.frame.contentDocument,cache)),_this.binds.frameLoad=function(){~_this.frame.contentDocument.title.indexOf("404")?(_this.startRender=function(){_this.renderNotFoundPage(),_this.finishRender()},_this.finishLoad()):setTimeout(function(){_this.frame&&(_this.width=(0,_libs.$)(_this.frame.contentDocument.body).width(),_this.height=(0,_libs.$)(_this.frame.contentDocument.body).height(),_this.resH=_this.height/_this.width*_this.resW,jFrame.css("width",_this.width+"px").css("height",_this.height+"px"),jFrame.offset({left:-_this.width-100,top:0}),_this.svgRender&&(_this.simulator=new _DocMouseSimulator2.default(jFrame,_this.frame.contentDocument.body,_this.element),_this.simulator.addDocChangeClb(_this.finishLoad.bind(_this))),_this.startRender=function(){_this.render()},_this.finishLoad())},500)},(0,_libs.$)(_this.frame.contentWindow).on("load",_this.binds.frameLoad),_this}return _inherits(InteractiveImage,_ImageBase),InteractiveImage.prototype.getSimulatedDoc=function(){return this.frame.contentDocument},InteractiveImage.prototype.render=function(){var _this2=this;this.svgRender?this.svgRender.toSvg(this.simulator.element,{height:this.height+"px",width:this.width+"px"}).then(function(dataUrl){_this2.image.src=dataUrl}).catch(function(error){console.error("Dom2Image: ",error),_this2.renderBlankPage(),_this2.finishRender()}):(0,_libs.html2canvas)(this.frame.contentDocument.body,{timeout:3e4}).then(function(canvas){_this2.renderImage(canvas),_this2.finishRender()})},InteractiveImage.prototype.dispose=function(){(0,_libs.$)(this.image).off("load",this.binds.imageLoad),(0,_libs.$)(this.frame.contentWindow).off("load",this.binds.frameLoad),(0,_libs.$)(this.doc.body).find("#"+this.iId).remove(),this.image&&(this.image.src="",delete this.image),this.frame.src="",delete this.frame,_ImageBase.prototype.dispose.call(this)},InteractiveImage.prototype.simulate=function(e,doc,x,y){this.simulator&&this.simulator.simulate(e,doc,x,y)},InteractiveImage}(_ImageBase3.default);exports.default=InteractiveImage},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _libs=__webpack_require__(0),_GraphUtils=__webpack_require__(4),_GraphUtils2=_interopRequireDefault(_GraphUtils),_MathUtils=__webpack_require__(5),_MathUtils2=_interopRequireDefault(_MathUtils),LoadingAnimation=function(){function LoadingAnimation(width,height,color){_classCallCheck(this,LoadingAnimation),this.c=_GraphUtils2.default.createCanvas(width,height),this.p={g:9.8,dt:1/60,color:color,updateInterval:.25},this.ctx=this.c.getContext("2d"),this.os=[-2,Math.PI/2],this.t=this.p.updateInterval}return LoadingAnimation.prototype.dy=function(t,y){var w=y[0],a=y[1];return[-this.g*Math.cos(a),w]},LoadingAnimation.prototype.integrate=function(T){for(var t=0,dt=this.p.dt,os=this.os;t<T;)t+dt>T&&(dt=T-t),os=_MathUtils2.default.rk4(this.dy.bind({g:this.p.g}),0,dt,os),t+=dt;return os},LoadingAnimation.prototype.calcTimeTo=function(target){for(var t=0,dt=this.p.dt,os=this.os;Math.abs(os[1]-target)>1e-4;){var nos=_MathUtils2.default.rk4(this.dy.bind({g:this.p.g}),0,dt,os);nos[0]<0&&nos[1]<target||nos[0]>0&&nos[1]>target?dt/=2:(os=nos,t+=dt)}return t},LoadingAnimation.prototype.update=function(T){if(this.os=this.integrate(T),this.t+=T,this.t>=this.p.updateInterval){this.t=0;var r=.04*Math.min(this.c.width,this.c.height),a=this.os[1],x0=.5*this.c.width,y0=.5*this.c.height,ctx=this.ctx;ctx.clearRect(0,0,this.c.width,this.c.height),ctx.beginPath(),ctx.fillStyle=_GraphUtils2.default.color2Rgba(this.p.color,1),ctx.rect(0,0,this.c.width,this.c.height),ctx.fill(),ctx.beginPath(),ctx.shadowBlur=50,ctx.fillStyle=_GraphUtils2.default.color2Rgba(_GraphUtils2.default.inverseColor(this.p.color,.9),Math.abs(this.os[0]/6.36)),ctx.shadowColor=_GraphUtils2.default.color2Rgba(_GraphUtils2.default.inverseColor(this.p.color,1),.9),ctx.shadowOffsetX=0,ctx.shadowOffsetY=0,ctx.font="bold "+Math.round(.25*r)+"px Arial",ctx.textAlign="center",ctx.textBaseline="middle",ctx.fillText((0,_libs.tr)("Loading..."),x0,y0);var da=2*Math.PI/10;ctx.shadowColor=_GraphUtils2.default.color2Rgba(_GraphUtils2.default.inverseColor(this.p.color,1),.7);for(var i=0,_a=a,_r=.2*r;i<10;++i,_r*=.9,_a+=da){ctx.beginPath(),ctx.fillStyle=_GraphUtils2.default.color2Rgba(_GraphUtils2.default.inverseColor(this.p.color,(10-i)/10),.7*(10-i)/10);var cx=x0+r*Math.cos(_a),cy=y0-r*Math.sin(_a),nx=x0+r*Math.cos(_a+da),ny=y0-r*Math.sin(_a+da);ctx.shadowOffsetX=.2*(nx-cx),ctx.shadowOffsetY=.2*(ny-cy),ctx.arc(cx,cy,_r,0,2*Math.PI,1),ctx.fill()}this.onChange&&this.onChange(this.c,this.p.color)}},LoadingAnimation.prototype.getImage=function(){return this.c},LoadingAnimation.prototype.dispose=function(){this.c.width=0,this.c.height=0,delete this.ctx,delete this.c},LoadingAnimation.prototype.createSprite=function(n){var c=_GraphUtils2.default.createCanvas(this.c.width*n,this.c.height),ctx=c.getContext("2d"),t=this.calcTimeTo(this.os[1]+2*Math.sign(this.os[0])*Math.PI),dt=t/(n+1),updateInterval=this.p.updateInterval;this.p.updateInterval=0;for(var i=0;i<n;++i)this.update(dt),ctx.drawImage(this.c,i*this.c.width,0);return this.p.updateInterval=updateInterval,c},LoadingAnimation}();exports.default=LoadingAnimation},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var LoadingController=(__webpack_require__(0),function(){function LoadingController(view){var showProgress=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],loadingMsg=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;_classCallCheck(this,LoadingController),this.view=view,this.progress=0,this.showProgress=showProgress,this.getLoadingMsg=loadingMsg||LoadingController.defaultLoadingMsg,this.updateView()}return LoadingController.defaultLoadingMsg=function(progress){return["Please wait... the Application is Loading: ",progress,"%"].join("")},LoadingController.prototype.dispose=function(){this.showProgress=!1,this.updateView(),delete this.view},LoadingController.prototype.setProgress=function(v){this.progress=v,this.updateView()},LoadingController.prototype.updateView=function(){if(this.view){this.view.setState("widLoadingProgress",{enable:!0,visible:this.showProgress,active:!1}),this.view.setState("txtLoadingProgress",{value:this.getLoadingMsg(this.progress),visible:!0});for(var _iterator=this.view.getLinks(),_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}var name=_ref;this.view.setState(name,{enable:!1,visible:!0,active:!1})}this.view.setState("inpPages",{visible:!0,value:""}),this.view.setState("inpPage",{visible:!0,enable:!1,value:""})}},LoadingController}());exports.default=LoadingController},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _libs=__webpack_require__(0),_EventConverter2=__webpack_require__(7),_EventConverter3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_EventConverter2),MouseEventConverter=function(_EventConverter){function MouseEventConverter(wnd,doc,element){_classCallCheck(this,MouseEventConverter);var _this=_possibleConstructorReturn(this,_EventConverter.call(this,wnd,doc));return _this.element=element,_this.binds={convert:_this.convert.bind(_this)},(0,_libs.$)(_this.element).on("mousemove mousedown mouseover mouseout click",_this.binds.convert),(0,_libs.$)(_this.doc).on("mouseup",_this.binds.convert),_this}return _inherits(MouseEventConverter,_EventConverter),MouseEventConverter.prototype.dispose=function(){(0,_libs.$)(this.element).off("mousemove mousedown mouseover mouseout click",this.binds.convert),(0,_libs.$)(this.doc).off("mouseup",this.binds.convert)},MouseEventConverter}(_EventConverter3.default);exports.default=MouseEventConverter},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_libs=__webpack_require__(0),_MathUtils=__webpack_require__(5),_MathUtils2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_MathUtils),Object3DWatcher=function(){function Object3DWatcher(visual,boundBoxClb){var testScale=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.testScale;_classCallCheck(this,Object3DWatcher),this.visual=visual,this.boundBoxClb=boundBoxClb,this.testScale=testScale,this.camera=visual.camera,this.element=this.visual.element,this.elementSize={w:1,h:1},this.orbit=visual.getOrbit(),this.scale=1,this.padding=0,this.eps=1e-4,this.v=new _libs.THREE.Vector3,this.dv=new _libs.THREE.Vector2,this.enabled=!1,visual.addRenderCallback(this.update.bind(this)),this.os={vx:0,vy:0,x:0,y:0},this.orbit.update(),this.camera.updateMatrixWorld();var box=this.computeClientBoundBox();this.movePan({x:-1.11*box.mid.x,y:-1.11*box.mid.y})}return Object3DWatcher.prototype.setPadding=function(padding){this.padding=padding},Object3DWatcher.prototype.movePan=function(dv){this.orbit.pan(dv.x*this.visual.width(),-dv.y*this.visual.height())},Object3DWatcher.prototype.vToCamera=function(v){return v.project(this.camera),{x:.5*v.x,y:.5*v.y}},Object3DWatcher.prototype.computeClientBoundBox=function(){for(var box=this.boundBoxClb(),xs=[box.min.x,box.max.x],ys=[0,0],zs=[box.min.z,box.max.z],ps=[],res={max:{},min:{}},_iterator=xs,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}for(var x=_ref,_iterator2=ys,_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[Symbol.iterator]();;){var _ref2;if(_isArray2){if(_i2>=_iterator2.length)break;_ref2=_iterator2[_i2++]}else{if(_i2=_iterator2.next(),_i2.done)break;_ref2=_i2.value}for(var y=_ref2,_iterator3=zs,_isArray3=Array.isArray(_iterator3),_i3=0,_iterator3=_isArray3?_iterator3:_iterator3[Symbol.iterator]();;){var _ref3;if(_isArray3){if(_i3>=_iterator3.length)break;_ref3=_iterator3[_i3++]}else{if(_i3=_iterator3.next(),_i3.done)break;_ref3=_i3.value}var z=_ref3;ps.push(this.vToCamera(this.v.set(x,y,z)))}}}return ps.sort(function(p1,p2){return p1.x-p2.x}),res.min.x=ps[0].x,res.max.x=ps[ps.length-1].x,ps.sort(function(p1,p2){return p1.y-p2.y}),res.min.y=ps[0].y,res.max.y=ps[ps.length-1].y,res.width=res.max.x-res.min.x,res.height=res.max.y-res.min.y,res.mid={x:.5*(res.max.x+res.min.x),y:.5*(res.max.y+res.min.y)},res},Object3DWatcher.prototype.setObject=function(boundBoxClb){this.boundBoxClb=boundBoxClb},Object3DWatcher.prototype.testScale=function(){return!0},Object3DWatcher.prototype.computeCorr=function(K,min,max){var corr=0;return K<1?min>-.5?corr=-.5-min:max<.5&&(corr=.5-max):min<-.5?corr=-.5-min:max>.5&&(corr=.5-max),corr},Object3DWatcher.prototype.centerView=function(T){var box=this.computeClientBoundBox(),Kx=this.elementSize.w/box.width,Ky=this.elementSize.h/box.height,K=Math.min(Kx,Ky),moving=!1;if(this.testScale()&&Math.abs(1/K-this.scale)>this.eps){var scale=1/K+.2*(this.scale-1/K);this.orbit.setScale(this.orbit.getScale()/(K*scale)),this.orbit.update(),this.camera.updateMatrixWorld(),box=this.computeClientBoundBox(),Kx=this.elementSize.w/box.width,Ky=this.elementSize.h/box.height,K=Math.min(Kx,Ky),moving=!0}var dv=this.dv;if(K>1-this.eps)if(this.padding){var height=this.visual.height(),marg=.5*(Ky-1)/Ky,pad=this.padding/height,dpad=Math.max(0,Math.abs(pad)-marg);dv.set(-box.mid.x,-Math.sign(pad)*Math.min(Math.max(0,marg-20/height),dpad)-box.mid.y)}else dv.set(-box.mid.x,-box.mid.y);else{var px=70/this.visual.width(),py=70/this.visual.height();dv.set(this.computeCorr(Kx,box.min.x-px,box.max.x+px),this.computeCorr(Ky,box.min.y-py,box.max.y+py))}if(Math.sqrt(this.os.vx*this.os.vx+this.os.vy*this.os.vy)>.003||dv.length()>.003){var dt=1/60,t=0,os=_extends({},this.os,{x:0,y:0});for(os.tf=function(vx,vy,x,y){return{x:75*(dv.x-x),y:75*(dv.y-y)}};t<T;)t+dt>T&&(dt=T-t),os=this.integrate(os,dt),t+=dt;this.movePan(os),this.os=os,moving=!0}this.orbit.setMoving(moving)},Object3DWatcher.prototype.integrate=function(os,dt){var _MathUtils$rk=_MathUtils2.default.rk4(this.dy.bind(os),0,dt,[os.vx,os.vy,os.x,os.y]),vx=_MathUtils$rk[0],vy=_MathUtils$rk[1],x=_MathUtils$rk[2],y=_MathUtils$rk[3];return _extends({},os,{vx:vx,vy:vy,x:x,y:y})},Object3DWatcher.prototype.dy=function(t,Y){var vx=Y[0],vy=Y[1],x=Y[2],y=Y[3],tf=this.tf(vx,vy,x,y);return[tf.x-15*vx,tf.y-15*vy,vx,vy]},Object3DWatcher.prototype.update=function(dt){this.enabled&&this.boundBoxClb&&this.centerView(dt)},Object3DWatcher}();exports.default=Object3DWatcher},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _libs=__webpack_require__(0),Orbit=function(_THREE$EventDispatche){function Orbit(object,world){function getAutoRotationAngle(){return 2*Math.PI/60/60*scope.autoRotateSpeed}function getZoomScale(){return Math.pow(.95,scope.zoomSpeed)}function rotateLeft(angle){sphericalDelta.theta-=angle}function rotateUp(angle){sphericalDelta.phi-=angle}function dollyIn(dollyScale){scope.object instanceof _libs.THREE.PerspectiveCamera?scale/=dollyScale:scope.object instanceof _libs.THREE.OrthographicCamera?(scope.object.zoom=Math.max(scope.minZoom,Math.min(scope.maxZoom,scope.object.zoom*dollyScale)),scope.object.updateProjectionMatrix(),zoomChanged=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type-dolly/zoom disabled."),scope.enableZoom=!1)}function dollyOut(dollyScale){scope.object instanceof _libs.THREE.PerspectiveCamera?scale*=dollyScale:scope.object instanceof _libs.THREE.OrthographicCamera?(scope.object.zoom=Math.max(scope.minZoom,Math.min(scope.maxZoom,scope.object.zoom/dollyScale)),scope.object.updateProjectionMatrix(),zoomChanged=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type-dolly/zoom disabled."),scope.enableZoom=!1)}function rotate(event,data){if(scope.enabled&&scope.enableRotate&&"move"===data.state){var clientWidth=scope.world.width(),clientHeight=scope.world.height();rotateLeft(2*Math.PI*data.dx/clientWidth*scope.rotateSpeed),rotateUp(2*Math.PI*data.dy/clientHeight*scope.rotateSpeed),scope.update()}}function pan(event,data){scope.enabled&&scope.enablePan&&"move"===data.state&&(scope.pan(data.dx,data.dy),scope.update())}function offsetDolly(event,data){scope.enabled&&scope.enableZoom&&"move"===data.state&&(data.dy>0?dollyIn(getZoomScale()):data.dy<0&&dollyOut(getZoomScale()),scope.update())}function wheelDolly(event){scope.enabled&&scope.enableZoom&&(event.deltaY>0?dollyOut(getZoomScale()):event.deltaY<0&&dollyIn(getZoomScale()),scope.update())}_classCallCheck(this,Orbit);var _this=_possibleConstructorReturn(this,_THREE$EventDispatche.call(this));_this.moving=!1,_this.object=object,_this.world=world,_this.enabled=!0,_this.target=new _libs.THREE.Vector3,_this.minDistance=0,_this.maxDistance=1/0,_this.minZoom=0,_this.maxZoom=1/0,_this.minPolarAngle=0,_this.maxPolarAngle=Math.PI,_this.minAzimuthAngle=-1/0,_this.maxAzimuthAngle=1/0,_this.enableDamping=!1,_this.dampingFactor=.25,_this.enableZoom=!0,_this.zoomSpeed=1,_this.enableRotate=!0,_this.rotateSpeed=1,_this.enablePan=!0,_this.autoRotate=!1,_this.autoRotateSpeed=2,_this.target0=_this.target.clone(),_this.position0=_this.object.position.clone(),_this.zoom0=_this.object.zoom,_this.getPolarAngle=function(){return spherical.phi},_this.getAzimuthalAngle=function(){return spherical.theta},_this.reset=function(){scope.target.copy(scope.target0),scope.object.position.copy(scope.position0),scope.object.zoom=scope.zoom0,scope.object.updateProjectionMatrix(),scope.dispatchEvent(changeEvent),scope.update()},_this.zoomOut=function(){var speed=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.zoomSpeed,_speed=this.zoomSpeed;this.zoomSpeed=speed,dollyIn(getZoomScale()),this.zoomSpeed=_speed},_this.zoomIn=function(){var speed=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.zoomSpeed,_speed=this.zoomSpeed;this.zoomSpeed=speed,dollyOut(getZoomScale()),this.zoomSpeed=_speed},_this.getScale=function(){return scale},_this.setScale=function(newScale){scale=newScale},_this.update=function(){var offset=new _libs.THREE.Vector3,quat=(new _libs.THREE.Quaternion).setFromUnitVectors(object.up,new _libs.THREE.Vector3(0,1,0)),quatInverse=quat.clone().inverse(),lastPosition=new _libs.THREE.Vector3,lastQuaternion=new _libs.THREE.Quaternion;return function(){var position=scope.object.position;return offset.copy(position).sub(scope.target),offset.applyQuaternion(quat),spherical.setFromVector3(offset),scope.autoRotate&&rotateLeft(getAutoRotationAngle()),spherical.theta+=sphericalDelta.theta,spherical.phi+=sphericalDelta.phi,spherical.theta=Math.max(scope.minAzimuthAngle,Math.min(scope.maxAzimuthAngle,spherical.theta)),spherical.phi=Math.max(scope.minPolarAngle,Math.min(scope.maxPolarAngle,spherical.phi)),spherical.makeSafe(),spherical.radius*=scale,spherical.radius=Math.max(scope.minDistance,Math.min(scope.maxDistance,spherical.radius)),scope.target.add(panOffset),offset.setFromSpherical(spherical),offset.applyQuaternion(quatInverse),position.copy(scope.target).add(offset),scope.object.lookAt(scope.target),!0===scope.enableDamping?(sphericalDelta.theta*=1-scope.dampingFactor,sphericalDelta.phi*=1-scope.dampingFactor):sphericalDelta.set(0,0,0),scale=1,panOffset.set(0,0,0),!!(zoomChanged||lastPosition.distanceToSquared(scope.object.position)>EPS||8*(1-lastQuaternion.dot(scope.object.quaternion))>EPS)&&(scope.dispatchEvent(changeEvent),lastPosition.copy(scope.object.position),lastQuaternion.copy(scope.object.quaternion),zoomChanged=!1,!0)}}(),_this.dispose=function(){};var scope=_this,changeEvent={type:"change"},EPS=1e-6,spherical=new _libs.THREE.Spherical,sphericalDelta=new _libs.THREE.Spherical,scale=1,panOffset=new _libs.THREE.Vector3,zoomChanged=!1,panLeft=function(){var v=new _libs.THREE.Vector3;return function(distance,objectMatrix){v.setFromMatrixColumn(objectMatrix,0),v.multiplyScalar(-distance),panOffset.add(v)}}(),panUp=function(){var v=new _libs.THREE.Vector3;return function(distance,objectMatrix){v.setFromMatrixColumn(objectMatrix,1),v.multiplyScalar(distance),panOffset.add(v)}}();return scope.pan=function(){var offset=new _libs.THREE.Vector3;return function(deltaX,deltaY){var clientWidth=scope.world.width(),clientHeight=scope.world.height();if(scope.object instanceof _libs.THREE.PerspectiveCamera){var position=scope.object.position;offset.copy(position).sub(scope.target);var targetDistance=offset.length();targetDistance*=Math.tan(scope.object.fov/2*Math.PI/180),panLeft(2*deltaX*targetDistance/clientHeight,scope.object.matrix),panUp(2*deltaY*targetDistance/clientHeight,scope.object.matrix)}else scope.object instanceof _libs.THREE.OrthographicCamera?(panLeft(deltaX*(scope.object.right-scope.object.left)/scope.object.zoom/clientWidth,scope.object.matrix),panUp(deltaY*(scope.object.top-scope.object.bottom)/scope.object.zoom/clientHeight,scope.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type-pan disabled."),scope.enablePan=!1)}}(),_this.actions={rotate:rotate,pan:pan,offsetDolly:offsetDolly,wheelDolly:wheelDolly},_this.update(),_this}return _inherits(Orbit,_THREE$EventDispatche),Orbit.prototype.setMoving=function(moving){this.moving=moving},Orbit.prototype.isMoving=function(){return this.moving},Orbit}(_libs.THREE.EventDispatcher);exports.default=Orbit},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _libs=__webpack_require__(0),_ImageBase2=__webpack_require__(6),_ImageBase3=_interopRequireDefault(_ImageBase2),_Pdf=__webpack_require__(19),_Pdf2=_interopRequireDefault(_Pdf),_BaseMathUtils=__webpack_require__(2),_BaseMathUtils2=_interopRequireDefault(_BaseMathUtils),_CustomEventConverter=__webpack_require__(16),_CustomEventConverter2=_interopRequireDefault(_CustomEventConverter),_PolyTarget=__webpack_require__(73),_PolyTarget2=_interopRequireDefault(_PolyTarget),_Finder=__webpack_require__(17),_Finder2=_interopRequireDefault(_Finder),PdfImage=function(_ImageBase){function PdfImage(context,width,height,color,pdf,n){_classCallCheck(this,PdfImage);var _this=_possibleConstructorReturn(this,_ImageBase.call(this,context,width,height,color));return _this.query="",_this.n=n,_this.pdf=pdf,_this.v={x:0,y:0,z:0,set:function(x,y,z){return this.x=x,this.y=y,this.z=z,this},transform:function(m){var x=m.m[0][0]*this.x+m.m[1][0]*this.y+m.m[2][0]*this.z,y=m.m[0][1]*this.x+m.m[1][1]*this.y+m.m[2][1]*this.z,z=m.m[0][2]*this.x+m.m[0][2]*this.y+m.m[2][0]*this.z;return this.x=x,this.y=y,this.z=z,this}},_this.m={m:[[1,0,0],[0,1,0],[0,0,1]],set:function(m00,m01,m02,m10,m11,m12,m20,m21,m22){return this.m=[[m00,m01,m02],[m10,m11,m12],[m20,m21,m22]],this}},_this.startRender=function(){_this.pdf.getHandler(_this.render.bind(_this))},Promise.resolve().then(function(){return _this.pdf.getHandler(_this.init.bind(_this))}),_this.cssLayerRequests=[],_this}return _inherits(PdfImage,_ImageBase),PdfImage.prototype.setQuery=function(query){this.query=query.trim(),this.textContent&&this.setHits(this.textContent)},PdfImage.prototype.rectSize=function(r){return{width:r[2]-r[0],height:r[3]-r[1]}},PdfImage.prototype.createPoly=function(m,p,s){var poly=[],v=this.v;return v.set(p.x,p.y,1).transform(m),poly.push({x:v.x,y:v.y}),v.set(p.x,p.y+s.height,1).transform(m),poly.push({x:v.x,y:v.y}),v.set(p.x+s.width,p.y+s.height,1).transform(m),poly.push({x:v.x,y:v.y}),v.set(p.x+s.width,p.y,1).transform(m),poly.push({x:v.x,y:v.y}),poly},PdfImage.prototype.getSimulatedDoc=function(){return this},PdfImage.prototype.simulate=function(e,doc,x,y){this.eventConverter&&this.eventConverter.convert(e,{doc:doc,x:x,y:y})},PdfImage.prototype.setAnnotations=function(annos){var _this2=this,t=this.viewport.transform,htmls=[],r=function(n){return(100*n+"").substr(0,5)},targets=[];this.m.set(t[0],t[1],0,t[2],t[3],0,t[4],t[5],1);for(var _iterator=annos,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}var anno=_ref;if("Link"===anno.subtype||"Widget"===anno.subtype){var rect=anno.rect,aPos={x:rect[0],y:rect[1]},aSz=this.rectSize(rect),_target=new _PolyTarget2.default(this.createPoly(this.m,aPos,aSz).map(function(p){return{x:p.x/_this2.viewport.width,y:1-p.y/_this2.viewport.height}}));_target.anno=anno,_target.callback=this.annoClb.bind(this),targets.push(_target);var p=_target.poly;htmls.push('<div class="fb3d-block fb3d-link" style="top: '+r(1-p[2].y)+"%; left: "+r(p[0].x)+"%; width: "+r(p[2].x-p[0].x)+"%; height: "+r(p[2].y-p[0].y)+'%;"><a></a></div>')}}if(targets.length){this.eventConverter=new _CustomEventConverter2.default(this.wnd,this.doc,_PolyTarget2.default.test,this.getSimulatedDoc());for(var _iterator2=targets,_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[Symbol.iterator]();;){var _ref2;if(_isArray2){if(_i2>=_iterator2.length)break;_ref2=_iterator2[_i2++]}else{if(_i2=_iterator2.next(),_i2.done)break;_ref2=_i2.value}var target=_ref2;this.eventConverter.addCustom(target)}}this.cssLayer={html:htmls.length?"<pdf-layer>"+htmls.join("")+"</pdf-layer>":void 0},this.resolveCssLayerRequests()},PdfImage.prototype.resolveCssLayerRequests=function(){if(this.cssLayer)for(var _iterator3=this.cssLayerRequests,_isArray3=Array.isArray(_iterator3),_i3=0,_iterator3=_isArray3?_iterator3:_iterator3[Symbol.iterator]();;){var _ref3;if(_isArray3){if(_i3>=_iterator3.length)break;_ref3=_iterator3[_i3++]}else{if(_i3=_iterator3.next(),_i3.done)break;_ref3=_i3.value}var r=_ref3;r(this.cssLayer.html?this.cssLayer:void 0)}},PdfImage.prototype.getCSSLayer=function(){var _this3=this;return new Promise(function(resolve){_this3.cssLayerRequests.push(resolve),_this3.resolveCssLayerRequests()})},PdfImage.prototype.setHits=function(textContent){this.textContent=textContent,""!==this.query&&(this.finder=new _Finder2.default(textContent.items.map(function(item){return item.str}),this.query,{contexts:!1}))},PdfImage.prototype.renderHits=function(){var _this4=this;if(this.finder){for(var testSz=(this.page.view,(0,_libs.$)('<div style="position: absolute; visibility: hidden;"></div>').appendTo("body")),textDiv=testSz[0],baseOffset=testSz.offset().left,_iterator4=this.finder.getHits(),_isArray4=Array.isArray(_iterator4),_i4=0,_iterator4=_isArray4?_iterator4:_iterator4[Symbol.iterator]();;){var _ref4;if(_isArray4){if(_i4>=_iterator4.length)break;_ref4=_iterator4[_i4++]}else{if(_i4=_iterator4.next(),_i4.done)break;_ref4=_i4.value}var hit=_ref4,item=this.textContent.items[hit.index],t=_libs.PDFJS.Util.transform(this.viewport.transform,item.transform),style=this.textContent.styles[item.fontName],angle=Math.atan2(t[1],t[0])+(style.vertical?Math.PI/2:0),fontHeight=Math.sqrt(t[2]*t[2]+t[3]*t[3]),fontAscent=style.ascent?style.ascent*fontHeight:style.descent?(1+style.descent)*fontHeight:fontHeight;testSz.html(item.str.substr(0,hit.offset)+"<span>"+item.str.substr(hit.offset,hit.length)+"</span>"+item.str.substr(hit.offset+hit.length)),textDiv.style.fontSize=fontHeight+"px",textDiv.style.fontFamily=style.fontFamily;var testSpan=testSz.find("span"),iwidth=style.vertical?item.height*this.viewport.scale:item.width*this.viewport.scale,width=testSz.width(),relativeOffset=(testSpan.offset().left-baseOffset)/width;this.m.set(1,0,0,0,1,0,t[4]+fontAscent*Math.sin(angle),t[5]-fontAscent*Math.cos(angle),1);var poly=this.createPoly(this.m,{x:relativeOffset*iwidth,y:0},{width:iwidth*testSpan.width()/width,height:testSpan.height()});poly=poly.map(function(p){return{x:p.x/_this4.viewport.width,y:1-p.y/_this4.viewport.height}}),this.renderHit(poly)}testSz.remove()}},PdfImage.prototype.annoClb=function(e,data){this.context.dispatchEvent&&this.context.dispatchEvent({type:"pdfAnnotation",event:e,annotation:data.target.anno})},PdfImage.prototype.calcViewport=function(){var scale=_BaseMathUtils2.default.calcScale(this.size.width,this.size.height,this.resW,this.resH);(!this.viewport||Math.abs(this.viewport.scale-scale)>1e-4)&&(this.viewport=this.page.getViewport({scale:scale}),"full"!==this.type&&("right"===this.type?(this.viewport.offsetX+=.5*this.viewport.width*1.0005,this.viewport.transform[4]-=.5*this.viewport.width*1.0005,this.viewport.width*=.5/1.0005):this.viewport.width/=2),this.resW=this.width=this.viewport.width,this.resH=this.height=this.viewport.height)},PdfImage.prototype.init=function(){var _this5=this;this.type=this.pdf.getPageType(this.n),this.pdf.getPage(this.n).then(function(page){_this5.page=page,_this5.size=_Pdf2.default.getPageSize(page),"full"!==_this5.type&&(_this5.size.width/=2),page.getAnnotations().then(_this5.setAnnotations.bind(_this5)),page.getTextContent().then(_this5.setHits.bind(_this5)),_this5.calcViewport(),_this5.finishLoad()}).catch(function(e){console.error("Cannot load PDF page: "+(_this5.n+1)),console.error(e),_this5.finishLoad()})},PdfImage.prototype.setResolution=function(res){_ImageBase.prototype.setResolution.call(this,res),this.page&&this.calcViewport()},PdfImage.prototype.render=function(handler){var _this6=this;if(this.page){this.pushCtx();this.ctx.clearRect(0,0,this.c.width,this.c.height),this.renderTask=this.page.render({canvasContext:this.ctx,viewport:this.viewport}),this.renderTask.onContinue=function(continueRender){_this6.renderPause?_this6.continueRender=continueRender:continueRender()},this.renderTask.promise.then(function(){_this6.renderHits(),_this6.popCtx(),_this6.finishRender()}).catch(function(e){_this6.popCtx(),_this6.finishRender(!0)})}else this.renderBlankPage(),this.finishRender()},PdfImage}(_ImageBase3.default);exports.default=PdfImage},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _libs=__webpack_require__(0),Search=function(){function Search(container,pages){_classCallCheck(this,Search),this.container=container,this.pages=pages,this.prevResults=[],container.html('\n      <div class="search">\n        <div class="query">\n          <input class="inpQuery" type="text" maxlength="30" value="" />\n        </div>\n        <div class="results">\n        </div>\n        <div class="status">\n\n        </div>\n      </div>\n    '.fb3dQFilter()),this.query=container.find(".query input"),this.results=container.find(".results"),this.status=container.find(".status"),this.binds={navigate:this.navigate.bind(this),doQuery:this.doQuery.bind(this)},this.query.on("keydown",this.binds.doQuery),this.results.on("click",this.binds.navigate)}return Search.prototype.dispose=function(){this.results.off("click",this.binds.navigate),this.query.off("keydown",this.binds.doQuery)},Search.prototype.navigate=function(e){if(e.preventDefault(),void 0!==this.onNavigate){var target=(0,_libs.$)(e.target);if(!target.hasClass("result")){var t=target.find(".result");if(t.length)target=t;else for(;target.length&&!target.hasClass("result");)target=(0,_libs.$)(target[0].parentNode)}var page=target.attr("data");void 0!==page&&this.onNavigate(parseInt(page))}},Search.prototype.doQuery=function(){var _this=this;if(this.onQuery){var queryStamp=this.queryStamp=Date.now();setTimeout(function(){queryStamp===_this.queryStamp&&_this.onQuery(_this.query[0].value.trim())},1e3)}},Search.prototype.setResults=function(results,lastPage){this.prevResults.length&&results[0]!==this.prevResults[0]&&(this.prevResults=[],this.results.html(""));for(var htmls=[],i=this.prevResults.length;i<results.length;++i){var result=results[i];htmls.push('<div class="result" data="'+result.page+'">'),htmls.push("<a>"),htmls.push("<div>"+result.contexts.join("</div><div>")+"</div>"),htmls.push("</a>"),htmls.push("</div>")}(0,_libs.$)(htmls.join("")).appendTo(this.results),this.prevResults=[].concat(results),void 0===lastPage?this.status.html(""):this.status.html(lastPage+1+" of "+this.pages)},Search}();exports.default=Search},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _libs=__webpack_require__(0),_ImageBase2=__webpack_require__(6),_ImageBase3=_interopRequireDefault(_ImageBase2),_Utils=__webpack_require__(3),_Utils2=_interopRequireDefault(_Utils),StaticImage=function(_ImageBase){function StaticImage(context,width,height,color,src){_classCallCheck(this,StaticImage);var _this=_possibleConstructorReturn(this,_ImageBase.call(this,context,width,height,color));return _this.binds={},_this.image=new Image,_this.image.crossOrigin="Anonymous",_this.binds.imageLoad=function(){_this.width=_this.image.width,_this.height=_this.image.height,_this.resH=_this.height/_this.width*_this.resW,_this.startRender=function(){_this.renderImage(_this.image),_this.finishRender()},_this.finishLoad()},_this.binds.imageError=function(){_this.startRender=function(){_this.renderNotFoundPage(),_this.finishRender()},_this.finishLoad()},(0,_libs.$)(_this.image).on("load",_this.binds.imageLoad).on("error",_this.binds.imageError),_this.image.src=_Utils2.default.normalizeUrl(src),_this}return _inherits(StaticImage,_ImageBase),StaticImage.prototype.dispose=function(){(0,_libs.$)(this.image).off("load",this.binds.imageLoad).off("error",this.binds.imageError),this.image.src="",delete this.image,_ImageBase.prototype.dispose.call(this)},StaticImage}(_ImageBase3.default);exports.default=StaticImage},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _libs=__webpack_require__(0),TextureAnimator=function(){function TextureAnimator(img,tilesHoriz,tilesVert,numTiles,tileDispDuration){_classCallCheck(this,TextureAnimator);var texture=new _libs.THREE.Texture;texture.minFilter=_libs.THREE.LinearFilter,texture.image=img,texture.needsUpdate=!0,this.texture=texture,this.tilesHorizontal=tilesHoriz,this.tilesVertical=tilesVert,this.numberOfTiles=numTiles,texture.repeat.set(1/this.tilesHorizontal,1/this.tilesVertical),this.tileDisplayDuration=tileDispDuration,this.currentDisplayTime=0,this.currentTile=0}return TextureAnimator.prototype.update=function(milliSec){for(this.currentDisplayTime+=milliSec;this.currentDisplayTime>this.tileDisplayDuration;){this.currentDisplayTime-=this.tileDisplayDuration,++this.currentTile,this.currentTile==this.numberOfTiles&&(this.currentTile=0);var currentColumn=this.currentTile%this.tilesHorizontal;this.texture.offset.x=currentColumn/this.tilesHorizontal;var currentRow=Math.floor(this.currentTile/this.tilesHorizontal);this.texture.offset.y=currentRow/this.tilesVertical}},TextureAnimator.prototype.dispose=function(){var img=this.texture.image;img.height=img.width=0,this.texture.dispose()},TextureAnimator}();exports.default=TextureAnimator},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _libs=__webpack_require__(0),_Utils=__webpack_require__(3),_Utils2=_interopRequireDefault(_Utils),_MouseEventConverter2=__webpack_require__(57),_MouseEventConverter3=_interopRequireDefault(_MouseEventConverter2),_ThreeEventConverter=__webpack_require__(20),_ThreeEventConverter2=_interopRequireDefault(_ThreeEventConverter),ThreeMouseEventConverter=function(_MouseEventConverter){function ThreeMouseEventConverter(wnd,doc,visualWorld,test){_classCallCheck(this,ThreeMouseEventConverter);var _this=_possibleConstructorReturn(this,_MouseEventConverter.call(this,wnd,doc,visualWorld.element));return _Utils2.default.extends(_this,new _ThreeEventConverter2.default(visualWorld,test)),_this}return _inherits(ThreeMouseEventConverter,_MouseEventConverter),ThreeMouseEventConverter.prototype.getCallback=function(object){return object.object.userData.mouseCallback},ThreeMouseEventConverter.prototype.setCoordsFromEvent=function(e){var jElement=(0,_libs.$)(this.element),offset=jElement.offset();return this.coords.x=(e.pageX-offset.left)/jElement.width()*2-1,this.coords.y=-(e.pageY-offset.top)/jElement.height()*2+1,this.coords},ThreeMouseEventConverter}(_MouseEventConverter3.default);exports.default=ThreeMouseEventConverter},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _libs=__webpack_require__(0),_Utils=__webpack_require__(3),_Utils2=_interopRequireDefault(_Utils),_TouchEventConverter2=__webpack_require__(67),_TouchEventConverter3=_interopRequireDefault(_TouchEventConverter2),_ThreeEventConverter=__webpack_require__(20),_ThreeEventConverter2=_interopRequireDefault(_ThreeEventConverter),ThreeTouchEventConverter=function(_TouchEventConverter){function ThreeTouchEventConverter(wnd,doc,visualWorld,test){_classCallCheck(this,ThreeTouchEventConverter);var _this=_possibleConstructorReturn(this,_TouchEventConverter.call(this,wnd,doc,visualWorld.element));return _Utils2.default.extends(_this,new _ThreeEventConverter2.default(visualWorld,test)),_this}return _inherits(ThreeTouchEventConverter,_TouchEventConverter),ThreeTouchEventConverter.prototype.getCallback=function(object){return object.object.userData.touchCallback},ThreeTouchEventConverter.prototype.setCoordsFromEvent=function(e){var jElement=(0,_libs.$)(this.element),offset=jElement.offset(),touches=e.touches||e.originalEvent.touches,touch=touches.length?touches[0]:(this.lastTouches||[{pageX:0,pageY:0}])[0],pageX=touch.pageX,pageY=touch.pageY;return this.lastTouches=touches.length?touches:this.lastTouches,this.coords.x=(pageX-offset.left)/jElement.width()*2-1,this.coords.y=-(pageY-offset.top)/jElement.height()*2+1,this.coords},ThreeTouchEventConverter}(_TouchEventConverter3.default);exports.default=ThreeTouchEventConverter},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_libs=__webpack_require__(0),_ImageFactory=__webpack_require__(8),_ImageFactory2=_interopRequireDefault(_ImageFactory),_GraphUtils=__webpack_require__(4),_GraphUtils2=_interopRequireDefault(_GraphUtils),Thumbnails=function(){function Thumbnails(context,container,thumbnailsClb,size){var _this=this,props=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{kWtoH:210/297};_classCallCheck(this,Thumbnails),this.container=container,this.p=props,this.thumbnailsClb=thumbnailsClb,this.size=size,this.queue={first:0,len:0},this.canvas=_GraphUtils2.default.createCanvas(),this.imageFactory=new _ImageFactory2.default(_extends({},context,{renderCanvas:this.canvas,renderCanvasCtx:this.canvas.getContext("2d")})),this.thumbnails=[];for(var i=0;i<size;++i){var info=this.thumbnailsClb(i);this.thumbnails.push(_extends({},info,{index:i,loaded:"thumbnail-image"===info.type,heading:null,thumbnail:null,title:info.title||i}))}this.binds={update:this.update.bind(this),navigate:function(e){if(e.preventDefault(),_this.onNavigate){for(var node=e.target;node&&!node.dataThumbnail;)node=node.parentNode;_this.onNavigate(node.dataThumbnail.index)}}},this.container.on("scroll",this.binds.update)}return Thumbnails.prototype.getSize=function(){return this.size},Thumbnails.prototype.setEnable=function(enable){this.enable=enable,this.update()},Thumbnails.prototype.dispose=function(){this.container.find("a").off("click",this.binds.navigate),this.container.off("scroll",this.binds.update),this.container.html(""),this.canvas.height=this.canvas.width=0,delete this.canvas},Thumbnails.prototype.setLoadQueue=function(first,len){var _this2=this;first=Math.min(first,this.size-1),len=Math.min(len,this.size-first),this.queue={first:first,len:len},Promise.resolve().then(function(){return _this2.update()})},Thumbnails.prototype.load=function(thumbnail){var _this3=this;this.loading=!0;var wrapper=this.imageFactory.build(thumbnail,void 0===thumbnail.number?thumbnail.index:thumbnail.number,300*this.p.kWtoH,300);wrapper.onChange=function(canvas){_this3.setImage(thumbnail,canvas.toDataURL("image/png")),thumbnail.loaded=!0,wrapper.dispose(),_this3.loading=!1,Promise.resolve().then(function(){return _this3.update()})}},Thumbnails.prototype.getActive=function(){for(var first=this.container.scrollTop(),last=first+this.container.height(),res=[],_iterator=this.thumbnails,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}var thumbnail=_ref;Math.max(thumbnail.first,first)<Math.min(thumbnail.last,last)&&res.push(thumbnail)}return res},Thumbnails.prototype.update=function(){if(!this.loading&&this.canvas){if(this.enable){this.built||this.render();for(var active=this.getActive(),_iterator2=active,_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[Symbol.iterator]();;){var _ref2;if(_isArray2){if(_i2>=_iterator2.length)break;_ref2=_iterator2[_i2++]}else{if(_i2=_iterator2.next(),_i2.done)break;_ref2=_i2.value}var thumbnail=_ref2;if(!thumbnail.loaded){this.load(thumbnail);break}}}if(!this.loading)for(var i=this.queue.first;i<this.queue.first+this.queue.len;++i){var t=this.thumbnails[i];if(!t.loaded){this.load(t);break}}}},Thumbnails.prototype.setImage=function(thumbnail,img){var trigger=thumbnail.img!==img;thumbnail.img=img,thumbnail.thumbnail&&(thumbnail.thumbnail.css("background-image",["url('",img,"')"].join("")),thumbnail.thumbnail.removeClass("loading")),trigger&&this.container.trigger("fb3d.thumbnails.thumbnailLoaded",[thumbnail])},Thumbnails.prototype.render=function(){for(var elements=['<div class="thumbnails">'],i=0;i<this.size;++i)elements.push(['<div class="item"><a><div class="thumbnail loading" style="padding-top:'+Math.round(100/this.p.kWtoH)+'%;"></div></a><div class="heading"><a title="',i+1,'">',i+1,"</a></div></div>"].join(""));elements.push("</div>"),this.container.append(elements.join(""));for(var items=this.container.find(".item"),base=this.container.find(".thumbnails").offset().top,_i3=0;_i3<items.length;++_i3){var item=(0,_libs.$)(items[_i3]);this.thumbnails[_i3].heading=item.find(".heading"),this.thumbnails[_i3].thumbnail=item.find(".thumbnail"),this.thumbnails[_i3].first=item.offset().top-base,this.thumbnails[_i3].last=this.thumbnails[_i3].first+item.height(),this.thumbnails[_i3].loaded&&this.setImage(this.thumbnails[_i3],this.thumbnails[_i3].img||this.thumbnails[_i3].src);for(var as=item.find("a"),j=0;j<as.length;++j){as[j].dataThumbnail=this.thumbnails[_i3]}}this.container.find("a").on("click",this.binds.navigate),this.built=!0},Thumbnails}();exports.default=Thumbnails},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _libs=__webpack_require__(0),_EventConverter2=__webpack_require__(7),_EventConverter3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_EventConverter2),TouchConverter=function(_EventConverter){function TouchConverter(wnd,doc,element){_classCallCheck(this,TouchConverter);var _this=_possibleConstructorReturn(this,_EventConverter.call(this,wnd,doc));return _this.element=element,_this.binds={convert:_this.convert.bind(_this)},(0,_libs.$)(_this.element).on("touchstart touchmove",_this.binds.convert),(0,_libs.$)(_this.doc).on("touchend",_this.binds.convert),_this}return _inherits(TouchConverter,_EventConverter),TouchConverter.prototype.dispose=function(){(0,_libs.$)(this.element).off("touchstart touchmove",this.binds.convert),(0,_libs.$)(this.doc).off("touchend",this.binds.convert)},TouchConverter}(_EventConverter3.default);exports.default=TouchConverter},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var UserMessageController=(__webpack_require__(0),function(){function UserMessageController(view){_classCallCheck(this,UserMessageController),this.view=view,this.showMessage=!1,this.message="",this.updateView()}return UserMessageController.prototype.dispose=function(){this.updateView(),delete this.view},UserMessageController.prototype.setError=function(text){this.showMessage=!0,this.message=['<div class="text error">',text,"</div>"].join(""),this.updateView()},UserMessageController.prototype.updateView=function(){this.view&&(this.view.setState("widUserMessage",{enable:!0,visible:this.showMessage,active:!1}),this.view.setState("txtUserMessage",{value:this.message,visible:!0}))},UserMessageController}());exports.default=UserMessageController},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_libs=__webpack_require__(0),View=function(){function View(parentContainer,onLoad){var _this3=this,template=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,View),this.pendings={},this.binds={onResize:this.onResize.bind(this)},this.parentContainer=(0,_libs.$)(parentContainer),this.isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,this.isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);var initUrl=this.isSafari?View.initUrl:void 0;this.parentContainer.html('<iframe title="View" style="border: 0;'+(this.isIOS?"":" width: 100%; height: 100%")+'" '+(initUrl?' src="'+initUrl+'"':"")+' scrolling="no"></iframe>'),this.frame=this.parentContainer.find("iframe")[0];var build=function build(){_this3.isIOS&&((0,_libs.$)(_this3.parentContainer[0].ownerDocument.defaultView).on("resize",_this3.binds.onResize),_this3.onResize(),setTimeout(_this3.checkIframeSize.bind(_this3),250)),_this3.container=(0,_libs.$)(_this3.frame.contentDocument.body),_this3.container.css("margin","0"),_this3.head=(0,_libs.$)(_this3.frame.contentDocument.head),_this3.onLoad=onLoad,_this3.handlers=[],_this3.styleData={};var script=template.html?template.script:_this3.getTemplate().script,urls=void 0,files=void 0,links=void 0,templateName=void 0;"function"==typeof template?(urls={},files=template(),links=[],templateName=files.name):(links=template.links||_this3.getTemplate().links,urls={styles:template.styles||_this3.getTemplate().styles,html:[template.html||_this3.getTemplate().html],script:script?[script]:[]},templateName=template.name,files={}),templateName&&_this3.container.addClass(templateName),_this3.loadFiles(urls,files).then(function(){for(var _loop4=function(){if(_isArray7){if(_i7>=_iterator7.length)return"break";_ref7=_iterator7[_i7++]}else{if(_i7=_iterator7.next(),_i7.done)return"break";_ref7=_i7.value}var style=_ref7,textCss=style.data,url=style.url;textCss=textCss.replace(/url\(['"](.*?)["']\)/g,function(r,r1){return["url('",_this3.urlResolver(url,r1),"')"].join("")}),(0,_libs.$)('<style type="text/css">'+textCss+"</style>").appendTo(_this3.head);var match=textCss.match(/\/\*json-data:(([\n\r]|.)*?)\*\//);if(match)try{_this3.styleData=_extends({},_this3.styleData,JSON.parse(match[1]))}catch(e){console.error(e)}},_iterator7=files.styles,_isArray7=Array.isArray(_iterator7),_i7=0,_iterator7=_isArray7?_iterator7:_iterator7[Symbol.iterator]();;){var _ref7,_ret4=_loop4();if("break"===_ret4)break}_this3.container.html(_this3.translate(files.html[0].data)),_this3.jLinks=[];for(var _iterator8=links,_isArray8=Array.isArray(_iterator8),_i8=0,_iterator8=_isArray8?_iterator8:_iterator8[Symbol.iterator]();;){var _ref8;if(_isArray8){if(_i8>=_iterator8.length)break;_ref8=_iterator8[_i8++]}else{if(_i8=_iterator8.next(),_i8.done)break;_ref8=_i8.value}var _link=_ref8;_this3.jLinks.push((0,_libs.$)(["<link ",_this3.objToAttrsStr(_extends({},_link,{href:_this3.urlResolver(_this3.getCurrentUrl(),_link.href)})),">"].join("")).appendTo(_this3.head))}if(files.script[0]){var init=eval(files.script[0].data);_this3.templateObject=init(_this3.container)}else _this3.templateObject={};_this3.linkControls={};for(var _iterator9=_this3.getLinks(),_isArray9=Array.isArray(_iterator9),_i9=0,_iterator9=_isArray9?_iterator9:_iterator9[Symbol.iterator]();;){var _ref9;if(_isArray9){if(_i9>=_iterator9.length)break;_ref9=_iterator9[_i9++]}else{if(_i9=_iterator9.next(),_i9.done)break;_ref9=_i9.value}var id=_ref9;_this3.linkControls[id]=_this3.container.find("."+id),_this3.binds[id]=View.handleLinkEvent.bind({getHandlers:_this3.getHandlers.bind(_this3),id:id,ctrl:_this3.linkControls[id]}),_this3.linkControls[id].on("click",_this3.binds[id])}_this3.widgetControls={};for(var _iterator10=_this3.getWidgets(),_isArray10=Array.isArray(_iterator10),_i10=0,_iterator10=_isArray10?_iterator10:_iterator10[Symbol.iterator]();;){var _ref10;if(_isArray10){if(_i10>=_iterator10.length)break;_ref10=_iterator10[_i10++]}else{if(_i10=_iterator10.next(),_i10.done)break;_ref10=_i10.value}var _id=_ref10;_this3.widgetControls[_id]=_this3.container.find("."+_id)}_this3.inputControls={};for(var _iterator11=_this3.getInputs(),_isArray11=Array.isArray(_iterator11),_i11=0,_iterator11=_isArray11?_iterator11:_iterator11[Symbol.iterator]();;){var _ref11;if(_isArray11){if(_i11>=_iterator11.length)break;_ref11=_iterator11[_i11++]}else{if(_i11=_iterator11.next(),_i11.done)break;_ref11=_i11.value}var _id2=_ref11;_this3.inputControls[_id2]=_this3.container.find("."+_id2),_this3.binds[_id2]=View.handleInputEvent.bind({getHandlers:_this3.getHandlers.bind(_this3),id:_id2,ctrl:_this3.inputControls[_id2]}),_this3.inputControls[_id2].on("keyup",_this3.binds[_id2])}_this3.formControls={};for(var _iterator12=_this3.getForms(),_isArray12=Array.isArray(_iterator12),_i12=0,_iterator12=_isArray12?_iterator12:_iterator12[Symbol.iterator]();;){var _ref12;if(_isArray12){if(_i12>=_iterator12.length)break;_ref12=_iterator12[_i12++]}else{if(_i12=_iterator12.next(),_i12.done)break;_ref12=_i12.value}var _id3=_ref12;_this3.formControls[_id3]=_this3.container.find("."+_id3),_this3.binds[_id3]=View.handleFormEvent.bind({getHandlers:_this3.getHandlers.bind(_this3),id:_id3,ctrl:_this3.formControls[_id3]}),_this3.formControls[_id3].on("submit",_this3.binds[_id3])}_this3.textControls={};for(var _iterator13=_this3.getTexts(),_isArray13=Array.isArray(_iterator13),_i13=0,_iterator13=_isArray13?_iterator13:_iterator13[Symbol.iterator]();;){var _ref13;if(_isArray13){if(_i13>=_iterator13.length)break;_ref13=_iterator13[_i13++]}else{if(_i13=_iterator13.next(),_i13.done)break;_ref13=_i13.value}var _id4=_ref13;_this3.textControls[_id4]=_this3.container.find("."+_id4)}_this3.stateSetters=[{map:_this3.linkControls,setter:_this3.setLinkControlState.bind(_this3)},{map:_this3.widgetControls,setter:_this3.setWidgetControlState.bind(_this3)},{map:_this3.inputControls,setter:_this3.setInputControlState.bind(_this3)},{map:_this3.textControls,setter:_this3.setTextControlState.bind(_this3)}],_this3.initView(),_this3.onLoad&&_this3.onLoad(),_this3.fireLinksOnLoadEvent()}).catch(function(res){return console.error(res)})};initUrl?(0,_libs.$)(this.frame.contentWindow).on("load",build):(this.frame.contentWindow.stop&&this.frame.contentWindow.stop(),build())}return View.classProperty=function(ctrl,className,value){value?ctrl.addClass(className):ctrl.removeClass(className)},View.attributeProperty=function(ctrl,attributeName,value){value?ctrl.attr(attributeName,value):ctrl.removeAttr(attributeName)},View.callHandlers=function(handlers,id,e,data){for(var _iterator=handlers,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}var handler=_ref;handler[id]?handler[id](e,data):handler.handleDefault&&handler.handleDefault(id,e,data)}},View.handleEvent=function(id,getHandlers,e,data){View.callHandlers(getHandlers(id),id,e,data)},View.handleLinkEvent=function(e){e.preventDefault(),this.ctrl.hasClass("disabled")||View.handleEvent(this.id,this.getHandlers,e)},View.handleInputEvent=function(e){View.handleEvent(this.id,this.getHandlers,e,e.target.value)},View.handleFormEvent=function(e){e.preventDefault(),View.handleEvent(this.id,this.getHandlers,e)},View.prototype.getLinks=function(){return null},View.prototype.getWidgets=function(){return null},View.prototype.getInputs=function(){return null},View.prototype.getTexts=function(){return null},View.prototype.getTemplate=function(){return{}},View.prototype.getHandlers=function(id){return this.handlers},View.prototype.callLater=function(handlers,id,e,data,ms){var _this=this;this.pendings[id]={timestamp:(new Date).getTime()},setTimeout(function(){var timestamp=(new Date).getTime(),pending=_this.pendings[id];pending&&timestamp-pending.timestamp>=ms&&(View.callHandlers(handlers,id,e,data),delete _this.pendings[id])},ms)},View.prototype.loadFiles=function(urls,files){for(var tasks=[],_iterator2=Object.keys(urls),_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[Symbol.iterator]();;){var _ref2;if("break"===function(){if(_isArray2){if(_i2>=_iterator2.length)return"break";_ref2=_iterator2[_i2++]}else{if(_i2=_iterator2.next(),_i2.done)return"break";_ref2=_i2.value}var name=_ref2;files[name]=[];for(var _iterator3=urls[name],_isArray3=Array.isArray(_iterator3),_i3=0,_iterator3=_isArray3?_iterator3:_iterator3[Symbol.iterator]();;){var _ref3;if("break"===function(){if(_isArray3){if(_i3>=_iterator3.length)return"break";_ref3=_iterator3[_i3++]}else{if(_i3=_iterator3.next(),_i3.done)return"break";_ref3=_i3.value}var url=_ref3;tasks.push(new Promise(function(resolve,reject){_libs.$.get(url,function(data){files[name].push({url:url,data:data}),resolve()}).fail(function(res){reject(res)})}))}())break}}())break}return Promise.all(tasks)},View.prototype.getRootUrl=function(){return location.origin+"/"},View.prototype.getCurrentUrl=function(){return location.href.substr(0,location.href.lastIndexOf("/")+1)},View.prototype.urlResolver=function(baseUrl,url){if(url=url.replace(/\\/g,"/"),"/"===url.charAt(0)&&(baseUrl=this.getRootUrl(),url=url.substr(1)),baseUrl.match(/^https{0,1}:/i)||(baseUrl=this.urlResolver(this.getCurrentUrl(),baseUrl)),!url.match(/^(data|blob|http|https):/i)){baseUrl=baseUrl.replace(/\\/g,"/");var p=baseUrl.lastIndexOf("/");url=(~p?baseUrl.substr(0,p+1):"")+url;var parts=url.split("/");url=[];for(var _iterator4=parts,_isArray4=Array.isArray(_iterator4),_i4=0,_iterator4=_isArray4?_iterator4:_iterator4[Symbol.iterator]();;){var _ref4;if(_isArray4){if(_i4>=_iterator4.length)break;_ref4=_iterator4[_i4++]}else{if(_i4=_iterator4.next(),_i4.done)break;_ref4=_i4.value}var part=_ref4;"."===part||(".."===part?url.length>3&&url.pop():url.push(part))}url=url.join("/")}return url},View.prototype.objToAttrsStr=function(o){for(var res=[],_iterator5=Object.keys(o),_isArray5=Array.isArray(_iterator5),_i5=0,_iterator5=_isArray5?_iterator5:_iterator5[Symbol.iterator]();;){var _ref5;if(_isArray5){if(_i5>=_iterator5.length)break;_ref5=_iterator5[_i5++]}else{if(_i5=_iterator5.next(),_i5.done)break;_ref5=_i5.value}var _name=_ref5;res.push([_name,'="',o[_name],'"'].join(""))}return res.join(" ")},View.prototype.checkIframeSize=function(){this.frame&&((Math.abs(this.frame.width-this.parentContainer.width())>1||Math.abs(this.frame.height-this.parentContainer.height())>1)&&this.onResize(),setTimeout(this.checkIframeSize.bind(this),250))},View.prototype.onResize=function(){this.frame.width=this.parentContainer.width(),this.frame.height=this.parentContainer.height()},View.prototype.translate=function(html){return html.replace(/<\$tr>(.*)<\/\$tr>/gi,function(s0,s1){return(0,_libs.tr)(s1)})},View.prototype.fireLinksOnLoadEvent=function(){var _this2=this;if(this.templateObject&&this.templateObject.linkLoaded)for(var _iterator6=this.jLinks,_isArray6=Array.isArray(_iterator6),_i6=0,_iterator6=_isArray6?_iterator6:_iterator6[Symbol.iterator]();;){var _ref6,_ret3=function(){if(_isArray6){if(_i6>=_iterator6.length)return"break";_ref6=_iterator6[_i6++]}else{if(_i6=_iterator6.next(),_i6.done)return"break";_ref6=_i6.value}var jLink=_ref6,link=jLink[0],img=new Image;img.onerror=function(){return _this2.templateObject.linkLoaded(link)},img.src=link.href}();if("break"===_ret3)break}},View.prototype.dispose=function(){delete this.textControls;for(var _iterator14=this.getLinks(),_isArray14=Array.isArray(_iterator14),_i14=0,_iterator14=_isArray14?_iterator14:_iterator14[Symbol.iterator]();;){var _ref14;if(_isArray14){if(_i14>=_iterator14.length)break;_ref14=_iterator14[_i14++]}else{if(_i14=_iterator14.next(),_i14.done)break;_ref14=_i14.value}var id=_ref14;this.linkControls[id].off("click",this.binds[id])}delete this.linkControls,delete this.widgetControls;for(var _iterator15=this.getInputs(),_isArray15=Array.isArray(_iterator15),_i15=0,_iterator15=_isArray15?_iterator15:_iterator15[Symbol.iterator]();;){var _ref15;if(_isArray15){if(_i15>=_iterator15.length)break;_ref15=_iterator15[_i15++]}else{if(_i15=_iterator15.next(),_i15.done)break;_ref15=_i15.value}var _id5=_ref15;this.inputControls[_id5].off("keyup",this.binds[_id5])}delete this.inputControls;for(var _iterator16=this.getForms(),_isArray16=Array.isArray(_iterator16),_i16=0,_iterator16=_isArray16?_iterator16:_iterator16[Symbol.iterator]();;){var _ref16;if(_isArray16){if(_i16>=_iterator16.length)break;_ref16=_iterator16[_i16++]}else{if(_i16=_iterator16.next(),_i16.done)break;_ref16=_i16.value}var _id6=_ref16;this.formControls[_id6].off("submit",this.binds[_id6])}delete this.formControls,!this.templateObject.dispose||this.templateObject.dispose(),delete this.templateObject,this.isIOS&&(0,_libs.$)(this.parentContainer[0].ownerDocument.defaultView).off("resize",this.binds.onResize),this.parentContainer.html(""),delete this.frame},View.prototype.getStyleData=function(){return this.styleData},View.prototype.getContainer=function(){return this.container[0]},View.prototype.getParentContainer=function(){return this.parentContainer[0]},View.prototype.addHandler=function(handler){this.handlers.push(handler)},View.prototype.initView=function(){},View.setControlState=function(ctrl,defaults,state,stateHandlers){if(ctrl&&ctrl[0]){var st=_extends({},defaults,state);for(var _name2 in st)st.hasOwnProperty(_name2)&&stateHandlers[_name2]&&stateHandlers[_name2](ctrl,st[_name2])}},View.prototype.setLinkControlState=function(id,state){View.setControlState(this.linkControls[id],{visible:!0,active:!1,enable:!0},state,View.linkStateHandlers)},View.prototype.setWidgetControlState=function(id,state){View.setControlState(this.widgetControls[id],{visible:!0,active:!1,enable:!0},state,View.widgetStateHandlers)},View.prototype.setInputControlState=function(id,state){View.setControlState(this.inputControls[id],{visible:!0,enable:!0,value:""},state,View.inputStateHandlers)},View.prototype.setTextControlState=function(id,state){View.setControlState(this.textControls[id],{visible:!0,value:""},state,View.textStateHandlers)},View.prototype.onItemStateChanged=function(){},View.prototype.setState=function(id,state){for(var _iterator17=this.stateSetters,_isArray17=Array.isArray(_iterator17),_i17=0,_iterator17=_isArray17?_iterator17:_iterator17[Symbol.iterator]();;){var _ref17;if(_isArray17){if(_i17>=_iterator17.length)break;_ref17=_iterator17[_i17++]}else{if(_i17=_iterator17.next(),_i17.done)break;_ref17=_i17.value}var item=_ref17;if(item.map[id]){item.setter(id,state),this.onItemStateChanged(id,state);break}}},View}();View.initUrl=URL.createObjectURL(new Blob(['\n    <!DOCTYPE html>\n    <html lang="en">\n      <head>\n        <meta charset="utf-8">\n      </head>\n      <body style="height: 100vh">\n      </body>\n    </html>\n  '],{type:"text/html"})),View.linkStateHandlers={visible:function(ctrl,value){return View.classProperty(ctrl,"hidden",!value)},active:function(ctrl,value){return View.classProperty(ctrl,"active",value)},enable:function(ctrl,value){return View.classProperty(ctrl,"disabled",!value)}},View.widgetStateHandlers={visible:function(ctrl,value){return View.classProperty(ctrl,"hidden",!value)},active:function(ctrl,value){return View.classProperty(ctrl,"active",value)},enable:function(ctrl,value){return View.classProperty(ctrl,"disabled",!value)}},View.inputStateHandlers={visible:function(ctrl,value){return View.classProperty(ctrl,"hidden",!value)},value:function(ctrl,_value){return ctrl[0].value=_value},enable:function(ctrl,value){return View.attributeProperty(ctrl,"disabled",!value)}},View.textStateHandlers={visible:function(ctrl,value){return View.classProperty(ctrl,"hidden",!value)},value:function(ctrl,_value2){return ctrl.html(_value2)}},exports.default=View},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_libs=__webpack_require__(0),_Utils=__webpack_require__(3),_Utils2=_interopRequireDefault(_Utils),_Orbit=__webpack_require__(59),_Orbit2=_interopRequireDefault(_Orbit),_ThreeMouseEventConverter=__webpack_require__(64),_ThreeMouseEventConverter2=_interopRequireDefault(_ThreeMouseEventConverter),_ThreeTouchEventConverter=__webpack_require__(65),_ThreeTouchEventConverter2=_interopRequireDefault(_ThreeTouchEventConverter),_Drag=__webpack_require__(51),_Drag2=_interopRequireDefault(_Drag),_CSS3DRenderer=__webpack_require__(12),_CSS3DRenderer2=_interopRequireDefault(_CSS3DRenderer),VisualWorld=function(_THREE$EventDispatche){function VisualWorld(wnd,doc,container){var useHelpers=arguments.length>3&&void 0!==arguments[3]&&arguments[3];_classCallCheck(this,VisualWorld);var _this=_possibleConstructorReturn(this,_THREE$EventDispatche.call(this));_this.checkUpdateFlag=!0,_this.wnd=wnd,_this.doc=doc,_this.jContainer=container,_this.renderCallbacks=[],_this.diag=_this.getDiag(),_this.clock=new _libs.THREE.Clock,_this.raycaster=new _libs.THREE.Raycaster,_this.scene=new _libs.THREE.Scene,_this.cssScene=new _libs.THREE.Scene,_this.camera=new _libs.THREE.PerspectiveCamera(30,_this.width()/_this.height(),.2,2e3);_this.camera.position.x=0,_this.camera.position.y=5.5,_this.camera.position.z=0,_this.renderer=new _libs.THREE.WebGLRenderer({alpha:!0,precision:VisualWorld.getPrecision(),antialias:!0}),_this.renderer.shadowMap.enabled=!0,_this.renderer.shadowMap.type=_libs.THREE.PCFSoftShadowMap,_this.renderer.setClearColor(0,0),_this.renderer.setPixelRatio(Math.sqrt(_this.wnd.devicePixelRatio||1)),_this.renderer.setSize(_this.width(),_this.height()),_this.jContainer.append(_this.renderer.domElement),_this.cssRenderer=new _CSS3DRenderer2.default,_this.cssRenderer.setSize(_this.width(),_this.height()),(0,_libs.$)(_this.cssRenderer.domElement).css({position:"absolute",top:0,margin:0,padding:0}),_this.jContainer.append(_this.cssRenderer.domElement),_this.element=_this.cssRenderer.domElement,_this.textureLoader=new _libs.THREE.TextureLoader,_this.ambientLight=new _libs.THREE.AmbientLight(16777215),_this.scene.add(_this.ambientLight),_this.light=new _libs.THREE.DirectionalLight(0,1),_this.light.position.set(-6,6,-3);_this.light.castShadow=!0,_this.light.shadow.camera.left=-3,_this.light.shadow.camera.right=3,_this.light.shadow.camera.top=3,_this.light.shadow.camera.bottom=-3,_this.light.shadow.camera.near=.5,_this.light.shadow.camera.far=20,_this.light.shadow.mapSize.x=512,_this.light.shadow.mapSize.y=512,_this.scene.add(_this.light),_this.shadowPlace=new _libs.THREE.Mesh(new _libs.THREE.PlaneGeometry(10,10).rotateX(-Math.PI/2),new _libs.THREE.ShadowMaterial({color:0,transparent:!0,opacity:.2})),_this.shadowPlace.position.set(0,0,0),_this.shadowPlace.receiveShadow=!0,_this.shadowPlace.castShadow=!1,_this.scene.add(_this.shadowPlace),_this.controls=new _Orbit2.default(_this.camera,_this),_this.controls.target.y=.5;var cssScene=(0,_libs.$)(_this.cssRenderer.domElement).find("div"),tmpVector=new _libs.THREE.Vector3;_this.controls.addEventListener("change",function(){_this.camera.getWorldDirection(tmpVector),cssScene.css("display",tmpVector.y-_this.camera.position.y>0?"none":"block"),_this.updateThree()}),useHelpers&&_this.scene.add(new _libs.THREE.AxisHelper(5)),_this.binds={onWindowResize:_this.onWindowResize.bind(_this),animate:_this.animate.bind(_this)},(0,_libs.$)(_this.wnd).on("resize",_this.binds.onWindowResize),_this.mouseEvents=new _ThreeMouseEventConverter2.default(_this.wnd,_this.doc,_this),_this.touchEvents=new _ThreeTouchEventConverter2.default(_this.wnd,_this.doc,_this);var filterData={type:"mousemove"};return _this.mouseEvents.filter=function(element,e){var types=["mouseenter","mouseover","mouseleave","mouseout"],contains=function(p,c){return p===c||_libs.$.contains(p,c)};return"mousemove"===e.type&&(filterData.pageX=e.pageX,filterData.pageY=e.pageY),e.relatedTarget&&~types.indexOf(e.type)&&contains(element,e.target)&&contains(element,e.relatedTarget)?_extends({},e,filterData):e},_this.drag=new _Drag2.default(_this.wnd,_this.doc,_this),_this.onWindowResize(),_this.animate(),_this}return _inherits(VisualWorld,_THREE$EventDispatche),VisualWorld.prototype.getDiag=function(){var test=(0,_libs.$)('<div style="height: 1in; width: 1in; display: none;"></div>').appendTo(this.jContainer),r=new _libs.THREE.Vector2(screen.width/test.width(),screen.height/test.height());return test.remove(),r.length()},VisualWorld.prototype.updateThree=function(){this.light.userData.needsUpdate=!0},VisualWorld.prototype.setLight=function(ambient,directional){this.ambientLight.color.set(ambient),this.light.color.set(directional),this.updateThree()},VisualWorld.prototype.dispose=function(){delete this.binds.animate,(0,_libs.$)(this.wnd).off("resize",this.binds.onWindowResize),this.mouseEvents.dispose(),this.touchEvents.dispose(),this.drag.dispose(),this.controls.dispose()},VisualWorld.prototype.width=function(){return this.jContainer.width()||200},VisualWorld.prototype.height=function(){return this.jContainer.height()||200},VisualWorld.prototype.setExtraLighting=function(v){this.light.intensity=v},VisualWorld.prototype.isMobile=function(){return this.diag<_Utils2.default.MOBILE_DIAG},VisualWorld.prototype.getOrbit=function(){return this.controls},VisualWorld.prototype.setControlsState=function(state){this.controls.enabled=state},VisualWorld.prototype.getControlsState=function(){return this.controls.enabled},VisualWorld.prototype.onWindowResize=function(){var _this2=this,width=this.width(),height=this.height();if(width>1&&height>1){var updateCamera=function(camera){camera.aspect=width/height,camera.updateProjectionMatrix()},updateRenderer=function(renderer){renderer.setSize(width,height)};if(!this.lastResize||Math.abs(this.lastResize.width-width)+Math.abs(this.lastResize.height-height)>1){this.lastResize={width:width,height:height};var resizeStamp=this.resizeStamp=Date.now();setTimeout(function(){resizeStamp===_this2.resizeStamp&&(updateCamera(_this2.camera),updateRenderer(_this2.renderer),updateRenderer(_this2.cssRenderer),_this2.updateThree(),_this2.dispatchEvent({type:"resize"}))},10)}}else setTimeout(function(){_this2.onWindowResize()},250)},VisualWorld.prototype.addObject=function(object){this.scene.add(object)},VisualWorld.prototype.addCssObject=function(object){this.cssScene.add(object)},VisualWorld.prototype.removeCssObject=function(object){this.cssScene.remove(object)},VisualWorld.prototype.removeObject=function(object){this.scene.remove(object)},VisualWorld.prototype.animate=function(){this.binds.animate&&requestAnimationFrame(this.binds.animate),this.render()},VisualWorld.prototype.addRenderCallback=function(clb){this.renderCallbacks.push(clb)},VisualWorld.prototype.removeRenderCallback=function(clb){var i=this.renderCallbacks.indexOf(clb);~i&&this.renderCallbacks.splice(i,1)},VisualWorld.prototype.render=function(){var deltaTime=Math.min(this.clock.getDelta(),.034);this.controls.update(deltaTime);for(var _iterator=this.renderCallbacks,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}_ref(deltaTime)}this.cssRenderer.render(this.cssScene,this.camera);var render=!0;if(this.checkUpdateFlag){render=!1;for(var _iterator2=this.scene.children,_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[Symbol.iterator]();;){var _ref2;if(_isArray2){if(_i2>=_iterator2.length)break;_ref2=_iterator2[_i2++]}else{if(_i2=_iterator2.next(),_i2.done)break;_ref2=_i2.value}var o=_ref2;render=render||o.userData.needsUpdate,o.userData.needsUpdate=!1}}render&&this.renderer.render(this.scene,this.camera)},VisualWorld.getPrecision=function(){var scene=new _libs.THREE.Scene;scene.add(new _libs.THREE.AmbientLight(16777215));var camera=new _libs.THREE.PerspectiveCamera(30,1,1,100);camera.position.set(0,0,1),camera.lookAt(0,0,0);var renderer=new _libs.THREE.WebGLRenderer;renderer.setClearColor(16777215),renderer.setSize(1,1);var c=document.createElement("canvas"),ctx=c.getContext("2d");c.width=c.height=1,ctx.fillStyle="#ff0000",ctx.fillRect(0,0,c.width,c.height);var t=new _libs.THREE.Texture(c);t.needsUpdate=!0,scene.add(new _libs.THREE.Mesh(new _libs.THREE.PlaneGeometry(1,1,1,1),new _libs.THREE.MeshPhongMaterial({map:t}))),renderer.render(scene,camera);var p=function(c,x,y){var ps=new Uint8Array(4);return c.readPixels(x,y,1,1,c.RGBA,c.UNSIGNED_BYTE,ps),ps}(renderer.domElement.getContext("webgl")||renderer.domElement.getContext("experimental-webgl"),0,0);return 255===p[0]&&0===p[1]&&0===p[2]?"highp":"mediump"},VisualWorld}(_libs.THREE.EventDispatcher);exports.default=VisualWorld},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var YouTubeApi=function(){function YouTubeApi(){_classCallCheck(this,YouTubeApi)}return YouTubeApi.init=function(){return YouTubeApi.task||(YouTubeApi.task=new Promise(function(resolve){window.YT||(window.YT={loading:0,loaded:0}),window.YTConfig||(window.YTConfig={host:"http://www.youtube.com"}),YT.loading||(YT.loading=1,function(){var l=[];YT.ready=function(f){YT.loaded?f():l.push(f)},window.onYTReady=function(){YT.loaded=1;for(var i=0;i<l.length;i++)try{l[i]()}catch(e){}resolve()},YT.setConfig=function(c){for(var k in c)c.hasOwnProperty(k)&&(YTConfig[k]=c[k])};var a=document.createElement("script");a.type="text/javascript",a.id="www-widgetapi-script",a.src="https://s.ytimg.com/yts/jsbin/www-widgetapi-vfldn1jRM/www-widgetapi.js",a.async=!1;var c=document.currentScript;if(c){var n=c.nonce||c.getAttribute("nonce");n&&a.setAttribute("nonce",n)}var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}())})),YouTubeApi.task},YouTubeApi}();exports.default=YouTubeApi},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _Target2=__webpack_require__(23),_Target3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_Target2),CircleTarget=function(_Target){function CircleTarget(x,y,r){_classCallCheck(this,CircleTarget);var _this=_possibleConstructorReturn(this,_Target.call(this));return _this.p={x:x,y:y,r:r},_this}return _inherits(CircleTarget,_Target),CircleTarget.prototype.testIntersection=function(e,data){var res=void 0,x=data.x,y=data.y,p=this.p;return(x-p.x)*(x-p.x)+(y-p.y)*(y-p.y)<=p.r*p.r&&(res={target:this,data:data}),res},CircleTarget}(_Target3.default);exports.default=CircleTarget},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _Target2=__webpack_require__(23),_Target3=_interopRequireDefault(_Target2),_BaseMathUtils=__webpack_require__(2),_BaseMathUtils2=_interopRequireDefault(_BaseMathUtils),PolyTarget=function(_Target){function PolyTarget(poly){_classCallCheck(this,PolyTarget);var _this=_possibleConstructorReturn(this,_Target.call(this));return _this.poly=poly,_this}return _inherits(PolyTarget,_Target),PolyTarget.prototype.testIntersection=function(e,p){return _BaseMathUtils2.default.isInsidePoly(this.poly,p)?{target:this,data:p}:void 0},PolyTarget}(_Target3.default);exports.default=PolyTarget},function(module,exports,__webpack_require__){var define=!1;/*!
 * jQuery Mousewheel 3.1.13
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 */
    !function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):module.exports=factory}(function($){function handler(event){var orgEvent=event||window.event,args=slice.call(arguments,1),delta=0,deltaX=0,deltaY=0,absDelta=0,offsetX=0,offsetY=0;if(event=$.event.fix(orgEvent),event.type="mousewheel","detail"in orgEvent&&(deltaY=-1*orgEvent.detail),"wheelDelta"in orgEvent&&(deltaY=orgEvent.wheelDelta),"wheelDeltaY"in orgEvent&&(deltaY=orgEvent.wheelDeltaY),"wheelDeltaX"in orgEvent&&(deltaX=-1*orgEvent.wheelDeltaX),"axis"in orgEvent&&orgEvent.axis===orgEvent.HORIZONTAL_AXIS&&(deltaX=-1*deltaY,deltaY=0),delta=0===deltaY?deltaX:deltaY,"deltaY"in orgEvent&&(deltaY=-1*orgEvent.deltaY,delta=deltaY),"deltaX"in orgEvent&&(deltaX=orgEvent.deltaX,0===deltaY&&(delta=-1*deltaX)),0!==deltaY||0!==deltaX){if(1===orgEvent.deltaMode){var lineHeight=$.data(this,"mousewheel-line-height");delta*=lineHeight,deltaY*=lineHeight,deltaX*=lineHeight}else if(2===orgEvent.deltaMode){var pageHeight=$.data(this,"mousewheel-page-height");delta*=pageHeight,deltaY*=pageHeight,deltaX*=pageHeight}if(absDelta=Math.max(Math.abs(deltaY),Math.abs(deltaX)),(!lowestDelta||absDelta<lowestDelta)&&(lowestDelta=absDelta,shouldAdjustOldDeltas(orgEvent,absDelta)&&(lowestDelta/=40)),shouldAdjustOldDeltas(orgEvent,absDelta)&&(delta/=40,deltaX/=40,deltaY/=40),delta=Math[delta>=1?"floor":"ceil"](delta/lowestDelta),deltaX=Math[deltaX>=1?"floor":"ceil"](deltaX/lowestDelta),deltaY=Math[deltaY>=1?"floor":"ceil"](deltaY/lowestDelta),special.settings.normalizeOffset&&this.getBoundingClientRect){var boundingRect=this.getBoundingClientRect();offsetX=event.clientX-boundingRect.left,offsetY=event.clientY-boundingRect.top}return event.deltaX=deltaX,event.deltaY=deltaY,event.deltaFactor=lowestDelta,event.offsetX=offsetX,event.offsetY=offsetY,event.deltaMode=0,args.unshift(event,delta,deltaX,deltaY),nullLowestDeltaTimeout&&clearTimeout(nullLowestDeltaTimeout),nullLowestDeltaTimeout=setTimeout(nullLowestDelta,200),($.event.dispatch||$.event.handle).apply(this,args)}}function nullLowestDelta(){lowestDelta=null}function shouldAdjustOldDeltas(orgEvent,absDelta){return special.settings.adjustOldDeltas&&"mousewheel"===orgEvent.type&&absDelta%120==0}var nullLowestDeltaTimeout,lowestDelta,toFix=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],toBind="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],slice=Array.prototype.slice;if($.event.fixHooks)for(var i=toFix.length;i;)$.event.fixHooks[toFix[--i]]=$.event.mouseHooks;var special=$.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var i=toBind.length;i;)this.addEventListener(toBind[--i],handler,!1);else this.onmousewheel=handler;$.data(this,"mousewheel-line-height",special.getLineHeight(this)),$.data(this,"mousewheel-page-height",special.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var i=toBind.length;i;)this.removeEventListener(toBind[--i],handler,!1);else this.onmousewheel=null;$.removeData(this,"mousewheel-line-height"),$.removeData(this,"mousewheel-page-height")},getLineHeight:function(elem){var $elem=$(elem),$parent=$elem["offsetParent"in $.fn?"offsetParent":"parent"]();return $parent.length||($parent=$("body")),parseInt($parent.css("fontSize"),10)||parseInt($elem.css("fontSize"),10)||16},getPageHeight:function(elem){return $(elem).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};$.fn.extend({mousewheel:function(fn){return fn?this.bind("mousewheel",fn):this.trigger("mousewheel")},unmousewheel:function(fn){return this.unbind("mousewheel",fn)}})})},function(module,exports,__webpack_require__){!function(f,e){module.exports=e()}(0,function(){var f=function(){function e(a){return c.appendChild(a.dom),a}function u(a){for(var d=0;d<c.children.length;d++)c.children[d].style.display=d===a?"block":"none";l=a}var l=0,c=document.createElement("div");c.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",c.addEventListener("click",function(a){a.preventDefault(),u(++l%c.children.length)},!1);var k=(performance||Date).now(),g=k,a=0,r=e(new f.Panel("FPS","#0ff","#002")),h=e(new f.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var t=e(new f.Panel("MB","#f08","#201"));return u(0),{REVISION:16,dom:c,addPanel:e,showPanel:u,begin:function(){k=(performance||Date).now()},end:function(){a++;var c=(performance||Date).now();if(h.update(c-k,200),c>g+1e3&&(r.update(1e3*a/(c-g),100),g=c,a=0,t)){var d=performance.memory;t.update(d.usedJSHeapSize/1048576,d.jsHeapSizeLimit/1048576)}return c},update:function(){k=this.end()},domElement:c,setMode:u}};return f.Panel=function(e,f,l){var c=1/0,k=0,g=Math.round,a=g(window.devicePixelRatio||1),r=80*a,h=48*a,t=3*a,v=2*a,d=3*a,m=15*a,n=74*a,p=30*a,q=document.createElement("canvas");q.width=r,q.height=h,q.style.cssText="width:80px;height:48px";var b=q.getContext("2d");return b.font="bold "+9*a+"px Helvetica,Arial,sans-serif",b.textBaseline="top",b.fillStyle=l,b.fillRect(0,0,r,h),b.fillStyle=f,b.fillText(e,t,v),b.fillRect(d,m,n,p),b.fillStyle=l,b.globalAlpha=.9,b.fillRect(d,m,n,p),{dom:q,update:function(h,w){c=Math.min(c,h),k=Math.max(k,h),b.fillStyle=l,b.globalAlpha=1,b.fillRect(0,0,r,m),b.fillStyle=f,b.fillText(g(h)+" "+e+" ("+g(c)+"-"+g(k)+")",t,v),b.drawImage(q,d+a,m,n-a,p,d,m,n-a,p),b.fillRect(d+n-a,m,a,p),b.fillStyle=l,b.globalAlpha=.9,b.fillRect(d+n-a,m,a,g((1-h/w)*p))}}},f})},function(module,exports,__webpack_require__){__webpack_require__(25),module.exports=__webpack_require__(24)}]);