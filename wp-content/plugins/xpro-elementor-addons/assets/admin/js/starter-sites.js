!(function(t){let e,n,a,i,o=t(document),s=!1,r=!1,l=function(t){let e,n,a=window.location.search.substring(1).split("&");for(n=0;n<a.length;n++)if((e=a[n].split("="))[0]===t)return void 0===e[1]||decodeURIComponent(e[1]);},c=Swal.mixin({position:"bottom-end",customClass:{popup:"xs-importing-popup"},showConfirmButton:!1,allowEscapeKey:!1,toast:!0}),p=function(e){"object"!=typeof e||null===e||e.success?(t("#xs-demo-popup").html(e),c.fire({type:"info",html:t("#xs-demo-popup .xs-notification-title").html()}),c.showLoading()):u(e.data.message)},u=function(t=null,e=null,n=null,a=null){let i=xpro_elementor_starter_sites_object.text.failedImport.text;(i+=t||e||n||a?"<br/>"+xpro_elementor_starter_sites_object.text.failedImport.code:""),(i+=t||""),(i+=e||""),(i+=n||""),(i+=a||""),c.fire({type:"error",html:i}),d()},f=function(e=!1){c.fire({type:"info",html:t(".xs-notification-title").html()}),c.showLoading(),(s=!0),m(e)},d=function(){(s=!1),x()},m=function(t){return!!t&&!r&&((r=t).attr("disabled",!0),void r.closest(".xs-item").addClass("xs-action-importing"))},x=function(){if(!r)return!1;r.children(".xs-update").remove(),r.attr("disabled",!1),r.closest(".xs-item").removeClass("xs-action-importing"),(r=!1)};function h(){return(t.ajax({type:"POST",url:xpro_elementor_starter_sites_object.ajaxurl,data:{action:"content_screen",_wpnonce:e.val(),_wp_http_referer:n.val(),template_url:i,template_type:a}}).done(function(e){"object"!=typeof e||null===e||e.success?(p(e),new(function(){let e,n=0,o="",s="";function r(n){"object"==typeof n&&void 0!==n.message?(e.find("span").text(n.message),void 0!==n.url?n.hash===s?(e.find("span").text(xpro_elementor_starter_sites_object.text.failed),l()):((s=n.hash),t.ajax({type:"POST",url:n.url,data:n}).done(r).fail(r)):(n.done,l())):"object"!=typeof n||null===n||n.success?(e.find("span").text(xpro_elementor_starter_sites_object.text.error),l()):u(n.data.errorMessage?n.data.errorMessage:n.data.message)}
function l(){e&&(e.data("done-item")||(n++,e.attr("data-done-item",1)),e.find(".spinner").remove());let s=!1,c=t("tr.xs-available-content");c.each(function(){let n=t(this);""===o||s?((o=n.data("content")),(e=n),o&&(e.find("input:checkbox").is(":checked")?t.ajax({type:"POST",url:xpro_elementor_starter_sites_object.ajaxurl,data:{action:"import_content",wpnonce:xpro_elementor_starter_sites_object.wpnonce,content:o,template_url:i,template_type:a},}).done(r).fail(r):(e.find("span").text(xpro_elementor_starter_sites_object.text.skip),setTimeout(l,300))),(s=!1)):n.data("content")===o&&(s=!0)}),n>=c.length&&complete()}
return{init:function(){let e=t(".xs-pages");e.addClass("installing"),e.find("input").prop("disabled",!0),(complete=function(){return(t.ajax({type:"POST",url:xpro_elementor_starter_sites_object.ajaxurl,data:{action:"complete_screen"}}).done(function(e){return(t("#xs-demo-popup").html(e),Swal.fire({title:"Success",html:t("#xs-demo-popup .xs-notification-title").html(),type:"success",customClass:{popup:"xs-import-success-popup"},showCancelButton:!0,confirmButtonText:xpro_elementor_starter_sites_object.text.successImport.confirmButtonText,cancelButtonText:xpro_elementor_starter_sites_object.text.successImport.cancelButtonText,}).then((e)=>{e.value?window.open(t("#xs-demo-popup .xs-notification-title").attr("data-site-url"),"_blank"):location.reload()}),d(),!1)}).fail(function(t,e,n){console.log(t+" :: "+e+" :: "+n)}),!1)}),l()},}})().init()):u(e.data.errorMessage?e.data.errorMessage:e.data.message)}).fail(function(t,e,n){return u("",t,e,n),!1}),!1)}
function g(a){return(t.ajax({type:"POST",url:xpro_elementor_starter_sites_object.ajaxurl,data:{action:"plugin_screen",_wpnonce:e.val(),_wp_http_referer:n.val(),recommendedPlugins:a}}).done(function(a){p(a),c.showLoading(),t("#xs-demo-popup .xs-plugins-wrap").find("li").each(function(){return((function a(i){if("xs-no-recommended-plugins"===i.attr("id"))return h(),!1;t.ajax({type:"POST",url:xpro_elementor_starter_sites_object.ajaxurl,data:{action:"install_plugin",_wpnonce:e.val(),_wp_http_referer:n.val(),slug:i.data("slug"),plugin:i.data("slug")+"/"+i.data("main_file")},}).done(function(t){if("object"==typeof t&&void 0!==t.success){if(t.success){if((i.attr("data-completed",1),!i.next("li").length))return h(),!1;setTimeout(a(i.next("li")),1e3)}else{let e="";t.data.errorMessage&&((e=t.data.errorMessage+"<br/>"),(e+=xpro_elementor_starter_sites_object.text.failedImport.pluginError+"<br/>"),t.data.plugin&&(e+=xpro_elementor_starter_sites_object.text.failedImport.plugin+t.data.plugin+"<br/>"),t.data.slug&&(e+=xpro_elementor_starter_sites_object.text.failedImport.slug+t.data.slug+"<br/>")),u(e||t.data.message)}}else setTimeout(a(i),1e3)}).fail(function(t,e,n){return u("",t,e,n),!1})})(t(this)),!1)})}).fail(function(t,e,n){return u("",t,e,n),!1}),!1)}
o.ready(function(){o.on("submit","#xs-upload-zip-form",function(a){if((a.preventDefault(),s))return!1;!(function(a){if(void 0===window.FormData)return!0;let i=new FormData(),o=a.find("#xs-upload-zip-archive"),s=t("#xs-empty-file");if(!o.val())return s.show(),u(s.html()),!1;s.hide(),f();let r=o[0].files[0];(e=a.find("input[name=_wpnonce]")),(n=a.find("input[name=_wp_http_referer]")),i.append("xs-upload-zip-archive",r),i.append("action","xpro_elementor_starter_sites_ajax_setup"),i.append("_wpnonce",e.val()),i.append("_wp_http_referer",n.val()),o.val(""),t.ajax({type:"POST",url:xpro_elementor_starter_sites_object.ajaxurl,data:i,cache:!1,contentType:!1,processData:!1}).done(function(t){return"object"!=typeof t&&(t=JSON.parse(t)),t.success?(h(),!1):(u(t.data.message),!1)}).fail(function(t,e,n){return u("",t,e,n),!1})})(t(this))}),o.on("click",".xs-item .xs-demo-import",function(o){if((o.preventDefault(),s))return!1;let r=t(this),l=t(this).data("plugins"),c="",p=xpro_elementor_starter_sites_object.text.confirmImport.html;l?(l.forEach(function(t,e){t.name&&((c+=" "+t.name),e<l.length-1&&(c+=","))}),(p=p.replace("xs_replace_plugins",c))):(p=p.replace("xs_replace_plugins",xpro_elementor_starter_sites_object.text.confirmImport.no_plugins)),Swal.fire({title:xpro_elementor_starter_sites_object.text.confirmImport.title,html:p,width:"800px",customClass:{popup:"xs-confirm-import-popup"},showCancelButton:!0,confirmButtonText:xpro_elementor_starter_sites_object.text.confirmImport.confirmButtonText,cancelButtonText:xpro_elementor_starter_sites_object.text.confirmImport.cancelButtonText,}).then((o)=>{var s,c;let p;o.value&&(f(r),(s=r),(c=l),(a=(p=s.closest(".xs-item")).data("template_type")),(i=p.data("template_url")),(e=p.find("input[name=_wpnonce]")),(n=p.find("input[name=_wp_http_referer]")),"array"===a?g(c):t.ajax({type:"POST",url:xpro_elementor_starter_sites_object.ajaxurl,data:{action:"demo_download_and_unzip",_wpnonce:e.val(),_wp_http_referer:n.val(),demo_file:i,demo_file_type:a}}).done(function(t){return t.success?(g(c),!1):(u(t.data.errorMessage?t.data.errorMessage:t.data.message,jqXHR,textStatus,errorThrown),!1)}).fail(function(t,e,n){return u("",t,e,n),!1}))})}),o.on("click",".xs-wp-reset",function(e){e.preventDefault();let n=t(this);Swal.fire({title:xpro_elementor_starter_sites_object.text.confirmReset.title,text:xpro_elementor_starter_sites_object.text.confirmReset.text,type:"warning",customClass:{popup:"xs-reset-popup"},showCancelButton:!0,confirmButtonText:xpro_elementor_starter_sites_object.text.confirmReset.confirmButtonText,cancelButtonText:xpro_elementor_starter_sites_object.text.confirmReset.cancelButtonText,}).then((e)=>{e.value&&t.ajax({type:"POST",url:xpro_elementor_starter_sites_object.ajaxurl,data:{action:"xpro_elementor_starter_sites_before_reset",_wpnonce:n.siblings("input[name=xpro-elementor-starter-sites-reset]").val(),_wp_http_referer:n.siblings("input[name=_wp_http_referer]").val()},beforeSend:function(t){c.fire({type:"info",html:xpro_elementor_starter_sites_object.text.confirmReset.resetting}),c.showLoading()},}).done(function(e){if(!e.success)return u(e.data.message),!1;window.location.href=t(".xs-wp-reset").attr("href")}).fail(function(t,e,n){u("",t,e,n)})})}),o.on("click",".xs-upload-zip-button,.button-cancel-upload",function(e){e.preventDefault()});let r,p,d={},m,x;setTimeout(function(){var e,n;let a=t(".xs-filter-content-wrapper").isotope({itemSelector:".xs-item",filter:function(){let e=t(this),n=!p||e.text().match(p),a=!r||e.is(r);return n&&a},});function i(){let e=t(a.isotope("getFilteredItemElements"));t(".xs-filter-btn").each(function(n,a){let i=t(a),o=i.attr("data-filter");if(!o)return;let s=e.filter(o).length;i.find(".xs-count").text(s)})}
a.imagesLoaded().progress(function(){a.isotope("layout")}),i(),t(".xs-filter-group").on("click",".xs-filter-btn",function(){let e=t(this),n=e.parents(".xs-filter-group").attr("data-filter-group");e.siblings().removeClass("xs-filter-btn-active"),e.addClass("xs-filter-btn-active"),(d[n]=e.attr("data-filter")),(r=(function(t){let e="";for(let n in t)e+=t[n];return e})(d)),setTimeout(function(){a.isotope(),(e.hasClass("xs-fp-filter")||e.hasClass("xs-type-filter"))&&i()},300),t(this).parent().hasClass("xs-import-available-categories-lists")&&(t(this).parents(".xs-filter-header").removeClass("active"),t(".xs-filter-category-select-content").html(t(this).text()));});let o,s=t(".xs-search-filter").keyup(((e=function(){(p=RegExp(s.val(),"gi")),a.isotope(),i()}),(n=n||100),function(){clearTimeout(o);let t=arguments,a=this;o=setTimeout(function(){e.apply(a,t)},n)}))},1),(m=l("reset")),(x=l("from")),"true"===m&&"xs-reset-wp"===x&&Swal.fire({title:xpro_elementor_starter_sites_object.text.resetSuccess.title,type:"success",customClass:{popup:"xs-reset-success-popup"},confirmButtonText:xpro_elementor_starter_sites_object.text.resetSuccess.confirmButtonText,})}),setTimeout(function(){let t=window.location.href;if(RegExp("[?|&]reset=[0-9a-zA-Z_+-|.,;]*").test(t)){let e=new URL(location);e.searchParams.delete("reset"),e.searchParams.delete("from"),history.replaceState(null,null,e)}},1500),t(".xs-filter-category-select").on("click",function(){t(this).parents(".xs-filter-header").toggleClass("active")}),o.on("ready",function(){t(".xs-header-right a.xs-wp-reset").removeClass("disable")})})(jQuery)