!function(e){e(window).on("elementor:init",function(){elementor.hooks.addFilter("editor/style/styleText",function(e,t){if(t){var n=t.model,o=n.get("settings").get("xpro_custom_css"),r=".elementor-element.elementor-element-"+n.get("id");return"document"===n.get("elType")&&(r=elementor.config.document.settings.cssWrapperSelector),o&&(e+=o.replace(/selector/g,r)),e}}),window.elementor.on("preview:loaded",function(){e("#elementor-panel-footer-settings").on("click",function(){e("body").delegate(".elementor-control-submit_preview_changes button","click",function(){e(this).find("i").addClass("xpro-spin"),$e.run("document/save/auto",{force:!0,onSuccess:function t(){elementor.reloadPreview(),elementor.once("preview:loaded",function(){$e.route("panel/page-settings/settings"),e(this).find("i").removeClass("xpro-spin")})}})})})});let t=async()=>{if(void 0!==window.parent.document){let t=e("#elementor-controls textarea",window.parent.document).attr("id");e("#"+t,window.parent.document).trigger("change");let n=e('.elementor-control-type-textarea textarea[data-setting="xpro_ai_prompt"]',window.parent.document).val(),o=e('.elementor-control-type-text input[data-setting="xpro_ai_seo"]',window.parent.document).val(),r=e(".elementor-control-xpro_ai_generate button",window.parent.document);if(0===n.trim().length)e('.elementor-control-type-textarea textarea[data-setting="xpro_ai_prompt"]',window.parent.document).css({borderColor:"#e74c3c"});else{e('.elementor-control-type-textarea textarea[data-setting="xpro_ai_prompt"]',window.parent.document).css({borderColor:"inherit"}),r.prop("disabled",!0),r.find("i").addClass("xpro-spin");let a=new FormData;a.append("prompt",n),a.append("keyword",o),a.append("action","xpro_ai_chat_box"),a.append("nonce",XproEditor.nonce);let i=await fetch(XproEditor.ajaxURL,{method:"POST",body:a}),p="";if(i.ok){r.prop("disabled",!1),r.find("i").removeClass("xpro-spin");let s=await i.json();p=s.data.message||XproEditor.serverBusy;let l=window.parent.tinyMCE.get(t);null!==l&&(l.setContent(p.trim()),l.fire("change"))}else r.prop("disabled",!1),r.find("i").removeClass("xpro-spin"),alert(await i.text())}}};elementor.channels.editor.on("xpro_ai:autocontent:generate",t)})}(jQuery);